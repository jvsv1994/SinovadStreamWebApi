var aC=Object.defineProperty,lC=Object.defineProperties,uC=Object.getOwnPropertyDescriptors,Jy=Object.getOwnPropertySymbols,cC=Object.prototype.hasOwnProperty,dC=Object.prototype.propertyIsEnumerable,Qy=Math.pow,Xy=(Fn,Ve,O)=>Ve in Fn?aC(Fn,Ve,{enumerable:!0,configurable:!0,writable:!0,value:O}):Fn[Ve]=O,po=(Fn,Ve)=>{for(var O in Ve||(Ve={}))cC.call(Ve,O)&&Xy(Fn,O,Ve[O]);if(Jy)for(var O of Jy(Ve))dC.call(Ve,O)&&Xy(Fn,O,Ve[O]);return Fn},mo=(Fn,Ve)=>lC(Fn,uC(Ve));(self.webpackChunkapp=self.webpackChunkapp||[]).push([[179],{6407:(Fn,Ve,O)=>{"use strict";O.d(Ve,{I:()=>U});var r=O(9808),e=O(2382),S=O(5782),R=O(3060),j=O(4893);let U=(()=>{class L{}return L.\u0275fac=function(f){return new(f||L)},L.\u0275mod=j.oAB({type:L}),L.\u0275inj=j.cJS({imports:[[r.ez,e.u5,S.m,e.UX,R.G]]}),L})()},4322:(Fn,Ve,O)=>{"use strict";O.d(Ve,{P9:()=>r,Fg:()=>e,DD:()=>S,Ln:()=>R,yw:()=>U,O5:()=>L});var r=(()=>{return(b=r||(r={}))[b.MediaServerState=1]="MediaServerState",b[b.MediaType=2]="MediaType",b[b.VideoTransmissionType=3]="VideoTransmissionType",b[b.TranscoderPreset=4]="TranscoderPreset",r;var b})(),e=(()=>{return(b=e||(e={}))[b.Started=1]="Started",b[b.Stopped=2]="Stopped",e;var b})(),S=(()=>{return(b=S||(S={}))[b.Movie=1]="Movie",b[b.TvSerie=2]="TvSerie",S;var b})(),R=(()=>{return(b=R||(R={}))[b.None=1]="None",b[b.MPEGDASH=2]="MPEGDASH",b[b.HLS=3]="HLS",R;var b})(),U=(()=>{return(b=U||(U={}))[b.GET=0]="GET",b[b.POST=1]="POST",b[b.PUT=2]="PUT",b[b.DELETE=3]="DELETE",U;var b})(),L=(()=>{return(b=L||(L={}))[b.Empty=0]="Empty",b[b.Generated=1]="Generated",b[b.Initialized=2]="Initialized",b[b.LoadedMetada=3]="LoadedMetada",b[b.LoadedData=4]="LoadedData",L;var b})()},4522:(Fn,Ve,O)=>{"use strict";O.d(Ve,{j:()=>_});var r=O(4893),e=O(9092),S=O(4322),R=O(2571),j=O(520),U=O(1085),L=O(2313),b=O(4307),f=O(9808),c=O(7065);function g(D,y){if(1&D&&(r.TgZ(0,"div",5),r.TgZ(1,"div"),r._uU(2),r.qZA(),r.qZA()),2&D){const A=r.oxw();r.xp6(2),r.hij(" ",A.title," ")}}function v(D,y){if(1&D&&(r.TgZ(0,"div",27),r.TgZ(1,"div",28),r._UZ(2,"div",29),r.qZA(),r.qZA()),2&D){const A=r.oxw().$implicit,I=r.MAs(2),G=r.oxw(3);r.xp6(1),r.Udp("width",I.clientWidth-8+"px"),r.xp6(1),r.Udp("width",G.getWidthProgressItem(A))}}function T(D,y){if(1&D&&(r.TgZ(0,"div",30),r.TgZ(1,"span"),r._uU(2),r.qZA(),r.qZA()),2&D){const A=r.oxw().$implicit;r.xp6(2),r.Oqu(A.Title)}}function k(D,y){if(1&D&&(r.TgZ(0,"div"),r.TgZ(1,"div",31),r.TgZ(2,"span"),r._uU(3),r.qZA(),r.qZA(),r.qZA()),2&D){const A=r.oxw().$implicit;r.xp6(3),r.AsE("",A.Title," ",A.Subtitle,"")}}function N(D,y){if(1&D){const A=r.EpF();r.TgZ(0,"div",20),r.TgZ(1,"button",21,22),r.NdJ("click",function(){const ee=r.CHM(A).$implicit;return r.oxw(3).onClickItem(ee)}),r._UZ(3,"img",23),r.YNc(4,v,3,4,"ng-template",24),r.qZA(),r.YNc(5,T,3,1,"div",25),r.YNc(6,k,4,2,"div",26),r.qZA()}if(2&D){const A=y.$implicit,I=r.oxw(3);r.xp6(1),r.hYB("id","item_",A.TvSerieId?A.TvSerieId:A.MovieId,"_",A.MediaType,""),r.xp6(2),r.Q6J("src",I.getUrlByItemMovieDataBase(A),r.LSH),r.xp6(1),r.Q6J("ngIf",A.CurrentTime&&A.DurationTime),r.xp6(1),r.Q6J("ngIf",!A.Subtitle),r.xp6(1),r.Q6J("ngIf",A.Subtitle)}}function B(D,y){if(1&D){const A=r.EpF();r.TgZ(0,"section",7),r.TgZ(1,"div",8),r.TgZ(2,"span"),r._uU(3),r.qZA(),r.qZA(),r.TgZ(4,"div",9),r.TgZ(5,"div",10),r.TgZ(6,"div",11,12),r.NdJ("click",function(){r.CHM(A);const G=r.MAs(11),ee=r.MAs(7),de=r.MAs(17);return r.oxw(2).onClickButtonLeftScroll(G,ee,de)}),r._UZ(8,"img",13),r.ALo(9,"formatDataPipe"),r.qZA(),r.qZA(),r.TgZ(10,"div",14,15),r.TgZ(12,"div",16,17),r.YNc(14,N,7,6,"ng-template",4),r.qZA(),r.qZA(),r.TgZ(15,"div",10),r.TgZ(16,"div",18,19),r.NdJ("click",function(){r.CHM(A);const G=r.MAs(11),ee=r.MAs(7),de=r.MAs(17);return r.oxw(2).onClickButtonRightScroll(G,ee,de)}),r._UZ(18,"img",13),r.ALo(19,"formatDataPipe"),r.qZA(),r.qZA(),r.qZA(),r.qZA()}if(2&D){const A=r.oxw().$implicit;r.MGl("id","section_",A.Id,""),r.xp6(3),r.Oqu(A.Name),r.xp6(5),r.Q6J("src",r.xi3(9,5,"scroll-left.png","GetImageURLByKey"),r.LSH),r.xp6(6),r.Q6J("ngForOf",A.ListItems),r.xp6(4),r.Q6J("src",r.xi3(19,8,"scroll-right.png","GetImageURLByKey"),r.LSH)}}function x(D,y){if(1&D&&r.YNc(0,B,20,11,"section",6),2&D){const A=y.$implicit;r.Q6J("ngIf",A.ListItems&&A.ListItems.length>0)}}const P=function(D){return{small:D}};let _=(()=>{class D extends e.X{constructor(A,I,G,ee,de,ue){super(A,ee,de,ue),this.restProvider=A,this.ref=I,this.http=G,this.events=ee,this.domSanitizer=de,this.sharedData=ue,this.toggleVideo=new r.vpe,this.showItemView=new r.vpe,this.focus=new r.vpe,this.showLoadingApp=!0,this.itemsGroupList=[],this._window=window}getWidthProgressItem(A){return A.CurrentTime/A.DurationTime*100+"%"}onClickButtonLeftScroll(A,I,G){A.scrollLeft=A.scrollLeft-300,this.verifyIfShoOrHiddenScrollButtons(A,I,G)}onClickButtonRightScroll(A,I,G){A.scrollLeft=A.scrollLeft+300,this.verifyIfShoOrHiddenScrollButtons(A,I,G)}verifyIfShoOrHiddenScrollButtons(A,I,G){I.style.display=A.scrollLeft<=0?"none":"flex",G.style.display=A.scrollWidth==A.scrollLeft+A.offsetWidth?"none":"flex",this.ref.detectChanges()}onInitializeItemsRow(A,I,G){setTimeout(()=>{this.verifyIfShoOrHiddenScrollButtons(A,I,G)},250)}onSelectItem(A){A.scrollIntoView({block:"center"}),this.ref.detectChanges()}getAllProgramsByUser(A,I){this.restProvider.executeSinovadApiService(S.yw.GET,"/videos/GetAllTvProgramsOrganized?userId="+this.sharedData.userData.Id+"&profileId="+this.sharedData.currentProfile.Id+"&searchMovies="+A+"&searchTvSeries="+I).then(ee=>{this.itemsGroupList=ee.Data,this.ref.detectChanges(),this.focus.emit()},ee=>{console.error(ee)})}onClickItem(A){null!=A.CurrentTime&&A.ContinueVideo?this.continueVideoByItem(A):A.MovieId?this.getMovieDetail(A):A.TvSerieId&&this.getTvSerieDetail(A)}continueVideoByItem(A){this.restProvider.executeSinovadApiService(S.yw.GET,A.TvSerieId?"/videos/GetTvSerieDetail?userId="+this.sharedData.userData.Id+"&tvSerieId="+A.TvSerieId:"/videos/GetMovieDetail?movieId="+A.MovieId).then(G=>{let ee=G.Data;ee.Item=A;var de=this.CreateBuilderVideoFromItem(A,ee);this.sharedData.currentVideo=de,this.toggleVideo.emit(!0),this.ref.detectChanges()},G=>{console.error(G)})}getMovieDetail(A){this.restProvider.executeSinovadApiService(S.yw.GET,"/videos/GetMovieDetail?movieId="+A.MovieId).then(I=>{let G=I.Data;G.Item=A,this.setDataAndShowItemView(G)},I=>{console.error(I)})}getTvSerieDetail(A){this.restProvider.executeSinovadApiService(S.yw.GET,"/videos/GetTvSerieDetail?userId="+this.sharedData.userData.Id+"&tvSerieId="+A.TvSerieId).then(G=>{let ee=G.Data;ee.Item=A,this.setDataAndShowItemView(ee)},G=>{console.error(G)})}setDataAndShowItemView(A){A.ListSeasons&&A.ListSeasons.length>0&&(A.CurrentSeason=A.ListSeasons[0]),this.showItemView.emit(A)}ngAfterViewInit(){this.sharedData.currentProfile&&(this.currentMediaTypeID==S.DD.Movie?this.getAllProgramsByUser(!0,!1):this.getAllProgramsByUser(this.currentMediaTypeID!=S.DD.TvSerie,!0))}ngOnInit(){}closeVideo(){this.sharedData.currentVideo=void 0,this.toggleVideo.emit(!1),this.ref.detectChanges()}}return D.\u0275fac=function(A){return new(A||D)(r.Y36(R.C),r.Y36(r.sBO),r.Y36(j.eN),r.Y36(U.n),r.Y36(L.H7),r.Y36(b.g))},D.\u0275cmp=r.Xpm({type:D,selectors:[["app-horizontal-item-list"]],inputs:{currentMediaTypeID:"currentMediaTypeID",title:"title"},outputs:{toggleVideo:"toggleVideo",showItemView:"showItemView",focus:"focus"},features:[r.qOj],decls:5,vars:7,consts:[[1,"sinovadclient-principal-section",3,"ngClass"],[1,"sinovad-principal-item-list-container","sinovad-no-cordova"],["class","sinovad-media-title",4,"ngIf"],[1,"sinovad-list-itsinovad-container","sinovad-custom-container"],["ngFor","",3,"ngForOf"],[1,"sinovad-media-title"],["tabindex","0",3,"id",4,"ngIf"],["tabindex","0",3,"id"],[1,"sinovad-list-itsinovad-row-title"],[1,"sinovad-list-itsinovad-row-container"],[2,"width","0px","height","0px"],[1,"sinovad-list-button-scroll-left",3,"click"],["scrollLeftButton",""],[3,"src"],["tabindex","0",1,"sinovad-list-itsinovad-row"],["itemsRowContainer",""],[1,"sinovad-list-itsinovad-content"],["content",""],[1,"sinovad-list-button-scroll-right",3,"click"],["scrollRightButton",""],[1,"sinovad-item-container"],[1,"sinovad-item-button","sinovad-item-button-vertical",3,"id","click"],["itemContainer",""],["referrerpolicy","no-referrer",3,"src"],[3,"ngIf"],["class","sinovad-item-caption-container",4,"ngIf"],[4,"ngIf"],[1,"sinovad-item-progress-bar-absolute-container"],[1,"sinovad-item-progress-bar-container"],[1,"sinovad-item-progress-bar-content"],[1,"sinovad-item-caption-container"],[1,"sinovad-item-title-caption-container"]],template:function(A,I){1&A&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.YNc(2,g,3,1,"div",2),r.TgZ(3,"div",3),r.YNc(4,x,1,1,"ng-template",4),r.qZA(),r.qZA(),r.qZA()),2&A&&(r.Q6J("ngClass",r.VKq(5,P,I.isSmallDevice())),r.xp6(2),r.Q6J("ngIf",I.title),r.xp6(1),r.Udp("height",I.title?"calc(100% - 50px)":"100%"),r.xp6(1),r.Q6J("ngForOf",I.itemsGroupList))},directives:[f.mk,f.O5,f.sg],pipes:[c.A],styles:["button[_ngcontent-%COMP%]{outline:none!important;cursor:pointer!important;box-sizing:border-box!important}.sinovad-principal-item-list-container[_ngcontent-%COMP%]{display:block;height:100%;width:100%}.sinovadclient-principal-section[_ngcontent-%COMP%]{width:100%;background:#2d3744;color:#fff;height:100%}.sinovadclient-container-video[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;z-index:9999;display:flex;align-items:center;justify-content:center;background:black;top:0;left:0}.sinovad-media-title[_ngcontent-%COMP%]{padding:10px 0;height:50px;font-size:30px;font-weight:700;font-family:sans-serif;display:flex;align-items:center;border-bottom:1px solid #dedede;margin-left:16px;margin-right:16px}.sinovad-media-title[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:30px;padding:6px 10px;border-radius:5px;border:none;cursor:pointer;font-size:16px}.sinovadclient-title-section[_ngcontent-%COMP%]{margin:10px 10px 10px 16px;font-size:30px;font-weight:700}.sinovadclient-itsinovad-section[_ngcontent-%COMP%]{margin:10px}.sinovad-item-container[_ngcontent-%COMP%]{padding-right:10px;width:-moz-min-content;width:min-content;margin:6px;border-radius:6px}.sinovad-item-caption-container[_ngcontent-%COMP%]{font-size:20px;color:#000;font-weight:700;padding-top:10px;text-align:center;font-family:sans-serif}.sinovad-vertical-list-itsinovad-container[_ngcontent-%COMP%]{display:block;height:100%;width:100%;padding:10px;overflow-y:auto;overflow-x:hidden}.sinovad-item-caption-container[_ngcontent-%COMP%]{font-size:20px;color:#fff;font-weight:700;padding-top:10px;text-align:center;font-family:sans-serif}.sinovad-item-title-caption-container[_ngcontent-%COMP%]{font-size:20px;color:#fff;font-weight:700;padding-top:10px;text-align:left;font-family:sans-serif}.sinovad-item-subtitle-caption-container[_ngcontent-%COMP%]{font-size:20px;color:#fff;font-weight:400;padding-top:10px;text-align:left;font-family:sans-serif}.sinovad-list-itsinovad-container[_ngcontent-%COMP%]{padding:20px;overflow-x:hidden;overflow-y:auto;outline:none}.sinovad-list-itsinovad-content[_ngcontent-%COMP%]{display:flex}.sinovad-item-button[_ngcontent-%COMP%]{display:block;width:360px;height:210px;color:#000;cursor:pointer;text-align:center;min-width:360px;padding:0;border-radius:unset;border:none;background:transparent}.sinovad-item-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;max-width:unset;border-radius:10px;border:4px solid transparent}.sinovad-item-button[_ngcontent-%COMP%]   .sinovad-item-caption[_ngcontent-%COMP%]{position:absolute;margin-top:100px;font-size:20px;color:#fff;font-weight:700}.sinovad-item-button-vertical[_ngcontent-%COMP%]{min-width:230px;width:230px;height:310px}.sinovad-item-button[_ngcontent-%COMP%]:hover{width:370px;height:220px}.sinovad-item-button[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{border:4px solid white}.sinovad-item-button-vertical[_ngcontent-%COMP%]:hover{min-width:240px;width:240px;height:320px}.sinovad-item-button-vertical[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{border:4px solid white}.sinovad-item-button[_ngcontent-%COMP%]:focus-visible{width:370px;height:220px}.sinovad-item-button[_ngcontent-%COMP%]:focus-visible   img[_ngcontent-%COMP%]{border:4px solid white}.sinovad-item-button[_ngcontent-%COMP%]:focus{width:370px;height:220px}.sinovad-item-button[_ngcontent-%COMP%]:focus   img[_ngcontent-%COMP%]{border:4px solid white}.sinovad-item-button-vertical[_ngcontent-%COMP%]:focus-visible{min-width:240px;width:240px;height:320px}.sinovad-item-button-vertical[_ngcontent-%COMP%]:focus-visible   img[_ngcontent-%COMP%]{border:4px solid white}.sinovad-item-button-vertical[_ngcontent-%COMP%]:focus{min-width:240px;width:240px;height:320px}.sinovad-item-button-vertical[_ngcontent-%COMP%]:focus   img[_ngcontent-%COMP%]{border:4px solid white}.sinovad-list-itsinovad-row[_ngcontent-%COMP%]{display:block;overflow-x:auto;outline:none}.sinovad-list-button-scroll-left[_ngcontent-%COMP%]{position:relative;width:60px;height:310px;top:6px;display:flex;align-items:center;justify-content:center;cursor:pointer}.sinovad-list-button-scroll-left[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:unset;height:60px;display:none}.sinovad-list-itsinovad-row-title[_ngcontent-%COMP%]{font-size:25px;color:#fff;padding:0;font-weight:700;font-family:sans-serif}.sinovad-list-itsinovad-row-container[_ngcontent-%COMP%]{display:flex;padding-top:10px;padding-bottom:10px}.sinovad-list-button-scroll-right[_ngcontent-%COMP%]{width:60px;height:310px;top:6px;right:60px;display:flex;align-items:center;justify-content:center;position:relative;cursor:pointer}.sinovad-list-button-scroll-right[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:unset;height:60px;display:none}.sinovad-list-button-scroll-left[_ngcontent-%COMP%]:hover, .sinovad-list-button-scroll-right[_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.2);opacity:.6}.sinovad-item-progress-bar-absolute-container[_ngcontent-%COMP%]{width:0px;height:0px;margin-bottom:9px}.sinovad-item-progress-bar-container[_ngcontent-%COMP%]{width:100%;height:5px;background-color:#1e1a28;position:relative;margin-top:-9px;margin-left:4px}.sinovad-item-progress-bar-content[_ngcontent-%COMP%]{background-color:red;height:100%}.sinovad-list-button-scroll-right[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%], .sinovad-list-button-scroll-left[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{display:block}.sinovad-mobile-platform[_ngcontent-%COMP%]   .sinovad-list-button-scroll-left[_ngcontent-%COMP%], .sinovad-mobile-platform[_ngcontent-%COMP%]   .sinovad-list-button-scroll-right[_ngcontent-%COMP%]{display:none!important}.small[_ngcontent-%COMP%]   .sinovad-item-button-vertical[_ngcontent-%COMP%]{min-width:170px;width:170px;height:220px}.small[_ngcontent-%COMP%]   .sinovad-item-title-caption-container[_ngcontent-%COMP%], .small[_ngcontent-%COMP%]   .sinovad-item-caption-container[_ngcontent-%COMP%]{font-size:14px}.small[_ngcontent-%COMP%]   .sinovad-list-itsinovad-row-title[_ngcontent-%COMP%]{font-size:20px}"]}),D})()},3060:(Fn,Ve,O)=>{"use strict";O.d(Ve,{G:()=>j});var r=O(9808),e=O(2382),S=O(5782),R=O(4893);let j=(()=>{class U{}return U.\u0275fac=function(b){return new(b||U)},U.\u0275mod=R.oAB({type:U}),U.\u0275inj=R.cJS({imports:[[r.ez,e.u5,S.m,e.UX]]}),U})()},8348:(Fn,Ve,O)=>{"use strict";O.d(Ve,{e:()=>de});var r=O(4893),e=O(9092),S=O(4322),R=O(2571),j=O(520),U=O(2382),L=O(1085),b=O(2313),f=O(4307),c=O(9808),g=O(7065);const v=["container"];function T(ue,Te){if(1&ue&&(r.TgZ(0,"div",9),r.TgZ(1,"span",14),r._uU(2,"Director: "),r.qZA(),r.TgZ(3,"span",15),r._uU(4),r.qZA(),r.qZA()),2&ue){const q=r.oxw(2);r.xp6(4),r.Oqu(q.detail.Directors)}}function k(ue,Te){if(1&ue&&(r.TgZ(0,"div",9),r.TgZ(1,"span",14),r._uU(2,"Reparto: "),r.qZA(),r.TgZ(3,"span",15),r._uU(4),r.qZA(),r.qZA()),2&ue){const q=r.oxw(2);r.xp6(4),r.Oqu(q.detail.Actors)}}function N(ue,Te){if(1&ue){const q=r.EpF();r.TgZ(0,"div"),r.TgZ(1,"div"),r.TgZ(2,"button",16),r.NdJ("click",function(){return r.CHM(q),r.oxw(2).continueVideo()}),r._uU(3,"Continuar"),r.qZA(),r.qZA(),r.TgZ(4,"div",17),r._UZ(5,"div",18),r.qZA(),r.TgZ(6,"div",19),r._uU(7),r.qZA(),r.qZA()}if(2&ue){const q=r.oxw(2);r.xp6(5),r.Udp("width",q.getWidthProgressItem(q.lastEpisodeWatched)),r.xp6(2),r.hij(" ",q.lastEpisodeWatched.Subtitle," ")}}function B(ue,Te){if(1&ue){const q=r.EpF();r.TgZ(0,"button",20),r.NdJ("click",function(){return r.CHM(q),r.oxw(3).showVideo()}),r._uU(1,"Ver desde el principio"),r.qZA(),r.TgZ(2,"button",16),r.NdJ("click",function(){return r.CHM(q),r.oxw(3).continueVideo()}),r._uU(3,"Continuar viendo"),r.qZA()}}function x(ue,Te){if(1&ue){const q=r.EpF();r.TgZ(0,"button",21),r.NdJ("click",function(){return r.CHM(q),r.oxw(3).showVideo()}),r._uU(1,"Ver ahora"),r.qZA()}}function P(ue,Te){if(1&ue&&(r.YNc(0,B,4,0,"ng-template",2),r.YNc(1,x,2,0,"ng-template",2)),2&ue){const q=r.oxw(2);r.Q6J("ngIf",q.itemUserData),r.xp6(1),r.Q6J("ngIf",!q.itemUserData)}}function _(ue,Te){if(1&ue&&(r.TgZ(0,"div",22),r._uU(1),r.qZA()),2&ue){const q=r.oxw(2);r.xp6(1),r.hij(" ",q.detail.Overview," ")}}function D(ue,Te){if(1&ue){const q=r.EpF();r.TgZ(0,"img",36),r.NdJ("error",function(){r.CHM(q),r.oxw();const H=r.MAs(11),ce=r.MAs(7),ne=r.MAs(17);return r.oxw(2).onInitializeItemsRow(H,ce,ne)}),r.qZA()}}const y=function(ue){return{selected:ue}};function A(ue,Te){if(1&ue){const q=r.EpF();r.TgZ(0,"div",37),r.TgZ(1,"button",38),r.NdJ("click",function(){const ce=r.CHM(q).$implicit;return r.oxw(3).onClickSeason(ce)}),r.TgZ(2,"span"),r._uU(3),r.qZA(),r.qZA(),r.qZA()}if(2&ue){const q=Te.$implicit,se=r.oxw(3);r.xp6(1),r.MGl("id","section_season_",q.SeasonNumber,""),r.Q6J("ngClass",r.VKq(3,y,q.SeasonNumber==se.detail.CurrentSeason.SeasonNumber)),r.xp6(2),r.Oqu(q.Name)}}function I(ue,Te){if(1&ue){const q=r.EpF();r.TgZ(0,"section",39),r.TgZ(1,"button",40),r.NdJ("click",function(){const ce=r.CHM(q).$implicit;return r.oxw(3).onClickEpisode(ce)}),r.TgZ(2,"div",41),r._UZ(3,"img",6),r.qZA(),r.TgZ(4,"div",42),r.TgZ(5,"div",43),r._uU(6),r.qZA(),r.TgZ(7,"div",44),r._uU(8),r.qZA(),r.qZA(),r.qZA(),r.qZA()}if(2&ue){const q=Te.$implicit,se=r.oxw(3);r.hYB("id","section_episode_s",q.SeasonNumber,"_e",q.EpisodeNumber,""),r.xp6(1),r.hYB("id","button_episode_s",q.SeasonNumber,"_e",q.EpisodeNumber,""),r.xp6(2),r.Q6J("src",se.getEpisodeImagePath(q),r.LSH),r.xp6(3),r.AsE(" ",q.EpisodeNumber,". ",q.Name," "),r.xp6(2),r.hij(" ",q.Overview," ")}}function G(ue,Te){if(1&ue){const q=r.EpF();r.TgZ(0,"div",23),r.TgZ(1,"div"),r._uU(2," EPISODIOS "),r.qZA(),r.TgZ(3,"div",24),r.YNc(4,D,1,0,"img",25),r.TgZ(5,"div",3),r.TgZ(6,"div",26,27),r.NdJ("click",function(){r.CHM(q);const H=r.MAs(11),ce=r.MAs(7),ne=r.MAs(17);return r.oxw(2).onClickButtonLeftScroll(H,ce,ne)}),r._UZ(8,"img",6),r.ALo(9,"formatDataPipe"),r.qZA(),r.qZA(),r.TgZ(10,"div",28,29),r.TgZ(12,"section",30,31),r.YNc(14,A,4,5,"ng-template",32),r.qZA(),r.qZA(),r.TgZ(15,"div",3),r.TgZ(16,"div",33,34),r.NdJ("click",function(){r.CHM(q);const H=r.MAs(11),ce=r.MAs(7),ne=r.MAs(17);return r.oxw(2).onClickButtonRightScroll(H,ce,ne)}),r._UZ(18,"img",6),r.ALo(19,"formatDataPipe"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(20,"div",35),r.YNc(21,I,9,8,"ng-template",32),r.qZA(),r.qZA()}if(2&ue){const q=r.oxw(2);r.xp6(4),r.Q6J("ngIf",!q.startResize),r.xp6(4),r.Q6J("src",r.xi3(9,5,"left.png","GetImageURLByKey"),r.LSH),r.xp6(6),r.Q6J("ngForOf",q.detail.ListSeasons),r.xp6(4),r.Q6J("src",r.xi3(19,8,"right.png","GetImageURLByKey"),r.LSH),r.xp6(3),r.Q6J("ngForOf",q.detail.CurrentSeason.ListEpisodes)}}function ee(ue,Te){if(1&ue&&(r.TgZ(0,"div",3),r.TgZ(1,"div",4),r.TgZ(2,"div",5),r._UZ(3,"img",6),r.qZA(),r.qZA(),r.qZA(),r.TgZ(4,"div",7),r.TgZ(5,"div",8),r._uU(6),r.qZA(),r.TgZ(7,"div",9),r._uU(8),r.qZA(),r.YNc(9,T,5,1,"div",10),r.YNc(10,k,5,1,"div",10),r.TgZ(11,"section",11),r.YNc(12,N,8,3,"ng-template",2),r.YNc(13,P,2,2,"ng-template",2),r.qZA(),r.YNc(14,_,2,1,"div",12),r.YNc(15,G,22,11,"div",13),r.qZA()),2&ue){const q=r.oxw(),se=r.MAs(1);r.xp6(2),r.Udp("width",se.clientWidth+"px"),r.xp6(1),r.Q6J("src",q.getUrlByItemDetailMovieDataBase(q.detail),r.LSH),r.xp6(3),r.hij(" ",q.detail.Title," "),r.xp6(2),r.hij(" ",q.detail.Genres," "),r.xp6(1),r.Q6J("ngIf",q.detail.Directors),r.xp6(1),r.Q6J("ngIf",q.detail.Actors),r.xp6(2),r.Q6J("ngIf",q.lastEpisodeWatched),r.xp6(1),r.Q6J("ngIf",!q.lastEpisodeWatched),r.xp6(1),r.Q6J("ngIf",!q.lastEpisodeWatched),r.xp6(1),r.Q6J("ngIf",q.detail.ListSeasons)}}let de=(()=>{class ue extends e.X{constructor(q,se,H,ce,ne,pe,me){super(q,ne,pe,me),this.restProvider=q,this.ref=se,this.http=H,this.fb=ce,this.events=ne,this.domSanitizer=pe,this.sharedData=me,this._window=window,this.startResize=!1,this.toggleVideo=new r.vpe}getEpisodeImagePath(q){return null!=this.detail.TmdbId&&0!=this.detail.TmdbId?q.StillPath?this.sharedData.urlEpisodeDataBase+q.StillPath:this.getUrlByItemDetailMovieDataBase(this.detail):q.StillPath}verifyIfShoOrHiddenScrollButtons(q,se,H){se.style.display=q.scrollLeft<=0?"none":"flex",H.style.display=q.scrollWidth==q.scrollLeft+q.offsetWidth?"none":"flex",this.ref.detectChanges()}onInitializeItemsRow(q,se,H){setTimeout(()=>{this.verifyIfShoOrHiddenScrollButtons(q,se,H)},250)}onClickButtonLeftScroll(q,se,H){q.scrollLeft=q.scrollLeft-20,this.verifyIfShoOrHiddenScrollButtons(q,se,H)}onClickButtonRightScroll(q,se,H){q.scrollLeft=q.scrollLeft+20,this.verifyIfShoOrHiddenScrollButtons(q,se,H)}getWidthProgressItem(q){return q.CurrentTime/q.DurationTime*100+"%"}ngOnInit(){}continueVideo(){}showVideo(){if(this.detail.Item.MediaType==S.DD.Movie)this.getVideosByItem();else if(this.detail.ListSeasons&&this.detail.ListSeasons.length>0){let q=this.detail.ListSeasons[0];q.ListEpisodes&&q.ListEpisodes.length>0&&this.getVideoByEpisode(q.ListEpisodes[0])}}getVideosByItem(){this.sharedData.currentVideo=this.CreateBuilderVideoFromItem(this.detail.Item,this.detail),this.toggleVideo.emit(!0)}onClickSeason(q){this.detail.CurrentSeason=q}onClickEpisode(q){this.getVideoByEpisode(q)}getVideoByEpisode(q){this.sharedData.currentVideo=this.CreateBuilderVideoFromEpisode(q,this.detail)}onResize(q){setTimeout(()=>{this.startResize=!0,this.ref.detectChanges(),this.startResize=!1,this.ref.detectChanges()},100)}}return ue.\u0275fac=function(q){return new(q||ue)(r.Y36(R.C),r.Y36(r.sBO),r.Y36(j.eN),r.Y36(U.qu),r.Y36(L.n),r.Y36(b.H7),r.Y36(f.g))},ue.\u0275cmp=r.Xpm({type:ue,selectors:[["app-item-view"]],viewQuery:function(q,se){if(1&q&&r.Gf(v,5),2&q){let H;r.iGM(H=r.CRH())&&(se.container=H.first)}},hostBindings:function(q,se){1&q&&r.NdJ("resize",function(ce){return se.onResize(ce)},!1,r.Jf7)},inputs:{detail:"detail"},outputs:{toggleVideo:"toggleVideo"},features:[r.qOj],decls:3,vars:1,consts:[["tabindex","0",1,"sinovad-item-view-container","sinovad-custom-container"],["container",""],[3,"ngIf"],[2,"width","0px","height","0px"],[1,"sinovad-item-view-background-container"],[2,"position","fixed"],[3,"src"],[1,"sinovad-item-view-principal-section"],[1,"sinovad-item-view-title-container"],[1,"sinovad-item-view-subtitle-container"],["class","sinovad-item-view-subtitle-container",4,"ngIf"],["id","section_principal_buttons",1,"sinovad-item-view-principal-button-container","sinovad-section"],["class","sinovad-item-view-summary-container",4,"ngIf"],["class","sinovad-item-view-seasons-container",4,"ngIf"],[2,"font-weight","bold"],[2,"font-weight","normal"],["id","continue_play",1,"",3,"click"],[1,"sinovad-item-progress-bar-container",2,"width","300px"],[1,"sinovad-item-progress-bar-content"],[2,"margin-top","5px"],["id","restart_play",1,"",3,"click"],["id","play_now",1,"",3,"click"],[1,"sinovad-item-view-summary-container"],[1,"sinovad-item-view-seasons-container"],[1,"sinovad-list-itsinovad-row-container"],["style","display:none;","src","",3,"error",4,"ngIf"],[1,"sinovad-list-button-scroll-left",3,"click"],["scrollLeftButton",""],[1,"sinovad-list-itsinovad-row","sinovad-section"],["itemsRowContainer",""],["id","section_seasons",1,"sinovad-list-itsinovad-content"],["content",""],["ngFor","",3,"ngForOf"],[1,"sinovad-list-button-scroll-right",3,"click"],["scrollRightButton",""],[1,"sinovad-item-view-episodes-container"],["src","",2,"display","none",3,"error"],[1,"sinovad-season-container"],[1,"sinovad-season-button",3,"id","ngClass","click"],[1,"sinovad-section",3,"id"],[1,"sinovad-episode-button",3,"id","click"],[1,"sinovad-episode-image-section"],[1,"sinovad-episode-detail-section"],[1,"sinovad-episode-title-section"],[1,"sinovad-overview-section"]],template:function(q,se){1&q&&(r.TgZ(0,"div",0,1),r.YNc(2,ee,16,11,"ng-template",2),r.qZA()),2&q&&(r.xp6(2),r.Q6J("ngIf",se.detail))},directives:[c.O5,c.sg,c.mk],pipes:[g.A],styles:["button[_ngcontent-%COMP%]{outline:none!important;cursor:pointer!important;box-sizing:border-box!important}.sinovad-episode-button[_ngcontent-%COMP%]{width:100%;cursor:pointer;font-size:25px;display:flex;border-radius:5px;height:300px;margin-bottom:15px;padding:0}.sinovad-episode-button[_ngcontent-%COMP%]:hover   .sinovad-episode-detail-section[_ngcontent-%COMP%]{color:#007bff}.sinovad-episode-button[_ngcontent-%COMP%]:focus-visible   .sinovad-episode-detail-section[_ngcontent-%COMP%]{color:#007bff}.sinovad-episode-button[_ngcontent-%COMP%]:focus   .sinovad-episode-detail-section[_ngcontent-%COMP%]{color:#007bff!important}.sinovad-overview-section[_ngcontent-%COMP%]{font-size:20px;font-weight:400;overflow:hidden;text-overflow:ellipsis;height:auto;white-space:pre-wrap;-webkit-box-orient:vertical;display:-webkit-box;-webkit-line-clamp:10}.sinovad-episode-title-section[_ngcontent-%COMP%]{margin-bottom:10px;overflow:hidden;text-overflow:ellipsis;height:auto;white-space:pre-wrap;-webkit-box-orient:vertical;display:-webkit-box;-webkit-line-clamp:1}.sinovad-episode-image-section[_ngcontent-%COMP%]{display:block}.sinovad-episode-image-section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:300px}.sinovad-episode-detail-section[_ngcontent-%COMP%]{display:block;background-color:#fff;color:#000;padding:20px;text-align:left;width:100%;height:300px}.sinovad-video-container[_ngcontent-%COMP%]{width:100%;height:100%;background:black}.sinovad-item-progress-bar-container[_ngcontent-%COMP%]{width:100%;height:5px;background-color:#1e1a28;position:relative;margin-top:10px}.sinovad-item-progress-bar-content[_ngcontent-%COMP%]{background-color:red;height:100%}.sinovad-item-view-container[_ngcontent-%COMP%]{width:100%;height:100%;overflow-y:auto;overflow-x:hidden;outline:none}.sinovad-item-view-title-container[_ngcontent-%COMP%]{position:relative;width:-moz-fit-content;width:fit-content;font-size:50px;font-weight:700;color:#fff;padding-left:20px;padding-top:20px}.sinovad-item-view-subtitle-container[_ngcontent-%COMP%]{position:relative;width:-moz-fit-content;width:fit-content;font-size:25px;font-weight:700;color:#fff;padding-left:20px;padding-top:20px}.sinovad-item-view-summary-container[_ngcontent-%COMP%]{position:relative;width:-moz-fit-content;width:fit-content;font-size:30px;color:#fff;padding-left:20px;padding-top:20px;padding-bottom:20px}.sinovad-item-view-principal-button-container[_ngcontent-%COMP%]{position:relative;width:-moz-fit-content;width:fit-content;font-size:25px;color:#fff;padding-left:20px;padding-top:20px}.sinovad-item-view-principal-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border-radius:5px;margin-right:10px}.sinovad-item-view-principal-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#007bff}.sinovad-item-view-principal-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible{color:#007bff}.sinovad-item-view-principal-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{color:#007bff!important}.sinovad-item-view-background-container[_ngcontent-%COMP%]{position:relative}.sinovad-item-view-background-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:unset;width:100%;opacity:.5}.sinovad-item-view-seasons-container[_ngcontent-%COMP%]{position:relative;width:100%;font-size:20px;color:#fff;padding-left:20px;padding-top:20px;font-weight:700}.sinovad-list-itsinovad-row-container[_ngcontent-%COMP%]{display:flex;padding-top:10px;padding-bottom:10px}.sinovad-list-button-scroll-left[_ngcontent-%COMP%]{position:relative;width:60px;height:82px;display:flex;align-items:center;justify-content:center;cursor:pointer}.sinovad-list-button-scroll-left[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{opacity:.4;max-width:unset;height:110px;display:none}.sinovad-list-button-scroll-right[_ngcontent-%COMP%]{width:60px;height:82px;right:60px;display:flex;align-items:center;justify-content:center;position:relative;cursor:pointer}.sinovad-list-button-scroll-right[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:unset;height:110px;display:none;opacity:.4}.sinovad-list-button-scroll-right[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%], .sinovad-list-button-scroll-left[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{display:block}.sinovad-list-itsinovad-row[_ngcontent-%COMP%]{display:block;overflow-x:auto;width:100%}.sinovad-list-itsinovad-content[_ngcontent-%COMP%]{display:flex}.sinovad-season-container[_ngcontent-%COMP%]{padding-right:10px}.sinovad-season-button[_ngcontent-%COMP%]{font-size:25px;color:#fff;font-weight:700;text-align:center;display:flex;align-items:center;justify-content:center;cursor:pointer;padding:10px 10px 4px;background:transparent;border:none}.sinovad-season-button[_ngcontent-%COMP%]:hover{border-bottom:4px solid #007bff}.sinovad-season-button[_ngcontent-%COMP%]:focus-visible{border-bottom:4px solid #007bff}.sinovad-season-button[_ngcontent-%COMP%]:focus{border-bottom:4px solid #007bff!important}.sinovad-season-button.selected[_ngcontent-%COMP%]{border-bottom:4px solid #007bff}button[_ngcontent-%COMP%]{font-size:25px}.sinovad-mobile-platform[_ngcontent-%COMP%]   .sinovad-list-button-scroll-right[_ngcontent-%COMP%], .sinovad-mobile-platform[_ngcontent-%COMP%]   .sinovad-list-button-scroll-left[_ngcontent-%COMP%]{display:none!important}"]}),ue})()},9092:(Fn,Ve,O)=>{"use strict";O.d(Ve,{X:()=>g});var r=O(4322);class e{}var S=O(1042);class R{}var j=O(7065),U=O(4893),L=O(2571),b=O(1085),f=O(2313),c=O(4307);let g=(()=>{class v{constructor(k,N,B,x){this.restProvider=k,this.events=N,this.domSanitizer=B,this.sharedData=x,this.fdp=new j.A(this.sharedData)}ngOnInit(){}getNewIndex(k,N,B){return k+1+(N-1)*B}getTargetNumberValue(k){return k.value?Number(k.value):0}getTargetDateValue(k){return k.valueAsDate}getTargetValue(k){return k.value}CreateBuilderVideoFromItem(k,N){let B=(0,S.Z)();var x=new R;x.VideoId=k.VideoId,x.Title=k.Subtitle?k.Title+" "+k.Subtitle:k.Title,x.PhysicalPath=k.PhysicalPath,x.MediaServerId=k.MediaServerId,x.MediaServerUrl=k.MediaServerUrl,x.CurrentTime=k.CurrentTime,x.ProcessGUID=B,x.TimeSpan=x.CurrentTime?x.CurrentTime.toString():"0",N.ListSeasons&&(N.CurrentSeason=N.ListSeasons.find(_=>_.SeasonNumber==k.SeasonNumber),N.CurrentEpisode=N.CurrentSeason.ListEpisodes.find(_=>_.EpisodeNumber==k.EpisodeNumber));var P=new e;return P.TranscodePrepareVideo=x,P.ItemDetail=N,P}CreateBuilderVideoFromEpisode(k,N){var B=this.GetTranscodeVideoFromEpisode(k);N.ListSeasons&&(N.CurrentSeason=N.ListSeasons.find(P=>P.SeasonNumber==k.SeasonNumber),N.CurrentEpisode=N.CurrentSeason.ListEpisodes.find(P=>P.EpisodeNumber==k.EpisodeNumber));var x=new e;return x.TranscodePrepareVideo=B,x.ItemDetail=N,x}GetTranscodeVideoFromEpisode(k){let N=(0,S.Z)();var B=new R;return B.VideoId=k.VideoId,B.Title=k.TvSerieName+" T"+k.SeasonNumber+":E"+k.EpisodeNumber+" "+k.Name,B.PhysicalPath=k.PhysicalPath,B.MediaServerId=k.MediaServerId,B.MediaServerUrl=k.MediaServerUrl,B.ProcessGUID=N,B.CurrentTime=0,B.TimeSpan=B.CurrentTime?B.CurrentTime.toString():"0",B}getUser(){return new Promise((k,N)=>{this.restProvider.executeSinovadApiService(r.yw.GET,"/users/GetUserData").then(B=>{this.sharedData.userData=B.Data,null==this.sharedData.userData?(this.sharedData.currentToken=void 0,localStorage.removeItem("apiKey")):this.sharedData.configurationData.localIpAddress?this.restProvider.executeSinovadApiService(r.yw.GET,"/mediaServers/GetByUserAndIpAddressAsync?userId="+this.sharedData.userData.Id+"&ipAddress="+this.sharedData.configurationData.localIpAddress).then(_=>{this.sharedData.currentMediaServerData=_.Data,null==this.sharedData.currentMediaServerData?this.saveMediaServer():this.sharedData.configurationData.localIpAddress&&this.saveApiKeyInMediaStreamHost(),k(!0)},_=>{console.error(_),N(_)}):k(!0)},B=>{console.error(B),N(B)})})}getProfiles(){return new Promise((k,N)=>{this.restProvider.executeSinovadApiService(r.yw.GET,"/profiles/GetAllWithPaginationByUserAsync/"+this.sharedData.userData.Id).then(B=>{let x=B.Data;this.sharedData.listProfiles=x,this.sharedData.currentProfile=x[0],k(!0)},B=>{N(B)})})}saveMediaServer(){this.restProvider.executeSinovadApiService(r.yw.POST,"/mediaServers/Create",{UserId:this.sharedData.userData.Id,IpAddress:this.sharedData.configurationData.localIpAddress,Url:this.sharedData.configurationData.currentHost,StateCatalogId:r.P9.MediaServerState,StateCatalogDetailId:r.Fg.Stopped}).then(N=>{this.restProvider.executeSinovadApiService(r.yw.GET,"/mediaServers/GetByUserAndIpAddressAsync?userId="+this.sharedData.userData.Id+"&ipAddress="+this.sharedData.configurationData.localIpAddress).then(x=>{this.sharedData.currentMediaServerData=x.Data,this.sharedData.configurationData.currentHost&&this.saveApiKeyInMediaStreamHost()},x=>{console.error(x)})},N=>{console.error(N)})}saveApiKeyInMediaStreamHost(){this.restProvider.executeSinovadStreamServerService(r.yw.POST,"/main/SaveMediaServerData",{ApiKey:this.sharedData.currentToken,MediaServer:this.sharedData.currentMediaServerData}).then(N=>{},N=>{console.error(N)})}isSmallDevice(){return window.innerWidth<=1023}getInitials(k){return k.FullName.substring(0,1)}onResize(k){}isMobileDevice(){return"ontouchstart"in window}checkIfShowDisableItemsButton(k){return k.filter(B=>B.Active).length==k.length}focusContainer(k,N){let B=Array.from(k.querySelectorAll("section"));if(B&&B.length>0){let x=Array.from(k.querySelectorAll("input,button,section"));if(x&&x.length>0&&document.activeElement&&-1==x.indexOf(document.activeElement)){let _=B[0];this.sharedData.currentActiveSection=_,_.focus()}}else{let x=Array.from(k.querySelectorAll("input,button,textarea"));x&&x.length>0&&document.activeElement?-1==x.indexOf(document.activeElement)&&(this.sharedData.currentActiveSection=k,k.focus()):(this.sharedData.currentActiveSection=k,k.focus())}N.detectChanges()}focusInElementInContainer(k,N){let B=Array.from(k.querySelectorAll("section"));if(B&&B.length>0){let x=B[0];this.sharedData.currentActiveSection=x;let P=Array.from(x.querySelectorAll("button"));if(P&&P.length>0){let _=P[0];this.sharedData.currentSelectedElement=_,_.focus(),N.detectChanges()}}else{this.sharedData.currentActiveSection=k;let x=Array.from(k.querySelectorAll("button"));if(x&&x.length>0){let P=x[0];this.sharedData.currentSelectedElement=P,P.focus(),N.detectChanges()}}}setKeyboardActionsSectionVerticalButtonsHorizontal(k,N,B,x,P){var _=k.keyCode;let D=Array.from(N.nativeElement.querySelectorAll("section")),y=D.findIndex(I=>I.id==this.sharedData.currentActiveSection.id),A=D[y];if(A){let I=Array.from(A.querySelectorAll("button")),G=I.length,ee=I.findIndex(de=>de.id==this.sharedData.currentSelectedElement.id);if(39==_){let de=ee+1;if(de<G){let ue=I[de];ue.focus(),ue.scrollIntoView({block:"center"}),this.sharedData.currentSelectedElement=ue,x.detectChanges()}}if(37==_){let de=ee-1;if(de>=0){let ue=I[de];ue.focus(),this.sharedData.currentSelectedElement=ue,ue.scrollIntoView({block:"center"}),x.detectChanges()}else if(B){let ue=Array.from(B.nativeElement.querySelectorAll("input, button"));if(ue&&ue.length>0){this.sharedData.currentActiveSection=B;let Te=ue[0];this.sharedData.currentSelectedElement=Te,Te.focus()}}}if(40==_){let de=y+1;if(de<D.length){let ue=D[de];this.sharedData.currentActiveSection=ue;let Te=Array.from(ue.querySelectorAll("button")),q=Te[0];Te[ee]?q=Te[ee]:Te[ee-1]&&(q=Te[ee-1]),q.scrollIntoView({block:"center"}),this.sharedData.currentSelectedElement=q,q.focus()}}if(38==_){let de=y-1;if(de>=0){let ue=D[de];this.sharedData.currentActiveSection=ue;let Te=Array.from(ue.querySelectorAll("button")),q=Te[0];Te[ee]?q=Te[ee]:Te[ee-1]&&(q=Te[ee-1]),q.scrollIntoView({block:"center"}),this.sharedData.currentSelectedElement=q,q.focus()}else if(P){let ue=Array.from(P.nativeElement.querySelectorAll("input, button"));if(ue&&ue.length>0){this.sharedData.currentActiveSection=P;let Te=ue[0];ue[ee]?Te=ue[ee]:ue[ee-1]&&(Te=ue[ee-1]),this.sharedData.currentSelectedElement=Te,Te.focus()}}}}}focusFullScreenContainer(k,N){let B=Array.from(k.querySelectorAll("section"));if(B&&B.length>0){let x=B[0];this.sharedData.currentActiveSection=x,x.focus();let P=Array.from(x.querySelectorAll("input,button"));if(P&&P.length>0){let _=P[0];_.focus(),this.sharedData.currentSelectedElement=_}}N.detectChanges()}setKeyboardActionsFullScreenPage(k,N,B){var x=k.keyCode;let P=Array.from(N.querySelectorAll("section")),_=P.findIndex(y=>y.id==this.sharedData.currentActiveSection.id),D=P[_];if(D){let y=Array.from(D.querySelectorAll("button,input")),A=y.length,I=y.findIndex(G=>G.id==this.sharedData.currentSelectedElement.id);if(39==x){let G=I+1;if(G<A){let ee=y[G];ee.focus(),ee.scrollIntoView({block:"center"}),this.sharedData.currentSelectedElement=ee,B.detectChanges()}}if(37==x){let G=I-1;if(G>=0){let ee=y[G];ee.focus(),this.sharedData.currentSelectedElement=ee,ee.scrollIntoView({block:"center"}),B.detectChanges()}}if(40==x){let G=_+1;if(G<P.length){let ee=P[G];this.sharedData.currentActiveSection=ee;let de=Array.from(ee.querySelectorAll("button,input")),ue=de[0];de[I]?ue=de[I]:de[I-1]&&(ue=de[I-1]),ue.scrollIntoView({block:"center"}),this.sharedData.currentSelectedElement=ue,ue.focus(),"INPUT"==ue.nodeName.toUpperCase()&&ue.click()}}if(38==x){let G=_-1;if(G>=0){let ee=P[G];this.sharedData.currentActiveSection=ee;let de=Array.from(ee.querySelectorAll("button,input")),ue=de[0];de[I]?ue=de[I]:de[I-1]&&(ue=de[I-1]),ue.scrollIntoView({block:"center"}),this.sharedData.currentSelectedElement=ue,ue.focus(),"INPUT"==ue.nodeName.toUpperCase()&&ue.click()}}}}getUrlByItemDetailMovieDataBase(k){return null!=k.TmdbId&&k.TmdbId>0?this.sharedData.originalUrlImagesMovieDataBase+k.PosterPath:k.PosterPath}getUrlByItemMovieDataBase(k){return null!=k.TmdbId&&k.TmdbId>0?this.sharedData.originalUrlImagesMovieDataBase+k.PosterPath:k.PosterPath}getYearByDateFormat(k){return new Date(k).getFullYear()}sort_by(k,N,B){let x=B?P=>B(P[k]):P=>P[k];return N=N?-1:1,(P,_)=>(P=x(P),_=x(_),N*(+(P>_)-+(_>P)))}goToHeaderContainer(){let k=Array.from(document.getElementsByClassName("sinovad-custom-container")),N=k.findIndex(B=>-1!=B.className.indexOf("sinovad-header-container"));if(-1!=N){let x=Array.from(k[N].getElementsByClassName("sinovad-auxiliary-container"));x&&x.length>0&&x[0].click()}}validateEmailFormat(k){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(k)}}return v.\u0275fac=function(k){return new(k||v)(U.Y36(L.C),U.Y36(b.n),U.Y36(f.H7),U.Y36(c.g))},v.\u0275cmp=U.Xpm({type:v,selectors:[["app-parent"]],hostBindings:function(k,N){1&k&&U.NdJ("resize",function(x){return N.onResize(x)},!1,U.Jf7)},decls:2,vars:0,template:function(k,N){1&k&&(U.TgZ(0,"p"),U._uU(1,"parent works!"),U.qZA())},styles:[""]}),v})()},2001:(Fn,Ve,O)=>{"use strict";O.r(Ve),O.d(Ve,{ProfilesViewPageModule:()=>L});var r=O(9808),e=O(2382),S=O(5782),R=O(4893);let j=(()=>{class b{}return b.\u0275fac=function(c){return new(c||b)},b.\u0275mod=R.oAB({type:b}),b.\u0275inj=R.cJS({imports:[[r.ez,e.u5,e.UX,S.m]]}),b})(),U=(()=>{class b{}return b.\u0275fac=function(c){return new(c||b)},b.\u0275mod=R.oAB({type:b}),b.\u0275inj=R.cJS({imports:[[r.ez,e.u5,e.UX,S.m,j]]}),b})(),L=(()=>{class b{}return b.\u0275fac=function(c){return new(c||b)},b.\u0275mod=R.oAB({type:b}),b.\u0275inj=R.cJS({imports:[[r.ez,e.u5,e.UX,S.m,j,U]]}),b})()},5905:(Fn,Ve,O)=>{"use strict";O.d(Ve,{c:()=>B});var r=O(4893),e=O(9092),S=O(2571),R=O(520),j=O(1085),U=O(2313),L=O(4307),b=O(9808),f=O(7065);function c(x,P){if(1&x){const _=r.EpF();r.TgZ(0,"button",15),r.NdJ("click",function(){const A=r.CHM(_).$implicit;return r.oxw(3).onClickKey(A)}),r._uU(1),r.qZA()}if(2&x){const _=P.$implicit;r.MGl("id","key_",_.name,""),r.xp6(1),r.hij(" ",_.name," ")}}function g(x,P){if(1&x&&(r.TgZ(0,"section",14),r.YNc(1,c,2,2,"ng-template",13),r.qZA()),2&x){const _=P.$implicit;r.MGl("id","section_keyboard_",P.index,""),r.xp6(1),r.Q6J("ngForOf",_.letters)}}function v(x,P){if(1&x){const _=r.EpF();r.TgZ(0,"div",6),r.TgZ(1,"div"),r.TgZ(2,"section",7),r.TgZ(3,"button",8),r.NdJ("click",function(){return r.CHM(_),r.oxw().onClickSpaceBar()}),r._UZ(4,"img",9),r.ALo(5,"formatDataPipe"),r.qZA(),r.TgZ(6,"button",10),r.NdJ("click",function(){return r.CHM(_),r.oxw().onClickBackSpace()}),r._UZ(7,"img",11),r.ALo(8,"formatDataPipe"),r.qZA(),r.TgZ(9,"button",12),r.NdJ("click",function(){return r.CHM(_),r.oxw().clearSearchText()}),r._UZ(10,"img",11),r.ALo(11,"formatDataPipe"),r.qZA(),r.qZA(),r.YNc(12,g,2,2,"ng-template",13),r.qZA(),r.qZA()}if(2&x){const _=r.oxw();r.xp6(4),r.Q6J("src",r.xi3(5,4,"space-bar.png","GetImageURLByKey"),r.LSH),r.xp6(3),r.Q6J("src",r.xi3(8,7,"back-space.png","GetImageURLByKey"),r.LSH),r.xp6(3),r.Q6J("src",r.xi3(11,10,"delete-search.png","GetImageURLByKey"),r.LSH),r.xp6(2),r.Q6J("ngForOf",_.rowsLetters)}}let T=(()=>{class x extends e.X{constructor(_,D,y,A,I){super(_,y,A,I),this.restProvider=_,this.http=D,this.events=y,this.domSanitizer=A,this.sharedData=I,this.executeSearch=new r.vpe,this.searchText="",this.rowsLetters=[{letters:[{name:"a"},{name:"b"},{name:"c"},{name:"d"},{name:"e"},{name:"f"},{name:"g"}]},{letters:[{name:"h"},{name:"i"},{name:"j"},{name:"k"},{name:"l"},{name:"m"},{name:"n"}]},{letters:[{name:"\xf1"},{name:"o"},{name:"p"},{name:"q"},{name:"r"},{name:"s"},{name:"t"}]},{letters:[{name:"u"},{name:"v"},{name:"w"},{name:"x"},{name:"y"},{name:"z"}]},{letters:[{name:"1"},{name:"2"},{name:"3"},{name:"4"},{name:"5"},{name:"6"},{name:"7"}]},{letters:[{name:"8"},{name:"9"}]}]}ngAfterViewInit(){}clearSearchText(){this.searchText="",this.executeSearch.emit(this.searchText)}onClickSpaceBar(){this.searchText=this.searchText+" ",this.executeSearch.emit(this.searchText)}onClickBackSpace(){""!=this.searchText&&this.searchText.length>1?(this.searchText=this.searchText.substring(0,this.searchText.length-1),this.executeSearch.emit(this.searchText)):(this.searchText="",this.executeSearch.emit(this.searchText))}onClickKey(_){this.searchText=this.searchText+_.name,this.executeSearch.emit(this.searchText)}onChangeInput(_){this.searchText=_.target.value,this.executeSearch.emit(this.searchText)}}return x.\u0275fac=function(_){return new(_||x)(r.Y36(S.C),r.Y36(R.eN),r.Y36(j.n),r.Y36(U.H7),r.Y36(L.g))},x.\u0275cmp=r.Xpm({type:x,selectors:[["app-keyboard-tv"]],outputs:{executeSearch:"executeSearch"},features:[r.qOj],decls:6,vars:2,consts:[[1,"sinovad-search-section"],["searchSection",""],[1,"sinovad-search-section-top"],["type","text","readonly","",3,"value","change"],["input",""],["class","sinovad-search-section-bottom",4,"ngIf"],[1,"sinovad-search-section-bottom"],["id","section_keyboard_first_row","tabindex","0",1,"sinovad-letters-first-raw-section"],["id","space_bar",3,"click"],[2,"width","50px",3,"src"],["id","back_space",3,"click"],[2,"width","40px",3,"src"],["id","clear_text",3,"click"],["ngFor","",3,"ngForOf"],["tabindex","0",1,"sinovad-letters-raw-section",3,"id"],[3,"id","click"]],template:function(_,D){1&_&&(r.TgZ(0,"div",0,1),r.TgZ(2,"div",2),r.TgZ(3,"input",3,4),r.NdJ("change",function(A){return D.onChangeInput(A)}),r.qZA(),r.qZA(),r.YNc(5,v,13,13,"div",5),r.qZA()),2&_&&(r.xp6(3),r.Q6J("value",D.searchText),r.xp6(2),r.Q6J("ngIf",!D.isMobileDevice()))},directives:[b.O5,b.sg],pipes:[f.A],styles:["button[_ngcontent-%COMP%]{outline:none!important;cursor:pointer!important;box-sizing:border-box!important}.sinovad-letters-first-raw-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:left}.sinovad-letters-first-raw-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;width:60px;height:50px;margin-right:30px;display:flex;align-items:center;justify-content:center}.sinovad-letters-first-raw-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:blue}.sinovad-letters-first-raw-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible{background:blue}.sinovad-letters-first-raw-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{background:blue}.sinovad-letters-raw-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:left}.sinovad-letters-raw-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;color:#fff;font-size:40px;margin-right:30px;width:60px;display:flex;align-items:center;justify-content:center}.sinovad-letters-raw-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:blue}.sinovad-letters-raw-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible{background:blue}.sinovad-letters-raw-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{background:blue}.sinovad-search-section[_ngcontent-%COMP%]{padding-left:60px;padding-right:60px}.sinovad-search-section-top[_ngcontent-%COMP%]{height:70px;display:flex;width:100%;align-items:center}.sinovad-search-section-top[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:40px;border-radius:5px;outline:none;width:100%;font-size:20px;padding:0 10px}.sinovad-search-section-bottom[_ngcontent-%COMP%]{display:flex;height:calc(100% - 70px);justify-content:center}"]}),x})();var k=O(6255);const N=function(x){return{small:x}};let B=(()=>{class x extends e.X{constructor(_,D,y,A,I){super(_,y,A,I),this.restProvider=_,this.http=D,this.events=y,this.domSanitizer=A,this.sharedData=I,this.showItemView=new r.vpe,this.executeSearch=new r.vpe}ngAfterViewInit(){}onExecuteSearchFromKeyboard(_){this.executeSearch.emit(_)}}return x.\u0275fac=function(_){return new(_||x)(r.Y36(S.C),r.Y36(R.eN),r.Y36(j.n),r.Y36(U.H7),r.Y36(L.g))},x.\u0275cmp=r.Xpm({type:x,selectors:[["app-search-view-tv"]],outputs:{showItemView:"showItemView",executeSearch:"executeSearch"},features:[r.qOj],decls:8,vars:6,consts:[[1,"sinovad-search-view-tv-container","sinovad-custom-container",3,"ngClass"],["container",""],["keyboardContainer",""],[3,"executeSearch"],["itemListContainer",""],[3,"executeSearch","showItemView"]],template:function(_,D){if(1&_&&(r.TgZ(0,"div",0,1),r.TgZ(2,"div",null,2),r.TgZ(4,"app-keyboard-tv",3),r.NdJ("executeSearch",function(A){return D.onExecuteSearchFromKeyboard(A)}),r.qZA(),r.qZA(),r.TgZ(5,"div",null,4),r.TgZ(7,"app-vertical-item-list",5),r.NdJ("showItemView",function(){return D.showItemView.emit(!0)}),r.qZA(),r.qZA(),r.qZA()),2&_){const y=r.MAs(3);r.Q6J("ngClass",r.VKq(4,N,D.isSmallDevice())),r.xp6(5),r.Udp("height","calc(100% - "+y.offsetHeight+"px)"),r.xp6(2),r.Q6J("executeSearch",D.executeSearch)}},directives:[b.mk,T,k.E],styles:[".sinovad-search-view-tv-container[_ngcontent-%COMP%]{display:block;height:100%;width:100%;padding:10px;background:#2d3744}"]}),x})()},946:(Fn,Ve,O)=>{"use strict";O.d(Ve,{f:()=>U});var r=O(9808),e=O(2382),S=O(5782),R=O(2001),j=O(4893);let U=(()=>{class L{}return L.\u0275fac=function(f){return new(f||L)},L.\u0275mod=j.oAB({type:L}),L.\u0275inj=j.cJS({imports:[[r.ez,e.u5,S.m,e.UX,R.ProfilesViewPageModule]]}),L})()},1511:(Fn,Ve,O)=>{"use strict";O.d(Ve,{g:()=>j});var r=O(9808),e=O(2382),S=O(5782),R=O(4893);let j=(()=>{class U{}return U.\u0275fac=function(b){return new(b||U)},U.\u0275mod=R.oAB({type:U}),U.\u0275inj=R.cJS({imports:[[r.ez,e.u5,e.UX,S.m]]}),U})()},6255:(Fn,Ve,O)=>{"use strict";O.d(Ve,{E:()=>N});var r=O(4893),e=O(9092),S=O(4322),R=O(1042),j=O(2571),U=O(520),L=O(1085),b=O(2313),f=O(4307),c=O(9808);const g=["itemListContainer"];function v(B,x){if(1&B&&(r.TgZ(0,"div",14),r.TgZ(1,"span"),r._uU(2),r.qZA(),r.qZA()),2&B){const P=r.oxw().$implicit;r.xp6(2),r.Oqu(P.Title)}}function T(B,x){if(1&B){const P=r.EpF();r.TgZ(0,"div",10),r.TgZ(1,"button",11),r.NdJ("click",function(){const y=r.CHM(P).$implicit;return r.oxw(2).onClickItem(y)}),r._UZ(2,"img",12),r.qZA(),r.YNc(3,v,3,1,"div",13),r.qZA()}if(2&B){const P=x.$implicit,_=r.oxw(2);r.xp6(1),r.hYB("id","item_",P.TvSerieId?P.TvSerie_ID:P.MovieId,"_",P.MediaType,""),r.xp6(1),r.Q6J("src",_.getUrlByItemMovieDataBase(P),r.LSH),r.xp6(1),r.Q6J("ngIf",!P.Subtitle)}}function k(B,x){if(1&B&&(r.TgZ(0,"section",4),r.TgZ(1,"div",5),r.TgZ(2,"div",6,7),r.TgZ(4,"div",8,9),r.YNc(6,T,4,4,"ng-template",3),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&B){const P=x.$implicit;r.MGl("id","section_search_",x.index,""),r.xp6(6),r.Q6J("ngForOf",P)}}let N=(()=>{class B extends e.X{constructor(P,_,D,y,A){super(P,D,y,A),this.restProvider=P,this.http=_,this.events=D,this.domSanitizer=y,this.sharedData=A,this.showItemView=new r.vpe,this.listItems=[],this.listGroupItems=[]}ngOnInit(){let P=this;this.executeSearch.subscribe(_=>{let D=(0,R.Z)();P.lastCallGUID=D,P.getItemsBySearch(_,D)})}ngAfterViewInit(){}getItemsBySearch(P,_){""!=P.trim()?this.restProvider.executeSinovadApiService(S.yw.GET,"/videos/SearchTvPrograms?userId="+this.sharedData.userData.Id+"&searchMovies="+!0+"&searchTvSeries="+!0+"&searchText="+P).then(y=>{_==this.lastCallGUID&&(this.listItems=y.Data,this.buildGroupItems(this.listItems))},y=>{console.error(y)}):(this.listItems=[],this.listGroupItems=[])}buildGroupItems(P){if(P&&P.length>0){let A=this.isSmallDevice()?180:250;var _=Math.floor(this.container.nativeElement.offsetWidth/A),D=P.reduce((I,G,ee)=>{var de=Math.floor(ee/_)+1;return I[`row${de}`]=I[`row${de}`]||[],I[`row${de}`].push(G),I},{}),y=Object.keys(D).map(function(I){return D[I]});this.listGroupItems=y}else this.listGroupItems=[]}onClickItem(P){P.MovieId?this.getMovieDetail(P):P.TvSerieId&&this.getTvSerieDetail(P)}getMovieDetail(P){this.restProvider.executeSinovadApiService(S.yw.GET,"/videos/GetMovieDetail?movieId="+P.MovieId).then(_=>{let D=_.Data;D.Item=P,this.setDataAndShowItemView(D)},_=>{console.error(_)})}setDataAndShowItemView(P){P.ListSeasons&&P.ListSeasons.length>0&&(P.CurrentSeason=P.ListSeasons[0]),this.showItemView.emit(P)}getTvSerieDetail(P){this.restProvider.executeSinovadApiService(S.yw.GET,"/videos/GetTvSerieDetail?userId="+this.sharedData.userData.Id+"&tvSerieId="+P.TvSerieId).then(D=>{let y=D.Data;y.Item=P,this.setDataAndShowItemView(y)},D=>{console.error(D)})}onResize(P){this.buildGroupItems(this.listItems)}}return B.\u0275fac=function(P){return new(P||B)(r.Y36(j.C),r.Y36(U.eN),r.Y36(L.n),r.Y36(b.H7),r.Y36(f.g))},B.\u0275cmp=r.Xpm({type:B,selectors:[["app-vertical-item-list"]],viewQuery:function(P,_){if(1&P&&r.Gf(g,5),2&P){let D;r.iGM(D=r.CRH())&&(_.container=D.first)}},hostBindings:function(P,_){1&P&&r.NdJ("resize",function(y){return _.onResize(y)},!1,r.Jf7)},inputs:{executeSearch:"executeSearch"},outputs:{showItemView:"showItemView"},features:[r.qOj],decls:4,vars:3,consts:[[1,"sinovad-vertical-list-itsinovad-content"],["itemListContainer",""],[1,"sinovad-vertical-list-itsinovad-second-content"],["ngFor","",3,"ngForOf"],["tabindex","0",3,"id"],[1,"sinovad-list-itsinovad-row-container"],["tabindex","0",1,"sinovad-list-itsinovad-row"],["itemsRowContainer",""],[1,"sinovad-list-itsinovad-content"],["content",""],[1,"sinovad-item-container"],[1,"sinovad-item-button","sinovad-item-button-vertical",3,"id","click"],["referrerpolicy","no-referrer",3,"src"],["class","sinovad-item-caption-container",4,"ngIf"],[1,"sinovad-item-caption-container"]],template:function(P,_){1&P&&(r.TgZ(0,"div",0,1),r.TgZ(2,"div",2),r.YNc(3,k,7,2,"ng-template",3),r.qZA(),r.qZA()),2&P&&(r.Udp("height","100%"),r.xp6(3),r.Q6J("ngForOf",_.listGroupItems))},directives:[c.sg,c.O5],styles:["button[_ngcontent-%COMP%]{outline:none!important;cursor:pointer!important;box-sizing:border-box!important}.sinovad-item-container[_ngcontent-%COMP%]{padding-right:10px;width:-moz-min-content;width:min-content;margin:6px;border-radius:6px}.sinovad-list-itsinovad-row-container[_ngcontent-%COMP%]{display:flex;padding-top:10px;padding-bottom:10px;justify-content:center}.sinovad-list-itsinovad-row[_ngcontent-%COMP%]{display:block;overflow-x:auto;outline:none}.sinovad-list-itsinovad-content[_ngcontent-%COMP%]{display:flex}.sinovad-letters-first-raw-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:left}.sinovad-letters-first-raw-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;width:60px;height:50px;margin-right:30px;display:flex;align-items:center;justify-content:center}.sinovad-letters-first-raw-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:blue}.sinovad-letters-first-raw-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible{background:blue}.sinovad-letters-first-raw-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{background:blue}.sinovad-letters-raw-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:left}.sinovad-letters-raw-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;color:#fff;font-size:40px;margin-right:30px;width:60px;display:flex;align-items:center;justify-content:center}.sinovad-letters-raw-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:blue}.sinovad-letters-raw-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible{background:blue}.sinovad-letters-raw-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{background:blue}.sinovad-search-section[_ngcontent-%COMP%]{padding-left:60px;padding-right:60px}.sinovad-search-section-top[_ngcontent-%COMP%]{height:70px;display:flex;width:100%;align-items:center}.sinovad-search-section-top[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:40px;border-radius:5px;outline:none;width:100%;font-size:20px;padding:0 10px}.sinovad-search-section-bottom[_ngcontent-%COMP%]{display:flex;height:calc(100% - 70px);justify-content:center}.sinovad-item-button[_ngcontent-%COMP%]{display:block;width:360px;height:210px;color:#000;cursor:pointer;text-align:center;min-width:360px;padding:0;border-radius:unset;border:none;background:transparent}.sinovad-item-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;max-width:unset;border-radius:10px;border:4px solid transparent}.sinovad-item-button[_ngcontent-%COMP%]   .sinovad-item-caption[_ngcontent-%COMP%]{position:absolute;margin-top:100px;font-size:20px;color:#fff;font-weight:700}.sinovad-item-button-vertical[_ngcontent-%COMP%]{min-width:230px;width:230px;height:310px}.sinovad-item-button[_ngcontent-%COMP%]:hover{width:370px;height:220px}.sinovad-item-button[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{border:4px solid white}.sinovad-item-button-vertical[_ngcontent-%COMP%]:hover{min-width:240px;width:240px;height:320px}.sinovad-item-button-vertical[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{border:4px solid white}.sinovad-item-button[_ngcontent-%COMP%]:focus-visible{width:370px;height:220px}.sinovad-item-button[_ngcontent-%COMP%]:focus-visible   img[_ngcontent-%COMP%]{border:4px solid white}.sinovad-item-button[_ngcontent-%COMP%]:focus{width:370px;height:220px}.sinovad-item-button[_ngcontent-%COMP%]:focus   img[_ngcontent-%COMP%]{border:4px solid white}.sinovad-item-button-vertical[_ngcontent-%COMP%]:focus-visible{min-width:240px;width:240px;height:320px}.sinovad-item-button-vertical[_ngcontent-%COMP%]:focus-visible   img[_ngcontent-%COMP%]{border:4px solid white}.sinovad-item-button-vertical[_ngcontent-%COMP%]:focus{min-width:240px;width:240px;height:320px}.sinovad-item-button-vertical[_ngcontent-%COMP%]:focus   img[_ngcontent-%COMP%]{border:4px solid white}.sinovad-item-caption-container[_ngcontent-%COMP%]{font-size:20px;color:#fff;font-weight:700;padding-top:10px;text-align:center}.sinovad-vertical-list-itsinovad-container[_ngcontent-%COMP%]{display:block;height:100%;width:100%;padding:10px;background:#2d3744}.sinovad-vertical-list-itsinovad-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.sinovad-vertical-list-itsinovad-second-content[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}.small[_ngcontent-%COMP%]   .sinovad-item-button-vertical[_ngcontent-%COMP%]{min-width:160px;width:160px;height:200px}.small[_ngcontent-%COMP%]   .sinovad-item-caption-container[_ngcontent-%COMP%]{font-size:14px}.small[_ngcontent-%COMP%]   .sinovad-list-itsinovad-content[_ngcontent-%COMP%]{gap:20px}.small[_ngcontent-%COMP%]   .sinovad-item-container[_ngcontent-%COMP%]{padding:0;margin:0}"]}),B})()},3607:(Fn,Ve,O)=>{"use strict";O.d(Ve,{U:()=>U});var r=O(9808),e=O(2382),S=O(5782),R=O(6407),j=O(4893);let U=(()=>{class L{}return L.\u0275fac=function(f){return new(f||L)},L.\u0275mod=j.oAB({type:L}),L.\u0275inj=j.cJS({imports:[[r.ez,e.u5,S.m,R.I]]}),L})()},8615:(Fn,Ve,O)=>{"use strict";var r=O(2313),e=O(4893),S=O(520),R=O(7979);const j=[];let U=(()=>{class h{}return h.\u0275fac=function(t){return new(t||h)},h.\u0275mod=e.oAB({type:h}),h.\u0275inj=e.cJS({imports:[[R.Bz.forRoot(j)],R.Bz]}),h})();var L=O(7579),b=O(6063);class f extends L.x{constructor(n=1/0,t=1/0,o=b.l){super(),this._bufferSize=n,this._windowTime=t,this._timestampProvider=o,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,n),this._windowTime=Math.max(1,t)}next(n){const{isStopped:t,_buffer:o,_infiniteTimeWindow:u,_timestampProvider:p,_windowTime:C}=this;t||(o.push(n),!u&&o.push(p.now()+C)),this._trimBuffer(),super.next(n)}_subscribe(n){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(n),{_infiniteTimeWindow:o,_buffer:u}=this,p=u.slice();for(let C=0;C<p.length&&!n.closed;C+=o?1:2)n.next(p[C]);return this._checkFinalizedStatuses(n),t}_trimBuffer(){const{_bufferSize:n,_timestampProvider:t,_buffer:o,_infiniteTimeWindow:u}=this,p=(u?1:2)*n;if(n<1/0&&p<o.length&&o.splice(0,o.length-p),!u){const C=t.now();let F=0;for(let $=1;$<o.length&&o[$]<=C;$+=2)F=$;F&&o.splice(0,F+1)}}}var c=O(6451),g=O(3900),v=O(4004);const T={schedule(h,n){const t=setTimeout(h,n);return()=>clearTimeout(t)},scheduleBeforeRender(h){if("undefined"==typeof window)return T.schedule(h,0);if(void 0===window.requestAnimationFrame)return T.schedule(h,16);const n=window.requestAnimationFrame(h);return()=>window.cancelAnimationFrame(n)}};let P;function G(h,n,t){let o=t;return function N(h){return!!h&&h.nodeType===Node.ELEMENT_NODE}(h)&&n.some((u,p)=>!("*"===u||!function _(h,n){if(!P){const t=Element.prototype;P=t.matches||t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}return h.nodeType===Node.ELEMENT_NODE&&P.call(h,n)}(h,u)||(o=p,0))),o}class de{constructor(n,t){this.componentFactory=t.get(e._Vd).resolveComponentFactory(n)}create(n){return new ue(this.componentFactory,n)}}class ue{constructor(n,t){this.componentFactory=n,this.injector=t,this.eventEmitters=new f(1),this.events=this.eventEmitters.pipe((0,g.w)(o=>(0,c.T)(...o))),this.componentRef=null,this.viewChangeDetectorRef=null,this.inputChanges=null,this.hasInputChanges=!1,this.implementsOnChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.unchangedInputs=new Set(this.componentFactory.inputs.map(({propName:o})=>o)),this.ngZone=this.injector.get(e.R0b),this.elementZone="undefined"==typeof Zone?null:this.ngZone.run(()=>Zone.current)}connect(n){this.runInZone(()=>{if(null!==this.scheduledDestroyFn)return this.scheduledDestroyFn(),void(this.scheduledDestroyFn=null);null===this.componentRef&&this.initializeComponent(n)})}disconnect(){this.runInZone(()=>{null===this.componentRef||null!==this.scheduledDestroyFn||(this.scheduledDestroyFn=T.schedule(()=>{null!==this.componentRef&&(this.componentRef.destroy(),this.componentRef=null,this.viewChangeDetectorRef=null)},10))})}getInputValue(n){return this.runInZone(()=>null===this.componentRef?this.initialInputValues.get(n):this.componentRef.instance[n])}setInputValue(n,t){this.runInZone(()=>{null!==this.componentRef?function D(h,n){return h===n||h!=h&&n!=n}(t,this.getInputValue(n))&&(void 0!==t||!this.unchangedInputs.has(n))||(this.recordInputChange(n,t),this.unchangedInputs.delete(n),this.hasInputChanges=!0,this.componentRef.instance[n]=t,this.scheduleDetectChanges()):this.initialInputValues.set(n,t)})}initializeComponent(n){const t=e.zs3.create({providers:[],parent:this.injector}),o=function I(h,n){const t=h.childNodes,o=n.map(()=>[]);let u=-1;n.some((p,C)=>"*"===p&&(u=C,!0));for(let p=0,C=t.length;p<C;++p){const F=t[p],$=G(F,n,u);-1!==$&&o[$].push(F)}return o}(n,this.componentFactory.ngContentSelectors);this.componentRef=this.componentFactory.create(t,o,n),this.viewChangeDetectorRef=this.componentRef.injector.get(e.sBO),this.implementsOnChanges=function B(h){return"function"==typeof h}(this.componentRef.instance.ngOnChanges),this.initializeInputs(),this.initializeOutputs(this.componentRef),this.detectChanges(),this.injector.get(e.z2F).attachView(this.componentRef.hostView)}initializeInputs(){this.componentFactory.inputs.forEach(({propName:n})=>{this.initialInputValues.has(n)&&this.setInputValue(n,this.initialInputValues.get(n))}),this.initialInputValues.clear()}initializeOutputs(n){const t=this.componentFactory.outputs.map(({propName:o,templateName:u})=>n.instance[o].pipe((0,v.U)(C=>({name:u,value:C}))));this.eventEmitters.next(t)}callNgOnChanges(n){if(!this.implementsOnChanges||null===this.inputChanges)return;const t=this.inputChanges;this.inputChanges=null,n.instance.ngOnChanges(t)}markViewForCheck(n){this.hasInputChanges&&(this.hasInputChanges=!1,n.markForCheck())}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=T.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}recordInputChange(n,t){if(!this.implementsOnChanges)return;null===this.inputChanges&&(this.inputChanges={});const o=this.inputChanges[n];if(o)return void(o.currentValue=t);const u=this.unchangedInputs.has(n),p=u?void 0:this.getInputValue(n);this.inputChanges[n]=new e.WD2(p,t,u)}detectChanges(){null!==this.componentRef&&(this.callNgOnChanges(this.componentRef),this.markViewForCheck(this.viewChangeDetectorRef),this.componentRef.changeDetectorRef.detectChanges())}runInZone(n){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(n):n()}}class Te extends HTMLElement{constructor(){super(...arguments),this.ngElementEventsSubscription=null}}function q(h,n){const t=function A(h,n){return n.get(e._Vd).resolveComponentFactory(h).inputs}(h,n.injector),o=n.strategyFactory||new de(h,n.injector),u=function y(h){const n={};return h.forEach(({propName:t,templateName:o})=>{n[function k(h){return h.replace(/[A-Z]/g,n=>`-${n.toLowerCase()}`)}(o)]=t}),n}(t);class p extends Te{constructor(F){super(),this.injector=F}get ngElementStrategy(){if(!this._ngElementStrategy){const F=this._ngElementStrategy=o.create(this.injector||n.injector);t.forEach(({propName:$})=>{if(!this.hasOwnProperty($))return;const le=this[$];delete this[$],F.setInputValue($,le)})}return this._ngElementStrategy}attributeChangedCallback(F,$,le,Se){this.ngElementStrategy.setInputValue(u[F],le)}connectedCallback(){let F=!1;this.ngElementStrategy.events&&(this.subscribeToEvents(),F=!0),this.ngElementStrategy.connect(this),F||this.subscribeToEvents()}disconnectedCallback(){this._ngElementStrategy&&this._ngElementStrategy.disconnect(),this.ngElementEventsSubscription&&(this.ngElementEventsSubscription.unsubscribe(),this.ngElementEventsSubscription=null)}subscribeToEvents(){this.ngElementEventsSubscription=this.ngElementStrategy.events.subscribe(F=>{const $=new CustomEvent(F.name,{detail:F.value});this.dispatchEvent($)})}}return p.observedAttributes=Object.keys(u),t.forEach(({propName:C})=>{Object.defineProperty(p.prototype,C,{get(){return this.ngElementStrategy.getInputValue(C)},set(F){this.ngElementStrategy.setInputValue(C,F)},configurable:!0,enumerable:!0})}),p}var H=O(9808),ce=O(5782),ne=O(2382),pe=O(3607),me=O(946),xe=O(1511),ve=O(2001);let Oe=(()=>{class h{}return h.\u0275fac=function(t){return new(t||h)},h.\u0275mod=e.oAB({type:h}),h.\u0275inj=e.cJS({imports:[[H.ez,ne.u5,ce.m,ne.UX,ve.ProfilesViewPageModule]]}),h})(),Ee=(()=>{class h{}return h.\u0275fac=function(t){return new(t||h)},h.\u0275mod=e.oAB({type:h}),h.\u0275inj=e.cJS({imports:[[H.ez,ne.u5,ce.m,ne.UX,Oe]]}),h})();var Ie=O(9092),Re=O(2571),Pe=O(1085),ke=O(4307),Be=O(6255);const qe=function(h){return{small:h}},He=function(h){return{focused:h}};let De=(()=>{class h extends Ie.X{constructor(t,o,u,p,C,F){super(o,p,C,F),this.router=t,this.restProvider=o,this.http=u,this.events=p,this.domSanitizer=C,this.sharedData=F,this.executeSearch=new e.vpe,this.searchText="",this.isFocusSearch=!1}ngOnInit(){}ngAfterViewInit(){}onChangeSearchValue(){this.executeSearch.emit(this.searchText)}clearSearchText(){this.searchText="",this.executeSearch.emit(this.searchText)}onClickSearchButton(){}onSelectItem(t){t.Item.TvSerieId?this.router.navigateByUrl("/"+this.sharedData.platform+"/tvseriedetail/"+t.Item.TvSerieId):t.Item.MovieId&&this.router.navigateByUrl("/"+this.sharedData.platform+"/moviedetail/"+t.Item.MovieId)}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(R.F0),e.Y36(Re.C),e.Y36(S.eN),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(ke.g))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-search-view-web"]],outputs:{executeSearch:"executeSearch"},features:[e.qOj],decls:16,vars:10,consts:[[1,"sinovad-search-view-container",3,"ngClass"],["container",""],[1,"sinovad-search-view-title"],["header",""],[1,"sinovad-navbar-search"],[1,"sinovad-bottom-search",3,"ngClass"],["type","text",3,"ngModel","ngModelChange","change","focus","blur"],["input",""],[3,"click"],[1,"fa-solid","fa-magnifying-glass"],[1,"sinovad-close-search-container"],[1,"fa","fa-times"],["itemListContainer",""],[3,"executeSearch","showItemView"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0,1),e.TgZ(2,"div",2,3),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"input",6,7),e.NdJ("ngModelChange",function(p){return o.searchText=p})("change",function(){return o.onChangeSearchValue()})("focus",function(){return o.isFocusSearch=!0})("blur",function(){return o.isFocusSearch=!1}),e.qZA(),e.TgZ(8,"button",8),e.NdJ("click",function(){return o.onClickSearchButton()}),e._UZ(9,"i",9),e.qZA(),e.qZA(),e.TgZ(10,"div",10),e.TgZ(11,"button",8),e.NdJ("click",function(){return o.clearSearchText()}),e._UZ(12,"i",11),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",null,12),e.TgZ(15,"app-vertical-item-list",13),e.NdJ("showItemView",function(p){return o.onSelectItem(p)}),e.qZA(),e.qZA(),e.qZA()),2&t){const u=e.MAs(3);e.Q6J("ngClass",e.VKq(6,qe,o.isSmallDevice())),e.xp6(5),e.Q6J("ngClass",e.VKq(8,He,o.isFocusSearch)),e.xp6(1),e.Q6J("ngModel",o.searchText),e.xp6(7),e.Udp("height","calc(100% - "+u.offsetHeight+"px)"),e.xp6(2),e.Q6J("executeSearch",o.executeSearch)}},directives:[H.mk,ne.Fj,ne.JJ,ne.On,Be.E],styles:[".sinovad-search-view-container[_ngcontent-%COMP%]{display:block;height:100%;width:100%;padding:10px;background:#2d3744;overflow:auto}.sinovad-search-view-title[_ngcontent-%COMP%]{color:#fff;margin-left:20px;margin-right:20px}.sinovad-search-view-title[_ngcontent-%COMP%]   .sinovad-search-view-title-content[_ngcontent-%COMP%]{height:100%;border-bottom:1px solid #dedede;width:100%}.sinovad-navbar-search[_ngcontent-%COMP%]{background:transparent;display:flex;align-items:center;padding:10px 20px}.sinovad-navbar-search[_ngcontent-%COMP%]   .sinovad-bottom-search[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;height:30px;border-radius:5px;border:2px solid transparent;margin-right:20px;background-color:#fff}.sinovad-navbar-search[_ngcontent-%COMP%]   .sinovad-bottom-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:transparent;border:none;outline:none;padding-left:10px;width:100%}.sinovad-navbar-search[_ngcontent-%COMP%]   .sinovad-bottom-search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;outline:none;border-radius:0 7px 7px 0;opacity:.7;padding-right:8px;padding-left:8px}.sinovad-navbar-search[_ngcontent-%COMP%]   .sinovad-bottom-search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1}.sinovad-navbar-search[_ngcontent-%COMP%]   .sinovad-bottom-search.focused[_ngcontent-%COMP%]{border:2px solid #007bff}.sinovad-navbar-search[_ngcontent-%COMP%]   .sinovad-close-search-container[_ngcontent-%COMP%]{width:20px}.sinovad-navbar-search[_ngcontent-%COMP%]   .sinovad-close-search-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;outline:none;border-radius:0 7px 7px 0;opacity:.7;color:#fff;padding-right:8px;padding-left:8px;font-size:24px}.sinovad-navbar-search[_ngcontent-%COMP%]   .sinovad-close-search-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1}"]}),h})(),he=(()=>{class h extends Ie.X{constructor(t,o,u,p,C,F,$){super(o,C,F,$),this.router=t,this.restProvider=o,this.ref=u,this.http=p,this.events=C,this.domSanitizer=F,this.sharedData=$}ngOnInit(){}goHome(){this.router.navigate([this.sharedData.platform,"home"],{skipLocationChange:!1})}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(R.F0),e.Y36(Re.C),e.Y36(e.sBO),e.Y36(S.eN),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(ke.g))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-not-found"]],features:[e.qOj],decls:12,vars:0,consts:[[1,"d-flex","align-itsinovad-center","justify-content-center","vh-100"],[1,"text-center"],[1,"display-1","fw-bold"],[1,"fs-3"],[1,"text-danger"],[1,"lead"],[1,"btn","btn-primary",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h1",2),e._uU(3,"404"),e.qZA(),e.TgZ(4,"p",3),e.TgZ(5,"span",4),e._uU(6,"Opps!"),e.qZA(),e._uU(7," Page not found."),e.qZA(),e.TgZ(8,"p",5),e._uU(9," The page you\u2019re looking for doesn\u2019t exist. "),e.qZA(),e.TgZ(10,"button",6),e.NdJ("click",function(){return o.goHome()}),e._uU(11,"Go Home"),e.qZA(),e.qZA(),e.qZA())},styles:["[_nghost-%COMP%]{position:absolute;width:100%;height:100%;background:black;color:#fff}"]}),h})();var Y=O(6292),J=O(4322);const Me=["modalTarget"],ae=["profileInfoModal"];function re(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"footer"),e.TgZ(1,"div",8),e.TgZ(2,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onClickDeleteButton()}),e._uU(3,"Eliminar Perfil"),e.qZA(),e.qZA(),e.qZA()}}function z(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"section"),e.TgZ(1,"header"),e.TgZ(2,"div",1),e.TgZ(3,"div",2),e.TgZ(4,"span"),e._uU(5,"Sinovad"),e.qZA(),e.qZA(),e.TgZ(6,"div",3),e.TgZ(7,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().saveProfile()}),e._uU(8,"Listo"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",5),e.TgZ(10,"div"),e.TgZ(11,"h2"),e._uU(12,"Editar Perfil"),e.qZA(),e.TgZ(13,"input",6),e.NdJ("ngModelChange",function(u){return e.CHM(t),e.oxw().currentTmpProfile.FullName=u}),e.qZA(),e.qZA(),e.qZA(),e.YNc(14,re,4,0,"footer",7),e.qZA()}if(2&h){const t=e.oxw();e.xp6(13),e.Q6J("ngModel",t.currentTmpProfile.FullName),e.xp6(1),e.Q6J("ngIf",!t.currentTmpProfile.Main)}}let te=(()=>{class h extends Ie.X{constructor(t,o,u,p,C,F){super(o,p,C,F),this.modalService=t,this.restProvider=o,this.http=u,this.events=p,this.domSanitizer=C,this.sharedData=F,this.close=new e.vpe,this.closeWithChanges=new e.vpe}ngAfterViewInit(){this.modalReference=this.modalService.open(this.modalTarget,{container:"#sinovadMainContainer",modalDialogClass:"modal-dialog modal-fullscreen",scrollable:!0,ariaLabelledBy:"exampleModalCenteredScrollableTitle"})}saveProfile(){this.restProvider.executeSinovadApiService(this.currentTmpProfile.Id>0?J.yw.PUT:J.yw.POST,this.currentTmpProfile.Id>0?"/profiles/Update":"/profiles/Create",this.currentTmpProfile).then(u=>{this.modalReference.close(),this.closeWithChanges.emit(!0)},u=>{console.error(u)})}onClickDeleteButton(){this.restProvider.executeSinovadApiService(J.yw.DELETE,"/profiles/Delete/"+this.currentTmpProfile.Id).then(t=>{this.modalReference.close(),this.closeWithChanges.emit(!0)},t=>{console.error(t)})}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(Y.FF),e.Y36(Re.C),e.Y36(S.eN),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(ke.g))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-profiles-info"]],viewQuery:function(t,o){if(1&t&&(e.Gf(Me,5),e.Gf(ae,5)),2&t){let u;e.iGM(u=e.CRH())&&(o.modalTarget=u.first),e.iGM(u=e.CRH())&&(o.profileInfoModal=u.first)}},inputs:{currentTmpProfile:"currentTmpProfile"},outputs:{close:"close",closeWithChanges:"closeWithChanges"},features:[e.qOj],decls:2,vars:0,consts:[["modalTarget",""],[1,"sinovaclient-header-content"],[1,"sinovaclient-left"],[1,"sinovaclient-right"],[3,"click"],[1,"sinovadclient-modal-content"],["type","text",3,"ngModel","ngModelChange"],[4,"ngIf"],[1,"sinovaclient-footer-content"]],template:function(t,o){1&t&&e.YNc(0,z,15,2,"ng-template",null,0,e.W1O)},directives:[ne.Fj,ne.JJ,ne.On,H.O5],styles:["section[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#0e0b13}button[_ngcontent-%COMP%]{outline:none!important;cursor:pointer!important;box-sizing:border-box!important}header[_ngcontent-%COMP%]   .sinovaclient-header-content[_ngcontent-%COMP%]{display:flex;color:#fff}header[_ngcontent-%COMP%]   .sinovaclient-left[_ngcontent-%COMP%]{float:left;width:100%}header[_ngcontent-%COMP%]   .sinovaclient-left[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:30px}header[_ngcontent-%COMP%]   .sinovaclient-right[_ngcontent-%COMP%]{float:right;width:100%}header[_ngcontent-%COMP%]   .sinovaclient-right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{float:right;font-size:20px;padding:12px 20px;background:#4b4e5a;color:#f9f9f9;border-radius:5px;border:none}.sinovadclient-modal-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.sinovadclient-modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;text-align:center}.sinovadclient-modal-content[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:#f9f9f91a;color:#fff;min-width:200px;padding:10px 6px;font-size:20px}.sinovaclient-footer-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-top:30px}.sinovaclient-footer-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;background-color:transparent;color:#67bdff}"]}),h})();var X=O(7065);const Z=["modalTarget"];function W(h,n){1&h&&(e.TgZ(0,"span"),e._uU(1,"Escribe un nombre de perfil"),e.qZA())}function oe(h,n){1&h&&(e.TgZ(0,"span"),e._uU(1,"Editar nombre de perfil"),e.qZA())}function be(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"section",1,2),e.TgZ(2,"div",3),e.TgZ(3,"section",4),e.TgZ(4,"div",5),e.TgZ(5,"div",6),e.TgZ(6,"button",7),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeForm()}),e._UZ(7,"img",8),e.ALo(8,"formatDataPipe"),e.qZA(),e.qZA(),e.qZA(),e.YNc(9,W,2,0,"span",9),e.YNc(10,oe,2,0,"span",9),e.qZA(),e.TgZ(11,"section",10),e.TgZ(12,"input",11,12),e.NdJ("click",function(){e.CHM(t);const u=e.MAs(13);return e.oxw().showKeyboard(u)})("change",function(u){return e.CHM(t),e.oxw().onChangeProfileName(u)}),e.qZA(),e.qZA(),e.TgZ(14,"section",13),e.TgZ(15,"button",14),e.NdJ("click",function(){return e.CHM(t),e.oxw().saveProfile()}),e._uU(16," GUARDAR "),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&h){const t=e.oxw();e.xp6(7),e.Q6J("src",e.xi3(8,4,"back-screen.png","GetImageURLByKey"),e.LSH),e.xp6(2),e.Q6J("ngIf",!t.currentTmpProfile.Id),e.xp6(1),e.Q6J("ngIf",t.currentTmpProfile.Id),e.xp6(2),e.Q6J("value",t.currentTmpProfile.FullName)}}let Fe=(()=>{class h extends Ie.X{constructor(t,o,u,p,C,F,$){super(o,C,F,$),this.modalService=t,this.restProvider=o,this.ref=u,this.http=p,this.events=C,this.domSanitizer=F,this.sharedData=$,this.close=new e.vpe,this.closeWithChanges=new e.vpe}ngOnDestroy(){this.profileFormContainer.removeEventListener("keydown",this.customKeyboardProfileFormEvent)}ngAfterViewInit(){let t=this;this.modalReference=this.modalService.open(this.modalTarget,{container:"#sinovadMainContainer",modalDialogClass:"modal-dialog modal-fullscreen",scrollable:!0,ariaLabelledBy:"exampleModalCenteredScrollableTitle"}),this.modalReference.shown.subscribe(o=>{t.initializeProfileFormControls()})}initializeProfileFormControls(){this.profileFormContainer=document.getElementById("profileFormSection"),this.customKeyboardProfileFormEvent&&this.profileFormContainer.removeEventListener("keydown",this.customKeyboardProfileFormEvent),this.focusFullScreenContainer(this.profileFormContainer,this.ref);let t=this;this.customKeyboardProfileFormEvent=function(u){t.setKeyboardActionsFullScreenPage(u,t.profileFormContainer,t.ref)},this.profileFormContainer.addEventListener("keydown",this.customKeyboardProfileFormEvent)}onChangeProfileName(t){this.currentTmpProfile.FullName=t.target.value}showKeyboard(t){t.autofocus=!0,t.focus()}saveProfile(){this.restProvider.executeSinovadApiService(this.currentTmpProfile.Id>0?J.yw.PUT:J.yw.POST,this.currentTmpProfile.Id>0?"/profiles/Update":"/profiles/Create",this.currentTmpProfile).then(u=>{this.modalReference.close(),this.closeWithChanges.emit(!0)},u=>{console.error(u)})}closeForm(){this.modalReference.close(),this.close.emit(!0)}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(Y.FF),e.Y36(Re.C),e.Y36(e.sBO),e.Y36(S.eN),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(ke.g))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-profile-form"]],viewQuery:function(t,o){if(1&t&&e.Gf(Z,5),2&t){let u;e.iGM(u=e.CRH())&&(o.modalTarget=u.first)}},inputs:{currentTmpProfile:"currentTmpProfile"},outputs:{close:"close",closeWithChanges:"closeWithChanges"},features:[e.qOj],decls:2,vars:0,consts:[["modalTarget",""],["id","profileFormSection","tabindex","0",1,"sinovad-profile-form-container"],["profileFormContainer",""],[1,"sinovad-profiles-view-content"],["id","profile_form_section_header","tabindex","0",1,"sinovad-profiles-view-header"],[1,"sinovad-screen-back-container"],[1,"sinovad-screen-back-content"],["id","button_close_form",3,"click"],[3,"src"],[4,"ngIf"],["id","profile_form_section_body","tabindex","0",1,"sinovad-profile-form-input-container"],["type","text","id","button_name_profile","placeholder","Nombre de Perfil",3,"value","click","change"],["input",""],["id","profile_form_section_footer","tabindex","0",1,"sinovad-profile-form-footer"],["id","button_save_profile",3,"click"]],template:function(t,o){1&t&&e.YNc(0,be,17,7,"ng-template",null,0,e.W1O)},directives:[H.O5],pipes:[X.A],styles:["[_nghost-%COMP%]{width:100%;height:100%}.sinovad-profiles-section[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:black}button[_ngcontent-%COMP%]{outline:none!important;cursor:pointer!important;box-sizing:border-box!important}section[_ngcontent-%COMP%]{outline:none}input[_ngcontent-%COMP%]{outline:none}.sinovad-profiles-view-content[_ngcontent-%COMP%]{width:100%;height:100%;display:block;padding-top:40px}.sinovad-profiles-view-header[_ngcontent-%COMP%]{font-size:45px;color:#fff;text-align:center;padding-bottom:60px}.sinovad-profiles-view-body[_ngcontent-%COMP%]{overflow-y:auto}.sinovad-initials-profile[_ngcontent-%COMP%]{width:180px;height:180px;border-radius:100px;border:none;display:flex;align-items:center;justify-content:center;font-size:80px;background:blueviolet;color:#fff}.sinovad-initials-profile.add[_ngcontent-%COMP%]{background:lightslategrey}.sinovad-initials-profile.add[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90px}.sinovad-icon-edit-profile-container[_ngcontent-%COMP%]{display:block;position:relative}.sinovad-icon-edit-profile-content[_ngcontent-%COMP%]{display:block;position:absolute;right:0;top:-55px;background:white;border-radius:25px;padding:10px;border:none}.sinovad-icon-edit-profile-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}.sinovad-fullname-profile[_ngcontent-%COMP%]{display:block;color:#fff;font-size:30px;padding-top:10px}.sinovad-profile-form-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;z-index:99;position:absolute;top:0;left:0;background:black}.sinovad-profile-form-input-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.sinovad-profile-form-input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:50px;min-width:60%;font-size:25px;padding:0 16px;border:none;background:lightslategrey;color:#fff;opacity:.8;border:2px solid transparent}.sinovad-profile-form-input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:#fff}.sinovad-profile-form-input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#fff}.sinovad-profile-form-input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover{opacity:1;border:2px solid white}.sinovad-profile-form-input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus-visible{opacity:1;border:2px solid white}.sinovad-profile-form-input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{opacity:1;border:2px solid white}.sinovad-profile-form-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-top:60px;height:60px}.sinovad-profile-form-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;opacity:.8;padding:10px 90px;background:red;color:#fff;font-size:20px}.sinovad-profile-form-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1;padding:12px 94px}.sinovad-profile-form-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible{opacity:1;padding:12px 94px}.sinovad-profile-form-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{opacity:1;padding:12px 94px}.sinovad-screen-back-container[_ngcontent-%COMP%]{position:relative}.sinovad-screen-back-content[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0}.sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;left:0;position:absolute;margin-left:20px;opacity:.8;height:60px;display:flex;align-items:center;justify-content:center}.sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px}.sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1}.sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{width:54px}.sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible{opacity:1}.sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible   img[_ngcontent-%COMP%]{width:54px}.sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{opacity:1}.sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus   img[_ngcontent-%COMP%]{width:54px}.small[_nghost-%COMP%]   .sinovad-profiles-view-header[_ngcontent-%COMP%]{font-size:23px;padding-bottom:20px}.small[_nghost-%COMP%]   .sinovad-profiles-view-footer[_ngcontent-%COMP%]{padding-top:20px}.small[_nghost-%COMP%]   .sinovad-profiles-view-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 20px;font-size:20px}.small[_nghost-%COMP%]   .sinovad-initials-profile[_ngcontent-%COMP%]{width:130px;height:130px;font-size:60px}.small[_nghost-%COMP%]   .sinovad-fullname-profile[_ngcontent-%COMP%]{font-size:23px}.small[_nghost-%COMP%]   .sinovad-profiles-view-list-container[_ngcontent-%COMP%]{gap:20px}.small[_nghost-%COMP%]   .sinovad-profiles-view-list-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:0}.small[_nghost-%COMP%]   .sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{bottom:2px;margin-left:0;height:unset;padding:0}.small[_nghost-%COMP%]   .sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:30px}.small[_nghost-%COMP%]   .sinovad-profile-form-input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:20px}.small[_nghost-%COMP%]   .sinovad-profile-form-footer[_ngcontent-%COMP%]{margin-top:10px}.small[_nghost-%COMP%]   .sinovad-profile-form-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 30px;font-size:20px}"]}),h})();const We=["modalTarget"];function at(h,n){1&h&&(e.TgZ(0,"div",23),e.TgZ(1,"div",24),e._UZ(2,"img",25),e.ALo(3,"formatDataPipe"),e.qZA(),e.qZA()),2&h&&(e.xp6(2),e.Q6J("src",e.xi3(3,1,"edit-profile.png","GetImageURLByKey"),e.LSH))}function et(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){const p=e.CHM(t).$implicit;return e.oxw(4).onSelectProfile(p)}),e.TgZ(1,"div",21),e._uU(2),e.qZA(),e.YNc(3,at,4,4,"div",22),e.TgZ(4,"div",15),e._uU(5),e.qZA(),e.qZA()}if(2&h){const t=n.$implicit,o=e.oxw(4);e.MGl("id","profile_",t.Id,""),e.xp6(2),e.hij(" ",o.getInitials(t)," "),e.xp6(1),e.Q6J("ngIf",o.enableEditMode),e.xp6(2),e.hij(" ",t.FullName," ")}}function ut(h,n){if(1&h&&e.YNc(0,et,6,4,"ng-template",19),2&h){const t=e.oxw(3);e.Q6J("ngForOf",t.sharedData.listProfiles)}}function Ot(h,n){1&h&&e._uU(0," EDITAR ")}function tt(h,n){1&h&&e._uU(0," LISTO ")}function Et(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"section",4),e.TgZ(1,"div",5,6),e.TgZ(3,"div",7,8),e._uU(5," \xbfQui\xe9n eres? "),e.qZA(),e.TgZ(6,"div",9),e.TgZ(7,"section",10,11),e.YNc(9,ut,1,1,"ng-template",0),e.TgZ(10,"button",12),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).showNewProfile()}),e.TgZ(11,"div",13),e._UZ(12,"img",14),e.ALo(13,"formatDataPipe"),e.qZA(),e.TgZ(14,"div",15),e._uU(15," Crear Perfil "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"section",16,17),e.TgZ(18,"button",18),e.NdJ("click",function(){e.CHM(t);const u=e.oxw(2);return u.enableEditMode?u.confirmEdit():u.changeToEditMode()}),e.YNc(19,Ot,1,0,"ng-template",0),e.YNc(20,tt,1,0,"ng-template",0),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&h){const t=e.MAs(4),o=e.MAs(17),u=e.oxw(2);e.xp6(6),e.Udp("height",u.isSmallDevice()?"calc(100% - "+(t.offsetHeight+o.offsetHeight)+"px)":""),e.xp6(3),e.Q6J("ngIf",u.sharedData.listProfiles),e.xp6(3),e.Q6J("src",e.xi3(13,6,"plus.png","GetImageURLByKey"),e.LSH),e.xp6(7),e.Q6J("ngIf",!u.enableEditMode),e.xp6(1),e.Q6J("ngIf",u.enableEditMode)}}function Yt(h,n){1&h&&e.YNc(0,Et,21,9,"ng-template",null,3,e.W1O)}function vt(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"app-profiles-info",26),e.NdJ("closeWithChanges",function(){return e.CHM(t),e.oxw().onSaveProfile()}),e.qZA()}if(2&h){const t=e.oxw();e.Q6J("currentTmpProfile",t.currentTmpProfile)}}function At(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"app-profile-form",27),e.NdJ("close",function(){return e.CHM(t),e.oxw().onCloseForm()})("closeWithChanges",function(){return e.CHM(t),e.oxw().onSaveProfile()}),e.qZA()}if(2&h){const t=e.oxw();e.Q6J("currentTmpProfile",t.currentTmpProfile)}}let Dt=(()=>{class h extends Ie.X{constructor(t,o,u,p,C,F,$,le){super(u,F,$,le),this.router=t,this.modalService=o,this.restProvider=u,this.ref=p,this.http=C,this.events=F,this.domSanitizer=$,this.sharedData=le,this.enableEditMode=!1,this.showForm=!1,this.showProfilesInfo=!1,this.selectProfile=new e.vpe,this.showProfiles=new e.vpe,this.loadedProfiles=new e.vpe,this.showModal=!1}ngOnInit(){localStorage.getItem("apiKey")?(this.showModal=!0,this.performGetProfiles()):this.router.navigate([this.sharedData.platform,"landing"],{skipLocationChange:!1})}ngAfterViewInit(){if(this.showModal){let t=this;this.modalReference=this.modalService.open(this.modalTarget,{container:"#sinovadMainContainer",modalDialogClass:"modal-dialog modal-fullscreen",scrollable:!0,ariaLabelledBy:"exampleModalCenteredScrollableTitle"}),this.modalReference.shown.subscribe(o=>{t.initializeProfilesViewControls()})}}ngOnDestroy(){null!=this.profilesViewContainer&&this.profilesViewContainer.removeEventListener("keydown",this.customKeyboardControlsEvent)}performGetProfiles(){return new Promise((t,o)=>{this.getProfiles().then(u=>{this.showProfiles.emit(!0),this.loadedProfiles.emit(!0),t(!0)},u=>{o(u)})})}initializeProfilesViewControls(){this.profilesViewContainer=document.getElementById("profilesViewSection"),this.customKeyboardControlsEvent&&this.profilesViewContainer.removeEventListener("keydown",this.customKeyboardControlsEvent),this.focusFullScreenContainer(this.profilesViewContainer,this.ref);let t=this;this.customKeyboardControlsEvent=function(u){t.setKeyboardActionsFullScreenPage(u,t.profilesViewContainer,t.ref)},this.profilesViewContainer.addEventListener("keydown",this.customKeyboardControlsEvent)}changeToEditMode(){this.enableEditMode=!0}confirmEdit(){this.enableEditMode=!1}showNewProfile(){this.currentTmpProfile={FullName:"",UserId:this.sharedData.userData.Id},this.showForm=!0}editProfile(t){this.currentTmpProfile=JSON.parse(JSON.stringify(t)),"tv"==this.sharedData.platform?this.showForm=!0:this.showProfilesInfo=!0}onSelectProfile(t){this.enableEditMode?this.editProfile(t):this.enterProfile(t)}enterProfile(t){this.modalReference.close(),this.selectProfile.emit(t)}onCloseForm(){this.showForm=!1,this.initializeProfilesViewControls()}onSaveProfile(){this.showForm=!1,this.showProfilesInfo=!1,this.initializeProfilesViewControls(),this.performGetProfiles()}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(R.F0),e.Y36(Y.FF),e.Y36(Re.C),e.Y36(e.sBO),e.Y36(S.eN),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(ke.g))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-profiles-view"]],viewQuery:function(t,o){if(1&t&&e.Gf(We,5),2&t){let u;e.iGM(u=e.CRH())&&(o.modalTarget=u.first)}},outputs:{selectProfile:"selectProfile",showProfiles:"showProfiles",loadedProfiles:"loadedProfiles"},features:[e.qOj],decls:3,vars:3,consts:[[3,"ngIf"],[3,"currentTmpProfile","closeWithChanges",4,"ngIf"],[3,"currentTmpProfile","close","closeWithChanges",4,"ngIf"],["modalTarget",""],["id","profilesViewSection","tabindex","0",1,"sinovad-profiles-view-container","sinovad-profiles-section"],[1,"sinovad-profiles-view-content"],["profilesViewContent",""],[1,"sinovad-profiles-view-header"],["profilesViewHeader",""],[1,"sinovad-profiles-view-body"],["id","profiles_view_list_profiles_section","tabindex","0",1,"sinovad-profiles-view-list-container"],["profilesViewBody",""],["id","create_new_profile",3,"click"],[1,"sinovad-initials-profile","add"],["width","40px",3,"src"],[1,"sinovad-fullname-profile"],["id","profiles_view_footer_section","tabindex","0",1,"sinovad-profiles-view-footer"],["profilesViewFooter",""],["id","edit-ready-profile-button",3,"click"],["ngFor","",3,"ngForOf"],[3,"id","click"],[1,"sinovad-initials-profile"],["class","sinovad-icon-edit-profile-container",4,"ngIf"],[1,"sinovad-icon-edit-profile-container"],[1,"sinovad-icon-edit-profile-content"],[3,"src"],[3,"currentTmpProfile","closeWithChanges"],[3,"currentTmpProfile","close","closeWithChanges"]],template:function(t,o){1&t&&(e.YNc(0,Yt,2,0,"ng-template",0),e.YNc(1,vt,1,1,"app-profiles-info",1),e.YNc(2,At,1,1,"app-profile-form",2)),2&t&&(e.Q6J("ngIf",o.showModal),e.xp6(1),e.Q6J("ngIf",o.showProfilesInfo),e.xp6(1),e.Q6J("ngIf",o.showForm))},directives:[H.O5,H.sg,te,Fe],pipes:[X.A],styles:["[_nghost-%COMP%]{width:100%;height:100%}.sinovad-profiles-section[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:black}button[_ngcontent-%COMP%]{outline:none!important;cursor:pointer!important;box-sizing:border-box!important}section[_ngcontent-%COMP%]{outline:none}input[_ngcontent-%COMP%]{outline:none}.sinovad-profiles-view-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center}.sinovad-profiles-view-content[_ngcontent-%COMP%]{width:100%;height:100%;display:block;padding-top:40px}.sinovad-profiles-view-header[_ngcontent-%COMP%]{font-size:45px;color:#fff;text-align:center;padding-bottom:60px}.sinovad-profiles-view-body[_ngcontent-%COMP%]{overflow-y:auto}.sinovad-profiles-view-list-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-wrap:wrap}.sinovad-profiles-view-list-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;outline:none;opacity:.8;padding:0;margin-right:20px}.sinovad-profiles-view-list-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{margin-right:0}.sinovad-profiles-view-list-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1}.sinovad-profiles-view-list-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover   .sinovad-initials-profile[_ngcontent-%COMP%]{border:2px solid white}.sinovad-profiles-view-list-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible{opacity:1}.sinovad-profiles-view-list-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible   .sinovad-initials-profile[_ngcontent-%COMP%]{border:2px solid white}.sinovad-profiles-view-list-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{opacity:1}.sinovad-profiles-view-list-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus   .sinovad-initials-profile[_ngcontent-%COMP%]{border:2px solid white}.sinovad-profiles-view-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding-top:60px;padding-bottom:30px}.sinovad-profiles-view-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;outline:none;opacity:.8;padding:10px 60px;background:lightslategrey;color:#f5f5f5;font-size:26px}.sinovad-profiles-view-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:white;color:#000;opacity:1}.sinovad-profiles-view-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible{background:white;color:#000;opacity:1}.sinovad-profiles-view-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{background:white;color:#000;opacity:1}.sinovad-initials-profile[_ngcontent-%COMP%]{width:180px;height:180px;border-radius:100px;border:none;display:flex;align-items:center;justify-content:center;font-size:80px;background:blueviolet;color:#fff}.sinovad-initials-profile.add[_ngcontent-%COMP%]{background:lightslategrey}.sinovad-initials-profile.add[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90px}.sinovad-icon-edit-profile-container[_ngcontent-%COMP%]{display:block;position:relative}.sinovad-icon-edit-profile-content[_ngcontent-%COMP%]{display:block;position:absolute;right:0;top:-55px;background:white;border-radius:25px;padding:10px;border:none}.sinovad-icon-edit-profile-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}.sinovad-fullname-profile[_ngcontent-%COMP%]{display:block;color:#fff;font-size:30px;padding-top:10px}.sinovad-screen-back-container[_ngcontent-%COMP%]{position:relative}.sinovad-screen-back-content[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0}.sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;left:0;position:absolute;margin-left:20px;opacity:.8;height:60px;display:flex;align-items:center;justify-content:center}.sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px}.sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1}.sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{width:54px}.sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible{opacity:1}.sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible   img[_ngcontent-%COMP%]{width:54px}.sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{opacity:1}.sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus   img[_ngcontent-%COMP%]{width:54px}.small[_nghost-%COMP%]   .sinovad-profiles-view-header[_ngcontent-%COMP%]{font-size:23px;padding-bottom:20px}.small[_nghost-%COMP%]   .sinovad-profiles-view-footer[_ngcontent-%COMP%]{padding-top:20px}.small[_nghost-%COMP%]   .sinovad-profiles-view-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 20px;font-size:20px}.small[_nghost-%COMP%]   .sinovad-initials-profile[_ngcontent-%COMP%]{width:130px;height:130px;font-size:60px}.small[_nghost-%COMP%]   .sinovad-fullname-profile[_ngcontent-%COMP%]{font-size:23px}.small[_nghost-%COMP%]   .sinovad-profiles-view-list-container[_ngcontent-%COMP%]{gap:20px}.small[_nghost-%COMP%]   .sinovad-profiles-view-list-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:0}.small[_nghost-%COMP%]   .sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{bottom:2px;margin-left:0;height:unset;padding:0}.small[_nghost-%COMP%]   .sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:30px}"]}),h})();var $t=O(4522);function Kt(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"app-horizontal-item-list",1),e.NdJ("toggleVideo",function(u){return e.CHM(t),e.oxw().toggleVideo.emit(u)})("showItemView",function(u){return e.CHM(t),e.oxw().onSelectMovie(u)}),e.qZA()}if(2&h){const t=e.oxw();e.Q6J("currentMediaTypeID",t.currentMediaTypeID)("title",t.title)}}let Xt=(()=>{class h extends Ie.X{constructor(t,o,u,p,C,F,$,le){super(t,F,$,le),this.restProvider=t,this.route=o,this.router=u,this.ref=p,this.http=C,this.events=F,this.domSanitizer=$,this.sharedData=le,this.toggleVideo=new e.vpe}ngOnInit(){this.title="Pel\xedculas",this.currentMediaTypeID=J.DD.Movie}onSelectMovie(t){this.router.navigateByUrl("/"+this.sharedData.platform+"/moviedetail/"+t.Item.MovieId)}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(Re.C),e.Y36(R.gz),e.Y36(R.F0),e.Y36(e.sBO),e.Y36(S.eN),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(ke.g))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-movies"]],outputs:{toggleVideo:"toggleVideo"},features:[e.qOj],decls:1,vars:1,consts:[[3,"currentMediaTypeID","title","toggleVideo","showItemView",4,"ngIf"],[3,"currentMediaTypeID","title","toggleVideo","showItemView"]],template:function(t,o){1&t&&e.YNc(0,Kt,1,2,"app-horizontal-item-list",0),2&t&&e.Q6J("ngIf",o.sharedData.currentProfile)},directives:[H.O5,$t.j],styles:["[_nghost-%COMP%]{width:100%;height:100%}"]}),h})();function ln(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"app-horizontal-item-list",1),e.NdJ("toggleVideo",function(u){return e.CHM(t),e.oxw().toggleVideo.emit(u)})("showItemView",function(u){return e.CHM(t),e.oxw().onSelectItem(u)}),e.qZA()}if(2&h){const t=e.oxw();e.Q6J("currentMediaTypeID",t.currentMediaTypeID)("title",t.title)}}let Bn=(()=>{class h extends Ie.X{constructor(t,o,u,p,C,F,$,le){super(t,F,$,le),this.restProvider=t,this.route=o,this.router=u,this.ref=p,this.http=C,this.events=F,this.domSanitizer=$,this.sharedData=le,this.toggleVideo=new e.vpe}ngOnInit(){localStorage.getItem("apiKey")||this.router.navigate([this.sharedData.platform,"landing"],{skipLocationChange:!1}),this.itemViewData=void 0,this.currentMediaTypeID=void 0}onSelectItem(t){t.Item.TvSerieId?this.router.navigateByUrl("/"+this.sharedData.platform+"/tvseriedetail/"+t.Item.TvSerieId):t.Item.MovieId&&this.router.navigateByUrl("/"+this.sharedData.platform+"/moviedetail/"+t.Item.MovieId)}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(Re.C),e.Y36(R.gz),e.Y36(R.F0),e.Y36(e.sBO),e.Y36(S.eN),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(ke.g))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-home"]],outputs:{toggleVideo:"toggleVideo"},features:[e.qOj],decls:1,vars:1,consts:[[3,"currentMediaTypeID","title","toggleVideo","showItemView",4,"ngIf"],[3,"currentMediaTypeID","title","toggleVideo","showItemView"]],template:function(t,o){1&t&&e.YNc(0,ln,1,2,"app-horizontal-item-list",0),2&t&&e.Q6J("ngIf",o.sharedData.currentProfile)},directives:[H.O5,$t.j],styles:["[_nghost-%COMP%]{width:100%;height:100%}"]}),h})();function Rn(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"app-horizontal-item-list",1),e.NdJ("toggleVideo",function(u){return e.CHM(t),e.oxw().toggleVideo.emit(u)})("showItemView",function(u){return e.CHM(t),e.oxw().onSelectTvSerie(u)}),e.qZA()}if(2&h){const t=e.oxw();e.Q6J("currentMediaTypeID",t.currentMediaTypeID)("title",t.title)}}let jn=(()=>{class h extends Ie.X{constructor(t,o,u,p,C,F,$,le){super(t,F,$,le),this.restProvider=t,this.route=o,this.router=u,this.ref=p,this.http=C,this.events=F,this.domSanitizer=$,this.sharedData=le,this.toggleVideo=new e.vpe}ngOnInit(){this.title="Series",this.currentMediaTypeID=J.DD.TvSerie}onSelectTvSerie(t){this.router.navigateByUrl("/"+this.sharedData.platform+"/tvseriedetail/"+t.Item.TvSerieId)}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(Re.C),e.Y36(R.gz),e.Y36(R.F0),e.Y36(e.sBO),e.Y36(S.eN),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(ke.g))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-tvseries"]],outputs:{toggleVideo:"toggleVideo"},features:[e.qOj],decls:1,vars:1,consts:[[3,"currentMediaTypeID","title","toggleVideo","showItemView",4,"ngIf"],[3,"currentMediaTypeID","title","toggleVideo","showItemView"]],template:function(t,o){1&t&&e.YNc(0,Rn,1,2,"app-horizontal-item-list",0),2&t&&e.Q6J("ngIf",o.sharedData.currentProfile)},directives:[H.O5,$t.j],styles:["[_nghost-%COMP%]{width:100%;height:100%}"]}),h})();var Vn=O(8348);function ot(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"app-item-view",1),e.NdJ("toggleVideo",function(u){return e.CHM(t),e.oxw().toggleVideo.emit(u)}),e.qZA()}if(2&h){const t=e.oxw();e.Q6J("detail",t.detail)}}let Qe=(()=>{class h extends Ie.X{constructor(t,o,u,p,C,F,$){super(u,C,F,$),this.activeRoute=t,this.router=o,this.restProvider=u,this.http=p,this.events=C,this.domSanitizer=F,this.sharedData=$,this.toggleVideo=new e.vpe}ngOnInit(){let t=this.activeRoute.snapshot.params.movieId;t?this.getMovieDetail(t):this.router.navigate([this.sharedData.platform,"404"],{skipLocationChange:!1})}getMovieDetail(t){this.restProvider.executeSinovadApiService(J.yw.GET,"/videos/GetMovieDataByUser?userId="+this.sharedData.userData.Id+"&movieId="+t).then(o=>{this.detail=o.Data},o=>{console.error(o),this.router.navigate([this.sharedData.platform,"404"],{skipLocationChange:!1})})}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(R.gz),e.Y36(R.F0),e.Y36(Re.C),e.Y36(S.eN),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(ke.g))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-movie-detail"]],outputs:{toggleVideo:"toggleVideo"},features:[e.qOj],decls:1,vars:1,consts:[[3,"detail","toggleVideo",4,"ngIf"],[3,"detail","toggleVideo"]],template:function(t,o){1&t&&e.YNc(0,ot,1,1,"app-item-view",0),2&t&&e.Q6J("ngIf",o.detail)},directives:[H.O5,Vn.e],styles:[""]}),h})();function mt(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"app-item-view",1),e.NdJ("toggleVideo",function(u){return e.CHM(t),e.oxw().toggleVideo.emit(u)}),e.qZA()}if(2&h){const t=e.oxw();e.Q6J("detail",t.detail)}}let Lt=(()=>{class h extends Ie.X{constructor(t,o,u,p,C,F,$){super(u,C,F,$),this.activeRoute=t,this.router=o,this.restProvider=u,this.http=p,this.events=C,this.domSanitizer=F,this.sharedData=$,this.toggleVideo=new e.vpe}ngOnInit(){let t=this.activeRoute.snapshot.params.tvSerieId;t?this.getTvSerieDetail(t):this.router.navigate([this.sharedData.platform,"404"],{skipLocationChange:!1})}getTvSerieDetail(t){this.restProvider.executeSinovadApiService(J.yw.GET,"/videos/GetTvSerieDataByUser?userId="+this.sharedData.userData.Id+"&tvSerieId="+t).then(u=>{u.Data.ListSeasons&&u.Data.ListSeasons.length>0&&(u.Data.CurrentSeason=u.Data.ListSeasons[0]),this.detail=u.Data},u=>{console.error(u)})}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(R.gz),e.Y36(R.F0),e.Y36(Re.C),e.Y36(S.eN),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(ke.g))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-tvserie-detail"]],outputs:{toggleVideo:"toggleVideo"},features:[e.qOj],decls:1,vars:1,consts:[[3,"detail","toggleVideo",4,"ngIf"],[3,"detail","toggleVideo"]],template:function(t,o){1&t&&e.YNc(0,mt,1,1,"app-item-view",0),2&t&&e.Q6J("ngIf",o.detail)},directives:[H.O5,Vn.e],styles:[""]}),h})();const nn=["loginFormContainer"],zt=function(h){return{small:h}};let _t=(()=>{class h extends Ie.X{constructor(t,o,u,p,C,F,$){super(u,C,F,$),this.router=t,this.activeRoute=o,this.restProvider=u,this.http=p,this.events=C,this.domSanitizer=F,this.sharedData=$,this._window=window,this.showLoading=!1}ngOnInit(){localStorage.getItem("apiKey")&&this.router.navigate([this.sharedData.platform,"home"],{skipLocationChange:!1})}showLoginPage(){this.router.navigate([this.sharedData.platform,"login"],{skipLocationChange:!1})}showRegisterPage(){this.router.navigate([this.sharedData.platform,"register"],{skipLocationChange:!1})}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(R.F0),e.Y36(R.gz),e.Y36(Re.C),e.Y36(S.eN),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(ke.g))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-landing"]],viewQuery:function(t,o){if(1&t&&e.Gf(nn,5),2&t){let u;e.iGM(u=e.CRH())&&(o.loginFormContainer=u.first)}},features:[e.qOj],decls:10,vars:3,consts:[["id","sinovad-landing-container","tabindex","0",1,"sinovad-landing-container",3,"ngClass"],[1,"sinovad-landing-form-content"],[1,"sinovad-landing-title-container"],[1,"sinovad-landing-form-button-section"],["id","register-button",3,"click"],["id","log-in-button",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"section",0),e.TgZ(1,"div",1),e.TgZ(2,"div"),e.TgZ(3,"div",2),e._uU(4," Sinovad "),e.qZA(),e.TgZ(5,"div",3),e.TgZ(6,"button",4),e.NdJ("click",function(){return o.showRegisterPage()}),e._uU(7,"Reg\xedstrate"),e.qZA(),e.TgZ(8,"button",5),e.NdJ("click",function(){return o.showLoginPage()}),e._uU(9,"Inicia sesi\xf3n"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&e.Q6J("ngClass",e.VKq(1,zt,o.isSmallDevice()))},directives:[H.mk],styles:['[_nghost-%COMP%]{position:absolute;width:100%;height:100%}.sinovad-child-container[_ngcontent-%COMP%], .sinovad-landing-container[_ngcontent-%COMP%]{width:100%;height:100%;background:black;color:#fff;position:absolute;align-items:center;justify-content:center;display:flex}.sinovad-landing-form-back-button[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:60px;padding:10px 15px;cursor:pointer;height:60px;display:flex;align-items:center;justify-content:center}.sinovad-landing-form-back-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:unset;width:100%;height:100%}.sinovad-landing-form-content[_ngcontent-%COMP%]{color:#fff;padding:40px}.sinovad-landing-form-content[_ngcontent-%COMP%]   .sinovad-landing-form-button-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;width:100%;cursor:pointer;background-color:#ba2302;color:#fff;padding:10px;text-align:center;border-radius:5px;font-size:30px;opacity:.8;margin-bottom:10px}.sinovad-landing-form-content[_ngcontent-%COMP%]   .sinovad-landing-form-button-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1;padding:12px}.sinovad-landing-form-content[_ngcontent-%COMP%]   .sinovad-landing-form-button-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible{opacity:1;padding:12px}.sinovad-landing-form-content[_ngcontent-%COMP%]   .sinovad-landing-form-button-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{opacity:1;padding:12px}.sinovad-landing-title-container[_ngcontent-%COMP%]{width:100%;text-align:center;font-size:40px;font-weight:700;margin-bottom:20px}.sinovad-landing-form-caption-input-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;margin-bottom:20px}.sinovad-form-caption-input-content[_ngcontent-%COMP%]{width:100%}.sinovad-landing-form-caption-container[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:30px;margin-bottom:4px}.sinovad-form-textinput-container[_ngcontent-%COMP%]{display:block;color:#000}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border-radius:5px;padding:10px;color:#fff;outline:none;background:lightslategrey;border:none;font-size:30px;opacity:.8;border:2px solid transparent}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:#fff}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#fff}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover{opacity:1;border:2px solid white}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus-visible{opacity:1;border:2px solid white}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{opacity:1;border:2px solid white}.small[_ngcontent-%COMP%]   .sinovad-landing-form-content[_ngcontent-%COMP%]{width:100%;height:100%;padding-top:170px}.small[_ngcontent-%COMP%]   .sinovad-landing-form-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:unset}.small[_ngcontent-%COMP%]   .sinovad-landing-title-container[_ngcontent-%COMP%]{font-size:20px}.small[_ngcontent-%COMP%]   .sinovad-landing-form-caption-container[_ngcontent-%COMP%]{font-size:unset}.small[_ngcontent-%COMP%]   .sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:35px;font-size:unset}.sinovad-landing-form-button-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:50px}.sinovad-landing-form-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:30px;border:1px solid #dedede;border-radius:5px;padding-left:10px;padding-right:10px}.sinovad-landing-form-error-message-container[_ngcontent-%COMP%]{color:red;text-align:center;font-size:17px}.sinovad-spinner-container[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;top:0;left:0;display:flex;align-items:center;z-index:999;justify-content:center;background:rgba(0,0,0,.5)}.lds-spinner[_ngcontent-%COMP%]{color:official;display:inline-block;position:relative;width:80px;height:80px}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transform-origin:40px 40px;animation:lds-spinner 1.2s linear infinite}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after{content:" ";display:block;position:absolute;top:3px;left:37px;width:6px;height:18px;border-radius:20%;background:#fff}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){transform:rotate(0);animation-delay:-1.1s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){transform:rotate(30deg);animation-delay:-1s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){transform:rotate(60deg);animation-delay:-.9s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){transform:rotate(90deg);animation-delay:-.8s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(5){transform:rotate(120deg);animation-delay:-.7s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(6){transform:rotate(150deg);animation-delay:-.6s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(7){transform:rotate(180deg);animation-delay:-.5s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(8){transform:rotate(210deg);animation-delay:-.4s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(9){transform:rotate(240deg);animation-delay:-.3s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(10){transform:rotate(270deg);animation-delay:-.2s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(11){transform:rotate(300deg);animation-delay:-.1s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(12){transform:rotate(330deg);animation-delay:0s}@keyframes lds-spinner{0%{opacity:1}to{opacity:0}}']}),h})();class pt{}function rt(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",7),e._uU(2," Reg\xedstrate "),e.qZA(),e.TgZ(3,"section",8),e.TgZ(4,"div",9),e.TgZ(5,"div",10),e.TgZ(6,"span"),e._uU(7," Correo electr\xf3nico "),e.qZA(),e.qZA(),e.TgZ(8,"div",11),e.TgZ(9,"input",12),e.NdJ("ngModelChange",function(u){return e.CHM(t),e.oxw().registerUserModel.Email=u}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"section",13),e.TgZ(11,"div",9),e.TgZ(12,"div",10),e.TgZ(13,"span"),e._uU(14," Nombres "),e.qZA(),e.qZA(),e.TgZ(15,"div",11),e.TgZ(16,"input",12),e.NdJ("ngModelChange",function(u){return e.CHM(t),e.oxw().registerUserModel.FirstName=u}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"section",13),e.TgZ(18,"div",9),e.TgZ(19,"div",10),e.TgZ(20,"span"),e._uU(21," Apellidos "),e.qZA(),e.qZA(),e.TgZ(22,"div",11),e.TgZ(23,"input",12),e.NdJ("ngModelChange",function(u){return e.CHM(t),e.oxw().registerUserModel.LastName=u}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(24,"section",13),e.TgZ(25,"div",9),e.TgZ(26,"div",10),e.TgZ(27,"span"),e._uU(28," Usuario "),e.qZA(),e.qZA(),e.TgZ(29,"div",11),e.TgZ(30,"input",12),e.NdJ("ngModelChange",function(u){return e.CHM(t),e.oxw().registerUserModel.UserName=u}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(31,"section",14),e.TgZ(32,"div",9),e.TgZ(33,"div",10),e.TgZ(34,"span"),e._uU(35," Contrase\xf1a "),e.qZA(),e.qZA(),e.TgZ(36,"div",11),e.TgZ(37,"input",15),e.NdJ("ngModelChange",function(u){return e.CHM(t),e.oxw().registerUserModel.Password=u}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"section",14),e.TgZ(39,"div",9),e.TgZ(40,"div",10),e.TgZ(41,"span"),e._uU(42," Confirmar contrase\xf1a "),e.qZA(),e.qZA(),e.TgZ(43,"div",11),e.TgZ(44,"input",15),e.NdJ("ngModelChange",function(u){return e.CHM(t),e.oxw().registerUserModel.ConfirmPassword=u}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(45,"section",16),e.TgZ(46,"button",17),e.NdJ("click",function(){return e.CHM(t),e.oxw().register()}),e._uU(47,"Registrar"),e.qZA(),e.qZA(),e.TgZ(48,"div",18),e._uU(49),e.qZA(),e.qZA()}if(2&h){const t=e.oxw();e.xp6(9),e.Q6J("ngModel",t.registerUserModel.Email),e.xp6(7),e.Q6J("ngModel",t.registerUserModel.FirstName),e.xp6(7),e.Q6J("ngModel",t.registerUserModel.LastName),e.xp6(7),e.Q6J("ngModel",t.registerUserModel.UserName),e.xp6(7),e.Q6J("ngModel",t.registerUserModel.Password),e.xp6(7),e.Q6J("ngModel",t.registerUserModel.ConfirmPassword),e.xp6(5),e.hij(" ",t.errorMessage," ")}}function Xe(h,n){1&h&&(e.TgZ(0,"div"),e.TgZ(1,"h2"),e._uU(2,"Registro de Usuario"),e.qZA(),e.TgZ(3,"p"),e._uU(4,"Usuario registrado satistactoriamente, verifique su correo electr\xf3nico y active su cuenta por favor."),e.qZA(),e.qZA())}function yt(h,n){1&h&&(e.TgZ(0,"div",19),e.TgZ(1,"div",20),e._UZ(2,"div"),e._UZ(3,"div"),e._UZ(4,"div"),e._UZ(5,"div"),e._UZ(6,"div"),e._UZ(7,"div"),e._UZ(8,"div"),e._UZ(9,"div"),e._UZ(10,"div"),e._UZ(11,"div"),e._UZ(12,"div"),e._UZ(13,"div"),e.qZA(),e.qZA())}const Gt=function(h){return{small:h}};let Qt=(()=>{class h extends Ie.X{constructor(t,o,u,p,C,F){super(o,p,C,F),this.router=t,this.restProvider=o,this.http=u,this.events=p,this.domSanitizer=C,this.sharedData=F,this._window=window,this.showLoading=!1,this.showSuccessMessage=!1,this.registerUserModel=new pt}ngOnInit(){localStorage.getItem("apiKey")&&this.router.navigate([this.sharedData.platform,"home"],{skipLocationChange:!1})}register(){this.registerUserModel.ConfirmEmailUrl=window.location.origin+"/"+this.sharedData.platform+"/confirm",this.showLoading=!0,this.restProvider.executeSinovadApiService(J.yw.POST,"/users/Register",this.registerUserModel).then(t=>{console.log("Registrado exitosamente"),this.showLoading=!1,this.showSuccessMessage=!0},t=>{this.showLoading=!1,this.errorMessage=t,console.error(t)})}onClose(){this.router.navigate([this.sharedData.platform,"landing"],{skipLocationChange:!1})}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(R.F0),e.Y36(Re.C),e.Y36(S.eN),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(ke.g))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-register-user"]],features:[e.qOj],decls:9,vars:10,consts:[[1,"sinovad-back-button-container"],["id","button_close_form",3,"click"],[3,"src"],["id","sinovad-form-container","tabindex","0",1,"sinovad-sinovad-form-container",3,"ngClass"],[1,"sinovad-login-form-content"],[4,"ngIf"],["class","sinovad-spinner-container",4,"ngIf"],[1,"sinovad-login-title-container"],["id","sinovad-form-container-UserName-section","tabindex","0",1,"sinovad-login-form-caption-input-container"],[1,"sinovad-form-caption-input-content"],[1,"sinovad-login-form-caption-container"],[1,"sinovad-form-textinput-container"],["type","text",3,"ngModel","ngModelChange"],["id","sinovad-form-container-UserName-section",1,"sinovad-login-form-caption-input-container"],["id","sinovad-form-container-password-section",1,"sinovad-login-form-caption-input-container"],["id","password-input","type","password",3,"ngModel","ngModelChange"],["id","sinovad-form-container-button-section",1,"sinovad-login-form-button-section"],["id","log-in-button",3,"click"],[1,"sinovad-login-form-error-message-container"],[1,"sinovad-spinner-container"],[1,"lds-spinner"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"button",1),e.NdJ("click",function(){return o.onClose()}),e._UZ(2,"img",2),e.ALo(3,"formatDataPipe"),e.qZA(),e.qZA(),e.TgZ(4,"section",3),e.TgZ(5,"div",4),e.YNc(6,rt,50,7,"div",5),e.YNc(7,Xe,5,0,"div",5),e.qZA(),e.qZA(),e.YNc(8,yt,14,0,"div",6)),2&t&&(e.xp6(2),e.Q6J("src",e.xi3(3,5,"back-screen.png","GetImageURLByKey"),e.LSH),e.xp6(2),e.Q6J("ngClass",e.VKq(8,Gt,o.isSmallDevice())),e.xp6(2),e.Q6J("ngIf",!o.showSuccessMessage),e.xp6(1),e.Q6J("ngIf",o.showSuccessMessage),e.xp6(1),e.Q6J("ngIf",o.showLoading))},directives:[H.mk,H.O5,ne.Fj,ne.JJ,ne.On],pipes:[X.A],styles:['[_nghost-%COMP%]{position:absolute;width:100%;height:100%;background:black}.sinovad-sinovad-form-container[_ngcontent-%COMP%]{width:100%;height:100%;color:#fff;position:absolute;align-items:center;justify-content:center;display:flex}.sinovad-login-form-back-button[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:60px;padding:10px 15px;cursor:pointer;height:60px;display:flex;align-items:center;justify-content:center}.sinovad-login-form-back-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:unset;width:100%;height:100%}.sinovad-login-form-content[_ngcontent-%COMP%]{color:#fff;padding:40px}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]{height:80px;display:flex;align-items:center;justify-content:center}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;width:100%;cursor:pointer;background-color:#ba2302;color:#fff;padding:10px;text-align:center;border-radius:5px;font-size:30px;opacity:.8}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1;padding:12px}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible{opacity:1;padding:12px}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{opacity:1;padding:12px}.sinovad-login-title-container[_ngcontent-%COMP%]{width:100%;text-align:center;font-size:40px;font-weight:700;margin-bottom:20px}.sinovad-login-form-caption-input-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;margin-bottom:20px}.sinovad-form-caption-input-content[_ngcontent-%COMP%]{width:100%}.sinovad-login-form-caption-container[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:30px;margin-bottom:4px}.sinovad-form-textinput-container[_ngcontent-%COMP%]{display:block;color:#000}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border-radius:5px;padding:10px;color:#fff;outline:none;background:lightslategrey;border:none;font-size:30px;opacity:.8;border:2px solid transparent}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:#fff}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#fff}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover{opacity:1;border:2px solid white}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus-visible{opacity:1;border:2px solid white}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{opacity:1;border:2px solid white}.small[_ngcontent-%COMP%]   .sinovad-login-form-content[_ngcontent-%COMP%]{width:100%;height:100%;padding-top:170px}.small[_ngcontent-%COMP%]   .sinovad-login-form-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:unset}.small[_ngcontent-%COMP%]   .sinovad-login-title-container[_ngcontent-%COMP%]{font-size:20px}.small[_ngcontent-%COMP%]   .sinovad-login-form-caption-container[_ngcontent-%COMP%]{font-size:unset}.small[_ngcontent-%COMP%]   .sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:35px;font-size:unset}.sinovad-login-form-button-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:50px}.sinovad-login-form-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:30px;border:1px solid #dedede;border-radius:5px;padding-left:10px;padding-right:10px}.sinovad-login-form-error-message-container[_ngcontent-%COMP%]{color:red;text-align:center;font-size:17px;white-space:pre-line}.sinovad-spinner-container[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;top:0;left:0;display:flex;align-items:center;z-index:999;justify-content:center;background:rgba(0,0,0,.5)}.lds-spinner[_ngcontent-%COMP%]{color:official;display:inline-block;position:relative;width:80px;height:80px}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transform-origin:40px 40px;animation:lds-spinner 1.2s linear infinite}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after{content:" ";display:block;position:absolute;top:3px;left:37px;width:6px;height:18px;border-radius:20%;background:#fff}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){transform:rotate(0);animation-delay:-1.1s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){transform:rotate(30deg);animation-delay:-1s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){transform:rotate(60deg);animation-delay:-.9s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){transform:rotate(90deg);animation-delay:-.8s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(5){transform:rotate(120deg);animation-delay:-.7s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(6){transform:rotate(150deg);animation-delay:-.6s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(7){transform:rotate(180deg);animation-delay:-.5s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(8){transform:rotate(210deg);animation-delay:-.4s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(9){transform:rotate(240deg);animation-delay:-.3s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(10){transform:rotate(270deg);animation-delay:-.2s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(11){transform:rotate(300deg);animation-delay:-.1s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(12){transform:rotate(330deg);animation-delay:0s}@keyframes lds-spinner{0%{opacity:1}to{opacity:0}}']}),h})();class on{}const mn=["loginFormContainer"];function Dn(h,n){1&h&&(e.TgZ(0,"div",21),e.TgZ(1,"div",22),e._UZ(2,"div"),e._UZ(3,"div"),e._UZ(4,"div"),e._UZ(5,"div"),e._UZ(6,"div"),e._UZ(7,"div"),e._UZ(8,"div"),e._UZ(9,"div"),e._UZ(10,"div"),e._UZ(11,"div"),e._UZ(12,"div"),e._UZ(13,"div"),e.qZA(),e.qZA())}const Zn=function(h){return{small:h}};let Jn=(()=>{class h extends Ie.X{constructor(t,o,u,p,C,F,$){super(o,C,F,$),this.router=t,this.restProvider=o,this.ref=u,this.http=p,this.events=C,this.domSanitizer=F,this.sharedData=$,this._window=window,this.showLoading=!1,this.user=new on,this.showSplashScreen=new e.vpe}ngOnInit(){localStorage.getItem("apiKey")&&this.router.navigate([this.sharedData.platform,"home"],{skipLocationChange:!1})}ngOnDestroy(){this.loginFormContainer.nativeElement.removeEventListener("keydown",this.customKeyboardControlsEvent)}ngAfterViewInit(){this.initializeLoginViewControls()}initializeLoginViewControls(){this.customKeyboardControlsEvent&&this.loginFormContainer.nativeElement.removeEventListener("keydown",this.customKeyboardControlsEvent),this.focusFullScreenContainer(this.loginFormContainer.nativeElement,this.ref);let t=this;this.customKeyboardControlsEvent=function(u){t.setKeyboardActionsFullScreenPage(u,t.loginFormContainer.nativeElement,t.ref)},this.loginFormContainer.nativeElement.addEventListener("keydown",this.customKeyboardControlsEvent)}login(){localStorage.getItem("apiKey")&&this.router.navigate([this.sharedData.platform,"home"],{skipLocationChange:!1}),this.showLoading=!0,this.restProvider.executeSinovadApiService(J.yw.POST,"/users/Login",this.user).then(t=>{let o=t.Data;localStorage.setItem("apiKey",o),this.sharedData.currentToken=o,this.showSplashScreen.emit(!0),this.getUser().then(u=>{this.getProfiles().then(p=>{this.router.navigate([this.sharedData.platform,"select-profile"],{skipLocationChange:!1})},p=>{console.error(p)})},u=>{console.error(u)})},t=>{this.showLoading=!1,this.errorMessage=t,console.error(t)})}onClose(){this.router.navigate([this.sharedData.platform,"landing"],{skipLocationChange:!1})}showRecoverPasswordPage(){this.router.navigate([this.sharedData.platform,"recover"],{skipLocationChange:!1})}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(R.F0),e.Y36(Re.C),e.Y36(e.sBO),e.Y36(S.eN),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(ke.g))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-login"]],viewQuery:function(t,o){if(1&t&&e.Gf(mn,5),2&t){let u;e.iGM(u=e.CRH())&&(o.loginFormContainer=u.first)}},outputs:{showSplashScreen:"showSplashScreen"},features:[e.qOj],decls:35,vars:11,consts:[[1,"sinovad-back-button-container"],["id","button_close_form",3,"click"],[3,"src"],["id","sinovad-form-container","tabindex","0",1,"sinovad-sinovad-form-container",3,"ngClass"],["loginFormContainer",""],[1,"sinovad-login-form-content"],[1,"sinovad-login-title-container"],["id","sinovad-form-container-UserName-section","tabindex","0",1,"sinovad-login-form-caption-input-container"],[1,"sinovad-form-caption-input-content"],[1,"sinovad-login-form-caption-container"],[1,"sinovad-form-textinput-container"],["id","UserName-input","type","text",3,"ngModel","ngModelChange"],["UserName",""],["id","sinovad-form-container-password-section","tabindex","0",1,"sinovad-login-form-caption-input-container"],["id","password-input","type","password",3,"ngModel","ngModelChange"],["password",""],["id","sinovad-form-container-button-section","tabindex","0",1,"sinovad-login-form-button-section"],["id","log-in-button",1,"sinovad-btn-enter",3,"click"],[1,"sinovad-login-form-error-message-container"],["id","recover-password-button",1,"sinovad-btn-recover",3,"click"],["class","sinovad-spinner-container",4,"ngIf"],[1,"sinovad-spinner-container"],[1,"lds-spinner"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"button",1),e.NdJ("click",function(){return o.onClose()}),e._UZ(2,"img",2),e.ALo(3,"formatDataPipe"),e.qZA(),e.qZA(),e.TgZ(4,"section",3,4),e.TgZ(6,"div",5),e.TgZ(7,"div"),e.TgZ(8,"div",6),e._uU(9," Inicia sesi\xf3n "),e.qZA(),e.TgZ(10,"section",7),e.TgZ(11,"div",8),e.TgZ(12,"div",9),e.TgZ(13,"span"),e._uU(14," Usuario "),e.qZA(),e.qZA(),e.TgZ(15,"div",10),e.TgZ(16,"input",11,12),e.NdJ("ngModelChange",function(p){return o.user.UserName=p}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"section",13),e.TgZ(19,"div",8),e.TgZ(20,"div",9),e.TgZ(21,"span"),e._uU(22," Contrase\xf1a "),e.qZA(),e.qZA(),e.TgZ(23,"div",10),e.TgZ(24,"input",14,15),e.NdJ("ngModelChange",function(p){return o.user.Password=p}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"section",16),e.TgZ(27,"button",17),e.NdJ("click",function(){return o.login()}),e._uU(28,"INGRESAR"),e.qZA(),e.qZA(),e.TgZ(29,"div",18),e._uU(30),e.qZA(),e.TgZ(31,"section",16),e.TgZ(32,"button",19),e.NdJ("click",function(){return o.showRecoverPasswordPage()}),e._uU(33,"OLVIDASTE TU CONTRASE\xd1A?"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(34,Dn,14,0,"div",20)),2&t&&(e.xp6(2),e.Q6J("src",e.xi3(3,6,"back-screen.png","GetImageURLByKey"),e.LSH),e.xp6(2),e.Q6J("ngClass",e.VKq(9,Zn,o.isSmallDevice())),e.xp6(12),e.Q6J("ngModel",o.user.UserName),e.xp6(8),e.Q6J("ngModel",o.user.Password),e.xp6(6),e.hij(" ",o.errorMessage," "),e.xp6(4),e.Q6J("ngIf",o.showLoading))},directives:[H.mk,ne.Fj,ne.JJ,ne.On,H.O5],pipes:[X.A],styles:['[_nghost-%COMP%]{position:absolute;width:100%;height:100%;background:black}button[_ngcontent-%COMP%]{outline:none!important;cursor:pointer!important;box-sizing:border-box!important}.sinovad-sinovad-form-container[_ngcontent-%COMP%]{width:100%;height:100%;color:#fff;position:absolute;align-items:center;justify-content:center;display:flex}.sinovad-login-form-back-button[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:60px;padding:10px 15px;cursor:pointer;height:60px;display:flex;align-items:center;justify-content:center}.sinovad-login-form-back-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:unset;width:100%;height:100%}.sinovad-login-form-content[_ngcontent-%COMP%]{color:#fff;padding:40px}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]{height:80px;display:flex;align-items:center;justify-content:center}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;width:100%;cursor:pointer;padding:10px;text-align:center;border-radius:5px;font-size:30px;opacity:.8}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]   .sinovad-btn-enter[_ngcontent-%COMP%]{background-color:#ba2302;color:#fff}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]   .sinovad-btn-recover[_ngcontent-%COMP%]{background-color:#2e303d;color:#fff}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1;padding:12px}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible{opacity:1;padding:12px}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{opacity:1;padding:12px}.sinovad-login-title-container[_ngcontent-%COMP%]{width:100%;text-align:center;font-size:40px;font-weight:700;margin-bottom:20px}.sinovad-login-form-caption-input-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;margin-bottom:20px}.sinovad-form-caption-input-content[_ngcontent-%COMP%]{width:100%}.sinovad-login-form-caption-container[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:30px;margin-bottom:4px}.sinovad-form-textinput-container[_ngcontent-%COMP%]{display:block;color:#000}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border-radius:5px;padding:10px;color:#fff;outline:none;background:lightslategrey;border:none;font-size:30px;opacity:.8;border:2px solid transparent}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:#fff}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#fff}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover{opacity:1;border:2px solid white}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus-visible{opacity:1;border:2px solid white}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{opacity:1;border:2px solid white}.small[_ngcontent-%COMP%]   .sinovad-login-form-content[_ngcontent-%COMP%]{width:100%;height:100%;padding-top:170px}.small[_ngcontent-%COMP%]   .sinovad-login-form-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:unset}.small[_ngcontent-%COMP%]   .sinovad-login-title-container[_ngcontent-%COMP%]{font-size:20px}.small[_ngcontent-%COMP%]   .sinovad-login-form-caption-container[_ngcontent-%COMP%]{font-size:unset}.small[_ngcontent-%COMP%]   .sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:35px;font-size:unset}.sinovad-login-form-button-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:50px}.sinovad-login-form-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:30px;border:1px solid #dedede;border-radius:5px;padding-left:10px;padding-right:10px}.sinovad-login-form-error-message-container[_ngcontent-%COMP%]{color:red;text-align:center;font-size:17px;white-space:pre-line}.sinovad-spinner-container[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;top:0;left:0;display:flex;align-items:center;z-index:999;justify-content:center;background:rgba(0,0,0,.5)}.lds-spinner[_ngcontent-%COMP%]{color:official;display:inline-block;position:relative;width:80px;height:80px}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transform-origin:40px 40px;animation:lds-spinner 1.2s linear infinite}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after{content:" ";display:block;position:absolute;top:3px;left:37px;width:6px;height:18px;border-radius:20%;background:#fff}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){transform:rotate(0);animation-delay:-1.1s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){transform:rotate(30deg);animation-delay:-1s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){transform:rotate(60deg);animation-delay:-.9s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){transform:rotate(90deg);animation-delay:-.8s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(5){transform:rotate(120deg);animation-delay:-.7s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(6){transform:rotate(150deg);animation-delay:-.6s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(7){transform:rotate(180deg);animation-delay:-.5s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(8){transform:rotate(210deg);animation-delay:-.4s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(9){transform:rotate(240deg);animation-delay:-.3s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(10){transform:rotate(270deg);animation-delay:-.2s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(11){transform:rotate(300deg);animation-delay:-.1s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(12){transform:rotate(330deg);animation-delay:0s}@keyframes lds-spinner{0%{opacity:1}to{opacity:0}}']}),h})();class _r{}const Pr=["recoverPasswordFormContainer"];function ct(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",8),e._uU(2," Olvido su contrase\xf1a "),e.qZA(),e.TgZ(3,"section",9),e.TgZ(4,"div",10),e.TgZ(5,"div",11),e.TgZ(6,"span"),e._uU(7," Email "),e.qZA(),e.qZA(),e.TgZ(8,"div",12),e.TgZ(9,"input",13,14),e.NdJ("ngModelChange",function(u){return e.CHM(t),e.oxw().recoverPasswordModel.Email=u}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"section",15),e.TgZ(12,"button",16),e.NdJ("click",function(){return e.CHM(t),e.oxw().SendRecoverPasswordEmail()}),e._uU(13,"Recuperar contrase\xf1a"),e.qZA(),e.qZA(),e.TgZ(14,"div",17),e._uU(15),e.qZA(),e.qZA()}if(2&h){const t=e.oxw();e.xp6(9),e.Q6J("ngModel",t.recoverPasswordModel.Email),e.xp6(6),e.hij(" ",t.errorMessage," ")}}function qt(h,n){1&h&&(e.TgZ(0,"div"),e.TgZ(1,"h2"),e._uU(2,"Confirmaci\xf3n de olvido de contrase\xf1a"),e.qZA(),e.TgZ(3,"p"),e._uU(4,"Por favor verifique su email para recuperar su contrase\xf1a"),e.qZA(),e.qZA())}function fn(h,n){1&h&&(e.TgZ(0,"div",18),e.TgZ(1,"div",19),e._UZ(2,"div"),e._UZ(3,"div"),e._UZ(4,"div"),e._UZ(5,"div"),e._UZ(6,"div"),e._UZ(7,"div"),e._UZ(8,"div"),e._UZ(9,"div"),e._UZ(10,"div"),e._UZ(11,"div"),e._UZ(12,"div"),e._UZ(13,"div"),e.qZA(),e.qZA())}const It=function(h){return{small:h}};let kt=(()=>{class h extends Ie.X{constructor(t,o,u,p,C,F){super(o,p,C,F),this.router=t,this.restProvider=o,this.http=u,this.events=p,this.domSanitizer=C,this.sharedData=F,this._window=window,this.showLoading=!1,this.recoverPasswordModel=new _r,this.sendedConfirmationEmail=!1}SendRecoverPasswordEmail(){this.showLoading=!0,this.recoverPasswordModel.ResetPasswordUrl=window.location.origin+"/"+this.sharedData.platform+"/reset",this.restProvider.executeSinovadApiService(J.yw.POST,"/users/RecoverPassword",this.recoverPasswordModel).then(t=>{this.sendedConfirmationEmail=!0,this.showLoading=!1},t=>{this.showLoading=!1,this.errorMessage=t,console.error(t)})}onClose(){this.router.navigate([this.sharedData.platform,"landing"],{skipLocationChange:!1})}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(R.F0),e.Y36(Re.C),e.Y36(S.eN),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(ke.g))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-recover-password"]],viewQuery:function(t,o){if(1&t&&e.Gf(Pr,5),2&t){let u;e.iGM(u=e.CRH())&&(o.recoverPasswordFormContainer=u.first)}},features:[e.qOj],decls:10,vars:10,consts:[[1,"sinovad-back-button-container"],["id","button_close_form",3,"click"],[3,"src"],["id","sinovad-form-container","tabindex","0",1,"sinovad-sinovad-form-container",3,"ngClass"],["recoverPasswordFormContainer",""],[1,"sinovad-login-form-content"],[4,"ngIf"],["class","sinovad-spinner-container",4,"ngIf"],[1,"sinovad-login-title-container"],["id","sinovad-form-container-UserName-section","tabindex","0",1,"sinovad-login-form-caption-input-container"],[1,"sinovad-form-caption-input-content"],[1,"sinovad-login-form-caption-container"],[1,"sinovad-form-textinput-container"],["id","UserName-input","type","text",3,"ngModel","ngModelChange"],["UserName",""],["id","sinovad-form-container-button-section","tabindex","0",1,"sinovad-login-form-button-section"],["id","log-in-button",1,"sinovad-btn-enter",3,"click"],[1,"sinovad-login-form-error-message-container"],[1,"sinovad-spinner-container"],[1,"lds-spinner"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"button",1),e.NdJ("click",function(){return o.onClose()}),e._UZ(2,"img",2),e.ALo(3,"formatDataPipe"),e.qZA(),e.qZA(),e.TgZ(4,"section",3,4),e.TgZ(6,"div",5),e.YNc(7,ct,16,2,"div",6),e.YNc(8,qt,5,0,"div",6),e.qZA(),e.qZA(),e.YNc(9,fn,14,0,"div",7)),2&t&&(e.xp6(2),e.Q6J("src",e.xi3(3,5,"back-screen.png","GetImageURLByKey"),e.LSH),e.xp6(2),e.Q6J("ngClass",e.VKq(8,It,o.isSmallDevice())),e.xp6(3),e.Q6J("ngIf",!o.sendedConfirmationEmail),e.xp6(1),e.Q6J("ngIf",o.sendedConfirmationEmail),e.xp6(1),e.Q6J("ngIf",o.showLoading))},directives:[H.mk,H.O5,ne.Fj,ne.JJ,ne.On],pipes:[X.A],styles:['[_nghost-%COMP%]{position:absolute;width:100%;height:100%;background:black}.sinovad-sinovad-form-container[_ngcontent-%COMP%]{width:100%;height:100%;color:#fff;position:absolute;align-items:center;justify-content:center;display:flex}.sinovad-login-form-back-button[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:60px;padding:10px 15px;cursor:pointer;height:60px;display:flex;align-items:center;justify-content:center}.sinovad-login-form-back-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:unset;width:100%;height:100%}.sinovad-login-form-content[_ngcontent-%COMP%]{color:#fff;padding:40px}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]{height:80px;display:flex;align-items:center;justify-content:center}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;width:100%;cursor:pointer;padding:10px;text-align:center;border-radius:5px;font-size:30px;opacity:.8}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]   .sinovad-btn-enter[_ngcontent-%COMP%]{background-color:#ba2302;color:#fff}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]   .sinovad-btn-recover[_ngcontent-%COMP%]{background-color:#2e303d;color:#fff}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1;padding:12px}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible{opacity:1;padding:12px}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{opacity:1;padding:12px}.sinovad-login-title-container[_ngcontent-%COMP%]{width:100%;text-align:center;font-size:40px;font-weight:700;margin-bottom:20px}.sinovad-login-form-caption-input-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;margin-bottom:20px}.sinovad-form-caption-input-content[_ngcontent-%COMP%]{width:100%}.sinovad-login-form-caption-container[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:30px;margin-bottom:4px}.sinovad-form-textinput-container[_ngcontent-%COMP%]{display:block;color:#000}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border-radius:5px;padding:10px;color:#fff;outline:none;background:lightslategrey;border:none;font-size:30px;opacity:.8;border:2px solid transparent}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:#fff}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#fff}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover{opacity:1;border:2px solid white}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus-visible{opacity:1;border:2px solid white}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{opacity:1;border:2px solid white}.small[_ngcontent-%COMP%]   .sinovad-login-form-content[_ngcontent-%COMP%]{width:100%;height:100%;padding-top:170px}.small[_ngcontent-%COMP%]   .sinovad-login-form-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:unset}.small[_ngcontent-%COMP%]   .sinovad-login-title-container[_ngcontent-%COMP%]{font-size:20px}.small[_ngcontent-%COMP%]   .sinovad-login-form-caption-container[_ngcontent-%COMP%]{font-size:unset}.small[_ngcontent-%COMP%]   .sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:35px;font-size:unset}.sinovad-login-form-button-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:50px}.sinovad-login-form-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:30px;border:1px solid #dedede;border-radius:5px;padding-left:10px;padding-right:10px}.sinovad-login-form-error-message-container[_ngcontent-%COMP%]{color:red;text-align:center;font-size:17px;white-space:pre-line}.sinovad-spinner-container[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;top:0;left:0;display:flex;align-items:center;z-index:999;justify-content:center;background:rgba(0,0,0,.5)}.lds-spinner[_ngcontent-%COMP%]{color:official;display:inline-block;position:relative;width:80px;height:80px}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transform-origin:40px 40px;animation:lds-spinner 1.2s linear infinite}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after{content:" ";display:block;position:absolute;top:3px;left:37px;width:6px;height:18px;border-radius:20%;background:#fff}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){transform:rotate(0);animation-delay:-1.1s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){transform:rotate(30deg);animation-delay:-1s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){transform:rotate(60deg);animation-delay:-.9s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){transform:rotate(90deg);animation-delay:-.8s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(5){transform:rotate(120deg);animation-delay:-.7s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(6){transform:rotate(150deg);animation-delay:-.6s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(7){transform:rotate(180deg);animation-delay:-.5s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(8){transform:rotate(210deg);animation-delay:-.4s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(9){transform:rotate(240deg);animation-delay:-.3s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(10){transform:rotate(270deg);animation-delay:-.2s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(11){transform:rotate(300deg);animation-delay:-.1s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(12){transform:rotate(330deg);animation-delay:0s}@keyframes lds-spinner{0%{opacity:1}to{opacity:0}}']}),h})();class Rt{}class sn{}var kn=O(7568),wn=O.n(kn);function xt(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"section",9),e.TgZ(1,"div",10),e.TgZ(2,"div",11),e.TgZ(3,"span"),e._uU(4," Contrase\xf1a "),e.qZA(),e.qZA(),e.TgZ(5,"div",12),e.TgZ(6,"input",13,14),e.NdJ("ngModelChange",function(u){return e.CHM(t),e.oxw().resetPasswordModel.Password=u}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"section",9),e.TgZ(9,"div",10),e.TgZ(10,"div",11),e.TgZ(11,"span"),e._uU(12," Confirmaci\xf3n de contrase\xf1a "),e.qZA(),e.qZA(),e.TgZ(13,"div",12),e.TgZ(14,"input",13,14),e.NdJ("ngModelChange",function(u){return e.CHM(t),e.oxw().resetPasswordModel.ConfirmPassword=u}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"section",15),e.TgZ(17,"button",16),e.NdJ("click",function(){return e.CHM(t),e.oxw().confirm()}),e._uU(18,"Confirmar"),e.qZA(),e.qZA(),e.TgZ(19,"div",17),e._uU(20),e.qZA()}if(2&h){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.resetPasswordModel.Password),e.xp6(8),e.Q6J("ngModel",t.resetPasswordModel.ConfirmPassword),e.xp6(6),e.hij(" ",t.errorMessage," ")}}function Ct(h,n){1&h&&(e.TgZ(0,"h2"),e._uU(1,"Token inv\xe1lido"),e.qZA())}function Vt(h,n){1&h&&(e.TgZ(0,"h2"),e._uU(1,"Se cambi\xf3 la contrase\xf1a satisfactoriamente"),e.qZA())}function Jt(h,n){1&h&&(e.TgZ(0,"div",18),e.TgZ(1,"div",19),e._UZ(2,"div"),e._UZ(3,"div"),e._UZ(4,"div"),e._UZ(5,"div"),e._UZ(6,"div"),e._UZ(7,"div"),e._UZ(8,"div"),e._UZ(9,"div"),e._UZ(10,"div"),e._UZ(11,"div"),e._UZ(12,"div"),e._UZ(13,"div"),e.qZA(),e.qZA())}const bn=function(h){return{small:h}};let Ln=(()=>{class h extends Ie.X{constructor(t,o,u,p,C,F,$){super(u,C,F,$),this.router=t,this.activeRoute=o,this.restProvider=u,this.http=p,this.events=C,this.domSanitizer=F,this.sharedData=$,this._window=window,this.showLoading=!1,this.resetPasswordModel=new Rt,this.showResetPasswordForm=!1,this.showInvalidTokenMessage=!1,this.showResetPasswordSuccessMessage=!1}ngOnInit(){localStorage.getItem("apiKey")&&this.router.navigate([this.sharedData.platform,"home"],{skipLocationChange:!1});let t=this.activeRoute.snapshot.params.base64Data;if(null!=t)try{let p=wn().decode(t);var o=JSON.parse(p);if(this.resetPasswordToken=o.ResetPasswordToken,this.userId=o.UserId,null!=this.resetPasswordToken&&null!=this.userId){this.showLoading=!0;var u=new sn;u.ResetPasswordToken=this.resetPasswordToken,u.UserId=this.userId,this.restProvider.executeSinovadApiService(J.yw.POST,"/users/ValidateResetPasswordToken",u).then(C=>{this.showResetPasswordForm=!0,this.showLoading=!1},C=>{this.showLoading=!1,this.showInvalidTokenMessage=!0,this.errorMessage=C,console.error(C)})}else this.router.navigate([this.sharedData.platform,"home"],{skipLocationChange:!1})}catch(p){this.router.navigate([this.sharedData.platform,"home"],{skipLocationChange:!1})}else this.router.navigate([this.sharedData.platform,"home"],{skipLocationChange:!1})}confirm(){this.showLoading=!0,this.resetPasswordModel.ResetPasswordToken=this.resetPasswordToken,this.resetPasswordModel.UserId=this.userId,this.restProvider.executeSinovadApiService(J.yw.POST,"/users/ResetPassword",this.resetPasswordModel).then(t=>{this.showResetPasswordSuccessMessage=!0,this.showResetPasswordForm=!1,this.showLoading=!1},t=>{this.showLoading=!1,this.errorMessage=t,console.error(t)})}onClickCloseButton(){this.router.navigate([this.sharedData.platform,"login"],{skipLocationChange:!1})}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(R.F0),e.Y36(R.gz),e.Y36(Re.C),e.Y36(S.eN),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(ke.g))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-reset-password"]],features:[e.qOj],decls:14,vars:11,consts:[[1,"sinovad-back-button-container"],["id","button_close_form",3,"click"],[3,"src"],["id","sinovad-form-container","tabindex","0",1,"sinovad-sinovad-form-container",3,"ngClass"],["loginFormContainer",""],[1,"sinovad-login-form-content"],[1,"sinovad-login-title-container"],[3,"ngIf"],["class","sinovad-spinner-container",4,"ngIf"],["id","sinovad-form-container-password-section","tabindex","0",1,"sinovad-login-form-caption-input-container"],[1,"sinovad-form-caption-input-content"],[1,"sinovad-login-form-caption-container"],[1,"sinovad-form-textinput-container"],["id","password-input","type","password",3,"ngModel","ngModelChange"],["password",""],["id","sinovad-form-container-button-section","tabindex","0",1,"sinovad-login-form-button-section"],["id","log-in-button",1,"sinovad-btn-enter",3,"click"],[1,"sinovad-login-form-error-message-container"],[1,"sinovad-spinner-container"],[1,"lds-spinner"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"button",1),e.NdJ("click",function(){return o.onClickCloseButton()}),e._UZ(2,"img",2),e.ALo(3,"formatDataPipe"),e.qZA(),e.qZA(),e.TgZ(4,"section",3,4),e.TgZ(6,"div",5),e.TgZ(7,"div"),e.TgZ(8,"div",6),e._uU(9," Cambiar contrase\xf1a "),e.qZA(),e.YNc(10,xt,21,3,"ng-template",7),e.YNc(11,Ct,2,0,"ng-template",7),e.YNc(12,Vt,2,0,"ng-template",7),e.qZA(),e.qZA(),e.qZA(),e.YNc(13,Jt,14,0,"div",8)),2&t&&(e.xp6(2),e.Q6J("src",e.xi3(3,6,"back-screen.png","GetImageURLByKey"),e.LSH),e.xp6(2),e.Q6J("ngClass",e.VKq(9,bn,o.isSmallDevice())),e.xp6(6),e.Q6J("ngIf",o.showResetPasswordForm),e.xp6(1),e.Q6J("ngIf",o.showInvalidTokenMessage),e.xp6(1),e.Q6J("ngIf",o.showResetPasswordSuccessMessage),e.xp6(1),e.Q6J("ngIf",o.showLoading))},directives:[H.mk,H.O5,ne.Fj,ne.JJ,ne.On],pipes:[X.A],styles:['[_nghost-%COMP%]{position:absolute;width:100%;height:100%;background:black}.sinovad-sinovad-form-container[_ngcontent-%COMP%]{width:100%;height:100%;color:#fff;position:absolute;align-items:center;justify-content:center;display:flex}.sinovad-login-form-back-button[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:60px;padding:10px 15px;cursor:pointer;height:60px;display:flex;align-items:center;justify-content:center}.sinovad-login-form-back-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:unset;width:100%;height:100%}.sinovad-login-form-content[_ngcontent-%COMP%]{color:#fff;padding:40px}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]{height:80px;display:flex;align-items:center;justify-content:center}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;width:100%;cursor:pointer;padding:10px;text-align:center;border-radius:5px;font-size:30px;opacity:.8}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]   .sinovad-btn-enter[_ngcontent-%COMP%]{background-color:#ba2302;color:#fff}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]   .sinovad-btn-recover[_ngcontent-%COMP%]{background-color:#2e303d;color:#fff}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1;padding:12px}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible{opacity:1;padding:12px}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{opacity:1;padding:12px}.sinovad-login-title-container[_ngcontent-%COMP%]{width:100%;text-align:center;font-size:40px;font-weight:700;margin-bottom:20px}.sinovad-login-form-caption-input-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;margin-bottom:20px}.sinovad-form-caption-input-content[_ngcontent-%COMP%]{width:100%}.sinovad-login-form-caption-container[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:30px;margin-bottom:4px}.sinovad-form-textinput-container[_ngcontent-%COMP%]{display:block;color:#000}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border-radius:5px;padding:10px;color:#fff;outline:none;background:lightslategrey;border:none;font-size:30px;opacity:.8;border:2px solid transparent}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:#fff}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#fff}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover{opacity:1;border:2px solid white}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus-visible{opacity:1;border:2px solid white}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{opacity:1;border:2px solid white}.small[_ngcontent-%COMP%]   .sinovad-login-form-content[_ngcontent-%COMP%]{width:100%;height:100%;padding-top:170px}.small[_ngcontent-%COMP%]   .sinovad-login-form-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:unset}.small[_ngcontent-%COMP%]   .sinovad-login-title-container[_ngcontent-%COMP%]{font-size:20px}.small[_ngcontent-%COMP%]   .sinovad-login-form-caption-container[_ngcontent-%COMP%]{font-size:unset}.small[_ngcontent-%COMP%]   .sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:35px;font-size:unset}.sinovad-login-form-button-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:50px}.sinovad-login-form-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:30px;border:1px solid #dedede;border-radius:5px;padding-left:10px;padding-right:10px}.sinovad-login-form-error-message-container[_ngcontent-%COMP%]{color:red;text-align:center;font-size:17px;white-space:pre-line}.sinovad-spinner-container[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;top:0;left:0;display:flex;align-items:center;z-index:999;justify-content:center;background:rgba(0,0,0,.5)}.lds-spinner[_ngcontent-%COMP%]{color:official;display:inline-block;position:relative;width:80px;height:80px}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transform-origin:40px 40px;animation:lds-spinner 1.2s linear infinite}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after{content:" ";display:block;position:absolute;top:3px;left:37px;width:6px;height:18px;border-radius:20%;background:#fff}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){transform:rotate(0);animation-delay:-1.1s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){transform:rotate(30deg);animation-delay:-1s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){transform:rotate(60deg);animation-delay:-.9s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){transform:rotate(90deg);animation-delay:-.8s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(5){transform:rotate(120deg);animation-delay:-.7s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(6){transform:rotate(150deg);animation-delay:-.6s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(7){transform:rotate(180deg);animation-delay:-.5s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(8){transform:rotate(210deg);animation-delay:-.4s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(9){transform:rotate(240deg);animation-delay:-.3s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(10){transform:rotate(270deg);animation-delay:-.2s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(11){transform:rotate(300deg);animation-delay:-.1s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(12){transform:rotate(330deg);animation-delay:0s}@keyframes lds-spinner{0%{opacity:1}to{opacity:0}}']}),h})();class Pt{}function yn(h,n){if(1&h&&(e.TgZ(0,"div",9),e.TgZ(1,"h2"),e._uU(2),e.qZA(),e.qZA()),2&h){const t=e.oxw();e.xp6(2),e.Oqu(t.errorMessage)}}function Nn(h,n){1&h&&(e.TgZ(0,"h2"),e._uU(1,"Su correo ha sido confirmado, ya puede iniciar sesi\xf3n"),e.qZA())}function $n(h,n){1&h&&(e.TgZ(0,"div",10),e.TgZ(1,"div",11),e._UZ(2,"div"),e._UZ(3,"div"),e._UZ(4,"div"),e._UZ(5,"div"),e._UZ(6,"div"),e._UZ(7,"div"),e._UZ(8,"div"),e._UZ(9,"div"),e._UZ(10,"div"),e._UZ(11,"div"),e._UZ(12,"div"),e._UZ(13,"div"),e.qZA(),e.qZA())}const dr=function(h){return{small:h}};let pr=(()=>{class h extends Ie.X{constructor(t,o,u,p,C,F,$){super(u,C,F,$),this.router=t,this.activeRoute=o,this.restProvider=u,this.http=p,this.events=C,this.domSanitizer=F,this.sharedData=$,this._window=window,this.showLoading=!1,this.showInvalidTokenMessage=!1,this.showSuccessMessage=!1}ngOnInit(){localStorage.getItem("apiKey")&&this.router.navigate([this.sharedData.platform,"home"],{skipLocationChange:!1});let t=this.activeRoute.snapshot.params.base64Data;if(null!=t)try{let p=wn().decode(t);var o=JSON.parse(p);if(o.ConfirmEmailToken){this.showLoading=!0;var u=new Pt;u.ConfirmEmailToken=o.ConfirmEmailToken,u.UserId=o.UserId,this.restProvider.executeSinovadApiService(J.yw.POST,"/users/ValidateConfirmEmailToken",u).then(C=>{this.showLoading=!1,this.showSuccessMessage=!0},C=>{this.showLoading=!1,this.showInvalidTokenMessage=!0,this.errorMessage=C,console.error(C)})}else this.router.navigate([this.sharedData.platform,"home"],{skipLocationChange:!1})}catch(p){this.router.navigate([this.sharedData.platform,"home"],{skipLocationChange:!1})}else this.router.navigate([this.sharedData.platform,"home"],{skipLocationChange:!1})}onClose(){this.router.navigate([this.sharedData.platform,"login"],{skipLocationChange:!1})}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(R.F0),e.Y36(R.gz),e.Y36(Re.C),e.Y36(S.eN),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(ke.g))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-confirm-email"]],features:[e.qOj],decls:13,vars:10,consts:[[1,"sinovad-back-button-container"],["id","button_close_form",3,"click"],[3,"src"],["id","sinovad-form-container","tabindex","0",1,"sinovad-sinovad-form-container",3,"ngClass"],["loginFormContainer",""],[1,"sinovad-login-form-content"],[1,"sinovad-login-title-container"],[3,"ngIf"],["class","sinovad-spinner-container",4,"ngIf"],[1,"sinovad-login-form-error-message-container"],[1,"sinovad-spinner-container"],[1,"lds-spinner"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"button",1),e.NdJ("click",function(){return o.onClose()}),e._UZ(2,"img",2),e.ALo(3,"formatDataPipe"),e.qZA(),e.qZA(),e.TgZ(4,"section",3,4),e.TgZ(6,"div",5),e.TgZ(7,"div"),e.TgZ(8,"div",6),e._uU(9," Confirmaci\xf3n de Email "),e.qZA(),e.YNc(10,yn,3,1,"ng-template",7),e.YNc(11,Nn,2,0,"ng-template",7),e.qZA(),e.qZA(),e.qZA(),e.YNc(12,$n,14,0,"div",8)),2&t&&(e.xp6(2),e.Q6J("src",e.xi3(3,5,"back-screen.png","GetImageURLByKey"),e.LSH),e.xp6(2),e.Q6J("ngClass",e.VKq(8,dr,o.isSmallDevice())),e.xp6(6),e.Q6J("ngIf",o.showInvalidTokenMessage),e.xp6(1),e.Q6J("ngIf",o.showSuccessMessage),e.xp6(1),e.Q6J("ngIf",o.showLoading))},directives:[H.mk,H.O5],pipes:[X.A],styles:['[_nghost-%COMP%]{position:absolute;width:100%;height:100%;background:black}.sinovad-sinovad-form-container[_ngcontent-%COMP%]{width:100%;height:100%;color:#fff;position:absolute;align-items:center;justify-content:center;display:flex}.sinovad-login-form-back-button[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:60px;padding:10px 15px;cursor:pointer;height:60px;display:flex;align-items:center;justify-content:center}.sinovad-login-form-back-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:unset;width:100%;height:100%}.sinovad-login-form-content[_ngcontent-%COMP%]{color:#fff;padding:40px}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]{height:80px;display:flex;align-items:center;justify-content:center}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;width:100%;cursor:pointer;padding:10px;text-align:center;border-radius:5px;font-size:30px;opacity:.8}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]   .sinovad-btn-enter[_ngcontent-%COMP%]{background-color:#ba2302;color:#fff}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]   .sinovad-btn-recover[_ngcontent-%COMP%]{background-color:#2e303d;color:#fff}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1;padding:12px}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible{opacity:1;padding:12px}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{opacity:1;padding:12px}.sinovad-login-title-container[_ngcontent-%COMP%]{width:100%;text-align:center;font-size:40px;font-weight:700;margin-bottom:20px}.sinovad-login-form-caption-input-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;margin-bottom:20px}.sinovad-form-caption-input-content[_ngcontent-%COMP%]{width:100%}.sinovad-login-form-caption-container[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:30px;margin-bottom:4px}.sinovad-form-textinput-container[_ngcontent-%COMP%]{display:block;color:#000}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border-radius:5px;padding:10px;color:#fff;outline:none;background:lightslategrey;border:none;font-size:30px;opacity:.8;border:2px solid transparent}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:#fff}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#fff}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover{opacity:1;border:2px solid white}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus-visible{opacity:1;border:2px solid white}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{opacity:1;border:2px solid white}.small[_ngcontent-%COMP%]   .sinovad-login-form-content[_ngcontent-%COMP%]{width:100%;height:100%;padding-top:170px}.small[_ngcontent-%COMP%]   .sinovad-login-form-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:unset}.small[_ngcontent-%COMP%]   .sinovad-login-title-container[_ngcontent-%COMP%]{font-size:20px}.small[_ngcontent-%COMP%]   .sinovad-login-form-caption-container[_ngcontent-%COMP%]{font-size:unset}.small[_ngcontent-%COMP%]   .sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:35px;font-size:unset}.sinovad-login-form-button-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:50px}.sinovad-login-form-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:30px;border:1px solid #dedede;border-radius:5px;padding-left:10px;padding-right:10px}.sinovad-login-form-error-message-container[_ngcontent-%COMP%]{color:red;text-align:center;font-size:17px;white-space:pre-line}.sinovad-spinner-container[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;top:0;left:0;display:flex;align-items:center;z-index:999;justify-content:center;background:rgba(0,0,0,.5)}.lds-spinner[_ngcontent-%COMP%]{color:official;display:inline-block;position:relative;width:80px;height:80px}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transform-origin:40px 40px;animation:lds-spinner 1.2s linear infinite}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after{content:" ";display:block;position:absolute;top:3px;left:37px;width:6px;height:18px;border-radius:20%;background:#fff}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){transform:rotate(0);animation-delay:-1.1s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){transform:rotate(30deg);animation-delay:-1s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){transform:rotate(60deg);animation-delay:-.9s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){transform:rotate(90deg);animation-delay:-.8s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(5){transform:rotate(120deg);animation-delay:-.7s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(6){transform:rotate(150deg);animation-delay:-.6s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(7){transform:rotate(180deg);animation-delay:-.5s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(8){transform:rotate(210deg);animation-delay:-.4s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(9){transform:rotate(240deg);animation-delay:-.3s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(10){transform:rotate(270deg);animation-delay:-.2s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(11){transform:rotate(300deg);animation-delay:-.1s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(12){transform:rotate(330deg);animation-delay:0s}@keyframes lds-spinner{0%{opacity:1}to{opacity:0}}']}),h})();const Cr=[{path:"web/home",component:Bn,loadChildren:()=>Promise.all([O.e(592),O.e(467)]).then(O.bind(O,3467)).then(h=>h.HomePageModule)},{path:"web/movies",component:Xt,loadChildren:()=>Promise.all([O.e(592),O.e(832)]).then(O.bind(O,1832)).then(h=>h.MoviesPageModule)},{path:"web/tvseries",component:jn,loadChildren:()=>Promise.all([O.e(592),O.e(132)]).then(O.bind(O,8132)).then(h=>h.TvSeriesPageModule)},{path:"web/search",component:De,loadChildren:()=>Promise.all([O.e(592),O.e(352)]).then(O.bind(O,8352)).then(h=>h.SearchViewWebPageModule)},{path:"web/select-profile",component:Dt,loadChildren:()=>Promise.resolve().then(O.bind(O,2001)).then(h=>h.ProfilesViewPageModule)},{path:"web/moviedetail/:movieId",component:Qe,loadChildren:()=>Promise.all([O.e(592),O.e(686)]).then(O.bind(O,686)).then(h=>h.MovieDetailPageModule)},{path:"web/tvseriedetail/:tvSerieId",component:Lt,loadChildren:()=>Promise.all([O.e(592),O.e(221)]).then(O.bind(O,5221)).then(h=>h.TvSerieDetailPageModule)},{path:"web/landing",component:_t,loadChildren:()=>O.e(721).then(O.bind(O,8721)).then(h=>h.LandingPageModule)},{path:"web/register",component:Qt,loadChildren:()=>O.e(31).then(O.bind(O,8031)).then(h=>h.RegisterAcccountPageModule)},{path:"web/login",component:Jn,loadChildren:()=>O.e(107).then(O.bind(O,107)).then(h=>h.LoginPageModule)},{path:"web/recover",component:kt,loadChildren:()=>O.e(185).then(O.bind(O,5185)).then(h=>h.RecoverPasswordPageModule)},{path:"web/reset/:base64Data",component:Ln,loadChildren:()=>O.e(371).then(O.bind(O,4371)).then(h=>h.ResetPasswordPageModule)},{path:"confirm/:base64Data",component:pr,loadChildren:()=>O.e(994).then(O.bind(O,2994)).then(h=>h.ConfirmEmailPageModule)},{path:"web/404",component:he,loadChildren:()=>O.e(867).then(O.bind(O,2867)).then(h=>h.NotFoundPageModule)},{path:"web",pathMatch:"full",redirectTo:"web/home"}];let Sr=(()=>{class h{}return h.\u0275fac=function(t){return new(t||h)},h.\u0275mod=e.oAB({type:h}),h.\u0275inj=e.cJS({imports:[[H.ez,ne.u5,pe.U,Ee,ne.UX,ce.m,me.f,xe.g,R.Bz.forChild(Cr)]]}),h})(),Yr=(()=>{class h{}return h.\u0275fac=function(t){return new(t||h)},h.\u0275mod=e.oAB({type:h}),h.\u0275inj=e.cJS({imports:[[r.b2,H.ez,ne.u5,ce.m,ne.UX,Sr]]}),h})();function Tr(h,n){if(1&h&&(e.TgZ(0,"span",9),e._uU(1),e.qZA(),e.TgZ(2,"div",10),e._uU(3),e.qZA()),2&h){const t=e.oxw();e.xp6(1),e.hij(" ",t.sharedData.currentProfile.FullName," "),e.xp6(2),e.hij(" ",t.getInitials(t.sharedData.currentProfile)," ")}}function Oi(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"li",2),e.TgZ(1,"a",13,4),e.NdJ("click",function(){e.CHM(t);const u=e.oxw().$implicit;return e.oxw(2).onSelectProfile(u)}),e.TgZ(3,"div",10),e._uU(4),e.qZA(),e.TgZ(5,"span",9),e._uU(6),e.qZA(),e.qZA(),e.qZA()}if(2&h){const t=e.oxw().$implicit,o=e.oxw(2);e.xp6(4),e.hij(" ",o.getInitials(t)," "),e.xp6(2),e.hij(" ",t.FullName," ")}}function Mi(h,n){if(1&h&&e.YNc(0,Oi,7,2,"li",12),2&h){const t=n.$implicit,o=e.oxw(2);e.Q6J("ngIf",o.sharedData.currentProfile&&t.Id!=o.sharedData.currentProfile.Id)}}function oi(h,n){if(1&h&&e.YNc(0,Mi,1,1,"ng-template",11),2&h){const t=e.oxw();e.Q6J("ngForOf",t.sharedData.listProfiles)}}let si=(()=>{class h extends Ie.X{constructor(t,o,u,p,C,F){super(o,p,C,F),this.router=t,this.restProvider=o,this.http=u,this.events=p,this.domSanitizer=C,this.sharedData=F,this.showSplashScreen=new e.vpe,this.changeProfile=new e.vpe,this.logout=new e.vpe}ngOnInit(){}onClickAvatarButton(){}onClickChangeProfileButton(){this.showSplashScreen.emit(!0),this.router.navigate([this.sharedData.platform,"select-profile"],{skipLocationChange:!1})}onSelectProfile(t){this.sharedData.currentProfile=t,this.changeProfile.emit(!0)}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(R.F0),e.Y36(Re.C),e.Y36(S.eN),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(ke.g))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-dropdown-user"]],outputs:{showSplashScreen:"showSplashScreen",changeProfile:"changeProfile",logout:"logout"},features:[e.qOj],decls:17,vars:2,consts:[[1,"sinovad-user-dropdown"],["role","menu",1,"sinovad-dropdown-list"],[1,"sinovad-avatar-item"],["id","avatar_button",1,"sinovad-avatar-button","principal",3,"click"],["button",""],[3,"ngIf"],[1,"sinovad-separator-dropdown"],[1,"sinovad-bottom-list"],["id","log_out_button",3,"click"],[1,"sinovad-fullname-profile","text-truncate"],[1,"sinovad-intials-profile"],["ngFor","",3,"ngForOf"],["class","sinovad-avatar-item",4,"ngIf"],["id","avatar_button",1,"sinovad-avatar-button",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"ul",1),e.TgZ(2,"li",2),e.TgZ(3,"a",3,4),e.NdJ("click",function(){return o.onClickAvatarButton()}),e.YNc(5,Tr,4,2,"ng-template",5),e.qZA(),e.qZA(),e._UZ(6,"div",6),e.TgZ(7,"div",7),e.YNc(8,oi,1,1,"ng-template",5),e.TgZ(9,"li",2),e.TgZ(10,"a",8),e.NdJ("click",function(){return o.onClickChangeProfileButton()}),e.TgZ(11,"span"),e._uU(12,"Cambiar perfil"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"li",2),e.TgZ(14,"a",8),e.NdJ("click",function(){return o.logout.emit(!0)}),e.TgZ(15,"span"),e._uU(16,"Cerrar Sesi\xf3n"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Q6J("ngIf",o.sharedData.currentProfile),e.xp6(3),e.Q6J("ngIf",o.sharedData.listProfiles&&o.sharedData.listProfiles.length>0))},directives:[H.O5,H.sg],styles:["[_nghost-%COMP%]{height:100%}.sinovad-user-dropdown[_ngcontent-%COMP%]{height:100%;display:flex;align-items:flex-start}ul.sinovad-dropdown-list[_ngcontent-%COMP%]{background:transparent;border:1px solid transparent;box-shadow:none;height:100%;max-height:72px;padding:0 20px;width:100px;align-items:center;border-radius:4px;display:flex;flex-flow:row wrap;justify-content:flex-end;list-style:none;margin:0;position:absolute;right:0}ul.sinovad-dropdown-list[_ngcontent-%COMP%]   .sinovad-separator-dropdown[_ngcontent-%COMP%], ul.sinovad-dropdown-list[_ngcontent-%COMP%]   .sinovad-bottom-list[_ngcontent-%COMP%]{display:none}ul.sinovad-dropdown-list[_ngcontent-%COMP%]:hover{background:#131313;border:1px solid rgba(151,151,151,.34);box-shadow:#00000080 0 0 18px;height:auto;max-height:calc(100vh - 40px);padding-top:10px;padding-bottom:20px;width:240px;z-index:10;align-items:center;border-radius:4px;display:flex;flex-flow:row wrap;justify-content:flex-end;list-style:none;margin:0;position:absolute;right:0}ul.sinovad-dropdown-list[_ngcontent-%COMP%]:hover   .sinovad-separator-dropdown[_ngcontent-%COMP%]{width:100%;padding-left:10px;height:2px;background-color:#fff;display:block;margin-top:10px}ul.sinovad-dropdown-list[_ngcontent-%COMP%]:hover   .sinovad-bottom-list[_ngcontent-%COMP%]{display:block}ul.sinovad-dropdown-list[_ngcontent-%COMP%]:hover   .sinovad-bottom-list[_ngcontent-%COMP%]   .sinovad-avatar-item[_ngcontent-%COMP%]{margin-top:10px;width:200px;opacity:.7;font-size:16px;cursor:pointer}ul.sinovad-dropdown-list[_ngcontent-%COMP%]:hover   .sinovad-bottom-list[_ngcontent-%COMP%]   .sinovad-avatar-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center}ul.sinovad-dropdown-list[_ngcontent-%COMP%]:hover   .sinovad-bottom-list[_ngcontent-%COMP%]   .sinovad-avatar-item[_ngcontent-%COMP%]:hover{opacity:1}.sinovad-avatar-button[_ngcontent-%COMP%]{display:block;padding-left:0;background:transparent;border:none;cursor:pointer;color:#fff;display:flex;align-items:center;text-decoration:unset}.sinovad-avatar-button[_ngcontent-%COMP%]   .sinovad-fullname-profile[_ngcontent-%COMP%]{display:block;margin-left:10px;font-size:20px;margin-right:10px}.sinovad-avatar-button[_ngcontent-%COMP%]   .sinovad-intials-profile[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:25px;border:1px solid white;display:flex;align-items:center;justify-content:center;font-size:30px}.sinovad-avatar-button.principal[_ngcontent-%COMP%]   .sinovad-fullname-profile[_ngcontent-%COMP%]{display:block}@media only screen and (max-width: 1024px){.sinovad-avatar-button.principal[_ngcontent-%COMP%]   .sinovad-fullname-profile[_ngcontent-%COMP%]{display:none}.sinovad-dropdown-list[_ngcontent-%COMP%]:hover   .sinovad-fullname-profile[_ngcontent-%COMP%]{display:block}}"]}),h})();const Zi=["searchTarget"];function ci(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"li"),e.TgZ(1,"a",5),e.NdJ("click",function(){const p=e.CHM(t).$implicit;return e.oxw().onClickOption(p)}),e._UZ(2,"i"),e.TgZ(3,"span",6),e._uU(4),e.qZA(),e.qZA(),e.qZA()}if(2&h){const t=n.$implicit;e.xp6(2),e.Tol(t.iconClass),e.xp6(2),e.Oqu(t.name)}}let Si=(()=>{class h extends Ie.X{constructor(t,o,u,p,C){super(t,u,p,C),this.restProvider=t,this.http=o,this.events=u,this.domSanitizer=p,this.sharedData=C,this.searchText=void 0,this.selectOption=new e.vpe,this.showSplashScreen=new e.vpe,this.logout=new e.vpe,this.goHome=new e.vpe,this.search=new e.vpe,this.toggleMenu=new e.vpe,this.navbarOptions=[{index:1,name:"Inicio",method:"ShowInitial",iconClass:"fa-solid fa-house"},{index:2,name:"Pel\xedculas",method:"ShowMovies",iconClass:"fa-solid fa-film"},{index:3,name:"Series",method:"ShowSeries",iconClass:"fa-solid fa-tv"},{index:4,name:"B\xfasqueda",method:"ShowSearch",iconClass:"fa-solid fa-magnifying-glass"}]}ngOnInit(){}onClickAvatarButton(){}onClickOption(t){this.selectOption.emit(t)}onClickChangeProfileButton(){this.showSplashScreen.emit(!0)}onSelectProfile(t){this.sharedData.currentProfile=t,this.goHome.emit(!0)}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(Re.C),e.Y36(S.eN),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(ke.g))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-header-web"]],viewQuery:function(t,o){if(1&t&&e.Gf(Zi,5),2&t){let u;e.iGM(u=e.CRH())&&(o.searchTarget=u.first)}},inputs:{listProfiles:"listProfiles"},outputs:{selectOption:"selectOption",showSplashScreen:"showSplashScreen",logout:"logout",goHome:"goHome",search:"search",toggleMenu:"toggleMenu"},features:[e.qOj],decls:8,vars:5,consts:[[1,"sinovad-logo-button",3,"click"],[3,"src"],[1,"sinovad-nav-list"],["ngFor","",3,"ngForOf"],[3,"changeProfile","logout","showSplashScreen"],[3,"click"],[1,"ms-2"]],template:function(t,o){1&t&&(e.TgZ(0,"header"),e.TgZ(1,"nav"),e.TgZ(2,"a",0),e.NdJ("click",function(){return o.goHome.emit(!0)}),e._UZ(3,"img",1),e.ALo(4,"formatDataPipe"),e.qZA(),e.TgZ(5,"ul",2),e.YNc(6,ci,5,4,"ng-template",3),e.qZA(),e.TgZ(7,"app-dropdown-user",4),e.NdJ("changeProfile",function(){return o.goHome.emit(!0)})("logout",function(){return o.logout.emit(!0)})("showSplashScreen",function(){return o.showSplashScreen.emit(!0)}),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Q6J("src",e.xi3(4,2,"sinovad-logo.png","GetImageURLByKey"),e.LSH),e.xp6(3),e.Q6J("ngForOf",o.navbarOptions))},directives:[H.sg,si],pipes:[X.A],styles:[".sinovad-logo-button[_ngcontent-%COMP%]{padding:0;border:none;margin-left:30px;margin-right:10px;cursor:pointer}.sinovad-logo-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:24px}nav[_ngcontent-%COMP%]{background:black;color:#fff;flex-wrap:nowrap;justify-content:flex-start;display:flex;height:70px;align-items:center}nav[_ngcontent-%COMP%]   ul.sinovad-nav-list[_ngcontent-%COMP%]{list-style-type:none;flex-direction:row;display:flex;height:100%;align-items:center;margin-bottom:0;padding-left:0}nav[_ngcontent-%COMP%]   ul.sinovad-nav-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;height:100%}nav[_ngcontent-%COMP%]   ul.sinovad-nav-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;cursor:pointer;text-decoration:unset;height:100%;display:flex;align-items:center;padding-left:10px;padding-right:10px}@media only screen and (max-width: 1024px){.sinovad-nav-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}}@media only screen and (max-width: 767px){.sinovad-logo-button[_ngcontent-%COMP%]{margin-left:10px;margin-right:0}}"]}),h})();var Ar=O(8377),eo=O(1042),Bi=O(6059);function vo(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var o,u,p,C,F,Ui={exports:{}};o=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,u=/^(?=([^\/?#]*))\1([^]*)$/,p=/(?:\/|^)\.(?=\/)/g,C=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,Ui.exports=F={buildAbsoluteURL:function($,le,Se){if(Se=Se||{},$=$.trim(),!(le=le.trim())){if(!Se.alwaysNormalize)return $;var Le=F.parseURL($);if(!Le)throw new Error("Error trying to parse base URL.");return Le.path=F.normalizePath(Le.path),F.buildURLFromParts(Le)}var $e=F.parseURL(le);if(!$e)throw new Error("Error trying to parse relative URL.");if($e.scheme)return Se.alwaysNormalize?($e.path=F.normalizePath($e.path),F.buildURLFromParts($e)):le;var Je=F.parseURL($);if(!Je)throw new Error("Error trying to parse base URL.");if(!Je.netLoc&&Je.path&&"/"!==Je.path[0]){var st=u.exec(Je.path);Je.netLoc=st[1],Je.path=st[2]}Je.netLoc&&!Je.path&&(Je.path="/");var gt={scheme:Je.scheme,netLoc:$e.netLoc,path:null,params:$e.params,query:$e.query,fragment:$e.fragment};if(!$e.netLoc&&(gt.netLoc=Je.netLoc,"/"!==$e.path[0]))if($e.path){var Tt=Je.path,Zt=Tt.substring(0,Tt.lastIndexOf("/")+1)+$e.path;gt.path=F.normalizePath(Zt)}else gt.path=Je.path,$e.params||(gt.params=Je.params,$e.query||(gt.query=Je.query));return null===gt.path&&(gt.path=Se.alwaysNormalize?F.normalizePath($e.path):$e.path),F.buildURLFromParts(gt)},parseURL:function($){var le=o.exec($);return le?{scheme:le[1]||"",netLoc:le[2]||"",path:le[3]||"",params:le[4]||"",query:le[5]||"",fragment:le[6]||""}:null},normalizePath:function($){for($=$.split("").reverse().join("").replace(p,"");$.length!==($=$.replace(C,"")).length;);return $.split("").reverse().join("")},buildURLFromParts:function($){return $.scheme+$.netLoc+$.path+$.params+$.query+$.fragment}};var Mo=Ui.exports;function ji(h,n){var t=Object.keys(h);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(h);n&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(h,u).enumerable})),t.push.apply(t,o)}return t}function _i(h){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ji(Object(t),!0).forEach(function(o){Ko(h,o,t[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(t)):ji(Object(t)).forEach(function(o){Object.defineProperty(h,o,Object.getOwnPropertyDescriptor(t,o))})}return h}function Ko(h,n,t){return n=function ko(h){var n=function Po(h,n){if("object"!=typeof h||null===h)return h;var t=h[Symbol.toPrimitive];if(void 0!==t){var o=t.call(h,n||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(h)}(h,"string");return"symbol"==typeof n?n:String(n)}(n),n in h?Object.defineProperty(h,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):h[n]=t,h}function Wr(){return Wr=Object.assign?Object.assign.bind():function(h){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(h[o]=t[o])}return h},Wr.apply(this,arguments)}const ir=Number.isFinite||function(h){return"number"==typeof h&&isFinite(h)};let it=function(h){return h.MEDIA_ATTACHING="hlsMediaAttaching",h.MEDIA_ATTACHED="hlsMediaAttached",h.MEDIA_DETACHING="hlsMediaDetaching",h.MEDIA_DETACHED="hlsMediaDetached",h.BUFFER_RESET="hlsBufferReset",h.BUFFER_CODECS="hlsBufferCodecs",h.BUFFER_CREATED="hlsBufferCreated",h.BUFFER_APPENDING="hlsBufferAppending",h.BUFFER_APPENDED="hlsBufferAppended",h.BUFFER_EOS="hlsBufferEos",h.BUFFER_FLUSHING="hlsBufferFlushing",h.BUFFER_FLUSHED="hlsBufferFlushed",h.MANIFEST_LOADING="hlsManifestLoading",h.MANIFEST_LOADED="hlsManifestLoaded",h.MANIFEST_PARSED="hlsManifestParsed",h.LEVEL_SWITCHING="hlsLevelSwitching",h.LEVEL_SWITCHED="hlsLevelSwitched",h.LEVEL_LOADING="hlsLevelLoading",h.LEVEL_LOADED="hlsLevelLoaded",h.LEVEL_UPDATED="hlsLevelUpdated",h.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",h.LEVELS_UPDATED="hlsLevelsUpdated",h.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",h.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",h.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",h.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",h.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",h.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",h.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",h.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",h.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",h.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",h.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",h.CUES_PARSED="hlsCuesParsed",h.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",h.INIT_PTS_FOUND="hlsInitPtsFound",h.FRAG_LOADING="hlsFragLoading",h.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",h.FRAG_LOADED="hlsFragLoaded",h.FRAG_DECRYPTED="hlsFragDecrypted",h.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",h.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",h.FRAG_PARSING_METADATA="hlsFragParsingMetadata",h.FRAG_PARSED="hlsFragParsed",h.FRAG_BUFFERED="hlsFragBuffered",h.FRAG_CHANGED="hlsFragChanged",h.FPS_DROP="hlsFpsDrop",h.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",h.ERROR="hlsError",h.DESTROYING="hlsDestroying",h.KEY_LOADING="hlsKeyLoading",h.KEY_LOADED="hlsKeyLoaded",h.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",h.BACK_BUFFER_REACHED="hlsBackBufferReached",h}({}),rr=function(h){return h.NETWORK_ERROR="networkError",h.MEDIA_ERROR="mediaError",h.KEY_SYSTEM_ERROR="keySystemError",h.MUX_ERROR="muxError",h.OTHER_ERROR="otherError",h}({}),hn=function(h){return h.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",h.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",h.KEY_SYSTEM_NO_SESSION="keySystemNoSession",h.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",h.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",h.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",h.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",h.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",h.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",h.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",h.MANIFEST_LOAD_ERROR="manifestLoadError",h.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",h.MANIFEST_PARSING_ERROR="manifestParsingError",h.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",h.LEVEL_EMPTY_ERROR="levelEmptyError",h.LEVEL_LOAD_ERROR="levelLoadError",h.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",h.LEVEL_PARSING_ERROR="levelParsingError",h.LEVEL_SWITCH_ERROR="levelSwitchError",h.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",h.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",h.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",h.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",h.FRAG_LOAD_ERROR="fragLoadError",h.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",h.FRAG_DECRYPT_ERROR="fragDecryptError",h.FRAG_PARSING_ERROR="fragParsingError",h.FRAG_GAP="fragGap",h.REMUX_ALLOC_ERROR="remuxAllocError",h.KEY_LOAD_ERROR="keyLoadError",h.KEY_LOAD_TIMEOUT="keyLoadTimeOut",h.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",h.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",h.BUFFER_APPEND_ERROR="bufferAppendError",h.BUFFER_APPENDING_ERROR="bufferAppendingError",h.BUFFER_STALLED_ERROR="bufferStalledError",h.BUFFER_FULL_ERROR="bufferFullError",h.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",h.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",h.INTERNAL_EXCEPTION="internalException",h.INTERNAL_ABORTED="aborted",h.UNKNOWN="unknown",h}({});const Pi=function(){},Nt={trace:Pi,debug:Pi,log:Pi,warn:Pi,info:Pi,error:Pi};let an=Nt;const Bt=an,Or=/^(\d+)x(\d+)$/,Ur=/(.+?)=(".*?"|.*?)(?:,|$)/g;class fr{constructor(n){"string"==typeof n&&(n=fr.parseAttrList(n));for(const t in n)n.hasOwnProperty(t)&&("X-"===t.substring(0,2)&&(this.clientAttrs=this.clientAttrs||[],this.clientAttrs.push(t)),this[t]=n[t])}decimalInteger(n){const t=parseInt(this[n],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(n){if(this[n]){let t=(this[n]||"0x").slice(2);t=(1&t.length?"0":"")+t;const o=new Uint8Array(t.length/2);for(let u=0;u<t.length/2;u++)o[u]=parseInt(t.slice(2*u,2*u+2),16);return o}return null}hexadecimalIntegerAsNumber(n){const t=parseInt(this[n],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(n){return parseFloat(this[n])}optionalFloat(n,t){const o=this[n];return o?parseFloat(o):t}enumeratedString(n){return this[n]}bool(n){return"YES"===this[n]}decimalResolution(n){const t=Or.exec(this[n]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(n){let t;const o={};for(Ur.lastIndex=0;null!==(t=Ur.exec(n));){let p=t[2];0===p.indexOf('"')&&p.lastIndexOf('"')===p.length-1&&(p=p.slice(1,-1)),o[t[1].trim()]=p}return o}}function Vi(h){return"SCTE35-OUT"===h||"SCTE35-IN"===h}class so{constructor(n,t){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,t){const o=t.attr;for(const u in o)if(Object.prototype.hasOwnProperty.call(n,u)&&n[u]!==o[u]){Bt.warn(`DATERANGE tag attribute: "${u}" does not match for tags with ID: "${n.ID}"`),this._badValueForSameId=u;break}n=Wr(new fr({}),o,n)}if(this.attr=n,this._startDate=new Date(n["START-DATE"]),"END-DATE"in this.attr){const o=new Date(this.attr["END-DATE"]);ir(o.getTime())&&(this._endDate=o)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get startDate(){return this._startDate}get endDate(){if(this._endDate)return this._endDate;const n=this.duration;return null!==n?new Date(this._startDate.getTime()+1e3*n):null}get duration(){if("DURATION"in this.attr){const n=this.attr.decimalFloatingPoint("DURATION");if(ir(n))return n}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isValid(){return!!this.id&&!this._badValueForSameId&&ir(this.startDate.getTime())&&(null===this.duration||this.duration>=0)&&(!this.endOnNext||!!this.class)}}class to{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}class _o{constructor(n){this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams={audio:null,video:null,audiovideo:null},this.baseurl=n}setByteRange(n,t){const o=n.split("@",2),u=[];u[0]=1===o.length?t?t.byteRangeEndOffset:0:parseInt(o[1]),u[1]=parseInt(o[0])+u[0],this._byteRange=u}get byteRange(){return this._byteRange?this._byteRange:[]}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Mo.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(n){this._url=n}}class Ao extends _o{constructor(n,t){super(t),this._decryptdata=null,this.rawProgramDateTime=null,this.programDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.stats=new to,this.urlId=0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.type=n}get decryptdata(){const{levelkeys:n}=this;if(!n&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const t=this.levelkeys.identity;if(t)this._decryptdata=t.getDecryptData(this.sn);else{const o=Object.keys(this.levelkeys);if(1===o.length)return this._decryptdata=this.levelkeys[o[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(null===this.programDateTime||!ir(this.programDateTime))return null;const n=ir(this.duration)?this.duration:0;return this.programDateTime+1e3*n}get encrypted(){var n;if(null!=(n=this._decryptdata)&&n.encrypted)return!0;if(this.levelkeys){const t=Object.keys(this.levelkeys),o=t.length;if(o>1||1===o&&this.levelkeys[t[0]].encrypted)return!0}return!1}setKeyFormat(n){if(this.levelkeys){const t=this.levelkeys[n];t&&!this._decryptdata&&(this._decryptdata=t.getDecryptData(this.sn))}}abortRequests(){var n,t;null==(n=this.loader)||n.abort(),null==(t=this.keyLoader)||t.abort()}setElementaryStreamInfo(n,t,o,u,p,C=!1){const{elementaryStreams:F}=this,$=F[n];$?($.startPTS=Math.min($.startPTS,t),$.endPTS=Math.max($.endPTS,o),$.startDTS=Math.min($.startDTS,u),$.endDTS=Math.max($.endDTS,p)):F[n]={startPTS:t,endPTS:o,startDTS:u,endDTS:p,partial:C}}clearElementaryStreamInfo(){const{elementaryStreams:n}=this;n.audio=null,n.video=null,n.audiovideo=null}}class Bo extends _o{constructor(n,t,o,u,p){super(o),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.stats=new to,this.duration=n.decimalFloatingPoint("DURATION"),this.gap=n.bool("GAP"),this.independent=n.bool("INDEPENDENT"),this.relurl=n.enumeratedString("URI"),this.fragment=t,this.index=u;const C=n.enumeratedString("BYTERANGE");C&&this.setByteRange(C,p),p&&(this.fragOffset=p.fragOffset+p.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:n}=this;return!!(n.audio||n.video||n.audiovideo)}}class xi{constructor(n){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=n}reloaded(n){if(!n)return this.advanced=!0,void(this.updated=!0);const t=this.lastPartSn-n.lastPartSn,o=this.lastPartIndex-n.lastPartIndex;this.updated=this.endSN!==n.endSN||!!o||!!t,this.advanced=this.endSN>n.endSN||t>0||0===t&&o>0,this.misses=this.updated||this.advanced?Math.floor(.6*n.misses):n.misses+1,this.availabilityDelay=n.availabilityDelay}get hasProgramDateTime(){return!!this.fragments.length&&ir(this.fragments[this.fragments.length-1].programDateTime)}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||10}get drift(){const n=this.driftEndTime-this.driftStartTime;return n>0?1e3*(this.driftEnd-this.driftStart)/n:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var n;return null!=(n=this.partList)&&n.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var n;return null!=(n=this.fragments)&&n.length?this.fragments[this.fragments.length-1].end:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var n;return null!=(n=this.partList)&&n.length?this.partList[this.partList.length-1].index:-1}get lastPartSn(){var n;return null!=(n=this.partList)&&n.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}function wi(h){return Uint8Array.from(atob(h),n=>n.charCodeAt(0))}function Io(h){return Uint8Array.from(unescape(encodeURIComponent(h)),n=>n.charCodeAt(0))}var Hr={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},je_FAIRPLAY="com.apple.streamingkeydelivery",je_PLAYREADY="com.microsoft.playready",je_WIDEVINE="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";function lt(h){switch(h){case je_FAIRPLAY:return Hr.FAIRPLAY;case je_PLAYREADY:return Hr.PLAYREADY;case je_WIDEVINE:return Hr.WIDEVINE;case"org.w3.clearkey":return Hr.CLEARKEY}}function Ut(h){switch(h){case Hr.FAIRPLAY:return je_FAIRPLAY;case Hr.PLAYREADY:return je_PLAYREADY;case Hr.WIDEVINE:return je_WIDEVINE;case Hr.CLEARKEY:return"org.w3.clearkey"}}function gn(h){const{drmSystems:n,widevineLicenseUrl:t}=h,o=n?[Hr.FAIRPLAY,Hr.WIDEVINE,Hr.PLAYREADY,Hr.CLEARKEY].filter(u=>!!n[u]):[];return!o[Hr.WIDEVINE]&&t&&o.push(Hr.WIDEVINE),o}const _n="undefined"!=typeof self&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;function Dr(h,n,t){return Uint8Array.prototype.slice?h.slice(n,t):new Uint8Array(Array.prototype.slice.call(h,n,t))}const yr=(h,n)=>n+10<=h.length&&73===h[n]&&68===h[n+1]&&51===h[n+2]&&h[n+3]<255&&h[n+4]<255&&h[n+6]<128&&h[n+7]<128&&h[n+8]<128&&h[n+9]<128,Rr=(h,n)=>n+10<=h.length&&51===h[n]&&68===h[n+1]&&73===h[n+2]&&h[n+3]<255&&h[n+4]<255&&h[n+6]<128&&h[n+7]<128&&h[n+8]<128&&h[n+9]<128,ai=(h,n)=>{const t=n;let o=0;for(;yr(h,n);)o+=10,o+=jr(h,n+6),Rr(h,n+10)&&(o+=10),n+=o;if(o>0)return h.subarray(t,t+o)},jr=(h,n)=>{let t=0;return t=(127&h[n])<<21,t|=(127&h[n+1])<<14,t|=(127&h[n+2])<<7,t|=127&h[n+3],t},Gr=(h,n)=>yr(h,n)&&jr(h,n+6)+10<=h.length-n,Ri=h=>h&&"PRIV"===h.key&&"com.apple.streaming.transportStreamTimestamp"===h.info,Eo=h=>{const n=String.fromCharCode(h[0],h[1],h[2],h[3]),t=jr(h,4);return{type:n,size:t,data:h.subarray(10,10+t)}},Ti=h=>{let n=0;const t=[];for(;yr(h,n);){const o=jr(h,n+6);n+=10;const u=n+o;for(;n+8<u;){const p=Eo(h.subarray(n)),C=xo(p);C&&t.push(C),n+=p.size+10}Rr(h,n)&&(n+=10)}return t},xo=h=>"PRIV"===h.type?Ye(h):"W"===h.type[0]?we(h):Ne(h),Ye=h=>{if(h.size<2)return;const n=un(h.data,!0),t=new Uint8Array(h.data.subarray(n.length+1));return{key:h.type,info:n,data:t.buffer}},Ne=h=>{if(h.size<2)return;if("TXXX"===h.type){let t=1;const o=un(h.data.subarray(t),!0);t+=o.length+1;const u=un(h.data.subarray(t));return{key:h.type,info:o,data:u}}const n=un(h.data.subarray(1));return{key:h.type,data:n}},we=h=>{if("WXXX"===h.type){if(h.size<2)return;let t=1;const o=un(h.data.subarray(t),!0);t+=o.length+1;const u=un(h.data.subarray(t));return{key:h.type,info:o,data:u}}const n=un(h.data);return{key:h.type,data:n}},ht=h=>{if(8===h.data.byteLength){const n=new Uint8Array(h.data);let o=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7];return o/=45,1&n[3]&&(o+=47721858.84),Math.round(o)}},un=(h,n=!1)=>{const t=function qr(){return!Xn&&void 0!==self.TextDecoder&&(Xn=new self.TextDecoder("utf-8")),Xn}();if(t){const le=t.decode(h);if(n){const Se=le.indexOf("\0");return-1!==Se?le.substring(0,Se):le}return le.replace(/\0/g,"")}const o=h.length;let u,p,C,F="",$=0;for(;$<o;){if(u=h[$++],0===u&&n)return F;if(0!==u&&3!==u)switch(u>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:F+=String.fromCharCode(u);break;case 12:case 13:p=h[$++],F+=String.fromCharCode((31&u)<<6|63&p);break;case 14:p=h[$++],C=h[$++],F+=String.fromCharCode((15&u)<<12|(63&p)<<6|(63&C)<<0)}}return F};let Xn;const $r_hexDump=function(h){let n="";for(let t=0;t<h.length;t++){let o=h[t].toString(16);o.length<2&&(o="0"+o),n+=o}return n},no=Math.pow(2,32)-1,Cn=[].push,wt={video:1,audio:2,id3:3,text:4};function vn(h){return String.fromCharCode.apply(null,h)}function Hn(h,n){const t=h[n]<<8|h[n+1];return t<0?65536+t:t}function Gn(h,n){const t=Jr(h,n);return t<0?4294967296+t:t}function Jr(h,n){return h[n]<<24|h[n+1]<<16|h[n+2]<<8|h[n+3]}function Ni(h,n,t){h[n]=t>>24,h[n+1]=t>>16&255,h[n+2]=t>>8&255,h[n+3]=255&t}function Mr(h,n){const t=[];if(!n.length)return t;const o=h.byteLength;for(let u=0;u<o;){const p=Gn(h,u),F=p>1?u+p:o;if(vn(h.subarray(u+4,u+8))===n[0])if(1===n.length)t.push(h.subarray(u+8,F));else{const $=Mr(h.subarray(u+8,F),n.slice(1));$.length&&Cn.apply(t,$)}u=F}return t}function sa(h){const n=[],t=h[0];let o=8;const u=Gn(h,o);o+=4,o+=0===t?8:16,o+=2;let F=h.length+0;const $=Hn(h,o);o+=2;for(let le=0;le<$;le++){let Se=o;const Le=Gn(h,Se);Se+=4;const $e=2147483647&Le;if((2147483648&Le)>>>31==1)return Bt.warn("SIDX has hierarchical references (not supported)"),null;const st=Gn(h,Se);Se+=4,n.push({referenceSize:$e,subsegmentDuration:st,info:{duration:st/u,start:F,end:F+$e-1}}),F+=$e,Se+=4,o=Se}return{earliestPresentationTime:0,timescale:u,version:t,referencesCount:$,references:n}}function mu(h){const n=[],t=Mr(h,["moov","trak"]);for(let u=0;u<t.length;u++){const p=t[u],C=Mr(p,["tkhd"])[0];if(C){let F=C[0],$=0===F?12:20;const le=Gn(C,$),Se=Mr(p,["mdia","mdhd"])[0];if(Se){F=Se[0],$=0===F?12:20;const Le=Gn(Se,$),$e=Mr(p,["mdia","hdlr"])[0];if($e){const st={soun:"audio",vide:"video"}[vn($e.subarray(8,12))];if(st){const gt=Mr(p,["mdia","minf","stbl","stsd"])[0];let Tt;gt&&(Tt=vn(gt.subarray(12,16))),n[le]={timescale:Le,type:st},n[st]={timescale:Le,id:le,codec:Tt}}}}}}return Mr(h,["moov","mvex","trex"]).forEach(u=>{const p=Gn(u,4),C=n[p];C&&(C.default={duration:Gn(u,12),flags:Gn(u,20)})}),n}function Ks(h){const n=Mr(h,["schm"])[0];if(n){const t=vn(n.subarray(4,8));if("cbcs"===t||"cenc"===t)return Mr(h,["schi","tenc"])[0]}return Bt.error("[eme] missing 'schm' box"),null}function Uo(h){const n=Gn(h,0);let t=8;1&n&&(t+=4),4&n&&(t+=4);let o=0;const u=Gn(h,4);for(let p=0;p<u;p++)256&n&&(o+=Gn(h,t),t+=4),512&n&&(t+=4),1024&n&&(t+=4),2048&n&&(t+=4);return o}function Hi(h,n){const t=new Uint8Array(h.length+n.length);return t.set(h),t.set(n,h.length),t}function Ua(h,n){const t=[],o=n.samples,u=n.timescale,p=n.id;let C=!1;return Mr(o,["moof"]).map($=>{const le=$.byteOffset-8;Mr($,["traf"]).map(Le=>{const $e=Mr(Le,["tfdt"]).map(Je=>{const st=Je[0];let gt=Gn(Je,4);return 1===st&&(gt*=Math.pow(2,32),gt+=Gn(Je,8)),gt/u})[0];return void 0!==$e&&(h=$e),Mr(Le,["tfhd"]).map(Je=>{const st=Gn(Je,4),gt=16777215&Gn(Je,0);let tn=0;const Mn=0!=(16&gt);let pn=0;const Kn=0!=(32&gt);let xn=8;st===p&&(0!=(1&gt)&&(xn+=8),0!=(2&gt)&&(xn+=4),0!=(8&gt)&&(tn=Gn(Je,xn),xn+=4),Mn&&(pn=Gn(Je,xn),xn+=4),Kn&&(xn+=4),"video"===n.type&&(C=function ja(h){if(!h)return!1;const n=h.indexOf("."),t=n<0?h:h.substring(0,n);return"hvc1"===t||"hev1"===t||"dvh1"===t||"dvhe"===t}(n.codec)),Mr(Le,["trun"]).map(Wn=>{const er=Wn[0],Sn=16777215&Gn(Wn,0),gr=0!=(1&Sn);let sr=0;const ri=0!=(4&Sn),Fo=0!=(256&Sn);let Di=0;const Ci=0!=(512&Sn);let ei=0;const ur=0!=(1024&Sn),ar=0!=(2048&Sn);let ti=0;const hi=Gn(Wn,4);let Br=8;gr&&(sr=Gn(Wn,Br),Br+=4),ri&&(Br+=4);let ki=sr+le;for(let fo=0;fo<hi;fo++){if(Fo?(Di=Gn(Wn,Br),Br+=4):Di=tn,Ci?(ei=Gn(Wn,Br),Br+=4):ei=pn,ur&&(Br+=4),ar&&(ti=0===er?Gn(Wn,Br):Jr(Wn,Br),Br+=4),"video"===n.type){let Do=0;for(;Do<ei;){const ho=Gn(o,ki);ki+=4,_u(C,o[ki])&&El(o.subarray(ki,ki+ho),C?2:1,h+ti/u,t),ki+=ho,Do+=ho+4}}h+=Di/u}}))})})}),t}function _u(h,n){if(h){const t=n>>1&63;return 39===t||40===t}return 6==(31&n)}function El(h,n,t,o){const u=la(h);let p=0;p+=n;let C=0,F=0,$=!1,le=0;for(;p<u.length;){C=0;do{if(p>=u.length)break;le=u[p++],C+=le}while(255===le);F=0;do{if(p>=u.length)break;le=u[p++],F+=le}while(255===le);const Se=u.length-p;if(!$&&4===C&&p<u.length){if($=!0,181===u[p++]){const $e=Hn(u,p);if(p+=2,49===$e){const Je=Gn(u,p);if(p+=4,1195456820===Je){const st=u[p++];if(3===st){const gt=u[p++],Tt=31&gt,Zt=64&gt,rn=Zt?2+3*Tt:0,tn=new Uint8Array(rn);if(Zt){tn[0]=gt;for(let Mn=1;Mn<rn;Mn++)tn[Mn]=u[p++]}o.push({type:st,payloadType:C,pts:t,bytes:tn})}}}}}else if(5===C&&F<Se){if($=!0,F>16){const Le=[];for(let st=0;st<16;st++){const gt=u[p++].toString(16);Le.push(1==gt.length?"0"+gt:gt),(3===st||5===st||7===st||9===st)&&Le.push("-")}const $e=F-16,Je=new Uint8Array($e);for(let st=0;st<$e;st++)Je[st]=u[p++];o.push({payloadType:C,pts:t,uuid:Le.join(""),userData:un(Je),userDataBytes:Je})}}else if(F<Se)p+=F;else if(F>Se)break}}function la(h){const n=h.byteLength,t=[];let o=1;for(;o<n-2;)0===h[o]&&0===h[o+1]&&3===h[o+2]?(t.push(o+2),o+=2):o++;if(0===t.length)return h;const u=n-t.length,p=new Uint8Array(u);let C=0;for(o=0;o<u;C++,o++)C===t[0]&&(C++,t.shift()),p[o]=h[C];return p}let Ws={};class ts{static clearKeyUriToKeyIdMap(){Ws={}}constructor(n,t,o,u=[1],p=null){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=n,this.uri=t,this.keyFormat=o,this.keyFormatVersions=u,this.iv=p,this.encrypted=!!n&&"NONE"!==n,this.isCommonEncryption=this.encrypted&&"AES-128"!==n}isSupported(){if(this.method){if("AES-128"===this.method||"NONE"===this.method)return!0;if("identity"===this.keyFormat)return"SAMPLE-AES"===this.method;switch(this.keyFormat){case je_FAIRPLAY:case je_WIDEVINE:case je_PLAYREADY:case"org.w3.clearkey":return-1!==["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)}}return!1}getDecryptData(n){if(!this.encrypted||!this.uri)return null;if("AES-128"===this.method&&this.uri&&!this.iv){"number"!=typeof n&&("AES-128"===this.method&&!this.iv&&Bt.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),n=0);const o=function Tl(h){const n=new Uint8Array(16);for(let t=12;t<16;t++)n[t]=h>>8*(15-t)&255;return n}(n);return new ts(this.method,this.uri,"identity",this.keyFormatVersions,o)}const t=function es(h){const n=h.split(":");let t=null;if("data"===n[0]&&2===n.length){const o=n[1].split(";"),u=o[o.length-1].split(",");if(2===u.length){const C=u[1];"base64"===u[0]?(o.splice(-1,1),t=wi(C)):t=function Fi(h){const n=Io(h).subarray(0,16),t=new Uint8Array(16);return t.set(n,16-n.length),t}(C)}}return t}(this.uri);if(t)switch(this.keyFormat){case je_WIDEVINE:this.pssh=t,t.length>=22&&(this.keyId=t.subarray(t.length-22,t.length-6));break;case je_PLAYREADY:{const o=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=function Ga(h,n,t){if(16!==h.byteLength)throw new RangeError("Invalid system id");let o,u,p;if(n){o=1,u=new Uint8Array(16*n.length);for(let F=0;F<n.length;F++){const $=n[F];if(16!==$.byteLength)throw new RangeError("Invalid key");u.set($,16*F)}}else o=0,u=new Uint8Array;o>0?(p=new Uint8Array(4),n.length>0&&new DataView(p.buffer).setUint32(0,n.length,!1)):p=new Uint8Array;const C=new Uint8Array(4);return t&&t.byteLength>0&&new DataView(C.buffer).setUint32(0,t.byteLength,!1),function Ha(h,...n){const t=n.length;let o=8,u=t;for(;u--;)o+=n[u].byteLength;const p=new Uint8Array(o);for(p[0]=o>>24&255,p[1]=o>>16&255,p[2]=o>>8&255,p[3]=255&o,p.set(h,4),u=0,o=8;u<t;u++)p.set(n[u],o),o+=n[u].byteLength;return p}([112,115,115,104],new Uint8Array([o,0,0,0]),h,p,u,C,t||new Uint8Array)}(o,null,t);const u=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2),p=String.fromCharCode.apply(null,Array.from(u)),C=p.substring(p.indexOf("<"),p.length),le=(new DOMParser).parseFromString(C,"text/xml").getElementsByTagName("KID")[0];if(le){const Se=le.childNodes[0]?le.childNodes[0].nodeValue:le.getAttribute("VALUE");if(Se){const Le=wi(Se).subarray(0,16);(function yo(h){const n=function(o,u,p){const C=o[u];o[u]=o[p],o[p]=C};n(h,0,3),n(h,1,2),n(h,4,5),n(h,6,7)})(Le),this.keyId=Le}}break}default:{let o=t.subarray(0,16);if(16!==o.length){const u=new Uint8Array(16);u.set(o,16-o.length),o=u}this.keyId=o;break}}if(!this.keyId||16!==this.keyId.byteLength){let o=Ws[this.uri];if(!o){const u=Object.keys(Ws).length%Number.MAX_SAFE_INTEGER;o=new Uint8Array(16),new DataView(o.buffer,12,4).setUint32(0,u),Ws[this.uri]=o}this.keyId=o}return this}}const Ys=/\{\$([a-zA-Z0-9-_]+)\}/g;function ua(h){return Ys.test(h)}function zi(h,n,t){if(null!==h.variableList||h.hasVariableRefs)for(let o=t.length;o--;){const u=t[o],p=n[u];p&&(n[u]=ns(h,p))}}function ns(h,n){if(null!==h.variableList||h.hasVariableRefs){const t=h.variableList;return n.replace(Ys,o=>{const u=o.substring(2,o.length-1),p=null==t?void 0:t[u];return void 0===p?(h.playlistParsingError||(h.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${u}"`)),o):p})}return n}function bl(h,n,t){let u,p,o=h.variableList;if(o||(h.variableList=o={}),"QUERYPARAM"in n){u=n.QUERYPARAM;try{const C=new self.URL(t).searchParams;if(!C.has(u))throw new Error(`"${u}" does not match any query parameter in URI: "${t}"`);p=C.get(u)}catch(C){h.playlistParsingError||(h.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${C.message}`))}}else u=n.NAME,p=n.VALUE;u in o?h.playlistParsingError||(h.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${u}"`)):o[u]=p||""}function yu(h,n,t){const o=n.IMPORT;if(t&&o in t){let u=h.variableList;u||(h.variableList=u={}),u[o]=t[o]}else h.playlistParsingError||(h.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${o}"`))}function Ai(){if("undefined"!=typeof self)return self.MediaSource||self.WebKitMediaSource}const rs={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dva1:!0,dvav:!0,dvh1:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}},mi=Ai();function Wa(h,n){var t;return null!=(t=null==mi?void 0:mi.isTypeSupported(`${n||"video"}/mp4;codecs="${h}"`))&&t}const Zs=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,ca=/#EXT-X-MEDIA:(.*)/g,Ya=/^#EXT(?:INF|-X-TARGETDURATION):/m,ms=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),da=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class ao{static findGroup(n,t){for(let o=0;o<n.length;o++){const u=n[o];if(u.id===t)return u}}static convertAVC1ToAVCOTI(n){const t=n.split(".");if(t.length>2){let o=t.shift()+".";return o+=parseInt(t.shift()).toString(16),o+=("000"+parseInt(t.shift()).toString(16)).slice(-4),o}return n}static resolve(n,t){return Mo.buildAbsoluteURL(t,n,{alwaysNormalize:!0})}static isMediaPlaylist(n){return Ya.test(n)}static parseMasterPlaylist(n,t){const u={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:ua(n)},p=[];let C;for(Zs.lastIndex=0;null!=(C=Zs.exec(n));)if(C[1]){var F;const le=new fr(C[1]);zi(u,le,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);const Se=ns(u,C[2]),Le={attrs:le,bitrate:le.decimalInteger("AVERAGE-BANDWIDTH")||le.decimalInteger("BANDWIDTH"),name:le.NAME,url:ao.resolve(Se,t)},$e=le.decimalResolution("RESOLUTION");$e&&(Le.width=$e.width,Le.height=$e.height),$a((le.CODECS||"").split(/[ ,]+/).filter(Je=>Je),Le),Le.videoCodec&&-1!==Le.videoCodec.indexOf("avc1")&&(Le.videoCodec=ao.convertAVC1ToAVCOTI(Le.videoCodec)),null!=(F=Le.unknownCodecs)&&F.length||p.push(Le),u.levels.push(Le)}else if(C[3]){const Se=C[4];switch(C[3]){case"SESSION-DATA":{const Le=new fr(Se);zi(u,Le,["DATA-ID","LANGUAGE","VALUE","URI"]);const $e=Le["DATA-ID"];$e&&(null===u.sessionData&&(u.sessionData={}),u.sessionData[$e]=Le);break}case"SESSION-KEY":{const Le=$s(Se,t,u);Le.encrypted&&Le.isSupported()?(null===u.sessionKeys&&(u.sessionKeys=[]),u.sessionKeys.push(Le)):Bt.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${Se}"`);break}case"DEFINE":{const Le=new fr(Se);zi(u,Le,["NAME","VALUE","QUERYPARAM"]),bl(u,Le,t)}break;case"CONTENT-STEERING":{const Le=new fr(Se);zi(u,Le,["SERVER-URI","PATHWAY-ID"]),u.contentSteering={uri:ao.resolve(Le["SERVER-URI"],t),pathwayId:Le["PATHWAY-ID"]||"."};break}case"START":u.startTimeOffset=Za(Se)}}return u.levels=p.length>0&&p.length<u.levels.length?p:u.levels,0===u.levels.length&&(u.playlistParsingError=new Error("no levels found in manifest")),u}static parseMasterPlaylistMedia(n,t,o){let u;const p={},C=o.levels,F={AUDIO:C.map(le=>({id:le.attrs.AUDIO,audioCodec:le.audioCodec})),SUBTITLES:C.map(le=>({id:le.attrs.SUBTITLES,textCodec:le.textCodec})),"CLOSED-CAPTIONS":[]};let $=0;for(ca.lastIndex=0;null!==(u=ca.exec(n));){const le=new fr(u[1]),Se=le.TYPE;if(Se){const Le=F[Se],$e=p[Se]||[];p[Se]=$e,zi(o,le,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);const Je={attrs:le,bitrate:0,id:$++,groupId:le["GROUP-ID"]||"",instreamId:le["INSTREAM-ID"],name:le.NAME||le.LANGUAGE||"",type:Se,default:le.bool("DEFAULT"),autoselect:le.bool("AUTOSELECT"),forced:le.bool("FORCED"),lang:le.LANGUAGE,url:le.URI?ao.resolve(le.URI,t):""};if(null!=Le&&Le.length){const st=ao.findGroup(Le,Je.groupId)||Le[0];Cl(Je,st,"audioCodec"),Cl(Je,st,"textCodec")}$e.push(Je)}}return p}static parseLevelPlaylist(n,t,o,u,p,C){const F=new xi(t),$=F.fragments;let Tt,Zt,rn,le=null,Se=0,Le=0,$e=0,Je=0,st=null,gt=new Ao(u,t),tn=-1,Mn=!1;for(ms.lastIndex=0,F.m3u8=n,F.hasVariableRefs=ua(n);null!==(Tt=ms.exec(n));){Mn&&(Mn=!1,gt=new Ao(u,t),gt.start=$e,gt.sn=Se,gt.cc=Je,gt.level=o,le&&(gt.initSegment=le,gt.rawProgramDateTime=le.rawProgramDateTime,le.rawProgramDateTime=null));const Wn=Tt[1];if(Wn){gt.duration=parseFloat(Wn);const er=(" "+Tt[2]).slice(1);gt.title=er||null,gt.tagList.push(er?["INF",Wn,er]:["INF",Wn])}else if(Tt[3]){if(ir(gt.duration)){gt.start=$e,rn&&Sl(gt,rn,F),gt.sn=Se,gt.level=o,gt.cc=Je,gt.urlId=p,$.push(gt);const er=(" "+Tt[3]).slice(1);gt.relurl=ns(F,er),fa(gt,st),st=gt,$e+=gt.duration,Se++,Le=0,Mn=!0}}else if(Tt[4]){const er=(" "+Tt[4]).slice(1);st?gt.setByteRange(er,st):gt.setByteRange(er)}else if(Tt[5])gt.rawProgramDateTime=(" "+Tt[5]).slice(1),gt.tagList.push(["PROGRAM-DATE-TIME",gt.rawProgramDateTime]),-1===tn&&(tn=$.length);else{if(Tt=Tt[0].match(da),!Tt){Bt.warn("No matches on slow regex match for level playlist!");continue}for(Zt=1;Zt<Tt.length&&void 0===Tt[Zt];Zt++);const er=(" "+Tt[Zt]).slice(1),Sn=(" "+Tt[Zt+1]).slice(1),gr=Tt[Zt+2]?(" "+Tt[Zt+2]).slice(1):"";switch(er){case"PLAYLIST-TYPE":F.type=Sn.toUpperCase();break;case"MEDIA-SEQUENCE":Se=F.startSN=parseInt(Sn);break;case"SKIP":{const sr=new fr(Sn);zi(F,sr,["RECENTLY-REMOVED-DATERANGES"]);const ri=sr.decimalInteger("SKIPPED-SEGMENTS");if(ir(ri)){F.skippedSegments=ri;for(let Di=ri;Di--;)$.unshift(null);Se+=ri}const Fo=sr.enumeratedString("RECENTLY-REMOVED-DATERANGES");Fo&&(F.recentlyRemovedDateranges=Fo.split("\t"));break}case"TARGETDURATION":F.targetduration=Math.max(parseInt(Sn),1);break;case"VERSION":F.version=parseInt(Sn);break;case"EXTM3U":break;case"ENDLIST":F.live=!1;break;case"#":(Sn||gr)&&gt.tagList.push(gr?[Sn,gr]:[Sn]);break;case"DISCONTINUITY":Je++,gt.tagList.push(["DIS"]);break;case"GAP":gt.gap=!0,gt.tagList.push([er]);break;case"BITRATE":gt.tagList.push([er,Sn]);break;case"DATERANGE":{const sr=new fr(Sn);zi(F,sr,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),zi(F,sr,sr.clientAttrs);const ri=new so(sr,F.dateRanges[sr.ID]);ri.isValid||F.skippedSegments?F.dateRanges[ri.id]=ri:Bt.warn(`Ignoring invalid DATERANGE tag: "${Sn}"`),gt.tagList.push(["EXT-X-DATERANGE",Sn]);break}case"DEFINE":{const sr=new fr(Sn);zi(F,sr,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in sr?yu(F,sr,C):bl(F,sr,t)}break;case"DISCONTINUITY-SEQUENCE":Je=parseInt(Sn);break;case"KEY":{const sr=$s(Sn,t,F);if(sr.isSupported()){if("NONE"===sr.method){rn=void 0;break}rn||(rn={}),rn[sr.keyFormat]&&(rn=Wr({},rn)),rn[sr.keyFormat]=sr}else Bt.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${Sn}"`);break}case"START":F.startTimeOffset=Za(Sn);break;case"MAP":{const sr=new fr(Sn);if(zi(F,sr,["BYTERANGE","URI"]),gt.duration){const ri=new Ao(u,t);vs(ri,sr,o,rn),le=ri,gt.initSegment=le,le.rawProgramDateTime&&!gt.rawProgramDateTime&&(gt.rawProgramDateTime=le.rawProgramDateTime)}else vs(gt,sr,o,rn),le=gt,Mn=!0;break}case"SERVER-CONTROL":{const sr=new fr(Sn);F.canBlockReload=sr.bool("CAN-BLOCK-RELOAD"),F.canSkipUntil=sr.optionalFloat("CAN-SKIP-UNTIL",0),F.canSkipDateRanges=F.canSkipUntil>0&&sr.bool("CAN-SKIP-DATERANGES"),F.partHoldBack=sr.optionalFloat("PART-HOLD-BACK",0),F.holdBack=sr.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{const sr=new fr(Sn);F.partTarget=sr.decimalFloatingPoint("PART-TARGET");break}case"PART":{let sr=F.partList;sr||(sr=F.partList=[]);const ri=Le>0?sr[sr.length-1]:void 0,Fo=Le++,Di=new fr(Sn);zi(F,Di,["BYTERANGE","URI"]);const Ci=new Bo(Di,gt,t,Fo,ri);sr.push(Ci),gt.duration+=Ci.duration;break}case"PRELOAD-HINT":{const sr=new fr(Sn);zi(F,sr,["URI"]),F.preloadHint=sr;break}case"RENDITION-REPORT":{const sr=new fr(Sn);zi(F,sr,["URI"]),F.renditionReports=F.renditionReports||[],F.renditionReports.push(sr);break}default:Bt.warn(`line parsed but not handled: ${Tt}`)}}}st&&!st.relurl?($.pop(),$e-=st.duration,F.partList&&(F.fragmentHint=st)):F.partList&&(fa(gt,st),gt.cc=Je,F.fragmentHint=gt,rn&&Sl(gt,rn,F));const pn=$.length,Kn=$[0],xn=$[pn-1];if($e+=F.skippedSegments*F.targetduration,$e>0&&pn&&xn){F.averagetargetduration=$e/pn;const Wn=xn.sn;F.endSN="initSegment"!==Wn?Wn:0,F.live||(xn.endList=!0),Kn&&(F.startCC=Kn.cc)}else F.endSN=0,F.startCC=0;return F.fragmentHint&&($e+=F.fragmentHint.duration),F.totalduration=$e,F.endCC=Je,tn>0&&function Wo(h,n){let t=h[n];for(let o=n;o--;){const u=h[o];if(!u)return;u.programDateTime=t.programDateTime-1e3*u.duration,t=u}}($,tn),F}}function $s(h,n,t){var o,u;const p=new fr(h);zi(t,p,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);const C=null!=(o=p.METHOD)?o:"",F=p.URI,$=p.hexadecimalInteger("IV"),le=p.KEYFORMATVERSIONS,Se=null!=(u=p.KEYFORMAT)?u:"identity";F&&p.IV&&!$&&Bt.error(`Invalid IV: ${p.IV}`);const Le=F?ao.resolve(F,n):"",$e=(le||"1").split("/").map(Number).filter(Number.isFinite);return new ts(C,Le,Se,$e,$)}function Za(h){const t=new fr(h).decimalFloatingPoint("TIME-OFFSET");return ir(t)?t:null}function $a(h,n){["video","audio","text"].forEach(t=>{const o=h.filter(u=>function ro(h,n){const t=rs[n];return!!t&&!0===t[h.slice(0,4)]}(u,t));if(o.length){const u=o.filter(p=>0===p.lastIndexOf("avc1",0)||0===p.lastIndexOf("mp4a",0));n[`${t}Codec`]=u.length>0?u[0]:o[0],h=h.filter(p=>-1===o.indexOf(p))}}),n.unknownCodecs=h}function Cl(h,n,t){const o=n[t];o&&(h[t]=o)}function fa(h,n){h.rawProgramDateTime?h.programDateTime=Date.parse(h.rawProgramDateTime):null!=n&&n.programDateTime&&(h.programDateTime=n.endProgramDateTime),ir(h.programDateTime)||(h.programDateTime=null,h.rawProgramDateTime=null)}function vs(h,n,t,o){h.relurl=n.URI,n.BYTERANGE&&h.setByteRange(n.BYTERANGE),h.level=t,h.sn="initSegment",o&&(h.levelkeys=o),h.initSegment=null}function Sl(h,n,t){h.levelkeys=n;const{encryptedFragments:o}=t;(!o.length||o[o.length-1].levelkeys!==n)&&Object.keys(n).some(u=>n[u].isCommonEncryption)&&o.push(h)}function Dl(h){const{type:n}=h;switch(n){case"audioTrack":return"audio";case"subtitleTrack":return"subtitle";default:return"main"}}function Ml(h,n){let t=h.url;return(void 0===t||0===t.indexOf("data:"))&&(t=n.url),t}class md{constructor(n){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=n,this.registerListeners()}startLoad(n){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:n}=this;n.on(it.MANIFEST_LOADING,this.onManifestLoading,this),n.on(it.LEVEL_LOADING,this.onLevelLoading,this),n.on(it.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),n.on(it.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}unregisterListeners(){const{hls:n}=this;n.off(it.MANIFEST_LOADING,this.onManifestLoading,this),n.off(it.LEVEL_LOADING,this.onLevelLoading,this),n.off(it.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),n.off(it.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}createInternalLoader(n){const t=this.hls.config,C=new(t.pLoader||t.loader)(t);return this.loaders[n.type]=C,C}getInternalLoader(n){return this.loaders[n.type]}resetInternalLoader(n){this.loaders[n]&&delete this.loaders[n]}destroyInternalLoaders(){for(const n in this.loaders){const t=this.loaders[n];t&&t.destroy(),this.resetInternalLoader(n)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(n,t){const{url:o}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:"manifest",url:o,deliveryDirectives:null})}onLevelLoading(n,t){const{id:o,level:u,url:p,deliveryDirectives:C}=t;this.load({id:o,level:u,responseType:"text",type:"level",url:p,deliveryDirectives:C})}onAudioTrackLoading(n,t){const{id:o,groupId:u,url:p,deliveryDirectives:C}=t;this.load({id:o,groupId:u,level:null,responseType:"text",type:"audioTrack",url:p,deliveryDirectives:C})}onSubtitleTrackLoading(n,t){const{id:o,groupId:u,url:p,deliveryDirectives:C}=t;this.load({id:o,groupId:u,level:null,responseType:"text",type:"subtitleTrack",url:p,deliveryDirectives:C})}load(n){var t;const o=this.hls.config;let p,u=this.getInternalLoader(n);if(u){const le=u.context;if(le&&le.url===n.url)return void Bt.trace("[playlist-loader]: playlist request ongoing");Bt.log(`[playlist-loader]: aborting previous loader for type: ${n.type}`),u.abort()}if(p="manifest"===n.type?o.manifestLoadPolicy.default:Wr({},o.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),u=this.createInternalLoader(n),null!=(t=n.deliveryDirectives)&&t.part){let le;if("level"===n.type&&null!==n.level?le=this.hls.levels[n.level].details:"audioTrack"===n.type&&null!==n.id?le=this.hls.audioTracks[n.id].details:"subtitleTrack"===n.type&&null!==n.id&&(le=this.hls.subtitleTracks[n.id].details),le){const Se=le.partTarget,Le=le.targetduration;if(Se&&Le){const $e=1e3*Math.max(3*Se,.8*Le);p=Wr({},p,{maxTimeToFirstByteMs:Math.min($e,p.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min($e,p.maxTimeToFirstByteMs)})}}}const C=p.errorRetry||p.timeoutRetry||{};u.load(n,{loadPolicy:p,timeout:p.maxLoadTimeMs,maxRetry:C.maxNumRetry||0,retryDelay:C.retryDelayMs||0,maxRetryDelay:C.maxRetryDelayMs||0},{onSuccess:(le,Se,Le,$e)=>{const Je=this.getInternalLoader(Le);this.resetInternalLoader(Le.type);const st=le.data;0===st.indexOf("#EXTM3U")?(Se.parsing.start=performance.now(),ao.isMediaPlaylist(st)?this.handleTrackOrLevelPlaylist(le,Se,Le,$e||null,Je):this.handleMasterPlaylist(le,Se,Le,$e)):this.handleManifestParsingError(le,Le,new Error("no EXTM3U delimiter"),$e||null,Se)},onError:(le,Se,Le,$e)=>{this.handleNetworkError(Se,Le,!1,le,$e)},onTimeout:(le,Se,Le)=>{this.handleNetworkError(Se,Le,!0,void 0,le)}})}handleMasterPlaylist(n,t,o,u){const p=this.hls,C=n.data,F=Ml(n,o),$=ao.parseMasterPlaylist(C,F);if($.playlistParsingError)return void this.handleManifestParsingError(n,o,$.playlistParsingError,u,t);const{contentSteering:le,levels:Se,sessionData:Le,sessionKeys:$e,startTimeOffset:Je,variableList:st}=$;this.variableList=st;const{AUDIO:gt=[],SUBTITLES:Tt,"CLOSED-CAPTIONS":Zt}=ao.parseMasterPlaylistMedia(C,F,$);gt.length&&!gt.some(tn=>!tn.url)&&Se[0].audioCodec&&!Se[0].attrs.AUDIO&&(Bt.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),gt.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new fr({}),bitrate:0,url:""})),p.trigger(it.MANIFEST_LOADED,{levels:Se,audioTracks:gt,subtitles:Tt,captions:Zt,contentSteering:le,url:F,stats:t,networkDetails:u,sessionData:Le,sessionKeys:$e,startTimeOffset:Je,variableList:st})}handleTrackOrLevelPlaylist(n,t,o,u,p){const C=this.hls,{id:F,level:$,type:le}=o,Se=Ml(n,o),Le=ir(F)?F:0,$e=ir($)?$:Le,Je=Dl(o),st=ao.parseLevelPlaylist(n.data,Se,$e,Je,Le,this.variableList);if("manifest"===le){const gt={attrs:new fr({}),bitrate:0,details:st,name:"",url:Se};C.trigger(it.MANIFEST_LOADED,{levels:[gt],audioTracks:[],url:Se,stats:t,networkDetails:u,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),o.levelDetails=st,this.handlePlaylistLoaded(st,n,t,o,u,p)}handleManifestParsingError(n,t,o,u,p){this.hls.trigger(it.ERROR,{type:rr.NETWORK_ERROR,details:hn.MANIFEST_PARSING_ERROR,fatal:"manifest"===t.type,url:n.url,err:o,error:o,reason:o.message,response:n,context:t,networkDetails:u,stats:p})}handleNetworkError(n,t,o=!1,u,p){let C=`A network ${o?"timeout":"error"+(u?" (status "+u.code+")":"")} occurred while loading ${n.type}`;"level"===n.type?C+=`: ${n.level} id: ${n.id}`:("audioTrack"===n.type||"subtitleTrack"===n.type)&&(C+=` id: ${n.id} group-id: "${n.groupId}"`);const F=new Error(C);Bt.warn(`[playlist-loader]: ${C}`);let $=hn.UNKNOWN,le=!1;const Se=this.getInternalLoader(n);switch(n.type){case"manifest":$=o?hn.MANIFEST_LOAD_TIMEOUT:hn.MANIFEST_LOAD_ERROR,le=!0;break;case"level":$=o?hn.LEVEL_LOAD_TIMEOUT:hn.LEVEL_LOAD_ERROR,le=!1;break;case"audioTrack":$=o?hn.AUDIO_TRACK_LOAD_TIMEOUT:hn.AUDIO_TRACK_LOAD_ERROR,le=!1;break;case"subtitleTrack":$=o?hn.SUBTITLE_TRACK_LOAD_TIMEOUT:hn.SUBTITLE_LOAD_ERROR,le=!1}Se&&this.resetInternalLoader(n.type);const Le={type:rr.NETWORK_ERROR,details:$,fatal:le,url:n.url,loader:Se,context:n,error:F,networkDetails:t,stats:p};u&&(Le.response=_i({url:(null==t?void 0:t.url)||n.url,data:void 0},u)),this.hls.trigger(it.ERROR,Le)}handlePlaylistLoaded(n,t,o,u,p,C){const F=this.hls,{type:$,level:le,id:Se,groupId:Le,deliveryDirectives:$e}=u,Je=Ml(t,u),st=Dl(u),gt="number"==typeof u.level&&"main"===st?le:void 0;if(!n.fragments.length){const Zt=new Error("No Segments found in Playlist");return void F.trigger(it.ERROR,{type:rr.NETWORK_ERROR,details:hn.LEVEL_EMPTY_ERROR,fatal:!1,url:Je,error:Zt,reason:Zt.message,response:t,context:u,level:gt,parent:st,networkDetails:p,stats:o})}n.targetduration||(n.playlistParsingError=new Error("Missing Target Duration"));const Tt=n.playlistParsingError;if(Tt)F.trigger(it.ERROR,{type:rr.NETWORK_ERROR,details:hn.LEVEL_PARSING_ERROR,fatal:!1,url:Je,error:Tt,reason:Tt.message,response:t,context:u,level:gt,parent:st,networkDetails:p,stats:o});else switch(n.live&&C&&(C.getCacheAge&&(n.ageHeader=C.getCacheAge()||0),(!C.getCacheAge||isNaN(n.ageHeader))&&(n.ageHeader=0)),$){case"manifest":case"level":F.trigger(it.LEVEL_LOADED,{details:n,level:gt||0,id:Se||0,stats:o,networkDetails:p,deliveryDirectives:$e});break;case"audioTrack":F.trigger(it.AUDIO_TRACK_LOADED,{details:n,id:Se||0,groupId:Le||"",stats:o,networkDetails:p,deliveryDirectives:$e});break;case"subtitleTrack":F.trigger(it.SUBTITLE_TRACK_LOADED,{details:n,id:Se||0,groupId:Le||"",stats:o,networkDetails:p,deliveryDirectives:$e})}}}function Eu(h,n){let t;try{t=new Event("addtrack")}catch(o){t=document.createEvent("Event"),t.initEvent("addtrack",!1,!1)}t.track=h,n.dispatchEvent(t)}function Ps(h,n){const t=h.mode;if("disabled"===t&&(h.mode="hidden"),h.cues&&!h.cues.getCueById(n.id))try{if(h.addCue(n),!h.cues.getCueById(n.id))throw new Error(`addCue is failed for: ${n}`)}catch(o){Bt.debug(`[texttrack-utils]: ${o}`);const u=new self.TextTrackCue(n.startTime,n.endTime,n.text);u.id=n.id,h.addCue(u)}"disabled"===t&&(h.mode=t)}function As(h){const n=h.mode;if("disabled"===n&&(h.mode="hidden"),h.cues)for(let t=h.cues.length;t--;)h.removeCue(h.cues[t]);"disabled"===n&&(h.mode=n)}function ha(h,n,t,o){const u=h.mode;if("disabled"===u&&(h.mode="hidden"),h.cues&&h.cues.length>0){const p=function za(h,n,t){const o=[],u=function ga(h,n){if(n<h[0].startTime)return 0;const t=h.length-1;if(n>h[t].endTime)return-1;let o=0,u=t;for(;o<=u;){const p=Math.floor((u+o)/2);if(n<h[p].startTime)u=p-1;else{if(!(n>h[p].startTime&&o<t))return p;o=p+1}}return h[o].startTime-n<n-h[u].startTime?o:u}(h,n);if(u>-1)for(let p=u,C=h.length;p<C;p++){const F=h[p];if(F.startTime>=n&&F.endTime<=t)o.push(F);else if(F.startTime>t)return o}return o}(h.cues,n,t);for(let C=0;C<p.length;C++)(!o||o(p[C]))&&h.removeCue(p[C])}"disabled"===u&&(h.mode=u)}var To_emsg="https://aomedia.org/emsg/ID3";function qa(){if("undefined"!=typeof self)return self.WebKitDataCue||self.VTTCue||self.TextTrackCue}const is=(()=>{const h=qa();try{new h(0,Number.POSITIVE_INFINITY,"")}catch(n){return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();function pa(h,n){return h.getTime()/1e3-n}function Ce(h){return Uint8Array.from(h.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}class ge{constructor(n){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=n,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null}_registerListeners(){const{hls:n}=this;n.on(it.MEDIA_ATTACHED,this.onMediaAttached,this),n.on(it.MEDIA_DETACHING,this.onMediaDetaching,this),n.on(it.MANIFEST_LOADING,this.onManifestLoading,this),n.on(it.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),n.on(it.BUFFER_FLUSHING,this.onBufferFlushing,this),n.on(it.LEVEL_UPDATED,this.onLevelUpdated,this)}_unregisterListeners(){const{hls:n}=this;n.off(it.MEDIA_ATTACHED,this.onMediaAttached,this),n.off(it.MEDIA_DETACHING,this.onMediaDetaching,this),n.off(it.MANIFEST_LOADING,this.onManifestLoading,this),n.off(it.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),n.off(it.BUFFER_FLUSHING,this.onBufferFlushing,this),n.off(it.LEVEL_UPDATED,this.onLevelUpdated,this)}onMediaAttached(n,t){this.media=t.media}onMediaDetaching(){!this.id3Track||(As(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(n){const t=this.getID3Track(n.textTracks);return t.mode="hidden",t}getID3Track(n){if(this.media){for(let t=0;t<n.length;t++){const o=n[t];if("metadata"===o.kind&&"id3"===o.label)return Eu(o,this.media),o}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(n,t){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:o,enableID3MetadataCues:u}}}=this;if(!o&&!u)return;const{samples:p}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const C=qa();for(let F=0;F<p.length;F++){const $=p[F].type;if($===To_emsg&&!o||!u)continue;const le=Ti(p[F].data);if(le){const Se=p[F].pts;let Le=Se+p[F].duration;Le>is&&(Le=is),Le-Se<=0&&(Le=Se+.25);for(let Je=0;Je<le.length;Je++){const st=le[Je];if(!Ri(st)){this.updateId3CueEnds(Se,$);const gt=new C(Se,Le,"");gt.value=st,$&&(gt.type=$),this.id3Track.addCue(gt)}}}}}updateId3CueEnds(n,t){var o;const u=null==(o=this.id3Track)?void 0:o.cues;if(u)for(let p=u.length;p--;){const C=u[p];C.type===t&&C.startTime<n&&C.endTime===is&&(C.endTime=n)}}onBufferFlushing(n,{startOffset:t,endOffset:o,type:u}){const{id3Track:p,hls:C}=this;if(!C)return;const{config:{enableEmsgMetadataCues:F,enableID3MetadataCues:$}}=C;if(p&&(F||$)){let le;le="audio"===u?Se=>"org.id3"===Se.type&&$:"video"===u?Se=>Se.type===To_emsg&&F:Se=>"org.id3"===Se.type&&$||Se.type===To_emsg&&F,ha(p,t,o,le)}}onLevelUpdated(n,{details:t}){if(!this.media||!t.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{dateRangeCuesAppended:o,id3Track:u}=this,{dateRanges:p}=t,C=Object.keys(p);if(u){const Se=Object.keys(o).filter(Le=>!C.includes(Le));for(let Le=Se.length;Le--;){const $e=Se[Le];Object.keys(o[$e].cues).forEach(Je=>{u.removeCue(o[$e].cues[Je])}),delete o[$e]}}const F=t.fragments[t.fragments.length-1];if(0===C.length||!ir(null==F?void 0:F.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const $=F.programDateTime/1e3-F.start,le=qa();for(let Se=0;Se<C.length;Se++){const Le=C[Se],$e=p[Le],Je=o[Le],st=(null==Je?void 0:Je.cues)||{};let gt=(null==Je?void 0:Je.durationKnown)||!1;const Tt=pa($e.startDate,$);let Zt=is;const rn=$e.endDate;if(rn)Zt=pa(rn,$),gt=!0;else if($e.endOnNext&&!gt){const Mn=C.reduce((pn,Kn)=>{const xn=p[Kn];return xn.class===$e.class&&xn.id!==Kn&&xn.startDate>$e.startDate&&pn.push(xn),pn},[]).sort((pn,Kn)=>pn.startDate.getTime()-Kn.startDate.getTime())[0];Mn&&(Zt=pa(Mn.startDate,$),gt=!0)}const tn=Object.keys($e.attr);for(let Mn=0;Mn<tn.length;Mn++){const pn=tn[Mn];if("ID"===(h=pn)||"CLASS"===h||"START-DATE"===h||"DURATION"===h||"END-DATE"===h||"END-ON-NEXT"===h)continue;let Kn=st[pn];if(Kn)gt&&!Je.durationKnown&&(Kn.endTime=Zt);else{let xn=$e.attr[pn];Kn=new le(Tt,Zt,""),Vi(pn)&&(xn=Ce(xn)),Kn.value={key:pn,data:xn},Kn.type="com.apple.quicktime.HLS",Kn.id=Le,this.id3Track.addCue(Kn),st[pn]=Kn}}o[Le]={cues:st,dateRange:$e,durationKnown:gt}}var h}}class fe{constructor(n){this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=()=>this.timeupdate(),this.hls=n,this.config=n.config,this.registerListeners()}get latency(){return this._latency||0}get maxLatency(){const{config:n,levelDetails:t}=this;return void 0!==n.liveMaxLatencyDuration?n.liveMaxLatencyDuration:t?n.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const{levelDetails:n}=this;if(null===n)return null;const{holdBack:t,partHoldBack:o,targetduration:u}=n,{liveSyncDuration:p,liveSyncDurationCount:C,lowLatencyMode:F}=this.config,$=this.hls.userConfig;let le=F&&o||t;return($.liveSyncDuration||$.liveSyncDurationCount||0===le)&&(le=void 0!==p?p:C*u),le+Math.min(1*this.stallCount,u)}get liveSyncPosition(){const n=this.estimateLiveEdge(),t=this.targetLatency,o=this.levelDetails;if(null===n||null===t||null===o)return null;const u=o.edge,F=u-(this.config.lowLatencyMode&&o.partTarget||o.targetduration);return Math.min(Math.max(u-o.totalduration,n-t-this.edgeStalled),F)}get drift(){const{levelDetails:n}=this;return null===n?1:n.drift}get edgeStalled(){const{levelDetails:n}=this;return null===n?0:Math.max(n.age-3*(this.config.lowLatencyMode&&n.partTarget||n.targetduration),0)}get forwardBufferLength(){const{media:n,levelDetails:t}=this;if(!n||!t)return 0;const o=n.buffered.length;return(o?n.buffered.end(o-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null}registerListeners(){this.hls.on(it.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(it.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(it.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(it.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(it.ERROR,this.onError,this)}unregisterListeners(){this.hls.off(it.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(it.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(it.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(it.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(it.ERROR,this.onError,this)}onMediaAttached(n,t){this.media=t.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)}onManifestLoading(){this.levelDetails=null,this._latency=null,this.stallCount=0}onLevelUpdated(n,{details:t}){this.levelDetails=t,t.advanced&&this.timeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)}onError(n,t){var o;t.details===hn.BUFFER_STALLED_ERROR&&(this.stallCount++,null!=(o=this.levelDetails)&&o.live&&Bt.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))}timeupdate(){const{media:n,levelDetails:t}=this;if(!n||!t)return;this.currentTime=n.currentTime;const o=this.computeLatency();if(null===o)return;this._latency=o;const{lowLatencyMode:u,maxLiveSyncPlaybackRate:p}=this.config;if(!u||1===p)return;const C=this.targetLatency;if(null===C)return;const F=o-C,$=Math.min(this.maxLatency,C+t.targetduration);if(t.live&&F<$&&F>.05&&this.forwardBufferLength>1){const Se=Math.min(2,Math.max(1,p)),Le=Math.round(2/(1+Math.exp(-.75*F-this.edgeStalled))*20)/20;n.playbackRate=Math.min(Se,Math.max(1,Le))}else 1!==n.playbackRate&&0!==n.playbackRate&&(n.playbackRate=1)}estimateLiveEdge(){const{levelDetails:n}=this;return null===n?null:n.edge+n.age}computeLatency(){const n=this.estimateLiveEdge();return null===n?null:n-this.currentTime}}const Ue=["NONE","TYPE-0","TYPE-1",null];class St{constructor(n,t,o){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=n,this.part=t,this.skip=o}addDirectives(n){const t=new self.URL(n);return void 0!==this.msn&&t.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class Ft{constructor(n){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[n.url],this._attrs=[n.attrs],this.bitrate=n.bitrate,n.details&&(this.details=n.details),this.id=n.id||0,this.name=n.name,this.width=n.width||0,this.height=n.height||0,this.audioCodec=n.audioCodec,this.videoCodec=n.videoCodec,this.unknownCodecs=n.unknownCodecs,this.codecSet=[n.videoCodec,n.audioCodec].filter(t=>t).join(",").replace(/\.[^.,]+/g,"")}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get attrs(){return this._attrs[this._urlId]}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get uri(){return this.url[this._urlId]||""}get urlId(){return this._urlId}set urlId(n){const t=n%this.url.length;this._urlId!==t&&(this.fragmentError=0,this.loadError=0,this.details=void 0,this._urlId=t)}get audioGroupId(){var n;return null==(n=this.audioGroupIds)?void 0:n[this.urlId]}get textGroupId(){var n;return null==(n=this.textGroupIds)?void 0:n[this.urlId]}addFallback(n){this.url.push(n.url),this._attrs.push(n.attrs)}}function dn(h,n){const t=n.startPTS;if(ir(t)){let u,o=0;n.sn>h.sn?(o=t-h.start,u=h):(o=h.start-t,u=n),u.duration!==o&&(u.duration=o)}else n.start=n.sn>h.sn?h.cc===n.cc&&h.minEndPTS?h.start+(h.minEndPTS-h.start):h.start+h.duration:Math.max(h.start-n.duration,0)}function qn(h,n,t,o,u,p){o-t<=0&&(Bt.warn("Fragment should have a positive duration",n),o=t+n.duration,p=u+n.duration);let F=t,$=o;const le=n.startPTS,Se=n.endPTS;if(ir(le)){const Tt=Math.abs(le-t);n.deltaPTS=ir(n.deltaPTS)?Math.max(Tt,n.deltaPTS):Tt,F=Math.max(t,le),t=Math.min(t,le),u=Math.min(u,n.startDTS),$=Math.min(o,Se),o=Math.max(o,Se),p=Math.max(p,n.endDTS)}const Le=t-n.start;0!==n.start&&(n.start=t),n.duration=o-n.start,n.startPTS=t,n.maxStartPTS=F,n.startDTS=u,n.endPTS=o,n.minEndPTS=$,n.endDTS=p;const $e=n.sn;if(!h||$e<h.startSN||$e>h.endSN)return 0;let Je;const st=$e-h.startSN,gt=h.fragments;for(gt[st]=n,Je=st;Je>0;Je--)dn(gt[Je],gt[Je-1]);for(Je=st;Je<gt.length-1;Je++)dn(gt[Je],gt[Je+1]);return h.fragmentHint&&dn(gt[gt.length-1],h.fragmentHint),h.PTSKnown=h.alignedSliding=!0,Le}function bo(h,n){const t=n.startSN+n.skippedSegments-h.startSN,o=h.fragments;t<0||t>=o.length||Co(n,o[t].start)}function Co(h,n){if(n){const t=h.fragments;for(let o=h.skippedSegments;o<t.length;o++)t[o].start+=n;h.fragmentHint&&(h.fragmentHint.start+=n)}}function Yo(h,n,t){var o;return null!=h&&h.details?io(null==(o=h.details)?void 0:o.partList,n,t):null}function io(h,n,t){if(h)for(let o=h.length;o--;){const u=h[o];if(u.index===t&&u.fragment.sn===n)return u}return null}function Zo(h){switch(h.details){case hn.FRAG_LOAD_TIMEOUT:case hn.KEY_LOAD_TIMEOUT:case hn.LEVEL_LOAD_TIMEOUT:case hn.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function _s(h,n){const t=Zo(n);return h.default[(t?"timeout":"error")+"Retry"]}function Gi(h,n){const t="linear"===h.backoff?1:Math.pow(2,n);return Math.min(t*h.retryDelayMs,h.maxRetryDelayMs)}function zs(h){return _i(_i({},h),{errorRetry:null,timeoutRetry:null})}function Ja(h,n,t,o){return!!h&&n<h.maxNumRetry&&(function Pl(h){return 0===h&&!1===navigator.onLine||!!h&&(h<400||h>499)}(o)||!!t)}const qs_search=function(h,n){let t=0,o=h.length-1,u=null,p=null;for(;t<=o;){u=(t+o)/2|0,p=h[u];const C=n(p);if(C>0)t=u+1;else{if(!(C<0))return p;o=u-1}}return null};function as(h,n,t=0,o=0){let u=null;if(h?u=n[h.sn-n[0].sn+1]||null:0===t&&0===n[0].start&&(u=n[0]),u&&0===ls(t,o,u))return u;const p=qs_search(n,ls.bind(null,t,o));return!p||p===h&&u?u:p}function ls(h=0,n=0,t){if(t.start<=h&&t.start+t.duration>h)return 0;const o=Math.min(n,t.duration+(t.deltaPTS?t.deltaPTS:0));return t.start+t.duration-o<=h?1:t.start-o>h&&t.start?-1:0}function Tu(h,n,t){const o=1e3*Math.min(n,t.duration+(t.deltaPTS?t.deltaPTS:0));return(t.endProgramDateTime||0)-o>h}function uc(h,n,t){if(performance.now()-h.lastErrorPerfMs>3e5)return!0;const o=h.details;if(n.details===hn.FRAG_GAP&&o&&n.frag){const p=as(null,o.fragments,n.frag.start);if(p&&!p.gap)return!0}if(t&&h.errors.length<t.errors.length){const u=h.errors[h.errors.length-1];if(o&&u.frag&&n.frag&&Math.abs(u.frag.start-n.frag.start)>3*o.targetduration)return!0}return!1}class vd{constructor(n,t){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=Bt.log.bind(Bt,`${t}:`),this.warn=Bt.warn.bind(Bt,`${t}:`),this.hls=n}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){clearTimeout(this.timer),this.timer=-1}startLoad(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(n,t){const o=null==t?void 0:t.renditionReports;if(o){let u=-1;for(let p=0;p<o.length;p++){const C=o[p];let F;try{F=new self.URL(C.URI,t.url).href}catch($){Bt.warn(`Could not construct new URL for Rendition Report: ${$}`),F=C.URI||""}if(F===n){u=p;break}F===n.substring(0,F.length)&&(u=p)}if(-1!==u){const p=o[u],C=parseInt(p["LAST-MSN"])||(null==t?void 0:t.lastPartSn);let F=parseInt(p["LAST-PART"])||(null==t?void 0:t.lastPartIndex);if(this.hls.config.lowLatencyMode){const $=Math.min(t.age-t.partTarget,t.targetduration);F>=0&&$>t.partTarget&&(F+=1)}return new St(C,F>=0?F:void 0,"")}}}loadPlaylist(n){-1===this.requestScheduled&&(this.requestScheduled=self.performance.now())}shouldLoadPlaylist(n){return this.canLoad&&!!n&&!!n.url&&(!n.details||n.details.live)}shouldReloadPlaylist(n){return-1===this.timer&&-1===this.requestScheduled&&this.shouldLoadPlaylist(n)}playlistLoaded(n,t,o){const{details:u,stats:p}=t,C=self.performance.now(),F=p.loading.first?Math.max(0,C-p.loading.first):0;if(u.advancedDateTime=Date.now()-F,u.live||null!=o&&o.live){if(u.reloaded(o),o&&this.log(`live playlist ${n} ${u.advanced?"REFRESHED "+u.lastPartSn+"-"+u.lastPartIndex:"MISSED"}`),o&&u.fragments.length>0&&function xr(h,n){let t=null;const o=h.fragments;for(let $=o.length-1;$>=0;$--){const le=o[$].initSegment;if(le){t=le;break}}h.fragmentHint&&delete h.fragmentHint.endPTS;let p,u=0;if(function Xr(h,n,t){const o=n.skippedSegments,u=Math.max(h.startSN,n.startSN)-n.startSN,p=(h.fragmentHint?1:0)+(o?n.endSN:Math.min(h.endSN,n.endSN))-n.startSN,C=n.startSN-h.startSN,F=n.fragmentHint?n.fragments.concat(n.fragmentHint):n.fragments,$=h.fragmentHint?h.fragments.concat(h.fragmentHint):h.fragments;for(let le=u;le<=p;le++){const Se=$[C+le];let Le=F[le];o&&!Le&&le<o&&(Le=n.fragments[le]=Se),Se&&Le&&t(Se,Le)}}(h,n,($,le)=>{$.relurl&&(u=$.cc-le.cc),ir($.startPTS)&&ir($.endPTS)&&(le.start=le.startPTS=$.startPTS,le.startDTS=$.startDTS,le.maxStartPTS=$.maxStartPTS,le.endPTS=$.endPTS,le.endDTS=$.endDTS,le.minEndPTS=$.minEndPTS,le.duration=$.endPTS-$.startPTS,le.duration&&(p=le),n.PTSKnown=n.alignedSliding=!0),le.elementaryStreams=$.elementaryStreams,le.loader=$.loader,le.stats=$.stats,le.urlId=$.urlId,$.initSegment&&(le.initSegment=$.initSegment,t=$.initSegment)}),t&&(n.fragmentHint?n.fragments.concat(n.fragmentHint):n.fragments).forEach(le=>{var Se;(!le.initSegment||le.initSegment.relurl===(null==(Se=t)?void 0:Se.relurl))&&(le.initSegment=t)}),n.skippedSegments)if(n.deltaUpdateFailed=n.fragments.some($=>!$),n.deltaUpdateFailed){Bt.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let $=n.skippedSegments;$--;)n.fragments.shift();n.startSN=n.fragments[0].sn,n.startCC=n.fragments[0].cc}else n.canSkipDateRanges&&(n.dateRanges=function hr(h,n,t){const o=Wr({},h);return t&&t.forEach(u=>{delete o[u]}),Object.keys(n).forEach(u=>{const p=new so(n[u].attr,o[u]);p.isValid?o[u]=p:Bt.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${JSON.stringify(n[u].attr)}"`)}),o}(h.dateRanges,n.dateRanges,n.recentlyRemovedDateranges));const C=n.fragments;if(u){Bt.warn("discontinuity sliding from playlist, take drift into account");for(let $=0;$<C.length;$++)C[$].cc+=u}n.skippedSegments&&(n.startCC=n.fragments[0].cc),function Qr(h,n,t){if(h&&n){let o=0;for(let u=0,p=h.length;u<=p;u++){const C=h[u],F=n[u+o];C&&F&&C.index===F.index&&C.fragment.sn===F.fragment.sn?t(C,F):o--}}}(h.partList,n.partList,($,le)=>{le.elementaryStreams=$.elementaryStreams,le.stats=$.stats}),p?qn(n,p,p.startPTS,p.endPTS,p.startDTS,p.endDTS):bo(h,n),C.length&&(n.totalduration=n.edge-C[0].start),n.driftStartTime=h.driftStartTime,n.driftStart=h.driftStart;const F=n.advancedDateTime;if(n.advanced&&F){const $=n.edge;n.driftStart||(n.driftStartTime=F,n.driftStart=$),n.driftEndTime=F,n.driftEnd=$}else n.driftEndTime=h.driftEndTime,n.driftEnd=h.driftEnd,n.advancedDateTime=h.advancedDateTime}(o,u),!this.canLoad||!u.live)return;let $,le,Se;if(u.canBlockReload&&u.endSN&&u.advanced){const Tt=this.hls.config.lowLatencyMode,Zt=u.lastPartSn,rn=u.endSN,tn=u.lastPartIndex,pn=Zt===rn,Kn=Tt?0:tn;-1!==tn?(le=pn?rn+1:Zt,Se=pn?Kn:tn+1):le=rn+1;const xn=u.age;let er=Math.min(xn+u.ageHeader-u.partTarget,1.5*u.targetduration);if(er>0){if(o&&er>o.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${o.tuneInGoal} to: ${er} with playlist age: ${u.age}`),er=0;else{const Sn=Math.floor(er/u.targetduration);le+=Sn,void 0!==Se&&(Se+=Math.round(er%u.targetduration/u.partTarget)),this.log(`CDN Tune-in age: ${u.ageHeader}s last advanced ${xn.toFixed(2)}s goal: ${er} skip sn ${Sn} to part ${Se}`)}u.tuneInGoal=er}if($=this.getDeliveryDirectives(u,t.deliveryDirectives,le,Se),Tt||!pn)return void this.loadPlaylist($)}else u.canBlockReload&&($=this.getDeliveryDirectives(u,t.deliveryDirectives,le,Se));const Le=this.hls.mainForwardBufferInfo,st=function os(h,n=1/0){let t=1e3*h.targetduration;if(h.updated){const o=h.fragments,u=4;if(o.length&&t*u>n){const p=1e3*o[o.length-1].duration;p<t&&(t=p)}}else t/=2;return Math.round(t)}(u,1e3*(u.edge-(Le?Le.end-Le.len:0)));u.updated&&C>this.requestScheduled+st&&(this.requestScheduled=p.loading.start),void 0!==le&&u.canBlockReload?this.requestScheduled=p.loading.first+st-(1e3*u.partTarget||1e3):-1===this.requestScheduled||this.requestScheduled+st<C?this.requestScheduled=C:this.requestScheduled-C<=0&&(this.requestScheduled+=st);let gt=this.requestScheduled-C;gt=Math.max(0,gt),this.log(`reload live playlist ${n} in ${Math.round(gt)} ms`),this.timer=self.setTimeout(()=>this.loadPlaylist($),gt)}else this.clearTimer()}getDeliveryDirectives(n,t,o,u){let p=function ft(h,n){const{canSkipUntil:t,canSkipDateRanges:o,endSN:u}=h;return t&&(void 0!==n?n-u:0)<t?o?"v2":"YES":""}(n,o);return null!=t&&t.skip&&n.deltaUpdateFailed&&(o=t.msn,u=t.part,p=""),new St(o,u,p)}checkRetry(n){const t=n.details,o=Zo(n),u=n.errorAction,{action:p,retryCount:C=0,retryConfig:F}=u||{},$=!!u&&!!F&&(5===p||!u.resolved&&2===p);if($){var le;if(this.requestScheduled=-1,C>=F.maxNumRetry)return!1;if(o&&null!=(le=n.context)&&le.deliveryDirectives)this.warn(`Retrying playlist loading ${C+1}/${F.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const Se=Gi(F,C);this.timer=self.setTimeout(()=>this.loadPlaylist(),Se),this.warn(`Retrying playlist loading ${C+1}/${F.maxNumRetry} after "${t}" in ${Se}ms`)}n.levelRetry=!0,u.resolved=!0}return $}}let _d;class _g extends vd{constructor(n,t){super(n,"[level-controller]"),this._levels=[],this._firstLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:n}=this;n.on(it.MANIFEST_LOADING,this.onManifestLoading,this),n.on(it.MANIFEST_LOADED,this.onManifestLoaded,this),n.on(it.LEVEL_LOADED,this.onLevelLoaded,this),n.on(it.LEVELS_UPDATED,this.onLevelsUpdated,this),n.on(it.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),n.on(it.FRAG_LOADED,this.onFragLoaded,this),n.on(it.ERROR,this.onError,this)}_unregisterListeners(){const{hls:n}=this;n.off(it.MANIFEST_LOADING,this.onManifestLoading,this),n.off(it.MANIFEST_LOADED,this.onManifestLoaded,this),n.off(it.LEVEL_LOADED,this.onLevelLoaded,this),n.off(it.LEVELS_UPDATED,this.onLevelsUpdated,this),n.off(it.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),n.off(it.FRAG_LOADED,this.onFragLoaded,this),n.off(it.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}startLoad(){this._levels.forEach(t=>{t.loadError=0,t.fragmentError=0}),super.startLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[]}onManifestLoading(n,t){this.resetLevels()}onManifestLoaded(n,t){const o=[],u={};let p;t.levels.forEach(C=>{var F;const $=C.attrs;-1!==(null==(F=C.audioCodec)?void 0:F.indexOf("mp4a.40.34"))&&(_d||(_d=/chrome|firefox/i.test(navigator.userAgent)),_d&&(C.audioCodec=void 0));const{AUDIO:le,CODECS:Se,"FRAME-RATE":Le,"PATHWAY-ID":$e,RESOLUTION:Je,SUBTITLES:st}=$,Tt=`${$e||"."}-${C.bitrate}-${Je}-${Le}-${Se}`;p=u[Tt],p?p.addFallback(C):(p=new Ft(C),u[Tt]=p,o.push(p)),Il(p,"audio",le),Il(p,"text",st)}),this.filterAndSortMediaOptions(o,t)}filterAndSortMediaOptions(n,t){let o=[],u=[],p=!1,C=!1,F=!1,$=n.filter(({audioCodec:Je,videoCodec:st,width:gt,height:Tt,unknownCodecs:Zt})=>(p||(p=!(!gt||!Tt)),C||(C=!!st),F||(F=!!Je),!(null!=Zt&&Zt.length)&&(!Je||Wa(Je,"audio"))&&(!st||Wa(st,"video"))));if((p||C)&&F&&($=$.filter(({videoCodec:Je,width:st,height:gt})=>!!Je||!(!st||!gt))),0===$.length)return void Promise.resolve().then(()=>{if(this.hls){const Je=new Error("no level with compatible codecs found in manifest");this.hls.trigger(it.ERROR,{type:rr.MEDIA_ERROR,details:hn.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:Je,reason:Je.message})}});t.audioTracks&&(o=t.audioTracks.filter(Je=>!Je.audioCodec||Wa(Je.audioCodec,"audio")),bu(o)),t.subtitles&&(u=t.subtitles,bu(u));const le=$.slice(0);$.sort((Je,st)=>Je.attrs["HDCP-LEVEL"]!==st.attrs["HDCP-LEVEL"]?(Je.attrs["HDCP-LEVEL"]||"")>(st.attrs["HDCP-LEVEL"]||"")?1:-1:Je.bitrate!==st.bitrate?Je.bitrate-st.bitrate:Je.attrs["FRAME-RATE"]!==st.attrs["FRAME-RATE"]?Je.attrs.decimalFloatingPoint("FRAME-RATE")-st.attrs.decimalFloatingPoint("FRAME-RATE"):Je.attrs.SCORE!==st.attrs.SCORE?Je.attrs.decimalFloatingPoint("SCORE")-st.attrs.decimalFloatingPoint("SCORE"):p&&Je.height!==st.height?Je.height-st.height:0);let Se=le[0];if(this.steering&&($=this.steering.filterParsedLevels($),$.length!==le.length))for(let Je=0;Je<le.length;Je++)if(le[Je].pathwayId===$[0].pathwayId){Se=le[Je];break}this._levels=$;for(let Je=0;Je<$.length;Je++)if($[Je]===Se){this._firstLevel=Je,this.log(`manifest loaded, ${$.length} level(s) found, first bitrate: ${Se.bitrate}`);break}const $e={levels:$,audioTracks:o,subtitleTracks:u,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:F,video:C,altAudio:!(F&&!C)&&o.some(Je=>!!Je.url)};this.hls.trigger(it.MANIFEST_PARSED,$e),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}get levels(){return 0===this._levels.length?null:this._levels}get level(){return this.currentLevelIndex}set level(n){const t=this._levels;if(0===t.length)return;if(n<0||n>=t.length){const Se=new Error("invalid level idx"),Le=n<0;if(this.hls.trigger(it.ERROR,{type:rr.OTHER_ERROR,details:hn.LEVEL_SWITCH_ERROR,level:n,fatal:Le,error:Se,reason:Se.message}),Le)return;n=Math.min(n,t.length-1)}const o=this.currentLevelIndex,u=this.currentLevel,p=u?u.attrs["PATHWAY-ID"]:void 0,C=t[n],F=C.attrs["PATHWAY-ID"];if(this.currentLevelIndex=n,this.currentLevel=C,o===n&&C.details&&u&&p===F)return;this.log(`Switching to level ${n}${F?" with Pathway "+F:""} from level ${o}${p?" with Pathway "+p:""}`);const $=Wr({},C,{level:n,maxBitrate:C.maxBitrate,attrs:C.attrs,uri:C.uri,urlId:C.urlId});delete $._attrs,delete $._urlId,this.hls.trigger(it.LEVEL_SWITCHING,$);const le=C.details;if(!le||le.live){const Se=this.switchParams(C.uri,null==u?void 0:u.details);this.loadPlaylist(Se)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(n){this.manualLevelIndex=n,void 0===this._startLevel&&(this._startLevel=n),-1!==n&&(this.level=n)}get firstLevel(){return this._firstLevel}set firstLevel(n){this._firstLevel=n}get startLevel(){if(void 0===this._startLevel){const n=this.hls.config.startLevel;return void 0!==n?n:this._firstLevel}return this._startLevel}set startLevel(n){this._startLevel=n}onError(n,t){t.fatal||!t.context||"level"===t.context.type&&t.context.level===this.level&&this.checkRetry(t)}onFragLoaded(n,{frag:t}){if(void 0!==t&&"main"===t.type){const o=this._levels[t.level];void 0!==o&&(o.loadError=0)}}onLevelLoaded(n,t){var o;const{level:u,details:p}=t,C=this._levels[u];var F;if(!C)return this.warn(`Invalid level index ${u}`),void(null!=(F=t.deliveryDirectives)&&F.skip&&(p.deltaUpdateFailed=!0));u===this.currentLevelIndex?(0===C.fragmentError&&(C.loadError=0),this.playlistLoaded(u,t,C.details)):null!=(o=t.deliveryDirectives)&&o.skip&&(p.deltaUpdateFailed=!0)}onAudioTrackSwitched(n,t){const o=this.currentLevel;if(!o)return;const u=this.hls.audioTracks[t.id].groupId;if(o.audioGroupIds&&o.audioGroupId!==u){let p=-1;for(let C=0;C<o.audioGroupIds.length;C++)if(o.audioGroupIds[C]===u){p=C;break}-1!==p&&p!==o.urlId&&(o.urlId=p,this.canLoad&&this.startLoad())}}loadPlaylist(n){super.loadPlaylist();const t=this.currentLevelIndex,o=this.currentLevel;if(o&&this.shouldLoadPlaylist(o)){const u=o.urlId;let p=o.uri;if(n)try{p=n.addDirectives(p)}catch(F){this.warn(`Could not construct new URL with HLS Delivery Directives: ${F}`)}const C=o.attrs["PATHWAY-ID"];this.log(`Loading level index ${t}${void 0!==(null==n?void 0:n.msn)?" at sn "+n.msn+" part "+n.part:""} with${C?" Pathway "+C:""} URI ${u+1}/${o.url.length} ${p}`),this.clearTimer(),this.hls.trigger(it.LEVEL_LOADING,{url:p,level:t,id:u,deliveryDirectives:n||null})}}get nextLoadLevel(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(n){this.level=n,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=n)}removeLevel(n,t){const o=(p,C)=>C!==t,u=this._levels.filter((p,C)=>C!==n||(p.url.length>1&&void 0!==t?(p.url=p.url.filter(o),p.audioGroupIds&&(p.audioGroupIds=p.audioGroupIds.filter(o)),p.textGroupIds&&(p.textGroupIds=p.textGroupIds.filter(o)),p.urlId=0,!0):(this.steering&&this.steering.removeLevel(p),!1)));this.hls.trigger(it.LEVELS_UPDATED,{levels:u})}onLevelsUpdated(n,{levels:t}){t.forEach((o,u)=>{const{details:p}=o;null!=p&&p.fragments&&p.fragments.forEach(C=>{C.level=u})}),this._levels=t}}function Il(h,n,t){!t||("audio"===n?(h.audioGroupIds||(h.audioGroupIds=[]),h.audioGroupIds[h.url.length-1]=t):"text"===n&&(h.textGroupIds||(h.textGroupIds=[]),h.textGroupIds[h.url.length-1]=t))}function bu(h){const n={};h.forEach(t=>{const o=t.groupId||"";t.id=n[o]=n[o]||0,n[o]++})}class Qa{constructor(n){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=n,this._registerListeners()}_registerListeners(){const{hls:n}=this;n.on(it.BUFFER_APPENDED,this.onBufferAppended,this),n.on(it.FRAG_BUFFERED,this.onFragBuffered,this),n.on(it.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:n}=this;n.off(it.BUFFER_APPENDED,this.onBufferAppended,this),n.off(it.FRAG_BUFFERED,this.onFragBuffered,this),n.off(it.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(n,t){const o=this.activePartLists[t];if(o)for(let u=o.length;u--;){const p=o[u];if(!p)break;const C=p.end;if(p.start<=n&&null!==C&&n<=C)return p}return this.getBufferedFrag(n,t)}getBufferedFrag(n,t){const{fragments:o}=this,u=Object.keys(o);for(let p=u.length;p--;){const C=o[u[p]];if((null==C?void 0:C.body.type)===t&&C.buffered){const F=C.body;if(F.start<=n&&n<=F.end)return F}}return null}detectEvictedFragments(n,t,o,u){this.timeRanges&&(this.timeRanges[n]=t);const p=(null==u?void 0:u.fragment.sn)||-1;Object.keys(this.fragments).forEach(C=>{const F=this.fragments[C];if(!F||p>=F.body.sn)return;if(!F.buffered&&!F.loaded)return void(F.body.type===o&&this.removeFragment(F.body));const $=F.range[n];!$||$.time.some(le=>{const Se=!this.isTimeBuffered(le.startPTS,le.endPTS,t);return Se&&this.removeFragment(F.body),Se})})}detectPartialFragments(n){const t=this.timeRanges,{frag:o,part:u}=n;if(!t||"initSegment"===o.sn)return;const p=bi(o),C=this.fragments[p];if(!C)return;const F=!o.relurl;Object.keys(t).forEach($=>{const le=o.elementaryStreams[$];le&&(C.range[$]=this.getBufferedTimes(o,u,F||!0===le.partial,t[$]))}),C.loaded=null,Object.keys(C.range).length?(C.buffered=!0,C.body.endList&&(this.endListFragments[C.body.type]=C),Ol(C)||this.removeParts(o.sn-1,o.type)):this.removeFragment(C.body)}removeParts(n,t){const o=this.activePartLists[t];!o||(this.activePartLists[t]=o.filter(u=>u.fragment.sn>=n))}fragBuffered(n,t){const o=bi(n);let u=this.fragments[o];!u&&t&&(u=this.fragments[o]={body:n,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},n.gap&&(this.hasGaps=!0)),u&&(u.loaded=null,u.buffered=!0)}getBufferedTimes(n,t,o,u){const p={time:[],partial:o},C=n.start,F=n.end,$=n.minEndPTS||F,le=n.maxStartPTS||C;for(let Se=0;Se<u.length;Se++){const Le=u.start(Se)-this.bufferPadding,$e=u.end(Se)+this.bufferPadding;if(le>=Le&&$<=$e){p.time.push({startPTS:Math.max(C,u.start(Se)),endPTS:Math.min(F,u.end(Se))});break}if(C<$e&&F>Le)p.partial=!0,p.time.push({startPTS:Math.max(C,u.start(Se)),endPTS:Math.min(F,u.end(Se))});else if(F<=Le)break}return p}getPartialFragment(n){let o,u,p,t=null,C=0;const{bufferPadding:F,fragments:$}=this;return Object.keys($).forEach(le=>{const Se=$[le];!Se||Ol(Se)&&(u=Se.body.start-F,p=Se.body.end+F,n>=u&&n<=p&&(o=Math.min(n-u,p-n),C<=o&&(t=Se.body,C=o)))}),t}isEndListAppended(n){const t=this.endListFragments[n];return void 0!==t&&(t.buffered||Ol(t))}getState(n){const t=bi(n),o=this.fragments[t];return o?o.buffered?Ol(o)?"PARTIAL":"OK":"APPENDING":"NOT_LOADED"}isTimeBuffered(n,t,o){let u,p;for(let C=0;C<o.length;C++){if(u=o.start(C)-this.bufferPadding,p=o.end(C)+this.bufferPadding,n>=u&&t<=p)return!0;if(t<=u)return!1}return!1}onFragLoaded(n,t){const{frag:o,part:u}=t;if("initSegment"===o.sn||o.bitrateTest)return;const p=u?null:t,C=bi(o);this.fragments[C]={body:o,appendedPTS:null,loaded:p,buffered:!1,range:Object.create(null)}}onBufferAppended(n,t){const{frag:o,part:u,timeRanges:p}=t;if("initSegment"===o.sn)return;const C=o.type;if(u){let F=this.activePartLists[C];F||(this.activePartLists[C]=F=[]),F.push(u)}this.timeRanges=p,Object.keys(p).forEach(F=>{this.detectEvictedFragments(F,p[F],C,u)})}onFragBuffered(n,t){this.detectPartialFragments(t)}hasFragment(n){const t=bi(n);return!!this.fragments[t]}hasParts(n){var t;return!(null==(t=this.activePartLists[n])||!t.length)}removeFragmentsInRange(n,t,o,u,p){u&&!this.hasGaps||Object.keys(this.fragments).forEach(C=>{const F=this.fragments[C];if(!F)return;const $=F.body;$.type!==o||u&&!$.gap||$.start<t&&$.end>n&&(F.buffered||p)&&this.removeFragment($)})}removeFragment(n){const t=bi(n);n.stats.loaded=0,n.clearElementaryStreamInfo();const o=this.activePartLists[n.type];if(o){const u=n.sn;this.activePartLists[n.type]=o.filter(p=>p.fragment.sn!==u)}delete this.fragments[t],n.endList&&delete this.endListFragments[n.type]}removeAllFragments(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1}}function Ol(h){var n,t,o;return h.buffered&&(h.body.gap||(null==(n=h.range.video)?void 0:n.partial)||(null==(t=h.range.audio)?void 0:t.partial)||(null==(o=h.range.audiovideo)?void 0:o.partial))}function bi(h){return`${h.type}_${h.level}_${h.urlId}_${h.sn}`}const Cu=Math.pow(2,17);class va{constructor(n){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=n}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(n,t){const o=n.url;if(!o)return Promise.reject(new yi({type:rr.NETWORK_ERROR,details:hn.FRAG_LOAD_ERROR,fatal:!1,frag:n,error:new Error("Fragment does not have a "+(o?"part list":"url")),networkDetails:null}));this.abort();const u=this.config,p=u.fLoader,C=u.loader;return new Promise((F,$)=>{if(this.loader&&this.loader.destroy(),n.gap)return void $(Su(n));const le=this.loader=n.loader=p?new p(u):new C(u),Se=xs(n),Le=zs(u.fragLoadPolicy.default),$e={loadPolicy:Le,timeout:Le.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:"initSegment"===n.sn?1/0:Cu};n.stats=le.stats,le.load(Se,$e,{onSuccess:(Je,st,gt,Tt)=>{this.resetLoader(n,le);let Zt=Je.data;gt.resetIV&&n.decryptdata&&(n.decryptdata.iv=new Uint8Array(Zt.slice(0,16)),Zt=Zt.slice(16)),F({frag:n,part:null,payload:Zt,networkDetails:Tt})},onError:(Je,st,gt,Tt)=>{this.resetLoader(n,le),$(new yi({type:rr.NETWORK_ERROR,details:hn.FRAG_LOAD_ERROR,fatal:!1,frag:n,response:_i({url:o,data:void 0},Je),error:new Error(`HTTP Error ${Je.code} ${Je.text}`),networkDetails:gt,stats:Tt}))},onAbort:(Je,st,gt)=>{this.resetLoader(n,le),$(new yi({type:rr.NETWORK_ERROR,details:hn.INTERNAL_ABORTED,fatal:!1,frag:n,error:new Error("Aborted"),networkDetails:gt,stats:Je}))},onTimeout:(Je,st,gt)=>{this.resetLoader(n,le),$(new yi({type:rr.NETWORK_ERROR,details:hn.FRAG_LOAD_TIMEOUT,fatal:!1,frag:n,error:new Error(`Timeout after ${$e.timeout}ms`),networkDetails:gt,stats:Je}))},onProgress:(Je,st,gt,Tt)=>{t&&t({frag:n,part:null,payload:gt,networkDetails:Tt})}})})}loadPart(n,t,o){this.abort();const u=this.config,p=u.fLoader,C=u.loader;return new Promise((F,$)=>{if(this.loader&&this.loader.destroy(),n.gap||t.gap)return void $(Su(n,t));const le=this.loader=n.loader=p?new p(u):new C(u),Se=xs(n,t),Le=zs(u.fragLoadPolicy.default),$e={loadPolicy:Le,timeout:Le.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:Cu};t.stats=le.stats,le.load(Se,$e,{onSuccess:(Je,st,gt,Tt)=>{this.resetLoader(n,le),this.updateStatsFromPart(n,t);const Zt={frag:n,part:t,payload:Je.data,networkDetails:Tt};o(Zt),F(Zt)},onError:(Je,st,gt,Tt)=>{this.resetLoader(n,le),$(new yi({type:rr.NETWORK_ERROR,details:hn.FRAG_LOAD_ERROR,fatal:!1,frag:n,part:t,response:_i({url:Se.url,data:void 0},Je),error:new Error(`HTTP Error ${Je.code} ${Je.text}`),networkDetails:gt,stats:Tt}))},onAbort:(Je,st,gt)=>{n.stats.aborted=t.stats.aborted,this.resetLoader(n,le),$(new yi({type:rr.NETWORK_ERROR,details:hn.INTERNAL_ABORTED,fatal:!1,frag:n,part:t,error:new Error("Aborted"),networkDetails:gt,stats:Je}))},onTimeout:(Je,st,gt)=>{this.resetLoader(n,le),$(new yi({type:rr.NETWORK_ERROR,details:hn.FRAG_LOAD_TIMEOUT,fatal:!1,frag:n,part:t,error:new Error(`Timeout after ${$e.timeout}ms`),networkDetails:gt,stats:Je}))}})})}updateStatsFromPart(n,t){const o=n.stats,u=t.stats,p=u.total;if(o.loaded+=u.loaded,p){const $=Math.round(n.duration/t.duration),le=Math.min(Math.round(o.loaded/p),$),Le=($-le)*Math.round(o.loaded/le);o.total=o.loaded+Le}else o.total=Math.max(o.loaded,o.total);const C=o.loading,F=u.loading;C.start?C.first+=F.first-F.start:(C.start=F.start,C.first=F.first),C.end=F.end}resetLoader(n,t){n.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function xs(h,n=null){const t=n||h,o={frag:h,part:n,responseType:"arraybuffer",url:t.url,headers:{},rangeStart:0,rangeEnd:0},u=t.byteRangeStartOffset,p=t.byteRangeEndOffset;if(ir(u)&&ir(p)){var C;let F=u,$=p;if("initSegment"===h.sn&&"AES-128"===(null==(C=h.decryptdata)?void 0:C.method)){const le=p-u;le%16&&($=p+(16-le%16)),0!==u&&(o.resetIV=!0,F=u-16)}o.rangeStart=F,o.rangeEnd=$}return o}function Su(h,n){const t=new Error(`GAP ${h.gap?"tag":"attribute"} found`),o={type:rr.MEDIA_ERROR,details:hn.FRAG_GAP,fatal:!1,frag:h,error:t,networkDetails:null};return n&&(o.part=n),(n||h).stats.aborted=!0,new yi(o)}class yi extends Error{constructor(n){super(n.error.message),this.data=void 0,this.data=n}}class wo{constructor(n){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=n}abort(n){for(const t in this.keyUriToKeyInfo){const o=this.keyUriToKeyInfo[t].loader;if(o){if(n&&n!==o.context.frag.type)return;o.abort()}}}detach(){for(const n in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[n];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[n]}}destroy(){this.detach();for(const n in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[n].loader;t&&t.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(n,t=hn.KEY_LOAD_ERROR,o,u,p){return new yi({type:rr.NETWORK_ERROR,details:t,fatal:!1,frag:n,response:p,error:o,networkDetails:u})}loadClear(n,t){if(this.emeController&&this.config.emeEnabled){const{sn:o,cc:u}=n;for(let p=0;p<t.length;p++){const C=t[p];if(u<=C.cc&&("initSegment"===o||"initSegment"===C.sn||o<C.sn)){this.emeController.selectKeySystemFormat(C).then(F=>{C.setKeyFormat(F)});break}}}}load(n){return!n.decryptdata&&n.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(n).then(t=>this.loadInternal(n,t)):this.loadInternal(n)}loadInternal(n,t){var o,u;t&&n.setKeyFormat(t);const p=n.decryptdata;if(!p){const le=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(n,hn.KEY_LOAD_ERROR,le))}const C=p.uri;if(!C)return Promise.reject(this.createKeyLoadError(n,hn.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${C}"`)));let F=this.keyUriToKeyInfo[C];if(null!=(o=F)&&o.decryptdata.key)return p.key=F.decryptdata.key,Promise.resolve({frag:n,keyInfo:F});var $;if(null!=(u=F)&&u.keyLoadPromise)switch(null==($=F.mediaKeySessionContext)?void 0:$.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return F.keyLoadPromise.then(le=>(p.key=le.keyInfo.decryptdata.key,{frag:n,keyInfo:F}))}switch(F=this.keyUriToKeyInfo[C]={decryptdata:p,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},p.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return"identity"===p.keyFormat?this.loadKeyHTTP(F,n):this.loadKeyEME(F,n);case"AES-128":return this.loadKeyHTTP(F,n);default:return Promise.reject(this.createKeyLoadError(n,hn.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${p.method}"`)))}}loadKeyEME(n,t){const o={frag:t,keyInfo:n};if(this.emeController&&this.config.emeEnabled){const u=this.emeController.loadKey(o);if(u)return(n.keyLoadPromise=u.then(p=>(n.mediaKeySessionContext=p,o))).catch(p=>{throw n.keyLoadPromise=null,p})}return Promise.resolve(o)}loadKeyHTTP(n,t){const o=this.config,p=new(0,o.loader)(o);return t.keyLoader=n.loader=p,n.keyLoadPromise=new Promise((C,F)=>{const $={keyInfo:n,frag:t,responseType:"arraybuffer",url:n.decryptdata.uri},le=o.keyLoadPolicy.default;p.load($,{loadPolicy:le,timeout:le.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},{onSuccess:($e,Je,st,gt)=>{const{frag:Tt,keyInfo:Zt,url:rn}=st;if(!Tt.decryptdata||Zt!==this.keyUriToKeyInfo[rn])return F(this.createKeyLoadError(Tt,hn.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),gt));Zt.decryptdata.key=Tt.decryptdata.key=new Uint8Array($e.data),Tt.keyLoader=null,Zt.loader=null,C({frag:Tt,keyInfo:Zt})},onError:($e,Je,st,gt)=>{this.resetLoader(Je),F(this.createKeyLoadError(t,hn.KEY_LOAD_ERROR,new Error(`HTTP Error ${$e.code} loading key ${$e.text}`),st,_i({url:$.url,data:void 0},$e)))},onTimeout:($e,Je,st)=>{this.resetLoader(Je),F(this.createKeyLoadError(t,hn.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),st))},onAbort:($e,Je,st)=>{this.resetLoader(Je),F(this.createKeyLoadError(t,hn.INTERNAL_ABORTED,new Error("key loading aborted"),st))}})})}resetLoader(n){const{frag:t,keyInfo:o,url:u}=n,p=o.loader;t.keyLoader===p&&(t.keyLoader=null,o.loader=null),delete this.keyUriToKeyInfo[u],p&&p.destroy()}}const xl={length:0,start:()=>0,end:()=>0};class ni{static isBuffered(n,t){try{if(n){const o=ni.getBuffered(n);for(let u=0;u<o.length;u++)if(t>=o.start(u)&&t<=o.end(u))return!0}}catch(o){}return!1}static bufferInfo(n,t,o){try{if(n){const u=ni.getBuffered(n),p=[];let C;for(C=0;C<u.length;C++)p.push({start:u.start(C),end:u.end(C)});return this.bufferedInfo(p,t,o)}}catch(u){}return{len:0,start:t,end:t,nextStart:void 0}}static bufferedInfo(n,t,o){t=Math.max(0,t),n.sort(function(le,Se){return le.start-Se.start||Se.end-le.end});let u=[];if(o)for(let le=0;le<n.length;le++){const Se=u.length;if(Se){const Le=u[Se-1].end;n[le].start-Le<o?n[le].end>Le&&(u[Se-1].end=n[le].end):u.push(n[le])}else u.push(n[le])}else u=n;let C,p=0,F=t,$=t;for(let le=0;le<u.length;le++){const Se=u[le].start,Le=u[le].end;if(t+o>=Se&&t<Le)F=Se,$=Le,p=$-t;else if(t+o<Se){C=Se;break}}return{len:p,start:F||0,end:$||0,nextStart:C}}static getBuffered(n){try{return n.buffered}catch(t){return Bt.log("failed to get media.buffered",t),xl}}}class wl{constructor(n,t,o,u=0,p=-1,C=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=n,this.sn=t,this.id=o,this.size=u,this.part=p,this.partial=C}}function dc(h,n){let t=null;for(let o=0,u=h.length;o<u;o++){const p=h[o];if(p&&p.cc===n){t=p;break}}return t}function Rl(h,n){if(h){const t=h.start+n;h.start=h.startPTS=t,h.endPTS=t+h.duration}}function So(h,n){const t=n.fragments;for(let o=0,u=t.length;o<u;o++)Rl(t[o],h);n.fragmentHint&&Rl(n.fragmentHint,h),n.alignedSliding=!0}function hc(h,n){if(!h.hasProgramDateTime||!n.hasProgramDateTime)return;const t=h.fragments,o=n.fragments;if(!t.length||!o.length)return;const p=o[Math.round(o.length/2)-1],C=dc(t,p.cc)||t[Math.round(t.length/2)-1],F=p.programDateTime,$=C.programDateTime;null!==F&&null!==$&&So(($-F)/1e3-(C.start-p.start),h)}class Zf{constructor(n,t){this.subtle=void 0,this.aesIV=void 0,this.subtle=n,this.aesIV=t}decrypt(n,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,n)}}class yd{constructor(n,t){this.subtle=void 0,this.key=void 0,this.subtle=n,this.key=t}expandKey(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}class zf{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(n){const t=new DataView(n),o=new Uint32Array(4);for(let u=0;u<4;u++)o[u]=t.getUint32(4*u);return o}initTable(){const n=this.sBox,t=this.invSBox,o=this.subMix,u=o[0],p=o[1],C=o[2],F=o[3],$=this.invSubMix,le=$[0],Se=$[1],Le=$[2],$e=$[3],Je=new Uint32Array(256);let st=0,gt=0,Tt=0;for(Tt=0;Tt<256;Tt++)Je[Tt]=Tt<128?Tt<<1:Tt<<1^283;for(Tt=0;Tt<256;Tt++){let Zt=gt^gt<<1^gt<<2^gt<<3^gt<<4;Zt=Zt>>>8^255&Zt^99,n[st]=Zt,t[Zt]=st;const rn=Je[st],tn=Je[rn],Mn=Je[tn];let pn=257*Je[Zt]^16843008*Zt;u[st]=pn<<24|pn>>>8,p[st]=pn<<16|pn>>>16,C[st]=pn<<8|pn>>>24,F[st]=pn,pn=16843009*Mn^65537*tn^257*rn^16843008*st,le[Zt]=pn<<24|pn>>>8,Se[Zt]=pn<<16|pn>>>16,Le[Zt]=pn<<8|pn>>>24,$e[Zt]=pn,st?(st=rn^Je[Je[Je[Mn^rn]]],gt^=Je[Je[gt]]):st=gt=1}}expandKey(n){const t=this.uint8ArrayToUint32Array_(n);let o=!0,u=0;for(;u<t.length&&o;)o=t[u]===this.key[u],u++;if(o)return;this.key=t;const p=this.keySize=t.length;if(4!==p&&6!==p&&8!==p)throw new Error("Invalid aes key size="+p);const C=this.ksRows=4*(p+6+1);let F,$;const le=this.keySchedule=new Uint32Array(C),Se=this.invKeySchedule=new Uint32Array(C),Le=this.sBox,$e=this.rcon,Je=this.invSubMix,st=Je[0],gt=Je[1],Tt=Je[2],Zt=Je[3];let rn,tn;for(F=0;F<C;F++)F<p?rn=le[F]=t[F]:(tn=rn,F%p==0?(tn=tn<<8|tn>>>24,tn=Le[tn>>>24]<<24|Le[tn>>>16&255]<<16|Le[tn>>>8&255]<<8|Le[255&tn],tn^=$e[F/p|0]<<24):p>6&&F%p==4&&(tn=Le[tn>>>24]<<24|Le[tn>>>16&255]<<16|Le[tn>>>8&255]<<8|Le[255&tn]),le[F]=rn=(le[F-p]^tn)>>>0);for($=0;$<C;$++)F=C-$,tn=3&$?le[F]:le[F-4],Se[$]=$<4||F<=4?tn:st[Le[tn>>>24]]^gt[Le[tn>>>16&255]]^Tt[Le[tn>>>8&255]]^Zt[Le[255&tn]],Se[$]=Se[$]>>>0}networkToHostOrderSwap(n){return n<<24|(65280&n)<<8|(16711680&n)>>8|n>>>24}decrypt(n,t,o){const u=this.keySize+6,p=this.invKeySchedule,C=this.invSBox,F=this.invSubMix,$=F[0],le=F[1],Se=F[2],Le=F[3],$e=this.uint8ArrayToUint32Array_(o);let Je=$e[0],st=$e[1],gt=$e[2],Tt=$e[3];const Zt=new Int32Array(n),rn=new Int32Array(Zt.length);let tn,Mn,pn,Kn,xn,Wn,er,Sn,gr,sr,ri,Fo,Di,Ci;const ei=this.networkToHostOrderSwap;for(;t<Zt.length;){for(gr=ei(Zt[t]),sr=ei(Zt[t+1]),ri=ei(Zt[t+2]),Fo=ei(Zt[t+3]),xn=gr^p[0],Wn=Fo^p[1],er=ri^p[2],Sn=sr^p[3],Di=4,Ci=1;Ci<u;Ci++)tn=$[xn>>>24]^le[Wn>>16&255]^Se[er>>8&255]^Le[255&Sn]^p[Di],Mn=$[Wn>>>24]^le[er>>16&255]^Se[Sn>>8&255]^Le[255&xn]^p[Di+1],pn=$[er>>>24]^le[Sn>>16&255]^Se[xn>>8&255]^Le[255&Wn]^p[Di+2],Kn=$[Sn>>>24]^le[xn>>16&255]^Se[Wn>>8&255]^Le[255&er]^p[Di+3],xn=tn,Wn=Mn,er=pn,Sn=Kn,Di+=4;tn=C[xn>>>24]<<24^C[Wn>>16&255]<<16^C[er>>8&255]<<8^C[255&Sn]^p[Di],Mn=C[Wn>>>24]<<24^C[er>>16&255]<<16^C[Sn>>8&255]<<8^C[255&xn]^p[Di+1],pn=C[er>>>24]<<24^C[Sn>>16&255]<<16^C[xn>>8&255]<<8^C[255&Wn]^p[Di+2],Kn=C[Sn>>>24]<<24^C[xn>>16&255]<<16^C[Wn>>8&255]<<8^C[255&er]^p[Di+3],rn[t]=ei(tn^Je),rn[t+1]=ei(Kn^st),rn[t+2]=ei(pn^gt),rn[t+3]=ei(Mn^Tt),Je=gr,st=sr,gt=ri,Tt=Fo,t+=4}return rn.buffer}}class Du{constructor(n,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=n.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const o=self.crypto;o&&(this.subtle=o.subtle||o.webkitSubtle)}catch(o){}null===this.subtle&&(this.useSoftware=!0)}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:n,remainderData:t}=this;if(!n||t)return this.reset(),null;const o=new Uint8Array(n);return this.reset(),this.removePKCS7Padding?function $f(h){const n=h.byteLength,t=n&&new DataView(h.buffer).getUint8(n-1);return t?Dr(h,0,n-t):h}(o):o}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(n,t,o){return this.useSoftware?new Promise((u,p)=>{this.softwareDecrypt(new Uint8Array(n),t,o);const C=this.flush();C?u(C.buffer):p(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(n),t,o)}softwareDecrypt(n,t,o){const{currentIV:u,currentResult:p,remainderData:C}=this;this.logOnce("JS AES decrypt"),C&&(n=Hi(C,n),this.remainderData=null);const F=this.getValidChunk(n);if(!F.length)return null;u&&(o=u);let $=this.softwareDecrypter;$||($=this.softwareDecrypter=new zf),$.expandKey(t);const le=p;return this.currentResult=$.decrypt(F.buffer,0,o),this.currentIV=Dr(F,-16).buffer,le||null}webCryptoDecrypt(n,t,o){const u=this.subtle;return(this.key!==t||!this.fastAesKey)&&(this.key=t,this.fastAesKey=new yd(u,t)),this.fastAesKey.expandKey().then(p=>u?(this.logOnce("WebCrypto AES decrypt"),new Zf(u,new Uint8Array(o)).decrypt(n.buffer,p)):Promise.reject(new Error("web crypto not initialized"))).catch(p=>(Bt.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${p.name}: ${p.message}`),this.onWebCryptoError(n,t,o)))}onWebCryptoError(n,t,o){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(n,t,o);const u=this.flush();if(u)return u.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")}getValidChunk(n){let t=n;const o=n.length-n.length%16;return o!==n.length&&(t=Dr(n,0,o),this.remainderData=Dr(n,o)),t}logOnce(n){!this.logEnabled||(Bt.log(`[decrypter]: ${n}`),this.logEnabled=!1)}}class Ed extends class cc{constructor(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(n){return!this._tickInterval&&(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,n),!0)}clearInterval(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)}clearNextTick(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)}tick(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}{constructor(n,t,o,u,p){super(),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state="STOPPED",this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.loadedmetadata=!1,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.onvseeking=null,this.onvended=null,this.logPrefix="",this.log=void 0,this.warn=void 0,this.playlistType=p,this.logPrefix=u,this.log=Bt.log.bind(Bt,`${u}:`),this.warn=Bt.warn.bind(Bt,`${u}:`),this.hls=n,this.fragmentLoader=new va(n.config),this.keyLoader=o,this.fragmentTracker=t,this.config=n.config,this.decrypter=new Du(n.config),n.on(it.MANIFEST_LOADED,this.onManifestLoaded,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(n){}stopLoad(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const n=this.fragCurrent;null!=n&&n.loader&&(n.abortRequests(),this.fragmentTracker.removeFragment(n)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state="STOPPED"}_streamEnded(n,t){if(t.live||n.nextStart||!n.end||!this.media)return!1;const o=t.partList;if(null!=o&&o.length){const p=o[o.length-1];return ni.isBuffered(this.media,p.start+p.duration/2)}return this.fragmentTracker.isEndListAppended(t.fragments[t.fragments.length-1].type)}getLevelDetails(){var n;if(this.levels&&null!==this.levelLastLoaded)return null==(n=this.levels[this.levelLastLoaded])?void 0:n.details}onMediaAttached(n,t){const o=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),o.addEventListener("seeking",this.onvseeking),o.addEventListener("ended",this.onvended);const u=this.config;this.levels&&u.autoStartLoad&&"STOPPED"===this.state&&this.startLoad(u.startPosition)}onMediaDetaching(){const n=this.media;null!=n&&n.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),n&&this.onvseeking&&this.onvended&&(n.removeEventListener("seeking",this.onvseeking),n.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}onMediaSeeking(){const{config:n,fragCurrent:t,media:o,mediaBuffer:u,state:p}=this,C=o?o.currentTime:0,F=ni.bufferInfo(u||o,C,n.maxBufferHole);if(this.log(`media seeking to ${ir(C)?C.toFixed(3):C}, state: ${p}`),"ENDED"===this.state)this.resetLoadingState();else if(t){const $=n.maxFragLookUpTolerance,le=t.start-$,Se=t.start+t.duration+$;if(!F.len||Se<F.start||le>F.end){const Le=C>Se;(C<le||Le)&&(Le&&t.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),t.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}o&&(this.fragmentTracker.removeFragmentsInRange(C,1/0,this.playlistType,!0),this.lastCurrentTime=C),!this.loadedmetadata&&!F.len&&(this.nextLoadPosition=this.startPosition=C),this.tickImmediate()}onMediaEnded(){this.startPosition=this.lastCurrentTime=0}onManifestLoaded(n,t){this.startTimeOffset=t.startTimeOffset,this.initPTS=[]}onHandlerDestroying(){this.stopLoad(),super.onHandlerDestroying()}onHandlerDestroyed(){this.state="STOPPED",this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(n,t,o){this._loadFragForPlayback(n,t,o)}_loadFragForPlayback(n,t,o){this._doFragLoad(n,t,o,p=>{if(this.fragContextChanged(n))return this.warn(`Fragment ${n.sn}${p.part?" p: "+p.part.index:""} of level ${n.level} was dropped during download.`),void this.fragmentTracker.removeFragment(n);n.stats.chunkCount++,this._handleFragmentLoadProgress(p)}).then(p=>{if(!p)return;const C=this.state;this.fragContextChanged(n)?("FRAG_LOADING"===C||!this.fragCurrent&&"PARSING"===C)&&(this.fragmentTracker.removeFragment(n),this.state="IDLE"):("payload"in p&&(this.log(`Loaded fragment ${n.sn} of level ${n.level}`),this.hls.trigger(it.FRAG_LOADED,p)),this._handleFragmentLoadComplete(p))}).catch(p=>{"STOPPED"===this.state||"ERROR"===this.state||(this.warn(p),this.resetFragmentLoading(n))})}clearTrackerIfNeeded(n){var t;const{fragmentTracker:o}=this;if("APPENDING"===o.getState(n)){const C=this.getFwdBufferInfo(this.mediaBuffer,n.type),F=Math.max(n.duration,C?C.len:this.config.maxBufferLength);this.reduceMaxBufferLength(F)&&o.removeFragment(n)}else 0===(null==(t=this.mediaBuffer)?void 0:t.buffered.length)?o.removeAllFragments():o.hasParts(n.type)&&(o.detectPartialFragments({frag:n,part:null,stats:n.stats,id:n.type}),"PARTIAL"===o.getState(n)&&o.removeFragment(n))}flushMainBuffer(n,t,o=null){n-t&&this.hls.trigger(it.BUFFER_FLUSHING,{startOffset:n,endOffset:t,type:o})}_loadInitSegment(n,t){this._doFragLoad(n,t).then(o=>{if(!o||this.fragContextChanged(n)||!this.levels)throw new Error("init load aborted");return o}).then(o=>{const{hls:u}=this,{payload:p}=o,C=n.decryptdata;if(p&&p.byteLength>0&&C&&C.key&&C.iv&&"AES-128"===C.method){const F=self.performance.now();return this.decrypter.decrypt(new Uint8Array(p),C.key.buffer,C.iv.buffer).catch($=>{throw u.trigger(it.ERROR,{type:rr.MEDIA_ERROR,details:hn.FRAG_DECRYPT_ERROR,fatal:!1,error:$,reason:$.message,frag:n}),$}).then($=>{const le=self.performance.now();return u.trigger(it.FRAG_DECRYPTED,{frag:n,payload:$,stats:{tstart:F,tdecrypt:le}}),o.payload=$,o})}return o}).then(o=>{const{fragCurrent:u,hls:p,levels:C}=this;if(!C)throw new Error("init load aborted, missing levels");const F=n.stats;this.state="IDLE",t.fragmentError=0,n.data=new Uint8Array(o.payload),F.parsing.start=F.buffering.start=self.performance.now(),F.parsing.end=F.buffering.end=self.performance.now(),o.frag===u&&p.trigger(it.FRAG_BUFFERED,{stats:F,frag:u,part:null,id:n.type}),this.tick()}).catch(o=>{"STOPPED"===this.state||"ERROR"===this.state||(this.warn(o),this.resetFragmentLoading(n))})}fragContextChanged(n){const{fragCurrent:t}=this;return!n||!t||n.level!==t.level||n.sn!==t.sn||n.urlId!==t.urlId}fragBufferedComplete(n,t){var o,u,p,C;const F=this.mediaBuffer?this.mediaBuffer:this.media;this.log(`Buffered ${n.type} sn: ${n.sn}${t?" part: "+t.index:""} of ${"main"===this.playlistType?"level":"track"} ${n.level} (frag:[${(null!=(o=n.startPTS)?o:NaN).toFixed(3)}-${(null!=(u=n.endPTS)?u:NaN).toFixed(3)}] > buffer:${F?function(h){let n="";const t=h.length;for(let o=0;o<t;o++)n+=`[${h.start(o).toFixed(3)}-${h.end(o).toFixed(3)}]`;return n}(ni.getBuffered(F)):"(detached)"})`),this.state="IDLE",F&&(!this.loadedmetadata&&"main"==n.type&&F.buffered.length&&(null==(p=this.fragCurrent)?void 0:p.sn)===(null==(C=this.fragPrevious)?void 0:C.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())}seekToStartPos(){}_handleFragmentLoadComplete(n){const{transmuxer:t}=this;if(!t)return;const{frag:o,part:u,partsLoaded:p}=n,C=!p||0===p.length||p.some($=>!$),F=new wl(o.level,o.sn,o.stats.chunkCount+1,0,u?u.index:-1,!C);t.flush(F)}_handleFragmentLoadProgress(n){}_doFragLoad(n,t,o=null,u){var p;const C=null==t?void 0:t.details;if(!this.levels||!C)throw new Error(`frag load aborted, missing level${C?"":" detail"}s`);let F=null;if(!n.encrypted||null!=(p=n.decryptdata)&&p.key?!n.encrypted&&C.encryptedFragments.length&&this.keyLoader.loadClear(n,C.encryptedFragments):(this.log(`Loading key for ${n.sn} of [${C.startSN}-${C.endSN}], ${"[stream-controller]"===this.logPrefix?"level":"track"} ${n.level}`),this.state="KEY_LOADING",this.fragCurrent=n,F=this.keyLoader.load(n).then(Se=>{if(!this.fragContextChanged(Se.frag))return this.hls.trigger(it.KEY_LOADED,Se),"KEY_LOADING"===this.state&&(this.state="IDLE"),Se}),this.hls.trigger(it.KEY_LOADING,{frag:n}),null===this.fragCurrent&&(F=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))),o=Math.max(n.start,o||0),this.config.lowLatencyMode&&"initSegment"!==n.sn){const Se=C.partList;if(Se&&u){o>n.end&&C.fragmentHint&&(n=C.fragmentHint);const Le=this.getNextPart(Se,n,o);if(Le>-1){const $e=Se[Le];let Je;return this.log(`Loading part sn: ${n.sn} p: ${$e.index} cc: ${n.cc} of playlist [${C.startSN}-${C.endSN}] parts [0-${Le}-${Se.length-1}] ${"[stream-controller]"===this.logPrefix?"level":"track"}: ${n.level}, target: ${parseFloat(o.toFixed(3))}`),this.nextLoadPosition=$e.start+$e.duration,this.state="FRAG_LOADING",Je=F?F.then(st=>!st||this.fragContextChanged(st.frag)?null:this.doFragPartsLoad(n,$e,t,u)).catch(st=>this.handleFragLoadError(st)):this.doFragPartsLoad(n,$e,t,u).catch(st=>this.handleFragLoadError(st)),this.hls.trigger(it.FRAG_LOADING,{frag:n,part:$e,targetBufferTime:o}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):Je}if(!n.url||this.loadedEndOfParts(Se,o))return Promise.resolve(null)}}this.log(`Loading fragment ${n.sn} cc: ${n.cc} ${C?"of ["+C.startSN+"-"+C.endSN+"] ":""}${"[stream-controller]"===this.logPrefix?"level":"track"}: ${n.level}, target: ${parseFloat(o.toFixed(3))}`),ir(n.sn)&&!this.bitrateTest&&(this.nextLoadPosition=n.start+n.duration),this.state="FRAG_LOADING";const $=this.config.progressive;let le;return le=$&&F?F.then(Se=>!Se||this.fragContextChanged(null==Se?void 0:Se.frag)?null:this.fragmentLoader.load(n,u)).catch(Se=>this.handleFragLoadError(Se)):Promise.all([this.fragmentLoader.load(n,$?u:void 0),F]).then(([Se])=>(!$&&Se&&u&&u(Se),Se)).catch(Se=>this.handleFragLoadError(Se)),this.hls.trigger(it.FRAG_LOADING,{frag:n,targetBufferTime:o}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):le}doFragPartsLoad(n,t,o,u){return new Promise((p,C)=>{var F;const $=[],le=null==(F=o.details)?void 0:F.partList,Se=Le=>{this.fragmentLoader.loadPart(n,Le,u).then($e=>{$[Le.index]=$e;const Je=$e.part;this.hls.trigger(it.FRAG_LOADED,$e);const st=Yo(o,n.sn,Le.index+1)||io(le,n.sn,Le.index+1);if(!st)return p({frag:n,part:Je,partsLoaded:$});Se(st)}).catch(C)};Se(t)})}handleFragLoadError(n){if("data"in n){const t=n.data;n.data&&t.details===hn.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(it.ERROR,t)}else this.hls.trigger(it.ERROR,{type:rr.OTHER_ERROR,details:hn.INTERNAL_EXCEPTION,err:n,error:n,fatal:!0});return null}_handleTransmuxerFlush(n){const t=this.getCurrentContext(n);if(!t||"PARSING"!==this.state)return void(!this.fragCurrent&&"STOPPED"!==this.state&&"ERROR"!==this.state&&(this.state="IDLE"));const{frag:o,part:u,level:p}=t,C=self.performance.now();o.stats.parsing.end=C,u&&(u.stats.parsing.end=C),this.updateLevelTiming(o,u,p,n.partial)}getCurrentContext(n){const{levels:t,fragCurrent:o}=this,{level:u,sn:p,part:C}=n;if(null==t||!t[u])return this.warn(`Levels object was unset while buffering fragment ${p} of level ${u}. The current chunk will not be buffered.`),null;const F=t[u],$=C>-1?Yo(F,p,C):null,le=$?$.fragment:function ss(h,n,t){if(null==h||!h.details)return null;const o=h.details;let u=o.fragments[n-o.startSN];return u||(u=o.fragmentHint,u&&u.sn===n)?u:n<o.startSN&&t&&t.sn===n?t:null}(F,p,o);return le?(o&&o!==le&&(le.stats=o.stats),{frag:le,part:$,level:F}):null}bufferFragmentData(n,t,o,u){var p;if(!n||"PARSING"!==this.state)return;const{data1:C,data2:F}=n;let $=C;C&&F&&($=Hi(C,F)),null!=(p=$)&&p.length&&(this.hls.trigger(it.BUFFER_APPENDING,{type:n.type,frag:t,part:o,chunkMeta:u,parent:t.type,data:$}),n.dropped&&n.independent&&!o&&this.flushBufferGap(t))}flushBufferGap(n){const t=this.media;if(!t)return;if(!ni.isBuffered(t,t.currentTime))return void this.flushMainBuffer(0,n.start);const o=t.currentTime,u=ni.bufferInfo(t,o,0),C=Math.min(2*this.config.maxFragLookUpTolerance,.25*n.duration),F=Math.max(Math.min(n.start-C,u.end-C),o+C);n.start-F>C&&this.flushMainBuffer(F,n.start)}getFwdBufferInfo(n,t){const o=this.getLoadPosition();return ir(o)?this.getFwdBufferInfoAtPos(n,o,t):null}getFwdBufferInfoAtPos(n,t,o){const{config:{maxBufferHole:u}}=this,p=ni.bufferInfo(n,t,u);if(0===p.len&&void 0!==p.nextStart){const C=this.fragmentTracker.getBufferedFrag(t,o);if(C&&p.nextStart<C.end)return ni.bufferInfo(n,t,Math.max(p.nextStart,u))}return p}getMaxBufferLength(n){const{config:t}=this;let o;return o=n?Math.max(8*t.maxBufferSize/n,t.maxBufferLength):t.maxBufferLength,Math.min(o,t.maxMaxBufferLength)}reduceMaxBufferLength(n){const t=this.config;return t.maxMaxBufferLength>=(n||t.maxBufferLength)&&(t.maxMaxBufferLength/=2,this.warn(`Reduce max buffer length to ${t.maxMaxBufferLength}s`),!0)}getAppendedFrag(n,t="main"){const o=this.fragmentTracker.getAppendedFrag(n,"main");return o&&"fragment"in o?o.fragment:o}getNextFragment(n,t){const o=t.fragments,u=o.length;if(!u)return null;const{config:p}=this,C=o[0].start;let F;if(t.live){const $=p.initialLiveManifestSize;if(u<$)return this.warn(`Not enough fragments to start playback (have: ${u}, need: ${$})`),null;!t.PTSKnown&&!this.startFragRequested&&-1===this.startPosition&&(F=this.getInitialLiveFragment(t,o),this.startPosition=F?this.hls.liveSyncPosition||F.start:n)}else n<=C&&(F=o[0]);return F||(F=this.getFragmentAtPosition(n,p.lowLatencyMode?t.partEnd:t.fragmentEnd,t)),this.mapToInitFragWhenRequired(F)}isLoopLoading(n,t){const o=this.fragmentTracker.getState(n);return("OK"===o||"PARTIAL"===o&&!!n.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(n,t,o,u,p){const C=n.gap,F=this.getNextFragment(this.nextLoadPosition,t);if(null===F)return F;if(n=F,C&&n&&!n.gap&&o.nextStart){const $=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,o.nextStart,u);if(null!==$&&o.len+$.len>=p)return this.log(`buffer full after gaps in "${u}" playlist starting at sn: ${n.sn}`),null}return n}mapToInitFragWhenRequired(n){return null==n||!n.initSegment||null!=n&&n.initSegment.data||this.bitrateTest?n:n.initSegment}getNextPart(n,t,o){let u=-1,p=!1,C=!0;for(let F=0,$=n.length;F<$;F++){const le=n[F];if(C=C&&!le.independent,u>-1&&o<le.start)break;const Se=le.loaded;Se?u=-1:(p||le.independent||C)&&le.fragment===t&&(u=F),p=Se}return u}loadedEndOfParts(n,t){const o=n[n.length-1];return o&&t>o.start&&o.loaded}getInitialLiveFragment(n,t){const o=this.fragPrevious;let u=null;if(o){if(n.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${o.programDateTime}`),u=function ma(h,n,t){if(null===n||!Array.isArray(h)||!h.length||!ir(n))return null;if(n<(h[0].programDateTime||0))return null;if(n>=(h[h.length-1].endProgramDateTime||0))return null;t=t||0;for(let p=0;p<h.length;++p){const C=h[p];if(Tu(n,t,C))return C}return null}(t,o.endProgramDateTime,this.config.maxFragLookUpTolerance)),!u){const p=o.sn+1;if(p>=n.startSN&&p<=n.endSN){const C=t[p-n.startSN];o.cc===C.cc&&(u=C,this.log(`Live playlist, switching playlist, load frag with next SN: ${u.sn}`))}u||(u=function Al(h,n){return qs_search(h,t=>t.cc<n?1:t.cc>n?-1:0)}(t,o.cc),u&&this.log(`Live playlist, switching playlist, load frag with same CC: ${u.sn}`))}}else{const p=this.hls.liveSyncPosition;null!==p&&(u=this.getFragmentAtPosition(p,this.bitrateTest?n.fragmentEnd:n.edge,n))}return u}getFragmentAtPosition(n,t,o){const{config:u}=this;let{fragPrevious:p}=this,{fragments:C,endSN:F}=o;const{fragmentHint:$}=o,le=u.maxFragLookUpTolerance,Se=o.partList,Le=!!(u.lowLatencyMode&&null!=Se&&Se.length&&$);let $e;if(Le&&$&&!this.bitrateTest&&(C=C.concat($),F=$.sn),$e=n<t?as(p,C,n,n>t-le?0:le):C[C.length-1],$e){const Je=$e.sn-o.startSN,st=this.fragmentTracker.getState($e);if(("OK"===st||"PARTIAL"===st&&$e.gap)&&(p=$e),p&&$e.sn===p.sn&&(!Le||Se[0].fragment.sn>$e.sn)&&p&&$e.level===p.level){const Tt=C[Je+1];$e=$e.sn<F&&"OK"!==this.fragmentTracker.getState(Tt)?Tt:null}}return $e}synchronizeToLiveEdge(n){const{config:t,media:o}=this;if(!o)return;const u=this.hls.liveSyncPosition,p=o.currentTime,F=n.edge,$=p>=n.fragments[0].start-t.maxFragLookUpTolerance&&p<=F;if(null!==u&&o.duration>u&&(p<u||!$)){const le=void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*n.targetduration;(!$&&o.readyState<4||p<F-le)&&(this.loadedmetadata||(this.nextLoadPosition=u),o.readyState&&(this.warn(`Playback: ${p.toFixed(3)} is located too far from the end of live sliding playlist: ${F}, reset currentTime to : ${u.toFixed(3)}`),o.currentTime=u))}}alignPlaylists(n,t){const{levels:o,levelLastLoaded:u,fragPrevious:p}=this,C=null!==u?o[u]:null,F=n.fragments.length;if(!F)return this.warn("No fragments in live playlist"),0;const $=n.fragments[0].start,le=!t,Se=n.alignedSliding&&ir($);if(le||!Se&&!$){!function fc(h,n,t){!n||(function Js(h,n,t){if(function _a(h,n,t){return!(!n.details||!(t.endCC>t.startCC||h&&h.cc<t.startCC))}(h,t,n)){const o=function yg(h,n,t=0){const o=h.fragments,u=n.fragments;if(!u.length||!o.length)return void Bt.log("No fragments to align");const p=dc(o,u[0].cc);if(p&&(!p||p.startPTS))return p;Bt.log("No frag in previous level to align on")}(t.details,n);o&&ir(o.start)&&(Bt.log(`Adjusting PTS using last level due to CC increase within current level ${n.url}`),So(o.start,n))}}(h,t,n),!t.alignedSliding&&n.details&&function ys(h,n){if(!n.fragments.length||!h.hasProgramDateTime||!n.hasProgramDateTime)return;const t=n.fragments[0].programDateTime,o=h.fragments[0].programDateTime,u=(o-t)/1e3+n.fragments[0].start;u&&ir(u)&&(Bt.log(`Adjusting PTS using programDateTime delta ${o-t}ms, sliding:${u.toFixed(3)} ${h.url} `),So(u,h))}(t,n.details),!t.alignedSliding&&n.details&&!t.skippedSegments&&bo(n.details,t))}(p,C,n);const Le=n.fragments[0].start;return this.log(`Live playlist sliding: ${Le.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${n.startSN} prev-sn: ${p?p.sn:"na"} fragments: ${F}`),Le}return $}waitForCdnTuneIn(n){return n.live&&n.canBlockReload&&n.partTarget&&n.tuneInGoal>Math.max(n.partHoldBack,3*n.partTarget)}setStartPosition(n,t){let o=this.startPosition;if(o<t&&(o=-1),-1===o||-1===this.lastCurrentTime){const u=null!==this.startTimeOffset,p=u?this.startTimeOffset:n.startTimeOffset;null!==p&&ir(p)?(o=t+p,p<0&&(o+=n.totalduration),o=Math.min(Math.max(t,o),t+n.totalduration),this.log(`Start time offset ${p} found in ${u?"multivariant":"media"} playlist, adjust startPosition to ${o}`),this.startPosition=o):n.live?o=this.hls.liveSyncPosition||t:this.startPosition=o=0,this.lastCurrentTime=o}this.nextLoadPosition=o}getLoadPosition(){const{media:n}=this;let t=0;return this.loadedmetadata&&n?t=n.currentTime:this.nextLoadPosition&&(t=this.nextLoadPosition),t}handleFragLoadAborted(n,t){this.transmuxer&&"initSegment"!==n.sn&&n.stats.aborted&&(this.warn(`Fragment ${n.sn}${t?" part "+t.index:""} of level ${n.level} was aborted`),this.resetFragmentLoading(n))}resetFragmentLoading(n){(!this.fragCurrent||!this.fragContextChanged(n)&&"FRAG_LOADING_WAITING_RETRY"!==this.state)&&(this.state="IDLE")}onFragmentOrKeyLoadError(n,t){if(t.chunkMeta&&!t.frag){const Le=this.getCurrentContext(t.chunkMeta);Le&&(t.frag=Le.frag)}const o=t.frag;if(!o||o.type!==n||!this.levels)return;var u;if(this.fragContextChanged(o))return void this.warn(`Frag load error must match current frag to retry ${o.url} > ${null==(u=this.fragCurrent)?void 0:u.url}`);const p=t.details===hn.FRAG_GAP;p&&this.fragmentTracker.fragBuffered(o,!0);const C=t.errorAction,{action:F,retryCount:$=0,retryConfig:le}=C||{};if(C&&5===F&&le){var Se;this.resetStartWhenNotLoaded(null!=(Se=this.levelLastLoaded)?Se:o.level);const Le=Gi(le,$);this.warn(`Fragment ${o.sn} of ${n} ${o.level} errored with ${t.details}, retrying loading ${$+1}/${le.maxNumRetry} in ${Le}ms`),C.resolved=!0,this.retryDate=self.performance.now()+Le,this.state="FRAG_LOADING_WAITING_RETRY"}else le&&C?(this.resetFragmentErrors(n),$<le.maxNumRetry?p||(C.resolved=!0):Bt.warn(`${t.details} reached or exceeded max retry (${$})`)):this.state=2===(null==C?void 0:C.action)?"WAITING_LEVEL":"ERROR";this.tickImmediate()}reduceLengthAndFlushBuffer(n){if("PARSING"===this.state||"PARSED"===this.state){const t=n.parent,o=this.getFwdBufferInfo(this.mediaBuffer,t),u=o&&o.len>.5;u&&this.reduceMaxBufferLength(o.len);const p=!u;return p&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${t} buffer`),n.frag&&(this.fragmentTracker.removeFragment(n.frag),this.nextLoadPosition=n.frag.start),this.resetLoadingState(),p}return!1}resetFragmentErrors(n){"audio"===n&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),"STOPPED"!==this.state&&(this.state="IDLE")}afterBufferFlushed(n,t,o){if(!n)return;const u=ni.getBuffered(n);this.fragmentTracker.detectEvictedFragments(t,u,o),"ENDED"===this.state&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state="IDLE"}resetStartWhenNotLoaded(n){if(!this.loadedmetadata){this.startFragRequested=!1;const t=this.levels?this.levels[n].details:null;null!=t&&t.live?(this.startPosition=-1,this.setStartPosition(t,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(n){var t;this.warn(`The loading context changed while buffering fragment ${n.sn} of level ${n.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(null!=(t=this.levelLastLoaded)?t:n.level),this.resetLoadingState()}removeUnbufferedFrags(n=0){this.fragmentTracker.removeFragmentsInRange(n,1/0,this.playlistType,!1,!0)}updateLevelTiming(n,t,o,u){var p;const C=o.details;if(C){if(Object.keys(n.elementaryStreams).reduce(($,le)=>{const Se=n.elementaryStreams[le];if(Se){const Le=Se.endPTS-Se.startPTS;if(Le<=0)return this.warn(`Could not parse fragment ${n.sn} ${le} duration reliably (${Le})`),$||!1;const $e=u?0:qn(C,n,Se.startPTS,Se.endPTS,Se.startDTS,Se.endDTS);return this.hls.trigger(it.LEVEL_PTS_UPDATED,{details:C,level:o,drift:$e,type:le,frag:n,start:Se.startPTS,end:Se.endPTS}),!0}return $},!1))o.fragmentError=0;else if(null===(null==(p=this.transmuxer)?void 0:p.error)){const $=new Error(`Found no media in fragment ${n.sn} of level ${o.id} resetting transmuxer to fallback to playlist timing`);if(this.warn($.message),this.hls.trigger(it.ERROR,{type:rr.MEDIA_ERROR,details:hn.FRAG_PARSING_ERROR,fatal:!1,error:$,frag:n,reason:`Found no media in msn ${n.sn} of level "${o.url}"`}),!this.hls)return;this.resetTransmuxer()}this.state="PARSED",this.hls.trigger(it.FRAG_PARSED,{frag:n,part:t})}else this.warn("level.details undefined")}resetTransmuxer(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)}recoverWorkerError(n){var t,o,u;"demuxerWorker"===n.event&&(this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded(null!=(t=null!=(o=this.levelLastLoaded)?o:null==(u=this.fragCurrent)?void 0:u.level)?t:0),this.resetLoadingState())}set state(n){const t=this._state;t!==n&&(this._state=n,this.log(`${t}->${n}`))}get state(){return this._state}}function el(){return self.SourceBuffer||self.WebKitSourceBuffer}function us(h="",n=9e4){return{type:h,id:-1,pid:-1,inputTimeScale:n,sequenceNumber:-1,samples:[],dropped:0}}class pc{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(n,t,o,u){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(n){this.initPTS=n,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(n,t){return!1}appendFrame(n,t,o){}demux(n,t){this.cachedData&&(n=Hi(this.cachedData,n),this.cachedData=null);let p,o=ai(n,0),u=o?o.length:0;const C=this._audioTrack,F=this._id3Track,$=o?(h=>{const n=Ti(h);for(let t=0;t<n.length;t++){const o=n[t];if(Ri(o))return ht(o)}})(o):void 0,le=n.length;for((null===this.basePTS||0===this.frameIndex&&ir($))&&(this.basePTS=Ll($,t,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),o&&o.length>0&&F.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:o,type:"org.id3",duration:Number.POSITIVE_INFINITY});u<le;){if(this.canParse(n,u)){const Se=this.appendFrame(C,n,u);Se?(this.frameIndex++,this.lastPTS=Se.sample.pts,u+=Se.length,p=u):u=le}else Gr(n,u)?(o=ai(n,u),F.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:o,type:"org.id3",duration:Number.POSITIVE_INFINITY}),u+=o.length,p=u):u++;if(u===le&&p!==le){const Se=Dr(n,p);this.cachedData=this.cachedData?Hi(this.cachedData,Se):Se}}return{audioTrack:C,videoTrack:us(),id3Track:F,textTrack:us()}}demuxSampleAes(n,t,o){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(n){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:us(),id3Track:this._id3Track,textTrack:us()}}destroy(){}}const Ll=(h,n,t)=>ir(h)?90*h:9e4*n+(t?9e4*t.baseTime/t.timescale:0);function mc(h,n){return 255===h[n]&&240==(246&h[n+1])}function Ji(h,n){return 1&h[n+1]?7:9}function Pu(h,n){return(3&h[n+3])<<11|h[n+4]<<3|(224&h[n+5])>>>5}function tl(h,n){return n+1<h.length&&mc(h,n)}function bd(h,n){if(tl(h,n)){const t=Ji(h,n);if(n+t>=h.length)return!1;const o=Pu(h,n);if(o<=t)return!1;const u=n+o;return u===h.length||tl(h,u)}return!1}function Cd(h,n,t,o,u){if(!h.samplerate){const p=function Td(h,n,t,o){let u,p,C,F;const $=navigator.userAgent.toLowerCase(),le=o,Se=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];u=1+((192&n[t+2])>>>6);const Le=(60&n[t+2])>>>2;if(!(Le>Se.length-1))return C=(1&n[t+2])<<2,C|=(192&n[t+3])>>>6,Bt.log(`manifest codec:${o}, ADTS type:${u}, samplingIndex:${Le}`),/firefox/i.test($)?Le>=6?(u=5,F=new Array(4),p=Le-3):(u=2,F=new Array(2),p=Le):-1!==$.indexOf("android")?(u=2,F=new Array(2),p=Le):(u=5,F=new Array(4),o&&(-1!==o.indexOf("mp4a.40.29")||-1!==o.indexOf("mp4a.40.5"))||!o&&Le>=6?p=Le-3:((o&&-1!==o.indexOf("mp4a.40.2")&&(Le>=6&&1===C||/vivaldi/i.test($))||!o&&1===C)&&(u=2,F=new Array(2)),p=Le)),F[0]=u<<3,F[0]|=(14&Le)>>1,F[1]|=(1&Le)<<7,F[1]|=C<<3,5===u&&(F[1]|=(14&p)>>1,F[2]=(1&p)<<7,F[2]|=8,F[3]=0),{config:F,samplerate:Se[Le],channelCount:C,codec:"mp4a.40."+u,manifestCodec:le};h.trigger(it.ERROR,{type:rr.MEDIA_ERROR,details:hn.FRAG_PARSING_ERROR,fatal:!0,reason:`invalid ADTS sampling index:${Le}`})}(n,t,o,u);if(!p)return;h.config=p.config,h.samplerate=p.samplerate,h.channelCount=p.channelCount,h.codec=p.codec,h.manifestCodec=p.manifestCodec,Bt.log(`parsed codec:${h.codec}, rate:${p.samplerate}, channels:${p.channelCount}`)}}function Sd(h){return 9216e4/h}function di(h,n,t,o,u){const C=o+u*Sd(h.samplerate),F=function kl(h,n){const t=Ji(h,n);if(n+t<=h.length){const o=Pu(h,n)-t;if(o>0)return{headerLength:t,frameLength:o}}}(n,t);let $;if(F){const{frameLength:Le,headerLength:$e}=F,Je=$e+Le,st=Math.max(0,t+Je-n.length);st?($=new Uint8Array(Je-$e),$.set(n.subarray(t+$e,n.length),0)):$=n.subarray(t+$e,t+Je);const gt={unit:$,pts:C};return st||h.samples.push(gt),{sample:gt,length:Je,missing:st}}const le=n.length-t;return $=new Uint8Array(le),$.set(n.subarray(t,n.length),0),{sample:{unit:$,pts:C},length:le,missing:-1}}const nl=/\/emsg[-/]ID3/i;let Bl=null;const ya=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],rl=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],vc=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],Md=[0,1,1,4];function _c(h,n,t,o,u){if(t+24>n.length)return;const p=ws(n,t);if(p&&t+p.frameLength<=n.length){const F=o+u*(9e4*p.samplesPerFrame/p.sampleRate),$={unit:n.subarray(t,t+p.frameLength),pts:F,dts:F};return h.config=[],h.channelCount=p.channelCount,h.samplerate=p.sampleRate,h.samples.push($),{sample:$,length:p.frameLength,missing:0}}}function ws(h,n){const t=h[n+1]>>3&3,o=h[n+1]>>1&3,u=h[n+2]>>4&15,p=h[n+2]>>2&3;if(1!==t&&0!==u&&15!==u&&3!==p){const F=h[n+3]>>6,le=1e3*ya[14*(3===t?3-o:3===o?3:4)+u-1],Le=rl[3*(3===t?0:2===t?1:2)+p],$e=3===F?1:2,Je=vc[t][o],st=Md[o],gt=8*Je*st,Tt=Math.floor(Je*le/Le+(h[n+2]>>1&1))*st;if(null===Bl){const tn=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Bl=tn?parseInt(tn[1]):0}return!!Bl&&Bl<=87&&2===o&&le>=224e3&&0===F&&(h[n+3]=128|h[n+3]),{sampleRate:Le,channelCount:$e,frameLength:Tt,samplesPerFrame:gt}}}function Rs(h,n){return 255===h[n]&&224==(224&h[n+1])&&0!=(6&h[n+1])}function yc(h,n){return n+1<h.length&&Rs(h,n)}function Ec(h,n){if(n+1<h.length&&Rs(h,n)){const t=4,o=ws(h,n);let u=t;null!=o&&o.frameLength&&(u=o.frameLength);const p=n+u;return p===h.length||yc(h,p)}return!1}class Tc{constructor(n){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=n,this.bytesAvailable=n.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const n=this.data,t=this.bytesAvailable,o=n.byteLength-t,u=new Uint8Array(4),p=Math.min(4,t);if(0===p)throw new Error("no bytes available");u.set(n.subarray(o,o+p)),this.word=new DataView(u.buffer).getUint32(0),this.bitsAvailable=8*p,this.bytesAvailable-=p}skipBits(n){let t;n=Math.min(n,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>n?(this.word<<=n,this.bitsAvailable-=n):(t=(n-=this.bitsAvailable)>>3,n-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=n,this.bitsAvailable-=n)}readBits(n){let t=Math.min(this.bitsAvailable,n);const o=this.word>>>32-t;if(n>32&&Bt.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else{if(!(this.bytesAvailable>0))throw new Error("no bits available");this.loadWord()}return t=n-t,t>0&&this.bitsAvailable?o<<t|this.readBits(t):o}skipLZ(){let n;for(n=0;n<this.bitsAvailable;++n)if(0!=(this.word&2147483648>>>n))return this.word<<=n,this.bitsAvailable-=n,n;return this.loadWord(),n+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const n=this.skipLZ();return this.readBits(n+1)-1}readEG(){const n=this.readUEG();return 1&n?1+n>>>1:-1*(n>>>1)}readBoolean(){return 1===this.readBits(1)}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}skipScalingList(n){let u,t=8,o=8;for(let p=0;p<n;p++)0!==o&&(u=this.readEG(),o=(t+u+256)%256),t=0===o?t:o}readSPS(){let p,C,F,n=0,t=0,o=0,u=0;const $=this.readUByte.bind(this),le=this.readBits.bind(this),Se=this.readUEG.bind(this),Le=this.readBoolean.bind(this),$e=this.skipBits.bind(this),Je=this.skipEG.bind(this),st=this.skipUEG.bind(this),gt=this.skipScalingList.bind(this);$();const Tt=$();if(le(5),$e(3),$(),st(),100===Tt||110===Tt||122===Tt||244===Tt||44===Tt||83===Tt||86===Tt||118===Tt||128===Tt){const Kn=Se();if(3===Kn&&$e(1),st(),st(),$e(1),Le())for(C=3!==Kn?8:12,F=0;F<C;F++)Le()&&gt(F<6?16:64)}st();const Zt=Se();if(0===Zt)Se();else if(1===Zt)for($e(1),Je(),Je(),p=Se(),F=0;F<p;F++)Je();st(),$e(1);const rn=Se(),tn=Se(),Mn=le(1);0===Mn&&$e(1),$e(1),Le()&&(n=Se(),t=Se(),o=Se(),u=Se());let pn=[1,1];if(Le()&&Le())switch($()){case 1:pn=[1,1];break;case 2:pn=[12,11];break;case 3:pn=[10,11];break;case 4:pn=[16,11];break;case 5:pn=[40,33];break;case 6:pn=[24,11];break;case 7:pn=[20,11];break;case 8:pn=[32,11];break;case 9:pn=[80,33];break;case 10:pn=[18,11];break;case 11:pn=[15,11];break;case 12:pn=[64,33];break;case 13:pn=[160,99];break;case 14:pn=[4,3];break;case 15:pn=[3,2];break;case 16:pn=[2,1];break;case 255:pn=[$()<<8|$(),$()<<8|$()]}return{width:Math.ceil(16*(rn+1)-2*n-2*t),height:(2-Mn)*(tn+1)*16-(Mn?2:4)*(o+u),pixelRatio:pn}}readSliceType(){return this.readUByte(),this.readUEG(),this.readUEG()}}class nh{constructor(n,t,o){this.keyData=void 0,this.decrypter=void 0,this.keyData=o,this.decrypter=new Du(t,{removePKCS7Padding:!1})}decryptBuffer(n){return this.decrypter.decrypt(n,this.keyData.key.buffer,this.keyData.iv.buffer)}decryptAacSample(n,t,o){const u=n[t].unit;if(u.length<=16)return;const p=u.subarray(16,u.length-u.length%16),C=p.buffer.slice(p.byteOffset,p.byteOffset+p.length);this.decryptBuffer(C).then(F=>{const $=new Uint8Array(F);u.set($,16),this.decrypter.isSync()||this.decryptAacSamples(n,t+1,o)})}decryptAacSamples(n,t,o){for(;;t++){if(t>=n.length)return void o();if(!(n[t].unit.length<32||(this.decryptAacSample(n,t,o),this.decrypter.isSync())))return}}getAvcEncryptedData(n){const t=16*Math.floor((n.length-48)/160)+16,o=new Int8Array(t);let u=0;for(let p=32;p<n.length-16;p+=160,u+=16)o.set(n.subarray(p,p+16),u);return o}getAvcDecryptedUnit(n,t){const o=new Uint8Array(t);let u=0;for(let p=32;p<n.length-16;p+=160,u+=16)n.set(o.subarray(u,u+16),p);return n}decryptAvcSample(n,t,o,u,p){const C=la(p.data),F=this.getAvcEncryptedData(C);this.decryptBuffer(F.buffer).then($=>{p.data=this.getAvcDecryptedUnit(C,$),this.decrypter.isSync()||this.decryptAvcSamples(n,t,o+1,u)})}decryptAvcSamples(n,t,o,u){if(n instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,o=0){if(t>=n.length)return void u();const p=n[t].units;for(;!(o>=p.length);o++){const C=p[o];if(!(C.data.length<=48||1!==C.type&&5!==C.type||(this.decryptAvcSample(n,t,o,u,C),this.decrypter.isSync())))return}}}}const oo=188;class Ns{constructor(n,t,o){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=n,this.config=t,this.typeSupported=o}static probe(n){const t=Ns.syncOffset(n);return t>0&&Bt.warn(`MPEG2-TS detected but first sync word found @ offset ${t}`),-1!==t}static syncOffset(n){const t=n.length;let o=Math.min(940,n.length-oo)+1,u=0;for(;u<o;){let p=!1,C=-1,F=0;for(let $=u;$<t;$+=oo){if(71!==n[$]){if(F)return-1;break}if(F++,-1===C&&(C=$,0!==C&&(o=Math.min(C+18612,n.length-oo)+1)),p||(p=0===Ea(n,$)),p&&F>1&&(0===C&&F>2||$+oo>o))return C}u++}return-1}static createTrack(n,t){return{container:"video"===n||"audio"===n?"video/mp2t":void 0,type:n,id:wt[n],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===n?t:void 0}}resetInitSegment(n,t,o,u){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=Ns.createTrack("video"),this._audioTrack=Ns.createTrack("audio",u),this._id3Track=Ns.createTrack("id3"),this._txtTrack=Ns.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=o,this._duration=u}resetTimeStamp(){}resetContiguity(){const{_audioTrack:n,_avcTrack:t,_id3Track:o}=this;n&&(n.pesData=null),t&&(t.pesData=null),o&&(o.pesData=null),this.aacOverFlow=null,this.avcSample=null,this.remainderData=null}demux(n,t,o=!1,u=!1){let p;o||(this.sampleAes=null);const C=this._avcTrack,F=this._audioTrack,$=this._id3Track,le=this._txtTrack;let Se=C.pid,Le=C.pesData,$e=F.pid,Je=$.pid,st=F.pesData,gt=$.pesData,Tt=null,Zt=this.pmtParsed,rn=this._pmtId,tn=n.length;if(this.remainderData&&(tn=(n=Hi(this.remainderData,n)).length,this.remainderData=null),tn<oo&&!u)return this.remainderData=n,{audioTrack:F,videoTrack:C,id3Track:$,textTrack:le};const Mn=Math.max(0,Ns.syncOffset(n));tn-=(tn-Mn)%oo,tn<n.byteLength&&!u&&(this.remainderData=new Uint8Array(n.buffer,tn,n.buffer.byteLength-tn));let pn=0;for(let xn=Mn;xn<tn;xn+=oo)if(71===n[xn]){const Wn=!!(64&n[xn+1]),er=Ea(n,xn);let gr;if((48&n[xn+3])>>4>1){if(gr=xn+5+n[xn+4],gr===xn+oo)continue}else gr=xn+4;switch(er){case Se:Wn&&(Le&&(p=ba(Le))&&this.parseAVCPES(C,le,p,!1),Le={data:[],size:0}),Le&&(Le.data.push(n.subarray(gr,xn+oo)),Le.size+=xn+oo-gr);break;case $e:if(Wn){if(st&&(p=ba(st)))switch(F.segmentCodec){case"aac":this.parseAACPES(F,p);break;case"mp3":this.parseMPEGPES(F,p)}st={data:[],size:0}}st&&(st.data.push(n.subarray(gr,xn+oo)),st.size+=xn+oo-gr);break;case Je:Wn&&(gt&&(p=ba(gt))&&this.parseID3PES($,p),gt={data:[],size:0}),gt&&(gt.data.push(n.subarray(gr,xn+oo)),gt.size+=xn+oo-gr);break;case 0:Wn&&(gr+=n[gr]+1),rn=this._pmtId=Au(n,gr);break;case rn:{Wn&&(gr+=n[gr]+1);const sr=Ta(n,gr,this.typeSupported,o);Se=sr.avc,Se>0&&(C.pid=Se),$e=sr.audio,$e>0&&(F.pid=$e,F.segmentCodec=sr.segmentCodec),Je=sr.id3,Je>0&&($.pid=Je),null!==Tt&&!Zt&&(Bt.warn(`MPEG-TS PMT found at ${xn} after unknown PID '${Tt}'. Backtracking to sync byte @${Mn} to parse all TS packets.`),Tt=null,xn=Mn-188),Zt=this.pmtParsed=!0;break}case 17:case 8191:break;default:Tt=er}}else pn++;if(pn>0){const xn=new Error(`Found ${pn} TS packet/s that do not start with 0x47`);this.observer.emit(it.ERROR,it.ERROR,{type:rr.MEDIA_ERROR,details:hn.FRAG_PARSING_ERROR,fatal:!1,error:xn,reason:xn.message})}C.pesData=Le,F.pesData=st,$.pesData=gt;const Kn={audioTrack:F,videoTrack:C,id3Track:$,textTrack:le};return u&&this.extractRemainingSamples(Kn),Kn}flush(){const{remainderData:n}=this;let t;return this.remainderData=null,t=n?this.demux(n,-1,!1,!0):{videoTrack:this._avcTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(n){const{audioTrack:t,videoTrack:o,id3Track:u,textTrack:p}=n,C=o.pesData,F=t.pesData,$=u.pesData;let le;if(C&&(le=ba(C))?(this.parseAVCPES(o,p,le,!0),o.pesData=null):o.pesData=C,F&&(le=ba(F))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,le);break;case"mp3":this.parseMPEGPES(t,le)}t.pesData=null}else null!=F&&F.size&&Bt.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=F;$&&(le=ba($))?(this.parseID3PES(u,le),u.pesData=null):u.pesData=$}demuxSampleAes(n,t,o){const u=this.demux(n,o,!0,!this.config.progressive),p=this.sampleAes=new nh(this.observer,this.config,t);return this.decrypt(u,p)}decrypt(n,t){return new Promise(o=>{const{audioTrack:u,videoTrack:p}=n;u.samples&&"aac"===u.segmentCodec?t.decryptAacSamples(u.samples,0,()=>{p.samples?t.decryptAvcSamples(p.samples,0,0,()=>{o(n)}):o(n)}):p.samples&&t.decryptAvcSamples(p.samples,0,0,()=>{o(n)})})}destroy(){this._duration=0}parseAVCPES(n,t,o,u){const p=this.parseAVCNALu(n,o.data);let F,C=this.avcSample,$=!1;o.data=null,C&&p.length&&!n.audFound&&(Iu(C,n),C=this.avcSample=Ul(!1,o.pts,o.dts,"")),p.forEach(le=>{switch(le.type){case 1:{F=!0,C||(C=this.avcSample=Ul(!0,o.pts,o.dts,"")),C.frame=!0;const Se=le.data;if($&&Se.length>4){const Le=new Tc(Se).readSliceType();(2===Le||4===Le||7===Le||9===Le)&&(C.key=!0)}break}case 5:F=!0,C||(C=this.avcSample=Ul(!0,o.pts,o.dts,"")),C.key=!0,C.frame=!0;break;case 6:F=!0,El(le.data,1,o.pts,t.samples);break;case 7:if(F=!0,$=!0,!n.sps){const Se=le.data,$e=new Tc(Se).readSPS();n.width=$e.width,n.height=$e.height,n.pixelRatio=$e.pixelRatio,n.sps=[Se],n.duration=this._duration;const Je=Se.subarray(1,4);let st="avc1.";for(let gt=0;gt<3;gt++){let Tt=Je[gt].toString(16);Tt.length<2&&(Tt="0"+Tt),st+=Tt}n.codec=st}break;case 8:F=!0,n.pps||(n.pps=[le.data]);break;case 9:F=!1,n.audFound=!0,C&&Iu(C,n),C=this.avcSample=Ul(!1,o.pts,o.dts,"");break;case 12:F=!0;break;default:F=!1,C&&(C.debug+="unknown NAL "+le.type+" ")}C&&F&&C.units.push(le)}),u&&C&&(Iu(C,n),this.avcSample=null)}getLastNalUnit(n){var t;let u,o=this.avcSample;if((!o||0===o.units.length)&&(o=n[n.length-1]),null!=(t=o)&&t.units){const p=o.units;u=p[p.length-1]}return u}parseAVCNALu(n,t){const o=t.byteLength;let u=n.naluState||0;const p=u,C=[];let $,le,Se,F=0,Le=-1,$e=0;for(-1===u&&(Le=0,$e=31&t[0],u=0,F=1);F<o;)if($=t[F++],u)if(1!==u)if($)if(1===$){if(Le>=0){const Je={data:t.subarray(Le,F-u-1),type:$e};C.push(Je)}else{const Je=this.getLastNalUnit(n.samples);if(Je&&(p&&F<=4-p&&Je.state&&(Je.data=Je.data.subarray(0,Je.data.byteLength-p)),le=F-u-1,le>0)){const st=new Uint8Array(Je.data.byteLength+le);st.set(Je.data,0),st.set(t.subarray(0,le),Je.data.byteLength),Je.data=st,Je.state=0}}F<o?(Se=31&t[F],Le=F,$e=Se,u=0):u=-1}else u=0;else u=3;else u=$?0:2;else u=$?0:1;if(Le>=0&&u>=0){const Je={data:t.subarray(Le,o),type:$e,state:u};C.push(Je)}if(0===C.length){const Je=this.getLastNalUnit(n.samples);if(Je){const st=new Uint8Array(Je.data.byteLength+t.byteLength);st.set(Je.data,0),st.set(t,Je.data.byteLength),Je.data=st}}return n.naluState=u,C}parseAACPES(n,t){let o=0;const u=this.aacOverFlow;let C,F,$,p=t.data;if(u){this.aacOverFlow=null;const Le=u.missing,$e=u.sample.unit.byteLength;if(-1===Le){const Je=new Uint8Array($e+p.byteLength);Je.set(u.sample.unit,0),Je.set(p,$e),p=Je}else{const Je=$e-Le;u.sample.unit.set(p.subarray(0,Le),Je),n.samples.push(u.sample),o=u.missing}}for(C=o,F=p.length;C<F-1&&!tl(p,C);C++);if(C!==o){let Le;const $e=C<F-1;Le=$e?`AAC PES did not start with ADTS header,offset:${C}`:"No ADTS header found in AAC PES";const Je=new Error(Le);if(Bt.warn(`parsing error: ${Le}`),this.observer.emit(it.ERROR,it.ERROR,{type:rr.MEDIA_ERROR,details:hn.FRAG_PARSING_ERROR,fatal:!1,levelRetry:$e,error:Je,reason:Le}),!$e)return}if(Cd(n,this.observer,p,C,this.audioCodec),void 0!==t.pts)$=t.pts;else{if(!u)return void Bt.warn("[tsdemuxer]: AAC PES unknown PTS");{const Le=Sd(n.samplerate);$=u.sample.pts+Le}}let Se,le=0;for(;C<F;){if(Se=di(n,p,C,$,le),C+=Se.length,Se.missing){this.aacOverFlow=Se;break}for(le++;C<F-1&&!tl(p,C);C++);}}parseMPEGPES(n,t){const o=t.data,u=o.length;let p=0,C=0;const F=t.pts;if(void 0!==F)for(;C<u;)if(yc(o,C)){const $=_c(n,o,C,F,p);if(!$)break;C+=$.length,p++}else C++;else Bt.warn("[tsdemuxer]: MPEG PES unknown PTS")}parseID3PES(n,t){if(void 0===t.pts)return void Bt.warn("[tsdemuxer]: ID3 PES unknown PTS");const o=Wr({},t,{type:this._avcTrack?To_emsg:"org.id3",duration:Number.POSITIVE_INFINITY});n.samples.push(o)}}function Ul(h,n,t,o){return{key:h,frame:!1,pts:n,dts:t,units:[],debug:o,length:0}}function Ea(h,n){return((31&h[n+1])<<8)+h[n+2]}function Au(h,n){return(31&h[n+10])<<8|h[n+11]}function Ta(h,n,t,o){const u={audio:-1,avc:-1,id3:-1,segmentCodec:"aac"},C=n+3+((15&h[n+1])<<8|h[n+2])-4;for(n+=12+((15&h[n+10])<<8|h[n+11]);n<C;){const $=Ea(h,n);switch(h[n]){case 207:if(!o){Bt.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===u.audio&&(u.audio=$);break;case 21:-1===u.id3&&(u.id3=$);break;case 219:if(!o){Bt.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===u.avc&&(u.avc=$);break;case 3:case 4:!0!==t.mpeg&&!0!==t.mp3?Bt.log("MPEG audio found, not supported in this browser"):-1===u.audio&&(u.audio=$,u.segmentCodec="mp3");break;case 36:Bt.warn("Unsupported HEVC stream type found")}n+=5+((15&h[n+3])<<8|h[n+4])}return u}function ba(h){let t,o,u,p,C,n=0;const F=h.data;if(!h||0===h.size)return null;for(;F[0].length<19&&F.length>1;){const le=new Uint8Array(F[0].length+F[1].length);le.set(F[0]),le.set(F[1],F[0].length),F[0]=le,F.splice(1,1)}if(t=F[0],(t[0]<<16)+(t[1]<<8)+t[2]===1){if(o=(t[4]<<8)+t[5],o&&o>h.size-6)return null;const le=t[7];192&le&&(p=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,64&le?(C=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2,p-C>54e5&&(Bt.warn(`${Math.round((p-C)/9e4)}s delta between PTS and DTS, align them`),p=C)):C=p),u=t[8];let Se=u+9;if(h.size<=Se)return null;h.size-=Se;const Le=new Uint8Array(h.size);for(let $e=0,Je=F.length;$e<Je;$e++){t=F[$e];let st=t.byteLength;if(Se){if(Se>st){Se-=st;continue}t=t.subarray(Se),st-=Se,Se=0}Le.set(t,n),n+=st}return o&&(o-=u+3),{data:Le,pts:p,dts:C,len:o}}return null}function Iu(h,n){if(h.units.length&&h.frame){if(void 0===h.pts){const t=n.samples,o=t.length;if(!o)return void n.dropped++;{const u=t[o-1];h.pts=u.pts,h.dts=u.dts}}n.samples.push(h)}h.debug.length&&Bt.log(h.pts+"/"+h.dts+":"+h.debug)}class Ca{static getSilentFrame(n,t){if("mp4a.40.2"===n){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}}}const cs=Math.pow(2,32)-1;let Sa=(()=>{class h{static init(){let t;for(t in h.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},h.types)h.types.hasOwnProperty(t)&&(h.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);const o=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),u=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);h.HDLR_TYPES={video:o,audio:u};const p=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),C=new Uint8Array([0,0,0,0,0,0,0,0]);h.STTS=h.STSC=h.STCO=C,h.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),h.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),h.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),h.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const F=new Uint8Array([105,115,111,109]),$=new Uint8Array([97,118,99,49]),le=new Uint8Array([0,0,0,1]);h.FTYP=h.box(h.types.ftyp,F,le,F,$),h.DINF=h.box(h.types.dinf,h.box(h.types.dref,p))}static box(t,...o){let u=8,p=o.length;const C=p;for(;p--;)u+=o[p].byteLength;const F=new Uint8Array(u);for(F[0]=u>>24&255,F[1]=u>>16&255,F[2]=u>>8&255,F[3]=255&u,F.set(t,4),p=0,u=8;p<C;p++)F.set(o[p],u),u+=o[p].byteLength;return F}static hdlr(t){return h.box(h.types.hdlr,h.HDLR_TYPES[t])}static mdat(t){return h.box(h.types.mdat,t)}static mdhd(t,o){o*=t;const u=Math.floor(o/(cs+1)),p=Math.floor(o%(cs+1));return h.box(h.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,u>>24,u>>16&255,u>>8&255,255&u,p>>24,p>>16&255,p>>8&255,255&p,85,196,0,0]))}static mdia(t){return h.box(h.types.mdia,h.mdhd(t.timescale,t.duration),h.hdlr(t.type),h.minf(t))}static mfhd(t){return h.box(h.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))}static minf(t){return h.box(h.types.minf,"audio"===t.type?h.box(h.types.smhd,h.SMHD):h.box(h.types.vmhd,h.VMHD),h.DINF,h.stbl(t))}static moof(t,o,u){return h.box(h.types.moof,h.mfhd(t),h.traf(u,o))}static moov(t){let o=t.length;const u=[];for(;o--;)u[o]=h.trak(t[o]);return h.box.apply(null,[h.types.moov,h.mvhd(t[0].timescale,t[0].duration)].concat(u).concat(h.mvex(t)))}static mvex(t){let o=t.length;const u=[];for(;o--;)u[o]=h.trex(t[o]);return h.box.apply(null,[h.types.mvex,...u])}static mvhd(t,o){o*=t;const u=Math.floor(o/(cs+1)),p=Math.floor(o%(cs+1)),C=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,u>>24,u>>16&255,u>>8&255,255&u,p>>24,p>>16&255,p>>8&255,255&p,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return h.box(h.types.mvhd,C)}static sdtp(t){const o=t.samples||[],u=new Uint8Array(4+o.length);let p,C;for(p=0;p<o.length;p++)C=o[p].flags,u[p+4]=C.dependsOn<<4|C.isDependedOn<<2|C.hasRedundancy;return h.box(h.types.sdtp,u)}static stbl(t){return h.box(h.types.stbl,h.stsd(t),h.box(h.types.stts,h.STTS),h.box(h.types.stsc,h.STSC),h.box(h.types.stsz,h.STSZ),h.box(h.types.stco,h.STCO))}static avc1(t){let p,C,F,o=[],u=[];for(p=0;p<t.sps.length;p++)C=t.sps[p],F=C.byteLength,o.push(F>>>8&255),o.push(255&F),o=o.concat(Array.prototype.slice.call(C));for(p=0;p<t.pps.length;p++)C=t.pps[p],F=C.byteLength,u.push(F>>>8&255),u.push(255&F),u=u.concat(Array.prototype.slice.call(C));const $=h.box(h.types.avcC,new Uint8Array([1,o[3],o[4],o[5],255,224|t.sps.length].concat(o).concat([t.pps.length]).concat(u))),le=t.width,Se=t.height,Le=t.pixelRatio[0],$e=t.pixelRatio[1];return h.box(h.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,le>>8&255,255&le,Se>>8&255,255&Se,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),$,h.box(h.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),h.box(h.types.pasp,new Uint8Array([Le>>24,Le>>16&255,Le>>8&255,255&Le,$e>>24,$e>>16&255,$e>>8&255,255&$e])))}static esds(t){const o=t.config.length;return new Uint8Array([0,0,0,0,3,23+o,0,1,0,4,15+o,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([o]).concat(t.config).concat([6,1,2]))}static mp4a(t){const o=t.samplerate;return h.box(h.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,o>>8&255,255&o,0,0]),h.box(h.types.esds,h.esds(t)))}static mp3(t){const o=t.samplerate;return h.box(h.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,o>>8&255,255&o,0,0]))}static stsd(t){return h.box(h.types.stsd,h.STSD,"audio"===t.type?"mp3"===t.segmentCodec&&"mp3"===t.codec?h.mp3(t):h.mp4a(t):h.avc1(t))}static tkhd(t){const o=t.id,u=t.duration*t.timescale,p=t.width,C=t.height,F=Math.floor(u/(cs+1)),$=Math.floor(u%(cs+1));return h.box(h.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,o>>24&255,o>>16&255,o>>8&255,255&o,0,0,0,0,F>>24,F>>16&255,F>>8&255,255&F,$>>24,$>>16&255,$>>8&255,255&$,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,p>>8&255,255&p,0,0,C>>8&255,255&C,0,0]))}static traf(t,o){const u=h.sdtp(t),p=t.id,C=Math.floor(o/(cs+1)),F=Math.floor(o%(cs+1));return h.box(h.types.traf,h.box(h.types.tfhd,new Uint8Array([0,0,0,0,p>>24,p>>16&255,p>>8&255,255&p])),h.box(h.types.tfdt,new Uint8Array([1,0,0,0,C>>24,C>>16&255,C>>8&255,255&C,F>>24,F>>16&255,F>>8&255,255&F])),h.trun(t,u.length+16+20+8+16+8+8),u)}static trak(t){return t.duration=t.duration||4294967295,h.box(h.types.trak,h.tkhd(t),h.mdia(t))}static trex(t){const o=t.id;return h.box(h.types.trex,new Uint8Array([0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(t,o){const u=t.samples||[],p=u.length,C=12+16*p,F=new Uint8Array(C);let $,le,Se,Le,$e,Je;for(F.set(["video"===t.type?1:0,0,15,1,p>>>24&255,p>>>16&255,p>>>8&255,255&p,(o+=8+C)>>>24&255,o>>>16&255,o>>>8&255,255&o],0),$=0;$<p;$++)le=u[$],Se=le.duration,Le=le.size,$e=le.flags,Je=le.cts,F.set([Se>>>24&255,Se>>>16&255,Se>>>8&255,255&Se,Le>>>24&255,Le>>>16&255,Le>>>8&255,255&Le,$e.isLeading<<2|$e.dependsOn,$e.isDependedOn<<6|$e.hasRedundancy<<4|$e.paddingValue<<1|$e.isNonSync,61440&$e.degradPrio,15&$e.degradPrio,Je>>>24&255,Je>>>16&255,Je>>>8&255,255&Je],12+16*$);return h.box(h.types.trun,F)}static initSegment(t){h.types||h.init();const o=h.moov(t),u=new Uint8Array(h.FTYP.byteLength+o.byteLength);return u.set(h.FTYP),u.set(o,h.FTYP.byteLength),u}}return h.types=void 0,h.HDLR_TYPES=void 0,h.STTS=void 0,h.STSC=void 0,h.STCO=void 0,h.STSZ=void 0,h.VMHD=void 0,h.SMHD=void 0,h.STSD=void 0,h.FTYP=void 0,h.DINF=void 0,h})();function Ou(h,n,t=1,o=!1){const u=h*n*t;return o?Math.round(u):u}function jl(h,n=!1){return Ou(h,1e3,1/9e4,n)}let Ls,$o=null,Xs=null;class xu{constructor(n,t,o,u=""){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=n,this.config=t,this.typeSupported=o,this.ISGenerated=!1,null===$o){const C=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);$o=C?parseInt(C[1]):0}if(null===Xs){const p=navigator.userAgent.match(/Safari\/(\d+)/i);Xs=p?parseInt(p[1]):0}}destroy(){}resetTimeStamp(n){Bt.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=n}resetNextTimestamp(){Bt.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){Bt.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1}getVideoStartPts(n){let t=!1;const o=n.reduce((u,p)=>{const C=p.pts-u;return C<-4294967296?(t=!0,zo(u,p.pts)):C>0?u:p.pts},n[0].pts);return t&&Bt.debug("PTS rollover detected"),o}remux(n,t,o,u,p,C,F,$){let le,Se,Le,$e,Je,st,gt=p,Tt=p;const rn=t.pid>-1,tn=t.samples.length,Mn=n.samples.length>0,pn=F&&tn>0||tn>1;if((!(n.pid>-1)||Mn)&&(!rn||pn)||this.ISGenerated||F){this.ISGenerated||(Le=this.generateIS(n,t,p,C));const xn=this.isVideoContiguous;let er,Wn=-1;if(pn&&(Wn=function sh(h){for(let n=0;n<h.length;n++)if(h[n].key)return n;return-1}(t.samples),!xn&&this.config.forceKeyFrameOnDiscontinuity))if(st=!0,Wn>0){Bt.warn(`[mp4-remuxer]: Dropped ${Wn} out of ${tn} video samples due to a missing keyframe`);const Sn=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(Wn),t.dropped+=Wn,Tt+=(t.samples[0].pts-Sn)/t.inputTimeScale,er=Tt}else-1===Wn&&(Bt.warn(`[mp4-remuxer]: No keyframe found out of ${tn} video samples`),st=!1);if(this.ISGenerated){if(Mn&&pn){const Sn=this.getVideoStartPts(t.samples),sr=(zo(n.samples[0].pts,Sn)-Sn)/t.inputTimeScale;gt+=Math.max(0,sr),Tt+=Math.max(0,-sr)}if(Mn){if(n.samplerate||(Bt.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),Le=this.generateIS(n,t,p,C)),Se=this.remuxAudio(n,gt,this.isAudioContiguous,C,rn||pn||"audio"===$?Tt:void 0),pn){const Sn=Se?Se.endPTS-Se.startPTS:0;t.inputTimeScale||(Bt.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),Le=this.generateIS(n,t,p,C)),le=this.remuxVideo(t,Tt,xn,Sn)}}else pn&&(le=this.remuxVideo(t,Tt,xn,0));le&&(le.firstKeyFrame=Wn,le.independent=-1!==Wn,le.firstKeyFramePTS=er)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(o.samples.length&&(Je=Id(o,p,this._initPTS,this._initDTS)),u.samples.length&&($e=Od(u,p,this._initPTS))),{audio:Se,video:le,initSegment:Le,independent:st,text:$e,id3:Je}}generateIS(n,t,o,u){const p=n.samples,C=t.samples,F=this.typeSupported,$={},le=this._initPTS;let $e,Je,st,Se=!le||u,Le="audio/mp4";if(Se&&($e=Je=1/0),n.config&&p.length&&("mp3"===(n.timescale=n.samplerate,n.segmentCodec)&&(F.mpeg?(Le="audio/mpeg",n.codec=""):F.mp3&&(n.codec="mp3")),$.audio={id:"audio",container:Le,codec:n.codec,initSegment:"mp3"===n.segmentCodec&&F.mpeg?new Uint8Array(0):Sa.initSegment([n]),metadata:{channelCount:n.channelCount}},Se&&(st=n.inputTimeScale,le&&st===le.timescale?Se=!1:$e=Je=p[0].pts-Math.round(st*o))),t.sps&&t.pps&&C.length&&(t.timescale=t.inputTimeScale,$.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:Sa.initSegment([t]),metadata:{width:t.width,height:t.height}},Se))if(st=t.inputTimeScale,le&&st===le.timescale)Se=!1;else{const gt=this.getVideoStartPts(C),Tt=Math.round(st*o);Je=Math.min(Je,zo(C[0].dts,gt)-Tt),$e=Math.min($e,gt-Tt)}if(Object.keys($).length)return this.ISGenerated=!0,Se?(this._initPTS={baseTime:$e,timescale:st},this._initDTS={baseTime:Je,timescale:st}):$e=st=void 0,{tracks:$,initPTS:$e,timescale:st}}remuxVideo(n,t,o,u){const p=n.inputTimeScale,C=n.samples,F=[],$=C.length,le=this._initPTS;let Je,st,Se=this.nextAvcDts,Le=8,$e=this.videoSampleDuration,gt=Number.POSITIVE_INFINITY,Tt=Number.NEGATIVE_INFINITY,Zt=!1;o&&null!==Se||(Se=t*p-(C[0].pts-zo(C[0].dts,C[0].pts)));const rn=le.baseTime*p/le.timescale;for(let ur=0;ur<$;ur++){const ar=C[ur];ar.pts=zo(ar.pts-rn,Se),ar.dts=zo(ar.dts-rn,Se),ar.dts<C[ur>0?ur-1:ur].dts&&(Zt=!0)}Zt&&C.sort(function(ur,ar){return ur.dts-ar.dts||ur.pts-ar.pts}),Je=C[0].dts,st=C[C.length-1].dts;const tn=st-Je,Mn=tn?Math.round(tn/($-1)):$e||n.inputTimeScale/30;if(o){const ur=Je-Se,ar=ur>Mn,ti=ur<-1;if((ar||ti)&&(Bt.warn(ar?`AVC: ${jl(ur,!0)} ms (${ur}dts) hole between fragments detected, filling it`:`AVC: ${jl(-ur,!0)} ms (${ur}dts) overlapping between fragments detected`),!ti||Se>=C[0].pts)){Je=Se;const hi=C[0].pts-ur;C[0].dts=Je,C[0].pts=hi,Bt.log(`Video: First PTS/DTS adjusted: ${jl(hi,!0)}/${jl(Je,!0)}, delta: ${jl(ur,!0)} ms`)}}Je=Math.max(0,Je);let pn=0,Kn=0;for(let ur=0;ur<$;ur++){const ar=C[ur],ti=ar.units,hi=ti.length;let Br=0;for(let ki=0;ki<hi;ki++)Br+=ti[ki].data.length;Kn+=Br,pn+=hi,ar.length=Br,ar.dts=Math.max(ar.dts,Je),gt=Math.min(ar.pts,gt),Tt=Math.max(ar.pts,Tt)}st=C[$-1].dts;const xn=Kn+4*pn+8;let Wn;try{Wn=new Uint8Array(xn)}catch(ur){return void this.observer.emit(it.ERROR,it.ERROR,{type:rr.MUX_ERROR,details:hn.REMUX_ALLOC_ERROR,fatal:!1,error:ur,bytes:xn,reason:`fail allocating video mdat ${xn}`})}const er=new DataView(Wn.buffer);er.setUint32(0,xn),Wn.set(Sa.types.mdat,4);let Sn=!1,gr=Number.POSITIVE_INFINITY,sr=Number.POSITIVE_INFINITY,ri=Number.NEGATIVE_INFINITY,Fo=Number.NEGATIVE_INFINITY;for(let ur=0;ur<$;ur++){const ar=C[ur],ti=ar.units;let Br,hi=0;for(let fo=0,Do=ti.length;fo<Do;fo++){const ho=ti[fo],gs=ho.data,La=ho.data.byteLength;er.setUint32(Le,La),Le+=4,Wn.set(gs,Le),Le+=La,hi+=4+La}if(ur<$-1)$e=C[ur+1].dts-ar.dts,Br=C[ur+1].pts-ar.pts;else{const fo=this.config,Do=ur>0?ar.dts-C[ur-1].dts:Mn;if(Br=ur>0?ar.pts-C[ur-1].pts:Mn,fo.stretchShortVideoTrack&&null!==this.nextAudioPts){const ho=Math.floor(fo.maxBufferHole*p),gs=(u?gt+u*p:this.nextAudioPts)-ar.pts;gs>ho?($e=gs-Do,$e<0?$e=Do:Sn=!0,Bt.log(`[mp4-remuxer]: It is approximately ${gs/90} ms to the next segment; using duration ${$e/90} ms for the last video frame.`)):$e=Do}else $e=Do}const ki=Math.round(ar.pts-ar.dts);gr=Math.min(gr,$e),ri=Math.max(ri,$e),sr=Math.min(sr,Br),Fo=Math.max(Fo,Br),F.push(new xd(ar.key,$e,hi,ki))}if(F.length)if($o){if($o<70){const ur=F[0].flags;ur.dependsOn=2,ur.isNonSync=0}}else if(Xs&&Fo-sr<ri-gr&&Mn/ri<.025&&0===F[0].cts){Bt.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let ur=Je;for(let ar=0,ti=F.length;ar<ti;ar++){const hi=ur+F[ar].duration,Br=ur+F[ar].cts;F[ar].duration=ar<ti-1?hi+F[ar+1].cts-Br:ar?F[ar-1].duration:Mn,F[ar].cts=0,ur=hi}}$e=Sn||!$e?Mn:$e,this.nextAvcDts=Se=st+$e,this.videoSampleDuration=$e,this.isVideoContiguous=!0;const ei={data1:Sa.moof(n.sequenceNumber++,Je,Wr({},n,{samples:F})),data2:Wn,startPTS:gt/p,endPTS:(Tt+$e)/p,startDTS:Je/p,endDTS:Se/p,type:"video",hasAudio:!1,hasVideo:!0,nb:F.length,dropped:n.dropped};return n.samples=[],n.dropped=0,ei}remuxAudio(n,t,o,u,p){const C=n.inputTimeScale,$=C/(n.samplerate?n.samplerate:C),le="aac"===n.segmentCodec?1024:1152,Se=le*$,Le=this._initPTS,$e="mp3"===n.segmentCodec&&this.typeSupported.mpeg,Je=[],st=void 0!==p;let gt=n.samples,Tt=$e?0:8,Zt=this.nextAudioPts||-1;const rn=t*C,tn=Le.baseTime*C/Le.timescale;if(this.isAudioContiguous=o=o||gt.length&&Zt>0&&(u&&Math.abs(rn-Zt)<9e3||Math.abs(zo(gt[0].pts-tn,rn)-Zt)<20*Se),gt.forEach(function(Ci){Ci.pts=zo(Ci.pts-tn,rn)}),!o||Zt<0){if(gt=gt.filter(Ci=>Ci.pts>=0),!gt.length)return;Zt=0===p?0:u&&!st?Math.max(0,rn):gt[0].pts}if("aac"===n.segmentCodec){const Ci=this.config.maxAudioFramesDrift;for(let ei=0,ur=Zt;ei<gt.length;ei++){const ar=gt[ei],ti=ar.pts,hi=ti-ur,Br=Math.abs(1e3*hi/C);if(hi<=-Ci*Se&&st)0===ei&&(Bt.warn(`Audio frame @ ${(ti/C).toFixed(3)}s overlaps nextAudioPts by ${Math.round(1e3*hi/C)} ms.`),this.nextAudioPts=Zt=ur=ti);else if(hi>=Ci*Se&&Br<1e4&&st){let ki=Math.round(hi/Se);ur=ti-ki*Se,ur<0&&(ki--,ur+=Se),0===ei&&(this.nextAudioPts=Zt=ur),Bt.warn(`[mp4-remuxer]: Injecting ${ki} audio frame @ ${(ur/C).toFixed(3)}s due to ${Math.round(1e3*hi/C)} ms gap.`);for(let fo=0;fo<ki;fo++){const Do=Math.max(ur,0);let ho=Ca.getSilentFrame(n.manifestCodec||n.codec,n.channelCount);ho||(Bt.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),ho=ar.unit.subarray()),gt.splice(ei,0,{unit:ho,pts:Do}),ur+=Se,ei++}}ar.pts=ur,ur+=Se}}let Kn,Mn=null,pn=null,xn=0,Wn=gt.length;for(;Wn--;)xn+=gt[Wn].unit.byteLength;for(let Ci=0,ei=gt.length;Ci<ei;Ci++){const ur=gt[Ci],ar=ur.unit;let ti=ur.pts;if(null!==pn)Je[Ci-1].duration=Math.round((ti-pn)/$);else{if(o&&"aac"===n.segmentCodec&&(ti=Zt),Mn=ti,!(xn>0))return;xn+=Tt;try{Kn=new Uint8Array(xn)}catch(Br){return void this.observer.emit(it.ERROR,it.ERROR,{type:rr.MUX_ERROR,details:hn.REMUX_ALLOC_ERROR,fatal:!1,error:Br,bytes:xn,reason:`fail allocating audio mdat ${xn}`})}$e||(new DataView(Kn.buffer).setUint32(0,xn),Kn.set(Sa.types.mdat,4))}Kn.set(ar,Tt);const hi=ar.byteLength;Tt+=hi,Je.push(new xd(!0,le,hi,0)),pn=ti}const er=Je.length;if(!er)return;this.nextAudioPts=Zt=pn+$*Je[Je.length-1].duration;const gr=$e?new Uint8Array(0):Sa.moof(n.sequenceNumber++,Mn/$,Wr({},n,{samples:Je}));n.samples=[];const sr=Mn/C,ri=Zt/C,Di={data1:gr,data2:Kn,startPTS:sr,endPTS:ri,startDTS:sr,endDTS:ri,type:"audio",hasAudio:!0,hasVideo:!1,nb:er};return this.isAudioContiguous=!0,Di}remuxEmptyAudio(n,t,o,u){const p=n.inputTimeScale,$=this.nextAudioPts,le=this._initDTS,Se=9e4*le.baseTime/le.timescale,Le=(null!==$?$:u.startDTS*p)+Se,Je=p/(n.samplerate?n.samplerate:p)*1024,st=Math.ceil((u.endDTS*p+Se-Le)/Je),gt=Ca.getSilentFrame(n.manifestCodec||n.codec,n.channelCount);if(Bt.warn("[mp4-remuxer]: remux empty Audio"),!gt)return void Bt.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");const Tt=[];for(let Zt=0;Zt<st;Zt++){const rn=Le+Zt*Je;Tt.push({unit:gt,pts:rn,dts:rn})}return n.samples=Tt,this.remuxAudio(n,t,o,!1)}}function zo(h,n){let t;if(null===n)return h;for(t=n<h?-8589934592:8589934592;Math.abs(h-n)>4294967296;)h+=t;return h}function Id(h,n,t,o){const u=h.samples.length;if(!u)return;const p=h.inputTimeScale;for(let F=0;F<u;F++){const $=h.samples[F];$.pts=zo($.pts-t.baseTime*p/t.timescale,n*p)/p,$.dts=zo($.dts-o.baseTime*p/o.timescale,n*p)/p}const C=h.samples;return h.samples=[],{samples:C}}function Od(h,n,t){const o=h.samples.length;if(!o)return;const u=h.inputTimeScale;for(let C=0;C<o;C++){const F=h.samples[C];F.pts=zo(F.pts-9e4*t.baseTime/t.timescale,n*u)/u}h.samples.sort((C,F)=>C.pts-F.pts);const p=h.samples;return h.samples=[],{samples:p}}class xd{constructor(n,t,o,u){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=t,this.size=o,this.cts=u,this.flags=new wd(n)}}class wd{constructor(n){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=n?2:1,this.isNonSync=n?0:1}}function Nd(h,n){const t=null==h?void 0:h.codec;return t&&t.length>4?t:"hvc1"===t||"hev1"===t?"hvc1.1.6.L120.90":"av01"===t?"av01.0.04M.08":"avc1"===t||"video"===n?"avc1.42e01e":"mp4a.40.5"}try{Ls=self.performance.now.bind(self.performance)}catch(h){Bt.debug("Unable to use Performance API on this environment"),Ls="undefined"!=typeof self&&self.Date.now}const Ld=[{demux:class eh{constructor(n,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(n,t,o,u){const p=this.videoTrack=us("video",1),C=this.audioTrack=us("audio",1),F=this.txtTrack=us("text",1);if(this.id3Track=us("id3",1),this.timeOffset=0,null==n||!n.byteLength)return;const $=mu(n);if($.video){const{id:le,timescale:Se,codec:Le}=$.video;p.id=le,p.timescale=F.timescale=Se,p.codec=Le}if($.audio){const{id:le,timescale:Se,codec:Le}=$.audio;C.id=le,C.timescale=Se,C.codec=Le}F.id=wt.text,p.sampleDuration=0,p.duration=C.duration=u}resetContiguity(){this.remainderData=null}static probe(n){return Mr(n=n.length>16384?n.subarray(0,16384):n,["moof"]).length>0}demux(n,t){this.timeOffset=t;let o=n;const u=this.videoTrack,p=this.txtTrack;if(this.config.progressive){this.remainderData&&(o=Hi(this.remainderData,n));const F=function ps(h){const n={valid:null,remainder:null},t=Mr(h,["moof"]);if(!t)return n;if(t.length<2)return n.remainder=h,n;const o=t[t.length-1];return n.valid=Dr(h,0,o.byteOffset-8),n.remainder=Dr(h,o.byteOffset-8),n}(o);this.remainderData=F.remainder,u.samples=F.valid||new Uint8Array}else u.samples=o;const C=this.extractID3Track(u,t);return p.samples=Ua(t,u),{videoTrack:u,audioTrack:this.audioTrack,id3Track:C,textTrack:this.txtTrack}}flush(){const n=this.timeOffset,t=this.videoTrack,o=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const u=this.extractID3Track(t,this.timeOffset);return o.samples=Ua(n,t),{videoTrack:t,audioTrack:us(),id3Track:u,textTrack:us()}}extractID3Track(n,t){const o=this.id3Track;if(n.samples.length){const u=Mr(n.samples,["emsg"]);u&&u.forEach(p=>{const C=function Va(h){const n=h[0];let t="",o="",u=0,p=0,C=0,F=0,$=0,le=0;if(0===n){for(;"\0"!==vn(h.subarray(le,le+1));)t+=vn(h.subarray(le,le+1)),le+=1;for(t+=vn(h.subarray(le,le+1)),le+=1;"\0"!==vn(h.subarray(le,le+1));)o+=vn(h.subarray(le,le+1)),le+=1;o+=vn(h.subarray(le,le+1)),le+=1,u=Gn(h,12),p=Gn(h,16),F=Gn(h,20),$=Gn(h,24),le=28}else if(1===n){le+=4,u=Gn(h,le),le+=4;const Le=Gn(h,le);le+=4;const $e=Gn(h,le);for(le+=4,C=Qy(2,32)*Le+$e,Number.isSafeInteger(C)||(C=Number.MAX_SAFE_INTEGER,Bt.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),F=Gn(h,le),le+=4,$=Gn(h,le),le+=4;"\0"!==vn(h.subarray(le,le+1));)t+=vn(h.subarray(le,le+1)),le+=1;for(t+=vn(h.subarray(le,le+1)),le+=1;"\0"!==vn(h.subarray(le,le+1));)o+=vn(h.subarray(le,le+1)),le+=1;o+=vn(h.subarray(le,le+1)),le+=1}return{schemeIdUri:t,value:o,timeScale:u,presentationTime:C,presentationTimeDelta:p,eventDuration:F,id:$,payload:h.subarray(le,h.byteLength)}}(p);if(nl.test(C.schemeIdUri)){const F=ir(C.presentationTime)?C.presentationTime/C.timeScale:t+C.presentationTimeDelta/C.timeScale;let $=4294967295===C.eventDuration?Number.POSITIVE_INFINITY:C.eventDuration/C.timeScale;$<=.001&&($=Number.POSITIVE_INFINITY);const le=C.payload;o.samples.push({data:le,len:le.byteLength,dts:F,pts:F,type:To_emsg,duration:$})}})}return o}demuxSampleAes(n,t,o){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){}},remux:class Rd{constructor(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}destroy(){}resetTimeStamp(n){this.initPTS=n,this.lastEndTime=null}resetNextTimestamp(){this.lastEndTime=null}resetInitSegment(n,t,o,u){this.audioCodec=t,this.videoCodec=o,this.generateInitSegment(function lc(h,n){if(!h||!n)return h;const t=n.keyId;return t&&n.isCommonEncryption&&Mr(h,["moov","trak"]).forEach(u=>{const C=Mr(u,["mdia","minf","stbl","stsd"])[0].subarray(8);let F=Mr(C,["enca"]);const $=F.length>0;$||(F=Mr(C,["encv"])),F.forEach(le=>{Mr(le.subarray($?28:78),["sinf"]).forEach($e=>{const Je=Ks($e);if(Je){const st=Je.subarray(8,24);st.some(gt=>0!==gt)||(Bt.log(`[eme] Patching keyId in 'enc${$?"a":"v"}>sinf>>tenc' box: ${$r_hexDump(st)} -> ${$r_hexDump(t)}`),Je.set(t,8))}})})}),h}(n,u)),this.emitInitSegment=!0}generateInitSegment(n){let{audioCodec:t,videoCodec:o}=this;if(null==n||!n.byteLength)return this.initTracks=void 0,void(this.initData=void 0);const u=this.initData=mu(n);t||(t=Nd(u.audio,"audio")),o||(o=Nd(u.video,"video"));const p={};u.audio&&u.video?p.audiovideo={container:"video/mp4",codec:t+","+o,initSegment:n,id:"main"}:u.audio?p.audio={container:"audio/mp4",codec:t,initSegment:n,id:"audio"}:u.video?p.video={container:"video/mp4",codec:o,initSegment:n,id:"main"}:Bt.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=p}remux(n,t,o,u,p,C){var F,$;let{initPTS:le,lastEndTime:Se}=this;const Le={audio:void 0,video:void 0,text:u,id3:o,initSegment:void 0};ir(Se)||(Se=this.lastEndTime=p||0);const $e=t.samples;if(null==$e||!$e.length)return Le;const Je={initPTS:void 0,timescale:1};let st=this.initData;if(null!=(F=st)&&F.length||(this.generateInitSegment($e),st=this.initData),null==($=st)||!$.length)return Bt.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),Le;this.emitInitSegment&&(Je.tracks=this.initTracks,this.emitInitSegment=!1);const gt=function $i(h,n){let t=0,o=0,u=0;const p=Mr(h,["moof","traf"]);for(let C=0;C<p.length;C++){const F=p[C],$=Mr(F,["tfhd"])[0],Se=n[Gn($,4)];if(!Se)continue;const Le=Se.default,$e=Gn($,0)|(null==Le?void 0:Le.flags);let Je=null==Le?void 0:Le.duration;8&$e&&(Je=Gn($,2&$e?12:8));const st=Se.timescale||9e4,gt=Mr(F,["trun"]);for(let Tt=0;Tt<gt.length;Tt++)t=Uo(gt[Tt]),!t&&Je&&(t=Je*Gn(gt[Tt],4)),"video"===Se.type?o+=t/st:"audio"===Se.type&&(u+=t/st)}if(0===o&&0===u){let C=0;const F=Mr(h,["sidx"]);for(let $=0;$<F.length;$++){const le=sa(F[$]);null!=le&&le.references&&(C+=le.references.reduce((Se,Le)=>Se+Le.info.duration||0,0))}return C}return o||u}($e,st),Tt=function aa(h,n){return Mr(n,["moof","traf"]).reduce((t,o)=>{const u=Mr(o,["tfdt"])[0],p=u[0],C=Mr(o,["tfhd"]).reduce((F,$)=>{const le=Gn($,4),Se=h[le];if(Se){let Le=Gn(u,4);if(1===p){if(Le===no)return Bt.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),F;Le*=no+1,Le+=Gn(u,8)}const Je=Le/(Se.timescale||9e4);if(isFinite(Je)&&(null===F||Je<F))return Je}return F},null);return null!==C&&isFinite(C)&&(null===t||C<t)?C:t},null)}(st,$e),Zt=null===Tt?p:Tt;(function ah(h,n,t,o){if(null===h)return!0;const u=Math.max(o,1);return Math.abs(n-h.baseTime/h.timescale-t)>u}(le,Zt,p,gt)||Je.timescale!==le.timescale&&C)&&(Je.initPTS=Zt-p,le&&1===le.timescale&&Bt.warn("Adjusting initPTS by "+(Je.initPTS-le.baseTime)),this.initPTS=le={baseTime:Je.initPTS,timescale:1});const rn=n?Zt-le.baseTime/le.timescale:Se,tn=rn+gt;(function vu(h,n,t){Mr(n,["moof","traf"]).forEach(o=>{Mr(o,["tfhd"]).forEach(u=>{const p=Gn(u,4),C=h[p];if(!C)return;const F=C.timescale||9e4;Mr(o,["tfdt"]).forEach($=>{const le=$[0];let Se=Gn($,4);if(0===le)Se-=t*F,Se=Math.max(Se,0),Ni($,4,Se);else{Se*=Math.pow(2,32),Se+=Gn($,8),Se-=t*F,Se=Math.max(Se,0);const Le=Math.floor(Se/(no+1)),$e=Math.floor(Se%(no+1));Ni($,4,Le),Ni($,8,$e)}})})})})(st,$e,le.baseTime/le.timescale),gt>0?this.lastEndTime=tn:(Bt.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const Mn=!!st.audio,pn=!!st.video;let Kn="";Mn&&(Kn+="audio"),pn&&(Kn+="video");const xn={data1:$e,startPTS:rn,startDTS:rn,endPTS:tn,endDTS:tn,type:Kn,hasAudio:Mn,hasVideo:pn,nb:1,dropped:0};return Le.audio="audio"===xn.type?xn:void 0,Le.video="audio"!==xn.type?xn:void 0,Le.initSegment=Je,Le.id3=Id(o,p,le,le),u.samples.length&&(Le.text=Od(u,p,le)),Le}}},{demux:Ns,remux:xu},{demux:class Dd extends pc{constructor(n,t){super(),this.observer=void 0,this.config=void 0,this.observer=n,this.config=t}resetInitSegment(n,t,o,u){super.resetInitSegment(n,t,o,u),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:u,inputTimeScale:9e4,dropped:0}}static probe(n){if(!n)return!1;let o=(ai(n,0)||[]).length;for(let u=n.length;o<u;o++)if(bd(n,o))return Bt.log("ADTS sync word found !"),!0;return!1}canParse(n,t){return function Fl(h,n){return function Eg(h,n){return n+5<h.length}(h,n)&&mc(h,n)&&Pu(h,n)<=h.length-n}(n,t)}appendFrame(n,t,o){Cd(n,this.observer,t,o,n.manifestCodec);const u=di(n,t,o,this.basePTS,this.frameIndex);if(u&&0===u.missing)return u}},remux:xu},{demux:class Pd extends pc{resetInitSegment(n,t,o,u){super.resetInitSegment(n,t,o,u),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:u,inputTimeScale:9e4,dropped:0}}static probe(n){if(!n)return!1;let o=(ai(n,0)||[]).length;for(let u=n.length;o<u;o++)if(Ec(n,o))return Bt.log("MPEG Audio sync word found !"),!0;return!1}canParse(n,t){return function th(h,n){return Rs(h,n)&&4<=h.length-n}(n,t)}appendFrame(n,t,o){if(null!==this.basePTS)return _c(n,t,o,this.basePTS,this.frameIndex)}},remux:xu}];class Fd{constructor(n,t,o,u,p){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=n,this.typeSupported=t,this.config=o,this.vendor=u,this.id=p}configure(n){this.transmuxConfig=n,this.decrypter&&this.decrypter.reset()}push(n,t,o,u){const p=o.transmuxing;p.executeStart=Ls();let C=new Uint8Array(n);const{currentTransmuxState:F,transmuxConfig:$}=this;u&&(this.currentTransmuxState=u);const{contiguous:le,discontinuity:Se,trackSwitch:Le,accurateTimeOffset:$e,timeOffset:Je,initSegmentChange:st}=u||F,{audioCodec:gt,videoCodec:Tt,defaultInitPts:Zt,duration:rn,initSegmentData:tn}=$,Mn=function Vl(h,n){let t=null;return h.byteLength>0&&null!=n&&null!=n.key&&null!==n.iv&&null!=n.method&&(t=n),t}(C,t);if(Mn&&"AES-128"===Mn.method){const Wn=this.getDecrypter();if(!Wn.isSync())return this.decryptionPromise=Wn.webCryptoDecrypt(C,Mn.key.buffer,Mn.iv.buffer).then(er=>{const Sn=this.push(er,null,o);return this.decryptionPromise=null,Sn}),this.decryptionPromise;{let er=Wn.softwareDecrypt(C,Mn.key.buffer,Mn.iv.buffer);if(o.part>-1&&(er=Wn.flush()),!er)return p.executeEnd=Ls(),il(o);C=new Uint8Array(er)}}const pn=this.needsProbing(Se,Le);if(pn){const Wn=this.configureTransmuxer(C);if(Wn)return Bt.warn(`[transmuxer] ${Wn.message}`),this.observer.emit(it.ERROR,it.ERROR,{type:rr.MEDIA_ERROR,details:hn.FRAG_PARSING_ERROR,fatal:!1,error:Wn,reason:Wn.message}),p.executeEnd=Ls(),il(o)}(Se||Le||st||pn)&&this.resetInitSegment(tn,gt,Tt,rn,t),(Se||st||pn)&&this.resetInitialTimestamp(Zt),le||this.resetContiguity();const Kn=this.transmux(C,Mn,Je,$e,o),xn=this.currentTransmuxState;return xn.contiguous=!0,xn.discontinuity=!1,xn.trackSwitch=!1,p.executeEnd=Ls(),Kn}flush(n){const t=n.transmuxing;t.executeStart=Ls();const{decrypter:o,currentTransmuxState:u,decryptionPromise:p}=this;if(p)return p.then(()=>this.flush(n));const C=[],{timeOffset:F}=u;if(o){const Le=o.flush();Le&&C.push(this.push(Le,null,n))}const{demuxer:$,remuxer:le}=this;if(!$||!le)return t.executeEnd=Ls(),[il(n)];const Se=$.flush(F);return Vo(Se)?Se.then(Le=>(this.flushRemux(C,Le,n),C)):(this.flushRemux(C,Se,n),C)}flushRemux(n,t,o){const{audioTrack:u,videoTrack:p,id3Track:C,textTrack:F}=t,{accurateTimeOffset:$,timeOffset:le}=this.currentTransmuxState;Bt.log(`[transmuxer.ts]: Flushed fragment ${o.sn}${o.part>-1?" p: "+o.part:""} of level ${o.level}`);const Se=this.remuxer.remux(u,p,C,F,le,$,!0,this.id);n.push({remuxResult:Se,chunkMeta:o}),o.transmuxing.executeEnd=Ls()}resetInitialTimestamp(n){const{demuxer:t,remuxer:o}=this;!t||!o||(t.resetTimeStamp(n),o.resetTimeStamp(n))}resetContiguity(){const{demuxer:n,remuxer:t}=this;!n||!t||(n.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(n,t,o,u,p){const{demuxer:C,remuxer:F}=this;!C||!F||(C.resetInitSegment(n,t,o,u),F.resetInitSegment(n,t,o,p))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(n,t,o,u,p){let C;return C=t&&"SAMPLE-AES"===t.method?this.transmuxSampleAes(n,t,o,u,p):this.transmuxUnencrypted(n,o,u,p),C}transmuxUnencrypted(n,t,o,u){const{audioTrack:p,videoTrack:C,id3Track:F,textTrack:$}=this.demuxer.demux(n,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(p,C,F,$,t,o,!1,this.id),chunkMeta:u}}transmuxSampleAes(n,t,o,u,p){return this.demuxer.demuxSampleAes(n,t,o).then(C=>({remuxResult:this.remuxer.remux(C.audioTrack,C.videoTrack,C.id3Track,C.textTrack,o,u,!1,this.id),chunkMeta:p}))}configureTransmuxer(n){const{config:t,observer:o,typeSupported:u,vendor:p}=this;let C;for(let Le=0,$e=Ld.length;Le<$e;Le++)if(Ld[Le].demux.probe(n)){C=Ld[Le];break}if(!C)return new Error("Failed to find demuxer by probing fragment data");const F=this.demuxer,$=this.remuxer,le=C.remux,Se=C.demux;(!$||!($ instanceof le))&&(this.remuxer=new le(o,t,u,p)),(!F||!(F instanceof Se))&&(this.demuxer=new Se(o,t,u),this.probe=Se.probe)}needsProbing(n,t){return!this.demuxer||!this.remuxer||n||t}getDecrypter(){let n=this.decrypter;return n||(n=this.decrypter=new Du(this.config)),n}}const il=h=>({remuxResult:{},chunkMeta:h});function Vo(h){return"then"in h&&h.then instanceof Function}class uo{constructor(n,t,o,u,p){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=n,this.videoCodec=t,this.initSegmentData=o,this.duration=u,this.defaultInitPts=p||null}}class vi{constructor(n,t,o,u,p,C){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=n,this.contiguous=t,this.accurateTimeOffset=o,this.trackSwitch=u,this.timeOffset=p,this.initSegmentChange=C}}var ol={exports:{}};!function(h){var n=Object.prototype.hasOwnProperty,t="~";function o(){}function u($,le,Se){this.fn=$,this.context=le,this.once=Se||!1}function p($,le,Se,Le,$e){if("function"!=typeof Se)throw new TypeError("The listener must be a function");var Je=new u(Se,Le||$,$e),st=t?t+le:le;return $._events[st]?$._events[st].fn?$._events[st]=[$._events[st],Je]:$._events[st].push(Je):($._events[st]=Je,$._eventsCount++),$}function C($,le){0==--$._eventsCount?$._events=new o:delete $._events[le]}function F(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(t=!1)),F.prototype.eventNames=function(){var Se,Le,le=[];if(0===this._eventsCount)return le;for(Le in Se=this._events)n.call(Se,Le)&&le.push(t?Le.slice(1):Le);return Object.getOwnPropertySymbols?le.concat(Object.getOwnPropertySymbols(Se)):le},F.prototype.listeners=function(le){var Le=this._events[t?t+le:le];if(!Le)return[];if(Le.fn)return[Le.fn];for(var $e=0,Je=Le.length,st=new Array(Je);$e<Je;$e++)st[$e]=Le[$e].fn;return st},F.prototype.listenerCount=function(le){var Le=this._events[t?t+le:le];return Le?Le.fn?1:Le.length:0},F.prototype.emit=function(le,Se,Le,$e,Je,st){var gt=t?t+le:le;if(!this._events[gt])return!1;var rn,tn,Tt=this._events[gt],Zt=arguments.length;if(Tt.fn){switch(Tt.once&&this.removeListener(le,Tt.fn,void 0,!0),Zt){case 1:return Tt.fn.call(Tt.context),!0;case 2:return Tt.fn.call(Tt.context,Se),!0;case 3:return Tt.fn.call(Tt.context,Se,Le),!0;case 4:return Tt.fn.call(Tt.context,Se,Le,$e),!0;case 5:return Tt.fn.call(Tt.context,Se,Le,$e,Je),!0;case 6:return Tt.fn.call(Tt.context,Se,Le,$e,Je,st),!0}for(tn=1,rn=new Array(Zt-1);tn<Zt;tn++)rn[tn-1]=arguments[tn];Tt.fn.apply(Tt.context,rn)}else{var pn,Mn=Tt.length;for(tn=0;tn<Mn;tn++)switch(Tt[tn].once&&this.removeListener(le,Tt[tn].fn,void 0,!0),Zt){case 1:Tt[tn].fn.call(Tt[tn].context);break;case 2:Tt[tn].fn.call(Tt[tn].context,Se);break;case 3:Tt[tn].fn.call(Tt[tn].context,Se,Le);break;case 4:Tt[tn].fn.call(Tt[tn].context,Se,Le,$e);break;default:if(!rn)for(pn=1,rn=new Array(Zt-1);pn<Zt;pn++)rn[pn-1]=arguments[pn];Tt[tn].fn.apply(Tt[tn].context,rn)}}return!0},F.prototype.on=function(le,Se,Le){return p(this,le,Se,Le,!1)},F.prototype.once=function(le,Se,Le){return p(this,le,Se,Le,!0)},F.prototype.removeListener=function(le,Se,Le,$e){var Je=t?t+le:le;if(!this._events[Je])return this;if(!Se)return C(this,Je),this;var st=this._events[Je];if(st.fn)st.fn===Se&&(!$e||st.once)&&(!Le||st.context===Le)&&C(this,Je);else{for(var gt=0,Tt=[],Zt=st.length;gt<Zt;gt++)(st[gt].fn!==Se||$e&&!st[gt].once||Le&&st[gt].context!==Le)&&Tt.push(st[gt]);Tt.length?this._events[Je]=1===Tt.length?Tt[0]:Tt:C(this,Je)}return this},F.prototype.removeAllListeners=function(le){var Se;return le?this._events[Se=t?t+le:le]&&C(this,Se):(this._events=new o,this._eventsCount=0),this},F.prototype.off=F.prototype.removeListener,F.prototype.addListener=F.prototype.on,F.prefixed=t,F.EventEmitter=F,h.exports=F}(ol);var Hl=vo(ol.exports);const Cc=Ai()||{isTypeSupported:()=>!1};class kd{constructor(n,t,o,u){this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;const p=n.config;this.hls=n,this.id=t,this.useWorker=!!p.enableWorker,this.onTransmuxComplete=o,this.onFlush=u;const C=(le,Se)=>{(Se=Se||{}).frag=this.frag,Se.id=this.id,le===it.ERROR&&(this.error=Se.error),this.hls.trigger(le,Se)};this.observer=new Hl,this.observer.on(it.FRAG_DECRYPTED,C),this.observer.on(it.ERROR,C);const F={mp4:Cc.isTypeSupported("video/mp4"),mpeg:Cc.isTypeSupported("audio/mpeg"),mp3:Cc.isTypeSupported('audio/mp4; codecs="mp3"')},$=navigator.vendor;if(this.useWorker&&"undefined"!=typeof Worker&&(p.workerPath||function Jf(){return"function"==typeof __HLS_WORKER_BUNDLE__}()))try{p.workerPath?(Bt.log(`loading Web Worker ${p.workerPath} for "${t}"`),this.workerContext=function Xf(h){const n=new self.URL(h,self.location.href).href;return{worker:new self.Worker(n),scriptURL:n}}(p.workerPath)):(Bt.log(`injecting Web Worker for "${t}"`),this.workerContext=function Qf(){const h=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),n=self.URL.createObjectURL(h);return{worker:new self.Worker(n),objectURL:n}}()),this.onwmsg=Le=>this.onWorkerMessage(Le);const{worker:Se}=this.workerContext;Se.addEventListener("message",this.onwmsg),Se.onerror=Le=>{const $e=new Error(`${Le.message}  (${Le.filename}:${Le.lineno})`);p.enableWorker=!1,Bt.warn(`Error in "${t}" Web Worker, fallback to inline`),this.hls.trigger(it.ERROR,{type:rr.OTHER_ERROR,details:hn.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:$e})},Se.postMessage({cmd:"init",typeSupported:F,vendor:$,id:t,config:JSON.stringify(p)})}catch(Se){Bt.warn(`Error setting up "${t}" Web Worker, fallback to inline`,Se),this.resetWorker(),this.error=null,this.transmuxer=new Fd(this.observer,F,p,$,t)}else this.transmuxer=new Fd(this.observer,F,p,$,t)}resetWorker(){if(this.workerContext){const{worker:n,objectURL:t}=this.workerContext;t&&self.URL.revokeObjectURL(t),n.removeEventListener("message",this.onwmsg),n.onerror=null,n.terminate(),this.workerContext=null}}destroy(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{const t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}const n=this.observer;n&&n.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null}push(n,t,o,u,p,C,F,$,le,Se){var Le,$e;le.transmuxing.start=self.performance.now();const{transmuxer:Je}=this,st=C?C.start:p.start,gt=p.decryptdata,Tt=this.frag,Zt=!(Tt&&p.cc===Tt.cc),rn=!(Tt&&le.level===Tt.level),tn=Tt?le.sn-Tt.sn:-1,Mn=this.part?le.part-this.part.index:-1,Kn=!rn&&(1===tn||0===tn&&(1===Mn||0===tn&&le.id>1&&le.id===(null==Tt?void 0:Tt.stats.chunkCount)&&Mn<=0)),xn=self.performance.now();(rn||tn||0===p.stats.parsing.start)&&(p.stats.parsing.start=xn),C&&(Mn||!Kn)&&(C.stats.parsing.start=xn);const Wn=!(Tt&&(null==(Le=p.initSegment)?void 0:Le.url)===(null==($e=Tt.initSegment)?void 0:$e.url)),er=new vi(Zt,Kn,$,rn,st,Wn);if(!Kn||Zt||Wn){Bt.log(`[transmuxer-interface, ${p.type}]: Starting new transmux session for sn: ${le.sn} p: ${le.part} level: ${le.level} id: ${le.id}\n        discontinuity: ${Zt}\n        trackSwitch: ${rn}\n        contiguous: ${Kn}\n        accurateTimeOffset: ${$}\n        timeOffset: ${st}\n        initSegmentChange: ${Wn}`);const Sn=new uo(o,u,t,F,Se);this.configureTransmuxer(Sn)}if(this.frag=p,this.part=C,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:n,decryptdata:gt,chunkMeta:le,state:er},n instanceof ArrayBuffer?[n]:[]);else if(Je){const Sn=Je.push(n,gt,le,er);Vo(Sn)?(Je.async=!0,Sn.then(gr=>{this.handleTransmuxComplete(gr)}).catch(gr=>{this.transmuxerError(gr,le,"transmuxer-interface push error")})):(Je.async=!1,this.handleTransmuxComplete(Sn))}}flush(n){n.transmuxing.start=self.performance.now();const{transmuxer:t}=this;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:n});else if(t){let o=t.flush(n);Vo(o)||t.async?(Vo(o)||(o=Promise.resolve(o)),o.then(p=>{this.handleFlushResult(p,n)}).catch(p=>{this.transmuxerError(p,n,"transmuxer-interface flush error")})):this.handleFlushResult(o,n)}}transmuxerError(n,t,o){!this.hls||(this.error=n,this.hls.trigger(it.ERROR,{type:rr.MEDIA_ERROR,details:hn.FRAG_PARSING_ERROR,chunkMeta:t,fatal:!1,error:n,err:n,reason:o}))}handleFlushResult(n,t){n.forEach(o=>{this.handleTransmuxComplete(o)}),this.onFlush(t)}onWorkerMessage(n){const t=n.data,o=this.hls;switch(t.event){case"init":{var u;const p=null==(u=this.workerContext)?void 0:u.objectURL;p&&self.URL.revokeObjectURL(p);break}case"transmuxComplete":this.handleTransmuxComplete(t.data);break;case"flush":this.onFlush(t.data);break;case"workerLog":Bt[t.data.logType]&&Bt[t.data.logType](t.data.message);break;default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,o.trigger(t.event,t.data)}}configureTransmuxer(n){const{transmuxer:t}=this;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:n}):t&&t.configure(n)}handleTransmuxComplete(n){n.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(n)}}class Bd{constructor(n,t,o,u){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=n,this.media=t,this.fragmentTracker=o,this.hls=u}destroy(){this.media=null,this.hls=this.fragmentTracker=null}poll(n,t){const{config:o,media:u,stalled:p}=this;if(null===u)return;const{currentTime:C,seeking:F}=u,$=this.seeking&&!F,le=!this.seeking&&F;if(this.seeking=F,C!==n){if(this.moved=!0,null!==p){if(this.stallReported){const Zt=self.performance.now()-p;Bt.warn(`playback not stuck anymore @${C}, after ${Math.round(Zt)}ms`),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}return}if(le||$)return void(this.stalled=null);if(u.paused&&!F||u.ended||0===u.playbackRate||!ni.getBuffered(u).length)return;const Se=ni.bufferInfo(u,C,0),$e=Se.nextStart||0;if(!(Se.len>0||$e))return;if(F){const Zt=Se.len>2,rn=!$e||t&&t.start<=C||$e-C>2&&!this.fragmentTracker.getPartialFragment(C);if(Zt||rn)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var Je;const Zt=Math.max($e,Se.start||0)-C,rn=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,Mn=(null==rn||null==(Je=rn.details)?void 0:Je.live)?2*rn.details.targetduration:2,pn=this.fragmentTracker.getPartialFragment(C);if(Zt>0&&(Zt<=Mn||pn))return void this._trySkipBufferHole(pn)}const st=self.performance.now();if(null===p)return void(this.stalled=st);const gt=st-p;if(!F&&gt>=250&&(this._reportStall(Se),!this.media))return;const Tt=ni.bufferInfo(u,C,o.maxBufferHole);this._tryFixBufferStall(Tt,gt)}_tryFixBufferStall(n,t){const{config:o,fragmentTracker:u,media:p}=this;if(null===p)return;const C=p.currentTime,F=u.getPartialFragment(C);F&&(this._trySkipBufferHole(F)||!this.media)||(n.len>o.maxBufferHole||n.nextStart&&n.nextStart-C<o.maxBufferHole)&&t>1e3*o.highBufferWatchdogPeriod&&(Bt.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}_reportStall(n){const{hls:t,media:o,stallReported:u}=this;if(!u&&o){this.stallReported=!0;const p=new Error(`Playback stalling at @${o.currentTime} due to low buffer (${JSON.stringify(n)})`);Bt.warn(p.message),t.trigger(it.ERROR,{type:rr.MEDIA_ERROR,details:hn.BUFFER_STALLED_ERROR,fatal:!1,error:p,buffer:n.len})}}_trySkipBufferHole(n){const{config:t,hls:o,media:u}=this;if(null===u)return 0;const p=u.currentTime,C=ni.bufferInfo(u,p,0),F=p<C.start?C.start:C.nextStart;if(F){const $=C.len<=t.maxBufferHole,le=C.len>0&&C.len<1&&u.readyState<3,Se=F-p;if(Se>0&&($||le)){if(Se>t.maxBufferHole){const{fragmentTracker:$e}=this;let Je=!1;if(0===p){const st=$e.getAppendedFrag(0,"main");st&&F<st.end&&(Je=!0)}if(!Je){const st=n||$e.getAppendedFrag(p,"main");if(st){let gt=!1,Tt=st.end;for(;Tt<F;){const Zt=$e.getPartialFragment(Tt);if(!Zt){gt=!0;break}Tt+=Zt.duration}if(gt)return 0}}}const Le=Math.max(F+.05,p+.1);if(Bt.warn(`skipping hole, adjusting currentTime from ${p} to ${Le}`),this.moved=!0,this.stalled=null,u.currentTime=Le,n&&!n.gap){const $e=new Error(`fragment loaded with buffer holes, seeking from ${p} to ${Le}`);o.trigger(it.ERROR,{type:rr.MEDIA_ERROR,details:hn.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:$e,reason:$e.message,frag:n})}return Le}}return 0}_tryNudgeBuffer(){const{config:n,hls:t,media:o,nudgeRetry:u}=this;if(null===o)return;const p=o.currentTime;if(this.nudgeRetry++,u<n.nudgeMaxRetry){const C=p+(u+1)*n.nudgeOffset,F=new Error(`Nudging 'currentTime' from ${p} to ${C}`);Bt.warn(F.message),o.currentTime=C,t.trigger(it.ERROR,{type:rr.MEDIA_ERROR,details:hn.BUFFER_NUDGE_ON_STALL,error:F,fatal:!1})}else{const C=new Error(`Playhead still not moving while enough data buffered @${p} after ${n.nudgeMaxRetry} nudges`);Bt.error(C.message),t.trigger(it.ERROR,{type:rr.MEDIA_ERROR,details:hn.BUFFER_STALLED_ERROR,error:C,fatal:!0})}}}class Ud extends Ed{constructor(n,t,o){super(n,t,o,"[stream-controller]","main"),this.audioCodecSwap=!1,this.gapController=null,this.level=-1,this._forceStartLoad=!1,this.altAudio=!1,this.audioOnly=!1,this.fragPlaying=null,this.onvplaying=null,this.onvseeked=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this._registerListeners()}_registerListeners(){const{hls:n}=this;n.on(it.MEDIA_ATTACHED,this.onMediaAttached,this),n.on(it.MEDIA_DETACHING,this.onMediaDetaching,this),n.on(it.MANIFEST_LOADING,this.onManifestLoading,this),n.on(it.MANIFEST_PARSED,this.onManifestParsed,this),n.on(it.LEVEL_LOADING,this.onLevelLoading,this),n.on(it.LEVEL_LOADED,this.onLevelLoaded,this),n.on(it.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),n.on(it.ERROR,this.onError,this),n.on(it.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),n.on(it.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),n.on(it.BUFFER_CREATED,this.onBufferCreated,this),n.on(it.BUFFER_FLUSHED,this.onBufferFlushed,this),n.on(it.LEVELS_UPDATED,this.onLevelsUpdated,this),n.on(it.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:n}=this;n.off(it.MEDIA_ATTACHED,this.onMediaAttached,this),n.off(it.MEDIA_DETACHING,this.onMediaDetaching,this),n.off(it.MANIFEST_LOADING,this.onManifestLoading,this),n.off(it.MANIFEST_PARSED,this.onManifestParsed,this),n.off(it.LEVEL_LOADED,this.onLevelLoaded,this),n.off(it.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),n.off(it.ERROR,this.onError,this),n.off(it.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),n.off(it.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),n.off(it.BUFFER_CREATED,this.onBufferCreated,this),n.off(it.BUFFER_FLUSHED,this.onBufferFlushed,this),n.off(it.LEVELS_UPDATED,this.onLevelsUpdated,this),n.off(it.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this._unregisterListeners(),this.onMediaDetaching()}startLoad(n){if(this.levels){const{lastCurrentTime:t,hls:o}=this;if(this.stopLoad(),this.setInterval(100),this.level=-1,!this.startFragRequested){let u=o.startLevel;-1===u&&(o.config.testBandwidth&&this.levels.length>1?(u=0,this.bitrateTest=!0):u=o.nextAutoLevel),this.level=o.nextLoadLevel=u,this.loadedmetadata=!1}t>0&&-1===n&&(this.log(`Override startPosition with lastCurrentTime @${t.toFixed(3)}`),n=t),this.state="IDLE",this.nextLoadPosition=this.startPosition=this.lastCurrentTime=n,this.tick()}else this._forceStartLoad=!0,this.state="STOPPED"}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case"WAITING_LEVEL":{var n;const{levels:o,level:u}=this,p=null==o||null==(n=o[u])?void 0:n.details;if(p&&(!p.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(p))break;this.state="IDLE";break}if(this.hls.nextLoadLevel!==this.level){this.state="IDLE";break}break}case"FRAG_LOADING_WAITING_RETRY":{var t;const o=self.performance.now(),u=this.retryDate;(!u||o>=u||null!=(t=this.media)&&t.seeking)&&(this.resetStartWhenNotLoaded(this.level),this.state="IDLE")}}"IDLE"===this.state&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){super.onTickEnd(),this.checkBuffer(),this.checkFragmentChanged()}doTickIdle(){const{hls:n,levelLastLoaded:t,levels:o,media:u}=this,{config:p,nextLoadLevel:C}=n;if(null===t||!u&&(this.startFragRequested||!p.startFragPrefetch)||this.altAudio&&this.audioOnly||null==o||!o[C])return;const F=o[C],$=this.getMainFwdBufferInfo();if(null===$)return;const le=this.getLevelDetails();if(le&&this._streamEnded($,le)){const Tt={};return this.altAudio&&(Tt.type="video"),this.hls.trigger(it.BUFFER_EOS,Tt),void(this.state="ENDED")}n.loadLevel!==C&&-1===n.manualLevel&&this.log(`Adapting to level ${C} from level ${this.level}`),this.level=n.nextLoadLevel=C;const Se=F.details;if(!Se||"WAITING_LEVEL"===this.state||Se.live&&this.levelLastLoaded!==C)return this.level=C,void(this.state="WAITING_LEVEL");const Le=$.len,$e=this.getMaxBufferLength(F.maxBitrate);if(Le>=$e)return;this.backtrackFragment&&this.backtrackFragment.start>$.end&&(this.backtrackFragment=null);const Je=this.backtrackFragment?this.backtrackFragment.start:$.end;let st=this.getNextFragment(Je,Se);if(this.couldBacktrack&&!this.fragPrevious&&st&&"initSegment"!==st.sn&&"OK"!==this.fragmentTracker.getState(st)){var gt;const Zt=(null!=(gt=this.backtrackFragment)?gt:st).sn-Se.startSN,rn=Se.fragments[Zt-1];rn&&st.cc===rn.cc&&(st=rn,this.fragmentTracker.removeFragment(rn))}else this.backtrackFragment&&$.len&&(this.backtrackFragment=null);if(st&&this.isLoopLoading(st,Je)){if(!st.gap){const Zt=this.audioOnly&&!this.altAudio?"audio":"video",rn=("video"===Zt?this.videoBuffer:this.mediaBuffer)||this.media;rn&&this.afterBufferFlushed(rn,Zt,"main")}st=this.getNextFragmentLoopLoading(st,Se,$,"main",$e)}!st||(st.initSegment&&!st.initSegment.data&&!this.bitrateTest&&(st=st.initSegment),this.loadFragment(st,F,Je))}loadFragment(n,t,o){const u=this.fragmentTracker.getState(n);this.fragCurrent=n,"NOT_LOADED"===u||"PARTIAL"===u?"initSegment"===n.sn?this._loadInitSegment(n,t):this.bitrateTest?(this.log(`Fragment ${n.sn} of level ${n.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(n,t)):(this.startFragRequested=!0,super.loadFragment(n,t,o)):this.clearTrackerIfNeeded(n)}getBufferedFrag(n){return this.fragmentTracker.getBufferedFrag(n,"main")}followingBufferedFrag(n){return n?this.getBufferedFrag(n.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:n,media:t}=this;if(null!=t&&t.readyState){let o;const u=this.getAppendedFrag(t.currentTime);u&&u.start>1&&this.flushMainBuffer(0,u.start-1);const p=this.getLevelDetails();if(null!=p&&p.live){const F=this.getMainFwdBufferInfo();if(!F||F.len<2*p.targetduration)return}if(!t.paused&&n){const $=n[this.hls.nextLoadLevel],le=this.fragLastKbps;o=le&&this.fragCurrent?this.fragCurrent.duration*$.maxBitrate/(1e3*le)+1:0}else o=0;const C=this.getBufferedFrag(t.currentTime+o);if(C){const F=this.followingBufferedFrag(C);if(F){this.abortCurrentFrag();const le=F.duration,Se=Math.max(C.end,(F.maxStartPTS?F.maxStartPTS:F.start)+Math.min(Math.max(le-this.config.maxFragLookUpTolerance,.5*le),.75*le));this.flushMainBuffer(Se,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const n=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,n&&(n.abortRequests(),this.fragmentTracker.removeFragment(n)),this.state){case"KEY_LOADING":case"FRAG_LOADING":case"FRAG_LOADING_WAITING_RETRY":case"PARSING":case"PARSED":this.state="IDLE"}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(n,t){super.flushMainBuffer(n,t,this.altAudio?"video":null)}onMediaAttached(n,t){super.onMediaAttached(n,t);const o=t.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),o.addEventListener("playing",this.onvplaying),o.addEventListener("seeked",this.onvseeked),this.gapController=new Bd(this.config,o,this.fragmentTracker,this.hls)}onMediaDetaching(){const{media:n}=this;n&&this.onvplaying&&this.onvseeked&&(n.removeEventListener("playing",this.onvplaying),n.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),super.onMediaDetaching()}onMediaPlaying(){this.tick()}onMediaSeeked(){const n=this.media,t=n?n.currentTime:null;ir(t)&&this.log(`Media seeked to ${t.toFixed(3)}`);const o=this.getMainFwdBufferInfo();null!==o&&0!==o.len?this.tick():this.warn(`Main forward buffer length on "seeked" event ${o?o.len:"empty"})`)}onManifestLoading(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(it.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=0,this.levels=this.fragPlaying=this.backtrackFragment=null,this.altAudio=this.audioOnly=!1}onManifestParsed(n,t){let p,o=!1,u=!1;t.levels.forEach(C=>{p=C.audioCodec,p&&(-1!==p.indexOf("mp4a.40.2")&&(o=!0),-1!==p.indexOf("mp4a.40.5")&&(u=!0))}),this.audioCodecSwitch=o&&u&&!function Nl(){var h;const n=el();return"function"==typeof(null==n||null==(h=n.prototype)?void 0:h.changeType)}(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(n,t){const{levels:o}=this;if(!o||"IDLE"!==this.state)return;const u=o[t.level];(!u.details||u.details.live&&this.levelLastLoaded!==t.level||this.waitForCdnTuneIn(u.details))&&(this.state="WAITING_LEVEL")}onLevelLoaded(n,t){var o;const{levels:u}=this,p=t.level,C=t.details,F=C.totalduration;if(!u)return void this.warn(`Levels were reset while loading level ${p}`);this.log(`Level ${p} loaded [${C.startSN},${C.endSN}]${C.lastPartSn?`[part-${C.lastPartSn}-${C.lastPartIndex}]`:""}, cc [${C.startCC}, ${C.endCC}] duration:${F}`);const $=u[p],le=this.fragCurrent;le&&("FRAG_LOADING"===this.state||"FRAG_LOADING_WAITING_RETRY"===this.state)&&(le.level!==t.level||le.urlId!==$.urlId)&&le.loader&&this.abortCurrentFrag();let Se=0;if(C.live||null!=(o=$.details)&&o.live){if(C.fragments[0]||(C.deltaUpdateFailed=!0),C.deltaUpdateFailed)return;Se=this.alignPlaylists(C,$.details)}if($.details=C,this.levelLastLoaded=p,this.hls.trigger(it.LEVEL_UPDATED,{details:C,level:p}),"WAITING_LEVEL"===this.state){if(this.waitForCdnTuneIn(C))return;this.state="IDLE"}this.startFragRequested?C.live&&this.synchronizeToLiveEdge(C):this.setStartPosition(C,Se),this.tick()}_handleFragmentLoadProgress(n){var t;const{frag:o,part:u,payload:p}=n,{levels:C}=this;if(!C)return void this.warn(`Levels were reset while fragment load was in progress. Fragment ${o.sn} of level ${o.level} will not be buffered`);const F=C[o.level],$=F.details;if(!$)return this.warn(`Dropping fragment ${o.sn} of level ${o.level} after level details were reset`),void this.fragmentTracker.removeFragment(o);const le=F.videoCodec,Se=$.PTSKnown||!$.live,Le=null==(t=o.initSegment)?void 0:t.data,$e=this._getAudioCodec(F),Je=this.transmuxer=this.transmuxer||new kd(this.hls,"main",this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),st=u?u.index:-1,Tt=new wl(o.level,o.sn,o.stats.chunkCount,p.byteLength,st,-1!==st);Je.push(p,Le,$e,le,o,u,$.totalduration,Se,Tt,this.initPTS[o.cc])}onAudioTrackSwitching(n,t){const o=this.altAudio;if(!t.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const C=this.fragCurrent;C&&(this.log("Switching to main audio track, cancel main fragment load"),C.abortRequests(),this.fragmentTracker.removeFragment(C)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();const p=this.hls;o&&(p.trigger(it.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),p.trigger(it.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(n,t){const u=!!this.hls.audioTracks[t.id].url;if(u){const p=this.videoBuffer;p&&this.mediaBuffer!==p&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=p)}this.altAudio=u,this.tick()}onBufferCreated(n,t){const o=t.tracks;let u,p,C=!1;for(const F in o){const $=o[F];if("main"===$.id){if(p=F,u=$,"video"===F){const le=o[F];le&&(this.videoBuffer=le.buffer)}}else C=!0}C&&u?(this.log(`Alternate track found, use ${p}.buffered to schedule main fragment loading`),this.mediaBuffer=u.buffer):this.mediaBuffer=this.media}onFragBuffered(n,t){const{frag:o,part:u}=t;if(o&&"main"!==o.type)return;if(this.fragContextChanged(o))return this.warn(`Fragment ${o.sn}${u?" p: "+u.index:""} of level ${o.level} finished buffering, but was aborted. state: ${this.state}`),void("PARSED"===this.state&&(this.state="IDLE"));const p=u?u.stats:o.stats;this.fragLastKbps=Math.round(8*p.total/(p.buffering.end-p.loading.first)),"initSegment"!==o.sn&&(this.fragPrevious=o),this.fragBufferedComplete(o,u)}onError(n,t){var o;if(t.fatal)this.state="ERROR";else switch(t.details){case hn.FRAG_GAP:case hn.FRAG_PARSING_ERROR:case hn.FRAG_DECRYPT_ERROR:case hn.FRAG_LOAD_ERROR:case hn.FRAG_LOAD_TIMEOUT:case hn.KEY_LOAD_ERROR:case hn.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError("main",t);break;case hn.LEVEL_LOAD_ERROR:case hn.LEVEL_LOAD_TIMEOUT:case hn.LEVEL_PARSING_ERROR:!t.levelRetry&&"WAITING_LEVEL"===this.state&&"level"===(null==(o=t.context)?void 0:o.type)&&(this.state="IDLE");break;case hn.BUFFER_FULL_ERROR:if(!t.parent||"main"!==t.parent)return;this.reduceLengthAndFlushBuffer(t)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case hn.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}}checkBuffer(){const{media:n,gapController:t}=this;n&&t&&n.readyState&&(!this.loadedmetadata&&ni.getBuffered(n).length||t.poll(this.lastCurrentTime,"IDLE"!==this.state?this.fragCurrent:null),this.lastCurrentTime=n.currentTime)}onFragLoadEmergencyAborted(){this.state="IDLE",this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()}onBufferFlushed(n,{type:t}){("audio"!==t||this.audioOnly&&!this.altAudio)&&this.afterBufferFlushed(("video"===t?this.videoBuffer:this.mediaBuffer)||this.media,t,"main")}onLevelsUpdated(n,t){this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:n}=this;if(!n)return;const t=n.currentTime;let o=this.startPosition;if(o>=0&&t<o){if(n.seeking)return void this.log(`could not seek to ${o}, already seeking at ${t}`);const u=ni.getBuffered(n),C=(u.length?u.start(0):0)-o;C>0&&(C<this.config.maxBufferHole||C<this.config.maxFragLookUpTolerance)&&(this.log(`adjusting start position by ${C} to match buffer start`),o+=C,this.startPosition=o),this.log(`seek to target start position ${o} from current time ${t}`),n.currentTime=o}}_getAudioCodec(n){let t=this.config.defaultAudioCodec||n.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),t}_loadBitrateTestFrag(n,t){n.bitrateTest=!0,this._doFragLoad(n,t).then(o=>{const{hls:u}=this;if(!o||this.fragContextChanged(n))return;t.fragmentError=0,this.state="IDLE",this.startFragRequested=!1,this.bitrateTest=!1;const p=n.stats;p.parsing.start=p.parsing.end=p.buffering.start=p.buffering.end=self.performance.now(),u.trigger(it.FRAG_LOADED,o),n.bitrateTest=!1})}_handleTransmuxComplete(n){var t;const o="main",{hls:u}=this,{remuxResult:p,chunkMeta:C}=n,F=this.getCurrentContext(C);if(!F)return void this.resetWhenMissingContext(C);const{frag:$,part:le,level:Se}=F,{video:Le,text:$e,id3:Je,initSegment:st}=p,{details:gt}=Se,Tt=this.altAudio?void 0:p.audio;if(this.fragContextChanged($))return void this.fragmentTracker.removeFragment($);if(this.state="PARSING",st){if(null!=st&&st.tracks){const Mn=$.initSegment||$;this._bufferInitSegment(Se,st.tracks,Mn,C),u.trigger(it.FRAG_PARSING_INIT_SEGMENT,{frag:Mn,id:o,tracks:st.tracks})}const rn=st.initPTS,tn=st.timescale;ir(rn)&&(this.initPTS[$.cc]={baseTime:rn,timescale:tn},u.trigger(it.INIT_PTS_FOUND,{frag:$,id:o,initPTS:rn,timescale:tn}))}const Zt=$.sn!==(null==gt?void 0:gt.startSN);if(Le&&!1!==p.independent){if(gt){const{startPTS:rn,endPTS:tn,startDTS:Mn,endDTS:pn}=Le;if(le)le.elementaryStreams[Le.type]={startPTS:rn,endPTS:tn,startDTS:Mn,endDTS:pn};else if(Le.firstKeyFrame&&Le.independent&&1===C.id&&(this.couldBacktrack=!0),Le.dropped&&Le.independent){const Kn=this.getMainFwdBufferInfo(),xn=(Kn?Kn.end:this.getLoadPosition())+this.config.maxBufferHole,Wn=Le.firstKeyFramePTS?Le.firstKeyFramePTS:rn;if(Zt&&xn<Wn-this.config.maxBufferHole)return void this.backtrack($);$.setElementaryStreamInfo(Le.type,$.start,tn,$.start,pn,!0)}$.setElementaryStreamInfo(Le.type,rn,tn,Mn,pn),this.backtrackFragment&&(this.backtrackFragment=$),this.bufferFragmentData(Le,$,le,C)}}else if(Zt&&!1===p.independent)return void this.backtrack($);if(Tt){const{startPTS:rn,endPTS:tn,startDTS:Mn,endDTS:pn}=Tt;le&&(le.elementaryStreams.audio={startPTS:rn,endPTS:tn,startDTS:Mn,endDTS:pn}),$.setElementaryStreamInfo("audio",rn,tn,Mn,pn),this.bufferFragmentData(Tt,$,le,C)}gt&&null!=Je&&null!=(t=Je.samples)&&t.length&&u.trigger(it.FRAG_PARSING_METADATA,{id:o,frag:$,details:gt,samples:Je.samples}),gt&&$e&&u.trigger(it.FRAG_PARSING_USERDATA,{id:o,frag:$,details:gt,samples:$e.samples})}_bufferInitSegment(n,t,o,u){if("PARSING"!==this.state)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&delete t.audio;const{audio:p,video:C,audiovideo:F}=t;if(p){let $=n.audioCodec;const le=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&($&&($=-1!==$.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),1!==p.metadata.channelCount&&-1===le.indexOf("firefox")&&($="mp4a.40.5")),-1!==le.indexOf("android")&&"audio/mpeg"!==p.container&&($="mp4a.40.2",this.log(`Android: force audio codec to ${$}`)),n.audioCodec&&n.audioCodec!==$&&this.log(`Swapping manifest audio codec "${n.audioCodec}" for "${$}"`),p.levelCodec=$,p.id="main",this.log(`Init audio buffer, container:${p.container}, codecs[selected/level/parsed]=[${$||""}/${n.audioCodec||""}/${p.codec}]`)}C&&(C.levelCodec=n.videoCodec,C.id="main",this.log(`Init video buffer, container:${C.container}, codecs[level/parsed]=[${n.videoCodec||""}/${C.codec}]`)),F&&this.log(`Init audiovideo buffer, container:${F.container}, codecs[level/parsed]=[${n.attrs.CODECS||""}/${F.codec}]`),this.hls.trigger(it.BUFFER_CODECS,t),Object.keys(t).forEach($=>{const Se=t[$].initSegment;null!=Se&&Se.byteLength&&this.hls.trigger(it.BUFFER_APPENDING,{type:$,data:Se,frag:o,part:null,chunkMeta:u,parent:o.type})}),this.tick()}getMainFwdBufferInfo(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,"main")}backtrack(n){this.couldBacktrack=!0,this.backtrackFragment=n,this.resetTransmuxer(),this.flushBufferGap(n),this.fragmentTracker.removeFragment(n),this.fragPrevious=null,this.nextLoadPosition=n.start,this.state="IDLE"}checkFragmentChanged(){const n=this.media;let t=null;if(n&&n.readyState>1&&!1===n.seeking){const o=n.currentTime;if(ni.isBuffered(n,o)?t=this.getAppendedFrag(o):ni.isBuffered(n,o+.1)&&(t=this.getAppendedFrag(o+.1)),t){this.backtrackFragment=null;const u=this.fragPlaying,p=t.level;(!u||t.sn!==u.sn||u.level!==p||t.urlId!==u.urlId)&&(this.fragPlaying=t,this.hls.trigger(it.FRAG_CHANGED,{frag:t}),(!u||u.level!==p)&&this.hls.trigger(it.LEVEL_SWITCHED,{level:p}))}}}get nextLevel(){const n=this.nextBufferedFrag;return n?n.level:-1}get currentFrag(){const n=this.media;return n?this.fragPlaying||this.getAppendedFrag(n.currentTime):null}get currentProgramDateTime(){const n=this.media;if(n){const t=n.currentTime,o=this.currentFrag;if(o&&ir(t)&&ir(o.programDateTime))return new Date(o.programDateTime+1e3*(t-o.start))}return null}get currentLevel(){const n=this.currentFrag;return n?n.level:-1}get nextBufferedFrag(){const n=this.currentFrag;return n?this.followingBufferedFrag(n):null}get forceStartLoad(){return this._forceStartLoad}}class Da{constructor(n,t=0,o=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=n,this.alpha_=n?Math.exp(Math.log(.5)/n):0,this.estimate_=t,this.totalWeight_=o}sample(n,t){const o=Math.pow(this.alpha_,n);this.estimate_=t*(1-o)+o*this.estimate_,this.totalWeight_+=n}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const n=1-Math.pow(this.alpha_,this.totalWeight_);if(n)return this.estimate_/n}return this.estimate_}}class jd{constructor(n,t,o,u=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=o,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Da(n),this.fast_=new Da(t),this.defaultTTFB_=u,this.ttfb_=new Da(n)}update(n,t){const{slow_:o,fast_:u,ttfb_:p}=this;o.halfLife!==n&&(this.slow_=new Da(n,o.getEstimate(),o.getTotalWeight())),u.halfLife!==t&&(this.fast_=new Da(t,u.getEstimate(),u.getTotalWeight())),p.halfLife!==n&&(this.ttfb_=new Da(n,p.getEstimate(),p.getTotalWeight()))}sample(n,t){const u=(n=Math.max(n,this.minDelayMs_))/1e3,p=8*t/u;this.fast_.sample(u,p),this.slow_.sample(u,p)}sampleTTFB(n){const t=n/1e3,o=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(o,Math.max(n,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}destroy(){}}class Es{constructor(){this.chunks=[],this.dataLength=0}push(n){this.chunks.push(n),this.dataLength+=n.length}flush(){const{chunks:n,dataLength:t}=this;let o;return n.length?(o=1===n.length?n[0]:function Fs(h,n){const t=new Uint8Array(n);let o=0;for(let u=0;u<h.length;u++){const p=h[u];t.set(p,o),o+=p.length}return t}(n,t),this.reset(),o):new Uint8Array(0)}reset(){this.chunks.length=0,this.dataLength=0}}function ii(h,n){if(h.length!==n.length)return!1;for(let t=0;t<h.length;t++)if(!Nu(h[t].attrs,n[t].attrs))return!1;return!0}function Nu(h,n){const t=h["STABLE-RENDITION-ID"];return t?t===n["STABLE-RENDITION-ID"]:!["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED"].some(o=>h[o]!==n[o])}class Hd{constructor(n){this.buffered=void 0;const t=(o,u,p)=>{if((u>>>=0)>p-1)throw new DOMException(`Failed to execute '${o}' on 'TimeRanges': The index provided (${u}) is greater than the maximum bound (${p})`);return n[u][o]};this.buffered={get length(){return n.length},end:o=>t("end",o,n.length),start:o=>t("start",o,n.length)}}}function Mc(h){const n=[];for(let t=0;t<h.length;t++){const o=h[t];("subtitles"===o.kind||"captions"===o.kind)&&o.label&&n.push(h[t])}return n}class uh{constructor(n){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=n}append(n,t){const o=this.queues[t];o.push(n),1===o.length&&this.buffers[t]&&this.executeNext(t)}insertAbort(n,t){this.queues[t].unshift(n),this.executeNext(t)}appendBlocker(n){let t;const o=new Promise(p=>{t=p});return this.append({execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}},n),o}executeNext(n){const{buffers:t,queues:o}=this,u=t[n],p=o[n];if(p.length){const C=p[0];try{C.execute()}catch(F){Bt.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),C.onError(F),null!=u&&u.updating||(p.shift(),this.executeNext(n))}}}shiftAndExecuteNext(n){this.queues[n].shift(),this.executeNext(n)}current(n){return this.queues[n][0]}}const Gd=Ai(),Kd=/([ha]vc.)(?:\.[^.,]+)+/,ch={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},al=function(n){let t=n;return ch.hasOwnProperty(n)&&(t=ch[n]),String.fromCharCode(t)},ds=100,Wd={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Yd={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Qi={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},ll={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Yl=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class Pc{constructor(){this.time=null,this.verboseLevel=0}log(n,t){if(this.verboseLevel>=n){const o="function"==typeof t?t():t;Bt.log(`${this.time} [${n}] ${o}`)}}}const ks=function(n){const t=[];for(let o=0;o<n.length;o++)t.push(n[o].toString(16));return t};class Aa{constructor(n,t,o,u,p){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=n||"white",this.underline=t||!1,this.italics=o||!1,this.background=u||"black",this.flash=p||!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(n){const t=["foreground","underline","italics","background","flash"];for(let o=0;o<t.length;o++){const u=t[o];n.hasOwnProperty(u)&&(this[u]=n[u])}}isDefault(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash}equals(n){return this.foreground===n.foreground&&this.underline===n.underline&&this.italics===n.italics&&this.background===n.background&&this.flash===n.flash}copy(n){this.foreground=n.foreground,this.underline=n.underline,this.italics=n.italics,this.background=n.background,this.flash=n.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class Zd{constructor(n,t,o,u,p,C){this.uchar=void 0,this.penState=void 0,this.uchar=n||" ",this.penState=new Aa(t,o,u,p,C)}reset(){this.uchar=" ",this.penState.reset()}setChar(n,t){this.uchar=n,this.penState.copy(t)}setPenState(n){this.penState.copy(n)}equals(n){return this.uchar===n.uchar&&this.penState.equals(n.penState)}copy(n){this.uchar=n.uchar,this.penState.copy(n.penState)}isEmpty(){return" "===this.uchar&&this.penState.isDefault()}}class ul{constructor(n){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(let t=0;t<ds;t++)this.chars.push(new Zd);this.logger=n,this.pos=0,this.currPenState=new Aa}equals(n){let t=!0;for(let o=0;o<ds;o++)if(!this.chars[o].equals(n.chars[o])){t=!1;break}return t}copy(n){for(let t=0;t<ds;t++)this.chars[t].copy(n.chars[t])}isEmpty(){let n=!0;for(let t=0;t<ds;t++)if(!this.chars[t].isEmpty()){n=!1;break}return n}setCursor(n){this.pos!==n&&(this.pos=n),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>ds&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=ds)}moveCursor(n){const t=this.pos+n;if(n>1)for(let o=this.pos+1;o<t+1;o++)this.chars[o].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(n){n>=144&&this.backSpace();const t=al(n);this.pos>=ds?this.logger.log(0,()=>"Cannot insert "+n.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))}clearFromPos(n){let t;for(t=n;t<ds;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const n=[];let t=!0;for(let o=0;o<ds;o++){const u=this.chars[o].uchar;" "!==u&&(t=!1),n.push(u)}return t?"":n.join("")}setPenStyles(n){this.currPenState.setStyles(n),this.chars[this.pos].setPenState(this.currPenState)}}class Ac{constructor(n){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(let t=0;t<15;t++)this.rows.push(new ul(n));this.logger=n,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}reset(){for(let n=0;n<15;n++)this.rows[n].clear();this.currRow=14}equals(n){let t=!0;for(let o=0;o<15;o++)if(!this.rows[o].equals(n.rows[o])){t=!1;break}return t}copy(n){for(let t=0;t<15;t++)this.rows[t].copy(n.rows[t])}isEmpty(){let n=!0;for(let t=0;t<15;t++)if(!this.rows[t].isEmpty()){n=!1;break}return n}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(n){this.rows[this.currRow].insertChar(n)}setPen(n){this.rows[this.currRow].setPenStyles(n)}moveCursor(n){this.rows[this.currRow].moveCursor(n)}setCursor(n){this.logger.log(2,"setCursor: "+n),this.rows[this.currRow].setCursor(n)}setPAC(n){this.logger.log(2,()=>"pacData = "+JSON.stringify(n));let t=n.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let F=0;F<15;F++)this.rows[F].clear();const p=this.currRow+1-this.nrRollUpRows,C=this.lastOutputScreen;if(C){const F=C.rows[p].cueStartTime,$=this.logger.time;if(F&&null!==$&&F<$)for(let le=0;le<this.nrRollUpRows;le++)this.rows[t-this.nrRollUpRows+le+1].copy(C.rows[p+le])}}this.currRow=t;const o=this.rows[this.currRow];if(null!==n.indent){const C=Math.max(n.indent-1,0);o.setCursor(n.indent),n.color=o.chars[C].penState.foreground}this.setPen({foreground:n.color,underline:n.underline,italics:n.italics,background:"black",flash:!1})}setBkgData(n){this.logger.log(2,()=>"bkgData = "+JSON.stringify(n)),this.backSpace(),this.setPen(n),this.insertChar(32)}setRollUpRows(n){this.nrRollUpRows=n}rollUp(){if(null===this.nrRollUpRows)return void this.logger.log(3,"roll_up but nrRollUpRows not set yet");this.logger.log(1,()=>this.getDisplayText());const t=this.rows.splice(this.currRow+1-this.nrRollUpRows,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(n){n=n||!1;const t=[];let o="",u=-1;for(let p=0;p<15;p++){const C=this.rows[p].getTextString();C&&(u=p+1,t.push(n?"Row "+u+": '"+C+"'":C.trim()))}return t.length>0&&(o=n?"["+t.join(" | ")+"]":t.join("\n")),o}getTextAndFormat(){return this.rows}}class Zl{constructor(n,t,o){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=n,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new Ac(o),this.nonDisplayedMemory=new Ac(o),this.lastOutputScreen=new Ac(o),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=o}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(n){this.outputFilter=n}setPAC(n){this.writeScreen.setPAC(n)}setBkgData(n){this.writeScreen.setBkgData(n)}setMode(n){n!==this.mode&&(this.mode=n,this.logger.log(2,()=>"MODE="+n),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=n)}insertChars(n){for(let o=0;o<n.length;o++)this.writeScreen.insertChar(n[o]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>t+": "+this.writeScreen.getDisplayText(!0)),("MODE_PAINT-ON"===this.mode||"MODE_ROLL-UP"===this.mode)&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(n){this.logger.log(2,"RU("+n+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(n)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){const n=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=n,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(n){this.logger.log(2,"TO("+n+") - Tab Offset"),this.writeScreen.moveCursor(n)}ccMIDROW(n){const t={flash:!1};if(t.underline=n%2==1,t.italics=n>=46,t.italics)t.foreground="white";else{const o=Math.floor(n/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][o]}this.logger.log(2,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)}outputDataUpdate(n=!1){const t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),n&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(n){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,n,this.displayedMemory),this.cueStartTime=n))}}class Bs{constructor(n,t,o){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;const u=new Pc;this.channels=[null,new Zl(n,t,u),new Zl(n+1,o,u)],this.cmdHistory={a:null,b:null},this.logger=u}getHandler(n){return this.channels[n].getHandler()}setHandler(n,t){this.channels[n].setHandler(t)}addData(n,t){let o,u,p,C=!1;this.logger.time=n;for(let F=0;F<t.length;F+=2)if(u=127&t[F],p=127&t[F+1],0!==u||0!==p){if(this.logger.log(3,"["+ks([t[F],t[F+1]])+"] -> ("+ks([u,p])+")"),o=this.parseCmd(u,p),o||(o=this.parseMidrow(u,p)),o||(o=this.parsePAC(u,p)),o||(o=this.parseBackgroundAttributes(u,p)),!o&&(C=this.parseChars(u,p),C)){const $=this.currentChannel;$&&$>0?this.channels[$].insertChars(C):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!o&&!C&&this.logger.log(2,"Couldn't parse cleaned data "+ks([u,p])+" orig: "+ks([t[F],t[F+1]]))}}parseCmd(n,t){const{cmdHistory:o}=this;if(!((20===n||28===n||21===n||29===n)&&t>=32&&t<=47||(23===n||31===n)&&t>=33&&t<=35))return!1;if($l(n,t,o))return cl(null,null,o),this.logger.log(3,"Repeated command ("+ks([n,t])+") is dropped"),!0;const C=20===n||21===n||23===n?1:2,F=this.channels[C];return 20===n||21===n||28===n||29===n?32===t?F.ccRCL():33===t?F.ccBS():34===t?F.ccAOF():35===t?F.ccAON():36===t?F.ccDER():37===t?F.ccRU(2):38===t?F.ccRU(3):39===t?F.ccRU(4):40===t?F.ccFON():41===t?F.ccRDC():42===t?F.ccTR():43===t?F.ccRTD():44===t?F.ccEDM():45===t?F.ccCR():46===t?F.ccENM():47===t&&F.ccEOC():F.ccTO(t-32),cl(n,t,o),this.currentChannel=C,!0}parseMidrow(n,t){let o=0;if((17===n||25===n)&&t>=32&&t<=47){if(o=17===n?1:2,o!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const u=this.channels[o];return!!u&&(u.ccMIDROW(t),this.logger.log(3,"MIDROW ("+ks([n,t])+")"),!0)}return!1}parsePAC(n,t){let o;const u=this.cmdHistory;if(!((n>=17&&n<=23||n>=25&&n<=31)&&t>=64&&t<=127||(16===n||24===n)&&t>=64&&t<=95))return!1;if($l(n,t,u))return cl(null,null,u),!0;const F=n<=23?1:2;o=t>=64&&t<=95?1===F?Wd[n]:Qi[n]:1===F?Yd[n]:ll[n];const $=this.channels[F];return!!$&&($.setPAC(this.interpretPAC(o,t)),cl(n,t,u),this.currentChannel=F,!0)}interpretPAC(n,t){let o;const u={color:null,italics:!1,indent:null,underline:!1,row:n};return o=t>95?t-96:t-64,u.underline=1==(1&o),o<=13?u.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(o/2)]:o<=15?(u.italics=!0,u.color="white"):u.indent=4*Math.floor((o-16)/2),u}parseChars(n,t){let o,u=null,p=null;if(n>=25?(o=2,p=n-8):(o=1,p=n),p>=17&&p<=19){let C;C=17===p?t+80:18===p?t+112:t+144,this.logger.log(2,"Special char '"+al(C)+"' in channel "+o),u=[C]}else n>=32&&n<=127&&(u=0===t?[n]:[n,t]);if(u){const C=ks(u);this.logger.log(3,"Char codes =  "+C.join(",")),cl(n,t,this.cmdHistory)}return u}parseBackgroundAttributes(n,t){if(!((16===n||24===n)&&t>=32&&t<=47||(23===n||31===n)&&t>=45&&t<=47))return!1;let p;const C={};return 16===n||24===n?(p=Math.floor((t-32)/2),C.background=Yl[p],t%2==1&&(C.background=C.background+"_semi")):45===t?C.background="transparent":(C.foreground="black",47===t&&(C.underline=!0)),this.channels[n<=23?1:2].setBkgData(C),cl(n,t,this.cmdHistory),!0}reset(){for(let n=0;n<Object.keys(this.channels).length;n++){const t=this.channels[n];t&&t.reset()}this.cmdHistory={a:null,b:null}}cueSplitAtTime(n){for(let t=0;t<this.channels.length;t++){const o=this.channels[t];o&&o.cueSplitAtTime(n)}}}function cl(h,n,t){t.a=h,t.b=n}function $l(h,n,t){return t.a===h&&t.b===n}class zl{constructor(n,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=n,this.trackName=t}dispatchCue(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(n,t,o){(null===this.startTime||this.startTime>n)&&(this.startTime=n),this.endTime=t,this.screen=o,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}var Ts=function(){if("undefined"!=typeof self&&self.VTTCue)return self.VTTCue;const h=["","lr","rl"],n=["start","middle","end","left","right"];function t(F,$){if("string"!=typeof $||!Array.isArray(F))return!1;const le=$.toLowerCase();return!!~F.indexOf(le)&&le}function u(F){return t(n,F)}function p(F,...$){let le=1;for(;le<arguments.length;le++){const Se=arguments[le];for(const Le in Se)F[Le]=Se[Le]}return F}function C(F,$,le){const Se=this,Le={enumerable:!0};Se.hasBeenReset=!1;let $e="",Je=!1,st=F,gt=$,Tt=le,Zt=null,rn="",tn=!0,Mn="auto",pn="start",Kn=50,xn="middle",Wn=50,er="middle";Object.defineProperty(Se,"id",p({},Le,{get:function(){return $e},set:function(Sn){$e=""+Sn}})),Object.defineProperty(Se,"pauseOnExit",p({},Le,{get:function(){return Je},set:function(Sn){Je=!!Sn}})),Object.defineProperty(Se,"startTime",p({},Le,{get:function(){return st},set:function(Sn){if("number"!=typeof Sn)throw new TypeError("Start time must be set to a number.");st=Sn,this.hasBeenReset=!0}})),Object.defineProperty(Se,"endTime",p({},Le,{get:function(){return gt},set:function(Sn){if("number"!=typeof Sn)throw new TypeError("End time must be set to a number.");gt=Sn,this.hasBeenReset=!0}})),Object.defineProperty(Se,"text",p({},Le,{get:function(){return Tt},set:function(Sn){Tt=""+Sn,this.hasBeenReset=!0}})),Object.defineProperty(Se,"region",p({},Le,{get:function(){return Zt},set:function(Sn){Zt=Sn,this.hasBeenReset=!0}})),Object.defineProperty(Se,"vertical",p({},Le,{get:function(){return rn},set:function(Sn){const gr=function o(F){return t(h,F)}(Sn);if(!1===gr)throw new SyntaxError("An invalid or illegal string was specified.");rn=gr,this.hasBeenReset=!0}})),Object.defineProperty(Se,"snapToLines",p({},Le,{get:function(){return tn},set:function(Sn){tn=!!Sn,this.hasBeenReset=!0}})),Object.defineProperty(Se,"line",p({},Le,{get:function(){return Mn},set:function(Sn){if("number"!=typeof Sn&&"auto"!==Sn)throw new SyntaxError("An invalid number or illegal string was specified.");Mn=Sn,this.hasBeenReset=!0}})),Object.defineProperty(Se,"lineAlign",p({},Le,{get:function(){return pn},set:function(Sn){const gr=u(Sn);if(!gr)throw new SyntaxError("An invalid or illegal string was specified.");pn=gr,this.hasBeenReset=!0}})),Object.defineProperty(Se,"position",p({},Le,{get:function(){return Kn},set:function(Sn){if(Sn<0||Sn>100)throw new Error("Position must be between 0 and 100.");Kn=Sn,this.hasBeenReset=!0}})),Object.defineProperty(Se,"positionAlign",p({},Le,{get:function(){return xn},set:function(Sn){const gr=u(Sn);if(!gr)throw new SyntaxError("An invalid or illegal string was specified.");xn=gr,this.hasBeenReset=!0}})),Object.defineProperty(Se,"size",p({},Le,{get:function(){return Wn},set:function(Sn){if(Sn<0||Sn>100)throw new Error("Size must be between 0 and 100.");Wn=Sn,this.hasBeenReset=!0}})),Object.defineProperty(Se,"align",p({},Le,{get:function(){return er},set:function(Sn){const gr=u(Sn);if(!gr)throw new SyntaxError("An invalid or illegal string was specified.");er=gr,this.hasBeenReset=!0}})),Se.displayState=void 0}return C.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},C}();class $d{decode(n,t){if(!n)return"";if("string"!=typeof n)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(n))}}function Ic(h){function n(o,u,p,C){return 3600*(0|o)+60*(0|u)+(0|p)+parseFloat(C||0)}const t=h.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return t?parseFloat(t[2])>59?n(t[2],t[3],0,t[4]):n(t[1],t[2],t[3],t[4]):null}class dl{constructor(){this.values=Object.create(null)}set(n,t){!this.get(n)&&""!==t&&(this.values[n]=t)}get(n,t,o){return o?this.has(n)?this.values[n]:t[o]:this.has(n)?this.values[n]:t}has(n){return n in this.values}alt(n,t,o){for(let u=0;u<o.length;++u)if(t===o[u]){this.set(n,t);break}}integer(n,t){/^-?\d+$/.test(t)&&this.set(n,parseInt(t,10))}percent(n,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const o=parseFloat(t);if(o>=0&&o<=100)return this.set(n,o),!0}return!1}}function Oc(h,n,t,o){const u=o?h.split(o):[h];for(const p in u){if("string"!=typeof u[p])continue;const C=u[p].split(t);2===C.length&&n(C[0],C[1])}}const ql=new Ts(0,0,""),fl="middle"===ql.align?"middle":"center";function zd(h,n,t){const o=h;function u(){const F=Ic(h);if(null===F)throw new Error("Malformed timestamp: "+o);return h=h.replace(/^[^\sa-zA-Z-]+/,""),F}function C(){h=h.replace(/^\s+/,"")}if(C(),n.startTime=u(),C(),"--\x3e"!==h.slice(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+o);h=h.slice(3),C(),n.endTime=u(),C(),function p(F,$){const le=new dl;Oc(F,function($e,Je){let st;switch($e){case"region":for(let gt=t.length-1;gt>=0;gt--)if(t[gt].id===Je){le.set($e,t[gt].region);break}break;case"vertical":le.alt($e,Je,["rl","lr"]);break;case"line":st=Je.split(","),le.integer($e,st[0]),le.percent($e,st[0])&&le.set("snapToLines",!1),le.alt($e,st[0],["auto"]),2===st.length&&le.alt("lineAlign",st[1],["start",fl,"end"]);break;case"position":st=Je.split(","),le.percent($e,st[0]),2===st.length&&le.alt("positionAlign",st[1],["start",fl,"end","line-left","line-right","auto"]);break;case"size":le.percent($e,Je);break;case"align":le.alt($e,Je,["start",fl,"end","left","right"])}},/:/,/\s/),$.region=le.get("region",null),$.vertical=le.get("vertical","");let Se=le.get("line","auto");"auto"===Se&&-1===ql.line&&(Se=-1),$.line=Se,$.lineAlign=le.get("lineAlign","start"),$.snapToLines=le.get("snapToLines",!0),$.size=le.get("size",100),$.align=le.get("align",fl);let Le=le.get("position","auto");"auto"===Le&&50===ql.position&&(Le="start"===$.align||"left"===$.align?0:"end"===$.align||"right"===$.align?100:50),$.position=Le}(h,n)}function Fu(h){return h.replace(/<br(?: \/)?>/gi,"\n")}class xc{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new $d,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(n){const t=this;function o(){let p=t.buffer,C=0;for(p=Fu(p);C<p.length&&"\r"!==p[C]&&"\n"!==p[C];)++C;const F=p.slice(0,C);return"\r"===p[C]&&++C,"\n"===p[C]&&++C,t.buffer=p.slice(C),F}function u(p){Oc(p,function(C,F){},/:/)}n&&(t.buffer+=t.decoder.decode(n,{stream:!0}));try{let p="";if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;p=o();const F=p.match(/^(\xef\xbb\xbf)?WEBVTT([ \t].*)?$/);if(null==F||!F[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let C=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(C?C=!1:p=o(),t.state){case"HEADER":/:/.test(p)?u(p):p||(t.state="ID");continue;case"NOTE":p||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(p)){t.state="NOTE";break}if(!p)continue;if(t.cue=new Ts(0,0,""),t.state="CUE",-1===p.indexOf("--\x3e")){t.cue.id=p;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{zd(p,t.cue,t.regionList)}catch(F){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const F=-1!==p.indexOf("--\x3e");if(!p||F&&(C=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(null===t.cue)continue;t.cue.text&&(t.cue.text+="\n"),t.cue.text+=p}continue;case"BADCUE":p||(t.state="ID")}}}catch(p){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this}flush(){const n=this;try{if((n.cue||"HEADER"===n.state)&&(n.buffer+="\n\n",n.parse()),"INITIAL"===n.state||"BADWEBVTT"===n.state)throw new Error("Malformed WebVTT signature.")}catch(t){n.onparsingerror&&n.onparsingerror(t)}return n.onflush&&n.onflush(),this}}const wc=/\r\n|\n\r|\n|\r/g,hl=function(n,t,o=0){return n.slice(o,o+t.length)===t},Jl=function(n){let t=5381,o=n.length;for(;o;)t=33*t^n.charCodeAt(--o);return(t>>>0).toString()};function Ql(h,n,t){return Jl(h.toString())+Jl(n.toString())+Jl(t)}const Nc="stpp.ttml.im1t",Ia=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Ho=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,dh={left:"start",center:"center",right:"end",start:"start",end:"end"};function Lc(h,n,t,o){const u=Mr(new Uint8Array(h),["mdat"]);if(0===u.length)return void o(new Error("Could not parse IMSC1 mdat"));const p=u.map(F=>un(F)),C=function Qs(h,n,t=1,o=!1){return Ou(h,n,1/t,o)}(n.baseTime,1,n.timescale);try{p.forEach(F=>t(function Uu(h,n){const u=(new DOMParser).parseFromString(h,"text/xml").getElementsByTagName("tt")[0];if(!u)throw new Error("Invalid ttml");const p={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},C=Object.keys(p).reduce((Le,$e)=>(Le[$e]=u.getAttribute(`ttp:${$e}`)||p[$e],Le),{}),F="preserve"!==u.getAttribute("xml:space"),$=Go(ju(u,"styling","style")),le=Go(ju(u,"layout","region")),Se=ju(u,"body","[begin]");return[].map.call(Se,Le=>{const $e=gl(Le,F);if(!$e||!Le.hasAttribute("begin"))return null;const Je=Oa(Le.getAttribute("begin"),C),st=Oa(Le.getAttribute("dur"),C);let gt=Oa(Le.getAttribute("end"),C);if(null===Je)throw Fc(Le);if(null===gt){if(null===st)throw Fc(Le);gt=Je+st}const Tt=new Ts(Je-n,gt-n,$e);Tt.id=Ql(Tt.startTime,Tt.endTime,Tt.text);const tn=function Xl(h,n,t){const o="http://www.w3.org/ns/ttml#styling";let u=null;const C=null!=h&&h.hasAttribute("style")?h.getAttribute("style"):null;return C&&t.hasOwnProperty(C)&&(u=t[C]),["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"].reduce((F,$)=>{const le=eu(n,o,$)||eu(h,o,$)||eu(u,o,$);return le&&(F[$]=le),F},{})}(le[Le.getAttribute("region")],$[Le.getAttribute("style")],$),{textAlign:Mn}=tn;if(Mn){const pn=dh[Mn];pn&&(Tt.lineAlign=pn),Tt.align=Mn}return Wr(Tt,tn),Tt}).filter(Le=>null!==Le)}(F,C)))}catch(F){o(F)}}function ju(h,n,t){const o=h.getElementsByTagName(n)[0];return o?[].slice.call(o.querySelectorAll(t)):[]}function Go(h){return h.reduce((n,t)=>{const o=t.getAttribute("xml:id");return o&&(n[o]=t),n},{})}function gl(h,n){return[].slice.call(h.childNodes).reduce((t,o,u)=>{var p;return"br"===o.nodeName&&u?t+"\n":null!=(p=o.childNodes)&&p.length?gl(o,n):n?t+o.textContent.trim().replace(/\s+/g," "):t+o.textContent},"")}function eu(h,n,t){return h&&h.hasAttributeNS(n,t)?h.getAttributeNS(n,t):null}function Fc(h){return new Error(`Could not parse ttml timestamp ${h}`)}function Oa(h,n){if(!h)return null;let t=Ic(h);return null===t&&(Ia.test(h)?t=function Vu(h,n){const t=Ia.exec(h);return 3600*(0|t[1])+60*(0|t[2])+(0|t[3])+((0|t[4])+(0|t[5])/n.subFrameRate)/n.frameRate}(h,n):Ho.test(h)&&(t=function kc(h,n){const t=Ho.exec(h),o=Number(t[1]);switch(t[2]){case"h":return 3600*o;case"m":return 60*o;case"ms":return 1e3*o;case"f":return o/n.frameRate;case"t":return o/n.tickRate}return o}(h,n))),t}function Gu(h,n){return!!h&&h.label===n.name&&!(h.textTrack1||h.textTrack2)}function Bc(h,n,t,o){return Math.min(n,o)-Math.max(h,t)}class Us{constructor(n){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=n,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(n){this.streamController=n}destroy(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:n}=this;n.on(it.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),n.on(it.MEDIA_ATTACHING,this.onMediaAttaching,this),n.on(it.MANIFEST_PARSED,this.onManifestParsed,this),n.on(it.BUFFER_CODECS,this.onBufferCodecs,this),n.on(it.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:n}=this;n.off(it.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),n.off(it.MEDIA_ATTACHING,this.onMediaAttaching,this),n.off(it.MANIFEST_PARSED,this.onManifestParsed,this),n.off(it.BUFFER_CODECS,this.onBufferCodecs,this),n.off(it.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(n,t){const o=this.hls.levels[t.droppedLevel];this.isLevelAllowed(o)&&this.restrictedLevels.push({bitrate:o.bitrate,height:o.height,width:o.width})}onMediaAttaching(n,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null}onManifestParsed(n,t){const o=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,o.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onBufferCodecs(n,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping()}detectPlayerSize(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){const n=this.hls.levels;if(n.length){const t=this.hls;t.autoLevelCapping=this.getMaxLevel(n.length-1),t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(n){const t=this.hls.levels;if(!t.length)return-1;const o=t.filter((u,p)=>this.isLevelAllowed(u)&&p<=n);return this.clientRect=null,Us.getMaxLevelByMediaSize(o,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const n=this.media,t={width:0,height:0};if(n){const o=n.getBoundingClientRect();t.width=o.width,t.height=o.height,!t.width&&!t.height&&(t.width=o.right-o.left||n.width||0,t.height=o.bottom-o.top||n.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let n=1;if(!this.hls.config.ignoreDevicePixelRatio)try{n=self.devicePixelRatio}catch(t){}return n}isLevelAllowed(n){return!this.restrictedLevels.some(o=>n.bitrate===o.bitrate&&n.width===o.width&&n.height===o.height)}static getMaxLevelByMediaSize(n,t,o){if(null==n||!n.length)return-1;const u=(C,F)=>!F||C.width!==F.width||C.height!==F.height;let p=n.length-1;for(let C=0;C<n.length;C+=1){const F=n[C];if((F.width>=t||F.height>=o)&&u(F,n[C+1])){p=C;break}}return p}}const tu="[eme]";let fh=(()=>{class h{constructor(t){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=h.CDMCleanupPromise?[h.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=Bt.debug.bind(Bt,tu),this.log=Bt.log.bind(Bt,tu),this.warn=Bt.warn.bind(Bt,tu),this.error=Bt.error.bind(Bt,tu),this.hls=t,this.config=t.config,this.registerListeners()}destroy(){this.unregisterListeners(),this.onMediaDetached();const t=this.config;t.requestMediaKeySystemAccessFunc=null,t.licenseXhrSetup=t.licenseResponseCallback=void 0,t.drmSystems=t.drmSystemOptions={},this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null,this.config=null}registerListeners(){this.hls.on(it.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(it.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(it.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(it.MANIFEST_LOADED,this.onManifestLoaded,this)}unregisterListeners(){this.hls.off(it.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(it.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(it.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(it.MANIFEST_LOADED,this.onManifestLoaded,this)}getLicenseServerUrl(t){const{drmSystems:o,widevineLicenseUrl:u}=this.config,p=o[t];if(p)return p.licenseUrl;if(t===Hr.WIDEVINE&&u)return u;throw new Error(`no license server URL configured for key-system "${t}"`)}getServerCertificateUrl(t){const{drmSystems:o}=this.config,u=o[t];if(u)return u.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${t}"]`)}attemptKeySystemAccess(t){const o=this.hls.levels,u=(F,$,le)=>!!F&&le.indexOf(F)===$,p=o.map(F=>F.audioCodec).filter(u),C=o.map(F=>F.videoCodec).filter(u);return p.length+C.length===0&&C.push("avc1.42e01e"),new Promise((F,$)=>{const le=Se=>{const Le=Se.shift();this.getMediaKeysPromise(Le,p,C).then($e=>F({keySystem:Le,mediaKeys:$e})).catch($e=>{Se.length?le(Se):$($e instanceof Ro?$e:new Ro({type:rr.KEY_SYSTEM_ERROR,details:hn.KEY_SYSTEM_NO_ACCESS,error:$e,fatal:!0},$e.message))})};le(t)})}requestMediaKeySystemAccess(t,o){const{requestMediaKeySystemAccessFunc:u}=this.config;if("function"!=typeof u){let p=`Configured requestMediaKeySystemAccess is not a function ${u}`;return null===_n&&"http:"===self.location.protocol&&(p=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(p))}return u(t,o)}getMediaKeysPromise(t,o,u){const p=function Qn(h,n,t,o){let u;switch(h){case Hr.FAIRPLAY:u=["cenc","sinf"];break;case Hr.WIDEVINE:case Hr.PLAYREADY:u=["cenc"];break;case Hr.CLEARKEY:u=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${h}`)}return function Zr(h,n,t,o){return[{initDataTypes:h,persistentState:o.persistentState||"not-allowed",distinctiveIdentifier:o.distinctiveIdentifier||"not-allowed",sessionTypes:o.sessionTypes||[o.sessionType||"temporary"],audioCapabilities:n.map(p=>({contentType:`audio/mp4; codecs="${p}"`,robustness:o.audioRobustness||"",encryptionScheme:o.audioEncryptionScheme||null})),videoCapabilities:t.map(p=>({contentType:`video/mp4; codecs="${p}"`,robustness:o.videoRobustness||"",encryptionScheme:o.videoEncryptionScheme||null}))}]}(u,n,t,o)}(t,o,u,this.config.drmSystemOptions),C=this.keySystemAccessPromises[t];let F=null==C?void 0:C.keySystemAccess;if(!F){this.log(`Requesting encrypted media "${t}" key-system access with config: ${JSON.stringify(p)}`),F=this.requestMediaKeySystemAccess(t,p);const $=this.keySystemAccessPromises[t]={keySystemAccess:F};return F.catch(le=>{this.log(`Failed to obtain access to key-system "${t}": ${le}`)}),F.then(le=>{this.log(`Access for key-system "${le.keySystem}" obtained`);const Se=this.fetchServerCertificate(t);return this.log(`Create media-keys for "${t}"`),$.mediaKeys=le.createMediaKeys().then(Le=>(this.log(`Media-keys created for "${t}"`),Se.then($e=>$e?this.setMediaKeysServerCertificate(Le,t,$e):Le))),$.mediaKeys.catch(Le=>{this.error(`Failed to create media-keys for "${t}"}: ${Le}`)}),$.mediaKeys})}return F.then(()=>C.mediaKeys)}createMediaKeySessionContext({decryptdata:t,keySystem:o,mediaKeys:u}){this.log(`Creating key-system session "${o}" keyId: ${$r_hexDump(t.keyId||[])}`);const p=u.createSession(),C={decryptdata:t,keySystem:o,mediaKeys:u,mediaKeysSession:p,keyStatus:"status-pending"};return this.mediaKeySessions.push(C),C}renewKeySession(t){const o=t.decryptdata;if(o.pssh){const u=this.createMediaKeySessionContext(t),p=this.getKeyIdString(o);this.keyIdToKeySessionPromise[p]=this.generateRequestWithPreferredKeySession(u,"cenc",o.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(t)}getKeyIdString(t){if(!t)throw new Error("Could not read keyId of undefined decryptdata");if(null===t.keyId)throw new Error("keyId is null");return $r_hexDump(t.keyId)}updateKeySession(t,o){var u;const p=t.mediaKeysSession;return this.log(`Updating key-session "${p.sessionId}" for keyID ${$r_hexDump((null==(u=t.decryptdata)?void 0:u.keyId)||[])}\n      } (data length: ${o&&o.byteLength})`),p.update(o)}selectKeySystemFormat(t){const o=Object.keys(t.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${t.sn} ${t.type}: ${t.level}) key formats ${o.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(o)),this.keyFormatPromise}getKeyFormatPromise(t){return new Promise((o,u)=>{const p=gn(this.config),C=t.map(lt).filter(F=>!!F&&-1!==p.indexOf(F));return this.getKeySystemSelectionPromise(C).then(({keySystem:F})=>{const $=Ut(F);$?o($):u(new Error(`Unable to find format for key-system "${F}"`))}).catch(u)})}loadKey(t){const o=t.keyInfo.decryptdata,u=this.getKeyIdString(o),p=`(keyId: ${u} format: "${o.keyFormat}" method: ${o.method} uri: ${o.uri})`;this.log(`Starting session for key ${p}`);let C=this.keyIdToKeySessionPromise[u];return C||(C=this.keyIdToKeySessionPromise[u]=this.getKeySystemForKeyPromise(o).then(({keySystem:F,mediaKeys:$})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${t.frag.sn} ${t.frag.type}: ${t.frag.level} using key ${p}`),this.attemptSetMediaKeys(F,$).then(()=>{this.throwIfDestroyed();const le=this.createMediaKeySessionContext({keySystem:F,mediaKeys:$,decryptdata:o});return this.generateRequestWithPreferredKeySession(le,"cenc",o.pssh,"playlist-key")}))),C.catch(F=>this.handleError(F))),C}throwIfDestroyed(t="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(t){!this.hls||(this.error(t.message),this.hls.trigger(it.ERROR,t instanceof Ro?t.data:{type:rr.KEY_SYSTEM_ERROR,details:hn.KEY_SYSTEM_NO_KEYS,error:t,fatal:!0}))}getKeySystemForKeyPromise(t){const o=this.getKeyIdString(t),u=this.keyIdToKeySessionPromise[o];if(!u){const p=lt(t.keyFormat),C=p?[p]:gn(this.config);return this.attemptKeySystemAccess(C)}return u}getKeySystemSelectionPromise(t){if(t.length||(t=gn(this.config)),0===t.length)throw new Ro({type:rr.KEY_SYSTEM_ERROR,details:hn.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${JSON.stringify({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(t)}_onMediaEncrypted(t){const{initDataType:o,initData:u}=t;if(this.debug(`"${t.type}" event: init data type: "${o}"`),null===u)return;let p,C;if("sinf"===o&&this.config.drmSystems[Hr.FAIRPLAY]){const Le=vn(new Uint8Array(u));try{const $e=wi(JSON.parse(Le).sinf),Je=Ks(new Uint8Array($e));if(!Je)return;p=Je.subarray(8,24),C=Hr.FAIRPLAY}catch($e){return void this.warn('Failed to parse sinf "encrypted" event message initData')}}else{const Le=function Ka(h){if(!(h instanceof ArrayBuffer)||h.byteLength<32)return null;const n={version:0,systemId:"",kids:null,data:null},t=new DataView(h),o=t.getUint32(0);if(h.byteLength!==o&&o>44||1886614376!==t.getUint32(4)||(n.version=t.getUint32(8)>>>24,n.version>1))return null;n.systemId=$r_hexDump(new Uint8Array(h,12,16));const p=t.getUint32(28);if(0===n.version){if(o-32<p)return null;n.data=new Uint8Array(h,32,p)}else if(1===n.version){n.kids=[];for(let C=0;C<p;C++)n.kids.push(new Uint8Array(h,32+16*C,16))}return n}(u);if(null===Le)return;0===Le.version&&"edef8ba979d64acea3c827dcd51d21ed"===Le.systemId&&Le.data&&(p=Le.data.subarray(8,24)),C=function dt(h){if("edef8ba979d64acea3c827dcd51d21ed"===h)return Hr.WIDEVINE}(Le.systemId)}if(!C||!p)return;const F=$r_hexDump(p),{keyIdToKeySessionPromise:$,mediaKeySessions:le}=this;let Se=$[F];for(let Le=0;Le<le.length;Le++){const $e=le[Le],Je=$e.decryptdata;if(Je.pssh||!Je.keyId)continue;const st=$r_hexDump(Je.keyId);if(F===st||-1!==Je.uri.replace(/-/g,"").indexOf(F)){Se=$[st],delete $[st],Je.pssh=new Uint8Array(u),Je.keyId=p,Se=$[F]=Se.then(()=>this.generateRequestWithPreferredKeySession($e,o,u,"encrypted-event-key-match"));break}}Se||(Se=$[F]=this.getKeySystemSelectionPromise([C]).then(({keySystem:Le,mediaKeys:$e})=>{var Je;this.throwIfDestroyed();const st=new ts("ISO-23001-7",F,null!=(Je=Ut(Le))?Je:"");return st.pssh=new Uint8Array(u),st.keyId=p,this.attemptSetMediaKeys(Le,$e).then(()=>{this.throwIfDestroyed();const gt=this.createMediaKeySessionContext({decryptdata:st,keySystem:Le,mediaKeys:$e});return this.generateRequestWithPreferredKeySession(gt,o,u,"encrypted-event-no-match")})})),Se.catch(Le=>this.handleError(Le))}_onWaitingForKey(t){this.log(`"${t.type}" event`)}attemptSetMediaKeys(t,o){const u=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${t}"`);const p=Promise.all(u).then(()=>{if(!this.media)throw new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(o)});return this.setMediaKeysQueue.push(p),p.then(()=>{this.log(`Media-keys set for "${t}"`),u.push(p),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(C=>-1===u.indexOf(C))})}generateRequestWithPreferredKeySession(t,o,u,p){var C,F;const $=null==(C=this.config.drmSystems)||null==(F=C[t.keySystem])?void 0:F.generateRequest;if($)try{const Je=$.call(this.hls,o,u,t);if(!Je)throw new Error("Invalid response from configured generateRequest filter");o=Je.initDataType,u=t.decryptdata.pssh=Je.initData?new Uint8Array(Je.initData):null}catch(Je){var le;if(this.warn(Je.message),null!=(le=this.hls)&&le.config.debug)throw Je}if(null===u)return this.log(`Skipping key-session request for "${p}" (no initData)`),Promise.resolve(t);const Se=this.getKeyIdString(t.decryptdata);this.log(`Generating key-session request for "${p}": ${Se} (init data type: ${o} length: ${u?u.byteLength:null})`);const Le=new Hl;t.mediaKeysSession.onmessage=Je=>{const st=t.mediaKeysSession;if(!st)return void Le.emit("error",new Error("invalid state"));const{messageType:gt,message:Tt}=Je;this.log(`"${gt}" message event for session "${st.sessionId}" message size: ${Tt.byteLength}`),"license-request"===gt||"license-renewal"===gt?this.renewLicense(t,Tt).catch(Zt=>{this.handleError(Zt),Le.emit("error",Zt)}):"license-release"===gt?t.keySystem===Hr.FAIRPLAY&&(this.updateKeySession(t,Io("acknowledged")),this.removeSession(t)):this.warn(`unhandled media key message type "${gt}"`)},t.mediaKeysSession.onkeystatuseschange=Je=>{if(!t.mediaKeysSession)return void Le.emit("error",new Error("invalid state"));this.onKeyStatusChange(t);const gt=t.keyStatus;Le.emit("keyStatus",gt),"expired"===gt&&(this.warn(`${t.keySystem} expired for key ${Se}`),this.renewKeySession(t))};const $e=new Promise((Je,st)=>{Le.on("error",st),Le.on("keyStatus",gt=>{gt.startsWith("usable")?Je():"output-restricted"===gt?st(new Ro({type:rr.KEY_SYSTEM_ERROR,details:hn.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):"internal-error"===gt?st(new Ro({type:rr.KEY_SYSTEM_ERROR,details:hn.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${gt}"`)):"expired"===gt?st(new Error("key expired while generating request")):this.warn(`unhandled key status change "${gt}"`)})});return t.mediaKeysSession.generateRequest(o,u).then(()=>{var Je;this.log(`Request generated for key-session "${null==(Je=t.mediaKeysSession)?void 0:Je.sessionId}" keyId: ${Se}`)}).catch(Je=>{throw new Ro({type:rr.KEY_SYSTEM_ERROR,details:hn.KEY_SYSTEM_NO_SESSION,error:Je,fatal:!1},`Error generating key-session request: ${Je}`)}).then(()=>$e).catch(Je=>{throw Le.removeAllListeners(),this.removeSession(t),Je}).then(()=>(Le.removeAllListeners(),t))}onKeyStatusChange(t){t.mediaKeysSession.keyStatuses.forEach((o,u)=>{this.log(`key status change "${o}" for keyStatuses keyId: ${$r_hexDump("buffer"in u?new Uint8Array(u.buffer,u.byteOffset,u.byteLength):new Uint8Array(u))} session keyId: ${$r_hexDump(new Uint8Array(t.decryptdata.keyId||[]))} uri: ${t.decryptdata.uri}`),t.keyStatus=o})}fetchServerCertificate(t){const o=this.config,p=new(0,o.loader)(o),C=this.getServerCertificateUrl(t);return C?(this.log(`Fetching serverCertificate for "${t}"`),new Promise((F,$)=>{const le={responseType:"arraybuffer",url:C},Se=o.certLoadPolicy.default;p.load(le,{loadPolicy:Se,timeout:Se.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},{onSuccess:(Je,st,gt,Tt)=>{F(Je.data)},onError:(Je,st,gt,Tt)=>{$(new Ro({type:rr.KEY_SYSTEM_ERROR,details:hn.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:gt,response:_i({url:le.url,data:void 0},Je)},`"${t}" certificate request failed (${C}). Status: ${Je.code} (${Je.text})`))},onTimeout:(Je,st,gt)=>{$(new Ro({type:rr.KEY_SYSTEM_ERROR,details:hn.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:gt,response:{url:le.url,data:void 0}},`"${t}" certificate request timed out (${C})`))},onAbort:(Je,st,gt)=>{$(new Error("aborted"))}})})):Promise.resolve()}setMediaKeysServerCertificate(t,o,u){return new Promise((p,C)=>{t.setServerCertificate(u).then(F=>{this.log(`setServerCertificate ${F?"success":"not supported by CDM"} (${null==u?void 0:u.byteLength}) on "${o}"`),p(t)}).catch(F=>{C(new Ro({type:rr.KEY_SYSTEM_ERROR,details:hn.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:F,fatal:!0},F.message))})})}renewLicense(t,o){return this.requestLicense(t,new Uint8Array(o)).then(u=>this.updateKeySession(t,new Uint8Array(u)).catch(p=>{throw new Ro({type:rr.KEY_SYSTEM_ERROR,details:hn.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:p,fatal:!0},p.message)}))}setupLicenseXHR(t,o,u,p){const C=this.config.licenseXhrSetup;return C?Promise.resolve().then(()=>{if(!u.decryptdata)throw new Error("Key removed");return C.call(this.hls,t,o,u,p)}).catch(F=>{if(!u.decryptdata)throw F;return t.open("POST",o,!0),C.call(this.hls,t,o,u,p)}).then(F=>(t.readyState||t.open("POST",o,!0),{xhr:t,licenseChallenge:F||p})):(t.open("POST",o,!0),Promise.resolve({xhr:t,licenseChallenge:p}))}requestLicense(t,o){const u=this.config.keyLoadPolicy.default;return new Promise((p,C)=>{const F=this.getLicenseServerUrl(t.keySystem);this.log(`Sending license request to URL: ${F}`);const $=new XMLHttpRequest;$.responseType="arraybuffer",$.onreadystatechange=()=>{if(!this.hls||!t.mediaKeysSession)return C(new Error("invalid state"));if(4===$.readyState)if(200===$.status){this._requestLicenseFailureCount=0;let le=$.response;this.log(`License received ${le instanceof ArrayBuffer?le.byteLength:le}`);const Se=this.config.licenseResponseCallback;if(Se)try{le=Se.call(this.hls,$,F,t)}catch(Le){this.error(Le)}p(le)}else{const le=u.errorRetry,Se=le?le.maxNumRetry:0;this._requestLicenseFailureCount++,this._requestLicenseFailureCount>Se||$.status>=400&&$.status<500?C(new Ro({type:rr.KEY_SYSTEM_ERROR,details:hn.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:$,response:{url:F,data:void 0,code:$.status,text:$.statusText}},`License Request XHR failed (${F}). Status: ${$.status} (${$.statusText})`)):(this.warn(`Retrying license request, ${Se-this._requestLicenseFailureCount+1} attempts left`),this.requestLicense(t,o).then(p,C))}},t.licenseXhr&&t.licenseXhr.readyState!==XMLHttpRequest.DONE&&t.licenseXhr.abort(),t.licenseXhr=$,this.setupLicenseXHR($,F,t,o).then(({xhr:le,licenseChallenge:Se})=>{le.send(Se)})})}onMediaAttached(t,o){if(!this.config.emeEnabled)return;const u=o.media;this.media=u,u.addEventListener("encrypted",this.onMediaEncrypted),u.addEventListener("waitingforkey",this.onWaitingForKey)}onMediaDetached(){const t=this.media,o=this.mediaKeySessions;t&&(t.removeEventListener("encrypted",this.onMediaEncrypted),t.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},ts.clearKeyUriToKeyIdMap();const u=o.length;h.CDMCleanupPromise=Promise.all(o.map(p=>this.removeSession(p)).concat(null==t?void 0:t.setMediaKeys(null).catch(p=>{this.log(`Could not clear media keys: ${p}. media.src: ${null==t?void 0:t.src}`)}))).then(()=>{u&&(this.log("finished closing key sessions and clearing media keys"),o.length=0)}).catch(p=>{this.log(`Could not close sessions and clear media keys: ${p}. media.src: ${null==t?void 0:t.src}`)})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(t,{sessionKeys:o}){if(o&&this.config.emeEnabled&&!this.keyFormatPromise){const u=o.reduce((p,C)=>(-1===p.indexOf(C.keyFormat)&&p.push(C.keyFormat),p),[]);this.log(`Selecting key-system from session-keys ${u.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(u)}}removeSession(t){const{mediaKeysSession:o,licenseXhr:u}=t;if(o){this.log(`Remove licenses and keys and close session ${o.sessionId}`),o.onmessage=null,o.onkeystatuseschange=null,u&&u.readyState!==XMLHttpRequest.DONE&&u.abort(),t.mediaKeysSession=t.decryptdata=t.licenseXhr=void 0;const p=this.mediaKeySessions.indexOf(t);return p>-1&&this.mediaKeySessions.splice(p,1),o.remove().catch(C=>{this.log(`Could not remove session: ${C}`)}).then(()=>o.close()).catch(C=>{this.log(`Could not close session: ${C}`)})}}}return h.CDMCleanupPromise=void 0,h})();class Ro extends Error{constructor(n,t){super(t),this.data=void 0,n.error||(n.error=new Error(t)),this.data=n,n.err=n.error}}class ta{constructor(n){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=u=>{try{this.apply(u,{ot:"m",su:!this.initialized})}catch(p){Bt.warn("Could not generate manifest CMCD data.",p)}},this.applyFragmentData=u=>{try{const p=u.frag,C=this.hls.levels[p.level],F=this.getObjectType(p),$={d:1e3*p.duration,ot:F};("v"===F||"a"===F||"av"==F)&&($.br=C.bitrate/1e3,$.tb=this.getTopBandwidth(F)/1e3,$.bl=this.getBufferLength(F)),this.apply(u,$)}catch(p){Bt.warn("Could not generate segment CMCD data.",p)}},this.hls=n;const t=this.config=n.config,{cmcd:o}=t;null!=o&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=o.sessionId||ta.uuid(),this.cid=o.contentId,this.useHeaders=!0===o.useHeaders,this.registerListeners())}registerListeners(){const n=this.hls;n.on(it.MEDIA_ATTACHED,this.onMediaAttached,this),n.on(it.MEDIA_DETACHED,this.onMediaDetached,this),n.on(it.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const n=this.hls;n.off(it.MEDIA_ATTACHED,this.onMediaAttached,this),n.off(it.MEDIA_DETACHED,this.onMediaDetached,this),n.off(it.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null}onMediaAttached(n,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){!this.media||(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(n,t){var o,u;this.audioBuffer=null==(o=t.tracks.audio)?void 0:o.buffer,this.videoBuffer=null==(u=t.tracks.video)?void 0:u.buffer}createData(){var n;return{v:1,sf:"h",sid:this.sid,cid:this.cid,pr:null==(n=this.media)?void 0:n.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(n,t={}){if(Wr(t,this.createData()),this.starved&&("i"===t.ot||"v"===t.ot||"av"===t.ot)&&(t.bs=!0,t.su=!0,this.starved=!1),null==t.su&&(t.su=this.buffering),this.useHeaders){const u=ta.toHeaders(t);if(!Object.keys(u).length)return;n.headers||(n.headers={}),Wr(n.headers,u)}else{const u=ta.toQuery(t);if(!u)return;n.url=ta.appendQueryToUri(n.url,u)}}getObjectType(n){const{type:t}=n;return"subtitle"===t?"tt":"initSegment"===n.sn?"i":"audio"===t?"a":"main"===t?this.hls.audioTracks.length?"v":"av":void 0}getTopBandwidth(n){let o,t=0;const u=this.hls;if("a"===n)o=u.audioTracks;else{const p=u.maxAutoLevel;o=u.levels.slice(0,p>-1?p+1:u.levels.length)}for(const p of o)p.bitrate>t&&(t=p.bitrate);return t>0?t:NaN}getBufferLength(n){const t=this.hls.media,o="a"===n?this.audioBuffer:this.videoBuffer;return o&&t?1e3*ni.bufferInfo(o,t.currentTime,this.config.maxBufferHole).len:NaN}createPlaylistLoader(){const{pLoader:n}=this.config,t=this.applyPlaylistData,o=n||this.config.loader;return class{constructor(p){this.loader=void 0,this.loader=new o(p)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(p,C,F){t(p),this.loader.load(p,C,F)}}}createFragmentLoader(){const{fLoader:n}=this.config,t=this.applyFragmentData,o=n||this.config.loader;return class{constructor(p){this.loader=void 0,this.loader=new o(p)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(p,C,F){t(p),this.loader.load(p,C,F)}}}static uuid(){const n=URL.createObjectURL(new Blob),t=n.toString();return URL.revokeObjectURL(n),t.slice(t.lastIndexOf("/")+1)}static serialize(n){const t=[],o=le=>!Number.isNaN(le)&&null!=le&&""!==le&&!1!==le,u=le=>Math.round(le),p=le=>100*u(le/100),F={br:u,d:u,bl:p,dl:p,mtp:p,nor:le=>encodeURIComponent(le),rtp:p,tb:u},$=Object.keys(n||{}).sort();for(const le of $){let Se=n[le];if(!o(Se)||"v"===le&&1===Se||"pr"==le&&1===Se)continue;const Le=F[le];Le&&(Se=Le(Se));const $e=typeof Se;let Je;Je="ot"===le||"sf"===le||"st"===le?`${le}=${Se}`:"boolean"===$e?le:"number"===$e?`${le}=${Se}`:`${le}=${JSON.stringify(Se)}`,t.push(Je)}return t.join(",")}static toHeaders(n){const t=Object.keys(n),o={},u=["Object","Request","Session","Status"],p=[{},{},{},{}],C={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};for(const F of t)p[null!=C[F]?C[F]:1][F]=n[F];for(let F=0;F<p.length;F++){const $=ta.serialize(p[F]);$&&(o[`CMCD-${u[F]}`]=$)}return o}static toQuery(n){return`CMCD=${encodeURIComponent(ta.serialize(n))}`}static appendQueryToUri(n,t){if(!t)return n;const o=n.includes("?")?"&":"?";return`${n}${o}${t}`}}function Gc(h,n,t,o){!h||Object.keys(n).forEach(u=>{const p=h.filter(C=>C.groupId===u).map(C=>{const F=Wr({},C);return F.details=void 0,F.attrs=new fr(F.attrs),F.url=F.attrs.URI=Ku(C.url,C.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",t),F.groupId=F.attrs["GROUP-ID"]=n[u],F.attrs["PATHWAY-ID"]=o,F});h.push(...p)})}function Ku(h,n,t,o){const{HOST:u,PARAMS:p,[t]:C}=o;let F;n&&(F=null==C?void 0:C[n],F&&(h=F));const $=new self.URL(h);return u&&!F&&($.host=u),p&&Object.keys(p).sort().forEach(le=>{le&&$.searchParams.set(le,p[le])}),$.href}const Wu=/^age:\s*[\d.]+\s*$/im;class Yu{constructor(n){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=n&&n.xhrSetup||null,this.stats=new to,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null}abortInternal(){const n=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),n&&(n.onreadystatechange=null,n.onprogress=null,4!==n.readyState&&(this.stats.aborted=!0,n.abort()))}abort(){var n;this.abortInternal(),null!=(n=this.callbacks)&&n.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(n,t,o){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=n,this.config=t,this.callbacks=o,this.loadInternal()}loadInternal(){const{config:n,context:t}=this;if(!n)return;const o=this.loader=new self.XMLHttpRequest,u=this.stats;u.loading.first=0,u.loaded=0,u.aborted=!1;const p=this.xhrSetup;p?Promise.resolve().then(()=>{if(!this.stats.aborted)return p(o,t.url)}).catch(C=>(o.open("GET",t.url,!0),p(o,t.url))).then(()=>{this.stats.aborted||this.openAndSendXhr(o,t,n)}).catch(C=>{this.callbacks.onError({code:o.status,text:C.message},t,o,u)}):this.openAndSendXhr(o,t,n)}openAndSendXhr(n,t,o){n.readyState||n.open("GET",t.url,!0);const u=this.context.headers,{maxTimeToFirstByteMs:p,maxLoadTimeMs:C}=o.loadPolicy;if(u)for(const F in u)n.setRequestHeader(F,u[F]);t.rangeEnd&&n.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),n.onreadystatechange=this.readystatechange.bind(this),n.onprogress=this.loadprogress.bind(this),n.responseType=t.responseType,self.clearTimeout(this.requestTimeout),o.timeout=p&&ir(p)?p:C,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),o.timeout),n.send()}readystatechange(){const{context:n,loader:t,stats:o}=this;if(!n||!t)return;const u=t.readyState,p=this.config;if(!o.aborted&&u>=2&&(0===o.loading.first&&(o.loading.first=Math.max(self.performance.now(),o.loading.start),p.timeout!==p.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),p.timeout=p.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),p.loadPolicy.maxLoadTimeMs-(o.loading.first-o.loading.start)))),4===u)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const C=t.status,F="text"!==t.responseType;if(C>=200&&C<300&&(F&&t.response||null!==t.responseText)){o.loading.end=Math.max(self.performance.now(),o.loading.first);const $=F?t.response:t.responseText;if(o.loaded=o.total="arraybuffer"===t.responseType?$.byteLength:$.length,o.bwEstimate=8e3*o.total/(o.loading.end-o.loading.first),!this.callbacks)return;const Se=this.callbacks.onProgress;if(Se&&Se(o,n,$,t),!this.callbacks)return;this.callbacks.onSuccess({url:t.responseURL,data:$,code:C},o,n,t)}else{const $=p.loadPolicy.errorRetry;Ja($,o.retry,!1,C)?this.retry($):(Bt.error(`${C} while loading ${n.url}`),this.callbacks.onError({code:C,text:t.statusText},n,t,o))}}}loadtimeout(){var n;const t=null==(n=this.config)?void 0:n.loadPolicy.timeoutRetry;if(Ja(t,this.stats.retry,!0))this.retry(t);else{Bt.warn(`timeout while loading ${this.context.url}`);const u=this.callbacks;u&&(this.abortInternal(),u.onTimeout(this.stats,this.context,this.loader))}}retry(n){const{context:t,stats:o}=this;this.retryDelay=Gi(n,o.retry),o.retry++,Bt.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${t.url}, retrying ${o.retry}/${n.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(n){const t=this.stats;t.loaded=n.loaded,n.lengthComputable&&(t.total=n.total)}getCacheAge(){let n=null;if(this.loader&&Wu.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");n=t?parseFloat(t):null}return n}getResponseHeader(n){return this.loader&&new RegExp(`^${n}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(n):null}}const mh=/(\d+)-(\d+)\/(\d+)/;class Kc{constructor(n){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=n.fetchSetup||Yc,this.controller=new self.AbortController,this.stats=new to}destroy(){this.loader=this.callbacks=null,this.abortInternal()}abortInternal(){const n=this.response;null!=n&&n.ok||(this.stats.aborted=!0,this.controller.abort())}abort(){var n;this.abortInternal(),null!=(n=this.callbacks)&&n.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(n,t,o){const u=this.stats;if(u.loading.start)throw new Error("Loader can only be used once.");u.loading.start=self.performance.now();const p=function Wc(h,n){const t={method:"GET",mode:"cors",credentials:"same-origin",signal:n,headers:new self.Headers(Wr({},h.headers))};return h.rangeEnd&&t.headers.set("Range","bytes="+h.rangeStart+"-"+String(h.rangeEnd-1)),t}(n,this.controller.signal),C=o.onProgress,F="arraybuffer"===n.responseType,$=F?"byteLength":"length",{maxTimeToFirstByteMs:le,maxLoadTimeMs:Se}=t.loadPolicy;this.context=n,this.config=t,this.callbacks=o,this.request=this.fetchSetup(n,p),self.clearTimeout(this.requestTimeout),t.timeout=le&&ir(le)?le:Se,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),o.onTimeout(u,n,this.response)},t.timeout),self.fetch(this.request).then(Le=>{this.response=this.loader=Le;const $e=Math.max(self.performance.now(),u.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=Se,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),o.onTimeout(u,n,this.response)},Se-($e-u.loading.start)),!Le.ok){const{status:Je,statusText:st}=Le;throw new vh(st||"fetch, bad network response",Je,Le)}return u.loading.first=$e,u.total=function qd(h){const n=h.get("Content-Range");if(n){const o=function xa(h){const n=mh.exec(h);if(n)return parseInt(n[2])-parseInt(n[1])+1}(n);if(ir(o))return o}const t=h.get("Content-Length");if(t)return parseInt(t)}(Le.headers)||u.total,C&&ir(t.highWaterMark)?this.loadProgressively(Le,u,n,t.highWaterMark,C):F?Le.arrayBuffer():"json"===n.responseType?Le.json():Le.text()}).then(Le=>{const{response:$e}=this;self.clearTimeout(this.requestTimeout),u.loading.end=Math.max(self.performance.now(),u.loading.first);const Je=Le[$];Je&&(u.loaded=u.total=Je);const st={url:$e.url,data:Le,code:$e.status};C&&!ir(t.highWaterMark)&&C(u,n,Le,$e),o.onSuccess(st,u,n,$e)}).catch(Le=>{self.clearTimeout(this.requestTimeout),u.aborted||o.onError({code:Le&&Le.code||0,text:Le?Le.message:null},n,Le?Le.details:null,u)})}getCacheAge(){let n=null;if(this.response){const t=this.response.headers.get("age");n=t?parseFloat(t):null}return n}getResponseHeader(n){return this.response?this.response.headers.get(n):null}loadProgressively(n,t,o,u=0,p){const C=new Es,F=n.body.getReader(),$=()=>F.read().then(le=>{if(le.done)return C.dataLength&&p(t,o,C.flush(),n),Promise.resolve(new ArrayBuffer(0));const Se=le.value,Le=Se.length;return t.loaded+=Le,Le<u||C.dataLength?(C.push(Se),C.dataLength>=u&&p(t,o,C.flush(),n)):p(t,o,Se,n),$()}).catch(()=>Promise.reject());return $()}}function Yc(h,n){return new self.Request(h.url,n)}class vh extends Error{constructor(n,t,o){super(n),this.code=void 0,this.details=void 0,this.code=t,this.details=o}}const Zu=/\s/,Zc={newCue(h,n,t,o){const u=[];let p,C,F,$,le;const Se=self.VTTCue||self.TextTrackCue;for(let $e=0;$e<o.rows.length;$e++)if(p=o.rows[$e],F=!0,$=0,le="",!p.isEmpty()){var Le;for(let gt=0;gt<p.chars.length;gt++)Zu.test(p.chars[gt].uchar)&&F?$++:(le+=p.chars[gt].uchar,F=!1);p.cueStartTime=n,n===t&&(t+=1e-4),$>=16?$--:$++;const Je=Fu(le.trim()),st=Ql(n,t,Je);null!=h&&null!=(Le=h.cues)&&Le.getCueById(st)||(C=new Se(n,t,Je),C.id=st,C.line=$e+1,C.align="left",C.position=10+Math.min(80,10*Math.floor(8*$/32)),u.push(C))}return h&&u.length&&(u.sort(($e,Je)=>"auto"===$e.line||"auto"===Je.line?0:$e.line>8&&Je.line>8?Je.line-$e.line:$e.line-Je.line),u.forEach($e=>Ps(h,$e))),u}},Qd=_i(_i({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Yu,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:class Ma{constructor(n){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=-1,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=n;const t=n.config;this.bwEstimator=new jd(t.abrEwmaSlowVoD,t.abrEwmaFastVoD,t.abrEwmaDefaultEstimate),this.registerListeners()}registerListeners(){const{hls:n}=this;n.on(it.FRAG_LOADING,this.onFragLoading,this),n.on(it.FRAG_LOADED,this.onFragLoaded,this),n.on(it.FRAG_BUFFERED,this.onFragBuffered,this),n.on(it.LEVEL_SWITCHING,this.onLevelSwitching,this),n.on(it.LEVEL_LOADED,this.onLevelLoaded,this)}unregisterListeners(){const{hls:n}=this;n.off(it.FRAG_LOADING,this.onFragLoading,this),n.off(it.FRAG_LOADED,this.onFragLoaded,this),n.off(it.FRAG_BUFFERED,this.onFragBuffered,this),n.off(it.LEVEL_SWITCHING,this.onLevelSwitching,this),n.off(it.LEVEL_LOADED,this.onLevelLoaded,this)}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null}onFragLoading(n,t){var o;const u=t.frag;this.ignoreFragment(u)||(this.fragCurrent=u,this.partCurrent=null!=(o=t.part)?o:null,this.clearTimer(),this.timer=self.setInterval(this.onCheck,100))}onLevelSwitching(n,t){this.clearTimer()}getTimeToLoadFrag(n,t,o,u){return n+o/t+(u?this.lastLevelLoadSec:0)}onLevelLoaded(n,t){const o=this.hls.config,{total:u,bwEstimate:p}=t.stats;ir(u)&&ir(p)&&(this.lastLevelLoadSec=8*u/p),t.details.live?this.bwEstimator.update(o.abrEwmaSlowLive,o.abrEwmaFastLive):this.bwEstimator.update(o.abrEwmaSlowVoD,o.abrEwmaFastVoD)}_abandonRulesCheck(){const{fragCurrent:n,partCurrent:t,hls:o}=this,{autoLevelEnabled:u,media:p}=o;if(!n||!p)return;const C=performance.now(),F=t?t.stats:n.stats,$=t?t.duration:n.duration,le=C-F.loading.start;if(F.aborted||F.loaded&&F.loaded===F.total||0===n.level)return this.clearTimer(),void(this._nextAutoLevel=-1);if(!u||p.paused||!p.playbackRate||!p.readyState)return;const Se=o.mainForwardBufferInfo;if(null===Se)return;const Le=this.bwEstimator.getEstimateTTFB(),$e=Math.abs(p.playbackRate);if(le<=Math.max(Le,$/(2*$e)*1e3))return;const Je=Se.len/$e;if(Je>=2*$/$e)return;const st=F.loading.first?F.loading.first-F.loading.start:-1,gt=F.loaded&&st>-1,Tt=this.bwEstimator.getEstimate(),{levels:Zt,minAutoLevel:rn}=o,Mn=F.total||Math.max(F.loaded,Math.round($*Zt[n.level].maxBitrate/8));let pn=le-st;pn<1&&gt&&(pn=Math.min(le,8*F.loaded/Tt));const Kn=gt?1e3*F.loaded/pn:0,xn=Kn?(Mn-F.loaded)/Kn:8*Mn/Tt+Le/1e3;if(xn<=Je)return;const Wn=Kn?8*Kn:Tt;let Sn,er=Number.POSITIVE_INFINITY;for(Sn=n.level-1;Sn>rn&&(er=this.getTimeToLoadFrag(Le/1e3,Wn,$*Zt[Sn].maxBitrate,!Zt[Sn].details),!(er<Je));Sn--);er>=xn||er>10*$||(o.nextLoadLevel=Sn,gt?this.bwEstimator.sample(le-Math.min(Le,st),F.loaded):this.bwEstimator.sampleTTFB(le),this.clearTimer(),Bt.warn(`[abr] Fragment ${n.sn}${t?" part "+t.index:""} of level ${n.level} is loading too slowly;\n      Time to underbuffer: ${Je.toFixed(3)} s\n      Estimated load time for current fragment: ${xn.toFixed(3)} s\n      Estimated load time for down switch fragment: ${er.toFixed(3)} s\n      TTFB estimate: ${st}\n      Current BW estimate: ${ir(Tt)?(Tt/1024).toFixed(3):"Unknown"} Kb/s\n      New BW estimate: ${(this.bwEstimator.getEstimate()/1024).toFixed(3)} Kb/s\n      Aborting and switching to level ${Sn}`),n.loader&&(this.fragCurrent=this.partCurrent=null,n.abortRequests()),o.trigger(it.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,part:t,stats:F}))}onFragLoaded(n,{frag:t,part:o}){const u=o?o.stats:t.stats;if("main"===t.type&&this.bwEstimator.sampleTTFB(u.loading.first-u.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){const C=this.hls.levels[t.level],F=(C.loaded?C.loaded.bytes:0)+u.loaded,$=(C.loaded?C.loaded.duration:0)+(o?o.duration:t.duration);C.loaded={bytes:F,duration:$},C.realBitrate=Math.round(8*F/$)}t.bitrateTest&&(this.onFragBuffered(it.FRAG_BUFFERED,{stats:u,frag:t,part:o,id:t.type}),t.bitrateTest=!1)}}onFragBuffered(n,t){const{frag:o,part:u}=t,p=null!=u&&u.stats.loaded?u.stats:o.stats;if(p.aborted||this.ignoreFragment(o))return;const C=p.parsing.end-p.loading.start-Math.min(p.loading.first-p.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(C,p.loaded),p.bwEstimate=this.bwEstimator.getEstimate(),this.bitrateTestDelay=o.bitrateTest?C/1e3:0}ignoreFragment(n){return"main"!==n.type||"initSegment"===n.sn}clearTimer(){self.clearInterval(this.timer)}get nextAutoLevel(){const n=this._nextAutoLevel;if(-1!==n&&!this.bwEstimator.canEstimate())return n;let o=this.getNextABRAutoLevel();if(-1!==n){const u=this.hls.levels;if(u.length>Math.max(n,o)&&u[n].loadError<=u[o].loadError)return n}return-1!==n&&(o=Math.min(n,o)),o}getNextABRAutoLevel(){const{fragCurrent:n,partCurrent:t,hls:o}=this,{maxAutoLevel:u,config:p,minAutoLevel:C,media:F}=o,$=t?t.duration:n?n.duration:0,le=F&&0!==F.playbackRate?Math.abs(F.playbackRate):1,Se=this.bwEstimator?this.bwEstimator.getEstimate():p.abrEwmaDefaultEstimate,Le=o.mainForwardBufferInfo,$e=(Le?Le.len:0)/le;let Je=this.findBestLevel(Se,C,u,$e,p.abrBandWidthFactor,p.abrBandWidthUpFactor);if(Je>=0)return Je;Bt.trace(`[abr] ${$e?"rebuffering expected":"buffer is empty"}, finding optimal quality level`);let st=$?Math.min($,p.maxStarvationDelay):p.maxStarvationDelay,gt=p.abrBandWidthFactor,Tt=p.abrBandWidthUpFactor;if(!$e){const Zt=this.bitrateTestDelay;Zt&&(st=($?Math.min($,p.maxLoadingDelay):p.maxLoadingDelay)-Zt,Bt.trace(`[abr] bitrate test took ${Math.round(1e3*Zt)}ms, set first fragment max fetchDuration to ${Math.round(1e3*st)} ms`),gt=Tt=1)}return Je=this.findBestLevel(Se,C,u,$e+st,gt,Tt),Math.max(Je,0)}findBestLevel(n,t,o,u,p,C){var F;const{fragCurrent:$,partCurrent:le,lastLoadedFragLevel:Se}=this,{levels:Le}=this.hls,$e=Le[Se],Je=!(null==$e||null==(F=$e.details)||!F.live),st=null==$e?void 0:$e.codecSet,gt=le?le.duration:$?$.duration:0,Tt=this.bwEstimator.getEstimateTTFB()/1e3;let Zt=t,rn=-1;for(let tn=o;tn>=t;tn--){const Mn=Le[tn];if(!Mn||st&&Mn.codecSet!==st){Mn&&(Zt=Math.min(tn,Zt),rn=Math.max(tn,rn));continue}-1!==rn&&Bt.trace(`[abr] Skipped level(s) ${Zt}-${rn} with CODECS:"${Le[rn].attrs.CODECS}"; not compatible with "${$e.attrs.CODECS}"`);const pn=Mn.details,Kn=(le?null==pn?void 0:pn.partTarget:null==pn?void 0:pn.averagetargetduration)||gt;let xn;xn=tn<=Se?p*n:C*n;const Wn=Le[tn].maxBitrate,er=this.getTimeToLoadFrag(Tt,xn,Wn*Kn,void 0===pn);if(Bt.trace(`[abr] level:${tn} adjustedbw-bitrate:${Math.round(xn-Wn)} avgDuration:${Kn.toFixed(1)} maxFetchDuration:${u.toFixed(1)} fetchDuration:${er.toFixed(1)}`),xn>Wn&&(0===er||!ir(er)||Je&&!this.bitrateTestDelay||er<u))return tn}return-1}set nextAutoLevel(n){this._nextAutoLevel=n}},bufferController:class Tg{constructor(n){this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=()=>{const{media:t,mediaSource:o}=this;Bt.log("[buffer-controller]: Media source opened"),t&&(t.removeEventListener("emptied",this._onMediaEmptied),this.updateMediaElementDuration(),this.hls.trigger(it.MEDIA_ATTACHED,{media:t})),o&&o.removeEventListener("sourceopen",this._onMediaSourceOpen),this.checkPendingTracks()},this._onMediaSourceClose=()=>{Bt.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=()=>{Bt.log("[buffer-controller]: Media source ended")},this._onMediaEmptied=()=>{const{media:t,_objectUrl:o}=this;t&&t.src!==o&&Bt.error(`Media element src was set while attaching MediaSource (${o} > ${t.src})`)},this.hls=n,this._initSourceBuffer(),this.registerListeners()}hasSourceTypes(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null}registerListeners(){const{hls:n}=this;n.on(it.MEDIA_ATTACHING,this.onMediaAttaching,this),n.on(it.MEDIA_DETACHING,this.onMediaDetaching,this),n.on(it.MANIFEST_LOADING,this.onManifestLoading,this),n.on(it.MANIFEST_PARSED,this.onManifestParsed,this),n.on(it.BUFFER_RESET,this.onBufferReset,this),n.on(it.BUFFER_APPENDING,this.onBufferAppending,this),n.on(it.BUFFER_CODECS,this.onBufferCodecs,this),n.on(it.BUFFER_EOS,this.onBufferEos,this),n.on(it.BUFFER_FLUSHING,this.onBufferFlushing,this),n.on(it.LEVEL_UPDATED,this.onLevelUpdated,this),n.on(it.FRAG_PARSED,this.onFragParsed,this),n.on(it.FRAG_CHANGED,this.onFragChanged,this)}unregisterListeners(){const{hls:n}=this;n.off(it.MEDIA_ATTACHING,this.onMediaAttaching,this),n.off(it.MEDIA_DETACHING,this.onMediaDetaching,this),n.off(it.MANIFEST_LOADING,this.onManifestLoading,this),n.off(it.MANIFEST_PARSED,this.onManifestParsed,this),n.off(it.BUFFER_RESET,this.onBufferReset,this),n.off(it.BUFFER_APPENDING,this.onBufferAppending,this),n.off(it.BUFFER_CODECS,this.onBufferCodecs,this),n.off(it.BUFFER_EOS,this.onBufferEos,this),n.off(it.BUFFER_FLUSHING,this.onBufferFlushing,this),n.off(it.LEVEL_UPDATED,this.onLevelUpdated,this),n.off(it.FRAG_PARSED,this.onFragParsed,this),n.off(it.FRAG_CHANGED,this.onFragChanged,this)}_initSourceBuffer(){this.sourceBuffer={},this.operationQueue=new uh(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.lastMpegAudioChunk=null}onManifestLoading(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null}onManifestParsed(n,t){let o=2;(t.audio&&!t.video||!t.altAudio)&&(o=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=o,Bt.log(`${this.bufferCodecEventsExpected} bufferCodec event(s) expected`)}onMediaAttaching(n,t){const o=this.media=t.media;if(o&&Gd){const u=this.mediaSource=new Gd;u.addEventListener("sourceopen",this._onMediaSourceOpen),u.addEventListener("sourceended",this._onMediaSourceEnded),u.addEventListener("sourceclose",this._onMediaSourceClose),o.src=self.URL.createObjectURL(u),this._objectUrl=o.src,o.addEventListener("emptied",this._onMediaEmptied)}}onMediaDetaching(){const{media:n,mediaSource:t,_objectUrl:o}=this;if(t){if(Bt.log("[buffer-controller]: media source detaching"),"open"===t.readyState)try{t.endOfStream()}catch(u){Bt.warn(`[buffer-controller]: onMediaDetaching: ${u.message} while calling endOfStream`)}this.onBufferReset(),t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),n&&(n.removeEventListener("emptied",this._onMediaEmptied),o&&self.URL.revokeObjectURL(o),n.src===o?(n.removeAttribute("src"),n.load()):Bt.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(it.MEDIA_DETACHED,void 0)}onBufferReset(){this.getSourceBufferTypes().forEach(n=>{const t=this.sourceBuffer[n];try{t&&(this.removeBufferListeners(n),this.mediaSource&&this.mediaSource.removeSourceBuffer(t),this.sourceBuffer[n]=void 0)}catch(o){Bt.warn(`[buffer-controller]: Failed to reset the ${n} buffer`,o)}}),this._initSourceBuffer()}onBufferCodecs(n,t){const o=this.getSourceBufferTypes().length;Object.keys(t).forEach(u=>{if(o){const p=this.tracks[u];if(p&&"function"==typeof p.buffer.changeType){const{id:C,codec:F,levelCodec:$,container:le,metadata:Se}=t[u],Le=(p.levelCodec||p.codec).replace(Kd,"$1"),$e=($||F).replace(Kd,"$1");Le!==$e&&(this.appendChangeType(u,`${le};codecs=${$||F}`),Bt.log(`[buffer-controller]: switching codec ${Le} to ${$e}`),this.tracks[u]={buffer:p.buffer,codec:F,container:le,levelCodec:$,metadata:Se,id:C})}}else this.pendingTracks[u]=t[u]}),!o&&(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())}appendChangeType(n,t){const{operationQueue:o}=this,u={execute:()=>{const p=this.sourceBuffer[n];p&&(Bt.log(`[buffer-controller]: changing ${n} sourceBuffer type to ${t}`),p.changeType(t)),o.shiftAndExecuteNext(n)},onStart:()=>{},onComplete:()=>{},onError:p=>{Bt.warn(`[buffer-controller]: Failed to change ${n} SourceBuffer type`,p)}};o.append(u,n)}onBufferAppending(n,t){const{hls:o,operationQueue:u,tracks:p}=this,{data:C,type:F,frag:$,part:le,chunkMeta:Se}=t,Le=Se.buffering[F],$e=self.performance.now();Le.start=$e;const Je=$.stats.buffering,st=le?le.stats.buffering:null;0===Je.start&&(Je.start=$e),st&&0===st.start&&(st.start=$e);const gt=p.audio;let Tt=!1;"audio"===F&&"audio/mpeg"===(null==gt?void 0:gt.container)&&(Tt=!this.lastMpegAudioChunk||1===Se.id||this.lastMpegAudioChunk.sn!==Se.sn,this.lastMpegAudioChunk=Se);const Zt=$.start;u.append({execute:()=>{if(Le.executeStart=self.performance.now(),Tt){const tn=this.sourceBuffer[F];if(tn){const Mn=Zt-tn.timestampOffset;Math.abs(Mn)>=.1&&(Bt.log(`[buffer-controller]: Updating audio SourceBuffer timestampOffset to ${Zt} (delta: ${Mn}) sn: ${$.sn})`),tn.timestampOffset=Zt)}}this.appendExecutor(C,F)},onStart:()=>{},onComplete:()=>{const tn=self.performance.now();Le.executeEnd=Le.end=tn,0===Je.first&&(Je.first=tn),st&&0===st.first&&(st.first=tn);const{sourceBuffer:Mn}=this,pn={};for(const Kn in Mn)pn[Kn]=ni.getBuffered(Mn[Kn]);this.appendError=0,this.hls.trigger(it.BUFFER_APPENDED,{type:F,frag:$,part:le,chunkMeta:Se,parent:$.type,timeRanges:pn})},onError:tn=>{Bt.error(`[buffer-controller]: Error encountered while trying to append to the ${F} SourceBuffer`,tn);const Mn={type:rr.MEDIA_ERROR,parent:$.type,details:hn.BUFFER_APPEND_ERROR,frag:$,part:le,chunkMeta:Se,error:tn,err:tn,fatal:!1};tn.code===DOMException.QUOTA_EXCEEDED_ERR?Mn.details=hn.BUFFER_FULL_ERROR:(this.appendError++,Mn.details=hn.BUFFER_APPEND_ERROR,this.appendError>o.config.appendErrorMaxRetry&&(Bt.error(`[buffer-controller]: Failed ${o.config.appendErrorMaxRetry} times to append segment in sourceBuffer`),Mn.fatal=!0)),o.trigger(it.ERROR,Mn)}},F)}onBufferFlushing(n,t){const{operationQueue:o}=this,u=p=>({execute:this.removeExecutor.bind(this,p,t.startOffset,t.endOffset),onStart:()=>{},onComplete:()=>{this.hls.trigger(it.BUFFER_FLUSHED,{type:p})},onError:C=>{Bt.warn(`[buffer-controller]: Failed to remove from ${p} SourceBuffer`,C)}});t.type?o.append(u(t.type),t.type):this.getSourceBufferTypes().forEach(p=>{o.append(u(p),p)})}onFragParsed(n,t){const{frag:o,part:u}=t,p=[],C=u?u.elementaryStreams:o.elementaryStreams;C.audiovideo?p.push("audiovideo"):(C.audio&&p.push("audio"),C.video&&p.push("video")),0===p.length&&Bt.warn(`Fragments must have at least one ElementaryStreamType set. type: ${o.type} level: ${o.level} sn: ${o.sn}`),this.blockBuffers(()=>{const $=self.performance.now();o.stats.buffering.end=$,u&&(u.stats.buffering.end=$),this.hls.trigger(it.FRAG_BUFFERED,{frag:o,part:u,stats:u?u.stats:o.stats,id:o.type})},p)}onFragChanged(n,t){this.flushBackBuffer()}onBufferEos(n,t){this.getSourceBufferTypes().reduce((u,p)=>{const C=this.sourceBuffer[p];return C&&(!t.type||t.type===p)&&(C.ending=!0,C.ended||(C.ended=!0,Bt.log(`[buffer-controller]: ${p} sourceBuffer now EOS`))),u&&!(C&&!C.ended)},!0)&&(Bt.log("[buffer-controller]: Queueing mediaSource.endOfStream()"),this.blockBuffers(()=>{this.getSourceBufferTypes().forEach(p=>{const C=this.sourceBuffer[p];C&&(C.ending=!1)});const{mediaSource:u}=this;u&&"open"===u.readyState?(Bt.log("[buffer-controller]: Calling mediaSource.endOfStream()"),u.endOfStream()):u&&Bt.info(`[buffer-controller]: Could not call mediaSource.endOfStream(). mediaSource.readyState: ${u.readyState}`)}))}onLevelUpdated(n,{details:t}){!t.fragments.length||(this.details=t,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())}flushBackBuffer(){const{hls:n,details:t,media:o,sourceBuffer:u}=this;if(!o||null===t)return;const p=this.getSourceBufferTypes();if(!p.length)return;const C=t.live&&null!==n.config.liveBackBufferLength?n.config.liveBackBufferLength:n.config.backBufferLength;if(!ir(C)||C<0)return;const F=o.currentTime,$=t.levelTargetDuration,le=Math.max(C,$),Se=Math.floor(F/$)*$-le;p.forEach(Le=>{const $e=u[Le];if($e){const Je=ni.getBuffered($e);if(Je.length>0&&Se>Je.start(0)){if(n.trigger(it.BACK_BUFFER_REACHED,{bufferEnd:Se}),t.live)n.trigger(it.LIVE_BACK_BUFFER_REACHED,{bufferEnd:Se});else if($e.ended&&Je.end(Je.length-1)-F<2*$)return void Bt.info(`[buffer-controller]: Cannot flush ${Le} back buffer while SourceBuffer is in ended state`);n.trigger(it.BUFFER_FLUSHING,{startOffset:0,endOffset:Se,type:Le})}}})}updateMediaElementDuration(){if(!this.details||!this.media||!this.mediaSource||"open"!==this.mediaSource.readyState)return;const{details:n,hls:t,media:o,mediaSource:u}=this,p=n.fragments[0].start+n.totalduration,C=o.duration,F=ir(u.duration)?u.duration:0;n.live&&t.config.liveDurationInfinity?(Bt.log("[buffer-controller]: Media Source duration is set to Infinity"),u.duration=1/0,this.updateSeekableRange(n)):(p>F&&p>C||!ir(C))&&(Bt.log(`[buffer-controller]: Updating Media Source duration to ${p.toFixed(3)}`),u.duration=p)}updateSeekableRange(n){const t=this.mediaSource,o=n.fragments;if(o.length&&n.live&&null!=t&&t.setLiveSeekableRange){const p=Math.max(0,o[0].start),C=Math.max(p,p+n.totalduration);t.setLiveSeekableRange(p,C)}}checkPendingTracks(){const{bufferCodecEventsExpected:n,operationQueue:t,pendingTracks:o}=this,u=Object.keys(o).length;if(u&&!n||2===u){this.createSourceBuffers(o),this.pendingTracks={};const p=this.getSourceBufferTypes();if(p.length)this.hls.trigger(it.BUFFER_CREATED,{tracks:this.tracks}),p.forEach(C=>{t.executeNext(C)});else{const C=new Error("could not create source buffer for media codec(s)");this.hls.trigger(it.ERROR,{type:rr.MEDIA_ERROR,details:hn.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:C,reason:C.message})}}}createSourceBuffers(n){const{sourceBuffer:t,mediaSource:o}=this;if(!o)throw Error("createSourceBuffers called when mediaSource was null");for(const u in n)if(!t[u]){const p=n[u];if(!p)throw Error(`source buffer exists for track ${u}, however track does not`);const C=p.levelCodec||p.codec,F=`${p.container};codecs=${C}`;Bt.log(`[buffer-controller]: creating sourceBuffer(${F})`);try{const $=t[u]=o.addSourceBuffer(F),le=u;this.addBufferListener(le,"updatestart",this._onSBUpdateStart),this.addBufferListener(le,"updateend",this._onSBUpdateEnd),this.addBufferListener(le,"error",this._onSBUpdateError),this.tracks[u]={buffer:$,codec:C,container:p.container,levelCodec:p.levelCodec,metadata:p.metadata,id:p.id}}catch($){Bt.error(`[buffer-controller]: error while trying to add sourceBuffer: ${$.message}`),this.hls.trigger(it.ERROR,{type:rr.MEDIA_ERROR,details:hn.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:$,mimeType:F})}}}_onSBUpdateStart(n){const{operationQueue:t}=this;t.current(n).onStart()}_onSBUpdateEnd(n){const{operationQueue:t}=this;t.current(n).onComplete(),t.shiftAndExecuteNext(n)}_onSBUpdateError(n,t){const o=new Error(`${n} SourceBuffer error`);Bt.error(`[buffer-controller]: ${o}`,t),this.hls.trigger(it.ERROR,{type:rr.MEDIA_ERROR,details:hn.BUFFER_APPENDING_ERROR,error:o,fatal:!1});const u=this.operationQueue.current(n);u&&u.onError(t)}removeExecutor(n,t,o){const{media:u,mediaSource:p,operationQueue:C,sourceBuffer:F}=this,$=F[n];if(!u||!p||!$)return Bt.warn(`[buffer-controller]: Attempting to remove from the ${n} SourceBuffer, but it does not exist`),void C.shiftAndExecuteNext(n);const le=ir(u.duration)?u.duration:1/0,Se=ir(p.duration)?p.duration:1/0,Le=Math.max(0,t),$e=Math.min(o,le,Se);$e>Le&&!$.ending?($.ended=!1,Bt.log(`[buffer-controller]: Removing [${Le},${$e}] from the ${n} SourceBuffer`),$.remove(Le,$e)):C.shiftAndExecuteNext(n)}appendExecutor(n,t){const{operationQueue:o,sourceBuffer:u}=this,p=u[t];if(!p)return Bt.warn(`[buffer-controller]: Attempting to append to the ${t} SourceBuffer, but it does not exist`),void o.shiftAndExecuteNext(t);p.ended=!1,p.appendBuffer(n)}blockBuffers(n,t=this.getSourceBufferTypes()){if(!t.length)return Bt.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve().then(n);const{operationQueue:o}=this,u=t.map(p=>o.appendBlocker(p));Promise.all(u).then(()=>{n(),t.forEach(p=>{const C=this.sourceBuffer[p];null!=C&&C.updating||o.shiftAndExecuteNext(p)})})}getSourceBufferTypes(){return Object.keys(this.sourceBuffer)}addBufferListener(n,t,o){const u=this.sourceBuffer[n];if(!u)return;const p=o.bind(this,n);this.listeners[n].push({event:t,listener:p}),u.addEventListener(t,p)}removeBufferListeners(n){const t=this.sourceBuffer[n];!t||this.listeners[n].forEach(o=>{t.removeEventListener(o.event,o.listener)})}},capLevelController:Us,errorController:class Ii{constructor(n){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=n,this.log=Bt.log.bind(Bt,"[info]:"),this.warn=Bt.warn.bind(Bt,"[warning]:"),this.error=Bt.error.bind(Bt,"[error]:"),this.registerListeners()}registerListeners(){const n=this.hls;n.on(it.ERROR,this.onError,this),n.on(it.MANIFEST_LOADING,this.onManifestLoading,this),n.on(it.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const n=this.hls;!n||(n.off(it.ERROR,this.onError,this),n.off(it.ERROR,this.onErrorOut,this),n.off(it.MANIFEST_LOADING,this.onManifestLoading,this),n.off(it.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(n){this.playlistError=0}stopLoad(){}getVariantLevelIndex(n){return"main"===(null==n?void 0:n.type)?n.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(n,t){var o;if(t.fatal)return;const u=this.hls,p=t.context;switch(t.details){case hn.FRAG_LOAD_ERROR:case hn.FRAG_LOAD_TIMEOUT:case hn.KEY_LOAD_ERROR:case hn.KEY_LOAD_TIMEOUT:return void(t.errorAction=this.getFragRetryOrSwitchAction(t));case hn.FRAG_GAP:case hn.FRAG_PARSING_ERROR:case hn.FRAG_DECRYPT_ERROR:return t.errorAction=this.getFragRetryOrSwitchAction(t),void(t.errorAction.action=2);case hn.LEVEL_EMPTY_ERROR:case hn.LEVEL_PARSING_ERROR:{var C,F;const $="main"===t.parent?t.level:u.loadLevel;t.details===hn.LEVEL_EMPTY_ERROR&&null!=(C=t.context)&&null!=(F=C.levelDetails)&&F.live?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,$):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,$))}return;case hn.LEVEL_LOAD_ERROR:case hn.LEVEL_LOAD_TIMEOUT:return void("number"==typeof(null==p?void 0:p.level)&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,p.level)));case hn.AUDIO_TRACK_LOAD_ERROR:case hn.AUDIO_TRACK_LOAD_TIMEOUT:case hn.SUBTITLE_LOAD_ERROR:case hn.SUBTITLE_TRACK_LOAD_TIMEOUT:if(p){const $=u.levels[u.loadLevel];if($&&("audioTrack"===p.type&&p.groupId===$.audioGroupId||"subtitleTrack"===p.type&&p.groupId===$.textGroupId))return t.errorAction=this.getPlaylistRetryOrSwitchAction(t,u.loadLevel),t.errorAction.action=2,void(t.errorAction.flags=1)}return;case hn.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const $=u.levels[u.loadLevel],le=null==$?void 0:$.attrs["HDCP-LEVEL"];le&&(t.errorAction={action:2,flags:2,hdcpLevel:le})}return;case hn.BUFFER_ADD_CODEC_ERROR:case hn.REMUX_ALLOC_ERROR:return void(t.errorAction=this.getLevelSwitchAction(t,null!=(o=t.level)?o:u.loadLevel));case hn.INTERNAL_EXCEPTION:case hn.BUFFER_APPENDING_ERROR:case hn.BUFFER_APPEND_ERROR:case hn.BUFFER_FULL_ERROR:case hn.LEVEL_SWITCH_ERROR:case hn.BUFFER_STALLED_ERROR:case hn.BUFFER_SEEK_OVER_HOLE:case hn.BUFFER_NUDGE_ON_STALL:return void(t.errorAction={action:0,flags:0})}if(t.type===rr.KEY_SYSTEM_ERROR){const $=this.getVariantLevelIndex(t.frag);return t.levelRetry=!1,void(t.errorAction=this.getLevelSwitchAction(t,$))}}getPlaylistRetryOrSwitchAction(n,t){var o;const p=_s(this.hls.config.playlistLoadPolicy,n),C=this.playlistError++,F=null==(o=n.response)?void 0:o.code;if(Ja(p,C,Zo(n),F))return{action:5,flags:0,retryConfig:p,retryCount:C};const le=this.getLevelSwitchAction(n,t);return p&&(le.retryConfig=p,le.retryCount=C),le}getFragRetryOrSwitchAction(n){const t=this.hls,o=this.getVariantLevelIndex(n.frag),u=t.levels[o],{fragLoadPolicy:p,keyLoadPolicy:C}=t.config,F=_s(n.details.startsWith("key")?C:p,n),$=t.levels.reduce((Le,$e)=>Le+$e.fragmentError,0);if(u){var le;n.details!==hn.FRAG_GAP&&u.fragmentError++;const Le=null==(le=n.response)?void 0:le.code;if(Ja(F,$,Zo(n),Le))return{action:5,flags:0,retryConfig:F,retryCount:$}}const Se=this.getLevelSwitchAction(n,o);return F&&(Se.retryConfig=F,Se.retryCount=$),Se}getLevelSwitchAction(n,t){const o=this.hls;null==t&&(t=o.loadLevel);const u=this.hls.levels[t];if(u&&(u.loadError++,o.autoLevelEnabled)){var p,C;let F=-1;const{levels:$,loadLevel:le,minAutoLevel:Se,maxAutoLevel:Le}=o,$e=null==(p=n.frag)?void 0:p.type,{type:Je,groupId:st}=null!=(C=n.context)?C:{};for(let gt=$.length;gt--;){const Tt=(gt+le)%$.length;if(Tt!==le&&Tt>=Se&&Tt<=Le&&0===$[Tt].loadError){const Zt=$[Tt];if(n.details===hn.FRAG_GAP&&n.frag){const rn=$[Tt].details;if(rn){const tn=as(n.frag,rn.fragments,n.frag.start);if(null!=tn&&tn.gap)continue}}else{if("audioTrack"===Je&&st===Zt.audioGroupId||"subtitleTrack"===Je&&st===Zt.textGroupId)continue;if("audio"===$e&&u.audioGroupId===Zt.audioGroupId||"subtitle"===$e&&u.textGroupId===Zt.textGroupId)continue}F=Tt;break}}if(F>-1&&o.loadLevel!==F)return n.levelRetry=!0,this.playlistError=0,{action:2,flags:0,nextAutoLevel:F}}return{action:2,flags:1}}onErrorOut(n,t){var o;switch(null==(o=t.errorAction)?void 0:o.action){case 0:break;case 2:this.sendAlternateToPenaltyBox(t),!t.errorAction.resolved&&t.details!==hn.FRAG_GAP&&(t.fatal=!0)}t.fatal&&this.hls.stopLoad()}sendAlternateToPenaltyBox(n){const t=this.hls,o=n.errorAction;if(!o)return;const{flags:u,hdcpLevel:p,nextAutoLevel:C}=o;switch(u){case 0:this.switchLevel(n,C);break;case 1:o.resolved||(o.resolved=this.redundantFailover(n));break;case 2:p&&(t.maxHdcpLevel=Ue[Ue.indexOf(p)-1],o.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`)}o.resolved||this.switchLevel(n,C)}switchLevel(n,t){void 0!==t&&n.errorAction&&(this.warn(`switching to level ${t} after ${n.details}`),this.hls.nextAutoLevel=t,n.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)}redundantFailover(n){const{hls:t,penalizedRenditions:o}=this,u="main"===n.parent?n.level:t.loadLevel,p=t.levels[u],C=p.url.length,F=n.frag?n.frag.urlId:p.urlId;p.urlId===F&&(!n.frag||p.details)&&this.penalizeRendition(p,n);for(let $=1;$<C;$++){const le=(F+$)%C,Se=o[le];if(!Se||uc(Se,n,o[F]))return this.warn(`Switching to Redundant Stream ${le+1}/${C}: "${p.url[le]}" after ${n.details}`),this.playlistError=0,t.levels.forEach(Le=>{Le.urlId=le}),t.nextLoadLevel=u,!0}return!1}penalizeRendition(n,t){const{penalizedRenditions:o}=this,u=o[n.urlId]||{lastErrorPerfMs:0,errors:[],details:void 0};u.lastErrorPerfMs=performance.now(),u.errors.push(t),u.details=n.details,o[n.urlId]=u}},fpsController:class jc{constructor(n){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=n,this.registerListeners()}setStreamController(n){this.streamController=n}registerListeners(){this.hls.on(it.MEDIA_ATTACHING,this.onMediaAttaching,this)}unregisterListeners(){this.hls.off(it.MEDIA_ATTACHING,this.onMediaAttaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(n,t){const o=this.hls.config;if(o.capLevelOnFPSDrop){const u=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=u,u&&"function"==typeof u.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),o.fpsDroppedMonitoringPeriod)}}checkFPS(n,t,o){const u=performance.now();if(t){if(this.lastTime){const C=o-this.lastDroppedFrames,F=t-this.lastDecodedFrames,$=1e3*C/(u-this.lastTime),le=this.hls;if(le.trigger(it.FPS_DROP,{currentDropped:C,currentDecoded:F,totalDroppedFrames:o}),$>0&&C>le.config.fpsDroppedMonitoringThreshold*F){let Se=le.currentLevel;Bt.warn("drop FPS ratio greater than max allowed value for currentLevel: "+Se),Se>0&&(-1===le.autoLevelCapping||le.autoLevelCapping>=Se)&&(Se-=1,le.trigger(it.FPS_DROP_LEVEL_CAPPING,{level:Se,droppedLevel:le.currentLevel}),le.autoLevelCapping=Se,this.streamController.nextLevelSwitch())}}this.lastTime=u,this.lastDroppedFrames=o,this.lastDecodedFrames=t}}checkFPSInterval(){const n=this.media;if(n)if(this.isVideoPlaybackQualityAvailable){const t=n.getVideoPlaybackQuality();this.checkFPS(n,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(n,n.webkitDecodedFrameCount,n.webkitDroppedFrameCount)}},stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:_n,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,certLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null}},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},function Xd(){return{cueHandler:Zc,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}()),{},{subtitleStreamController:class Dc extends Ed{constructor(n,t,o){super(n,t,o,"[subtitle-stream-controller]","subtitle"),this.levels=[],this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),this.mainDetails=null}_registerListeners(){const{hls:n}=this;n.on(it.MEDIA_ATTACHED,this.onMediaAttached,this),n.on(it.MEDIA_DETACHING,this.onMediaDetaching,this),n.on(it.MANIFEST_LOADING,this.onManifestLoading,this),n.on(it.LEVEL_LOADED,this.onLevelLoaded,this),n.on(it.ERROR,this.onError,this),n.on(it.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),n.on(it.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),n.on(it.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),n.on(it.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),n.on(it.BUFFER_FLUSHING,this.onBufferFlushing,this),n.on(it.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:n}=this;n.off(it.MEDIA_ATTACHED,this.onMediaAttached,this),n.off(it.MEDIA_DETACHING,this.onMediaDetaching,this),n.off(it.MANIFEST_LOADING,this.onManifestLoading,this),n.off(it.LEVEL_LOADED,this.onLevelLoaded,this),n.off(it.ERROR,this.onError,this),n.off(it.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),n.off(it.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),n.off(it.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),n.off(it.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),n.off(it.BUFFER_FLUSHING,this.onBufferFlushing,this),n.off(it.FRAG_BUFFERED,this.onFragBuffered,this)}startLoad(n){this.stopLoad(),this.state="IDLE",this.setInterval(500),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=n,this.tick()}onManifestLoading(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()}onMediaDetaching(){this.tracksBuffered=[],super.onMediaDetaching()}onLevelLoaded(n,t){this.mainDetails=t.details}onSubtitleFragProcessed(n,t){const{frag:o,success:u}=t;if(this.fragPrevious=o,this.state="IDLE",!u)return;const p=this.tracksBuffered[this.currentTrackId];if(!p)return;let C;const F=o.start;for(let le=0;le<p.length;le++)if(F>=p[le].start&&F<=p[le].end){C=p[le];break}const $=o.start+o.duration;C?C.end=$:(C={start:F,end:$},p.push(C)),this.fragmentTracker.fragBuffered(o)}onBufferFlushing(n,t){const{startOffset:o,endOffset:u}=t;if(0===o&&u!==Number.POSITIVE_INFINITY){const p=u-1;if(p<=0)return;t.endOffsetSubtitles=Math.max(0,p),this.tracksBuffered.forEach(C=>{for(let F=0;F<C.length;)if(C[F].end<=p)C.shift();else{if(!(C[F].start<p))break;C[F].start=p,F++}}),this.fragmentTracker.removeFragmentsInRange(o,p,"subtitle")}}onFragBuffered(n,t){var o;this.loadedmetadata||"main"!==t.frag.type||null!=(o=this.media)&&o.buffered.length&&(this.loadedmetadata=!0)}onError(n,t){const o=t.frag;"subtitle"===(null==o?void 0:o.type)&&(this.fragCurrent&&this.fragCurrent.abortRequests(),"STOPPED"!==this.state&&(this.state="IDLE"))}onSubtitleTracksUpdated(n,{subtitleTracks:t}){ii(this.levels,t)?this.levels=t.map(o=>new Ft(o)):(this.tracksBuffered=[],this.levels=t.map(o=>{const u=new Ft(o);return this.tracksBuffered[u.id]=[],u}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,"subtitle"),this.fragPrevious=null,this.mediaBuffer=null)}onSubtitleTrackSwitch(n,t){if(this.currentTrackId=t.id,!this.levels.length||-1===this.currentTrackId)return void this.clearInterval();const o=this.levels[this.currentTrackId];this.mediaBuffer=null!=o&&o.details?this.mediaBufferTimeRanges:null,o&&this.setInterval(500)}onSubtitleTrackLoaded(n,t){var o;const{details:u,id:p}=t,{currentTrackId:C,levels:F}=this;if(!F.length)return;const $=F[C];if(p>=F.length||p!==C||!$)return;this.mediaBuffer=this.mediaBufferTimeRanges;let le=0;if(u.live||null!=(o=$.details)&&o.live){const Se=this.mainDetails;if(u.deltaUpdateFailed||!Se)return;const Le=Se.fragments[0];$.details?(le=this.alignPlaylists(u,$.details),0===le&&Le&&(le=Le.start,Co(u,le))):u.hasProgramDateTime&&Se.hasProgramDateTime?(hc(u,Se),le=u.fragments[0].start):Le&&(le=Le.start,Co(u,le))}$.details=u,this.levelLastLoaded=p,!this.startFragRequested&&(this.mainDetails||!u.live)&&this.setStartPosition($.details,le),this.tick(),u.live&&!this.fragCurrent&&this.media&&"IDLE"===this.state&&(as(null,u.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),$.details=void 0))}_handleFragmentLoadComplete(n){const{frag:t,payload:o}=n,u=t.decryptdata,p=this.hls;if(!this.fragContextChanged(t)&&o&&o.byteLength>0&&u&&u.key&&u.iv&&"AES-128"===u.method){const C=performance.now();this.decrypter.decrypt(new Uint8Array(o),u.key.buffer,u.iv.buffer).catch(F=>{throw p.trigger(it.ERROR,{type:rr.MEDIA_ERROR,details:hn.FRAG_DECRYPT_ERROR,fatal:!1,error:F,reason:F.message,frag:t}),F}).then(F=>{const $=performance.now();p.trigger(it.FRAG_DECRYPTED,{frag:t,payload:F,stats:{tstart:C,tdecrypt:$}})}).catch(F=>{this.warn(`${F.name}: ${F.message}`),this.state="IDLE"})}}doTick(){if(this.media){if("IDLE"===this.state){const{currentTrackId:n,levels:t}=this,o=t[n];if(!t.length||!o||!o.details)return;const{config:u}=this,p=this.getLoadPosition(),C=ni.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],p,u.maxBufferHole),{end:F,len:$}=C,le=this.getFwdBufferInfo(this.media,"main"),Se=o.details;if($>this.getMaxBufferLength(null==le?void 0:le.len)+Se.levelTargetDuration)return;const $e=Se.fragments,Je=$e.length,st=Se.edge;let gt=null;const Tt=this.fragPrevious;if(F<st){const Zt=u.maxFragLookUpTolerance,rn=F>st-Zt?0:Zt;gt=as(Tt,$e,Math.max($e[0].start,F),rn),!gt&&Tt&&Tt.start<$e[0].start&&(gt=$e[0])}else gt=$e[Je-1];if(!gt)return;if(gt=this.mapToInitFragWhenRequired(gt),"initSegment"!==gt.sn){const rn=$e[gt.sn-Se.startSN-1];rn&&rn.cc===gt.cc&&"NOT_LOADED"===this.fragmentTracker.getState(rn)&&(gt=rn)}"NOT_LOADED"===this.fragmentTracker.getState(gt)&&this.loadFragment(gt,o,F)}}else this.state="IDLE"}getMaxBufferLength(n){const t=super.getMaxBufferLength();return n?Math.max(t,n):t}loadFragment(n,t,o){this.fragCurrent=n,"initSegment"===n.sn?this._loadInitSegment(n,t):(this.startFragRequested=!0,super.loadFragment(n,t,o))}get mediaBufferTimeRanges(){return new Hd(this.tracksBuffered[this.currentTrackId]||[])}},subtitleTrackController:class lh extends vd{constructor(n){super(n,"[subtitle-track-controller]"),this.media=null,this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.trackChangeListener=()=>this.onTextTracksChanged(),this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(n){this._subtitleDisplay=n,this.trackId>-1&&this.toggleTrackModes(this.trackId)}registerListeners(){const{hls:n}=this;n.on(it.MEDIA_ATTACHED,this.onMediaAttached,this),n.on(it.MEDIA_DETACHING,this.onMediaDetaching,this),n.on(it.MANIFEST_LOADING,this.onManifestLoading,this),n.on(it.MANIFEST_PARSED,this.onManifestParsed,this),n.on(it.LEVEL_LOADING,this.onLevelLoading,this),n.on(it.LEVEL_SWITCHING,this.onLevelSwitching,this),n.on(it.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),n.on(it.ERROR,this.onError,this)}unregisterListeners(){const{hls:n}=this;n.off(it.MEDIA_ATTACHED,this.onMediaAttached,this),n.off(it.MEDIA_DETACHING,this.onMediaDetaching,this),n.off(it.MANIFEST_LOADING,this.onManifestLoading,this),n.off(it.MANIFEST_PARSED,this.onManifestParsed,this),n.off(it.LEVEL_LOADING,this.onLevelLoading,this),n.off(it.LEVEL_SWITCHING,this.onLevelSwitching,this),n.off(it.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),n.off(it.ERROR,this.onError,this)}onMediaAttached(n,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(n){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,n)}onMediaDetaching(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),Mc(this.media.textTracks).forEach(t=>{As(t)}),this.subtitleTrack=-1,this.media=null)}onManifestLoading(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(n,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(n,t){const{id:o,details:u}=t,{trackId:p}=this,C=this.tracksInGroup[p];if(!C)return void this.warn(`Invalid subtitle track id ${o}`);const F=C.details;C.details=t.details,this.log(`subtitle track ${o} loaded [${u.startSN}-${u.endSN}]`),o===this.trackId&&this.playlistLoaded(o,t,F)}onLevelLoading(n,t){this.switchLevel(t.level)}onLevelSwitching(n,t){this.switchLevel(t.level)}switchLevel(n){const t=this.hls.levels[n];if(null==t||!t.textGroupIds)return;const o=t.textGroupIds[t.urlId],u=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;if(this.groupId!==o){const p=this.tracks.filter($=>!o||$.groupId===o);this.tracksInGroup=p;const C=this.findTrackId(null==u?void 0:u.name)||this.findTrackId();this.groupId=o||null;const F={subtitleTracks:p};this.log(`Updating subtitle tracks, ${p.length} track(s) found in "${o}" group-id`),this.hls.trigger(it.SUBTITLE_TRACKS_UPDATED,F),-1!==C&&this.setSubtitleTrack(C,u)}else this.shouldReloadPlaylist(u)&&this.setSubtitleTrack(this.trackId,u)}findTrackId(n){const t=this.tracksInGroup;for(let o=0;o<t.length;o++){const u=t[o];if((!this.selectDefaultTrack||u.default)&&(!n||n===u.name))return u.id}return-1}onError(n,t){t.fatal||!t.context||"subtitleTrack"===t.context.type&&t.context.id===this.trackId&&t.context.groupId===this.groupId&&this.checkRetry(t)}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(n){this.selectDefaultTrack=!1,this.setSubtitleTrack(n,this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0)}loadPlaylist(n){super.loadPlaylist();const t=this.tracksInGroup[this.trackId];if(this.shouldLoadPlaylist(t)){const o=t.id,u=t.groupId;let p=t.url;if(n)try{p=n.addDirectives(p)}catch(C){this.warn(`Could not construct new URL with HLS Delivery Directives: ${C}`)}this.log(`Loading subtitle playlist for id ${o}`),this.hls.trigger(it.SUBTITLE_TRACK_LOADING,{url:p,id:o,groupId:u,deliveryDirectives:n||null})}}toggleTrackModes(n){const{media:t,trackId:o}=this;if(!t)return;const u=Mc(t.textTracks),p=u.filter(F=>F.groupId===this.groupId);if(-1===n)[].slice.call(u).forEach(F=>{F.mode="disabled"});else{const F=p[o];F&&(F.mode="disabled")}const C=p[n];C&&(C.mode=this.subtitleDisplay?"showing":"hidden")}setSubtitleTrack(n,t){var o;const u=this.tracksInGroup;if(!this.media)return void(this.queuedDefaultTrack=n);if(this.trackId!==n&&this.toggleTrackModes(n),this.trackId===n&&(-1===n||null!=(o=u[n])&&o.details)||n<-1||n>=u.length)return;this.clearTimer();const p=u[n];if(this.log(`Switching to subtitle-track ${n}`+(p?` "${p.name}" lang:${p.lang} group:${p.groupId}`:"")),this.trackId=n,p){const{id:C,groupId:F="",name:$,type:le,url:Se}=p;this.hls.trigger(it.SUBTITLE_TRACK_SWITCH,{id:C,groupId:F,name:$,type:le,url:Se});const Le=this.switchParams(p.url,null==t?void 0:t.details);this.loadPlaylist(Le)}else this.hls.trigger(it.SUBTITLE_TRACK_SWITCH,{id:n})}onTextTracksChanged(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let n=-1;const t=Mc(this.media.textTracks);for(let o=0;o<t.length;o++)if("hidden"===t[o].mode)n=o;else if("showing"===t[o].mode){n=o;break}this.subtitleTrack!==n&&(this.subtitleTrack=n)}},timelineController:class Hu{constructor(n){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this.captionsProperties=void 0,this.hls=n,this.config=n.config,this.Cues=n.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){const t=new zl(this,"textTrack1"),o=new zl(this,"textTrack2"),u=new zl(this,"textTrack3"),p=new zl(this,"textTrack4");this.cea608Parser1=new Bs(1,t,o),this.cea608Parser2=new Bs(3,u,p)}n.on(it.MEDIA_ATTACHING,this.onMediaAttaching,this),n.on(it.MEDIA_DETACHING,this.onMediaDetaching,this),n.on(it.MANIFEST_LOADING,this.onManifestLoading,this),n.on(it.MANIFEST_LOADED,this.onManifestLoaded,this),n.on(it.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),n.on(it.FRAG_LOADING,this.onFragLoading,this),n.on(it.FRAG_LOADED,this.onFragLoaded,this),n.on(it.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),n.on(it.FRAG_DECRYPTED,this.onFragDecrypted,this),n.on(it.INIT_PTS_FOUND,this.onInitPtsFound,this),n.on(it.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),n.on(it.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:n}=this;n.off(it.MEDIA_ATTACHING,this.onMediaAttaching,this),n.off(it.MEDIA_DETACHING,this.onMediaDetaching,this),n.off(it.MANIFEST_LOADING,this.onManifestLoading,this),n.off(it.MANIFEST_LOADED,this.onManifestLoaded,this),n.off(it.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),n.off(it.FRAG_LOADING,this.onFragLoading,this),n.off(it.FRAG_LOADED,this.onFragLoaded,this),n.off(it.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),n.off(it.FRAG_DECRYPTED,this.onFragDecrypted,this),n.off(it.INIT_PTS_FOUND,this.onInitPtsFound,this),n.off(it.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),n.off(it.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null}addCues(n,t,o,u,p){let C=!1;for(let F=p.length;F--;){const $=p[F],le=Bc($[0],$[1],t,o);if(le>=0&&($[0]=Math.min($[0],t),$[1]=Math.max($[1],o),C=!0,le/(o-t)>.5))return}if(C||p.push([t,o]),this.config.renderTextTracksNatively)this.Cues.newCue(this.captionsTracks[n],t,o,u);else{const F=this.Cues.newCue(null,t,o,u);this.hls.trigger(it.CUES_PARSED,{type:"captions",cues:F,track:n})}}onInitPtsFound(n,{frag:t,id:o,initPTS:u,timescale:p}){const{unparsedVttFrags:C}=this;"main"===o&&(this.initPTS[t.cc]={baseTime:u,timescale:p}),C.length&&(this.unparsedVttFrags=[],C.forEach(F=>{this.onFragLoaded(it.FRAG_LOADED,F)}))}getExistingTrack(n){const{media:t}=this;if(t)for(let o=0;o<t.textTracks.length;o++){const u=t.textTracks[o];if(u[n])return u}return null}createCaptionsTrack(n){this.config.renderTextTracksNatively?this.createNativeTrack(n):this.createNonNativeTrack(n)}createNativeTrack(n){if(this.captionsTracks[n])return;const{captionsProperties:t,captionsTracks:o,media:u}=this,{label:p,languageCode:C}=t[n],F=this.getExistingTrack(n);if(F)o[n]=F,As(o[n]),Eu(o[n],u);else{const $=this.createTextTrack("captions",p,C);$&&($[n]=!0,o[n]=$)}}createNonNativeTrack(n){if(this.nonNativeCaptionsTracks[n])return;const t=this.captionsProperties[n];if(!t)return;const u={_id:n,label:t.label,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media};this.nonNativeCaptionsTracks[n]=u,this.hls.trigger(it.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[u]})}createTextTrack(n,t,o){const u=this.media;if(u)return u.addTextTrack(n,t,o)}onMediaAttaching(n,t){this.media=t.media,this._cleanTracks()}onMediaDetaching(){const{captionsTracks:n}=this;Object.keys(n).forEach(t=>{As(n[t]),delete n[t]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:n}=this;if(!n)return;const t=n.textTracks;if(t)for(let o=0;o<t.length;o++)As(t[o])}onSubtitleTracksUpdated(n,t){const o=t.subtitleTracks||[],u=o.some(p=>p.textCodec===Nc);if(this.config.enableWebVTT||u&&this.config.enableIMSC1){if(ii(this.tracks,o))return void(this.tracks=o);if(this.textTracks=[],this.tracks=o,this.config.renderTextTracksNatively){const C=this.media?this.media.textTracks:null;this.tracks.forEach((F,$)=>{let le;if(C&&$<C.length){let Se=null;for(let Le=0;Le<C.length;Le++)if(Gu(C[Le],F)){Se=C[Le];break}Se&&(le=Se)}if(le)As(le);else{const Se=this._captionsOrSubtitlesFromCharacteristics(F);le=this.createTextTrack(Se,F.name,F.lang),le&&(le.mode="disabled")}le&&(le.groupId=F.groupId,this.textTracks.push(le))})}else if(this.tracks.length){const C=this.tracks.map(F=>({label:F.name,kind:F.type.toLowerCase(),default:F.default,subtitleTrack:F}));this.hls.trigger(it.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:C})}}}_captionsOrSubtitlesFromCharacteristics(n){if(n.attrs.CHARACTERISTICS){const t=/transcribes-spoken-dialog/gi.test(n.attrs.CHARACTERISTICS),o=/describes-music-and-sound/gi.test(n.attrs.CHARACTERISTICS);if(t&&o)return"captions"}return"subtitles"}onManifestLoaded(n,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(o=>{const u=/(?:CC|SERVICE)([1-4])/.exec(o.instreamId);if(!u)return;const C=this.captionsProperties[`textTrack${u[1]}`];!C||(C.label=o.name,o.lang&&(C.languageCode=o.lang),C.media=o)})}closedCaptionsForLevel(n){const t=this.hls.levels[n.level];return null==t?void 0:t.attrs["CLOSED-CAPTIONS"]}onFragLoading(n,t){const{cea608Parser1:o,cea608Parser2:u,lastSn:p,lastPartIndex:C}=this;if(this.enabled&&o&&u&&"main"===t.frag.type){var F,$;const le=t.frag.sn,Se=null!=(F=null==t||null==($=t.part)?void 0:$.index)?F:-1;le===p+1||le===p&&Se===C+1||(o.reset(),u.reset()),this.lastSn=le,this.lastPartIndex=Se}}onFragLoaded(n,t){const{frag:o,payload:u}=t;if("subtitle"===o.type)if(u.byteLength){const p=o.decryptdata,C="stats"in t;if(null==p||!p.encrypted||C){const F=this.tracks[o.level],$=this.vttCCs;$[o.cc]||($[o.cc]={start:o.start,prevCC:this.prevCC,new:!0},this.prevCC=o.cc),F&&F.textCodec===Nc?this._parseIMSC1(o,u):this._parseVTTs(t)}}else this.hls.trigger(it.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:o,error:new Error("Empty subtitle payload")})}_parseIMSC1(n,t){const o=this.hls;Lc(t,this.initPTS[n.cc],u=>{this._appendCues(u,n.level),o.trigger(it.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:n})},u=>{Bt.log(`Failed to parse IMSC1: ${u}`),o.trigger(it.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:u})})}_parseVTTs(n){var t;const{frag:o,payload:u}=n,{initPTS:p,unparsedVttFrags:C}=this,F=p.length-1;if(!p[o.cc]&&-1===F)return void C.push(n);const $=this.hls;!function Bu(h,n,t,o,u,p,C){const F=new xc,$=un(new Uint8Array(h)).trim().replace(wc,"\n").split("\n"),le=[],Se=n?function rh(h,n=1){return Ou(h,9e4,1/n)}(n.baseTime,n.timescale):0;let st,Le="00:00.000",$e=0,Je=0,gt=!0;F.oncue=function(Tt){const Zt=t[o];let rn=t.ccOffset;const tn=($e-Se)/9e4;if(null!=Zt&&Zt.new&&(void 0!==Je?rn=t.ccOffset=Zt.start:function(n,t,o){let u=n[t],p=n[u.prevCC];if(!p||!p.new&&u.new)return n.ccOffset=n.presentationOffset=u.start,void(u.new=!1);for(;null!=(C=p)&&C.new;){var C;n.ccOffset+=u.start-p.start,u.new=!1,u=p,p=n[u.prevCC]}n.presentationOffset=o}(t,o,tn)),tn){if(!n)return void(st=new Error("Missing initPTS for VTT MPEGTS"));rn=tn-t.presentationOffset}const Mn=Tt.endTime-Tt.startTime,pn=zo(9e4*(Tt.startTime+rn-Je),9e4*u)/9e4;Tt.startTime=Math.max(pn,0),Tt.endTime=Math.max(pn+Mn,0);const Kn=Tt.text.trim();Tt.text=decodeURIComponent(encodeURIComponent(Kn)),Tt.id||(Tt.id=Ql(Tt.startTime,Tt.endTime,Kn)),Tt.endTime>0&&le.push(Tt)},F.onparsingerror=function(Tt){st=Tt},F.onflush=function(){st?C(st):p(le)},$.forEach(Tt=>{if(gt){if(hl(Tt,"X-TIMESTAMP-MAP=")){gt=!1,Tt.slice(16).split(",").forEach(Zt=>{hl(Zt,"LOCAL:")?Le=Zt.slice(6):hl(Zt,"MPEGTS:")&&($e=parseInt(Zt.slice(7)))});try{Je=function(n){let t=parseInt(n.slice(-3));const o=parseInt(n.slice(-6,-4)),u=parseInt(n.slice(-9,-7)),p=n.length>9?parseInt(n.substring(0,n.indexOf(":"))):0;if(!(ir(t)&&ir(o)&&ir(u)&&ir(p)))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${n}`);return t+=1e3*o,t+=6e4*u,t+=36e5*p,t}(Le)/1e3}catch(Zt){st=Zt}return}""===Tt&&(gt=!1)}F.parse(Tt+"\n")}),F.flush()}(null!=(t=o.initSegment)&&t.data?Hi(o.initSegment.data,new Uint8Array(u)):u,this.initPTS[o.cc],this.vttCCs,o.cc,o.start,Se=>{this._appendCues(Se,o.level),$.trigger(it.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:o})},Se=>{const Le="Missing initPTS for VTT MPEGTS"===Se.message;Le?C.push(n):this._fallbackToIMSC1(o,u),Bt.log(`Failed to parse VTT cue: ${Se}`),!(Le&&F>o.cc)&&$.trigger(it.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:o,error:Se})})}_fallbackToIMSC1(n,t){const o=this.tracks[n.level];o.textCodec||Lc(t,this.initPTS[n.cc],()=>{o.textCodec=Nc,this._parseIMSC1(n,t)},()=>{o.textCodec="wvtt"})}_appendCues(n,t){const o=this.hls;if(this.config.renderTextTracksNatively){const u=this.textTracks[t];if(!u||"disabled"===u.mode)return;n.forEach(p=>Ps(u,p))}else{const u=this.tracks[t];if(!u)return;o.trigger(it.CUES_PARSED,{type:"subtitles",cues:n,track:u.default?"default":"subtitles"+t})}}onFragDecrypted(n,t){const{frag:o}=t;"subtitle"===o.type&&this.onFragLoaded(it.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(n,t){const{cea608Parser1:o,cea608Parser2:u}=this;if(!this.enabled||!o||!u)return;const{frag:p,samples:C}=t;if("main"!==p.type||"NONE"!==this.closedCaptionsForLevel(p))for(let F=0;F<C.length;F++){const $=C[F].bytes;if($){const le=this.extractCea608Data($);o.addData(C[F].pts,le[0]),u.addData(C[F].pts,le[1])}}}onBufferFlushing(n,{startOffset:t,endOffset:o,endOffsetSubtitles:u,type:p}){const{media:C}=this;if(C&&!(C.currentTime<o)){if(!p||"video"===p){const{captionsTracks:F}=this;Object.keys(F).forEach($=>ha(F[$],t,o))}if(this.config.renderTextTracksNatively&&0===t&&void 0!==u){const{textTracks:F}=this;Object.keys(F).forEach($=>ha(F[$],t,u))}}}extractCea608Data(n){const t=[[],[]],o=31&n[0];let u=2;for(let p=0;p<o;p++){const C=n[u++],F=127&n[u++],$=127&n[u++];if((0!==F||0!==$)&&0!=(4&C)){const Se=3&C;(0===Se||1===Se)&&(t[Se].push(F),t[Se].push($))}}return t}},audioStreamController:class Kl extends Ed{constructor(n,t,o){super(n,t,o,"[audio-stream-controller]","audio"),this.videoBuffer=null,this.videoTrackCC=-1,this.waitingVideoCC=-1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null}_registerListeners(){const{hls:n}=this;n.on(it.MEDIA_ATTACHED,this.onMediaAttached,this),n.on(it.MEDIA_DETACHING,this.onMediaDetaching,this),n.on(it.MANIFEST_LOADING,this.onManifestLoading,this),n.on(it.LEVEL_LOADED,this.onLevelLoaded,this),n.on(it.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),n.on(it.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),n.on(it.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),n.on(it.ERROR,this.onError,this),n.on(it.BUFFER_RESET,this.onBufferReset,this),n.on(it.BUFFER_CREATED,this.onBufferCreated,this),n.on(it.BUFFER_FLUSHED,this.onBufferFlushed,this),n.on(it.INIT_PTS_FOUND,this.onInitPtsFound,this),n.on(it.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:n}=this;n.off(it.MEDIA_ATTACHED,this.onMediaAttached,this),n.off(it.MEDIA_DETACHING,this.onMediaDetaching,this),n.off(it.MANIFEST_LOADING,this.onManifestLoading,this),n.off(it.LEVEL_LOADED,this.onLevelLoaded,this),n.off(it.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),n.off(it.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),n.off(it.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),n.off(it.ERROR,this.onError,this),n.off(it.BUFFER_RESET,this.onBufferReset,this),n.off(it.BUFFER_CREATED,this.onBufferCreated,this),n.off(it.BUFFER_FLUSHED,this.onBufferFlushed,this),n.off(it.INIT_PTS_FOUND,this.onInitPtsFound,this),n.off(it.FRAG_BUFFERED,this.onFragBuffered,this)}onInitPtsFound(n,{frag:t,id:o,initPTS:u,timescale:p}){if("main"===o){const C=t.cc;this.initPTS[t.cc]={baseTime:u,timescale:p},this.log(`InitPTS for cc: ${C} found from main: ${u}`),this.videoTrackCC=C,"WAITING_INIT_PTS"===this.state&&this.tick()}}startLoad(n){if(!this.levels)return this.startPosition=n,void(this.state="STOPPED");const t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),t>0&&-1===n?(this.log(`Override startPosition with lastCurrentTime @${t.toFixed(3)}`),n=t,this.state="IDLE"):(this.loadedmetadata=!1,this.state="WAITING_TRACK"),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=n,this.tick()}doTick(){switch(this.state){case"IDLE":this.doTickIdle();break;case"WAITING_TRACK":{var n;const{levels:o,trackId:u}=this,p=null==o||null==(n=o[u])?void 0:n.details;if(p){if(this.waitForCdnTuneIn(p))break;this.state="WAITING_INIT_PTS"}break}case"FRAG_LOADING_WAITING_RETRY":{var t;const o=performance.now(),u=this.retryDate;(!u||o>=u||null!=(t=this.media)&&t.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.trackId),this.state="IDLE");break}case"WAITING_INIT_PTS":{const o=this.waitingData;if(o){const{frag:u,part:p,cache:C,complete:F}=o;if(void 0!==this.initPTS[u.cc]){this.waitingData=null,this.waitingVideoCC=-1,this.state="FRAG_LOADING";const le={frag:u,part:p,payload:C.flush(),networkDetails:null};this._handleFragmentLoadProgress(le),F&&super._handleFragmentLoadComplete(le)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log(`Waiting fragment cc (${u.cc}) cancelled because video is at cc ${this.videoTrackCC}`),this.clearWaitingFragment();else{const $=this.getLoadPosition(),le=ni.bufferInfo(this.mediaBuffer,$,this.config.maxBufferHole);ls(le.end,this.config.maxFragLookUpTolerance,u)<0&&(this.log(`Waiting fragment cc (${u.cc}) @ ${u.start} cancelled because another fragment at ${le.end} is needed`),this.clearWaitingFragment())}}else this.state="IDLE"}}this.onTickEnd()}clearWaitingFragment(){const n=this.waitingData;n&&(this.fragmentTracker.removeFragment(n.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state="IDLE")}resetLoadingState(){this.clearWaitingFragment(),super.resetLoadingState()}onTickEnd(){const{media:n}=this;null==n||!n.readyState||(this.lastCurrentTime=n.currentTime)}doTickIdle(){const{hls:n,levels:t,media:o,trackId:u}=this;if(null==t||!t[u]||!o&&(this.startFragRequested||!n.config.startFragPrefetch))return;const C=t[u],F=C.details;if(!F||F.live&&this.levelLastLoaded!==u||this.waitForCdnTuneIn(F))return void(this.state="WAITING_TRACK");const $=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&$&&(this.bufferFlushed=!1,this.afterBufferFlushed($,"audio","audio"));const le=this.getFwdBufferInfo($,"audio");if(null===le)return;const{bufferedTrack:Se,switchingTrack:Le}=this;if(!Le&&this._streamEnded(le,F))return n.trigger(it.BUFFER_EOS,{type:"audio"}),void(this.state="ENDED");const $e=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,"main"),Je=le.len,st=this.getMaxBufferLength(null==$e?void 0:$e.len);if(Je>=st&&!Le)return;const Tt=F.fragments[0].start;let Zt=le.end;if(Le&&o){const pn=this.getLoadPosition();Se&&Le.attrs!==Se.attrs&&(Zt=pn),F.PTSKnown&&pn<Tt&&(le.end>Tt||le.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),o.currentTime=Tt+.05)}let rn=this.getNextFragment(Zt,F),tn=!1;if(rn&&this.isLoopLoading(rn,Zt)&&(tn=!!rn.gap,rn=this.getNextFragmentLoopLoading(rn,F,le,"main",st)),!rn)return void(this.bufferFlushed=!0);const Mn=$e&&rn.start>$e.end+F.targetduration;if(Mn||(null==$e||!$e.len)&&le.len){const pn=this.getAppendedFrag(rn.start,"main");if(null===pn||(tn||(tn=!!pn.gap||!!Mn&&0===$e.len),Mn&&!tn||tn&&le.nextStart&&le.nextStart<pn.end))return}this.loadFragment(rn,C,Zt)}getMaxBufferLength(n){const t=super.getMaxBufferLength();return n?Math.min(Math.max(t,n),this.config.maxMaxBufferLength):t}onMediaDetaching(){this.videoBuffer=null,super.onMediaDetaching()}onAudioTracksUpdated(n,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map(o=>new Ft(o))}onAudioTrackSwitching(n,t){const o=!!t.url;this.trackId=t.id;const{fragCurrent:u}=this;u&&(u.abortRequests(),this.removeUnbufferedFrags(u.start)),this.resetLoadingState(),o?this.setInterval(100):this.resetTransmuxer(),o?(this.switchingTrack=t,this.state="IDLE"):(this.switchingTrack=null,this.bufferedTrack=t,this.state="STOPPED"),this.tick()}onManifestLoading(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1}onLevelLoaded(n,t){this.mainDetails=t.details,null!==this.cachedTrackLoadedData&&(this.hls.trigger(it.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)}onAudioTrackLoaded(n,t){var o;if(null==this.mainDetails)return void(this.cachedTrackLoadedData=t);const{levels:u}=this,{details:p,id:C}=t;if(!u)return void this.warn(`Audio tracks were reset while loading level ${C}`);this.log(`Track ${C} loaded [${p.startSN},${p.endSN}]${p.lastPartSn?`[part-${p.lastPartSn}-${p.lastPartIndex}]`:""},duration:${p.totalduration}`);const F=u[C];let $=0;if(p.live||null!=(o=F.details)&&o.live){const le=this.mainDetails;if(p.fragments[0]||(p.deltaUpdateFailed=!0),p.deltaUpdateFailed||!le)return;!F.details&&p.hasProgramDateTime&&le.hasProgramDateTime?(hc(p,le),$=p.fragments[0].start):$=this.alignPlaylists(p,F.details)}F.details=p,this.levelLastLoaded=C,!this.startFragRequested&&(this.mainDetails||!p.live)&&this.setStartPosition(F.details,$),"WAITING_TRACK"===this.state&&!this.waitForCdnTuneIn(p)&&(this.state="IDLE"),this.tick()}_handleFragmentLoadProgress(n){var t;const{frag:o,part:u,payload:p}=n,{config:C,trackId:F,levels:$}=this;if(!$)return void this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${o.sn} of level ${o.level} will not be buffered`);const le=$[F];if(!le)return void this.warn("Audio track is undefined on fragment load progress");const Se=le.details;if(!Se)return this.warn("Audio track details undefined on fragment load progress"),void this.removeUnbufferedFrags(o.start);const Le=C.defaultAudioCodec||le.audioCodec||"mp4a.40.2";let $e=this.transmuxer;$e||($e=this.transmuxer=new kd(this.hls,"audio",this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const Je=this.initPTS[o.cc],st=null==(t=o.initSegment)?void 0:t.data;if(void 0!==Je){const gt=!1,Tt=u?u.index:-1,rn=new wl(o.level,o.sn,o.stats.chunkCount,p.byteLength,Tt,-1!==Tt);$e.push(p,st,Le,"",o,u,Se.totalduration,gt,rn,Je)}else{this.log(`Unknown video PTS for cc ${o.cc}, waiting for video PTS before demuxing audio frag ${o.sn} of [${Se.startSN} ,${Se.endSN}],track ${F}`);const{cache:gt}=this.waitingData=this.waitingData||{frag:o,part:u,cache:new Es,complete:!1};gt.push(new Uint8Array(p)),this.waitingVideoCC=this.videoTrackCC,this.state="WAITING_INIT_PTS"}}_handleFragmentLoadComplete(n){this.waitingData?this.waitingData.complete=!0:super._handleFragmentLoadComplete(n)}onBufferReset(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1}onBufferCreated(n,t){const o=t.tracks.audio;o&&(this.mediaBuffer=o.buffer||null),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer||null)}onFragBuffered(n,t){const{frag:o,part:u}=t;if("audio"===o.type)if(this.fragContextChanged(o))this.warn(`Fragment ${o.sn}${u?" p: "+u.index:""} of level ${o.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);else{if("initSegment"!==o.sn){this.fragPrevious=o;const p=this.switchingTrack;p&&(this.bufferedTrack=p,this.switchingTrack=null,this.hls.trigger(it.AUDIO_TRACK_SWITCHED,_i({},p)))}this.fragBufferedComplete(o,u)}else if(!this.loadedmetadata&&"main"===o.type){const p=this.videoBuffer||this.media;p&&ni.getBuffered(p).length&&(this.loadedmetadata=!0)}}onError(n,t){var o;if(t.fatal)this.state="ERROR";else switch(t.details){case hn.FRAG_GAP:case hn.FRAG_PARSING_ERROR:case hn.FRAG_DECRYPT_ERROR:case hn.FRAG_LOAD_ERROR:case hn.FRAG_LOAD_TIMEOUT:case hn.KEY_LOAD_ERROR:case hn.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError("audio",t);break;case hn.AUDIO_TRACK_LOAD_ERROR:case hn.AUDIO_TRACK_LOAD_TIMEOUT:case hn.LEVEL_PARSING_ERROR:!t.levelRetry&&"WAITING_TRACK"===this.state&&"audioTrack"===(null==(o=t.context)?void 0:o.type)&&(this.state="IDLE");break;case hn.BUFFER_FULL_ERROR:if(!t.parent||"audio"!==t.parent)return;this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case hn.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}}onBufferFlushed(n,{type:t}){"audio"===t&&(this.bufferFlushed=!0,"ENDED"===this.state&&(this.state="IDLE"))}_handleTransmuxComplete(n){var t;const o="audio",{hls:u}=this,{remuxResult:p,chunkMeta:C}=n,F=this.getCurrentContext(C);if(!F)return void this.resetWhenMissingContext(C);const{frag:$,part:le,level:Se}=F,{details:Le}=Se,{audio:$e,text:Je,id3:st,initSegment:gt}=p;if(!this.fragContextChanged($)&&Le){if(this.state="PARSING",this.switchingTrack&&$e&&this.completeAudioSwitch(this.switchingTrack),null!=gt&&gt.tracks){const Tt=$.initSegment||$;this._bufferInitSegment(gt.tracks,Tt,C),u.trigger(it.FRAG_PARSING_INIT_SEGMENT,{frag:Tt,id:o,tracks:gt.tracks})}if($e){const{startPTS:Tt,endPTS:Zt,startDTS:rn,endDTS:tn}=$e;le&&(le.elementaryStreams.audio={startPTS:Tt,endPTS:Zt,startDTS:rn,endDTS:tn}),$.setElementaryStreamInfo("audio",Tt,Zt,rn,tn),this.bufferFragmentData($e,$,le,C)}if(null!=st&&null!=(t=st.samples)&&t.length){const Tt=Wr({id:o,frag:$,details:Le},st);u.trigger(it.FRAG_PARSING_METADATA,Tt)}if(Je){const Tt=Wr({id:o,frag:$,details:Le},Je);u.trigger(it.FRAG_PARSING_USERDATA,Tt)}}else this.fragmentTracker.removeFragment($)}_bufferInitSegment(n,t,o){if("PARSING"!==this.state)return;n.video&&delete n.video;const u=n.audio;if(!u)return;u.levelCodec=u.codec,u.id="audio",this.log(`Init audio buffer, container:${u.container}, codecs[parsed]=[${u.codec}]`),this.hls.trigger(it.BUFFER_CODECS,n);const p=u.initSegment;null!=p&&p.byteLength&&this.hls.trigger(it.BUFFER_APPENDING,{type:"audio",frag:t,part:null,chunkMeta:o,parent:t.type,data:p}),this.tick()}loadFragment(n,t,o){const u=this.fragmentTracker.getState(n);var p;this.fragCurrent=n,this.switchingTrack||"NOT_LOADED"===u||"PARTIAL"===u?"initSegment"===n.sn?this._loadInitSegment(n,t):null!=(p=t.details)&&p.live&&!this.initPTS[n.cc]?(this.log(`Waiting for video PTS in continuity counter ${n.cc} of live stream before loading audio fragment ${n.sn} of level ${this.trackId}`),this.state="WAITING_INIT_PTS"):(this.startFragRequested=!0,super.loadFragment(n,t,o)):this.clearTrackerIfNeeded(n)}completeAudioSwitch(n){const{hls:t,media:o,bufferedTrack:u}=this,p=null==u?void 0:u.attrs,C=n.attrs;o&&p&&(p.CHANNELS!==C.CHANNELS||p.NAME!==C.NAME||p.LANGUAGE!==C.LANGUAGE)&&(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio")),this.bufferedTrack=n,this.switchingTrack=null,t.trigger(it.AUDIO_TRACK_SWITCHED,_i({},n))}},audioTrackController:class Wl extends vd{constructor(n){super(n,"[audio-track-controller]"),this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:n}=this;n.on(it.MANIFEST_LOADING,this.onManifestLoading,this),n.on(it.MANIFEST_PARSED,this.onManifestParsed,this),n.on(it.LEVEL_LOADING,this.onLevelLoading,this),n.on(it.LEVEL_SWITCHING,this.onLevelSwitching,this),n.on(it.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),n.on(it.ERROR,this.onError,this)}unregisterListeners(){const{hls:n}=this;n.off(it.MANIFEST_LOADING,this.onManifestLoading,this),n.off(it.MANIFEST_PARSED,this.onManifestParsed,this),n.off(it.LEVEL_LOADING,this.onLevelLoading,this),n.off(it.LEVEL_SWITCHING,this.onLevelSwitching,this),n.off(it.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),n.off(it.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(n,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(n,t){const{id:o,groupId:u,details:p}=t,C=this.tracksInGroup[o];if(!C||C.groupId!==u)return void this.warn(`Track with id:${o} and group:${u} not found in active group ${C.groupId}`);const F=C.details;C.details=t.details,this.log(`audio-track ${o} "${C.name}" lang:${C.lang} group:${u} loaded [${p.startSN}-${p.endSN}]`),o===this.trackId&&this.playlistLoaded(o,t,F)}onLevelLoading(n,t){this.switchLevel(t.level)}onLevelSwitching(n,t){this.switchLevel(t.level)}switchLevel(n){const t=this.hls.levels[n];if(null==t||!t.audioGroupIds)return;const o=t.audioGroupIds[t.urlId];if(this.groupId!==o){this.groupId=o||null;const u=this.tracks.filter(C=>!o||C.groupId===o);this.selectDefaultTrack&&!u.some(C=>C.default)&&(this.selectDefaultTrack=!1),this.tracksInGroup=u;const p={audioTracks:u};this.log(`Updating audio tracks, ${u.length} track(s) found in group:${o}`),this.hls.trigger(it.AUDIO_TRACKS_UPDATED,p),this.selectInitialTrack()}else this.shouldReloadPlaylist(this.currentTrack)&&this.setAudioTrack(this.trackId)}onError(n,t){t.fatal||!t.context||"audioTrack"===t.context.type&&t.context.id===this.trackId&&t.context.groupId===this.groupId&&(this.requestScheduled=-1,this.checkRetry(t))}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(n){this.selectDefaultTrack=!1,this.setAudioTrack(n)}setAudioTrack(n){const t=this.tracksInGroup;if(n<0||n>=t.length)return void this.warn("Invalid id passed to audio-track controller");this.clearTimer();const o=this.currentTrack,u=t[n],{groupId:p,name:C}=u;if(this.log(`Switching to audio-track ${n} "${C}" lang:${u.lang} group:${p}`),this.trackId=n,this.currentTrack=u,this.selectDefaultTrack=!1,this.hls.trigger(it.AUDIO_TRACK_SWITCHING,_i({},u)),u.details&&!u.details.live)return;const F=this.switchParams(u.url,null==o?void 0:o.details);this.loadPlaylist(F)}selectInitialTrack(){const n=this.tracksInGroup,t=this.findTrackId(this.currentTrack)|this.findTrackId(null);if(-1!==t)this.setAudioTrack(t);else{const o=new Error(`No track found for running audio group-ID: ${this.groupId} track count: ${n.length}`);this.warn(o.message),this.hls.trigger(it.ERROR,{type:rr.MEDIA_ERROR,details:hn.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:o})}}findTrackId(n){const t=this.tracksInGroup;for(let o=0;o<t.length;o++){const u=t[o];if((!this.selectDefaultTrack||u.default)&&(!n||void 0!==n.attrs["STABLE-RENDITION-ID"]&&n.attrs["STABLE-RENDITION-ID"]===u.attrs["STABLE-RENDITION-ID"]||n.name===u.name&&n.lang===u.lang))return u.id}return-1}loadPlaylist(n){super.loadPlaylist();const t=this.tracksInGroup[this.trackId];if(this.shouldLoadPlaylist(t)){const o=t.id,u=t.groupId;let p=t.url;if(n)try{p=n.addDirectives(p)}catch(C){this.warn(`Could not construct new URL with HLS Delivery Directives: ${C}`)}this.log(`loading audio-track playlist ${o} "${t.name}" lang:${t.lang} group:${u}`),this.clearTimer(),this.hls.trigger(it.AUDIO_TRACK_LOADING,{url:p,id:o,groupId:u,deliveryDirectives:n||null})}}},emeController:fh,cmcdController:ta,contentSteeringController:class Hc{constructor(n){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=n,this.log=Bt.log.bind(Bt,"[content-steering]:"),this.registerListeners()}registerListeners(){const n=this.hls;n.on(it.MANIFEST_LOADING,this.onManifestLoading,this),n.on(it.MANIFEST_LOADED,this.onManifestLoaded,this),n.on(it.MANIFEST_PARSED,this.onManifestParsed,this),n.on(it.ERROR,this.onError,this)}unregisterListeners(){const n=this.hls;!n||(n.off(it.MANIFEST_LOADING,this.onManifestLoading,this),n.off(it.MANIFEST_LOADED,this.onManifestLoaded,this),n.off(it.MANIFEST_PARSED,this.onManifestParsed,this),n.off(it.ERROR,this.onError,this))}startLoad(){if(this.started=!0,self.clearTimeout(this.reloadTimer),this.enabled&&this.uri)if(this.updated){const n=Math.max(1e3*this.timeToLoad-(performance.now()-this.updated),0);this.scheduleRefresh(this.uri,n)}else this.loadSteeringManifest(this.uri)}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),self.clearTimeout(this.reloadTimer)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(n){const t=this.levels;t&&(this.levels=t.filter(o=>o!==n))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(n,t){const{contentSteering:o}=t;null!==o&&(this.pathwayId=o.pathwayId,this.uri=o.uri,this.started&&this.startLoad())}onManifestParsed(n,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(n,t){const{errorAction:o}=t;if(2===(null==o?void 0:o.action)&&1===o.flags){let u=this.pathwayPriority;const p=this.pathwayId;this.penalizedPathways[p]||(this.penalizedPathways[p]=performance.now()),!u&&this.levels&&(u=this.levels.reduce((C,F)=>(-1===C.indexOf(F.pathwayId)&&C.push(F.pathwayId),C),[])),u&&u.length>1&&(this.updatePathwayPriority(u),o.resolved=this.pathwayId!==p)}}filterParsedLevels(n){this.levels=n;let t=this.getLevelsForPathway(this.pathwayId);if(0===t.length){const o=n[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${o}"`),t=this.getLevelsForPathway(o),this.pathwayId=o}return t.length!==n.length?(this.log(`Found ${t.length}/${n.length} levels in Pathway "${this.pathwayId}"`),t):n}getLevelsForPathway(n){return null===this.levels?[]:this.levels.filter(t=>n===t.pathwayId)}updatePathwayPriority(n){let t;this.pathwayPriority=n;const o=this.penalizedPathways,u=performance.now();Object.keys(o).forEach(p=>{u-o[p]>3e5&&delete o[p]});for(let p=0;p<n.length;p++){const C=n[p];if(o[C])continue;if(C===this.pathwayId)return;const F=this.hls.nextLoadLevel,$=this.hls.levels[F];if(t=this.getLevelsForPathway(C),t.length>0){this.log(`Setting Pathway to "${C}"`),this.pathwayId=C,this.hls.trigger(it.LEVELS_UPDATED,{levels:t});const le=this.hls.levels[F];$&&le&&this.levels&&(le.attrs["STABLE-VARIANT-ID"]!==$.attrs["STABLE-VARIANT-ID"]&&le.bitrate!==$.bitrate&&this.log(`Unstable Pathways change from bitrate ${$.bitrate} to ${le.bitrate}`),this.hls.nextLoadLevel=F);break}}}clonePathways(n){const t=this.levels;if(!t)return;const o={},u={};n.forEach(p=>{const{ID:C,"BASE-ID":F,"URI-REPLACEMENT":$}=p;if(t.some(Se=>Se.pathwayId===C))return;const le=this.getLevelsForPathway(F).map(Se=>{const Le=Wr({},Se);Le.details=void 0,Le.url=Ku(Se.uri,Se.attrs["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",$);const $e=new fr(Se.attrs);$e["PATHWAY-ID"]=C;const Je=$e.AUDIO&&`${$e.AUDIO}_clone_${C}`,st=$e.SUBTITLES&&`${$e.SUBTITLES}_clone_${C}`;Je&&(o[$e.AUDIO]=Je,$e.AUDIO=Je),st&&(u[$e.SUBTITLES]=st,$e.SUBTITLES=st),Le.attrs=$e;const gt=new Ft(Le);return Il(gt,"audio",Je),Il(gt,"text",st),gt});t.push(...le),Gc(this.audioTracks,o,$,C),Gc(this.subtitleTracks,u,$,C)})}loadSteeringManifest(n){const t=this.hls.config,o=t.loader;let u;this.loader&&this.loader.destroy(),this.loader=new o(t);try{u=new self.URL(n)}catch(Se){return this.enabled=!1,void this.log(`Failed to parse Steering Manifest URI: ${n}`)}if("data:"!==u.protocol){const Se=0|(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate);u.searchParams.set("_HLS_pathway",this.pathwayId),u.searchParams.set("_HLS_throughput",""+Se)}const p={responseType:"json",url:u.href},C=t.steeringManifestLoadPolicy.default,F=C.errorRetry||C.timeoutRetry||{},$={loadPolicy:C,timeout:C.maxLoadTimeMs,maxRetry:F.maxNumRetry||0,retryDelay:F.retryDelayMs||0,maxRetryDelay:F.maxRetryDelayMs||0},le={onSuccess:(Se,Le,$e,Je)=>{this.log(`Loaded steering manifest: "${u}"`);const st=Se.data;if(1!==st.VERSION)return void this.log(`Steering VERSION ${st.VERSION} not supported!`);this.updated=performance.now(),this.timeToLoad=st.TTL;const{"RELOAD-URI":gt,"PATHWAY-CLONES":Tt,"PATHWAY-PRIORITY":Zt}=st;if(gt)try{this.uri=new self.URL(gt,u).href}catch(rn){return this.enabled=!1,void this.log(`Failed to parse Steering Manifest RELOAD-URI: ${gt}`)}this.scheduleRefresh(this.uri||$e.url),Tt&&this.clonePathways(Tt),Zt&&this.updatePathwayPriority(Zt)},onError:(Se,Le,$e,Je)=>{if(this.log(`Error loading steering manifest: ${Se.code} ${Se.text} (${Le.url})`),this.stopLoad(),410===Se.code)return this.enabled=!1,void this.log(`Steering manifest ${Le.url} no longer available`);let st=1e3*this.timeToLoad;if(429!==Se.code)this.scheduleRefresh(this.uri||Le.url,st);else{const gt=this.loader;if("function"==typeof(null==gt?void 0:gt.getResponseHeader)){const Tt=gt.getResponseHeader("Retry-After");Tt&&(st=1e3*parseFloat(Tt))}this.log(`Steering manifest ${Le.url} rate limited`)}},onTimeout:(Se,Le,$e)=>{this.log(`Timeout loading steering manifest (${Le.url})`),this.scheduleRefresh(this.uri||Le.url)}};this.log(`Requesting steering manifest: ${u}`),this.loader.load(p,$,le)}scheduleRefresh(n,t=1e3*this.timeToLoad){self.clearTimeout(this.reloadTimer),this.reloadTimer=self.setTimeout(()=>{this.loadSteeringManifest(n)},t)}}});function $u(h){return h&&"object"==typeof h?Array.isArray(h)?h.map($u):Object.keys(h).reduce((n,t)=>(n[t]=$u(h[t]),n),{}):h}let bs=(()=>{class h{static get version(){return"1.4.8"}static isSupported(){return function Mu(){const h=Ai();if(!h)return!1;const n=el();return!(!h||"function"!=typeof h.isTypeSupported||!h.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')||n&&(!n.prototype||"function"!=typeof n.prototype.appendBuffer||"function"!=typeof n.prototype.remove))}()}static get Events(){return it}static get ErrorTypes(){return rr}static get ErrorDetails(){return hn}static get DefaultConfig(){return h.defaultConfig?h.defaultConfig:Qd}static set DefaultConfig(t){h.defaultConfig=t}constructor(t={}){this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new Hl,this._autoLevelCapping=void 0,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,function lr(h,n){if(self.console&&!0===h||"object"==typeof h){!function tr(h,...n){n.forEach(function(t){an[t]=h[t]?h[t].bind(h):function In(h){const n=self.console[h];return n?n.bind(self.console,`[${h}] >`):Pi}(t)})}(h,"debug","log","info","warn","error");try{an.log(`Debug logs enabled for "${n}" in hls.js version 1.4.8`)}catch(t){an=Nt}}else an=Nt}(t.debug||!1,"Hls instance");const o=this.config=function $c(h,n){if((n.liveSyncDurationCount||n.liveMaxLatencyDurationCount)&&(n.liveSyncDuration||n.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==n.liveMaxLatencyDurationCount&&(void 0===n.liveSyncDurationCount||n.liveMaxLatencyDurationCount<=n.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==n.liveMaxLatencyDuration&&(void 0===n.liveSyncDuration||n.liveMaxLatencyDuration<=n.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const t=$u(h),u=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return["manifest","level","frag"].forEach(p=>{const C=`${"level"===p?"playlist":p}LoadPolicy`,F=void 0===n[C],$=[];u.forEach(le=>{const Se=`${p}Loading${le}`,Le=n[Se];if(void 0!==Le&&F){$.push(Se);const $e=t[C].default;switch(n[C]={default:$e},le){case"TimeOut":$e.maxLoadTimeMs=Le,$e.maxTimeToFirstByteMs=Le;break;case"MaxRetry":$e.errorRetry.maxNumRetry=Le,$e.timeoutRetry.maxNumRetry=Le;break;case"RetryDelay":$e.errorRetry.retryDelayMs=Le,$e.timeoutRetry.retryDelayMs=Le;break;case"MaxRetryTimeout":$e.errorRetry.maxRetryDelayMs=Le,$e.timeoutRetry.maxRetryDelayMs=Le}}}),$.length&&Bt.warn(`hls.js config: "${$.join('", "')}" setting(s) are deprecated, use "${C}": ${JSON.stringify(n[C])}`)}),_i(_i({},t),n)}(h.DefaultConfig,t);this.userConfig=t,this._autoLevelCapping=-1,o.progressive&&function pl(h){const n=h.loader;n!==Kc&&n!==Yu?(Bt.log("[config]: Custom loader detected, cannot enable progressive streaming"),h.progressive=!1):function ph(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(h){}return!1}()&&(h.loader=Kc,h.progressive=!0,h.enableSoftwareAES=!0,Bt.log("[config]: Progressive streaming enabled, using FetchLoader"))}(o);const{abrController:u,bufferController:p,capLevelController:C,errorController:F,fpsController:$}=o,le=new F(this),Se=this.abrController=new u(this),Le=this.bufferController=new p(this),$e=this.capLevelController=new C(this),Je=new $(this),st=new md(this),gt=new ge(this),Tt=o.contentSteeringController,Zt=Tt?new Tt(this):null,rn=this.levelController=new _g(this,Zt),tn=new Qa(this),Mn=new wo(this.config),pn=this.streamController=new Ud(this,tn,Mn);$e.setStreamController(pn),Je.setStreamController(pn);const Kn=[st,rn,pn];Zt&&Kn.splice(1,0,Zt),this.networkControllers=Kn;const xn=[Se,Le,$e,Je,gt,tn];this.audioTrackController=this.createController(o.audioTrackController,Kn);const Wn=o.audioStreamController;Wn&&Kn.push(new Wn(this,tn,Mn)),this.subtitleTrackController=this.createController(o.subtitleTrackController,Kn);const er=o.subtitleStreamController;er&&Kn.push(new er(this,tn,Mn)),this.createController(o.timelineController,xn),Mn.emeController=this.emeController=this.createController(o.emeController,xn),this.cmcdController=this.createController(o.cmcdController,xn),this.latencyController=this.createController(fe,xn),this.coreComponents=xn,Kn.push(le);const Sn=le.onErrorOut;"function"==typeof Sn&&this.on(it.ERROR,Sn,le)}createController(t,o){if(t){const u=new t(this);return o&&o.push(u),u}return null}on(t,o,u=this){this._emitter.on(t,o,u)}once(t,o,u=this){this._emitter.once(t,o,u)}removeAllListeners(t){this._emitter.removeAllListeners(t)}off(t,o,u=this,p){this._emitter.off(t,o,u,p)}listeners(t){return this._emitter.listeners(t)}emit(t,o,u){return this._emitter.emit(t,o,u)}trigger(t,o){if(this.config.debug)return this.emit(t,t,o);try{return this.emit(t,t,o)}catch(u){Bt.error("An internal error happened while handling event "+t+'. Error message: "'+u.message+'". Here is a stacktrace:',u),this.trigger(it.ERROR,{type:rr.OTHER_ERROR,details:hn.INTERNAL_EXCEPTION,fatal:!1,event:t,error:u})}return!1}listenerCount(t){return this._emitter.listenerCount(t)}destroy(){Bt.log("destroy"),this.trigger(it.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(o=>o.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(o=>o.destroy()),this.coreComponents.length=0;const t=this.config;t.xhrSetup=t.fetchSetup=void 0,this.userConfig=null}attachMedia(t){Bt.log("attachMedia"),this._media=t,this.trigger(it.MEDIA_ATTACHING,{media:t})}detachMedia(){Bt.log("detachMedia"),this.trigger(it.MEDIA_DETACHING,void 0),this._media=null}loadSource(t){this.stopLoad();const o=this.media,u=this.url,p=this.url=Mo.buildAbsoluteURL(self.location.href,t,{alwaysNormalize:!0});Bt.log(`loadSource:${p}`),o&&u&&(u!==p||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(o)),this.trigger(it.MANIFEST_LOADING,{url:t})}startLoad(t=-1){Bt.log(`startLoad(${t})`),this.networkControllers.forEach(o=>{o.startLoad(t)})}stopLoad(){Bt.log("stopLoad"),this.networkControllers.forEach(t=>{t.stopLoad()})}swapAudioCodec(){Bt.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){Bt.log("recoverMediaError");const t=this._media;this.detachMedia(),t&&this.attachMedia(t)}removeLevel(t,o=0){this.levelController.removeLevel(t,o)}get levels(){return this.levelController.levels||[]}get currentLevel(){return this.streamController.currentLevel}set currentLevel(t){Bt.log(`set currentLevel:${t}`),this.loadLevel=t,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(t){Bt.log(`set nextLevel:${t}`),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(t){Bt.log(`set loadLevel:${t}`),this.levelController.manualLevel=t}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(t){this.levelController.nextLoadLevel=t}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(t){Bt.log(`set firstLevel:${t}`),this.levelController.firstLevel=t}get startLevel(){return this.levelController.startLevel}set startLevel(t){Bt.log(`set startLevel:${t}`),-1!==t&&(t=Math.max(t,this.minAutoLevel)),this.levelController.startLevel=t}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(t){const o=!!t;o!==this.config.capLevelToPlayerSize&&(o?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=o)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:t}=this.abrController;return t?t.getEstimate():NaN}get ttfbEstimate(){const{bwEstimator:t}=this.abrController;return t?t.getEstimateTTFB():NaN}set autoLevelCapping(t){this._autoLevelCapping!==t&&(Bt.log(`set autoLevelCapping:${t}`),this._autoLevelCapping=t)}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(t){Ue.indexOf(t)>-1&&(this._maxHdcpLevel=t)}get autoLevelEnabled(){return-1===this.levelController.manualLevel}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:t,config:{minAutoBitrate:o}}=this;if(!t)return 0;const u=t.length;for(let p=0;p<u;p++)if(t[p].maxBitrate>=o)return p;return 0}get maxAutoLevel(){const{levels:t,autoLevelCapping:o,maxHdcpLevel:u}=this;let p;if(p=-1===o&&t&&t.length?t.length-1:o,u)for(let C=p;C--;){const F=t[C].attrs["HDCP-LEVEL"];if(F&&F<=u)return C}return p}get nextAutoLevel(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)}set nextAutoLevel(t){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,t)}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get audioTracks(){const t=this.audioTrackController;return t?t.audioTracks:[]}get audioTrack(){const t=this.audioTrackController;return t?t.audioTrack:-1}set audioTrack(t){const o=this.audioTrackController;o&&(o.audioTrack=t)}get subtitleTracks(){const t=this.subtitleTrackController;return t?t.subtitleTracks:[]}get subtitleTrack(){const t=this.subtitleTrackController;return t?t.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(t){const o=this.subtitleTrackController;o&&(o.subtitleTrack=t)}get subtitleDisplay(){const t=this.subtitleTrackController;return!!t&&t.subtitleDisplay}set subtitleDisplay(t){const o=this.subtitleTrackController;o&&(o.subtitleDisplay=t)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(t){this.config.lowLatencyMode=t}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}}return h.defaultConfig=void 0,h})();const ef=["modalTarget"];function zc(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"h5",2),e._uU(2,"Mensaje de Confirmaci\xf3n"),e.qZA(),e.qZA(),e.TgZ(3,"div",3),e._uU(4),e.qZA(),e.TgZ(5,"div",4),e.TgZ(6,"button",5),e.NdJ("click",function(){return e.CHM(t).$implicit.close()}),e._uU(7,"Si"),e.qZA(),e.TgZ(8,"button",6),e.NdJ("click",function(){return e.CHM(t).$implicit.dismiss()}),e._uU(9,"No"),e.qZA(),e.qZA()}if(2&h){const t=e.oxw();e.xp6(4),e.hij(" ",t.message," ")}}let nu=(()=>{class h extends Ie.X{constructor(t,o,u,p,C,F){super(o,p,C,F),this.modalService=t,this.restProvider=o,this.http=u,this.events=p,this.domSanitizer=C,this.sharedData=F,this.close=new e.vpe,this.confirm=new e.vpe}ngOnInit(){}ngAfterViewInit(){this.modalService.open(this.modalTarget,{container:"#sinovadMainContainer",modalDialogClass:"modal-dialog modal-dialog-centered modal-dialog-scrollable",scrollable:!0,ariaLabelledBy:"exampleModalCenteredScrollableTitle"}).result.then(t=>{this.confirm.emit(!0)},t=>{this.close.emit(!0)})}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(Y.FF),e.Y36(Re.C),e.Y36(S.eN),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(ke.g))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-confirm-message-modal"]],viewQuery:function(t,o){if(1&t&&e.Gf(ef,5),2&t){let u;e.iGM(u=e.CRH())&&(o.modalTarget=u.first)}},inputs:{message:"message"},outputs:{close:"close",confirm:"confirm"},features:[e.qOj],decls:2,vars:0,consts:[["modalTarget",""],[1,"modal-header"],["id","exampleModalCenteredScrollableTitle",1,"modal-title"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"]],template:function(t,o){1&t&&e.YNc(0,zc,10,1,"ng-template",null,0,e.W1O)},styles:[".disabled[_ngcontent-%COMP%]{pointer-events:none}"]}),h})();const ru=["controlsContainer"],iu=["settingsContainer"],_h=["videoPrincipalContainer"],tf=["videoTarget"];function yh(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"button",53),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).goToPreviousEpisode()}),e._UZ(1,"img",37),e.ALo(2,"formatDataPipe"),e.qZA()}2&h&&(e.xp6(1),e.Q6J("src",e.xi3(2,1,"previous-episode.png","GetImageURLByKey"),e.LSH))}function nf(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"button",54),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).goToNextEpisode()}),e._UZ(1,"img",37),e.ALo(2,"formatDataPipe"),e.qZA()}2&h&&(e.xp6(1),e.Q6J("src",e.xi3(2,1,"next-episode.png","GetImageURLByKey"),e.LSH))}function rf(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"button",55,56),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).playOrPauseVideo()}),e.TgZ(2,"img",9),e.NdJ("error",function(){e.CHM(t);const u=e.MAs(1);return e.oxw(2).focusButton(u)}),e.qZA(),e._UZ(3,"img",39),e.ALo(4,"formatDataPipe"),e.qZA()}2&h&&(e.xp6(3),e.Q6J("src",e.xi3(4,1,"play-video.png","GetImageURLByKey"),e.LSH))}function qc(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"button",57,58),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).playOrPauseVideo()}),e.TgZ(2,"img",9),e.NdJ("error",function(){e.CHM(t);const u=e.MAs(1);return e.oxw(2).focusButton(u)}),e.qZA(),e._UZ(3,"img",39),e.ALo(4,"formatDataPipe"),e.qZA()}2&h&&(e.xp6(3),e.Q6J("src",e.xi3(4,1,"pause-video.png","GetImageURLByKey"),e.LSH))}const sf=function(h){return{"show-controls":h}};function bg(h,n){if(1&h&&(e.TgZ(0,"div",59),e._uU(1," Cargando video... "),e.qZA()),2&h){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(1,sf,t.showControls))}}const ou=function(h){return{selected:h}};function af(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"button",70),e.NdJ("click",function(){const p=e.CHM(t).$implicit;return e.oxw(3).onClickPrincipalSettingsOption(p)}),e._uU(1),e.qZA()}if(2&h){const t=n.$implicit,o=e.oxw(3);e.MGl("id","stream_option_",t.index,""),e.Q6J("ngClass",e.VKq(3,ou,o.currentSelectedPrincipalSettingOption&&t.index==o.currentSelectedPrincipalSettingOption.index)),e.xp6(1),e.hij(" ",t.name," ")}}function Jc(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"button",70),e.NdJ("click",function(){const p=e.CHM(t).$implicit;return e.oxw(4).onClickStreamOption(p)}),e._uU(1),e.qZA()}if(2&h){const t=n.$implicit,o=e.oxw(4);e.hYB("id","stream_option_",o.currentSelectedPrincipalSettingOption.id,"_suboption_",t.index,""),e.Q6J("ngClass",e.VKq(4,ou,o.currentSelectedPrincipalSettingOption.selectedOption&&o.currentSelectedPrincipalSettingOption.selectedOption.index==t.index)),e.xp6(1),e.hij(" ",t.name," ")}}function w(h,n){if(1&h&&(e.TgZ(0,"section",71),e.YNc(1,Jc,2,6,"ng-template",68),e.qZA()),2&h){const t=e.oxw(3);e.MGl("id","streams_suboptions_section_",t.currentSelectedPrincipalSettingOption.index,""),e.xp6(1),e.Q6J("ngForOf",t.currentSelectedPrincipalSettingOption.listOptions)}}function K(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"section",60,61),e.TgZ(2,"img",9),e.NdJ("error",function(){e.CHM(t);const u=e.MAs(1);return e.oxw(2).initializeSettingsContainer(u)}),e.qZA(),e.TgZ(3,"div",62),e.TgZ(4,"section",63),e.TgZ(5,"div",64),e.TgZ(6,"div",65),e.TgZ(7,"button",66),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).hideSettings()}),e._UZ(8,"img",12),e.ALo(9,"formatDataPipe"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"section",67),e.YNc(11,af,2,5,"ng-template",68),e.qZA(),e.YNc(12,w,2,2,"section",69),e.qZA(),e.qZA()}if(2&h){const t=e.oxw(2);e.xp6(8),e.Q6J("src",e.xi3(9,3,"back-button-short.png","GetImageURLByKey"),e.LSH),e.xp6(3),e.Q6J("ngForOf",t.listPrincipalSettingsOptions),e.xp6(1),e.Q6J("ngIf",t.currentSelectedPrincipalSettingOption)}}function E(h,n){if(1&h&&e._UZ(0,"div",72),2&h){const t=n.$implicit,o=e.oxw(3);e.Udp("display",o.checkIfDisplaySubtitles(t)?"block":"none"),e.Q6J("innerHtml",t.text,e.oJD)}}function Q(h,n){if(1&h&&e.YNc(0,E,1,3,"ng-template",68),2&h){const t=e.oxw(2);e.Q6J("ngForOf",t.currentSubtitleData)}}const ye=function(h){return{small:h}};function Ke(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"video",73,74),e.NdJ("error",function(){return e.CHM(t),e.oxw(2).onErrorVideo()})("loadedmetadata",function(){return e.CHM(t),e.oxw(2).onLoadedMetadata()})("loadeddata",function(){return e.CHM(t),e.oxw(2).onLoadedData()})("ended",function(){return e.CHM(t),e.oxw(2).OnEndedVideo()}),e.qZA()}if(2&h){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(1,ye,t.isSmallDevice()))}}const Mt=function(h){return{show:h}};function Wt(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"div",4,5),e.NdJ("click",function(){e.CHM(t);const u=e.MAs(1),p=e.oxw();return!p.isMobileDevice()&&p.onClickVideoContainer(u)})("touchstart",function(){e.CHM(t);const u=e.MAs(1),p=e.oxw();return p.isMobileDevice()&&p.onTouchVideoContainer(u)})("mousemove",function(){e.CHM(t);const u=e.MAs(1);return e.oxw().onMouseMoveVideoContainer(u)}),e.TgZ(2,"div",6),e.TgZ(3,"section",7,8),e.TgZ(5,"img",9),e.NdJ("error",function(){e.CHM(t);const u=e.MAs(4);return e.oxw().initializeControlsContainer(u)}),e.qZA(),e.TgZ(6,"section",10),e.TgZ(7,"button",11),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeVideo()}),e._UZ(8,"img",12),e.ALo(9,"formatDataPipe"),e.qZA(),e.TgZ(10,"div",13),e._uU(11),e.qZA(),e.qZA(),e.TgZ(12,"div",14),e.TgZ(13,"div",15),e.TgZ(14,"div",16),e.TgZ(15,"div",17,18),e._uU(17),e.qZA(),e.TgZ(18,"div",19),e.TgZ(19,"div",20),e.NdJ("contextmenu",function(){e.CHM(t);const u=e.MAs(24),p=e.oxw();return!p.isMobileDevice()&&p.onClickSlider(u)})("click",function(){e.CHM(t);const u=e.MAs(24);return e.oxw().onClickSlider(u)})("touchend",function(){e.CHM(t);const u=e.MAs(24),p=e.oxw();return p.isMobileDevice()&&p.onClickSlider(u)})("touchstart",function(u){e.CHM(t);const p=e.MAs(24),C=e.MAs(16),F=e.oxw();return F.isMobileDevice()&&F.onTouchStartSlider(u,p,C)})("touchmove",function(u){e.CHM(t);const p=e.MAs(24),C=e.MAs(16),F=e.oxw();return F.isMobileDevice()&&F.onTouchMoveSlider(u,p,C)})("mousedown",function(u){e.CHM(t);const p=e.MAs(24);return e.oxw().onMouseDownSlider(u,p)})("mousemove",function(u){e.CHM(t);const p=e.MAs(24);return e.oxw().onMouseMoveSlider(u,p)}),e._UZ(20,"div",21,22),e.TgZ(22,"div",23),e.TgZ(23,"div",24,25),e.TgZ(25,"div",26,25),e._UZ(27,"div",27,28),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(29,"div",17,29),e._uU(31),e.qZA(),e.qZA(),e.TgZ(32,"section",30),e.TgZ(33,"div",31),e.YNc(34,yh,3,4,"button",32),e.qZA(),e.TgZ(35,"div",33),e.TgZ(36,"div",34),e.YNc(37,nf,3,4,"button",35),e.TgZ(38,"button",36),e.NdJ("click",function(){return e.CHM(t),e.oxw().onChangeObjectContain()}),e._UZ(39,"img",37),e.ALo(40,"formatDataPipe"),e.qZA(),e.TgZ(41,"button",38),e.NdJ("click",function(){return e.CHM(t),e.oxw().toggleFullScreenVideo()}),e._UZ(42,"img",39),e.ALo(43,"formatDataPipe"),e.qZA(),e.TgZ(44,"button",40),e.NdJ("click",function(){return e.CHM(t),e.oxw().showSettings()}),e._UZ(45,"img",41),e.ALo(46,"formatDataPipe"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(47,"div",42),e.TgZ(48,"div",43),e.TgZ(49,"section",44),e.TgZ(50,"button",45),e.NdJ("click",function(){return e.CHM(t),e.oxw().rewindVideo()}),e._UZ(51,"img",39),e.ALo(52,"formatDataPipe"),e.qZA(),e.YNc(53,rf,5,4,"button",46),e.YNc(54,qc,5,4,"button",47),e.TgZ(55,"button",48),e.NdJ("click",function(){return e.CHM(t),e.oxw().forwardVideo()}),e._UZ(56,"img",39),e.ALo(57,"formatDataPipe"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(58,bg,2,3,"div",49),e.YNc(59,K,13,6,"section",50),e.YNc(60,Q,1,1,"ng-template",51),e.YNc(61,Ke,2,3,"video",52),e.qZA(),e.qZA()}if(2&h){const t=e.MAs(16),o=e.MAs(21),u=e.MAs(30),p=e.oxw();e.xp6(3),e.Q6J("ngClass",e.VKq(46,Mt,p.showControls)),e.xp6(5),e.Q6J("src",e.xi3(9,28,"back-button-short.png","GetImageURLByKey"),e.LSH),e.xp6(3),e.hij(" ",p.builderVideo.TranscodePrepareVideo.Title," "),e.xp6(4),e.Udp("visibility",p.showControls?"":"hidden"),e.xp6(2),e.hij(" ",p.getVideoTime()," "),e.xp6(1),e.Udp("width","calc(100% - "+(t.offsetWidth+u.offsetWidth)+"px)"),e.xp6(5),e.Udp("width",o.offsetWidth+"px"),e.xp6(4),e.Udp("width",p.getSliderPogressWidth()),e.xp6(2),e.Udp("visibility",p.showControls?"":"hidden"),e.xp6(2),e.hij(" ",p.getDurationTime()," "),e.xp6(3),e.Q6J("ngIf",p.isEnablePreviousEpisodeButton()),e.xp6(3),e.Q6J("ngIf",p.isEnableNextEpisodeButton()),e.xp6(2),e.Q6J("src",e.xi3(40,31,"aspect-ratio.png","GetImageURLByKey"),e.LSH),e.xp6(3),e.Q6J("src",e.xi3(43,34,"full-screen-video.png","GetImageURLByKey"),e.LSH),e.xp6(3),e.Q6J("src",e.xi3(46,37,"settings.png","GetImageURLByKey"),e.LSH),e.xp6(6),e.Q6J("src",e.xi3(52,40,"rewind.png","GetImageURLByKey"),e.LSH),e.xp6(2),e.Q6J("ngIf",!p.isPlayingVideo()),e.xp6(1),e.Q6J("ngIf",p.isPlayingVideo()),e.xp6(2),e.Q6J("src",e.xi3(57,43,"forward.png","GetImageURLByKey"),e.LSH),e.xp6(2),e.Q6J("ngIf",!p.loadedData),e.xp6(1),e.Q6J("ngIf",p.showingSettings),e.xp6(1),e.Q6J("ngIf",p.currentSubtitleData),e.xp6(1),e.Q6J("ngIf",p.showVideoTarget)}}function Ht(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"app-confirm-message-modal",75),e.NdJ("close",function(){return e.CHM(t),e.oxw().onDeclineReplyVideo()})("confirm",function(){return e.CHM(t),e.oxw().onConfirmReplyVideo()}),e.qZA()}if(2&h){const t=e.oxw();e.Q6J("message",t.getConfirmMessage())}}let cn=(()=>{class h extends Ie.X{constructor(t,o,u,p,C,F){super(t,o,u,p),this.restProvider=t,this.events=o,this.domSanitizer=u,this.sharedData=p,this.ref=C,this.http=F,this.fullscreen=new e.vpe,this.outputCloseVideo=new e.vpe,this._window=window,this.showVideo=!0,this.lastCurrentTime=0,this.showControls=!1,this.currentSubtitleData=void 0,this.haveError=!1,this.currentEpisode={},this.lastClickSeekButton=new Date,this.countSeekSecondsToAdvance=0,this.isUpdatingVideoSource=!1,this.showingSettings=!1,this.listPrincipalSettingsOptions=[{index:0,name:"AUDIO",listOptions:[],selectedOption:null},{index:1,name:"SUBT\xcdTULOS",listOptions:[],selectedOption:null}],this.lastRealVideoTime=0,this.initializeVideo=!1,this.showVideoTarget=!1,this.loadedData=!1,this.showReplyVideoMessageBox=!1}onTouchVideoContainer(t){this.showingSettings?this.initializeSettingsContainer(this.settingsContainer.nativeElement):(this.initializeControlsContainer(this.controlsContainer.nativeElement),this.isMobileDevice()&&this.showControlsTemporarily(t))}onClickVideoContainer(t){this.showingSettings?this.initializeSettingsContainer(this.settingsContainer.nativeElement):(this.initializeControlsContainer(this.controlsContainer.nativeElement),t.clicked=!0,setTimeout(()=>{t.clicked=!1},2e3),this.isMobileDevice()||this.showControlsTemporarily(t))}onTouchStartSlider(t,o,u){this.sliderContainer=o,o.startMove=!0,this.lastTmpVideoTime=(t.changedTouches[0].clientX-u.offsetWidth-8-4)/o.offsetWidth*100*this.builderVideo.TranscodePrepareVideo.TotalSeconds/100}onTouchMoveSlider(t,o,u){o.startMove&&(this.lastTmpVideoTime=(t.changedTouches[0].clientX-u.offsetWidth-8-4)/o.offsetWidth*100*this.builderVideo.TranscodePrepareVideo.TotalSeconds/100)}goToNextEpisode(){if(this.builderVideo.TranscodePrepareVideo&&this.builderVideo.ItemDetail.ListSeasons&&this.builderVideo.ItemDetail.ListSeasons.length>0&&this.builderVideo.ItemDetail.CurrentSeason){let t=this.builderVideo.ItemDetail.CurrentSeason.SeasonNumber,u=this.builderVideo.ItemDetail.CurrentEpisode.EpisodeNumber+1,p=this.builderVideo.ItemDetail.CurrentSeason.ListEpisodes.findIndex(C=>C.EpisodeNumber==u);if(-1!=p)this.getVideoByEpisode(this.builderVideo.ItemDetail.CurrentSeason.ListEpisodes[p]);else{let C=t+1,F=this.builderVideo.ItemDetail.ListSeasons.findIndex($=>$.SeasonNumber==C);if(-1!=F){let $=this.builderVideo.ItemDetail.ListSeasons[F];this.builderVideo.ItemDetail.CurrentSeason=$,$&&$.ListEpisodes&&$.ListEpisodes.length&&this.getVideoByEpisode($.ListEpisodes[0])}}}}initializeVideoData(){let t=this;this.sharedData.listProcessGUIDs.push(this.builderVideo.TranscodePrepareVideo.ProcessGUID),this.builderVideo.LoadStatus=J.O5.Empty,this.restProvider.executeHttpMethodByUrl(J.yw.POST,this.builderVideo.TranscodePrepareVideo.MediaServerUrl+"/transcodeVideos/GetVideoData",this.builderVideo.TranscodePrepareVideo).then(u=>{this.builderVideo.LoadStatus=J.O5.Generated;const p=wn().decode(u);let C=JSON.parse(p);this.builderVideo.TranscodeRunVideo=C,this.builderVideo.TranscodePrepareVideo=C.TranscodePrepareVideo,this.initializeStreams(),this.customMouseOutEvent=function(le){t.sliderContainer&&t.sliderContainer.startMove&&t.onClickSlider(t.sliderContainer)},window.addEventListener("click",this.customMouseOutEvent),setTimeout(()=>{this.executeHideControls()},1e3),window.addEventListener("beforeunload",function(le){t.deleteAllProcessesAndDirectories()}),this.onInitializeVideo()},u=>{this.showReplyVideoMessageBox=!0,console.error(u)}),this.sharedData.userData&&(window.setInterval(function(){t.ref.detectChanges()},0),this.currentInterval=window.setInterval(function(){t.UpdateVideoProfile()},1e4))}getVideoByEpisode(t){this.deleteAllProcessesAndDirectories();var o=this.GetTranscodeVideoFromEpisode(t);this.builderVideo.TranscodePrepareVideo=o,this.builderVideo.ItemDetail.ListSeasons&&(this.builderVideo.ItemDetail.CurrentSeason=this.builderVideo.ItemDetail.ListSeasons.find(p=>p.SeasonNumber==t.SeasonNumber),this.builderVideo.ItemDetail.CurrentEpisode=this.builderVideo.ItemDetail.CurrentSeason.ListEpisodes.find(p=>p.EpisodeNumber==t.EpisodeNumber)),this.lastRealVideoTime=0,this.resetStream(),this.sharedData.listProcessGUIDs.push(this.builderVideo.TranscodePrepareVideo.ProcessGUID),this.builderVideo.LoadStatus=J.O5.Empty,this.restProvider.executeHttpMethodByUrl(J.yw.POST,this.builderVideo.TranscodePrepareVideo.MediaServerUrl+"/transcodeVideos/GetVideoData",this.builderVideo.TranscodePrepareVideo).then(p=>{this.builderVideo.LoadStatus=J.O5.Generated;const C=wn().decode(p);let F=JSON.parse(C);this.builderVideo.TranscodeRunVideo=F,this.builderVideo.TranscodePrepareVideo=F.TranscodePrepareVideo,this.initializeStreams(),this.getVideoSource()},p=>{this.showReplyVideoMessageBox=!0,console.error(p)})}goToPreviousEpisode(){if(this.builderVideo.TranscodePrepareVideo&&this.builderVideo.ItemDetail.ListSeasons&&this.builderVideo.ItemDetail.ListSeasons.length>0&&this.builderVideo.ItemDetail.CurrentSeason){let t=this.builderVideo.ItemDetail.CurrentSeason.SeasonNumber,u=this.builderVideo.ItemDetail.CurrentEpisode.EpisodeNumber-1,p=this.builderVideo.ItemDetail.CurrentSeason.ListEpisodes.findIndex(C=>C.EpisodeNumber==u);if(-1!=p)this.getVideoByEpisode(this.builderVideo.ItemDetail.CurrentSeason.ListEpisodes[p]);else{let C=t+1,F=this.builderVideo.ItemDetail.ListSeasons.findIndex($=>$.SeasonNumber==C);if(-1!=F){let $=this.builderVideo.ItemDetail.ListSeasons[F];this.builderVideo.ItemDetail.CurrentSeason=$,$&&$.ListEpisodes&&$.ListEpisodes.length&&this.getVideoByEpisode($.ListEpisodes[$.ListEpisodes.length-1])}}}}isEnablePreviousEpisodeButton(){if(this.builderVideo.TranscodePrepareVideo&&this.builderVideo.ItemDetail.ListSeasons&&this.builderVideo.ItemDetail.ListSeasons.length>0&&this.builderVideo.ItemDetail.CurrentSeason){let t=this.builderVideo.ItemDetail.CurrentSeason.SeasonNumber,u=this.builderVideo.ItemDetail.CurrentEpisode.EpisodeNumber-1;if(-1!=this.builderVideo.ItemDetail.CurrentSeason.ListEpisodes.findIndex(C=>C.EpisodeNumber==u))return!0;{let C=t-1,F=this.builderVideo.ItemDetail.ListSeasons.findIndex($=>$.SeasonNumber==C);if(-1!=F){let $=this.builderVideo.ItemDetail.ListSeasons[F];return!!($&&$.ListEpisodes&&$.ListEpisodes.length)}return!1}}return!1}isEnableNextEpisodeButton(){if(this.builderVideo.TranscodePrepareVideo&&this.builderVideo.ItemDetail.ListSeasons&&this.builderVideo.ItemDetail.ListSeasons.length>0&&this.builderVideo.ItemDetail.CurrentSeason){let t=this.builderVideo.ItemDetail.CurrentSeason.SeasonNumber,u=this.builderVideo.ItemDetail.CurrentEpisode.EpisodeNumber+1;if(-1!=this.builderVideo.ItemDetail.CurrentSeason.ListEpisodes.findIndex(C=>C.EpisodeNumber==u))return!0;{let C=t+1,F=this.builderVideo.ItemDetail.ListSeasons.findIndex($=>$.SeasonNumber==C);if(-1!=F){let $=this.builderVideo.ItemDetail.ListSeasons[F];return!!($&&$.ListEpisodes&&$.ListEpisodes.length)}return!1}}return!1}showSettings(){this.showControls=!1,this.ref.detectChanges(),this.showingSettings=!0,this.ref.detectChanges()}initializeControlsContainer(t){let o=this;this.customKeyboardControlsEvent&&t.removeEventListener("keydown",this.customKeyboardControlsEvent),this.showingSettings=!1,this.focusContainer(t,this.ref),this.customKeyboardControlsEvent=function(p){461==p.keyCode||27==p.keyCode?o.closeVideo():o.loadedData&&(o.showControlsTemporarily(t),o.setKeyActionsInBrowser(p,t,!0))},t.addEventListener("keydown",this.customKeyboardControlsEvent)}initializeSettingsContainer(t){let o=this;this.customKeyboardSettingsEvent&&t.removeEventListener("keydown",this.customKeyboardSettingsEvent),this.focusContainer(t,this.ref),this.customKeyboardSettingsEvent=function(p){461==p.keyCode||27==p.keyCode?o.hideSettings():o.setKeyActionsInBrowser(p,t)},t.addEventListener("keydown",this.customKeyboardSettingsEvent)}hideSettings(){this.showingSettings=!1,this.ref.detectChanges(),this.initializeControlsContainer(this.controlsContainer.nativeElement)}onClickPrincipalSettingsOption(t){this.currentSelectedPrincipalSettingOption=t}onClickStreamOption(t){this.currentSelectedPrincipalSettingOption.selectedOption=t,this.showingSettings=!1,this.ref.detectChanges(),this.initializeControlsContainer(this.controlsContainer.nativeElement),0==this.currentSelectedPrincipalSettingOption.index&&(this.hls.audioTrack=t.index),1==this.currentSelectedPrincipalSettingOption.index&&(1e6==t.index?this.hls.subtitleDisplay=!1:(this.hls.subtitleTrack=t.index,this.hls.subtitleDisplay=!0))}getSubtitle(t){let o=this;this.http.get(t,{responseType:"text"}).subscribe(u=>{u&&(0,Bi.Q)(u)&&(0,Bi.Q)(u).entries?(o.currentSubtitleData=(0,Bi.Q)(u).entries,0==o.currentSubtitleData.length?setTimeout(()=>{o.getSubtitle(t)},1e3):o.ref.detectChanges()):(console.error("No hay data en los subtitulos aun"),setTimeout(()=>{o.getSubtitle(t)},1e3))},u=>{console.error(u),setTimeout(()=>{o.getSubtitle(t)},1e3)})}showSubtitle(){}closeVideo(){this.currentInterval&&window.clearInterval(this.currentInterval),this.intervalVideoTime&&window.clearInterval(this.intervalVideoTime),this.deleteAllProcessesAndDirectories(),this.outputCloseVideo.emit(!0)}focusButton(t){t.focus(),this.sharedData.currentSelectedElement=t}setKeyActionsInBrowser(t,o,u){var p=t.keyCode;let C=Array.from(o.querySelectorAll("section")),F=C.findIndex($e=>$e.id==this.sharedData.currentActiveSection.id),le=Array.from(C[F].querySelectorAll("button")),Se=le.length,Le=le.findIndex($e=>$e.id==this.sharedData.currentSelectedElement.id);if(39==p){let $e=Le+1;if(console.log(":::::::::::"),console.log("currentSectionIndex::"+F),console.log("currentElementIndex::"+Le),console.log("newElementIndex::"+$e),$e<Se){let Je=le[$e];this.sharedData.currentSelectedElement=Je,Je.focus()}else"forwardButton"==this.sharedData.currentSelectedElement.id&&this.forwardVideo()}if(37==p){let $e=Le-1;if(console.log(":::::::::::"),console.log("currentSectionIndex::"+F),console.log("currentElementIndex::"+Le),console.log("newElementIndex::"+$e),$e>=0){let Je=le[$e];this.sharedData.currentSelectedElement=Je,Je.focus()}else"rewindButton"==this.sharedData.currentSelectedElement.id&&this.rewindVideo()}if(40==p){let $e=F+1;if($e<C.length){let Je=C[$e];this.sharedData.currentActiveSection=Je;let gt=Array.from(Je.querySelectorAll("button"))[0];this.sharedData.currentSelectedElement=gt,gt.focus()}}if(38==p){let $e=F-1;if($e>=0){let Je=C[$e];this.sharedData.currentActiveSection=Je;let gt=Array.from(Je.querySelectorAll("button"))[0];this.sharedData.currentSelectedElement=gt,gt.focus()}}}ngAfterViewInit(){}getConfirmMessage(){var t="Vacio";switch(this.builderVideo.LoadStatus){case J.O5.Empty:t="Vac\xedo";break;case J.O5.Generated:t="Generado";break;case J.O5.Initialized:t="Inicializado";break;case J.O5.LoadedMetada:t="Cargado Metadata";break;case J.O5.LoadedData:t="Cargado Data"}return"Hubo un error al intentar reproducir el video, se quedo con el estado de "+t+", desea intentarlo de nuevo?"}updateAudioAndVideoList(){if(this.listPrincipalSettingsOptions[0].listOptions=[],this.listPrincipalSettingsOptions[0].selectedOption=void 0,this.listPrincipalSettingsOptions[1].listOptions=[],this.listPrincipalSettingsOptions[1].selectedOption=void 0,this.builderVideo.TranscodePrepareVideo.ListAudioStreams&&this.builderVideo.TranscodePrepareVideo.ListAudioStreams.length>0&&(this.builderVideo.TranscodePrepareVideo.ListAudioStreams.forEach(t=>{let o="";"spa"==t.language&&(o="Espa\xf1ol"),"eng"==t.language&&(o="Ingles"),t.title&&(o=o+" ("+t.title+")"),t.name=o}),this.listPrincipalSettingsOptions[0].listOptions=this.builderVideo.TranscodePrepareVideo.ListAudioStreams,this.listPrincipalSettingsOptions[0].selectedOption=this.builderVideo.TranscodePrepareVideo.ListAudioStreams.find(t=>1==t.isDefault)),this.builderVideo.TranscodePrepareVideo.ListSubtitlesStreams&&this.builderVideo.TranscodePrepareVideo.ListSubtitlesStreams.length>0){this.builderVideo.TranscodePrepareVideo.ListSubtitlesStreams.forEach(u=>{let p="";"spa"==u.language&&(p="Espa\xf1ol"),"eng"==u.language&&(p="Ingles"),u.title&&(p=p+" ("+u.title+")"),u.name=p});let t=[];t.push({index:1e6,name:"Ninguno"}),t=t.concat(this.builderVideo.TranscodePrepareVideo.ListSubtitlesStreams),this.listPrincipalSettingsOptions[1].listOptions=t;let o=this.builderVideo.TranscodePrepareVideo.ListSubtitlesStreams.find(u=>1==u.isDefault);null==o&&(o=t.find(u=>1e6==u.index)),this.listPrincipalSettingsOptions[1].selectedOption=o}this.currentSelectedPrincipalSettingOption=this.listPrincipalSettingsOptions[0]}initializeStreams(){this.updateAudioAndVideoList(),this.lastRealVideoTime=null!=this.builderVideo.TranscodePrepareVideo.CurrentTime?this.builderVideo.TranscodePrepareVideo.CurrentTime:0}UpdateVideoProfile(){if(null!=this.builderVideo.TranscodePrepareVideo.TotalSeconds){var t=0;this.getCurrentVideoTime()>0&&this.getCurrentVideoTime()<=this.builderVideo.TranscodePrepareVideo.TotalSeconds&&((t=this.getCurrentVideoTime())-20<0?t=0:t-=20),this.restProvider.executeSinovadApiService(J.yw.PUT,"/videos/UpdateVideoProfile",{VideoId:this.builderVideo.TranscodePrepareVideo.VideoId,ProfileId:this.sharedData.currentProfile.Id,DurationTime:this.builderVideo.TranscodePrepareVideo.TotalSeconds,CurrentTime:t}).then(u=>{},u=>{console.error(u)})}}ngOnInit(){this.initializeVideoData()}executeHideControls(){this.sliderContainer&&this.sliderContainer.startMove?setTimeout(()=>{this.executeHideControls()},2e3):this.showControls=!1}getDurationTime(){return this.builderVideo.TranscodePrepareVideo&&this.builderVideo.TranscodePrepareVideo.TotalSeconds?this.getFormatTime(this.builderVideo.TranscodePrepareVideo.TotalSeconds):"00:00:00"}getFormatTime(t){var o=parseInt(t,10),u=Math.floor(o/3600),p=Math.floor((o-3600*u)/60),C=o-3600*u-60*p;return u<10&&(u="0"+u),p<10&&(p="0"+p),C<10&&(C="0"+C),u+":"+p+":"+C}getVideoTime(){if(this.lastTmpVideoTime)return this.getFormatTime(this.lastTmpVideoTime);{let t=this.getCurrentVideoTime();return null!=t&&t>0?this.getFormatTime(t):"00:00:00"}}onMouseDownSlider(t,o){this.sliderContainer=o,o.startMove=!0,this.calculateNewTimeToGo(t,o)}onMouseMoveSlider(t,o){o.startMove&&this.calculateNewTimeToGo(t,o)}calculateNewTimeToGo(t,o){this.lastTmpVideoTime=t.offsetX/o.offsetWidth*100*this.builderVideo.TranscodePrepareVideo.TotalSeconds/100}resetStream(){this.showVideoTarget=!1,this.loadedData=!1,null!=this.dashMediaPlayer&&(this.dashMediaPlayer.resetSettings(),this.dashMediaPlayer.reset(),this.dashMediaPlayer.destroy(),this.dashMediaPlayer=void 0),this.hls&&(this.hls.destroy(),this.hls=void 0)}onClickSlider(t){if(this.lastTmpVideoTime){if(t.startMove=!1,this.lastTmpVideoTime>this.getCurrentVideoTime()){let o=this.lastTmpVideoTime-this.getCurrentVideoTime();this.executeForwardVideo(o)}else if(this.lastTmpVideoTime<this.getCurrentVideoTime()){let o=this.getCurrentVideoTime()-this.lastTmpVideoTime;this.executeRewindVideo(o)}this.lastTmpVideoTime=void 0}}updateVideoData(t){this.deleteAllProcessesAndDirectories();let o=(0,eo.Z)();this.sharedData.listProcessGUIDs.push(o),this.builderVideo.TranscodePrepareVideo.TimeSpan=t.toString(),this.builderVideo.TranscodePrepareVideo.ProcessGUID=o,this.builderVideo.LoadStatus=J.O5.Empty,this.restProvider.executeHttpMethodByUrl(J.yw.POST,this.builderVideo.TranscodePrepareVideo.MediaServerUrl+"/transcodeVideos/UpdateVideoData",this.builderVideo.TranscodePrepareVideo).then(p=>{this.builderVideo.LoadStatus=J.O5.Generated;const C=wn().decode(p);let F=JSON.parse(C);this.builderVideo.TranscodeRunVideo=F,this.updateAudioAndVideoList(),this.getVideoSource()},p=>{this.showReplyVideoMessageBox=!0,console.error(p)})}deleteAllProcessesAndDirectories(){this.sharedData.listProcessGUIDs&&this.sharedData.listProcessGUIDs.length>0&&this.deleteProcessesAndDirectories()}deleteProcessesAndDirectories(){var t=this.sharedData.listProcessGUIDs.join(",");this.restProvider.executeHttpMethodByUrl(J.yw.DELETE,this.builderVideo.TranscodePrepareVideo.MediaServerUrl+"/transcodeVideos?guids="+t).then(u=>{const p=wn().decode(u);let C=JSON.parse(p);if(C&&C.length>0&&this.sharedData.listProcessGUIDs.length>0)for(var F=0;F<C.length;F++){let $=C[F],le=this.sharedData.listProcessGUIDs.findIndex(Se=>Se==$);-1!=le&&this.sharedData.listProcessGUIDs.splice(le,1)}},u=>{console.error(u)})}getSliderPogressWidth(){if(this.builderVideo.TranscodePrepareVideo&&this.builderVideo.TranscodePrepareVideo.TotalSeconds){let t=this.builderVideo.TranscodePrepareVideo.TotalSeconds,u=(this.lastTmpVideoTime?this.lastTmpVideoTime:this.getCurrentVideoTime())/t*100;return u>100&&(u=100),u+"%"}return 0}OnEndedVideo(){this.isEnableNextEpisodeButton()&&this.goToNextEpisode()}isPlayingVideo(){return this.builderVideo.TranscodePrepareVideo&&this.builderVideo.TranscodePrepareVideo.VideoTransmissionTypeId==J.Ln.MPEGDASH?!(!this.dashMediaPlayer||this.dashMediaPlayer.isPaused()):!(!this.videoTarget||0!=this.videoTarget.nativeElement.paused)}playOrPauseVideo(){console.log("subtitle tracks"),console.log(this.hls.subtitleTracks),console.log("audio tracks"),console.log(this.hls.audioTracks),this.builderVideo.TranscodePrepareVideo&&this.builderVideo.TranscodePrepareVideo.VideoTransmissionTypeId==J.Ln.MPEGDASH?this.dashMediaPlayer&&(this.dashMediaPlayer.isPaused()?this.dashMediaPlayer.play():this.dashMediaPlayer.pause()):this.videoTarget&&(this.videoTarget.nativeElement.paused?this.videoTarget.nativeElement.play():this.videoTarget.nativeElement.pause())}showVideoInFullScreen(){this.fullscreen.emit(!0)}toggleFullScreenVideo(){document.fullscreenElement||this.showVideoInFullScreen()}displayVideoUsingDash(t){let o=this;this.dashMediaPlayer=Ar.MediaPlayer().create(),this.dashMediaPlayer.updateSettings({streaming:{gaps:{jumpGaps:!0,jumpLargeGaps:!0,enableSeekFix:!0,enableStallFix:!0},buffer:{bufferPruningInterval:this.builderVideo.TranscodePrepareVideo.TotalSeconds,bufferToKeep:this.builderVideo.TranscodePrepareVideo.TotalSeconds}}}),this.dashMediaPlayer.initialize(this.videoTarget.nativeElement,t),this.dashMediaPlayer.on(Ar.MediaPlayer.events.ERROR,function(u){console.log(u),console.error("hubo un error")}),this.dashMediaPlayer.on(Ar.MediaPlayer.events.PLAYBACK_ERROR,function(u){console.log(u),console.error("hubo un error de playback")}),this.dashMediaPlayer.on(Ar.MediaPlayer.events.PLAYBACK_WAITING,function(u){console.error("PLAYBACK_WAITING"),console.log(u)}),this.dashMediaPlayer.on(Ar.MediaPlayer.events.BUFFER_EMPTY,function(u){console.error("BUFFER_EMPTY"),console.log(u)}),this.dashMediaPlayer.on(Ar.MediaPlayer.events.STREAM_INITIALIZED,function(u){console.error("STREAM_INITIALIZED"),o.initializeVideo=!0,console.log(u)}),this.ref.detectChanges(),this.dashMediaPlayer.play(),this.showVideoInFullScreen()}onInitializeVideo(){this.executeInitializeVideo()}getCurrentVideoTime(){return this.builderVideo.TranscodePrepareVideo&&this.builderVideo.TranscodePrepareVideo.VideoTransmissionTypeId==J.Ln.MPEGDASH?this.dashMediaPlayer&&this.dashMediaPlayer.time()?this.lastRealVideoTime+this.dashMediaPlayer.time():this.lastRealVideoTime:this.videoTarget&&null!=this.videoTarget.nativeElement.currentTime?this.lastRealVideoTime+this.videoTarget.nativeElement.currentTime:this.lastRealVideoTime}checkIfDisplaySubtitles(t){let u=1e3*(this.getCurrentVideoTime()-1);return t.from<=u&&t.to>=u}onDeclineReplyVideo(){this.showReplyVideoMessageBox=!1,this.closeVideo()}onConfirmReplyVideo(){this.showReplyVideoMessageBox=!1,this.lastRealVideoTime=this.getCurrentVideoTime()-2>=0?this.getCurrentVideoTime()-2:0,this.resetStream(),this.callUpdateVideoData(this.lastRealVideoTime)}onLoadedMetadata(){this.builderVideo.LoadStatus=J.O5.LoadedMetada,console.log("onLoadedMetadata")}onLoadedData(){console.log("onLoadedData"),this.builderVideo.LoadStatus=J.O5.LoadedData,this.loadedData=!0,this.showReplyVideoMessageBox=!1,this.videoTarget&&(this.videoTarget.nativeElement.currentTime=0,this.videoTarget.nativeElement.play())}onErrorVideo(){console.log("onErrorVideo")}executeInitializeVideo(){this.getVideoSource()}testAnyVideo(){}getVideoSource(){let t=this;this.http.get(this.builderVideo.TranscodeRunVideo.VideoPath,{headers:void 0,responseType:"blob"}).subscribe(o=>{this.builderVideo.LoadStatus=J.O5.Initialized,this.showVideoTarget=!0,this.ref.detectChanges(),-1!=this.builderVideo.TranscodeRunVideo.VideoPath.indexOf("mpd")?this.displayVideoUsingDash(this.builderVideo.TranscodeRunVideo.VideoPath):-1!=this.builderVideo.TranscodeRunVideo.VideoPath.indexOf("m3u8")?this.displayVideoUsingHLS(this.builderVideo.TranscodeRunVideo.VideoPath):(this.videoTarget.nativeElement.src=this.builderVideo.TranscodeRunVideo.VideoPath,this.videoTarget.nativeElement.currentTime=this.lastRealVideoTime,this.lastRealVideoTime=0,this.videoTarget.nativeElement.play())},o=>{console.error(o),t.showReplyVideoMessageBox=!0})}displayVideoUsingHLS(t){let o=this;setTimeout(()=>{o.builderVideo.LoadStatus!=J.O5.LoadedData&&(o.showReplyVideoMessageBox=!0)},1e4,o),this.showVideoInFullScreen(),bs.isSupported()?(this.hls=new bs,this.hls.attachMedia(this.videoTarget.nativeElement),this.hls.loadSource(t),this.hls.on(bs.Events.MEDIA_ATTACHED,function(u){console.log("MEDIA_ATTACHED"),console.log(u)}),this.hls.on(bs.Events.AUDIO_TRACK_LOADED,function(u){console.log("AUDIO_LOADED"),console.log(u)}),this.hls.on(bs.Events.MANIFEST_LOADED,function(u){console.log("MANIFEST_LOADED"),console.log(u)}),this.hls.on(bs.Events.MANIFEST_PARSED,function(u){console.log("MANIFEST_PARSED"),console.log(u)}),this.hls.on(bs.Events.ERROR,function(u){o.videoTarget.nativeElement.CurrentTime=o.videoTarget.nativeElement.CurrentTime+1,console.error("Ocurrio un error"),console.log(u)})):(this.loadedData=!0,this.videoTarget&&(this.videoTarget.nativeElement.src=t,this.videoTarget.nativeElement.currentTime=0,this.videoTarget.nativeElement.play()))}onChangeObjectContain(){"contain"==this.videoTarget.nativeElement.style.objectFit||""==this.videoTarget.nativeElement.style.objectFit?this.videoTarget.nativeElement.style.objectFit="cover":"cover"==this.videoTarget.nativeElement.style.objectFit?this.videoTarget.nativeElement.style.objectFit="fill":"fill"==this.videoTarget.nativeElement.style.objectFit&&(this.videoTarget.nativeElement.style.objectFit="contain")}callUpdateVideoData(t){let o=(0,eo.Z)();this.lastTimeSpanChangeGUID=o,setTimeout(()=>{o==this.lastTimeSpanChangeGUID&&this.updateVideoData(t)},1e3)}rewindVideo(){this.executeRewindVideo(10)}executeRewindVideo(t){this.initializeVideo=!1;let o=0;o=this.getCurrentVideoTime()-t>=0?t:this.getCurrentVideoTime(),this.builderVideo.TranscodePrepareVideo&&this.builderVideo.TranscodePrepareVideo.VideoTransmissionTypeId==J.Ln.MPEGDASH?this.dashMediaPlayer&&this.dashMediaPlayer.time()>o?this.dashMediaPlayer.seek(this.dashMediaPlayer.time()-o):(this.lastRealVideoTime=this.getCurrentVideoTime()-o,this.resetStream(),this.callUpdateVideoData(this.lastRealVideoTime)):this.videoTarget&&null!=this.videoTarget.nativeElement.currentTime&&this.videoTarget.nativeElement.currentTime>o?this.videoTarget.nativeElement.currentTime=this.videoTarget.nativeElement.currentTime-o:(this.lastRealVideoTime=this.getCurrentVideoTime()-o,this.resetStream(),this.callUpdateVideoData(this.lastRealVideoTime))}forwardVideo(){this.executeForwardVideo(10)}executeForwardVideo(t){if(this.initializeVideo=!1,this.getCurrentVideoTime()<this.builderVideo.TranscodePrepareVideo.TotalSeconds){let o=0;o=this.getCurrentVideoTime()+t>this.builderVideo.TranscodePrepareVideo.TotalSeconds?this.builderVideo.TranscodePrepareVideo.TotalSeconds>this.getCurrentVideoTime()?this.builderVideo.TranscodePrepareVideo.TotalSeconds-this.getCurrentVideoTime():0:t,this.builderVideo.TranscodePrepareVideo&&this.builderVideo.TranscodePrepareVideo.VideoTransmissionTypeId==J.Ln.MPEGDASH?this.dashMediaPlayer&&this.dashMediaPlayer.duration()-this.dashMediaPlayer.time()>=o?this.dashMediaPlayer.seek(this.dashMediaPlayer.time()+o):(this.lastRealVideoTime=this.getCurrentVideoTime()+o,this.resetStream(),this.callUpdateVideoData(this.lastRealVideoTime)):this.videoTarget&&null!=this.videoTarget.nativeElement.duration&&null!=this.videoTarget.nativeElement.currentTime&&this.videoTarget.nativeElement.duration-this.videoTarget.nativeElement.currentTime>=o?this.videoTarget.nativeElement.currentTime=this.videoTarget.nativeElement.currentTime+o:(this.lastRealVideoTime=this.getCurrentVideoTime()+o,this.resetStream(),this.callUpdateVideoData(this.lastRealVideoTime))}}onMouseMoveVideoContainer(t){!this.showControls&&!t.clicked&&!this.showingSettings&&this.showControlsTemporarily(t)}executeShowControlsTemporarily(t,o){this.showControls=!0,this.ref.detectChanges(),setTimeout(()=>{t.guid==o&&this.executeHideControls()},2e3)}showControlsTemporarily(t){if(!this.showControls){let o=(0,eo.Z)();t.guid=o,this.isMobileDevice()?setTimeout(()=>{this.executeShowControlsTemporarily(t,o)},250):this.executeShowControlsTemporarily(t,o)}}toogleVideoControls(t){this.showControls?this.showControls=!0:this.showControlsTemporarily(t)}ngOnDestroy(){this.dashMediaPlayer&&(this.dashMediaPlayer.reset(),this.dashMediaPlayer.destroy()),this.hls&&(this.hls.detachMedia(),this.hls.destroy()),window.removeEventListener("click",this.customMouseOutEvent)}onResize(t){}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(Re.C),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(ke.g),e.Y36(e.sBO),e.Y36(S.eN))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-video"]],viewQuery:function(t,o){if(1&t&&(e.Gf(ru,5),e.Gf(iu,5),e.Gf(_h,5),e.Gf(tf,5)),2&t){let u;e.iGM(u=e.CRH())&&(o.controlsContainer=u.first),e.iGM(u=e.CRH())&&(o.settingsContainer=u.first),e.iGM(u=e.CRH())&&(o.videoPrincipalContainer=u.first),e.iGM(u=e.CRH())&&(o.videoTarget=u.first)}},hostBindings:function(t,o){1&t&&e.NdJ("resize",function(p){return o.onResize(p)},!1,e.Jf7)},inputs:{builderVideo:"builderVideo"},outputs:{fullscreen:"fullscreen",outputCloseVideo:"outputCloseVideo"},features:[e.qOj],decls:4,vars:2,consts:[["id","videoPrincipalContainer",1,"sinovad-video-principal-container","sinovad-custom-container",2,"width","100%","height","100%"],["videoPrincipalContainer",""],["class","sinovad-video-container",3,"click","touchstart","mousemove",4,"ngIf"],[3,"message","close","confirm",4,"ngIf"],[1,"sinovad-video-container",3,"click","touchstart","mousemove"],["videoContainer",""],[1,"sinovad-full-screen-video-container"],["tabindex","0",1,"sinovad-controls-container",3,"ngClass"],["controlsContainer",""],["src","",2,"display","none",3,"error"],["id","videoHeaderSection","tabindex","0",1,"sinovad-video-header-section"],["id","backVideoButton",1,"sinovad-video-control-button",3,"click"],[3,"src"],[1,"sinovad-video-header-section-title-container"],[1,"sinovad-full-screen-video-popup-footer"],[2,"width","100%"],[1,"solitv-progress-bar"],[1,"sinovad-current-time"],["controlLeft",""],[1,"solitv-slider-container"],["tabindex","-1",1,"solitv-slider-content",3,"contextmenu","click","touchend","touchstart","touchmove","mousedown","mousemove"],[1,"sinovad-slider-fills"],["silderFills",""],[2,"width","0px"],[1,"sinovad-slider-fills-progress-container"],["sliderContainer",""],[1,"sinovad-slider-fills-progress-content"],[1,"sinovad-slider-fills-progress"],["silderProgress",""],["controlRight",""],["id","section_video_secondary_buttons","tabindex","0",1,"sinovad-full-screen-video-popup-episode-buttons-section","sinovad-section"],[1,"sinovad-full-screen-video-popup-episode-buttons-section-left"],["id","previousButton","class","sinovad-video-control-button",3,"click",4,"ngIf"],[1,"sinovad-full-screen-video-popup-episode-buttons-section-right"],[2,"display","flex","align-items","center","float","right"],["id","nextButton","class","sinovad-video-control-button",3,"click",4,"ngIf"],["id","aspectRatio",1,"sinovad-video-control-button",2,"margin-left","20px",3,"click"],["width","40px",3,"src"],["id","fullScreenButton",1,"sinovad-video-control-button",2,"margin-left","20px",3,"click"],["width","30px",3,"src"],["id","settingsOption",1,"sinovad-video-control-button",2,"margin-left","20px",3,"click"],["width","36px",3,"src"],[1,"sinovad-section",2,"display","flex","height","50px"],[1,"sinovad-full-screen-video-popup-footer-center"],["id","section_video_principal_buttons","tabindex","0",1,"sinovad-full-screen-video-popup-footer-center-content"],["id","rewindButton",1,"sinovad-video-control-button",2,"margin-right","25px",3,"click"],["id","playButton","class","sinovad-video-control-button principal",3,"click",4,"ngIf"],["id","stopButton","class","sinovad-video-control-button principal",3,"click",4,"ngIf"],["id","forwardButton",1,"sinovad-video-control-button",2,"margin-left","25px",3,"click"],["class","sinovad-loading-video",3,"ngClass",4,"ngIf"],["class","easy-media-settings-section-container","tabindex","0",4,"ngIf"],[3,"ngIf"],["id","video","class","sinovad-custom-video",3,"ngClass","error","loadedmetadata","loadeddata","ended",4,"ngIf"],["id","previousButton",1,"sinovad-video-control-button",3,"click"],["id","nextButton",1,"sinovad-video-control-button",3,"click"],["id","playButton",1,"sinovad-video-control-button","principal",3,"click"],["playButton",""],["id","stopButton",1,"sinovad-video-control-button","principal",3,"click"],["stopButton",""],[1,"sinovad-loading-video",3,"ngClass"],["tabindex","0",1,"easy-media-settings-section-container"],["settingsContainer",""],[1,"easy-media-settings-section-content"],["id","section_settings_back_button","tabindex","0",1,"sinovad-settings-options-header-section"],[1,"sinovad-settings-section-container-left"],[1,"sinovad-settings-section-content-left"],["id","closeSettings",1,"sinovad-video-settings-button",3,"click"],["id","streams_options_section","tabindex","0",1,"sinovad-settings-options-section"],["ngFor","",3,"ngForOf"],["class","sinovad-settings-suboptions-section","tabindex","0",3,"id",4,"ngIf"],[3,"id","ngClass","click"],["tabindex","0",1,"sinovad-settings-suboptions-section",3,"id"],[1,"sinovad-subtitles-forzed-section",3,"innerHtml"],["id","video",1,"sinovad-custom-video",3,"ngClass","error","loadedmetadata","loadeddata","ended"],["videoTarget",""],[3,"message","close","confirm"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0,1),e.YNc(2,Wt,62,48,"div",2),e.qZA(),e.YNc(3,Ht,1,1,"app-confirm-message-modal",3)),2&t&&(e.xp6(2),e.Q6J("ngIf",o.showVideo),e.xp6(1),e.Q6J("ngIf",o.showReplyVideoMessageBox))},directives:[H.O5,H.mk,H.sg,nu],pipes:[X.A],styles:["[_nghost-%COMP%]{position:absolute;width:100%;height:100%}button[_ngcontent-%COMP%]{outline:none!important;cursor:pointer!important;box-sizing:border-box!important}video[_ngcontent-%COMP%]::cue{background-color:transparent;font-size:45px;color:#ff0;text-align:center;font-weight:700;text-shadow:2px 2px black}video.small[_ngcontent-%COMP%]::cue{font-size:25px}.sinovad-loading-video[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;padding-bottom:0;left:0;background-color:#000;z-index:9999;display:flex;align-items:center;justify-content:center;font-size:30px;color:#fff}.sinovad-loading-video.show-controls[_ngcontent-%COMP%]{padding-bottom:300px;top:150px}.easy-media-settings-section-container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:auto;background:rgba(0,0,0,.5);padding:0 0 50px;z-index:99999}.easy-media-settings-section-content[_ngcontent-%COMP%]{display:block}.sinovad-settings-options-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:48px;border-bottom:1px solid #dedede;margin-bottom:50px}.sinovad-settings-options-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff;outline:none;padding:20px;background-color:transparent;border:none;font-size:30px;border-radius:5px;cursor:pointer}.sinovad-settings-options-section[_ngcontent-%COMP%]   button.selected[_ngcontent-%COMP%]{color:#000;background-color:#fff}.sinovad-settings-options-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#007bff}.sinovad-settings-options-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible{color:#007bff}.sinovad-settings-options-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{color:#007bff!important}.sinovad-settings-suboptions-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:40px}.sinovad-settings-suboptions-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff;outline:none;padding:10px;background-color:transparent;border:none;font-size:30px;cursor:pointer;margin-right:6px;border-radius:5px}.sinovad-settings-suboptions-section[_ngcontent-%COMP%]   button.selected[_ngcontent-%COMP%]{color:#000;background-color:#fff}.sinovad-settings-suboptions-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#007bff}.sinovad-settings-suboptions-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible{color:#007bff}.sinovad-settings-suboptions-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{color:#007bff!important}.sinovad-video-container[_ngcontent-%COMP%]{width:100%;height:100%;background:black}.sinovad-full-screen-video-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;-webkit-user-select:none;-moz-user-select:none;user-select:none}.sinovad-full-screen-video-popup[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%}.sinovad-video-header-section[_ngcontent-%COMP%]{position:absolute;top:0;left:0;padding-left:0;z-index:999;display:flex;width:100%;background:rgba(0,0,0,.5)}.sinovad-video-header-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:60px;display:flex;align-items:center;width:70px;justify-content:center;cursor:pointer}.sinovad-video-header-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:40px}.sinovad-full-screen-video-popup-footer[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;padding-left:0;z-index:999;display:flex;width:100%;background:rgba(0,0,0,.5)}.solitv-progress-bar[_ngcontent-%COMP%]{background:transparent;height:40px;pointer-events:auto;position:relative;width:100%;display:flex;align-items:center;padding-left:4px;padding-right:4px}.solitv-slider-container[_ngcontent-%COMP%]{box-sizing:border-box;cursor:pointer;height:100%;pointer-events:auto;position:relative;touch-action:none;padding-left:8px;padding-right:8px}.solitv-slider-content[_ngcontent-%COMP%]{height:100%;padding-top:20px;cursor:pointer;outline:none}.sinovad-slider-fills[_ngcontent-%COMP%]{height:3px;overflow:hidden;pointer-events:none;width:100%;background:white;opacity:.5}.sinovad-slider-fills-progress-container[_ngcontent-%COMP%]{position:relative}.sinovad-slider-fills-progress-content[_ngcontent-%COMP%]{width:100%;height:8px;margin-top:-6px}.sinovad-slider-fills-progress[_ngcontent-%COMP%]{cursor:pointer;background:white;height:100%;width:0%}.sinovad-video-control-button[_ngcontent-%COMP%]{color:#fff;background:transparent;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;width:40px;height:40px;opacity:.9}.sinovad-video-control-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:unset}.sinovad-video-control-button[_ngcontent-%COMP%]:hover{background:#007bff}.sinovad-video-control-button[_ngcontent-%COMP%]:focus-visible{background:#007bff}.sinovad-video-control-button[_ngcontent-%COMP%]:focus{background:#007bff!important}.sinovad-settings-options-header-section[_ngcontent-%COMP%]{display:flex}.sinovad-settings-section-container-left[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;float:left}.sinovad-settings-section-content-left[_ngcontent-%COMP%]{position:relative}.sinovad-video-settings-button[_ngcontent-%COMP%]{color:#fff;background:transparent;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;width:70px;height:60px;opacity:.9}.sinovad-video-settings-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:unset;width:30px;height:40px}.sinovad-video-settings-button[_ngcontent-%COMP%]:hover{background:#007bff!important}.sinovad-video-settings-button[_ngcontent-%COMP%]:focus-visible{background:#007bff!important}.sinovad-video-settings-button[_ngcontent-%COMP%]:focus{background:#007bff!important}.sinovad-video-container[_ngcontent-%COMP%]{width:100%;height:100%}.sinovad-controls-container[_ngcontent-%COMP%]{z-index:-99;pointer-events:none}.sinovad-controls-container.show[_ngcontent-%COMP%]{z-index:unset;pointer-events:unset}.sinovad-custom-video[_ngcontent-%COMP%]{width:100%;height:100%}.sinovad-full-screen-video-popup-episode-buttons-section[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;height:40px}.sinovad-full-screen-video-popup-episode-buttons-section-left[_ngcontent-%COMP%]{display:block;float:left;width:100%;padding-left:10px}.sinovad-full-screen-video-popup-episode-buttons-section-right[_ngcontent-%COMP%]{display:block;float:right;width:100%;padding-right:10px}.sinovad-full-screen-video-popup-episode-buttons-section-right[_ngcontent-%COMP%]   .sinovad-video-control-button[_ngcontent-%COMP%]{float:right}.sinovad-full-screen-video-popup-footer-left[_ngcontent-%COMP%]{display:block;float:left;width:170px}.sinovad-full-screen-video-popup-footer-left-content[_ngcontent-%COMP%]{display:flex;align-items:center;float:left;width:100%;height:100%;color:#fff}.sinovad-current-time[_ngcontent-%COMP%]{color:#fff;font-size:25px}.sinovad-full-screen-video-popup-footer-center[_ngcontent-%COMP%]{display:block;float:left;width:100%}.sinovad-full-screen-video-popup-footer-center-content[_ngcontent-%COMP%]{display:flex;align-items:center;float:left;width:100%;height:100%;justify-content:center}.sinovad-full-screen-video-popup-footer-right[_ngcontent-%COMP%]{width:100px;display:block;float:right}.sinovad-full-screen-video-popup-footer-right-content[_ngcontent-%COMP%]{display:flex;align-items:center;float:right;height:100%}.sinovad-video-header-section-title-container[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:35px;color:#fff;justify-content:center;width:100%;padding-right:70px}.sinovad-subtitles-forzed-section[_ngcontent-%COMP%]{position:absolute;width:100%;bottom:10px;font-size:45px;color:#ff0;text-align:center;font-weight:700;text-shadow:2px 2px black}.sinovad-custom-video-object-fit[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;color:#fff;padding:10px}.sinovad-custom-video-object-fit[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:6px;font-size:18px;font-weight:700}.sinovad-custom-video-object-fit[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-color:#fff;color:#000;height:30px;font-size:18px;border-radius:5px}.sinovad-custom-video-object-fit[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background-color:#fff;color:#000}.small[_nghost-%COMP%]   .sinovad-video-header-section-title-container[_ngcontent-%COMP%]{font-size:25px}"]}),h})(),En=(()=>{class h extends Ie.X{constructor(t,o,u,p,C){super(t,u,p,C),this.restProvider=t,this.http=o,this.events=u,this.domSanitizer=p,this.sharedData=C}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(Re.C),e.Y36(S.eN),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(ke.g))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-splash-screen"]],features:[e.qOj],decls:6,vars:6,consts:[[1,"sinovad-splash-screen-container"],["container",""],[2,"text-align","center"],["role","status",1,"spinner-grow"],[3,"src"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0,1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e._UZ(4,"img",4),e.ALo(5,"formatDataPipe"),e.qZA(),e.qZA(),e.qZA()),2&t){const u=e.MAs(1);e.xp6(4),e.Udp("width",u.offsetWidth/3+"px"),e.Q6J("src",e.xi3(5,3,"sinovad-logo.png","GetImageURLByKey"),e.LSH)}},pipes:[X.A],styles:["[_nghost-%COMP%]{width:100%;height:100%;background-color:#000;position:absolute;z-index:99999;top:0;left:0}.sinovad-splash-screen-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;height:100%}.sinovad-splash-screen-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50%}.spinner-grow[_ngcontent-%COMP%]{background:black;width:unset;height:unset}"]}),h})();function or(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"router-outlet",11),e.NdJ("activate",function(u){return e.CHM(t),e.oxw(2).onActivate(u)}),e.qZA()}}function zn(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"div",3),e.TgZ(1,"div",null,4),e.TgZ(3,"app-header-web",5),e.NdJ("goHome",function(){return e.CHM(t),e.oxw().ShowInitial()})("selectOption",function(u){return e.CHM(t),e.oxw().onClickNavbarOption(u)})("logout",function(){return e.CHM(t),e.oxw().logOut()})("showSplashScreen",function(){return e.CHM(t),e.oxw().showSplashScreen=!0})("logout",function(){return e.CHM(t),e.oxw().logOut()}),e.qZA(),e.qZA(),e.TgZ(4,"div",6),e.TgZ(5,"section",7,8),e.YNc(7,or,1,0,"ng-template",9),e.qZA(),e.qZA(),e._UZ(8,"div",null,10),e.qZA()}if(2&h){const t=e.MAs(2),o=e.MAs(9),u=e.oxw();e.xp6(4),e.Udp("height","calc(100% - "+(t.offsetHeight+o.offsetHeight)+"px)"),e.xp6(1),e.Udp("width","100%"),e.xp6(2),e.Q6J("ngIf",!u.hideContent)}}function An(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"div",3),e.TgZ(1,"router-outlet",11),e.NdJ("activate",function(u){return e.CHM(t),e.oxw().onActivate(u)}),e.qZA(),e.qZA()}}const wr=function(h){return{small:h}};function cr(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"section",12),e.TgZ(1,"app-video",13),e.NdJ("fullscreen",function(){return e.CHM(t),e.oxw().showVideoInFullScreen()})("outputCloseVideo",function(){return e.CHM(t),e.oxw().closeVideo()}),e.qZA(),e.qZA()}if(2&h){const t=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(2,wr,t.isSmallDevice()))("builderVideo",t.sharedData.currentVideo)}}function Ir(h,n){1&h&&e._UZ(0,"app-splash-screen")}let Nr=(()=>{class h extends Ie.X{constructor(t,o,u,p,C,F,$,le){super(o,F,$,le),this.route=t,this.restProvider=o,this.router=u,this.ref=p,this.http=C,this.events=F,this.domSanitizer=$,this.sharedData=le,this.toggleVideo=new e.vpe,this.showVideoPopUp=!1,this.showSplashScreen=!1,this.hideContent=!1,this._window=window}showVideoInFullScreen(){this.toggleVideo.emit(!0)}ngOnInit(){}logOut(){null!=this.sharedData.configurationData.currentHost&&this.restProvider.executeSinovadStreamServerService(J.yw.DELETE,"/main/DeleteMediaServerData").then(t=>{},t=>{console.error(t)}),this.sharedData.currentMediaServerData=void 0,this.sharedData.currentProfile=void 0,this.sharedData.userData=void 0,this.sharedData.currentToken=void 0,localStorage.removeItem("apiKey"),this.router.navigate([this.sharedData.platform,"landing"],{skipLocationChange:!1})}toogleMenu(){this.ref.detectChanges()}executeSearch(){}onClickNavbarOption(t){this.selectedNavbarOption=t,this[t.method]()}refresh(){this.selectedNavbarOption&&this[this.selectedNavbarOption.method](),this.ref.detectChanges()}ShowInitial(){this.hideContent=!0,this.ref.detectChanges(),this.hideContent=!1,this.ref.detectChanges(),this.router.navigate([this.sharedData.platform,"home"],{skipLocationChange:!1})}ShowSeries(){this.hideContent=!0,this.ref.detectChanges(),this.hideContent=!1,this.ref.detectChanges(),this.router.navigate([this.sharedData.platform,"tvseries"],{skipLocationChange:!1})}ShowMovies(){this.hideContent=!0,this.ref.detectChanges(),this.hideContent=!1,this.ref.detectChanges(),this.router.navigate([this.sharedData.platform,"movies"],{skipLocationChange:!1})}ShowSearch(){this.hideContent=!0,this.ref.detectChanges(),this.hideContent=!1,this.router.navigate([this.sharedData.platform,"search"],{skipLocationChange:!1})}closeVideo(){this.sharedData.currentVideo=void 0,this.ShowInitial(),this.toggleVideo.emit(!1)}onActivate(t){let o=this;(t instanceof Xt||t instanceof jn||t instanceof Bn||t instanceof Qe||t instanceof Lt)&&t.toggleVideo.subscribe(u=>{o.toggleVideo.emit(u)}),t instanceof Dt&&(t.selectProfile.subscribe(u=>{o.sharedData.currentProfile=u,o.router.navigate([this.sharedData.platform,"home"],{skipLocationChange:!1})}),t.loadedProfiles.subscribe(u=>{o.showSplashScreen=!1})),t instanceof Jn&&t.showSplashScreen.subscribe(u=>{o.showSplashScreen=!0})}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(R.gz),e.Y36(Re.C),e.Y36(R.F0),e.Y36(e.sBO),e.Y36(S.eN),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(ke.g))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-root-web"]],outputs:{toggleVideo:"toggleVideo"},features:[e.qOj],decls:4,vars:4,consts:[["class","sinovad-page-container",4,"ngIf"],["class","sinovad-container-video",4,"ngIf"],[4,"ngIf"],[1,"sinovad-page-container"],["header",""],[3,"goHome","selectOption","logout","showSplashScreen"],[1,"sinovad-menu-body-container"],["id","bodyContainer","tabindex","0",1,"sinovad-body-container"],["principalContainer",""],[3,"ngIf"],["footer",""],[1,"small",3,"activate"],[1,"sinovad-container-video"],[3,"ngClass","builderVideo","fullscreen","outputCloseVideo"]],template:function(t,o){1&t&&(e.YNc(0,zn,10,5,"div",0),e.YNc(1,An,2,0,"div",0),e.YNc(2,cr,2,4,"section",1),e.YNc(3,Ir,1,0,"app-splash-screen",2)),2&t&&(e.Q6J("ngIf",null!=o.sharedData.currentToken&&null!=o.sharedData.userData),e.xp6(1),e.Q6J("ngIf",null==o.sharedData.currentToken&&null==o.sharedData.userData),e.xp6(1),e.Q6J("ngIf",o.sharedData.currentVideo),e.xp6(1),e.Q6J("ngIf",o.showSplashScreen))},directives:[H.O5,Si,R.lC,cn,H.mk,En],styles:["[_nghost-%COMP%]{position:absolute;width:100%;height:100%}button[_ngcontent-%COMP%]{outline:none!important;cursor:pointer!important;box-sizing:border-box!important}.sinovad-module-container[_ngcontent-%COMP%]{border-top:1px solid #dedede}.sinovad-container-video[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;z-index:1054;display:flex;align-items:center;justify-content:center;background:black;top:0;left:0}.sinovad-page-container[_ngcontent-%COMP%]{display:block;position:absolute;width:100%;height:100%}.sinovad-header-container[_ngcontent-%COMP%]{height:60px;background:rgba(0,0,0,.15)}.sinovad-menu-body-container[_ngcontent-%COMP%]{display:flex;width:100%;height:100%}.sinovad-menu-container[_ngcontent-%COMP%]{width:200px;display:block;background:black;overflow-y:auto}.sinovad-body-container[_ngcontent-%COMP%]{display:block;height:100%}.small[_ngcontent-%COMP%]   .sinovad-body-container[_ngcontent-%COMP%]{width:100%!important}.small[_ngcontent-%COMP%]   .sinovad-menu-container[_ngcontent-%COMP%]{position:absolute;z-index:999}.sinovad-context-menu-item-list[_ngcontent-%COMP%]{position:absolute;z-index:999999999;background-color:#dcd8bb;border:1px solid black;border-radius:5px}.sinovad-context-menu-option[_ngcontent-%COMP%]{display:flex;padding:10px;cursor:pointer;color:#000;align-items:center}.sinovad-context-menu-option[_ngcontent-%COMP%]:hover{color:#00f}.sinovad-context-menu-option-icon[_ngcontent-%COMP%]{display:block}.sinovad-context-menu-option-text[_ngcontent-%COMP%]{padding-left:10px;display:block}"]}),h})();const br=["mainContainer"],fi=["initialSound"];function Lr(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"app-root-web",3),e.NdJ("toggleVideo",function(u){return e.CHM(t),e.oxw().executeToggleVideo(u)}),e.qZA()}}const Kr=function(h){return{small:h}};let Fr=(()=>{class h extends Ie.X{constructor(t,o,u,p,C,F,$){super(o,C,F,$),this.router=t,this.restProvider=o,this.ref=u,this.http=p,this.events=C,this.domSanitizer=F,this.sharedData=$,this.togglevideo=new e.vpe,this.instance=new e.vpe,this.showRootPage=!0}checkIfIsIsValidPathName(){var t="/"+this.sharedData.platform;return!(!window.location.pathname.startsWith(t+"/")&&window.location.pathname!=t)}ngOnInit(){window.configurationData&&(this.sharedData.configurationData=window.configurationData),this.sharedData.platform="web",localStorage.getItem("apiKey")?(this.sharedData.currentToken=localStorage.getItem("apiKey"),this.getUser().then(t=>{this.getProfiles().then(o=>{this.showRootPage=!0,window.location.pathname.startsWith("/web/")?this.router.navigateByUrl(window.location.pathname).then(u=>{},u=>{this.router.navigateByUrl("/web/404")}):this.router.navigateByUrl("/web/home")},o=>{console.error(o)})},t=>{console.error(t)}),this.ref.detectChanges()):(this.sharedData.currentToken=void 0,setTimeout(()=>{this.showRootPage=!0,window.location.pathname.startsWith("/web/")?this.router.navigateByUrl(window.location.pathname).then(t=>{},t=>{this.router.navigateByUrl("/web/landing")}):this.router.navigateByUrl("/web/landing")},100))}executeAudio(){}onEndedAudio(){}refreshApp(){}showPageInFullScreen(){if(!document.fullscreenElement){var t=this.mainContainer.nativeElement;t.requestFullScreen?t.requestFullScreen():t.webkitRequestFullScreen?t.webkitRequestFullScreen():t.mozRequestFullScreen(),this.mainContainer.nativeElement.click(),this.ref.detectChanges()}}executeToggleVideo(t){this.togglevideo.emit(t),t?this.showPageInFullScreen():this.sharedData.configurationData.alwaysFullScreen||document.fullscreenElement&&document.exitFullscreen()}ngAfterViewInit(){setTimeout(()=>{this.instance.emit(this)},250);let t=this;window.addEventListener("click",function(p){t.sharedData.configurationData.alwaysFullScreen&&t.showPageInFullScreen()})}onActivate(t){let o=this;t instanceof Nr&&t.toggleVideo.subscribe(u=>{o.executeToggleVideo(u)})}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(R.F0),e.Y36(Re.C),e.Y36(e.sBO),e.Y36(S.eN),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(ke.g))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-sinovad-web"]],viewQuery:function(t,o){if(1&t&&(e.Gf(br,5),e.Gf(fi,7)),2&t){let u;e.iGM(u=e.CRH())&&(o.mainContainer=u.first),e.iGM(u=e.CRH())&&(o.initialSound=u.first)}},outputs:{togglevideo:"togglevideo",instance:"instance"},features:[e.qOj],decls:3,vars:4,consts:[["id","sinovadMainContainer",1,"sinovad-main-container",3,"ngClass"],["mainContainer",""],[3,"toggleVideo",4,"ngIf"],[3,"toggleVideo"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0,1),e.YNc(2,Lr,1,0,"app-root-web",2),e.qZA()),2&t&&(e.Q6J("ngClass",e.VKq(2,Kr,o.isSmallDevice())),e.xp6(2),e.Q6J("ngIf",o.showRootPage))},directives:[H.mk,H.O5,Nr],styles:["[_nghost-%COMP%]{position:absolute;width:100%;height:100%;background:#1F212B;overflow-y:hidden}.sinovad-main-container[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:#1F212B;overflow-y:hidden}"]}),h})(),li=(()=>{class h{}return h.\u0275fac=function(t){return new(t||h)},h.\u0275mod=e.oAB({type:h}),h.\u0275inj=e.cJS({imports:[[H.ez,ne.u5,ce.m,Oe,ne.UX]]}),h})(),ui=(()=>{class h{}return h.\u0275fac=function(t){return new(t||h)},h.\u0275mod=e.oAB({type:h}),h.\u0275inj=e.cJS({imports:[[H.ez,ne.u5,ce.m,ne.UX,ve.ProfilesViewPageModule]]}),h})();function Li(h,n){if(1&h&&(e.TgZ(0,"div",7),e.TgZ(1,"h2"),e._uU(2),e.qZA(),e.qZA()),2&h){const t=e.oxw();e.xp6(2),e.hij('Resultados para "',t.searchText,'"')}}const Ki=function(h){return{small:h}};let Xi=(()=>{class h extends Ie.X{constructor(t,o,u,p,C,F,$){super(u,C,F,$),this.router=t,this.route=o,this.restProvider=u,this.http=p,this.events=C,this.domSanitizer=F,this.sharedData=$,this.executeSearch=new e.vpe,this.showItemView=new e.vpe,this.searchText=""}ngOnInit(){let t=this.route.snapshot.queryParams.text;null!=t&&""!=t?this.searchText=t:this.router.navigate([this.sharedData.platform,"home"],{skipLocationChange:!1})}ngAfterViewInit(){this.executeSearch.emit(this.searchText)}onSelectItem(t){t.Item.TvSerieId?this.router.navigateByUrl("/"+this.sharedData.platform+"/tvseriedetail/"+t.Item.TvSerieId):t.Item.MovieId&&this.router.navigateByUrl("/"+this.sharedData.platform+"/moviedetail/"+t.Item.MovieId)}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(R.F0),e.Y36(R.gz),e.Y36(Re.C),e.Y36(S.eN),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(ke.g))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-search-view-desktop"]],outputs:{executeSearch:"executeSearch",showItemView:"showItemView"},features:[e.qOj],decls:8,vars:7,consts:[[1,"sinovad-search-view-container",3,"ngClass"],["container",""],[1,"sinovad-search-view-title"],["header",""],["class","sinovad-search-view-title-content",4,"ngIf"],["itemListContainer",""],[3,"executeSearch","showItemView"],[1,"sinovad-search-view-title-content"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0,1),e.TgZ(2,"div",2,3),e.YNc(4,Li,3,1,"div",4),e.qZA(),e.TgZ(5,"div",null,5),e.TgZ(7,"app-vertical-item-list",6),e.NdJ("showItemView",function(p){return o.onSelectItem(p)}),e.qZA(),e.qZA(),e.qZA()),2&t){const u=e.MAs(3);e.Q6J("ngClass",e.VKq(5,Ki,o.isSmallDevice())),e.xp6(4),e.Q6J("ngIf",null!=o.searchText&&""!=o.searchText),e.xp6(1),e.Udp("height","calc(100% - "+u.offsetHeight+"px)"),e.xp6(2),e.Q6J("executeSearch",o.executeSearch)}},directives:[H.mk,H.O5,Be.E],styles:[".sinovad-search-view-container[_ngcontent-%COMP%]{display:block;height:100%;width:100%;padding:10px;background:#2d3744;overflow:auto}.sinovad-search-view-title[_ngcontent-%COMP%]{color:#fff;margin-left:20px;margin-right:20px}.sinovad-search-view-title[_ngcontent-%COMP%]   .sinovad-search-view-title-content[_ngcontent-%COMP%]{height:100%;border-bottom:1px solid #dedede;width:100%}"]}),h})();class fs{}const Wi=["directoryChooserModelTarget"],qo=function(h){return{"sinovad-directory-selected":h}};function Cs(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){const p=e.CHM(t).$implicit;return e.oxw(2).onClickMainDirectory(p)}),e._uU(1),e.qZA()}if(2&h){const t=n.$implicit,o=e.oxw(2);e.Q6J("ngClass",e.VKq(2,qo,o.selectedMainDirectory&&t.name==o.selectedMainDirectory.name)),e.xp6(1),e.hij(" ",t.name," ")}}function co(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onClickBackFolder()}),e._uU(1," <= .. [Regresar] "),e.qZA()}}function Lo(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){const p=e.CHM(t).$implicit;return e.oxw(2).onClickSubDirectory(p)}),e._uU(1),e.qZA()}if(2&h){const t=n.$implicit,o=e.oxw(2);e.Q6J("ngClass",e.VKq(2,qo,o.selectedSubdirectory&&t.name==o.selectedSubdirectory.name)),e.xp6(1),e.hij(" ",t.name," ")}}function zu(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"h5",2),e._uU(2,"Seleccionar directorio"),e.qZA(),e.TgZ(3,"button",3),e.NdJ("click",function(){return e.CHM(t).$implicit.dismiss()}),e.qZA(),e.qZA(),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"div",6),e.YNc(7,Cs,2,4,"ng-template",7),e.qZA(),e.TgZ(8,"div",8),e.YNc(9,co,2,0,"button",9),e.YNc(10,Lo,2,4,"ng-template",7),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",10),e.TgZ(12,"button",11),e.NdJ("click",function(){return e.CHM(t).$implicit.dismiss()}),e._uU(13,"Close"),e.qZA(),e.TgZ(14,"button",12),e.NdJ("click",function(){return e.CHM(t).$implicit.close()}),e._uU(15,"Guardar"),e.qZA(),e.qZA()}if(2&h){const t=e.oxw();e.xp6(7),e.Q6J("ngForOf",t.listMainDirectories),e.xp6(2),e.Q6J("ngIf",t.selectedSubdirectory),e.xp6(1),e.Q6J("ngForOf",t.listSubdirectoriesTmp)}}let js=(()=>{class h extends Ie.X{constructor(t,o,u,p,C,F){super(o,p,C,F),this.modalService=t,this.restProvider=o,this.http=u,this.events=p,this.domSanitizer=C,this.sharedData=F,this.listSubdirectoriesTmp=[],this.outputSelectedSubdirectory=new e.vpe,this.closeChooserDirectory=new e.vpe}ngOnInit(){let t=this.listMainDirectories[0];this.selectedMainDirectory=t,this.getSubdirectoriesByPath(t)}ngAfterViewInit(){this.modalService.open(this.directoryChooserModelTarget,{container:"#sinovadMainContainer",modalDialogClass:"modal-dialog modal-dialog-centered modal-dialog-scrollable",ariaLabelledBy:"modal-basic-title"}).result.then(t=>{this.saveDirectory()},t=>{this.closeChooserDirectory.emit(!0)})}saveDirectory(){this.outputSelectedSubdirectory.emit(this.getCurrentPath())}getCurrentPath(){return this.selectedSubdirectory?this.selectedSubdirectory.path:this.selectedMainDirectory.path}onClickBackFolder(){this.selectedSubdirectory.parentDirectory.isMainDirectory?(this.selectedSubdirectory=void 0,this.getSubdirectoriesByPath(this.selectedMainDirectory)):(this.selectedSubdirectory=this.selectedSubdirectory.parentDirectory,this.getSubdirectoriesByPath(this.selectedSubdirectory))}onClickMainDirectory(t){this.selectedMainDirectory=t,this.getSubdirectoriesByPath(this.selectedMainDirectory)}onClickSubDirectory(t){if(null==this.selectedSubdirectory)this.selectedSubdirectory=t,this.selectedSubdirectory.parentDirectory=this.selectedMainDirectory;else{let o=JSON.parse(JSON.stringify(this.selectedSubdirectory));this.selectedSubdirectory=t,this.selectedSubdirectory.parentDirectory=o}this.getSubdirectoriesByPath(this.selectedSubdirectory)}getSubdirectoriesByPath(t){var o=wn().encode(t.path);this.restProvider.executeSinovadStreamServerService(J.yw.GET,"/directories/"+o).then(u=>{this.listSubdirectoriesTmp=JSON.parse(u)},u=>{console.error(u)})}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(Y.FF),e.Y36(Re.C),e.Y36(S.eN),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(ke.g))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-directory-chooser"]],viewQuery:function(t,o){if(1&t&&e.Gf(Wi,5),2&t){let u;e.iGM(u=e.CRH())&&(o.directoryChooserModelTarget=u.first)}},inputs:{listMainDirectories:"listMainDirectories"},outputs:{outputSelectedSubdirectory:"outputSelectedSubdirectory",closeChooserDirectory:"closeChooserDirectory"},features:[e.qOj],decls:2,vars:0,consts:[["directoryChooserModelTarget",""],[1,"modal-header"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"sinovad-directory-chooser-content"],[1,"sinovad-main-directories-section"],["ngFor","",3,"ngForOf"],[1,"sinovad-subdirectories-section"],["class","sinovad-subdirectory-option",3,"click",4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"sinovad-main-directory-option",3,"ngClass","click"],[1,"sinovad-subdirectory-option",3,"click"],[1,"sinovad-subdirectory-option",3,"ngClass","click"]],template:function(t,o){1&t&&e.YNc(0,zu,16,3,"ng-template",null,0,e.W1O)},directives:[H.sg,H.mk,H.O5],styles:["[_nghost-%COMP%]{background:rgba(17,17,17,.65);padding:20px}.sinovad-directory-chooser-container[_ngcontent-%COMP%]{display:block;background-color:#282828;color:#000;width:400px;height:500px;border:1px solid #dedede;border-radius:5px;padding:20px}.sinovad-main-directories-section[_ngcontent-%COMP%]{display:block;width:50%;padding-right:20px}.sinovad-subdirectories-section[_ngcontent-%COMP%]{display:block;width:50%;max-height:350px;overflow-x:hidden;overflow-y:auto;padding-left:10px}.sinovad-directory-chooser-content[_ngcontent-%COMP%]{display:flex;width:100%;max-height:350px;background:black}.sinovad-main-directory-option[_ngcontent-%COMP%]{display:block;padding:6px 10px;width:100%;background-color:transparent;border:none;outline:none;color:#fff;opacity:.7;cursor:pointer;text-align:left}.sinovad-main-directory-option[_ngcontent-%COMP%]:hover{opacity:1;background-color:#ffffff0d}.sinovad-subdirectory-option[_ngcontent-%COMP%]{display:block;padding:6px 10px;width:100%;background-color:transparent;border:none;outline:none;color:#fff;opacity:.7;cursor:pointer;text-align:left}.sinovad-subdirectory-option[_ngcontent-%COMP%]:hover{opacity:1;background-color:#ffffff0d}.sinovad-directory-chooser-header[_ngcontent-%COMP%]{display:block;float:right;width:100%}.sinovad-directory-chooser-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{float:right;background:transparent;border:0;outline:none;cursor:pointer;font-size:20px;color:#fff;opacity:.7}.sinovad-directory-chooser-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1}.sinovad-directory-selected[_ngcontent-%COMP%]{border-left:4px solid #007bff;padding-left:6px;background-color:#ffffff0d;opacity:1}.sinovad-directory-chooser-footer[_ngcontent-%COMP%]{display:inline-block;width:100%}.sinovad-directory-chooser-footer[_ngcontent-%COMP%]   .sinovad-directory-chooser-footer-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.sinovad-directory-chooser-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px;color:#fff;background:#F18307;border:none;border-radius:5px;font-weight:700;cursor:pointer}.sinovad-directory-chooser-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#007bff}.sinovad-directory-chooser-path-content[_ngcontent-%COMP%]{display:inline-block;padding:10px 0;width:100%;height:50px}.sinovad-directory-chooser-path-content[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{outline:none;border-radius:5px;width:100%;padding:6px 10px}"]}),h})();const su=["ignismyModal"];function qu(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"button",2),e.NdJ("click",function(){return e.CHM(t).$implicit.dismiss()}),e.qZA(),e.qZA(),e.TgZ(2,"div",3),e.TgZ(3,"div",4),e._UZ(4,"img",5),e.TgZ(5,"p"),e._uU(6,"Se guardaron los cambios satisfactoriamente"),e.qZA(),e.qZA(),e.qZA()}}let ml=(()=>{class h extends Ie.X{constructor(t,o,u,p,C,F){super(o,p,C,F),this.modalService=t,this.restProvider=o,this.http=u,this.events=p,this.domSanitizer=C,this.sharedData=F,this.closeModal=new e.vpe}ngOnInit(){}ngAfterViewInit(){this.modalService.open(this.ignismyModal,{container:"#sinovadMainContainer",modalDialogClass:"modal-dialog modal-dialog-centered modal-dialog-scrollable",ariaLabelledBy:"modal-basic-title"}).result.then(t=>{this.closeModal.emit(!0)},t=>{this.closeModal.emit(!0)})}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(Y.FF),e.Y36(Re.C),e.Y36(S.eN),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(ke.g))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-success-message-modal"]],viewQuery:function(t,o){if(1&t&&e.Gf(su,5),2&t){let u;e.iGM(u=e.CRH())&&(o.ignismyModal=u.first)}},outputs:{closeModal:"closeModal"},features:[e.qOj],decls:2,vars:0,consts:[["ignismyModal",""],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"sinovad-success-message-content"],["src","http://goactionstations.co.uk/wp-content/uploads/2017/03/Green-Round-Tick.png","alt",""]],template:function(t,o){1&t&&e.YNc(0,qu,7,0,"ng-template",null,0,e.W1O)},styles:[".sinovad-success-message-content[_ngcontent-%COMP%]{width:100%;padding:20px;text-align:center}.sinovad-success-message-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:76px;height:auto;margin:0 auto 25px;display:block}.sinovad-success-message-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:42px;margin-bottom:25px;color:#5c5c5c}.sinovad-success-message-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px;margin-bottom:27px;color:#5c5c5c}.sinovad-success-message-content[_ngcontent-%COMP%]   h3.cupon-pop[_ngcontent-%COMP%]{font-size:25px;margin-bottom:40px;color:#222;display:inline-block;text-align:center;padding:10px 20px;border:2px dashed #222;clear:both;font-weight:400}.sinovad-success-message-content[_ngcontent-%COMP%]   h3.cupon-pop[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#03a9f4}.sinovad-success-message-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;margin:0 auto;padding:9px 20px;color:#fff;text-transform:uppercase;font-size:14px;background-color:#8bc34a;border-radius:17px}.sinovad-success-message-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px;color:#fff}#ignismyModal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{border:0px}"]}),h})();function vl(h,n){if(1&h&&(e.TgZ(0,"option",18),e._uU(1),e.qZA()),2&h){const t=e.oxw().$implicit;e.s9C("value",t.Id),e.xp6(1),e.Oqu(t.Name)}}function _l(h,n){if(1&h&&(e.TgZ(0,"option",19),e._uU(1),e.qZA()),2&h){const t=e.oxw().$implicit;e.s9C("value",t.Id),e.xp6(1),e.Oqu(t.Name)}}function Vs(h,n){if(1&h&&(e.YNc(0,vl,2,2,"option",16),e.YNc(1,_l,2,2,"option",17)),2&h){const t=n.$implicit,o=e.oxw(2);e.Q6J("ngIf",t.Id==o.currentTranscoderSettingss.VideoTransmissionTypeCatalogDetailId),e.xp6(1),e.Q6J("ngIf",t.Id!=o.currentTranscoderSettingss.VideoTransmissionTypeCatalogDetailId)}}function au(h,n){if(1&h&&(e.TgZ(0,"option",18),e._uU(1),e.qZA()),2&h){const t=e.oxw().$implicit;e.s9C("value",t.Id),e.xp6(1),e.Oqu(t.Name)}}function yl(h,n){if(1&h&&(e.TgZ(0,"option",19),e._uU(1),e.qZA()),2&h){const t=e.oxw().$implicit;e.s9C("value",t.Id),e.xp6(1),e.Oqu(t.Name)}}function Hs(h,n){if(1&h&&(e.YNc(0,au,2,2,"option",16),e.YNc(1,yl,2,2,"option",17)),2&h){const t=n.$implicit,o=e.oxw(2);e.Q6J("ngIf",t.Id==o.currentTranscoderSettingss.PresetCatalogDetailId),e.xp6(1),e.Q6J("ngIf",t.Id!=o.currentTranscoderSettingss.PresetCatalogDetailId)}}function Ju(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"input",20),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).showingDirectoryTranscodeVideos=!0}),e.qZA()}if(2&h){const t=e.oxw(2);e.Q6J("value",t.currentTranscoderSettingss.TemporaryFolder)}}function Qu(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"section",4),e.TgZ(1,"div",5),e.TgZ(2,"div",6),e.TgZ(3,"h3"),e._uU(4,"Transcodificaci\xf3n"),e.qZA(),e.qZA(),e.TgZ(5,"div",6),e.TgZ(6,"div",7),e.TgZ(7,"label",8),e._uU(8,"Metodo de Transmision:"),e.qZA(),e.TgZ(9,"select",9),e.NdJ("change",function(u){return e.CHM(t),e.oxw().onChangeVideoTransmissionType(u)}),e.YNc(10,Vs,2,2,"ng-template",10),e.qZA(),e.qZA(),e.TgZ(11,"div",7),e.TgZ(12,"label",8),e._uU(13,"Preset:"),e.qZA(),e.TgZ(14,"select",9),e.NdJ("change",function(u){return e.CHM(t),e.oxw().onChangePreset(u)}),e.YNc(15,Hs,2,2,"ng-template",10),e.qZA(),e.qZA(),e.TgZ(16,"div",7),e.TgZ(17,"label",11),e._uU(18,"Factor de Tasa Constante:"),e.qZA(),e.TgZ(19,"input",12),e.NdJ("change",function(u){e.CHM(t);const p=e.oxw();return p.currentTranscoderSettingss.ConstantRateFactor=p.getTargetValue(u.target)}),e.qZA(),e.qZA(),e.TgZ(20,"div",7),e.TgZ(21,"label",13),e._uU(22,"Directorio:"),e.qZA(),e.YNc(23,Ju,1,1,"input",14),e.qZA(),e.TgZ(24,"div",7),e.TgZ(25,"button",15),e.NdJ("click",function(){return e.CHM(t),e.oxw().saveTrancodeSettings()}),e._uU(26,"Guardar Cambios"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&h){const t=e.oxw();e.xp6(10),e.Q6J("ngForOf",t.transmissionMethodList),e.xp6(5),e.Q6J("ngForOf",t.presetList),e.xp6(4),e.Q6J("value",t.currentTranscoderSettingss.ConstantRateFactor),e.xp6(4),e.Q6J("ngIf",t.currentTranscoderSettingss)}}function Qc(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"app-directory-chooser",21),e.NdJ("outputSelectedSubdirectory",function(u){return e.CHM(t),e.oxw().onSaveDirectoryTranscodedVideos(u)})("closeChooserDirectory",function(){return e.CHM(t),e.oxw().showingDirectoryTranscodeVideos=!1}),e.qZA()}if(2&h){const t=e.oxw();e.Q6J("listMainDirectories",t.listMainDirectories)}}function Eh(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"app-success-message-modal",22),e.NdJ("closeModal",function(){return e.CHM(t),e.oxw().showSucessMessage=!1}),e.qZA()}}let lf=(()=>{class h extends Ie.X{constructor(t,o,u,p,C){super(t,u,p,C),this.restProvider=t,this.http=o,this.events=u,this.domSanitizer=p,this.sharedData=C,this.directoryMovies="",this.directoryTvSeries="",this.transmissionMethodList=[],this.presetList=[],this.showSucessMessage=!1}ngOnInit(){this.getAllMainDirectories(),this.getCatalogDetails()}getCatalogDetails(){this.restProvider.executeSinovadApiService(J.yw.GET,"/catalogs/GetAllCatalogDetailsWithPaginationByCatalogIdsAsync?catalogIds="+J.P9.TranscoderPreset+","+J.P9.VideoTransmissionType).then(o=>{let u=o.Data;this.transmissionMethodList=u.filter(p=>p.CatalogId==J.P9.VideoTransmissionType),this.presetList=u.filter(p=>p.CatalogId==J.P9.TranscoderPreset),this.getTranscoderSettingss()},o=>{console.error(o)})}getAllMainDirectories(){this.restProvider.executeSinovadStreamServerService(J.yw.GET,"/directories").then(t=>{this.listMainDirectories=JSON.parse(t)},t=>{console.error(t)})}ngAfterViewInit(){}getTranscoderSettingss(){this.restProvider.executeSinovadApiService(J.yw.GET,"/transcoderSettings/GetByMediaServerAsync/"+this.sharedData.currentMediaServerData.Id).then(t=>{if(this.currentTranscoderSettingss=t.Data,null==this.currentTranscoderSettingss){var o=new fs;o.TemporaryFolder="",o.ConstantRateFactor=18,o.VideoTransmissionTypeCatalogId=J.P9.VideoTransmissionType,o.VideoTransmissionTypeCatalogDetailId=this.transmissionMethodList[0].Id,o.PresetCatalogId=J.P9.TranscoderPreset,o.PresetCatalogDetailId=this.presetList[0].Id,o.MediaServerId=this.sharedData.currentMediaServerData.Id,this.currentTranscoderSettingss=o}},t=>{console.error(t)})}saveTrancodeSettings(){this.restProvider.executeSinovadApiService(this.currentTranscoderSettingss.Id>0?J.yw.PUT:J.yw.POST,this.currentTranscoderSettingss.Id>0?"/transcoderSettings/Update":"/transcoderSettings/Create",this.currentTranscoderSettingss).then(u=>{this.showSucessMessage=!0},u=>{console.error(u)})}onChangeVideoTransmissionType(t){this.currentTranscoderSettingss.VideoTransmissionTypeCatalogDetailId=Number(t.target.value)}onChangePreset(t){this.currentTranscoderSettingss.PresetCatalogDetailId=Number(t.target.value)}onSaveDirectoryTranscodedVideos(t){this.currentTranscoderSettingss.TemporaryFolder=t,this.showingDirectoryTranscodeVideos=!1}onResize(t){}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(Re.C),e.Y36(S.eN),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(ke.g))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-transcode-settings"]],hostBindings:function(t,o){1&t&&e.NdJ("resize",function(p){return o.onResize(p)},!1,e.Jf7)},features:[e.qOj],decls:4,vars:3,consts:[[1,"sinovad-manage-media-container"],["class","sinovad-manage-media-principal-section",4,"ngIf"],[3,"listMainDirectories","outputSelectedSubdirectory","closeChooserDirectory",4,"ngIf"],[3,"closeModal",4,"ngIf"],[1,"sinovad-manage-media-principal-section"],[1,"container"],[1,"row","mt-4"],[1,"mb-3"],["for","transmission-methods",1,"form-label"],["name","transmissionMethods","id","transmission-methods",1,"form-select",3,"change"],["ngFor","",3,"ngForOf"],["for","constantRateFactorId",1,"form-label"],["id","constantRateFactorId","type","number",1,"form-control",3,"value","change"],["for","transcode-directory",1,"form-label"],["id","transcode-directory","class","form-control","readonly","",3,"value","click",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click"],["selected","",3,"value",4,"ngIf"],[3,"value",4,"ngIf"],["selected","",3,"value"],[3,"value"],["id","transcode-directory","readonly","",1,"form-control",3,"value","click"],[3,"listMainDirectories","outputSelectedSubdirectory","closeChooserDirectory"],[3,"closeModal"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Qu,27,4,"section",1),e.qZA(),e.YNc(2,Qc,1,1,"app-directory-chooser",2),e.YNc(3,Eh,1,0,"app-success-message-modal",3)),2&t&&(e.xp6(1),e.Q6J("ngIf",o.currentTranscoderSettingss),e.xp6(1),e.Q6J("ngIf",o.showingDirectoryTranscodeVideos),e.xp6(1),e.Q6J("ngIf",o.showSucessMessage))},directives:[H.O5,H.sg,ne.YN,ne.Kr,js,ml],styles:[".sinovad-manage-media-container[_ngcontent-%COMP%]{display:block}.sinovad-manage-media-section[_ngcontent-%COMP%]{display:block;padding:10px}label[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{color:#fff}.sinovad-transcode-subsection[_ngcontent-%COMP%]{display:block;padding:10px}.sinovad-transcode-subsection-buttons[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:left;padding:10px}.sinovad-buttons-container[_ngcontent-%COMP%]{display:flex;align-items:center}.sinovad-manage-media-principal-section[_ngcontent-%COMP%]{display:block;border-bottom:1px solid #dedede;margin-left:10px;margin-right:10px}"]}),h})();class Th{}class uf{constructor(){this.IsButton=!0}}const cf=function(h,n){return{active:h,disabled:n}};function df(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"li",1),e.NdJ("click",function(){const p=e.CHM(t).$implicit;return e.oxw().onSelectPage(p.Text)}),e.TgZ(1,"button",4),e._uU(2),e.qZA(),e.qZA()}if(2&h){const t=n.$implicit,o=e.oxw();e.Q6J("ngClass",e.WLB(2,cf,t.IsButton&&t.Text==o.responsePagination.PageNumber.toString(),!t.IsButton)),e.xp6(2),e.Oqu(t.Text)}}const ff=function(h){return{disabled:h}};let Xc=(()=>{class h extends Ie.X{constructor(t,o,u,p,C){super(t,u,p,C),this.restProvider=t,this.http=o,this.events=u,this.domSanitizer=p,this.sharedData=C,this.selectPage=new e.vpe}ngOnInit(){this.updatePagination()}updatePagination(){var t=[],o=this.responsePagination.PageNumber,u=this.responsePagination.TotalPages;if(u<=5)for(var p=1;p<=u;p++)(C=new uf).Text=p.toString(),t.push(C);else{o>2&&(t.push({Text:"1",IsButton:!0}),o>3&&t.push({Text:"...",IsButton:!1}));var F=o>1?o-1:o,$=F+5>u?u:F+5;for(p=F;p<=$;p++){var C;(C=new uf).Text=p.toString(),t.push(C)}$<u&&($+1<u&&t.push({Text:"...",IsButton:!1}),t.push({Text:this.responsePagination.TotalPages.toString(),IsButton:!0}))}this.listPages=t}ngOnChanges(){this.updatePagination()}ngAfterViewInit(){}onSelectPreviousPage(){this.selectPage.emit((this.responsePagination.PageNumber-1).toString())}onSelectPage(t){this.selectPage.emit(t)}onSelectNextPage(){this.selectPage.emit((this.responsePagination.PageNumber+1).toString())}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(Re.C),e.Y36(S.eN),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(ke.g))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-pagination"]],inputs:{responsePagination:"responsePagination"},outputs:{selectPage:"selectPage"},features:[e.qOj,e.TTD],decls:8,vars:7,consts:[[1,"pagination","justify-content-center","text-truncate"],[1,"page-item",3,"ngClass","click"],["tabindex","-1",1,"page-link"],["ngFor","",3,"ngForOf"],[1,"page-link"]],template:function(t,o){1&t&&(e.TgZ(0,"ul",0),e.TgZ(1,"li",1),e.NdJ("click",function(){return o.onSelectPreviousPage()}),e.TgZ(2,"button",2),e._uU(3,"Previous"),e.qZA(),e.qZA(),e.YNc(4,df,3,5,"ng-template",3),e.TgZ(5,"li",1),e.NdJ("click",function(){return o.onSelectNextPage()}),e.TgZ(6,"button",4),e._uU(7,"Next"),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngClass",e.VKq(3,ff,!o.responsePagination.HasPreviousPage)),e.xp6(3),e.Q6J("ngForOf",o.listPages),e.xp6(1),e.Q6J("ngClass",e.VKq(5,ff,!o.responsePagination.HasNextPage)))},directives:[H.mk,H.sg],styles:[".disabled[_ngcontent-%COMP%]{pointer-events:none}"]}),h})();const wa=["modalTarget"];function Jo(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"div",10),e.TgZ(1,"label",11),e._uU(2),e.qZA(),e.TgZ(3,"img",12),e.NdJ("error",function(){const p=e.CHM(t).$implicit,C=e.MAs(5);return e.oxw(3).onInitializeGenrePopUp(p,C)}),e.qZA(),e._UZ(4,"input",13,14),e.qZA()}if(2&h){const t=n.$implicit,o=n.index;e.xp6(1),e.MGl("for","genre_",o,""),e.xp6(1),e.Oqu(t.Name),e.xp6(2),e.MGl("id","genre_",o,"")}}function lu(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"div",2),e.TgZ(1,"h5",3),e._uU(2),e.qZA(),e.TgZ(3,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.dismiss()}),e.qZA(),e.qZA(),e.TgZ(4,"div",5),e.YNc(5,Jo,6,3,"ng-template",6),e.qZA(),e.TgZ(6,"div",7),e.TgZ(7,"button",8),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.dismiss()}),e._uU(8,"Close"),e.qZA(),e.TgZ(9,"button",9),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.close()}),e._uU(10,"Guardar"),e.qZA(),e.qZA()}if(2&h){const t=e.oxw(2);e.xp6(2),e.Oqu("G\xe9neros"),e.xp6(3),e.Q6J("ngForOf",t.listAllGenresPopUp)}}function ed(h,n){if(1&h&&e.YNc(0,lu,11,2,"ng-template",1),2&h){const t=e.oxw();e.Q6J("ngIf",null!=t.tvProgram)}}let uu=(()=>{class h extends Ie.X{constructor(t,o,u,p,C,F){super(o,p,C,F),this.modalService=t,this.restProvider=o,this.http=u,this.events=p,this.domSanitizer=C,this.sharedData=F,this.close=new e.vpe,this.closeWithChanges=new e.vpe}ngAfterViewInit(){this.modalService.open(this.modalTarget,{container:"#sinovadMainContainer",modalDialogClass:"modal-dialog modal-dialog-centered modal-dialog-scrollable",scrollable:!0,ariaLabelledBy:"exampleModalCenteredScrollableTitle"}).result.then(t=>{this.selectItemGenres()},t=>{this.close.emit(!0)})}onInitializeGenrePopUp(t,o){t.Checkbox=o,this.tvProgram.ListItemGenres&&-1!=this.tvProgram.ListItemGenres.findIndex(p=>p.GenreId==t.Id)&&(t.Checkbox.checked=!0)}selectItemGenres(){let t=this.listAllGenresPopUp.filter(u=>u.Checkbox.checked),o=[];t.forEach(u=>{o.push({GenreName:u.Name,GenreId:u.Id})}),this.closeWithChanges.emit(o)}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(Y.FF),e.Y36(Re.C),e.Y36(S.eN),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(ke.g))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-item-genres"]],viewQuery:function(t,o){if(1&t&&e.Gf(wa,5),2&t){let u;e.iGM(u=e.CRH())&&(o.modalTarget=u.first)}},inputs:{tvProgram:"tvProgram",listAllGenresPopUp:"listAllGenresPopUp"},outputs:{close:"close",closeWithChanges:"closeWithChanges"},features:[e.qOj],decls:3,vars:0,consts:[["modalTarget",""],[3,"ngIf"],[1,"modal-header"],["id","exampleModalCenteredScrollableTitle",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["ngFor","",3,"ngForOf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"mb-3"],[1,"form-label",3,"for"],["src","",2,"display","none",3,"error"],["type","checkbox",1,"ms-2",3,"id"],["checkbox",""]],template:function(t,o){1&t&&(e.YNc(0,ed,1,1,"ng-template",null,0,e.W1O),e._uU(2," <\n"))},directives:[H.O5,H.sg],styles:[".disabled[_ngcontent-%COMP%]{pointer-events:none}"]}),h})();const cu=["modalTarget"];function Xu(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"div",8),e.TgZ(1,"label",22),e._uU(2,"T\xedtulo"),e.qZA(),e.TgZ(3,"textarea",23),e.NdJ("ngModelChange",function(u){return e.CHM(t),e.oxw(3).tvProgram.Title=u}),e.qZA(),e.qZA()}if(2&h){const t=e.oxw(3);e.xp6(3),e.Q6J("ngModel",t.tvProgram.Title)}}function du(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"div",8),e.TgZ(1,"label",24),e._uU(2,"Nombre"),e.qZA(),e.TgZ(3,"textarea",25),e.NdJ("ngModelChange",function(u){return e.CHM(t),e.oxw(3).tvProgram.Name=u}),e.qZA(),e.qZA()}if(2&h){const t=e.oxw(3);e.xp6(3),e.Q6J("ngModel",t.tvProgram.Name)}}function td(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"div",8),e.TgZ(1,"label",26),e._uU(2,"Fecha Lanzamiento"),e.qZA(),e.TgZ(3,"input",27),e.NdJ("change",function(u){e.CHM(t);const p=e.oxw(3);return p.tvProgram.ReleaseDate=p.getTargetDateValue(u.target)}),e.qZA(),e.qZA()}if(2&h){const t=e.oxw(3);e.xp6(3),e.Q6J("valueAsDate",t.tvProgram.ReleaseDate)}}function Ra(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"div",8),e.TgZ(1,"label",28),e._uU(2,"Primera Fecha de Emision"),e.qZA(),e.TgZ(3,"input",29),e.NdJ("change",function(u){e.CHM(t);const p=e.oxw(3);return p.tvProgram.FirstAirDate=p.getTargetDateValue(u.target)}),e.qZA(),e.qZA()}if(2&h){const t=e.oxw(3);e.xp6(3),e.Q6J("valueAsDate",t.tvProgram.FirstAirDate)}}function bh(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"div",8),e.TgZ(1,"label",30),e._uU(2,"\xdaltima Fecha de Emision"),e.qZA(),e.TgZ(3,"input",31),e.NdJ("change",function(u){e.CHM(t);const p=e.oxw(3);return p.tvProgram.LastAirDate=p.getTargetDateValue(u.target)}),e.qZA(),e.qZA()}if(2&h){const t=e.oxw(3);e.xp6(3),e.Q6J("valueAsDate",t.tvProgram.LastAirDate)}}function Cg(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"div",3),e.TgZ(1,"h5",4),e._uU(2),e.qZA(),e.TgZ(3,"button",5),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.dismiss()}),e.qZA(),e.qZA(),e.TgZ(4,"div",6),e.YNc(5,Xu,4,1,"div",7),e.YNc(6,du,4,1,"div",7),e.YNc(7,td,4,1,"div",7),e.YNc(8,Ra,4,1,"div",7),e.YNc(9,bh,4,1,"div",7),e.TgZ(10,"div",8),e.TgZ(11,"label",9),e._uU(12,"Directores"),e.qZA(),e.TgZ(13,"textarea",10),e.NdJ("ngModelChange",function(u){return e.CHM(t),e.oxw(2).tvProgram.Directors=u}),e.qZA(),e.qZA(),e.TgZ(14,"div",8),e.TgZ(15,"label",11),e._uU(16,"Actores"),e.qZA(),e.TgZ(17,"textarea",12),e.NdJ("ngModelChange",function(u){return e.CHM(t),e.oxw(2).tvProgram.Actors=u}),e.qZA(),e.qZA(),e.TgZ(18,"div",8),e.TgZ(19,"label",13),e._uU(20,"Resumen"),e.qZA(),e.TgZ(21,"textarea",14),e.NdJ("ngModelChange",function(u){return e.CHM(t),e.oxw(2).tvProgram.Overview=u}),e.qZA(),e.qZA(),e.TgZ(22,"div",8),e.TgZ(23,"label",15),e._uU(24,"G\xe9neros"),e.qZA(),e.TgZ(25,"textarea",16),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).showListGenresPopUp()}),e.qZA(),e.qZA(),e.TgZ(26,"div",8),e.TgZ(27,"label",17),e._uU(28,"Im\xe1gen"),e.qZA(),e.TgZ(29,"textarea",18),e.NdJ("ngModelChange",function(u){return e.CHM(t),e.oxw(2).tvProgram.PosterPath=u}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(30,"div",19),e.TgZ(31,"button",20),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.dismiss()}),e._uU(32,"Close"),e.qZA(),e.TgZ(33,"button",21),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.close()}),e._uU(34,"Guardar"),e.qZA(),e.qZA()}if(2&h){const t=e.oxw(2);e.xp6(2),e.Oqu(t.tvProgram.Id>0?"Editar":"Nuevo"),e.xp6(3),e.Q6J("ngIf",t.isMovie()),e.xp6(1),e.Q6J("ngIf",t.isTvSerie()),e.xp6(1),e.Q6J("ngIf",t.isMovie()),e.xp6(1),e.Q6J("ngIf",t.isTvSerie()),e.xp6(1),e.Q6J("ngIf",t.isTvSerie()),e.xp6(4),e.Q6J("ngModel",t.tvProgram.Directors),e.xp6(4),e.Q6J("ngModel",t.tvProgram.Actors),e.xp6(4),e.Q6J("ngModel",t.tvProgram.Overview),e.xp6(4),e.Q6J("value",t.getSelectedGenres()),e.xp6(4),e.Q6J("ngModel",t.tvProgram.PosterPath)}}function hf(h,n){if(1&h&&e.YNc(0,Cg,35,11,"ng-template",2),2&h){const t=e.oxw();e.Q6J("ngIf",null!=t.tvProgram)}}function Sg(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"app-item-genres",32),e.NdJ("close",function(){return e.CHM(t),e.oxw().showGenresPopUp=!1})("closeWithChanges",function(u){return e.CHM(t),e.oxw().onCloseGenresPopUp(u)}),e.qZA()}if(2&h){const t=e.oxw();e.Q6J("tvProgram",t.tvProgram)("listAllGenresPopUp",t.listAllGenresPopUp)}}let Ch=(()=>{class h extends Ie.X{constructor(t,o,u,p,C,F){super(o,p,C,F),this.modalService=t,this.restProvider=o,this.http=u,this.events=p,this.domSanitizer=C,this.sharedData=F,this.closeForm=new e.vpe,this.closeFormWithChanges=new e.vpe,this.showChooserDirectory=!1,this.showGenresPopUp=!1}isMovie(){return this.currentMediaTypeID==J.DD.Movie}isTvSerie(){return this.currentMediaTypeID==J.DD.TvSerie}getSelectedGenres(){if(this.tvProgram.ListItemGenres&&this.tvProgram.ListItemGenres.length>0){var t=this.tvProgram.ListItemGenres.map(o=>o.GenreName);return t.join(", ")}return""}ngOnInit(){this.getGenres()}ngAfterViewInit(){this.modalService.open(this.modalTarget,{container:"#sinovadMainContainer",modalDialogClass:"modal-dialog modal-dialog-centered modal-dialog-scrollable",scrollable:!0,ariaLabelledBy:"exampleModalCenteredScrollableTitle"}).result.then(t=>{this.saveItem()},t=>{this.closeForm.emit(!0)})}getGenres(){this.restProvider.executeSinovadApiService(J.yw.GET,"/genres/GetAllAsync").then(t=>{this.listAllGenresPopUp=t.Data},t=>{console.error(t)})}saveItem(){this.currentMediaTypeID==J.DD.Movie&&this.saveMovie(),this.currentMediaTypeID==J.DD.TvSerie&&this.saveTvSerie()}saveMovie(){this.restProvider.executeSinovadApiService(this.tvProgram.Id>0?J.yw.PUT:J.yw.POST,this.tvProgram.Id>0?"/movies/Update":"/movies/Create",this.tvProgram).then(p=>{this.closeFormWithChanges.emit(!0)},p=>{console.error(p)})}saveTvSerie(){this.restProvider.executeSinovadApiService(this.tvProgram.Id>0?J.yw.PUT:J.yw.POST,this.tvProgram.Id>0?"/tvseries/Update":"/tvseries/Create",this.tvProgram).then(p=>{this.closeFormWithChanges.emit(!0)},p=>{console.error(p)})}showListGenresPopUp(){this.showGenresPopUp=!0}onCloseGenresPopUp(t){this.tvProgram.ListItemGenres=t,this.showGenresPopUp=!1}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(Y.FF),e.Y36(Re.C),e.Y36(S.eN),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(ke.g))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-item-form"]],viewQuery:function(t,o){if(1&t&&e.Gf(cu,5),2&t){let u;e.iGM(u=e.CRH())&&(o.modalTarget=u.first)}},inputs:{tvProgram:"tvProgram",currentMediaTypeID:"currentMediaTypeID"},outputs:{closeForm:"closeForm",closeFormWithChanges:"closeFormWithChanges"},features:[e.qOj],decls:3,vars:1,consts:[["modalTarget",""],[3,"tvProgram","listAllGenresPopUp","close","closeWithChanges",4,"ngIf"],[3,"ngIf"],[1,"modal-header"],["id","exampleModalCenteredScrollableTitle",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["class","mb-3",4,"ngIf"],[1,"mb-3"],["for","directors",1,"form-label"],["id","directors",1,"form-control",3,"ngModel","ngModelChange"],["for","actors",1,"form-label"],["id","actors",1,"form-control",3,"ngModel","ngModelChange"],["for","summary",1,"form-label"],["id","summary",1,"form-control",3,"ngModel","ngModelChange"],["for","genres",1,"form-label"],["id","genres","readonly","",1,"form-control",3,"value","click"],["for","posterPath",1,"form-label"],["id","posterPath",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["for","title",1,"form-label"],["id","title",1,"form-control",3,"ngModel","ngModelChange"],["for","name",1,"form-label"],["id","name",1,"form-control",3,"ngModel","ngModelChange"],["for","releaseDate",1,"form-label"],["id","releaseDate","type","date",1,"form-control",3,"valueAsDate","change"],["for","firstAirDate",1,"form-label"],["id","firstAirDate","type","date",1,"form-control",3,"valueAsDate","change"],["for","lastAirDate",1,"form-label"],["id","lastAirDate","type","date",1,"form-control",3,"valueAsDate","change"],[3,"tvProgram","listAllGenresPopUp","close","closeWithChanges"]],template:function(t,o){1&t&&(e.YNc(0,hf,1,1,"ng-template",null,0,e.W1O),e.YNc(2,Sg,1,2,"app-item-genres",1)),2&t&&(e.xp6(2),e.Q6J("ngIf",o.showGenresPopUp))},directives:[H.O5,ne.Fj,ne.JJ,ne.On,uu],styles:[".disabled[_ngcontent-%COMP%]{pointer-events:none}"]}),h})();class Dg{}const Mg=["modalTarget"];function ec(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"div",2),e.TgZ(1,"h5",3),e._uU(2),e.qZA(),e.TgZ(3,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.dismiss()}),e.qZA(),e.qZA(),e.TgZ(4,"div",5),e.TgZ(5,"div",6),e.TgZ(6,"label",7),e._uU(7,"N\xfamero"),e.qZA(),e.TgZ(8,"input",8),e.NdJ("ngModelChange",function(u){return e.CHM(t),e.oxw(2).season.SeasonNumber=u}),e.qZA(),e.qZA(),e.TgZ(9,"div",6),e.TgZ(10,"label",9),e._uU(11,"Nombre"),e.qZA(),e.TgZ(12,"textarea",10),e.NdJ("ngModelChange",function(u){return e.CHM(t),e.oxw(2).season.Name=u}),e.qZA(),e.qZA(),e.TgZ(13,"div",6),e.TgZ(14,"label",9),e._uU(15,"Resumen"),e.qZA(),e.TgZ(16,"textarea",10),e.NdJ("ngModelChange",function(u){return e.CHM(t),e.oxw(2).season.Summary=u}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",11),e.TgZ(18,"button",12),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.dismiss()}),e._uU(19,"Close"),e.qZA(),e.TgZ(20,"button",13),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.close()}),e._uU(21,"Guardar"),e.qZA(),e.qZA()}if(2&h){const t=e.oxw(2);e.xp6(2),e.Oqu(t.season.Id>0?"Editar":"Nuevo"),e.xp6(6),e.Q6J("ngModel",t.season.SeasonNumber),e.xp6(4),e.Q6J("ngModel",t.season.Name),e.xp6(4),e.Q6J("ngModel",t.season.Summary)}}function fu(h,n){if(1&h&&e.YNc(0,ec,22,4,"ng-template",1),2&h){const t=e.oxw();e.Q6J("ngIf",null!=t.season)}}let gf=(()=>{class h extends Ie.X{constructor(t,o,u,p,C,F){super(o,p,C,F),this.modalService=t,this.restProvider=o,this.http=u,this.events=p,this.domSanitizer=C,this.sharedData=F,this.close=new e.vpe,this.closeWithChanges=new e.vpe}ngOnInit(){}ngAfterViewInit(){this.modalService.open(this.modalTarget,{container:"#sinovadMainContainer",modalDialogClass:"modal-dialog modal-dialog-centered modal-dialog-scrollable",scrollable:!0,ariaLabelledBy:"exampleModalCenteredScrollableTitle"}).result.then(t=>{this.saveItem()},t=>{this.close.emit(!0)})}saveItem(){this.restProvider.executeSinovadApiService(this.season.Id>0?J.yw.PUT:J.yw.POST,this.season.Id>0?"/seasons/Update":"/seasons/Create",this.season).then(u=>{this.closeWithChanges.emit(!0)},u=>{console.error(u)})}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(Y.FF),e.Y36(Re.C),e.Y36(S.eN),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(ke.g))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-season-form"]],viewQuery:function(t,o){if(1&t&&e.Gf(Mg,5),2&t){let u;e.iGM(u=e.CRH())&&(o.modalTarget=u.first)}},inputs:{season:"season"},outputs:{close:"close",closeWithChanges:"closeWithChanges"},features:[e.qOj],decls:2,vars:0,consts:[["modalTarget",""],[3,"ngIf"],[1,"modal-header"],["id","exampleModalCenteredScrollableTitle",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mb-3"],["for","seasonNumber",1,"form-label"],["id","seasonNumber","type","number",1,"form-control",3,"ngModel","ngModelChange"],["for","name",1,"form-label"],["id","name",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,o){1&t&&e.YNc(0,fu,1,1,"ng-template",null,0,e.W1O)},directives:[H.O5,ne.wV,ne.Fj,ne.JJ,ne.On],styles:[".disabled[_ngcontent-%COMP%]{pointer-events:none}"]}),h})();class Na{}const tc=["modalTarget"];function hu(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"div",2),e.TgZ(1,"h5",3),e._uU(2),e.qZA(),e.TgZ(3,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.dismiss()}),e.qZA(),e.qZA(),e.TgZ(4,"div",5),e.TgZ(5,"div",6),e.TgZ(6,"label",7),e._uU(7,"T\xedtulo"),e.qZA(),e.TgZ(8,"textarea",8),e.NdJ("ngModelChange",function(u){return e.CHM(t),e.oxw(2).episode.Title=u}),e.qZA(),e.qZA(),e.TgZ(9,"div",6),e.TgZ(10,"label",9),e._uU(11,"N\xfamero"),e.qZA(),e.TgZ(12,"input",10),e.NdJ("ngModelChange",function(u){return e.CHM(t),e.oxw(2).episode.EpisodeNumber=u}),e.qZA(),e.qZA(),e.TgZ(13,"div",6),e.TgZ(14,"label",7),e._uU(15,"Resumen"),e.qZA(),e.TgZ(16,"textarea",8),e.NdJ("ngModelChange",function(u){return e.CHM(t),e.oxw(2).episode.Summary=u}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",11),e.TgZ(18,"button",12),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.dismiss()}),e._uU(19,"Close"),e.qZA(),e.TgZ(20,"button",13),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.close()}),e._uU(21,"Guardar"),e.qZA(),e.qZA()}if(2&h){const t=e.oxw(2);e.xp6(2),e.Oqu(t.episode.Id>0?"Editar":"Nuevo"),e.xp6(6),e.Q6J("ngModel",t.episode.Title),e.xp6(4),e.Q6J("ngModel",t.episode.EpisodeNumber),e.xp6(4),e.Q6J("ngModel",t.episode.Summary)}}function Pg(h,n){if(1&h&&e.YNc(0,hu,22,4,"ng-template",1),2&h){const t=e.oxw();e.Q6J("ngIf",null!=t.episode)}}let Sh=(()=>{class h extends Ie.X{constructor(t,o,u,p,C,F){super(o,p,C,F),this.modalService=t,this.restProvider=o,this.http=u,this.events=p,this.domSanitizer=C,this.sharedData=F,this.close=new e.vpe,this.closeWithChanges=new e.vpe}ngOnInit(){}ngAfterViewInit(){this.modalService.open(this.modalTarget,{container:"#sinovadMainContainer",modalDialogClass:"modal-dialog modal-dialog-centered modal-dialog-scrollable",scrollable:!0,ariaLabelledBy:"exampleModalCenteredScrollableTitle"}).result.then(t=>{this.saveItem()},t=>{this.close.emit(!0)})}saveItem(){this.restProvider.executeSinovadApiService(this.episode.Id>0?J.yw.PUT:J.yw.POST,this.episode.Id>0?"/episodes/Update":"/episodes/Create",this.episode).then(u=>{this.closeWithChanges.emit(!0)},u=>{console.error(u)})}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(Y.FF),e.Y36(Re.C),e.Y36(S.eN),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(ke.g))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-episode-form"]],viewQuery:function(t,o){if(1&t&&e.Gf(tc,5),2&t){let u;e.iGM(u=e.CRH())&&(o.modalTarget=u.first)}},inputs:{episode:"episode"},outputs:{close:"close",closeWithChanges:"closeWithChanges"},features:[e.qOj],decls:2,vars:0,consts:[["modalTarget",""],[3,"ngIf"],[1,"modal-header"],["id","exampleModalCenteredScrollableTitle",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mb-3"],["for","name",1,"form-label"],["id","name",1,"form-control",3,"ngModel","ngModelChange"],["for","seasonNumber",1,"form-label"],["id","seasonNumber","type","number",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,o){1&t&&e.YNc(0,Pg,1,1,"ng-template",null,0,e.W1O)},directives:[H.O5,ne.Fj,ne.JJ,ne.On,ne.wV],styles:[".disabled[_ngcontent-%COMP%]{pointer-events:none}"]}),h})();const Dh=["modalTarget"];function pf(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"h5",2),e._uU(2,"Rango de Episodios"),e.qZA(),e.TgZ(3,"button",3),e.NdJ("click",function(){return e.CHM(t).$implicit.dismiss()}),e.qZA(),e.qZA(),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"label",6),e._uU(7,"Desde"),e.qZA(),e.TgZ(8,"input",7),e.NdJ("ngModelChange",function(u){return e.CHM(t),e.oxw().initialEpisodeNumber=u}),e.qZA(),e.qZA(),e.TgZ(9,"div",5),e.TgZ(10,"label",6),e._uU(11,"Hasta"),e.qZA(),e.TgZ(12,"input",7),e.NdJ("ngModelChange",function(u){return e.CHM(t),e.oxw().lastEpisodeNumber=u}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",8),e.TgZ(14,"button",9),e.NdJ("click",function(){return e.CHM(t).$implicit.dismiss()}),e._uU(15,"Close"),e.qZA(),e.TgZ(16,"button",10),e.NdJ("click",function(){return e.CHM(t).$implicit.close()}),e._uU(17,"Guardar"),e.qZA(),e.qZA()}if(2&h){const t=e.oxw();e.xp6(8),e.Q6J("ngModel",t.initialEpisodeNumber),e.xp6(4),e.Q6J("ngModel",t.lastEpisodeNumber)}}let mf=(()=>{class h extends Ie.X{constructor(t,o,u,p,C,F){super(o,p,C,F),this.modalService=t,this.restProvider=o,this.http=u,this.events=p,this.domSanitizer=C,this.sharedData=F,this.close=new e.vpe,this.closeWithChanges=new e.vpe}ngOnInit(){}ngAfterViewInit(){this.modalService.open(this.modalTarget,{container:"#sinovadMainContainer",modalDialogClass:"modal-dialog modal-dialog-centered modal-dialog-scrollable",scrollable:!0,ariaLabelledBy:"exampleModalCenteredScrollableTitle"}).result.then(t=>{this.save()},t=>{this.close.emit(!0)})}save(){let t=[];for(let u=Number(this.initialEpisodeNumber);u<=Number(this.lastEpisodeNumber);u++){var o=new Na;o.EpisodeNumber=u,o.SeasonId=this.parent.Id,o.Title="Episodio "+u,t.push(o)}this.restProvider.executeSinovadApiService(J.yw.POST,"/episodes/CreateList",t).then(u=>{this.closeWithChanges.emit(!0)},u=>{console.error(u)})}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(Y.FF),e.Y36(Re.C),e.Y36(S.eN),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(ke.g))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-episode-range-modal"]],viewQuery:function(t,o){if(1&t&&e.Gf(Dh,5),2&t){let u;e.iGM(u=e.CRH())&&(o.modalTarget=u.first)}},inputs:{parent:"parent"},outputs:{close:"close",closeWithChanges:"closeWithChanges"},features:[e.qOj],decls:2,vars:0,consts:[["modalTarget",""],[1,"modal-header"],["id","exampleModalCenteredScrollableTitle",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mb-3"],["for","seasonNumber",1,"form-label"],["id","seasonNumber","type","number",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,o){1&t&&e.YNc(0,pf,18,2,"ng-template",null,0,e.W1O)},directives:[ne.wV,ne.Fj,ne.JJ,ne.On],styles:[".disabled[_ngcontent-%COMP%]{pointer-events:none}"]}),h})();const Mh=function(h){return{selected:h}};function nd(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"tr",24),e.TgZ(1,"th",25),e.NdJ("click",function(u){const C=e.CHM(t).$implicit;return e.oxw().onClickItem(u,C)})("contextmenu",function(u){const C=e.CHM(t).$implicit;return e.oxw().onContextMenuItem(u,C)}),e._uU(2),e.qZA(),e.TgZ(3,"td",26),e.NdJ("click",function(u){const C=e.CHM(t).$implicit;return e.oxw().onClickItem(u,C)})("contextmenu",function(u){const C=e.CHM(t).$implicit;return e.oxw().onContextMenuItem(u,C)}),e._uU(4),e.qZA(),e.TgZ(5,"td",26),e.NdJ("click",function(u){const C=e.CHM(t).$implicit;return e.oxw().onClickItem(u,C)})("contextmenu",function(u){const C=e.CHM(t).$implicit;return e.oxw().onContextMenuItem(u,C)}),e._uU(6),e.qZA(),e.TgZ(7,"td"),e.TgZ(8,"button",27),e.NdJ("click",function(){const p=e.CHM(t).$implicit;return e.oxw().editItem(p)}),e._UZ(9,"i",28),e.qZA(),e.qZA(),e.qZA()}if(2&h){const t=n.$implicit,o=n.index,u=e.oxw();e.Q6J("ngClass",e.VKq(4,Mh,-1!=u.listSelectedItems.indexOf(t))),e.xp6(2),e.Oqu(u.getNewIndex(o,u.response.PageNumber,u.pageSize)),e.xp6(2),e.Oqu(t.Title),e.xp6(2),e.Oqu(t.Summary)}}function Ag(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"app-pagination",29),e.NdJ("selectPage",function(u){return e.CHM(t),e.oxw().onSelectPage(u)}),e.qZA()}if(2&h){const t=e.oxw();e.Q6J("responsePagination",t.response)}}function Ph(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"app-episode-form",30),e.NdJ("close",function(){return e.CHM(t),e.oxw().showPopUpForm=!1})("closeWithChanges",function(){return e.CHM(t),e.oxw().onSaveEpisode()}),e.qZA()}if(2&h){const t=e.oxw();e.Q6J("episode",t.episode)}}function Cm(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"app-episode-range-modal",31),e.NdJ("close",function(){return e.CHM(t),e.oxw().showEpisodeRangeModal=!1})("closeWithChanges",function(){return e.CHM(t),e.oxw().onSaveEpisodeRange()}),e.qZA()}if(2&h){const t=e.oxw();e.Q6J("parent",t.parentItem)}}function Ah(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"app-confirm-message-modal",32),e.NdJ("close",function(){return e.CHM(t),e.oxw().showConfirmMessageBox=!1})("confirm",function(){return e.CHM(t),e.oxw().executeDeleteSelectedItems()}),e.qZA()}2&h&&e.Q6J("message","Estas seguro que deseas eliminar estos registros ?")}let Ih=(()=>{class h extends Ie.X{constructor(t,o,u,p,C,F){super(t,o,u,C),this.restProvider=t,this.events=o,this.domSanitizer=u,this.activeRoute=p,this.sharedData=C,this.http=F,this._window=window,this.listSelectedItems=[],this.showPopUpForm=!1,this.showChangeSeasonForm=!1,this.listSeasons=[],this.pageSize=10,this.showEpisodeRangeModal=!1,this.showConfirmMessageBox=!1}ngOnInit(){this.getAllItems()}getAllItems(){this.executeGetAllItems(1..toString(),this.pageSize.toString())}onSelectPage(t){this.executeGetAllItems(t,this.pageSize.toString())}executeGetAllItems(t,o){this.restProvider.executeSinovadApiService(J.yw.GET,"/episodes/GetAllWithPaginationBySeasonAsync/"+this.parentItem.Id+"?page="+t+"&take="+o).then(C=>{let F=C.Data;this.response=C,this.listItems=F},C=>{console.error(C)})}onFileSelected(t){if(t.target.files&&t.target.files.length>0){let o=t.target.files[0],u=this;const p=new FileReader;p.onload=C=>{u.registerMultipleEpisodesFromTxtResult(C.target.result)},p.readAsText(o)}}registerMultipleEpisodesFromTxtResult(t){let o=t.split("\n");if(o&&o.length>0){let p=[];for(let C=0;C<o.length;C++){let F=o[C];var u=new Na;u.EpisodeNumber=C+1,u.SeasonId=this.parentItem.Id,u.Title=F,p.push(u)}this.restProvider.executeSinovadApiService(J.yw.POST,"/episodes/CreateList",p).then(C=>{this.getAllItems()},C=>{console.error(C)})}}showEpisodeRangeForm(){this.showEpisodeRangeModal=!0}onChangeSelectAllCheckBox(t){if(t.target.checked)for(let o=0;o<this.listItems.length;o++)this.listSelectedItems.push(this.listItems[o]);else this.listSelectedItems=[]}executeDeleteSelectedItems(){this.showConfirmMessageBox=!1;let t=[];for(let u=0;u<this.listSelectedItems.length;u++)t.push(this.listSelectedItems[u].Id);var o=t.join(",");this.restProvider.executeSinovadApiService(J.yw.DELETE,"/episodes/DeleteList/"+o).then(u=>{this.listSelectedItems=[],this.getAllItems()},u=>{console.error(u)})}deleteSelectedItems(){this.showConfirmMessageBox=!0}onContextMenuItem(t,o){t.preventDefault(),t.stopPropagation(),this.onClickItem(t,o);let u=[];u.push({text:"Eliminar",key:"delete",icon:"remove.png"}),this.sharedData.contextMenuData={parentPage:this,left:t.clientX,top:t.clientY,listOptions:u}}onClickContextMenuOption(t,o){"changeSeason"==o.key&&(this.showChangeSeasonForm=!0),"delete"==o.key&&this.deleteSelectedItems(),this.sharedData.contextMenuData=void 0}onChangeSeason(t){this.selectedSeasonID=parseInt(t.target.value)}saveChangeSeason(){}onClickItem(t,o){if(t.ctrlKey||t.shiftKey)if(t.ctrlKey)-1!=this.listSelectedItems.indexOf(o)?this.listSelectedItems.splice(this.listSelectedItems.indexOf(o),1):this.listSelectedItems.push(o);else{let u=0;this.listSelectedItems.length>0&&this.lastSelectedItem&&(u=this.listItems.indexOf(this.lastSelectedItem));let p=this.listItems.indexOf(o);if(p>=u){let C=this.listItems.filter(F=>this.listItems.indexOf(F)<=p&&this.listItems.indexOf(F)>=u&&-1==this.listSelectedItems.indexOf(F));this.listSelectedItems=this.listSelectedItems.concat(C)}else{let C=this.listItems.filter(F=>this.listItems.indexOf(F)>=p&&this.listItems.indexOf(F)<=u&&-1==this.listSelectedItems.indexOf(F));this.listSelectedItems=this.listSelectedItems.concat(C)}}else"contextmenu"==t.type?-1==this.listSelectedItems.indexOf(o)&&(this.listSelectedItems=[],this.listSelectedItems.push(o)):(this.listSelectedItems=[],this.listSelectedItems.push(o));this.lastSelectedItem=o}showItemForm(){let t=1;this.listItems&&this.listItems.length>0&&(t=this.listItems[this.listItems.length-1].EpisodeNumber+1);var o=new Na;o.EpisodeNumber=t,o.SeasonId=this.parentItem.Id,this.episode=o,this.showPopUpForm=!0}editItem(t){this.episode=JSON.parse(JSON.stringify(t)),this.showPopUpForm=!0}onSaveEpisode(){this.showPopUpForm=!1,this.getAllItems()}onSaveEpisodeRange(){this.showEpisodeRangeModal=!1,this.getAllItems()}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(Re.C),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(R.gz),e.Y36(ke.g),e.Y36(S.eN))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-episode-list"]],inputs:{parentItem:"parentItem"},features:[e.qOj],decls:44,vars:14,consts:[[1,"container"],[1,"row","mt-4"],[1,"col-6","d-flex","align-itsinovad-center"],[1,"form-check","mb-0"],["id","flexCheckDefault","type","checkbox",1,"form-check-input",3,"change"],["checkbox",""],["for","flexCheckDefault",1,"form-check-label"],[1,"col-6","text-end"],[1,"btn","me-2",3,"click"],["type","file","accept",".txt",2,"display","none",3,"change"],["input",""],["title","Carga Masiva",2,"height","40px",3,"src"],["type","button",1,"btn","me-2",3,"click"],["title","Agregar por Rango de N\xfameros",2,"height","40px",3,"src"],["type","button",1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"fa-solid","fa-circle-plus","me-2"],[1,"col-12"],[1,"table","table-bordered"],["scope","col"],["ngFor","",3,"ngForOf"],[3,"responsePagination","selectPage",4,"ngIf"],[3,"episode","close","closeWithChanges",4,"ngIf"],[3,"parent","close","closeWithChanges",4,"ngIf"],[3,"message","close","confirm",4,"ngIf"],[3,"ngClass"],["role","button","scope","row",3,"click","contextmenu"],["role","button",3,"click","contextmenu"],["type","button","data-toggle","tooltip","data-placement","bottom","title","Editar",1,"btn","btn-success","btn-sm","ms-20",3,"click"],[1,"fa-solid","fa-pen-to-square"],[3,"responsePagination","selectPage"],[3,"episode","close","closeWithChanges"],[3,"parent","close","closeWithChanges"],[3,"message","close","confirm"]],template:function(t,o){if(1&t){const u=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h3"),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"div",1),e.TgZ(5,"div",2),e.TgZ(6,"div",3),e.TgZ(7,"input",4,5),e.NdJ("change",function(C){return o.onChangeSelectAllCheckBox(C)}),e.qZA(),e.TgZ(9,"label",6),e._uU(10," Todos "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",7),e.TgZ(12,"button",8),e.NdJ("click",function(){return e.CHM(u),e.MAs(14).click()}),e.TgZ(13,"input",9,10),e.NdJ("change",function(C){return o.onFileSelected(C)}),e.qZA(),e._UZ(15,"img",11),e.ALo(16,"formatDataPipe"),e.qZA(),e.TgZ(17,"button",12),e.NdJ("click",function(){return o.showEpisodeRangeForm()}),e._UZ(18,"img",13),e.ALo(19,"formatDataPipe"),e.qZA(),e.TgZ(20,"button",14),e.NdJ("click",function(){return o.showItemForm()}),e._UZ(21,"i",15),e._uU(22,"Agregar"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"div",1),e.TgZ(24,"div",16),e.TgZ(25,"table",17),e.TgZ(26,"thead"),e.TgZ(27,"tr"),e.TgZ(28,"th",18),e._uU(29,"N\xb0"),e.qZA(),e.TgZ(30,"th",18),e._uU(31,"Titulo"),e.qZA(),e.TgZ(32,"th",18),e._uU(33,"Resumen"),e.qZA(),e.TgZ(34,"th",18),e._uU(35,"Acciones"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(36,"tbody"),e.YNc(37,nd,10,6,"ng-template",19),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"div",1),e.TgZ(39,"div",16),e.YNc(40,Ag,1,1,"app-pagination",20),e.qZA(),e.qZA(),e.qZA(),e.YNc(41,Ph,1,1,"app-episode-form",21),e.YNc(42,Cm,1,1,"app-episode-range-modal",22),e.YNc(43,Ah,1,1,"app-confirm-message-modal",23)}2&t&&(e.xp6(3),e.hij("",o.parentItem.Name," :Episodios"),e.xp6(12),e.Q6J("src",e.xi3(16,8,"upload.png","GetImageURLByKey"),e.LSH),e.xp6(3),e.Q6J("src",e.xi3(19,11,"rank-number.png","GetImageURLByKey"),e.LSH),e.xp6(19),e.Q6J("ngForOf",o.listItems),e.xp6(3),e.Q6J("ngIf",o.response),e.xp6(1),e.Q6J("ngIf",o.showPopUpForm),e.xp6(1),e.Q6J("ngIf",o.showEpisodeRangeModal),e.xp6(1),e.Q6J("ngIf",o.showConfirmMessageBox))},directives:[H.sg,H.mk,H.O5,Xc,Sh,mf,nu],pipes:[X.A],styles:[".selected[_ngcontent-%COMP%], .selected[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .selected[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#F7EEAE}"]}),h})();const Ig=["modalTarget"];function Oh(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"div",2),e.TgZ(1,"h5",3),e._uU(2),e.qZA(),e.TgZ(3,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.dismiss()}),e.qZA(),e.qZA(),e.TgZ(4,"div",5),e._UZ(5,"app-episode-list",6),e.qZA(),e.TgZ(6,"div",7),e.TgZ(7,"button",8),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.dismiss()}),e._uU(8,"Close"),e.qZA(),e.qZA()}if(2&h){const t=e.oxw(2);e.xp6(2),e.hij("",t.parent.Name," :Episodios"),e.xp6(3),e.Q6J("parentItem",t.parent)}}function Og(h,n){if(1&h&&e.YNc(0,Oh,9,2,"ng-template",1),2&h){const t=e.oxw();e.Q6J("ngIf",null!=t.parent)}}let xg=(()=>{class h extends Ie.X{constructor(t,o,u,p,C,F,$,le){super(o,p,C,$),this.modalService=t,this.restProvider=o,this.ref=u,this.events=p,this.domSanitizer=C,this.activeRoute=F,this.sharedData=$,this.http=le,this.close=new e.vpe}ngOnInit(){}ngAfterViewInit(){this.modalService.open(this.modalTarget,{container:"#sinovadMainContainer",modalDialogClass:"modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable",scrollable:!0,ariaLabelledBy:"exampleModalCenteredScrollableTitle"}).result.then(t=>{},t=>{this.close.emit(!0)})}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(Y.FF),e.Y36(Re.C),e.Y36(e.sBO),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(R.gz),e.Y36(ke.g),e.Y36(S.eN))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-episode-list-modal"]],viewQuery:function(t,o){if(1&t&&e.Gf(Ig,5),2&t){let u;e.iGM(u=e.CRH())&&(o.modalTarget=u.first)}},inputs:{parent:"parent"},outputs:{close:"close"},features:[e.qOj],decls:2,vars:0,consts:[["modalTarget",""],[3,"ngIf"],[1,"modal-header"],["id","exampleModalCenteredScrollableTitle",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"parentItem"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"]],template:function(t,o){1&t&&e.YNc(0,Og,1,1,"ng-template",null,0,e.W1O)},directives:[H.O5,Ih],styles:[""]}),h})();const Qo=function(h){return{selected:h}};function wg(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"tr",18),e.TgZ(1,"th",19),e.NdJ("click",function(u){const C=e.CHM(t).$implicit;return e.oxw().onClickItem(u,C)})("contextmenu",function(u){const C=e.CHM(t).$implicit;return e.oxw().onContextMenuItem(u,C)}),e._uU(2),e.qZA(),e.TgZ(3,"td",20),e.NdJ("click",function(u){const C=e.CHM(t).$implicit;return e.oxw().onClickItem(u,C)})("contextmenu",function(u){const C=e.CHM(t).$implicit;return e.oxw().onContextMenuItem(u,C)}),e._uU(4),e.qZA(),e.TgZ(5,"td"),e.TgZ(6,"button",21),e.NdJ("click",function(){const p=e.CHM(t).$implicit;return e.oxw().editItem(p)}),e._UZ(7,"i",22),e.qZA(),e.qZA(),e.qZA()}if(2&h){const t=n.$implicit,o=n.index,u=e.oxw();e.Q6J("ngClass",e.VKq(3,Qo,-1!=u.listSelectedItems.indexOf(t))),e.xp6(2),e.Oqu(u.getNewIndex(o,u.response.PageNumber,u.pageSize)),e.xp6(2),e.Oqu(t.Name)}}function Rg(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"app-pagination",23),e.NdJ("selectPage",function(u){return e.CHM(t),e.oxw().onSelectPage(u)}),e.qZA()}if(2&h){const t=e.oxw();e.Q6J("responsePagination",t.response)}}function Sm(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"app-season-form",24),e.NdJ("close",function(){return e.CHM(t),e.oxw().showPopUpForm=!1})("closeWithChanges",function(){return e.CHM(t),e.oxw().onSaveSeason()}),e.qZA()}if(2&h){const t=e.oxw();e.Q6J("season",t.seasonData)}}function Dm(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"app-episode-list-modal",25),e.NdJ("close",function(){return e.CHM(t),e.oxw().showListEpisodesPopUp=!1}),e.qZA()}if(2&h){const t=e.oxw();e.Q6J("parent",t.lastSelectedItem)}}function xh(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"app-confirm-message-modal",26),e.NdJ("close",function(){return e.CHM(t),e.oxw().showConfirmMessageBox=!1})("confirm",function(){return e.CHM(t),e.oxw().executeDeleteSelectedItems()}),e.qZA()}2&h&&e.Q6J("message","Estas seguro que deseas eliminar estos registros ?")}let Mm=(()=>{class h extends Ie.X{constructor(t,o,u,p,C,F,$){super(t,u,p,F),this.restProvider=t,this.ref=o,this.events=u,this.domSanitizer=p,this.activeRoute=C,this.sharedData=F,this.http=$,this._window=window,this.listItems=[],this.listSelectedItems=[],this.showPopUpForm=!1,this.showListEpisodesPopUp=!1,this.pageSize=10,this.showConfirmMessageBox=!1}ngOnInit(){this.getAllItems()}executeGetAllItems(t,o){this.restProvider.executeSinovadApiService(J.yw.GET,"/seasons/GetAllWithPaginationByTvSerieAsync/"+this.parentItem.Id+"?page="+t+"&take="+o).then(C=>{this.response=C,this.listItems=C.Data},C=>{console.error(C)})}getAllItems(){this.executeGetAllItems(1..toString(),this.pageSize.toString())}onSelectPage(t){this.executeGetAllItems(t,this.pageSize.toString())}onChangeSelectAllCheckBox(t){if(t.target.checked)for(let o=0;o<this.listItems.length;o++)this.listSelectedItems.push(this.listItems[o]);else this.listSelectedItems=[]}executeDeleteSelectedItems(){this.showConfirmMessageBox=!1;let t=[];for(let u=0;u<this.listSelectedItems.length;u++)t.push(this.listSelectedItems[u].Id);var o=t.join(",");this.restProvider.executeSinovadApiService(J.yw.DELETE,"/seasons/DeleteList/"+o).then(u=>{this.listSelectedItems=[],this.getAllItems()},u=>{console.error(u)})}deleteSelectedItems(){this.showConfirmMessageBox=!0}onClickItem(t,o){if(t.ctrlKey||t.shiftKey)if(t.ctrlKey)-1!=this.listSelectedItems.indexOf(o)?this.listSelectedItems.splice(this.listSelectedItems.indexOf(o),1):this.listSelectedItems.push(o);else{let u=0;this.listSelectedItems.length>0&&this.lastSelectedItem&&(u=this.listItems.indexOf(this.lastSelectedItem));let p=this.listItems.indexOf(o);if(p>=u){let C=this.listItems.filter(F=>this.listItems.indexOf(F)<=p&&this.listItems.indexOf(F)>=u&&-1==this.listSelectedItems.indexOf(F));this.listSelectedItems=this.listSelectedItems.concat(C)}else{let C=this.listItems.filter(F=>this.listItems.indexOf(F)>=p&&this.listItems.indexOf(F)<=u&&-1==this.listSelectedItems.indexOf(F));this.listSelectedItems=this.listSelectedItems.concat(C)}}else"contextmenu"==t.type?-1==this.listSelectedItems.indexOf(o)&&(this.listSelectedItems=[],this.listSelectedItems.push(o)):(this.listSelectedItems=[],this.listSelectedItems.push(o));this.lastSelectedItem=o}onContextMenuItem(t,o){t.preventDefault(),t.stopPropagation(),this.onClickItem(t,o);let u=[];u.push({text:"Ver",key:"view",icon:"view.png"}),u.push({text:"Eliminar",key:"delete",icon:"remove.png"}),this.sharedData.contextMenuData={parentPage:this,left:t.clientX,top:t.clientY,listOptions:u}}onClickContextMenuOption(t,o){"view"==o.key&&(this.showListEpisodesPopUp=!0),"delete"==o.key&&this.deleteSelectedItems(),this.sharedData.contextMenuData=void 0}showItemForm(){this.seasonData=new Dg,this.seasonData.TvSerieId=this.parentItem.Id,this.showPopUpForm=!0}editItem(t){this.seasonData=JSON.parse(JSON.stringify(t)),this.showPopUpForm=!0}onSaveSeason(){this.showPopUpForm=!1,this.getAllItems()}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(Re.C),e.Y36(e.sBO),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(R.gz),e.Y36(ke.g),e.Y36(S.eN))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-season-list"]],inputs:{parentItem:"parentItem"},features:[e.qOj],decls:34,vars:6,consts:[[1,"container"],[1,"row","mt-4"],[1,"col-6","d-flex","align-itsinovad-center"],[1,"form-check","mb-0"],["id","flexCheckDefault","type","checkbox",1,"form-check-input",3,"change"],["checkbox",""],["for","flexCheckDefault",1,"form-check-label"],[1,"col-6","text-end"],["type","button",1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"fa-solid","fa-circle-plus","me-2"],[1,"col-12"],[1,"table","table-bordered"],["scope","col"],["ngFor","",3,"ngForOf"],[3,"responsePagination","selectPage",4,"ngIf"],[3,"season","close","closeWithChanges",4,"ngIf"],[3,"parent","close",4,"ngIf"],[3,"message","close","confirm",4,"ngIf"],[3,"ngClass"],["role","button","scope","row",3,"click","contextmenu"],["role","button",3,"click","contextmenu"],["type","button","data-toggle","tooltip","data-placement","bottom","title","Editar",1,"btn","btn-success","btn-sm","ms-20",3,"click"],[1,"fa-solid","fa-pen-to-square"],[3,"responsePagination","selectPage"],[3,"season","close","closeWithChanges"],[3,"parent","close"],[3,"message","close","confirm"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h3"),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"div",1),e.TgZ(5,"div",2),e.TgZ(6,"div",3),e.TgZ(7,"input",4,5),e.NdJ("change",function(p){return o.onChangeSelectAllCheckBox(p)}),e.qZA(),e.TgZ(9,"label",6),e._uU(10," Todos "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",7),e.TgZ(12,"button",8),e.NdJ("click",function(){return o.showItemForm()}),e._UZ(13,"i",9),e._uU(14,"Agregar"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"div",1),e.TgZ(16,"div",10),e.TgZ(17,"table",11),e.TgZ(18,"thead"),e.TgZ(19,"tr"),e.TgZ(20,"th",12),e._uU(21,"N\xb0"),e.qZA(),e.TgZ(22,"th",12),e._uU(23,"Titulo"),e.qZA(),e.TgZ(24,"th",12),e._uU(25,"Acciones"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"tbody"),e.YNc(27,wg,8,5,"ng-template",13),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"div",1),e.TgZ(29,"div",10),e.YNc(30,Rg,1,1,"app-pagination",14),e.qZA(),e.qZA(),e.qZA(),e.YNc(31,Sm,1,1,"app-season-form",15),e.YNc(32,Dm,1,1,"app-episode-list-modal",16),e.YNc(33,xh,1,1,"app-confirm-message-modal",17)),2&t&&(e.xp6(3),e.hij("",o.parentItem.Name," :Temporadas"),e.xp6(24),e.Q6J("ngForOf",o.listItems),e.xp6(3),e.Q6J("ngIf",o.response),e.xp6(1),e.Q6J("ngIf",o.showPopUpForm),e.xp6(1),e.Q6J("ngIf",o.showListEpisodesPopUp),e.xp6(1),e.Q6J("ngIf",o.showConfirmMessageBox))},directives:[H.sg,H.mk,H.O5,Xc,gf,xg,nu],styles:[".selected[_ngcontent-%COMP%], .selected[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .selected[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#F7EEAE}"]}),h})();const Ng=["modalTarget"];function vf(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"div",2),e.TgZ(1,"h5",3),e._uU(2),e.qZA(),e.TgZ(3,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.dismiss()}),e.qZA(),e.qZA(),e.TgZ(4,"div",5),e._UZ(5,"app-season-list",6),e.qZA(),e.TgZ(6,"div",7),e.TgZ(7,"button",8),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.dismiss()}),e._uU(8,"Close"),e.qZA(),e.qZA()}if(2&h){const t=e.oxw(2);e.xp6(2),e.hij("",t.parent.Name," :Temporadas"),e.xp6(3),e.Q6J("parentItem",t.parent)}}function wh(h,n){if(1&h&&e.YNc(0,vf,9,2,"ng-template",1),2&h){const t=e.oxw();e.Q6J("ngIf",null!=t.parent)}}let Lg=(()=>{class h extends Ie.X{constructor(t,o,u,p,C,F,$,le){super(o,p,C,$),this.modalService=t,this.restProvider=o,this.ref=u,this.events=p,this.domSanitizer=C,this.activeRoute=F,this.sharedData=$,this.http=le,this.close=new e.vpe}ngOnInit(){}ngAfterViewInit(){this.modalService.open(this.modalTarget,{container:"#sinovadMainContainer",modalDialogClass:"modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable",scrollable:!0,ariaLabelledBy:"exampleModalCenteredScrollableTitle"}).result.then(t=>{},t=>{this.close.emit(!0)})}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(Y.FF),e.Y36(Re.C),e.Y36(e.sBO),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(R.gz),e.Y36(ke.g),e.Y36(S.eN))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-season-list-modal"]],viewQuery:function(t,o){if(1&t&&e.Gf(Ng,5),2&t){let u;e.iGM(u=e.CRH())&&(o.modalTarget=u.first)}},inputs:{parent:"parent"},outputs:{close:"close"},features:[e.qOj],decls:2,vars:0,consts:[["modalTarget",""],[3,"ngIf"],[1,"modal-header"],["id","exampleModalCenteredScrollableTitle",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"parentItem"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"]],template:function(t,o){1&t&&e.YNc(0,wh,1,1,"ng-template",null,0,e.W1O)},directives:[H.O5,Mm],styles:[""]}),h})();const Fg=function(h){return{selected:h}},kg=function(h){return{disable:h}};function Rh(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"tr",18),e.TgZ(1,"th",19),e.NdJ("click",function(u){const C=e.CHM(t).$implicit;return e.oxw().onClickItem(u,C)})("contextmenu",function(u){const C=e.CHM(t).$implicit;return e.oxw().onContextMenuItem(u,C)}),e._uU(2),e.qZA(),e.TgZ(3,"td",20),e.NdJ("click",function(u){const C=e.CHM(t).$implicit;return e.oxw().onClickItem(u,C)})("contextmenu",function(u){const C=e.CHM(t).$implicit;return e.oxw().onContextMenuItem(u,C)}),e._uU(4),e.qZA(),e.TgZ(5,"td",20),e.NdJ("click",function(u){const C=e.CHM(t).$implicit;return e.oxw().onClickItem(u,C)})("contextmenu",function(u){const C=e.CHM(t).$implicit;return e.oxw().onContextMenuItem(u,C)}),e._uU(6),e.qZA(),e.TgZ(7,"td"),e.TgZ(8,"button",21),e.NdJ("click",function(){const p=e.CHM(t).$implicit;return e.oxw().editItem(p)}),e._UZ(9,"i",22),e.qZA(),e.qZA(),e.qZA()}if(2&h){const t=n.$implicit,o=n.index,u=e.oxw();e.Q6J("ngClass",e.VKq(5,Fg,-1!=u.listSelectedItems.indexOf(t))),e.xp6(2),e.Oqu(u.getNewIndex(o,u.response.PageNumber,u.pageSize)),e.xp6(2),e.Oqu(t.Title?t.Title:t.Name),e.xp6(2),e.Oqu(u.getYearValueFromItem(t)),e.xp6(2),e.Q6J("ngClass",e.VKq(7,kg,u.isItemDisableForEdit(t)))}}function Bg(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"app-pagination",23),e.NdJ("selectPage",function(u){return e.CHM(t),e.oxw().onSelectPage(u)}),e.qZA()}if(2&h){const t=e.oxw();e.Q6J("responsePagination",t.response)}}function Nh(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"app-item-form",24),e.NdJ("closeForm",function(){return e.CHM(t),e.oxw().showPopUpForm=!1})("closeFormWithChanges",function(){return e.CHM(t),e.oxw().onSaveItem()}),e.qZA()}if(2&h){const t=e.oxw();e.Q6J("currentMediaTypeID",t.currentMediaTypeID)("tvProgram",t.item)}}function Ug(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"app-season-list-modal",25),e.NdJ("close",function(){return e.CHM(t),e.oxw().showListSeasonsPopUp=!1}),e.qZA()}if(2&h){const t=e.oxw();e.Q6J("parent",t.lastSelectedItem)}}function jg(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"app-confirm-message-modal",26),e.NdJ("close",function(){return e.CHM(t),e.oxw().showConfirmMessageBox=!1})("confirm",function(){return e.CHM(t),e.oxw().executeDeleteSelectedItems()}),e.qZA()}2&h&&e.Q6J("message","Estas seguro que deseas eliminar estos registros ?")}let _f=(()=>{class h extends Ie.X{constructor(t,o,u,p,C,F){super(t,u,p,C),this.restProvider=t,this.activeRoute=o,this.events=u,this.domSanitizer=p,this.sharedData=C,this.http=F,this._window=window,this.title="",this.listSelectedItems=[],this.showPopUpForm=!1,this.showListSeasonsPopUp=!1,this.downloadUrl=void 0,this.pageSize=10,this.showConfirmMessageBox=!1}ngOnInit(){}ngAfterViewInit(){this.getAllItems()}getAllItems(){this.executeGetAllItems(1..toString(),this.pageSize.toString())}getYearValueFromItem(t){return t.ReleaseDate?this.getYearByDateFormat(t.ReleaseDate):this.getYearByDateFormat(t.FirstAirDate)!=this.getYearByDateFormat(t.LastAirDate)?this.getYearByDateFormat(t.FirstAirDate)+" - "+this.getYearByDateFormat(t.LastAirDate):this.getYearByDateFormat(t.FirstAirDate)}isItemDisableForEdit(t){return!(!t.TmdbId&&!t.Imdbid)}onSelectPage(t){this.executeGetAllItems(t,this.pageSize.toString())}showItemForm(){let t=new Th;this.currentMediaTypeID==J.DD.Movie&&(t.ReleaseDate=new Date),this.currentMediaTypeID==J.DD.TvSerie&&(t.FirstAirDate=new Date,t.LastAirDate=new Date),this.item=t,this.showPopUpForm=!0}editItem(t){this.item=t,this.getGenresByitem()}getGenresByitem(){this.currentMediaTypeID==J.DD.Movie&&this.getMovie(),this.currentMediaTypeID==J.DD.TvSerie&&this.getTvSerie()}getMovie(){this.restProvider.executeSinovadApiService(J.yw.GET,"/movies/GetAsync/"+this.item.Id).then(t=>{this.item=t.Data,this.transformDates(),this.showPopUpForm=!0},t=>{console.error(t)})}executeGetAllItems(t,o){var u="?page="+t+"&take="+o;this.restProvider.executeSinovadApiService(J.yw.GET,this.currentMediaTypeID==J.DD.Movie?"/movies/GetAllWithPaginationAsync"+u:"/tvseries/GetAllWithPaginationAsync"+u).then(C=>{this.response=C,this.listItems=C.Data},C=>{console.error(C)})}getTvSerie(){this.restProvider.executeSinovadApiService(J.yw.GET,"/tvseries/GetAsync/"+this.item.Id).then(t=>{this.item=t.Data,this.transformDates(),this.showPopUpForm=!0},t=>{console.error(t)})}transformDates(){this.item.ReleaseDate&&(this.item.ReleaseDate=new Date(this.item.ReleaseDate)),this.item.FirstAirDate&&(this.item.FirstAirDate=new Date(this.item.FirstAirDate)),this.item.LastAirDate&&(this.item.LastAirDate=new Date(this.item.LastAirDate))}onSaveItem(){this.showPopUpForm=!1,this.getAllItems()}onContextMenuItem(t,o){t.preventDefault(),t.stopPropagation(),this.onClickItem(t,o);let u=[];this.currentMediaTypeID==J.DD.TvSerie&&!this.isItemDisableForEdit(o)&&u.push({text:"Ver",key:"view",icon:"view.png"}),u.push({text:"Eliminar",key:"delete",icon:"remove.png"}),this.sharedData.contextMenuData={parentPage:this,left:t.clientX,top:t.clientY,listOptions:u}}onClickContextMenuOption(t,o){"view"==o.key&&this.currentMediaTypeID==J.DD.TvSerie&&(this.showListSeasonsPopUp=!0),"delete"==o.key&&this.deleteSelectedItems(),this.sharedData.contextMenuData=void 0}getTitleWidth(){return"calc(100% - 120px)"}downloadJSON(t){t.click()}generateDownloadJsonFileUrl(){}onResize(t){}onChangeSelectAllCheckBox(t){if(t.target.checked)for(let o=0;o<this.listItems.length;o++)this.listSelectedItems.push(this.listItems[o]);else this.listSelectedItems=[]}executeDeleteSelectedItems(){if(this.showConfirmMessageBox=!1,this.listSelectedItems&&this.listSelectedItems.length>0){let u=[];for(let p=0;p<this.listSelectedItems.length;p++)u.push(this.listSelectedItems[p].Id);var t=u.join(","),o="";this.currentMediaTypeID==J.DD.Movie&&(o="/movies/DeleteList/"+t),this.currentMediaTypeID==J.DD.TvSerie&&(o="/tvseries/DeleteList/"+t),this.restProvider.executeSinovadApiService(J.yw.DELETE,o).then(p=>{this.listSelectedItems=[],this.getAllItems()},p=>{console.error(p)})}}deleteSelectedItems(){this.showConfirmMessageBox=!0}onClickItem(t,o){if(t.ctrlKey||t.shiftKey)if(t.ctrlKey)-1!=this.listSelectedItems.indexOf(o)?this.listSelectedItems.splice(this.listSelectedItems.indexOf(o),1):this.listSelectedItems.push(o);else{let u=0;this.listSelectedItems.length>0&&this.lastSelectedItem&&(u=this.listItems.indexOf(this.lastSelectedItem));let p=this.listItems.indexOf(o);if(p>=u){let C=this.listItems.filter(F=>this.listItems.indexOf(F)<=p&&this.listItems.indexOf(F)>=u&&-1==this.listSelectedItems.indexOf(F));this.listSelectedItems=this.listSelectedItems.concat(C)}else{let C=this.listItems.filter(F=>this.listItems.indexOf(F)>=p&&this.listItems.indexOf(F)<=u&&-1==this.listSelectedItems.indexOf(F));this.listSelectedItems=this.listSelectedItems.concat(C)}}else"contextmenu"==t.type?-1==this.listSelectedItems.indexOf(o)&&(this.listSelectedItems=[],this.listSelectedItems.push(o)):(this.listSelectedItems=[],this.listSelectedItems.push(o));this.lastSelectedItem=o}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(Re.C),e.Y36(R.gz),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(ke.g),e.Y36(S.eN))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-item-list"]],hostBindings:function(t,o){1&t&&e.NdJ("resize",function(p){return o.onResize(p)},!1,e.Jf7)},inputs:{currentMediaTypeID:"currentMediaTypeID",title:"title"},features:[e.qOj],decls:36,vars:6,consts:[[1,"container"],[1,"row","mt-4"],[1,"col-6","d-flex","align-itsinovad-center"],[1,"form-check","mb-0"],["id","flexCheckDefault","type","checkbox",1,"form-check-input",3,"change"],["checkbox",""],["for","flexCheckDefault",1,"form-check-label"],[1,"col-6","text-end"],["type","button",1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"fa-solid","fa-circle-plus","me-2"],[1,"col-12"],[1,"table","table-bordered"],["scope","col"],["ngFor","",3,"ngForOf"],[3,"responsePagination","selectPage",4,"ngIf"],[3,"currentMediaTypeID","tvProgram","closeForm","closeFormWithChanges",4,"ngIf"],[3,"parent","close",4,"ngIf"],[3,"message","close","confirm",4,"ngIf"],[3,"ngClass"],["role","button","scope","row",3,"click","contextmenu"],["role","button",3,"click","contextmenu"],["type","button","data-toggle","tooltip","data-placement","bottom","title","Editar",1,"btn","btn-success","btn-sm","ms-20",3,"ngClass","click"],[1,"fa-solid","fa-pen-to-square"],[3,"responsePagination","selectPage"],[3,"currentMediaTypeID","tvProgram","closeForm","closeFormWithChanges"],[3,"parent","close"],[3,"message","close","confirm"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h3"),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"div",1),e.TgZ(5,"div",2),e.TgZ(6,"div",3),e.TgZ(7,"input",4,5),e.NdJ("change",function(p){return o.onChangeSelectAllCheckBox(p)}),e.qZA(),e.TgZ(9,"label",6),e._uU(10," Todos "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",7),e.TgZ(12,"button",8),e.NdJ("click",function(){return o.showItemForm()}),e._UZ(13,"i",9),e._uU(14,"Agregar"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"div",1),e.TgZ(16,"div",10),e.TgZ(17,"table",11),e.TgZ(18,"thead"),e.TgZ(19,"tr"),e.TgZ(20,"th",12),e._uU(21,"N\xb0"),e.qZA(),e.TgZ(22,"th",12),e._uU(23,"Titulo"),e.qZA(),e.TgZ(24,"th",12),e._uU(25,"A\xf1o"),e.qZA(),e.TgZ(26,"th",12),e._uU(27,"Acciones"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"tbody"),e.YNc(29,Rh,10,9,"ng-template",13),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(30,"div",1),e.TgZ(31,"div",10),e.YNc(32,Bg,1,1,"app-pagination",14),e.qZA(),e.qZA(),e.qZA(),e.YNc(33,Nh,1,2,"app-item-form",15),e.YNc(34,Ug,1,1,"app-season-list-modal",16),e.YNc(35,jg,1,1,"app-confirm-message-modal",17)),2&t&&(e.xp6(3),e.hij(" ",o.title,""),e.xp6(26),e.Q6J("ngForOf",o.listItems),e.xp6(3),e.Q6J("ngIf",o.response),e.xp6(1),e.Q6J("ngIf",o.showPopUpForm),e.xp6(1),e.Q6J("ngIf",o.showListSeasonsPopUp),e.xp6(1),e.Q6J("ngIf",o.showConfirmMessageBox))},directives:[H.sg,H.mk,H.O5,Xc,Ch,Lg,nu],styles:["h3[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{color:#fff}.selected[_ngcontent-%COMP%], .selected[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .selected[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#F7EEAE}"]}),h})();class Lh{}const Vg=["storageModalTarget"];function Gs(h,n){if(1&h&&(e.TgZ(0,"option",18),e._uU(1),e.qZA()),2&h){const t=e.oxw().$implicit;e.s9C("value",t.Id),e.xp6(1),e.Oqu(t.Name)}}function yf(h,n){if(1&h&&(e.TgZ(0,"option",19),e._uU(1),e.qZA()),2&h){const t=e.oxw().$implicit;e.s9C("value",t.Id),e.xp6(1),e.Oqu(t.Name)}}function Hg(h,n){if(1&h&&(e.YNc(0,Gs,2,2,"option",16),e.YNc(1,yf,2,2,"option",17)),2&h){const t=n.$implicit,o=e.oxw(3);e.Q6J("ngIf",t.Id==o.storage.MediaTypeCatalogDetailId),e.xp6(1),e.Q6J("ngIf",t.Id!=o.storage.MediaTypeCatalogDetailId)}}function Gg(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"div",3),e.TgZ(1,"h5",4),e._uU(2),e.qZA(),e.TgZ(3,"button",5),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.dismiss()}),e.qZA(),e.qZA(),e.TgZ(4,"div",6),e.TgZ(5,"div",7),e.TgZ(6,"label",8),e._uU(7,"Tipo"),e.qZA(),e.TgZ(8,"select",9),e.NdJ("change",function(u){return e.CHM(t),e.oxw(2).onChangeMediaType(u)}),e.YNc(9,Hg,2,2,"ng-template",10),e.qZA(),e.qZA(),e.TgZ(10,"div",7),e.TgZ(11,"label",11),e._uU(12,"Directorio"),e.qZA(),e.TgZ(13,"input",12),e.NdJ("ngModelChange",function(u){return e.CHM(t),e.oxw(2).storage.PhysicalPath=u})("click",function(){return e.CHM(t),e.oxw(2).showChooserDirectory=!0}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",13),e.TgZ(15,"button",14),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.dismiss()}),e._uU(16,"Close"),e.qZA(),e.TgZ(17,"button",15),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.close()}),e._uU(18,"Guardar"),e.qZA(),e.qZA()}if(2&h){const t=e.oxw(2);e.xp6(2),e.Oqu(t.storage.Id>0?"Editar Almacenamiento":"Nuevo Almacenamiento"),e.xp6(7),e.Q6J("ngForOf",t.mediaTypes),e.xp6(4),e.Q6J("ngModel",t.storage.PhysicalPath)}}function Pm(h,n){if(1&h&&e.YNc(0,Gg,19,3,"ng-template",2),2&h){const t=e.oxw();e.Q6J("ngIf",null!=t.storage)}}function Fh(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"app-directory-chooser",20),e.NdJ("outputSelectedSubdirectory",function(u){return e.CHM(t),e.oxw().onSelectDirectory(u)})("closeChooserDirectory",function(){return e.CHM(t),e.oxw().showChooserDirectory=!1}),e.qZA()}if(2&h){const t=e.oxw();e.Q6J("listMainDirectories",t.listMainDirectories)}}let Kg=(()=>{class h extends Ie.X{constructor(t,o,u,p,C,F){super(o,p,C,F),this.modalService=t,this.restProvider=o,this.http=u,this.events=p,this.domSanitizer=C,this.sharedData=F,this.closeStorageForm=new e.vpe,this.closeStorageFormWithChanges=new e.vpe,this.showChooserDirectory=!1,this.mediaTypes=[{Id:1,Name:"Movies"},{Id:2,Name:"Tv Series"}]}ngOnInit(){}ngAfterViewInit(){this.modalService.open(this.storageModalTarget,{container:"#sinovadMainContainer",modalDialogClass:"modal-dialog modal-dialog-centered modal-dialog-scrollable",scrollable:!0,ariaLabelledBy:"exampleModalCenteredScrollableTitle"}).result.then(t=>{this.saveStorage()},t=>{this.closeStorageForm.emit(!0)})}saveStorage(){this.storage.MediaServerId=this.sharedData.currentMediaServerData.Id,this.restProvider.executeSinovadApiService(this.storage.Id>0?J.yw.PUT:J.yw.POST,this.storage.Id>0?"/storages/Update":"/storages/Create",this.storage).then(u=>{this.closeStorageFormWithChanges.emit(!0)},u=>{console.error(u)})}onChangeMediaType(t){this.storage.MediaTypeCatalogDetailId=Number(t.target.value)}onSelectDirectory(t){this.storage.PhysicalPath=t,this.showChooserDirectory=!1}onResize(t){}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(Y.FF),e.Y36(Re.C),e.Y36(S.eN),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(ke.g))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-storage-form"]],viewQuery:function(t,o){if(1&t&&e.Gf(Vg,5),2&t){let u;e.iGM(u=e.CRH())&&(o.storageModalTarget=u.first)}},hostBindings:function(t,o){1&t&&e.NdJ("resize",function(p){return o.onResize(p)},!1,e.Jf7)},inputs:{storage:"storage",listMainDirectories:"listMainDirectories"},outputs:{closeStorageForm:"closeStorageForm",closeStorageFormWithChanges:"closeStorageFormWithChanges"},features:[e.qOj],decls:3,vars:1,consts:[["storageModalTarget",""],[3,"listMainDirectories","outputSelectedSubdirectory","closeChooserDirectory",4,"ngIf"],[3,"ngIf"],[1,"modal-header"],["id","exampleModalCenteredScrollableTitle",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mb-3"],["for","typeFormControlId",1,"form-label"],["id","typeFormControlId","aria-label","Seleccionar Tipo",1,"form-select",3,"change"],["ngFor","",3,"ngForOf"],["for","directoryFormControlId",1,"form-label"],["id","directoryFormControlId","readonly","",1,"form-control",3,"ngModel","ngModelChange","click"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["selected","",3,"value",4,"ngIf"],[3,"value",4,"ngIf"],["selected","",3,"value"],[3,"value"],[3,"listMainDirectories","outputSelectedSubdirectory","closeChooserDirectory"]],template:function(t,o){1&t&&(e.YNc(0,Pm,1,1,"ng-template",null,0,e.W1O),e.YNc(2,Fh,1,1,"app-directory-chooser",1)),2&t&&(e.xp6(2),e.Q6J("ngIf",o.showChooserDirectory))},directives:[H.O5,H.sg,ne.YN,ne.Kr,ne.Fj,ne.JJ,ne.On,js],styles:[""]}),h})();function Wg(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"th",13),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e.TgZ(8,"button",14),e.NdJ("click",function(){const p=e.CHM(t).$implicit;return e.oxw().updateStorageVideos(p)}),e._UZ(9,"i",15),e.qZA(),e.TgZ(10,"button",16),e.NdJ("click",function(){const p=e.CHM(t).$implicit;return e.oxw().editStorage(p)}),e._UZ(11,"i",17),e.qZA(),e.TgZ(12,"button",18),e.NdJ("click",function(){const p=e.CHM(t).$implicit;return e.oxw().deleteStorage(p)}),e._UZ(13,"i",19),e.qZA(),e.qZA(),e.qZA()}if(2&h){const t=n.$implicit,o=n.index;e.xp6(2),e.Oqu(o+1),e.xp6(2),e.Oqu(t.PhysicalPath),e.xp6(2),e.Oqu(1==t.MediaTypeCatalogDetailId?"Movies":"Tv Series")}}function Yg(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"app-storage-form",20),e.NdJ("closeStorageFormWithChanges",function(){return e.CHM(t),e.oxw().onCloseStorageFormWithChanges()})("closeStorageForm",function(){return e.CHM(t),e.oxw().onCloseStorageForm()}),e.qZA()}if(2&h){const t=e.oxw();e.Q6J("listMainDirectories",t.listMainDirectories)("storage",t.storage)}}function Ef(h,n){if(1&h&&e._UZ(0,"div",25),2&h){const t=e.oxw(2);e.Q6J("innerHTML",t.searchMediaLogContent,e.oJD)}}function Zg(h,n){1&h&&(e.TgZ(0,"div",26),e._uU(1," Buscando videos... "),e.qZA())}function $g(h,n){if(1&h&&(e.TgZ(0,"div",21),e.TgZ(1,"div",22),e.YNc(2,Ef,1,1,"div",23),e.YNc(3,Zg,2,0,"div",24),e.qZA(),e.qZA()),2&h){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",""!=t.searchMediaLogContent),e.xp6(1),e.Q6J("ngIf",""==t.searchMediaLogContent)}}let nc=(()=>{class h extends Ie.X{constructor(t,o,u,p,C){super(t,u,p,C),this.restProvider=t,this.http=o,this.events=u,this.domSanitizer=p,this.sharedData=C,this.showInitial=new e.vpe,this.storageMovies={MediaTypeCatalogId:J.P9.MediaType,MediaTypeCatalogDetailId:J.DD.Movie,PhysicalPath:""},this.storageTvSeries={MediaTypeCatalogId:J.P9.MediaType,MediaTypeCatalogDetailId:J.DD.TvSerie,PhysicalPath:""},this.callSearchMediaLog=!1,this.searchMediaLogContent="",this.showForm=!1}ngOnInit(){}ngAfterViewInit(){this.getAllMainDirectories(),this.getStorages()}ngOnDestroy(){null!=this.searchingMediaInterval&&window.clearInterval(this.searchingMediaInterval),this.callSearchMediaLog=!1}getAllMainDirectories(){this.restProvider.executeSinovadStreamServerService(J.yw.GET,"/directories").then(t=>{this.listMainDirectories=JSON.parse(t)},t=>{console.error(t)})}getStorages(){this.restProvider.executeSinovadApiService(J.yw.GET,"/storages/GetAllWithPaginationByMediaServerAsync/"+this.sharedData.currentMediaServerData.Id).then(o=>{let u=o.Data;if(this.listStorages=u,u&&u.length>0){let p=u.find(F=>1==F.MediaType);p?this.storageMovies=p:this.storageMovies.MediaServerId=this.sharedData.currentMediaServerData.Id;let C=u.find(F=>2==F.MediaType);C?this.storageTvSeries=C:this.storageTvSeries.MediaServerId=this.sharedData.currentMediaServerData.Id}},o=>{console.error(o)})}openNewStorage(){let t=new Lh;t.MediaServerId=this.sharedData.currentMediaServerData.Id,t.MediaTypeCatalogId=J.P9.MediaType,t.MediaTypeCatalogDetailId=J.DD.Movie,this.storage=t,this.showForm=!0}editStorage(t){this.storage=JSON.parse(JSON.stringify(t)),this.showForm=!0}deleteStorage(t){this.restProvider.executeSinovadApiService(J.yw.DELETE,"/storages/Delete/"+t.Id).then(u=>{this.getStorages()},u=>{console.error(u)})}onCloseStorageForm(){this.showForm=!1}onCloseStorageFormWithChanges(){this.showForm=!1,this.getStorages()}updateStorageVideos(t){t.Id>0&&null!=t.PhysicalPath&&""!=t.PhysicalPath&&this.executeUpdateVideosInAllStorages([t])}updateVideoInAllStorages(){this.executeUpdateVideosInAllStorages(this.listStorages)}executeUpdateVideosInAllStorages(t){let o=(0,eo.Z)();this.callSearchMediaLog=!0,this.restProvider.executeSinovadStreamServerService(J.yw.POST,"/medias/UpdateVideosInListStorages",{ListStorages:t,LogIdentifier:o}).then(C=>{this.callSearchMediaLog=!1,null!=this.searchingMediaInterval&&window.clearInterval(this.searchingMediaInterval),this.showInitial.emit()},C=>{console.error(C)});let p=this;setTimeout(()=>{p.searchingMediaInterval=window.setInterval(function(){p.getSearchMediaLog(o)},2e3)},2e3,p)}getSearchMediaLog(t){this.restProvider.executeSinovadApiService(J.yw.GET,"/logs?identifier="+t).then(o=>{this.searchMediaLogContent=o.Data,null==this.searchMediaLogContent&&null!=this.searchingMediaInterval&&(this.callSearchMediaLog=!1,null!=this.searchingMediaInterval&&window.clearInterval(this.searchingMediaInterval),this.showInitial.emit())},o=>{console.error(o)})}onResize(t){}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(Re.C),e.Y36(S.eN),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(ke.g))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-manage-media"]],hostBindings:function(t,o){1&t&&e.NdJ("resize",function(p){return o.onResize(p)},!1,e.Jf7)},outputs:{showInitial:"showInitial"},features:[e.qOj],decls:30,vars:3,consts:[[1,"sinovad-storage-container"],[1,"sinovad-storage-principal-section"],[1,"container"],[1,"row","mt-4"],[1,"col-4"],[1,"btn","btn-primary",3,"click"],[1,"col-8","text-end"],[1,"col-12"],[1,"table","table-bordered"],["scope","col"],["ngFor","",3,"ngForOf"],[3,"listMainDirectories","storage","closeStorageFormWithChanges","closeStorageForm",4,"ngIf"],["class","sinovad-searh-media-log-container",4,"ngIf"],["scope","row"],["type","button","data-toggle","tooltip","data-placement","bottom","title","Sincronizar",1,"btn","btn-primary",2,"margin-left","20px",3,"click"],[1,"fa-solid","fa-magnifying-glass-plus"],["type","button","data-toggle","tooltip","data-placement","bottom","title","Editar",1,"btn","btn-success",2,"margin-left","20px",3,"click"],[1,"fa-solid","fa-pen-to-square"],["type","button","data-toggle","tooltip","data-placement","bottom","title","Eliminar",1,"btn","btn-danger",2,"margin-left","20px",3,"click"],[1,"fa-sharp","fa-solid","fa-trash"],[3,"listMainDirectories","storage","closeStorageFormWithChanges","closeStorageForm"],[1,"sinovad-searh-media-log-container"],[1,"sinovad-searh-media-log-content"],["class","sinovad-searh-media-log-html",3,"innerHTML",4,"ngIf"],["class","sinovad-searh-media-log-second-content",4,"ngIf"],[1,"sinovad-searh-media-log-html",3,"innerHTML"],[1,"sinovad-searh-media-log-second-content"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"section",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"h3"),e._uU(5,"Almacenamiento"),e.qZA(),e.qZA(),e.TgZ(6,"div",3),e.TgZ(7,"div",4),e.TgZ(8,"button",5),e.NdJ("click",function(){return o.openNewStorage()}),e._uU(9,"Agregar"),e.qZA(),e.qZA(),e.TgZ(10,"div",6),e.TgZ(11,"button",5),e.NdJ("click",function(){return o.updateVideoInAllStorages()}),e._uU(12,"Sincronizar todo"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",3),e.TgZ(14,"div",7),e.TgZ(15,"table",8),e.TgZ(16,"thead"),e.TgZ(17,"tr"),e.TgZ(18,"th",9),e._uU(19,"#"),e.qZA(),e.TgZ(20,"th",9),e._uU(21,"Path"),e.qZA(),e.TgZ(22,"th",9),e._uU(23,"Type"),e.qZA(),e.TgZ(24,"th",9),e._uU(25,"Actions"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"tbody"),e.YNc(27,Wg,14,3,"ng-template",10),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(28,Yg,1,2,"app-storage-form",11),e.YNc(29,$g,4,2,"div",12)),2&t&&(e.xp6(27),e.Q6J("ngForOf",o.listStorages),e.xp6(1),e.Q6J("ngIf",o.showForm),e.xp6(1),e.Q6J("ngIf",o.callSearchMediaLog))},directives:[H.sg,H.O5,Kg],styles:[".sinovad-searh-media-log-container[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0;display:flex;align-items:center;justify-content:center}.sinovad-searh-media-log-content[_ngcontent-%COMP%]{width:80%;height:80%;background:black;border:1px solid #dedede;border-radius:6px;color:#fff;padding:10px}.sinovad-searh-media-log-second-content[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center;font-size:26px}.sinovad-searh-media-log-html[_ngcontent-%COMP%]{color:#fff;font-size:16px;overflow-y:auto;overflow-x:hidden;width:100%;height:100%}.sinovad-storage-principal-section[_ngcontent-%COMP%]{display:block;border-bottom:1px solid #dedede;margin-left:10px;margin-right:10px}.sinovad-storage-principal-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;margin-left:10px;margin-bottom:2px;font-size:30px}.sinovad-storage-container[_ngcontent-%COMP%]{display:block}.sinovad-storage-section[_ngcontent-%COMP%]{display:block;padding:10px}.sinovad-storage-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;margin-left:0;font-size:20px}.sinovad-storage-section[_ngcontent-%COMP%]   .sinovad-storage-buttons-container[_ngcontent-%COMP%]{display:flex;align-items:center}.sinovad-storage-section[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:30px;border-radius:5px;outline:none;cursor:pointer}.sinovad-transcode-subsection[_ngcontent-%COMP%]{display:block;padding:10px}.sinovad-transcode-subsection[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#fff}.sinovad-transcode-subsection[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:300px;margin-left:20px;height:30px;border-radius:5px}.sinovad-transcode-subsection[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:300px;margin-left:20px;height:30px;border-radius:5px;cursor:pointer}.sinovad-transcode-subsection-buttons[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:left;padding:10px}"]}),h})();const Tf=[{path:"desktop/home",component:Bn,loadChildren:()=>Promise.all([O.e(592),O.e(467)]).then(O.bind(O,3467)).then(h=>h.HomePageModule)},{path:"desktop/movies",component:Xt,loadChildren:()=>Promise.all([O.e(592),O.e(832)]).then(O.bind(O,1832)).then(h=>h.MoviesPageModule)},{path:"desktop/tvseries",component:jn,loadChildren:()=>Promise.all([O.e(592),O.e(132)]).then(O.bind(O,8132)).then(h=>h.TvSeriesPageModule)},{path:"desktop/search",component:Xi,loadChildren:()=>Promise.all([O.e(592),O.e(716)]).then(O.bind(O,6716)).then(h=>h.SearchViewDesktopPageModule)},{path:"desktop/select-profile",component:Dt,loadChildren:()=>Promise.resolve().then(O.bind(O,2001)).then(h=>h.ProfilesViewPageModule)},{path:"desktop/moviedetail/:movieId",component:Qe,loadChildren:()=>Promise.all([O.e(592),O.e(686)]).then(O.bind(O,686)).then(h=>h.MovieDetailPageModule)},{path:"desktop/tvseriedetail/:tvSerieId",component:Lt,loadChildren:()=>Promise.all([O.e(592),O.e(221)]).then(O.bind(O,5221)).then(h=>h.TvSerieDetailPageModule)},{path:"desktop/landing",component:_t,loadChildren:()=>O.e(721).then(O.bind(O,8721)).then(h=>h.LandingPageModule)},{path:"desktop/register",component:Qt,loadChildren:()=>O.e(31).then(O.bind(O,8031)).then(h=>h.RegisterAcccountPageModule)},{path:"desktop/login",component:Jn,loadChildren:()=>O.e(107).then(O.bind(O,107)).then(h=>h.LoginPageModule)},{path:"desktop/recover",component:kt,loadChildren:()=>O.e(185).then(O.bind(O,5185)).then(h=>h.RecoverPasswordPageModule)},{path:"desktop/reset/:base64Data",component:Ln,loadChildren:()=>O.e(371).then(O.bind(O,4371)).then(h=>h.ResetPasswordPageModule)},{path:"desktop/confirm/:base64Data",component:pr,loadChildren:()=>O.e(994).then(O.bind(O,2994)).then(h=>h.ConfirmEmailPageModule)},{path:"desktop/404",component:he,loadChildren:()=>O.e(867).then(O.bind(O,2867)).then(h=>h.NotFoundPageModule)},{path:"desktop/storage",component:nc,loadChildren:()=>Promise.all([O.e(592),O.e(33)]).then(O.bind(O,8033)).then(h=>h.ManageMediaPageModule)},{path:"desktop/transcoding",component:lf,loadChildren:()=>Promise.all([O.e(592),O.e(114)]).then(O.bind(O,5114)).then(h=>h.TranscoderSettingssPageModule)},{path:"desktop/management-items",component:_f,loadChildren:()=>O.e(576).then(O.bind(O,5576)).then(h=>h.ItemListPageModule)},{path:"desktop",pathMatch:"full",redirectTo:"desktop/home"}];let zg=(()=>{class h{}return h.\u0275fac=function(t){return new(t||h)},h.\u0275mod=e.oAB({type:h}),h.\u0275inj=e.cJS({imports:[[H.ez,ne.u5,pe.U,li,ui,ne.UX,ce.m,xe.g,R.Bz.forChild(Tf)]]}),h})(),bf=(()=>{class h{}return h.\u0275fac=function(t){return new(t||h)},h.\u0275mod=e.oAB({type:h}),h.\u0275inj=e.cJS({imports:[[r.b2,H.ez,ne.u5,ce.m,ne.UX,zg]]}),h})();const Cf=["searchTarget"],Sf=function(h){return{focused:h}};function qg(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"div",12),e.TgZ(1,"div",13),e.TgZ(2,"input",6,7),e.NdJ("ngModelChange",function(u){return e.CHM(t),e.oxw().searchText=u})("change",function(){return e.CHM(t),e.oxw().onChangeSearchValue()})("focus",function(){return e.CHM(t),e.oxw().isFocusSearch=!0})("blur",function(){return e.CHM(t),e.oxw().isFocusSearch=!1}),e.qZA(),e.TgZ(4,"button",8),e.NdJ("click",function(){return e.CHM(t),e.oxw().onClickSearchButton()}),e._UZ(5,"i",9),e.qZA(),e.qZA(),e.TgZ(6,"div",14),e.TgZ(7,"button",8),e.NdJ("click",function(){return e.CHM(t),e.oxw().showNavbarSearch=!1}),e._UZ(8,"i",15),e.qZA(),e.qZA(),e.qZA()}if(2&h){const t=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(2,Sf,t.isFocusSearch)),e.xp6(1),e.Q6J("ngModel",t.searchText)}}let Jg=(()=>{class h extends Ie.X{constructor(t,o,u,p,C){super(t,u,p,C),this.restProvider=t,this.http=o,this.events=u,this.domSanitizer=p,this.sharedData=C,this.goHome=new e.vpe,this.toggleSidebar=new e.vpe,this.selectOption=new e.vpe,this.showSplashScreen=new e.vpe,this.logout=new e.vpe,this.executeSearch=new e.vpe,this.toggleMenu=new e.vpe,this.searchText="",this.isFocusSearch=!1,this.showDropDown=!1,this.showNavbarSearch=!1}ngOnInit(){}ngAfterViewInit(){this.addClickEvent()}onClickSearchButton(){this.showNavbarSearch=!0}addClickEvent(){const t=document.getElementById("userDropDown");document.addEventListener("click",o=>{this.showDropDown=!!o.composedPath().includes(t)})}onClickOption(t){this.selectOption.emit(t)}onSelectProfile(t){this.sharedData.currentProfile=t,this.goHome.emit(!0)}onClickChangeProfileButton(){this.showSplashScreen.emit(!0)}onChangeSearchValue(){this.executeSearch.emit(this.searchText),this.searchText=""}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(Re.C),e.Y36(S.eN),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(ke.g))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-header-desktop"]],viewQuery:function(t,o){if(1&t&&e.Gf(Cf,5),2&t){let u;e.iGM(u=e.CRH())&&(o.searchTarget=u.first)}},outputs:{goHome:"goHome",toggleSidebar:"toggleSidebar",selectOption:"selectOption",showSplashScreen:"showSplashScreen",logout:"logout",executeSearch:"executeSearch",toggleMenu:"toggleMenu"},features:[e.qOj],decls:16,vars:5,consts:[[1,"sinovad-toggle-sidebar-button",3,"click"],[1,"fa-solid","fa-bars"],[1,"sinovad-logo-button",3,"click"],[1,"first-span"],[1,"second-span"],[1,"sinovad-custom-search",3,"ngClass"],["type","text",3,"ngModel","ngModelChange","change","focus","blur"],["input",""],[3,"click"],[1,"fa-solid","fa-magnifying-glass"],[3,"logout","changeProfile","showSplashScreen"],["class","sinovad-navbar-search",4,"ngIf"],[1,"sinovad-navbar-search"],[1,"sinovad-bottom-search",3,"ngClass"],[1,"sinovad-close-search-container"],[1,"fa","fa-times"]],template:function(t,o){1&t&&(e.TgZ(0,"header"),e.TgZ(1,"nav"),e.TgZ(2,"a",0),e.NdJ("click",function(){return o.toggleSidebar.emit(!0)}),e._UZ(3,"i",1),e.qZA(),e.TgZ(4,"a",2),e.NdJ("click",function(){return o.goHome.emit(!0)}),e.TgZ(5,"span",3),e._uU(6,"Sinovad"),e.qZA(),e.TgZ(7,"span",4),e._uU(8,"Stream"),e.qZA(),e.qZA(),e.TgZ(9,"div",5),e.TgZ(10,"input",6,7),e.NdJ("ngModelChange",function(p){return o.searchText=p})("change",function(){return o.onChangeSearchValue()})("focus",function(){return o.isFocusSearch=!0})("blur",function(){return o.isFocusSearch=!1}),e.qZA(),e.TgZ(12,"button",8),e.NdJ("click",function(){return o.onClickSearchButton()}),e._UZ(13,"i",9),e.qZA(),e.qZA(),e.TgZ(14,"app-dropdown-user",10),e.NdJ("logout",function(){return o.logout.emit(!0)})("changeProfile",function(){return o.goHome.emit(!0)})("showSplashScreen",function(){return o.showSplashScreen.emit(!0)}),e.qZA(),e.qZA(),e.YNc(15,qg,9,4,"div",11),e.qZA()),2&t&&(e.xp6(9),e.Q6J("ngClass",e.VKq(3,Sf,o.isFocusSearch&&!o.isSmallDevice())),e.xp6(1),e.Q6J("ngModel",o.searchText),e.xp6(5),e.Q6J("ngIf",o.isSmallDevice()&&o.showNavbarSearch))},directives:[H.mk,ne.Fj,ne.JJ,ne.On,si,H.O5],styles:[".sinovad-logo-button[_ngcontent-%COMP%]{padding:0;border:none;margin-left:30px;cursor:pointer;text-decoration:unset;font-size:20px}.sinovad-logo-button[_ngcontent-%COMP%]   .first-span[_ngcontent-%COMP%]{color:#007bff;margin-right:6px}.sinovad-logo-button[_ngcontent-%COMP%]   .second-span[_ngcontent-%COMP%]{color:#fff}.sinovad-custom-search[_ngcontent-%COMP%]{display:flex;align-items:center;height:30px;border-radius:5px;border:2px solid transparent;margin-left:20px;background-color:#fff}.sinovad-custom-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:transparent;border:none;outline:none;padding-left:10px}.sinovad-custom-search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;outline:none;border-radius:0 7px 7px 0;opacity:.7;padding-right:8px;padding-left:8px}.sinovad-custom-search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1}.sinovad-custom-search.focused[_ngcontent-%COMP%]{border:2px solid #007bff}.sinovad-toggle-sidebar-button[_ngcontent-%COMP%]{padding:0;border:none;margin-left:30px;cursor:pointer;color:#fff;font-size:24px;opacity:.7}.sinovad-toggle-sidebar-button[_ngcontent-%COMP%]:hover{opacity:1}nav[_ngcontent-%COMP%]{background:black;color:#fff;flex-wrap:nowrap;justify-content:flex-start;display:flex;height:70px;align-items:center}nav[_ngcontent-%COMP%]   ul.sinovad-nav-list[_ngcontent-%COMP%]{list-style-type:none;flex-direction:row;display:flex;height:100%;align-items:center;margin-bottom:0}nav[_ngcontent-%COMP%]   ul.sinovad-nav-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;height:100%}nav[_ngcontent-%COMP%]   ul.sinovad-nav-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;cursor:pointer;text-decoration:unset;height:100%;display:flex;align-items:center;padding-left:10px;padding-right:10px}.sinovad-navbar-search[_ngcontent-%COMP%]{background:black;display:flex;align-items:center;padding:10px 20px}.sinovad-navbar-search[_ngcontent-%COMP%]   .sinovad-bottom-search[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;height:30px;border-radius:5px;border:2px solid transparent;margin-right:20px;background-color:#fff}.sinovad-navbar-search[_ngcontent-%COMP%]   .sinovad-bottom-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:transparent;border:none;outline:none;padding-left:10px;width:100%}.sinovad-navbar-search[_ngcontent-%COMP%]   .sinovad-bottom-search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;outline:none;border-radius:0 7px 7px 0;opacity:.7;padding-right:8px;padding-left:8px}.sinovad-navbar-search[_ngcontent-%COMP%]   .sinovad-bottom-search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1}.sinovad-navbar-search[_ngcontent-%COMP%]   .sinovad-bottom-search.focused[_ngcontent-%COMP%]{border:2px solid #007bff}.sinovad-navbar-search[_ngcontent-%COMP%]   .sinovad-close-search-container[_ngcontent-%COMP%]{width:20px}.sinovad-navbar-search[_ngcontent-%COMP%]   .sinovad-close-search-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;outline:none;border-radius:0 7px 7px 0;opacity:.7;color:#fff;padding-right:8px;padding-left:8px;font-size:24px}.sinovad-navbar-search[_ngcontent-%COMP%]   .sinovad-close-search-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1}@media only screen and (max-width: 1024px){.sinovad-nav-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}.sinovad-custom-search[_ngcontent-%COMP%]{background:transparent}.sinovad-custom-search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff;font-size:24px}.sinovad-custom-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}}"]}),h})();function Df(h,n){1&h&&e._UZ(0,"i",8)}function Am(h,n){1&h&&e._UZ(0,"i",9)}function Qg(h,n){if(1&h&&e._UZ(0,"i"),2&h){const t=e.oxw().$implicit;e.Tol(t.iconClass)}}const Mf=function(h){return{active:h}};function kh(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"li",11),e.TgZ(1,"a",12),e.NdJ("click",function(){const p=e.CHM(t).$implicit,C=e.oxw(2).$implicit;return e.oxw().onClickSidebarOption(p,C)}),e.YNc(2,Qg,1,3,"i",13),e.TgZ(3,"span",6),e._uU(4),e.qZA(),e.qZA(),e.qZA()}if(2&h){const t=n.$implicit,o=e.oxw(3);e.xp6(1),e.Q6J("ngClass",e.VKq(3,Mf,o.selectedSidebarOption&&t.index==o.selectedSidebarOption.index)),e.xp6(1),e.Q6J("ngIf",t.iconClass),e.xp6(2),e.Oqu(t.name)}}function Bh(h,n){if(1&h&&(e.TgZ(0,"div"),e.TgZ(1,"ul",10),e.YNc(2,kh,5,5,"ng-template",1),e.qZA(),e.qZA()),2&h){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("ngForOf",t.listOptions)}}function Uh(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"li",2),e.TgZ(1,"button",3),e.NdJ("click",function(){const p=e.CHM(t).$implicit;return e.oxw().onClickModule(p)}),e.YNc(2,Df,1,0,"i",4),e.YNc(3,Am,1,0,"i",5),e.TgZ(4,"span",6),e._uU(5),e.qZA(),e.qZA(),e.YNc(6,Bh,3,1,"div",7),e.qZA()}if(2&h){const t=n.$implicit,o=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(5,Mf,o.selectedSidebarModule&&t.index==o.selectedSidebarModule.index)),e.xp6(1),e.Q6J("ngIf",t.isCollapsed),e.xp6(1),e.Q6J("ngIf",!t.isCollapsed),e.xp6(2),e.Oqu(t.name),e.xp6(1),e.Q6J("ngIf",!t.isCollapsed)}}let jh=(()=>{class h extends Ie.X{constructor(t,o,u,p,C,F){super(o,p,C,F),this.ref=t,this.restProvider=o,this.http=u,this.events=p,this.domSanitizer=C,this.sharedData=F,this.selectOption=new e.vpe,this.listModules=[],this.allModules=[{index:1,order:1,name:"Media",listOptions:[{index:1,name:"Inicio",method:"ShowInitial",iconClass:"fa-solid fa-house"},{index:2,name:"Pel\xedculas",method:"ShowMovies",iconClass:"fa-solid fa-film"},{index:3,name:"Series",method:"ShowSeries",iconClass:"fa-solid fa-tv"}]},{index:2,name:"Almacenamiento",listOptions:[{index:5,name:"Almacenamiento",method:"ShowStorage",iconClass:"fa-solid fa-database"},{index:6,name:"Transcodificaci\xf3n",method:"ShowTranscoderSettingss",iconClass:"fa-solid fa-database"}]},{index:3,order:3,name:"Mantenimiento",listOptions:[{index:7,name:"Peliculas",method:"ShowManagementMovies",iconClass:"fa-solid fa-list-check"},{index:8,name:"Series",method:"ShowManagementTvSeries",iconClass:"fa-solid fa-list-check"}]}]}ngOnInit(){this.listModules=this.allModules,this.selectDefaultOption();let t=this;this.selectHomeUserOption.subscribe(o=>{t.selectDefaultOption()}),this.unselectSidebarOption.subscribe(o=>{t.selectedSidebarOption=void 0,t.selectedSidebarModule=void 0})}selectDefaultOption(){this.selectedSidebarModule=this.listModules[0],this.selectedSidebarOption=this.listModules[0].listOptions[0]}onClickModule(t){t.isCollapsed=!t.isCollapsed}onClickSidebarOption(t,o){this.selectedSidebarOption=t,this.selectedSidebarModule=o,this.selectOption.emit(this.selectedSidebarOption)}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(e.sBO),e.Y36(Re.C),e.Y36(S.eN),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(ke.g))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-sidebar-desktop"]],inputs:{selectHomeUserOption:"selectHomeUserOption",unselectSidebarOption:"unselectSidebarOption",isCollapsedSidebar:"isCollapsedSidebar"},outputs:{selectOption:"selectOption"},features:[e.qOj],decls:2,vars:1,consts:[[1,"sinovad-sidebar-modules-list"],["ngFor","",3,"ngForOf"],[1,"sinovad-sidebar-module-element"],[1,"sinovad-sidebar-module-button",3,"ngClass","click"],["class","fa-solid fa-chevron-right",4,"ngIf"],["class","fa-solid fa-chevron-down",4,"ngIf"],[1,"ms-2"],[4,"ngIf"],[1,"fa-solid","fa-chevron-right"],[1,"fa-solid","fa-chevron-down"],[1,"sinovad-sidebar-options-list"],[1,"sinovad-sidebar-option-element"],[3,"ngClass","click"],[3,"class",4,"ngIf"]],template:function(t,o){1&t&&(e.TgZ(0,"ul",0),e.YNc(1,Uh,7,7,"ng-template",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",o.listModules))},directives:[H.sg,H.mk,H.O5],styles:[".sinovad-sidebar-modules-list[_ngcontent-%COMP%]{display:block;padding:10px 10px 10px 20px}.sinovad-sidebar-module-element[_ngcontent-%COMP%]{display:block}.sinovad-sidebar-module-button[_ngcontent-%COMP%]{background-color:transparent;color:#fff;border:none;opacity:.75;width:100%;height:30px;text-align:left;font-size:16px}.sinovad-sidebar-module-button.active[_ngcontent-%COMP%]{color:#007bff}.sinovad-sidebar-module-button[_ngcontent-%COMP%]:hover{opacity:1;color:#fff}.sinovad-sidebar-options-list[_ngcontent-%COMP%]{display:block}.sinovad-sidebar-option-element[_ngcontent-%COMP%]{display:flex;height:40px;align-items:center}.sinovad-sidebar-option-element[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;height:100%;display:flex;align-items:center;opacity:.75;font-size:16px;width:100%;text-decoration:unset;color:#fff}.sinovad-sidebar-option-element[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{color:#007bff}.sinovad-sidebar-option-element[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:1;color:#fff}"]}),h})();function na(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"router-outlet",17),e.NdJ("activate",function(u){return e.CHM(t),e.oxw(2).onActivate(u)}),e.qZA()}}const rc=function(h){return{small:h}},Xg=function(h){return{locked:h}};function ep(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"div",5),e.TgZ(1,"div",null,6),e.TgZ(3,"app-header-desktop",7),e.NdJ("goHome",function(){return e.CHM(t),e.oxw().ShowInitial()})("executeSearch",function(u){return e.CHM(t),e.oxw().onSearchMedia(u)})("toggleSidebar",function(){return e.CHM(t),e.oxw().onClickToggleSidebarButton()})("showSplashScreen",function(){return e.CHM(t),e.oxw().showSplashScreen=!0})("logout",function(){return e.CHM(t),e.oxw().logOut()})("showHomeUser",function(){return e.CHM(t),e.oxw().ShowInitial()})("logout",function(){return e.CHM(t),e.oxw().logOut()}),e.qZA(),e.qZA(),e.TgZ(4,"div",8),e.TgZ(5,"div",null,9),e.TgZ(7,"section",10,11),e.TgZ(9,"app-sidebar-desktop",12),e.NdJ("selectOption",function(u){return e.CHM(t),e.oxw().onClickSidebarOption(u)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"section",13,14),e.YNc(12,na,1,0,"ng-template",15),e.qZA(),e.qZA(),e._UZ(13,"div",null,16),e.qZA()}if(2&h){const t=e.MAs(2),o=e.MAs(6),u=e.MAs(14),p=e.oxw();e.Q6J("ngClass",e.VKq(14,rc,p.isSmallDevice())),e.xp6(4),e.Udp("height","calc(100% - "+(t.offsetHeight+u.offsetHeight)+"px)"),e.xp6(3),e.Udp("width",p.isCollapsedSidebar?"0px":"230px")("height","100%"),e.xp6(2),e.Q6J("unselectSidebarOption",p.unselectSidebarOption)("selectHomeUserOption",p.selectHomeUserOption)("isCollapsedSidebar",p.isCollapsedSidebar),e.xp6(1),e.Udp("width","calc(100% - "+o.offsetWidth+"px)"),e.Q6J("ngClass",e.VKq(16,Xg,p.isSmallDevice()&&!p.isCollapsedSidebar)),e.xp6(2),e.Q6J("ngIf",!p.hideContent)}}function Im(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"div",18),e.TgZ(1,"router-outlet",17),e.NdJ("activate",function(u){return e.CHM(t),e.oxw().onActivate(u)}),e.qZA(),e.qZA()}}function Pf(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"section",19),e.TgZ(1,"app-video",20),e.NdJ("fullscreen",function(){return e.CHM(t),e.oxw().showVideoInFullScreen()})("outputCloseVideo",function(){return e.CHM(t),e.oxw().closeVideo()}),e.qZA(),e.qZA()}if(2&h){const t=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(2,rc,t.isSmallDevice()))("builderVideo",t.sharedData.currentVideo)}}function Vh(h,n){1&h&&e._UZ(0,"app-splash-screen")}function Af(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"div",23),e.NdJ("click",function(u){const C=e.CHM(t).$implicit,F=e.oxw(2);return F.sharedData.contextMenuData.parentPage&&F.sharedData.contextMenuData.parentPage.onClickContextMenuOption(u,C)}),e.TgZ(1,"div",24),e._UZ(2,"img",25),e.ALo(3,"formatDataPipe"),e.qZA(),e.TgZ(4,"div",26),e._uU(5),e.qZA(),e.qZA()}if(2&h){const t=n.$implicit;e.Udp("border-bottom",t.showBorderBottom?"1px solid black":""),e.xp6(2),e.Q6J("src",e.xi3(3,4,t.icon,"GetImageURLByKey"),e.LSH),e.xp6(3),e.hij(" ",t.text," ")}}function ic(h,n){if(1&h&&(e.TgZ(0,"div",21),e.YNc(1,Af,6,7,"ng-template",22),e.qZA()),2&h){const t=e.oxw();e.Udp("top",t.sharedData.contextMenuData.top+"px")("left",t.sharedData.contextMenuData.left+"px"),e.xp6(1),e.Q6J("ngForOf",t.sharedData.contextMenuData.listOptions)}}let Hh=(()=>{class h extends Ie.X{constructor(t,o,u,p,C,F,$,le){super(t,F,$,le),this.restProvider=t,this.route=o,this.router=u,this.ref=p,this.http=C,this.events=F,this.domSanitizer=$,this.sharedData=le,this.toggleVideo=new e.vpe,this.showVideoPopUp=!1,this.showSplashScreen=!1,this.hideContent=!1,this._window=window,this.isCollapsedSidebar=!1,this.selectHomeUserOption=new e.vpe,this.unselectSidebarOption=new e.vpe}showVideoInFullScreen(){this.toggleVideo.emit(!0)}ngOnInit(){}logOut(){null!=this.sharedData.configurationData.currentHost&&this.restProvider.executeSinovadStreamServerService(J.yw.DELETE,"/main/DeleteMediaServerData").then(t=>{},t=>{console.error(t)}),this.sharedData.currentMediaServerData=void 0,this.sharedData.currentProfile=void 0,this.sharedData.userData=void 0,this.sharedData.currentToken=void 0,localStorage.removeItem("apiKey"),this.router.navigate([this.sharedData.platform,"landing"],{skipLocationChange:!1})}toogleMenu(){this.ref.detectChanges()}executeSearch(){}onClickToggleSidebarButton(){this.isCollapsedSidebar=!this.isCollapsedSidebar}onClickSidebarOption(t){this.selectedSidebarOption=t,this[t.method](),this.isSmallDevice()&&(this.isCollapsedSidebar=!0)}refresh(){this.selectedSidebarOption&&this[this.selectedSidebarOption.method](),this.ref.detectChanges()}ShowInitial(){this.hideContent=!0,this.ref.detectChanges(),this.hideContent=!1,this.ref.detectChanges(),this.router.navigate([this.sharedData.platform,"home"],{skipLocationChange:!1})}ShowSeries(){this.hideContent=!0,this.ref.detectChanges(),this.hideContent=!1,this.ref.detectChanges(),this.router.navigate([this.sharedData.platform,"tvseries"],{skipLocationChange:!1})}ShowMovies(){this.hideContent=!0,this.ref.detectChanges(),this.hideContent=!1,this.ref.detectChanges(),this.router.navigate([this.sharedData.platform,"movies"],{skipLocationChange:!1})}ShowSearch(){this.hideContent=!0,this.ref.detectChanges(),this.hideContent=!1,this.router.navigate([this.sharedData.platform,"search"],{skipLocationChange:!1})}onSearchMedia(t){null!=t&&""!=t?(this.unselectSidebarOption.emit(!0),this.hideContent=!0,this.ref.detectChanges(),this.hideContent=!1,this.router.navigate([this.sharedData.platform,"search"],{queryParams:{text:t},skipLocationChange:!1})):this.ShowInitial()}closeVideo(){this.sharedData.currentVideo=void 0,this.ShowInitial(),this.toggleVideo.emit(!1)}ShowStorage(){this.hideContent=!0,this.ref.detectChanges(),this.hideContent=!1,this.router.navigate([this.sharedData.platform,"storage"],{skipLocationChange:!1})}ShowTranscoderSettingss(){this.hideContent=!0,this.ref.detectChanges(),this.hideContent=!1,this.router.navigate([this.sharedData.platform,"transcoding"],{skipLocationChange:!1})}ShowManagementMovies(){this.title="Pel\xedculas",this.currentMediaTypeID=J.DD.Movie,this.showItemList()}ShowManagementTvSeries(){this.title="Series de TV",this.currentMediaTypeID=J.DD.TvSerie,this.showItemList()}showItemList(){this.hideContent=!0,this.ref.detectChanges(),this.hideContent=!1,this.router.navigate([this.sharedData.platform,"management-items"],{skipLocationChange:!1})}onActivate(t){let o=this;(t instanceof Xt||t instanceof jn||t instanceof Bn||t instanceof Qe||t instanceof Lt)&&t.toggleVideo.subscribe(u=>{o.toggleVideo.emit(u)}),t instanceof Dt&&(t.selectProfile.subscribe(u=>{o.sharedData.currentProfile=u,o.router.navigate([this.sharedData.platform,"home"],{skipLocationChange:!1})}),t.loadedProfiles.subscribe(u=>{o.showSplashScreen=!1})),t instanceof Jn&&t.showSplashScreen.subscribe(u=>{o.showSplashScreen=!0}),t instanceof _f&&(t.currentMediaTypeID=o.currentMediaTypeID,t.title=this.title,o.ref.detectChanges()),t instanceof nc&&t.showInitial.subscribe(u=>{o.ShowInitial()})}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(Re.C),e.Y36(R.gz),e.Y36(R.F0),e.Y36(e.sBO),e.Y36(S.eN),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(ke.g))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-root-desktop"]],outputs:{toggleVideo:"toggleVideo"},features:[e.qOj],decls:5,vars:5,consts:[["class","sinovad-page-container",3,"ngClass",4,"ngIf"],["class","sinovad-page-container",4,"ngIf"],["class","sinovad-container-video",4,"ngIf"],[4,"ngIf"],["class","sinovad-context-menu-item-list",3,"top","left",4,"ngIf"],[1,"sinovad-page-container",3,"ngClass"],["header",""],[3,"goHome","executeSearch","toggleSidebar","showSplashScreen","logout","showHomeUser"],[1,"sinovad-menu-body-container"],["menu",""],["id","menuContainer","tabindex","0",1,"sinovad-menu-container"],["menuContainer",""],[3,"unselectSidebarOption","selectHomeUserOption","isCollapsedSidebar","selectOption"],["id","bodyContainer","tabindex","0",1,"sinovad-body-container",3,"ngClass"],["principalContainer",""],[3,"ngIf"],["footer",""],[1,"small",3,"activate"],[1,"sinovad-page-container"],[1,"sinovad-container-video"],[3,"ngClass","builderVideo","fullscreen","outputCloseVideo"],[1,"sinovad-context-menu-item-list"],["ngFor","",3,"ngForOf"],[1,"sinovad-context-menu-option",3,"click"],[1,"sinovad-context-menu-option-icon"],[2,"width","24px",3,"src"],[1,"sinovad-context-menu-option-text"]],template:function(t,o){1&t&&(e.YNc(0,ep,15,18,"div",0),e.YNc(1,Im,2,0,"div",1),e.YNc(2,Pf,2,4,"section",2),e.YNc(3,Vh,1,0,"app-splash-screen",3),e.YNc(4,ic,2,5,"div",4)),2&t&&(e.Q6J("ngIf",null!=o.sharedData.currentToken&&null!=o.sharedData.userData),e.xp6(1),e.Q6J("ngIf",null==o.sharedData.currentToken&&null==o.sharedData.userData),e.xp6(1),e.Q6J("ngIf",o.sharedData.currentVideo),e.xp6(1),e.Q6J("ngIf",o.showSplashScreen),e.xp6(1),e.Q6J("ngIf",o.sharedData.contextMenuData))},directives:[H.O5,H.mk,Jg,jh,R.lC,cn,En,H.sg],pipes:[X.A],styles:["[_nghost-%COMP%]{position:absolute;width:100%;height:100%}button[_ngcontent-%COMP%]{outline:none!important;cursor:pointer!important;box-sizing:border-box!important}.sinovad-module-container[_ngcontent-%COMP%]{border-top:1px solid #dedede}.sinovad-container-video[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;z-index:1054;display:flex;align-items:center;justify-content:center;background:black;top:0;left:0}.sinovad-page-container[_ngcontent-%COMP%]{display:block;position:absolute;width:100%;height:100%}.sinovad-header-container[_ngcontent-%COMP%]{height:60px;background:rgba(0,0,0,.15)}.sinovad-menu-body-container[_ngcontent-%COMP%]{display:flex;width:100%;height:100%}.sinovad-menu-container[_ngcontent-%COMP%]{width:230px;display:block;background:black;overflow-y:auto}.sinovad-body-container[_ngcontent-%COMP%]{display:block;height:100%}.sinovad-context-menu-item-list[_ngcontent-%COMP%]{position:absolute;z-index:999999999;background-color:#dcd8bb;border:1px solid black;border-radius:5px}.sinovad-context-menu-option[_ngcontent-%COMP%]{display:flex;padding:10px;cursor:pointer;color:#000;align-items:center}.sinovad-context-menu-option[_ngcontent-%COMP%]:hover{color:#00f}.sinovad-context-menu-option-icon[_ngcontent-%COMP%]{display:block}.sinovad-context-menu-option-text[_ngcontent-%COMP%]{padding-left:10px;display:block}.small[_ngcontent-%COMP%]   .sinovad-menu-container[_ngcontent-%COMP%]{position:absolute;z-index:6}.sinovad-body-container.locked[_ngcontent-%COMP%]{pointer-events:none}"]}),h})();const If=["mainContainer"],Gh=["initialSound"];function Kh(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"app-root-desktop",3),e.NdJ("toggleVideo",function(u){return e.CHM(t),e.oxw().executeToggleVideo(u)}),e.qZA()}}const Wh=function(h){return{small:h}};let tp=(()=>{class h extends Ie.X{constructor(t,o,u,p,C,F,$){super(o,C,F,$),this.router=t,this.restProvider=o,this.ref=u,this.http=p,this.events=C,this.domSanitizer=F,this.sharedData=$,this.togglevideo=new e.vpe,this.instance=new e.vpe,this.showRootPage=!1}ngOnInit(){window.configurationData&&(this.sharedData.configurationData=window.configurationData),this.sharedData.platform="desktop",localStorage.getItem("apiKey")?(this.sharedData.currentToken=localStorage.getItem("apiKey"),this.getUser().then(t=>{this.getProfiles().then(o=>{this.showRootPage=!0,window.location.pathname.startsWith("/desktop/")?this.router.navigateByUrl(window.location.pathname).then(u=>{},u=>{this.router.navigateByUrl("/desktop/404")}):this.router.navigateByUrl("/desktop/home")},o=>{console.error(o)})},t=>{console.error(t)}),this.ref.detectChanges()):(this.sharedData.currentToken=void 0,setTimeout(()=>{this.showRootPage=!0,window.location.pathname.startsWith("/desktop/")?this.router.navigateByUrl(window.location.pathname).then(t=>{},t=>{this.router.navigateByUrl("/desktop/landing")}):this.router.navigateByUrl("/desktop/landing")},100))}ngAfterViewInit(){setTimeout(()=>{this.instance.emit(this)},250);let t=this;window.addEventListener("click",function(p){t.sharedData.configurationData.alwaysFullScreen&&t.showPageInFullScreen()})}showPageInFullScreen(){if(!document.fullscreenElement){var t=this.mainContainer.nativeElement;t.requestFullScreen?t.requestFullScreen():t.webkitRequestFullScreen?t.webkitRequestFullScreen():t.mozRequestFullScreen(),this.mainContainer.nativeElement.click(),this.ref.detectChanges()}}executeToggleVideo(t){this.togglevideo.emit(t),t?this.showPageInFullScreen():this.sharedData.configurationData.alwaysFullScreen||document.fullscreenElement&&document.exitFullscreen()}onActivate(t){let o=this;t instanceof Hh&&t.toggleVideo.subscribe(u=>{o.executeToggleVideo(u)})}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(R.F0),e.Y36(Re.C),e.Y36(e.sBO),e.Y36(S.eN),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(ke.g))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-sinovad-desktop"]],viewQuery:function(t,o){if(1&t&&(e.Gf(If,5),e.Gf(Gh,7)),2&t){let u;e.iGM(u=e.CRH())&&(o.mainContainer=u.first),e.iGM(u=e.CRH())&&(o.initialSound=u.first)}},outputs:{togglevideo:"togglevideo",instance:"instance"},features:[e.qOj],decls:3,vars:4,consts:[["id","sinovadMainContainer",1,"sinovad-main-container",3,"ngClass"],["mainContainer",""],[3,"toggleVideo",4,"ngIf"],[3,"toggleVideo"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0,1),e.YNc(2,Kh,1,0,"app-root-desktop",2),e.qZA()),2&t&&(e.Q6J("ngClass",e.VKq(2,Wh,o.isSmallDevice())),e.xp6(2),e.Q6J("ngIf",o.showRootPage))},directives:[H.mk,H.O5,Hh],styles:["[_nghost-%COMP%]{position:absolute;width:100%;height:100%;background:#1F212B;overflow-y:hidden}.sinovad-main-container[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:#1F212B;overflow-y:hidden}"]}),h})();var Of=O(5905);function np(h,n){if(1&h&&(e.TgZ(0,"div",9),e._uU(1),e.qZA(),e.TgZ(2,"div",10),e._uU(3),e.qZA()),2&h){const t=e.oxw();e.xp6(1),e.hij(" ",t.getInitials(t.sharedData.currentProfile)," "),e.xp6(2),e.hij(" ",t.sharedData.currentProfile.FullName," ")}}const rp=function(h){return{selected:h}};function Yh(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"button",12,2),e.NdJ("click",function(){const p=e.CHM(t).$implicit;return e.oxw(2).onClickMenuOption(p)}),e._UZ(2,"i"),e.TgZ(3,"span",13),e._uU(4),e.qZA(),e.qZA()}if(2&h){const t=n.$implicit,o=e.oxw(2);e.MGl("id","menu_button_",t.index,""),e.Q6J("ngClass",e.VKq(6,rp,o.selectedMenuOption&&t.index==o.selectedMenuOption.index)),e.xp6(2),e.Tol(t.iconClass),e.xp6(2),e.Oqu(t.name)}}function gu(h,n){if(1&h&&(e.TgZ(0,"div",11),e.YNc(1,Yh,5,8,"ng-template",4),e.qZA()),2&h){const t=n.$implicit;e.xp6(1),e.Q6J("ngForOf",t.listOptions)}}const Zh=function(h){return{small:h}};function ip(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"app-profiles-view",14),e.NdJ("showProfiles",function(){return e.CHM(t),e.oxw().showProfiles.emit(!0)})("selectProfile",function(u){return e.CHM(t),e.oxw().onSelectProfile(u)}),e.qZA()}if(2&h){const t=e.oxw();e.Q6J("ngClass",e.VKq(1,Zh,t.isSmallDevice()))}}let op=(()=>{class h extends Ie.X{constructor(t,o,u,p,C,F){super(o,p,C,F),this.ref=t,this.restProvider=o,this.http=u,this.events=p,this.domSanitizer=C,this.sharedData=F,this.showProfiles=new e.vpe,this.selectOption=new e.vpe,this.listModules=[],this.showProfilesView=!1,this.allModules=[{index:1,order:1,listOptions:[{index:1,name:"Inicio",method:"ShowInitial",iconClass:"fa-solid fa-house"},{index:2,name:"Pel\xedculas",method:"ShowMovies",iconClass:"fa-solid fa-film"},{index:3,name:"Series",method:"ShowSeries",iconClass:"fa-solid fa-tv"},{index:4,name:"B\xfasqueda",method:"ShowSearch",iconClass:"fa-solid fa-magnifying-glass"},{index:5,name:"Cerrar Sesi\xf3n",method:"logOut",iconClass:"fa-solid fa-right-from-bracket"}]}]}ngOnInit(){this.listModules=this.allModules,this.showProfilesView=!0}onClickAvatarButton(){this.showProfilesView=!0}onClickMenuOption(t){this.selectedMenuOption=t,this.selectOption.emit(this.selectedMenuOption)}onSelectProfile(t){this.sharedData.currentProfile=t,this.selectedMenuOption=this.listModules[0].listOptions[0],this.selectOption.emit(this.selectedMenuOption),this.showProfilesView=!1}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(e.sBO),e.Y36(Re.C),e.Y36(S.eN),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(ke.g))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-sidebar-tv"]],outputs:{showProfiles:"showProfiles",selectOption:"selectOption"},features:[e.qOj],decls:11,vars:7,consts:[[1,"sinovad-avatar-container"],["id","avatar_button",1,"sinovad-avatar-button",3,"click"],["button",""],[3,"ngIf"],["ngFor","",3,"ngForOf"],[1,"sinovad-icon-container"],[1,"sinovad-icon-content"],[3,"src"],[3,"ngClass","showProfiles","selectProfile",4,"ngIf"],[1,"sinovad-intials-profile"],[1,"sinovad-fullname-profile"],[1,"sinovad-module-container"],[1,"sinovad-menu-button",3,"id","ngClass","click"],[1,"ms-2"],[3,"ngClass","showProfiles","selectProfile"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"button",1,2),e.NdJ("click",function(){return o.onClickAvatarButton()}),e.YNc(3,np,4,2,"ng-template",3),e.qZA(),e.qZA(),e.YNc(4,gu,2,1,"ng-template",4),e.TgZ(5,"div",5),e.TgZ(6,"div",6),e.TgZ(7,"div"),e._UZ(8,"img",7),e.ALo(9,"formatDataPipe"),e.qZA(),e.qZA(),e.qZA(),e.YNc(10,ip,1,3,"app-profiles-view",8)),2&t&&(e.xp6(3),e.Q6J("ngIf",o.sharedData.currentProfile),e.xp6(1),e.Q6J("ngForOf",o.listModules),e.xp6(4),e.Q6J("src",e.xi3(9,4,"sinovad-logo.png","GetImageURLByKey"),e.LSH),e.xp6(2),e.Q6J("ngIf",o.showProfilesView))},directives:[H.O5,H.sg,H.mk,Dt],pipes:[X.A],styles:[".sinovad-avatar-container[_ngcontent-%COMP%]{padding:20px}.sinovad-icon-container[_ngcontent-%COMP%]{padding:10px;display:flex;align-items:center;justify-content:center}.sinovad-icon-content[_ngcontent-%COMP%]{display:block;text-align:center}.sinovad-icon-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:160px}button[_ngcontent-%COMP%]{outline:none!important;cursor:pointer!important;box-sizing:border-box!important}.sinovad-module-container[_ngcontent-%COMP%]{border-top:1px solid #dedede}.sinovad-avatar-button[_ngcontent-%COMP%]{display:block;padding-bottom:10px;padding-left:0;background:transparent;border:none;cursor:pointer;color:#fff;opacity:.7;display:flex;align-items:center}.sinovad-avatar-button[_ngcontent-%COMP%]   .sinovad-intials-profile[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:25px;border:1px solid white;display:flex;align-items:center;justify-content:center;font-size:30px}.sinovad-avatar-button[_ngcontent-%COMP%]   .sinovad-fullname-profile[_ngcontent-%COMP%]{display:block;margin-left:10px;font-size:20px}.sinovad-avatar-button[_ngcontent-%COMP%]:hover{color:#fff;opacity:1}.sinovad-avatar-button[_ngcontent-%COMP%]:hover   .sinovad-intials-profile[_ngcontent-%COMP%]{border-color:#fff;border:2px solid white}.sinovad-avatar-button[_ngcontent-%COMP%]:focus-visible{color:#fff;opacity:1}.sinovad-avatar-button[_ngcontent-%COMP%]:focus-visible   .sinovad-intials-profile[_ngcontent-%COMP%]{border-color:#fff;border:2px solid white}.sinovad-avatar-button[_ngcontent-%COMP%]:focus{color:#fff!important;opacity:1}.sinovad-avatar-button[_ngcontent-%COMP%]:focus   .sinovad-intials-profile[_ngcontent-%COMP%]{border-color:#fff!important;border:2px solid white}.sinovad-menu-button[_ngcontent-%COMP%]{display:block;background:transparent;color:#fff;border:none;padding:10px 10px 10px 20px;cursor:pointer;font-size:18px;width:100%;text-align:left;opacity:.7}.sinovad-menu-button.selected[_ngcontent-%COMP%]{color:#007bff;opacity:1}.sinovad-menu-button[_ngcontent-%COMP%]:focus-visible{color:#fff;opacity:1}.sinovad-menu-button[_ngcontent-%COMP%]:focus{color:#fff;opacity:1}.sinovad-menu-button[_ngcontent-%COMP%]:hover{color:#fff;opacity:1}.sinovad-container-video[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;z-index:1054;display:flex;align-items:center;justify-content:center;background:black;top:0;left:0}.sinovad-page-container[_ngcontent-%COMP%]{display:block;position:absolute;width:100%;height:100%}.sinovad-header-container[_ngcontent-%COMP%]{height:60px;background:rgba(0,0,0,.15)}.sinovad-menu-body-container[_ngcontent-%COMP%]{display:flex;width:100%;height:100%}.sinovad-menu-container[_ngcontent-%COMP%]{width:200px;display:block;background:black;overflow-y:auto}.sinovad-body-container[_ngcontent-%COMP%]{display:block;height:100%}.small[_ngcontent-%COMP%]   .sinovad-body-container[_ngcontent-%COMP%]{width:100%!important}.small[_ngcontent-%COMP%]   .sinovad-menu-container[_ngcontent-%COMP%]{position:absolute;z-index:999}.sinovad-context-menu-item-list[_ngcontent-%COMP%]{position:absolute;z-index:999999999;background-color:#dcd8bb;border:1px solid black;border-radius:5px}.sinovad-context-menu-option[_ngcontent-%COMP%]{display:flex;padding:10px;cursor:pointer;color:#000;align-items:center}.sinovad-context-menu-option[_ngcontent-%COMP%]:hover{color:#00f}.sinovad-context-menu-option-icon[_ngcontent-%COMP%]{display:block}.sinovad-context-menu-option-text[_ngcontent-%COMP%]{padding-left:10px;display:block}"]}),h})();const pu=["menuContainer"],sp=["principalContainer"];function ap(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"app-sidebar-tv",12),e.NdJ("showProfiles",function(){return e.CHM(t),e.oxw().showSplashScreen=!1})("selectOption",function(u){return e.CHM(t),e.oxw().onClickMenuOption(u)}),e.qZA()}}function lp(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"router-outlet",13),e.NdJ("activate",function(u){return e.CHM(t),e.oxw().onActivate(u)}),e.qZA()}}const up=function(h){return{small:h}};function hs(h,n){if(1&h){const t=e.EpF();e.TgZ(0,"section",14),e.TgZ(1,"app-video",15),e.NdJ("fullscreen",function(){return e.CHM(t),e.oxw().showVideoInFullScreen()})("outputCloseVideo",function(){return e.CHM(t),e.oxw().closeVideo()}),e.qZA(),e.qZA()}if(2&h){const t=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(2,up,t.isSmallDevice()))("builderVideo",t.sharedData.currentVideo)}}function xf(h,n){1&h&&e._UZ(0,"app-splash-screen")}let wf=(()=>{class h extends Ie.X{constructor(t,o,u,p,C,F,$,le){super(t,F,$,le),this.restProvider=t,this.route=o,this.router=u,this.ref=p,this.http=C,this.events=F,this.domSanitizer=$,this.sharedData=le,this.fullScreen=new e.vpe,this.toggleVideo=new e.vpe,this.showVideoPopUp=!1,this.showSplashScreen=!0,this.hideContent=!1,this._window=window}showVideoInFullScreen(){this.fullScreen.emit(!0)}ngOnInit(){this.sharedData.currentToken=localStorage.getItem("apiKey"),this.getUser().then(t=>{},t=>{console.error(t)})}ngAfterViewInit(){let t=this;this.customKeyboardEventVerticalContainer=function(u){t.setKeyboardActionsInButtonsVerticalContainer(u)},this.customKeyboardEventVerticalHorizontalContainer=function(u){t.setKeyboardActionsSectionVerticalButtonsHorizontal(u,t.principalContainer,t.menuContainer,t.ref)},this.menuContainer.nativeElement.addEventListener("keydown",this.customKeyboardEventVerticalContainer),this.principalContainer.nativeElement.addEventListener("keydown",this.customKeyboardEventVerticalHorizontalContainer)}logOut(){null!=this.sharedData.configurationData.currentHost&&this.restProvider.executeSinovadStreamServerService(J.yw.DELETE,"/main/DeleteMediaServerData").then(t=>{},t=>{console.error(t)}),this.sharedData.currentMediaServerData=void 0,this.sharedData.currentProfile=void 0,this.sharedData.userData=void 0,this.sharedData.currentToken=void 0,localStorage.removeItem("apiKey"),this.router.navigate([{outlets:{rostp:["logintv"]}}],{skipLocationChange:!1})}onClickHeader(t){}onClickBody(){this.focusContainer(this.principalContainer.nativeElement,this.ref)}toogleMenu(){this.ref.detectChanges()}setKeyboardActionsInButtonsVerticalContainer(t){var o=t.keyCode;let u=Array.from(this.menuContainer.nativeElement.getElementsByTagName("button")),p=u.length,C=u.findIndex(F=>F.id==this.sharedData.currentSelectedElement.id);if(39==o){let $=Array.from(this.principalContainer.nativeElement.querySelectorAll("section"))[0];this.sharedData.currentActiveSection=$;let Se=Array.from($.querySelectorAll("button"))[0];this.sharedData.currentSelectedElement=Se,Se.focus()}if(40==o){let F=C+1;if(F<p){let $=u[F];$.focus(),this.sharedData.currentSelectedElement=$,this.ref.detectChanges()}}if(38==o){let F=C-1;if(F>=0){let $=u[F];$.focus(),this.sharedData.currentSelectedElement=$,this.ref.detectChanges()}else{let $=Array.from(document.getElementsByTagName("header"));if($&&$.length>0){let le=$[0],Se=Array.from(le.querySelectorAll("input, button"));if(Se&&Se.length>0){this.sharedData.currentActiveSection=le;let Le=Se[0];this.sharedData.currentSelectedElement=Le,Le.focus()}}}}}onClickMenuOption(t){this.selectedMenuOption=t,this[t.method]()}refresh(){this.selectedMenuOption&&this[this.selectedMenuOption.method](),this.ref.detectChanges()}ShowSeries(){this.itemViewData=void 0,this.title="Series de TV",this.currentMediaTypeID=J.DD.TvSerie,this.showHorizontalItemList()}ShowMovies(){this.itemViewData=void 0,this.title="Pel\xedculas",this.currentMediaTypeID=J.DD.Movie,this.showHorizontalItemList()}ShowSearch(){this.itemViewData=void 0,this.title=void 0,this.currentMediaTypeID=void 0,this.showVerticalItemList()}ShowInitial(){this.title=void 0,this.itemViewData=void 0,this.currentMediaTypeID=void 0,this.showHorizontalItemList()}closeVideo(){this.sharedData.currentVideo=void 0,this.showHorizontalItemList(),this.toggleVideo.emit(!1)}showHorizontalItemList(){this.hideContent=!0,this.ref.detectChanges(),this.hideContent=!1,this.ref.detectChanges(),this.router.navigate([{outlets:{rohtp:["hilp"]}}],{relativeTo:this.route,skipLocationChange:!0})}showVerticalItemList(){this.hideContent=!0,this.ref.detectChanges(),this.hideContent=!1,this.router.navigate([{outlets:{rohtp:["svtp"]}}],{relativeTo:this.route,skipLocationChange:!0})}showItemView(){this.hideContent=!0,this.ref.detectChanges(),this.hideContent=!1,this.router.navigate([{outlets:{rohtp:["ivp"]}}],{relativeTo:this.route,skipLocationChange:!0})}onActivate(t){let o=this;t instanceof $t.j&&(t.currentMediaTypeID=this.currentMediaTypeID,t.title=this.title,t.toggleVideo.subscribe(u=>{o.toggleVideo.emit(u)}),t.focus.subscribe(u=>{this.focusInElementInContainer(o.principalContainer.nativeElement,o.ref)}),t.showItemView.subscribe(u=>{o.itemViewData=u,o.showItemView()})),t instanceof Of.c&&t.showItemView.subscribe(u=>{o.itemViewData=u,o.showItemView()}),t instanceof Vn.e&&(t.detail=o.itemViewData,t.toggleVideo.subscribe(u=>{o.toggleVideo.emit(u)}),o.ref.detectChanges(),o.focusInElementInContainer(this.principalContainer.nativeElement,this.ref))}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(Re.C),e.Y36(R.gz),e.Y36(R.F0),e.Y36(e.sBO),e.Y36(S.eN),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(ke.g))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-main-tv"]],viewQuery:function(t,o){if(1&t&&(e.Gf(pu,5),e.Gf(sp,5)),2&t){let u;e.iGM(u=e.CRH())&&(o.menuContainer=u.first),e.iGM(u=e.CRH())&&(o.principalContainer=u.first)}},outputs:{fullScreen:"fullScreen",toggleVideo:"toggleVideo"},features:[e.qOj],decls:13,vars:10,consts:[[1,"sinovad-page-container"],[1,"sinovad-menu-body-container"],["menuBodyContainer",""],["menu",""],["id","menuContainer","tabindex","0",1,"sinovad-menu-container",3,"click"],["menuContainer",""],[3,"showProfiles","selectOption",4,"ngIf"],["id","bodyContainer","tabindex","0",1,"sinovad-body-container",3,"click"],["principalContainer",""],[3,"ngIf"],["class","sinovad-container-video",4,"ngIf"],[4,"ngIf"],[3,"showProfiles","selectOption"],["name","rohtp",1,"small",3,"activate"],[1,"sinovad-container-video"],[3,"ngClass","builderVideo","fullscreen","outputCloseVideo"]],template:function(t,o){if(1&t){const u=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1,2),e.TgZ(3,"div",null,3),e.TgZ(5,"section",4,5),e.NdJ("click",function(){e.CHM(u);const C=e.MAs(6);return o.focusContainer(C,o.ref)}),e.YNc(7,ap,1,0,"app-sidebar-tv",6),e.qZA(),e.qZA(),e.TgZ(8,"section",7,8),e.NdJ("click",function(){return o.onClickBody()}),e.YNc(10,lp,1,0,"ng-template",9),e.qZA(),e.qZA(),e.qZA(),e.YNc(11,hs,2,4,"section",10),e.YNc(12,xf,1,0,"app-splash-screen",11)}if(2&t){const u=e.MAs(4);e.xp6(1),e.Udp("height","100%"),e.xp6(4),e.Udp("height","100%"),e.xp6(2),e.Q6J("ngIf",o.sharedData.userData),e.xp6(1),e.Udp("width","calc(100% - "+u.offsetWidth+"px)"),e.xp6(2),e.Q6J("ngIf",!o.hideContent),e.xp6(1),e.Q6J("ngIf",o.sharedData.currentVideo),e.xp6(1),e.Q6J("ngIf",o.showSplashScreen)}},directives:[H.O5,op,R.lC,cn,H.mk,En],styles:["[_nghost-%COMP%]{position:absolute;width:100%;height:100%}button[_ngcontent-%COMP%]{outline:none!important;cursor:pointer!important;box-sizing:border-box!important}.sinovad-module-container[_ngcontent-%COMP%]{border-top:1px solid #dedede}.sinovad-container-video[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;z-index:1054;display:flex;align-items:center;justify-content:center;background:black;top:0;left:0}.sinovad-page-container[_ngcontent-%COMP%]{display:block;position:absolute;width:100%;height:100%}.sinovad-header-container[_ngcontent-%COMP%]{height:60px;background:rgba(0,0,0,.15)}.sinovad-menu-body-container[_ngcontent-%COMP%]{display:flex;width:100%;height:100%}.sinovad-menu-container[_ngcontent-%COMP%]{width:200px;display:block;background:black;overflow-y:auto}.sinovad-body-container[_ngcontent-%COMP%]{display:block;height:100%}.small[_ngcontent-%COMP%]   .sinovad-body-container[_ngcontent-%COMP%]{width:100%!important}.small[_ngcontent-%COMP%]   .sinovad-menu-container[_ngcontent-%COMP%]{position:absolute;z-index:999}.sinovad-context-menu-item-list[_ngcontent-%COMP%]{position:absolute;z-index:999999999;background-color:#dcd8bb;border:1px solid black;border-radius:5px}.sinovad-context-menu-option[_ngcontent-%COMP%]{display:flex;padding:10px;cursor:pointer;color:#000;align-items:center}.sinovad-context-menu-option[_ngcontent-%COMP%]:hover{color:#00f}.sinovad-context-menu-option-icon[_ngcontent-%COMP%]{display:block}.sinovad-context-menu-option-text[_ngcontent-%COMP%]{padding-left:10px;display:block}"]}),h})();const $h=["loginFormContainer"];function zh(h,n){1&h&&(e.TgZ(0,"div",17),e.TgZ(1,"div",18),e._UZ(2,"div"),e._UZ(3,"div"),e._UZ(4,"div"),e._UZ(5,"div"),e._UZ(6,"div"),e._UZ(7,"div"),e._UZ(8,"div"),e._UZ(9,"div"),e._UZ(10,"div"),e._UZ(11,"div"),e._UZ(12,"div"),e._UZ(13,"div"),e.qZA(),e.qZA())}const qh=function(h){return{small:h}},cp=[{path:"maintv",component:wf,outlet:"rostp",loadChildren:()=>O.e(634).then(O.bind(O,4634)).then(h=>h.MainTvPageModule)},{path:"logintv",outlet:"rostp",component:(()=>{class h extends Ie.X{constructor(t,o,u,p,C,F,$){super(o,C,F,$),this.router=t,this.restProvider=o,this.ref=u,this.http=p,this.events=C,this.domSanitizer=F,this.sharedData=$,this._window=window,this.showLoading=!1,this.user=new on}ngOnInit(){}ngOnDestroy(){this.loginFormContainer.nativeElement.removeEventListener("keydown",this.customKeyboardControlsEvent)}ngAfterViewInit(){this.initializeLoginViewControls()}initializeLoginViewControls(){this.customKeyboardControlsEvent&&this.loginFormContainer.nativeElement.removeEventListener("keydown",this.customKeyboardControlsEvent),this.focusFullScreenContainer(this.loginFormContainer.nativeElement,this.ref);let t=this;this.customKeyboardControlsEvent=function(u){t.setKeyboardActionsFullScreenPage(u,t.loginFormContainer.nativeElement,t.ref)},this.loginFormContainer.nativeElement.addEventListener("keydown",this.customKeyboardControlsEvent)}login(){this.showLoading=!0,this.restProvider.executeSinovadApiService(J.yw.POST,"/users/Login",this.user).then(t=>{localStorage.setItem("apiKey",t.Data),this.router.navigate([{outlets:{rostp:["maintv"]}}],{skipLocationChange:!1})},t=>{this.showLoading=!1,this.errorMessage=t,console.error(t)})}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(R.F0),e.Y36(Re.C),e.Y36(e.sBO),e.Y36(S.eN),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(ke.g))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-login-tv"]],viewQuery:function(t,o){if(1&t&&e.Gf($h,5),2&t){let u;e.iGM(u=e.CRH())&&(o.loginFormContainer=u.first)}},features:[e.qOj],decls:28,vars:7,consts:[["id","sinovad-form-container","tabindex","0",1,"sinovad-sinovad-form-container",3,"ngClass"],["loginFormContainer",""],[1,"sinovad-login-form-content"],[1,"sinovad-login-title-container"],["id","sinovad-form-container-UserName-section","tabindex","0",1,"sinovad-login-form-caption-input-container"],[1,"sinovad-form-caption-input-content"],[1,"sinovad-login-form-caption-container"],[1,"sinovad-form-textinput-container"],["id","UserName-input","type","text",3,"ngModel","ngModelChange"],["UserName",""],["id","sinovad-form-container-password-section","tabindex","0",1,"sinovad-login-form-caption-input-container"],["id","password-input","type","password",3,"ngModel","ngModelChange"],["password",""],["id","sinovad-form-container-button-section","tabindex","0",1,"sinovad-login-form-button-section"],["id","log-in-button",1,"sinovad-btn-enter",3,"click"],[1,"sinovad-login-form-error-message-container"],["class","sinovad-spinner-container",4,"ngIf"],[1,"sinovad-spinner-container"],[1,"lds-spinner"]],template:function(t,o){1&t&&(e.TgZ(0,"section",0,1),e.TgZ(2,"div",2),e.TgZ(3,"div"),e.TgZ(4,"div",3),e._uU(5," Inicia sesi\xf3n "),e.qZA(),e.TgZ(6,"section",4),e.TgZ(7,"div",5),e.TgZ(8,"div",6),e.TgZ(9,"span"),e._uU(10," Usuario "),e.qZA(),e.qZA(),e.TgZ(11,"div",7),e.TgZ(12,"input",8,9),e.NdJ("ngModelChange",function(p){return o.user.UserName=p}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"section",10),e.TgZ(15,"div",5),e.TgZ(16,"div",6),e.TgZ(17,"span"),e._uU(18," Contrase\xf1a "),e.qZA(),e.qZA(),e.TgZ(19,"div",7),e.TgZ(20,"input",11,12),e.NdJ("ngModelChange",function(p){return o.user.Password=p}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(22,"section",13),e.TgZ(23,"button",14),e.NdJ("click",function(){return o.login()}),e._uU(24,"INGRESAR"),e.qZA(),e.qZA(),e.TgZ(25,"div",15),e._uU(26),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(27,zh,14,0,"div",16)),2&t&&(e.Q6J("ngClass",e.VKq(5,qh,o.isSmallDevice())),e.xp6(12),e.Q6J("ngModel",o.user.UserName),e.xp6(8),e.Q6J("ngModel",o.user.Password),e.xp6(6),e.hij(" ",o.errorMessage," "),e.xp6(1),e.Q6J("ngIf",o.showLoading))},directives:[H.mk,ne.Fj,ne.JJ,ne.On,H.O5],styles:['[_nghost-%COMP%]{position:absolute;width:100%;height:100%;background:black}button[_ngcontent-%COMP%]{outline:none!important;cursor:pointer!important;box-sizing:border-box!important}.sinovad-sinovad-form-container[_ngcontent-%COMP%]{width:100%;height:100%;color:#fff;position:absolute;align-items:center;justify-content:center;display:flex}.sinovad-login-form-back-button[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:60px;padding:10px 15px;cursor:pointer;height:60px;display:flex;align-items:center;justify-content:center}.sinovad-login-form-back-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:unset;width:100%;height:100%}.sinovad-login-form-content[_ngcontent-%COMP%]{color:#fff;padding:40px}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]{height:80px;display:flex;align-items:center;justify-content:center}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;width:100%;cursor:pointer;padding:10px;text-align:center;border-radius:5px;font-size:30px;opacity:.8}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]   .sinovad-btn-enter[_ngcontent-%COMP%]{background-color:#ba2302;color:#fff}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]   .sinovad-btn-recover[_ngcontent-%COMP%]{background-color:#2e303d;color:#fff}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1;padding:12px}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible{opacity:1;padding:12px}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{opacity:1;padding:12px}.sinovad-login-title-container[_ngcontent-%COMP%]{width:100%;text-align:center;font-size:40px;font-weight:700;margin-bottom:20px}.sinovad-login-form-caption-input-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;margin-bottom:20px}.sinovad-form-caption-input-content[_ngcontent-%COMP%]{width:100%}.sinovad-login-form-caption-container[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:30px;margin-bottom:4px}.sinovad-form-textinput-container[_ngcontent-%COMP%]{display:block;color:#000}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border-radius:5px;padding:10px;color:#fff;outline:none;background:lightslategrey;border:none;font-size:30px;opacity:.8;border:2px solid transparent}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:#fff}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#fff}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover{opacity:1;border:2px solid white}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus-visible{opacity:1;border:2px solid white}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{opacity:1;border:2px solid white}.small[_ngcontent-%COMP%]   .sinovad-login-form-content[_ngcontent-%COMP%]{width:100%;height:100%;padding-top:170px}.small[_ngcontent-%COMP%]   .sinovad-login-form-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:unset}.small[_ngcontent-%COMP%]   .sinovad-login-title-container[_ngcontent-%COMP%]{font-size:20px}.small[_ngcontent-%COMP%]   .sinovad-login-form-caption-container[_ngcontent-%COMP%]{font-size:unset}.small[_ngcontent-%COMP%]   .sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:35px;font-size:unset}.sinovad-login-form-button-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:50px}.sinovad-login-form-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:30px;border:1px solid #dedede;border-radius:5px;padding-left:10px;padding-right:10px}.sinovad-login-form-error-message-container[_ngcontent-%COMP%]{color:red;text-align:center;font-size:17px;white-space:pre-line}.sinovad-spinner-container[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;top:0;left:0;display:flex;align-items:center;z-index:999;justify-content:center;background:rgba(0,0,0,.5)}.lds-spinner[_ngcontent-%COMP%]{color:official;display:inline-block;position:relative;width:80px;height:80px}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transform-origin:40px 40px;animation:lds-spinner 1.2s linear infinite}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after{content:" ";display:block;position:absolute;top:3px;left:37px;width:6px;height:18px;border-radius:20%;background:#fff}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){transform:rotate(0);animation-delay:-1.1s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){transform:rotate(30deg);animation-delay:-1s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){transform:rotate(60deg);animation-delay:-.9s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){transform:rotate(90deg);animation-delay:-.8s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(5){transform:rotate(120deg);animation-delay:-.7s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(6){transform:rotate(150deg);animation-delay:-.6s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(7){transform:rotate(180deg);animation-delay:-.5s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(8){transform:rotate(210deg);animation-delay:-.4s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(9){transform:rotate(240deg);animation-delay:-.3s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(10){transform:rotate(270deg);animation-delay:-.2s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(11){transform:rotate(300deg);animation-delay:-.1s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(12){transform:rotate(330deg);animation-delay:0s}@keyframes lds-spinner{0%{opacity:1}to{opacity:0}}']}),h})(),loadChildren:()=>O.e(460).then(O.bind(O,7460)).then(h=>h.LoginTvPageModule)}];let dp=(()=>{class h{}return h.\u0275fac=function(t){return new(t||h)},h.\u0275mod=e.oAB({type:h}),h.\u0275inj=e.cJS({imports:[[r.b2,H.ez,ne.u5,ce.m,ne.UX,R.Bz.forRoot(cp)]]}),h})();const fp=["mainContainer"],Jh=function(h){return{small:h}};let xm=(()=>{class h extends Ie.X{constructor(t,o,u,p,C,F,$,le){super(u,F,$,le),this.route=t,this.router=o,this.restProvider=u,this.ref=p,this.http=C,this.events=F,this.domSanitizer=$,this.sharedData=le}ngOnInit(){this.sharedData.platform="tv",localStorage.getItem("apiKey")?this.router.navigate([{outlets:{rostp:["maintv"]}}],{relativeTo:this.route,skipLocationChange:!0}):this.router.navigate([{outlets:{rostp:["logintv"]}}],{relativeTo:this.route,skipLocationChange:!0})}onActivate(t){let o=this;t instanceof wf&&t.fullScreen.subscribe(u=>{o.showPageInFullScreen()})}showPageInFullScreen(){if(!document.fullscreenElement){var t=this.mainContainer.nativeElement;t.requestFullScreen?t.requestFullScreen():t.webkitRequestFullScreen?t.webkitRequestFullScreen():t.mozRequestFullScreen&&t.mozRequestFullScreen()}}ngAfterViewInit(){let t=this;window.addEventListener("click",function(p){t.showPageInFullScreen()})}}return h.\u0275fac=function(t){return new(t||h)(e.Y36(R.gz),e.Y36(R.F0),e.Y36(Re.C),e.Y36(e.sBO),e.Y36(S.eN),e.Y36(Pe.n),e.Y36(r.H7),e.Y36(ke.g))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-sinovad-tv"]],viewQuery:function(t,o){if(1&t&&e.Gf(fp,5),2&t){let u;e.iGM(u=e.CRH())&&(o.mainContainer=u.first)}},features:[e.qOj],decls:3,vars:3,consts:[["id","sinovadMainContainer",1,"sinovad-main-container",3,"ngClass"],["mainContainer",""],["name","rostp",3,"activate"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0,1),e.TgZ(2,"router-outlet",2),e.NdJ("activate",function(p){return o.onActivate(p)}),e.qZA(),e.qZA()),2&t&&e.Q6J("ngClass",e.VKq(1,Jh,o.isSmallDevice()))},directives:[H.mk,R.lC],styles:["[_nghost-%COMP%]{position:absolute;width:100%;height:100%;background:#1F212B;overflow-y:hidden}.sinovad-main-container[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:#1F212B;overflow-y:hidden}"]}),h})(),Qh=(()=>{class h{constructor(t){this.injector=t}ngDoBootstrap(){const t=q(Fr,{injector:this.injector});customElements.define("app-sinovad-web",t);const o=q(tp,{injector:this.injector});customElements.define("app-sinovad-desktop",o);const u=q(xm,{injector:this.injector});customElements.define("app-sinovad-tv",u)}}return h.\u0275fac=function(t){return new(t||h)(e.LFG(e.zs3))},h.\u0275mod=e.oAB({type:h}),h.\u0275inj=e.cJS({providers:[{provide:H.mr,useValue:"/"}],imports:[[r.b2,ne.u5,ce.m,S.JF,Yr,dp,bf,U]]}),h})();(0,e.G48)(),r.q6().bootstrapModule(Qh).catch(h=>console.error(h))},7065:(Fn,Ve,O)=>{"use strict";O.d(Ve,{A:()=>S});var r=O(4893),e=O(4307);let S=(()=>{class R{constructor(U){this.sharedData=U}transform(U,...L){let f="";switch(null!=L[0]?L[0]:""){case"GetImageURLByKey":null!=U&&""!=U&&(f=this.sharedData.configurationData.developerMode?"assets/icon/"+U:this.sharedData.urlSinovadBackEnd+"/assets/icon/"+U);break;case"GetSoundUrlByKey":null!=U&&""!=U&&(f=this.sharedData.configurationData.developerMode?"assets/sound/"+U:this.sharedData.urlSinovadBackEnd+"/assets/sound/"+U)}return f}}return R.\u0275fac=function(U){return new(U||R)(r.Y36(e.g,16))},R.\u0275pipe=r.Yjl({name:"formatDataPipe",type:R,pure:!0}),R})()},1085:(Fn,Ve,O)=>{"use strict";O.d(Ve,{n:()=>S});var r=O(7579),e=O(4893);let S=(()=>{class R{constructor(){this.subjectEvent=new r.x}publish(U,L){this.subjectEvent.next({keyEvent:U,params:L})}}return R.\u0275fac=function(U){return new(U||R)},R.\u0275prov=e.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})()},2571:(Fn,Ve,O)=>{"use strict";O.d(Ve,{C:()=>j});var r=O(520),e=O(4322),S=O(4893),R=O(4307);let j=(()=>{class U{constructor(b,f){this.http=b,this.sharedData=f}performExecuteMethod(b,f,c){return new Promise((g,v)=>{let T={responseType:"text"};if(this.sharedData.currentToken){const N=new r.WM({"Content-Type":"application/json",Authorization:"Bearer "+this.sharedData.currentToken});T.headers=N}b==e.yw.GET&&this.http.get(f,T).subscribe(k=>{g(k)},k=>{v(k)}),b==e.yw.POST&&this.http.post(f,c,T).subscribe(k=>{g(k)},k=>{v(k)}),b==e.yw.PUT&&this.http.put(f,c,T).subscribe(k=>{g(k)},k=>{v(k)}),b==e.yw.DELETE&&this.http.delete(f,T).subscribe(k=>{g(k)},k=>{v(k)})})}executeSinovadApiService(b,f,c){let g=this.sharedData.urlSinovadBackEnd+"/api/v1"+f;return new Promise((v,T)=>{this.performExecuteMethod(b,g,c).then(k=>{v(JSON.parse(k))},k=>{let N=k;if(null!=k.error){N=k.error;try{var B=JSON.parse(N);if(B.errors){let P=B.errors,_=[];Object.keys(P).map(D=>{var y=P[D].join("\n");_.push(y)}),N=_.join("\n")}else B.Errors?N=B.Errors.map(P=>P.ErrorMessage).join("\n"):B.Message&&(N=B.Message)}catch(P){}}401==k.status&&this.sharedData.currentToken&&(this.sharedData.currentToken=void 0,localStorage.removeItem("apiKey"),window.location.href="/"),console.error(N),T(N)})})}executeSinovadStreamServerService(b,f,c){let g=this.sharedData.configurationData.currentHost+f;return new Promise((v,T)=>{this.performExecuteMethod(b,g,c).then(k=>{v(k)},k=>{console.error(k),T(k)})})}executeHttpMethodByUrl(b,f,c){return new Promise((g,v)=>{this.performExecuteMethod(b,f,c).then(T=>{g(T)},T=>{console.error(T),v(T)})})}}return U.\u0275fac=function(b){return new(b||U)(S.LFG(r.eN),S.LFG(R.g))},U.\u0275prov=S.Yz7({token:U,factory:U.\u0275fac,providedIn:"root"}),U})()},4307:(Fn,Ve,O)=>{"use strict";O.d(Ve,{g:()=>S});class r{}var e=O(4893);let S=(()=>{class R{constructor(){this.AdministratorRoleID=1,this.VisitatorRoleID=2,this.UserRoleID=3,this.urlSinovadBackEnd="http://www.sinovad.com",this.storageMoviesBaseUrl="http://192.168.18.217:80/movies",this.storageAnimesBaseUrl="http://192.168.18.217:80/animes",this.storageSeriesBaseUrl="http://192.168.18.217:80/series",this.originalUrlImagesMovieDataBase="https://image.tmdb.org/t/p/w600_and_h900_bestv2",this.urlEpisodeDataBase="https://www.themoviedb.org/t/p/w454_and_h254_bestv2",this.listProcessGUIDs=[],this.configurationData=new r,this.listProfiles=[]}}return R.\u0275fac=function(U){return new(U||R)},R.\u0275prov=e.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})()},5782:(Fn,Ve,O)=>{"use strict";O.d(Ve,{m:()=>e});var r=O(4893);let e=(()=>{class S{}return S.\u0275fac=function(j){return new(j||S)},S.\u0275mod=r.oAB({type:S}),S.\u0275inj=r.cJS({providers:[],imports:[[]]}),S})()},6059:(Fn,Ve,O)=>{"use strict";Ve.Q=void 0;const e=O(2738),S=O(2877);Ve.Q=j=>j.startsWith("WEBVTT")?S.vttParser(j):e.srtParser(j)},2738:(Fn,Ve,O)=>{"use strict";Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.srtParser=void 0;const r=O(9522),e=O(624),R=L=>{let f,c,g,b=L.split(":");return 2===b.length?[c,g]=b:[f,c,g]=b,parseInt(g.replace(",",""),10)+60*parseInt(c,10)*1e3+60*(f?parseInt(f,10):0)*60*1e3},j=()=>({start(L){let b="ID",f={tokens:L.split(/\n/),pos:0,result:[],current:{}};for(;"FINISH"!==b;){const c=this[b](f);f=c.params,b=c.next}return f.result},ID(L){const{tokens:b,pos:f,current:c}=L;if(b.length<=f)return{next:"FINISH",params:L};if(e.isBlank(b[f]))return{next:"ID",params:mo(po({},L),{pos:f+1})};const g=b[f].includes("--\x3e");return c.id=g?"":b[f],{next:"TIME_LINE",params:mo(po({},L),{current:c,tokens:b,pos:g?f:f+1})}},TIME_LINE(L){const{tokens:b,pos:f,current:c}=L,g=b[f],[v,T]=g.split("--\x3e");return c.from=R(v),c.to=R(T),{next:"TEXT",params:mo(po({},L),{current:c,pos:f+1})}},TEXT(L){const{tokens:b,pos:f,current:c}=L;return b.length<=f?{next:"FINISH",params:L}:(c.text=b[f],{next:"MULTI_LINE_TEXT",params:mo(po({},L),{current:c,pos:f+1})})},MULTI_LINE_TEXT(L){const{tokens:b,pos:f,current:c}=L;return b.length<=f?{next:"FINISH",params:L}:e.isBlank(b[f])?{next:"FIN_ENTRY",params:L}:(c.text=`${c.text}\n${b[f]}`,{next:"MULTI_LINE_TEXT",params:mo(po({},L),{current:c,pos:f+1})})},FIN_ENTRY(L){const{pos:b,current:f,result:c}=L;if(!r.isEntryFromPartial(f))throw new Error(`Parsing error current not complete ${JSON.stringify(f)}`);return c.push(f),{next:"ID",params:mo(po({},L),{current:{},pos:b+1})}},FINISH:L=>({next:"FINISH",params:L})});Ve.srtParser=L=>({entries:j().start(L)})},9522:(Fn,Ve)=>{"use strict";Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.isEntryFromPartial=void 0,Ve.isEntryFromPartial=r=>"string"==typeof r.id&&"number"==typeof r.from&&"number"==typeof r.to&&"string"==typeof r.text},624:(Fn,Ve)=>{"use strict";Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.isBlank=void 0,Ve.isBlank=r=>!r||/^\s*$/.test(r)},2877:(Fn,Ve,O)=>{"use strict";Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.vttParser=void 0;const r=O(9522),e=O(624),R=L=>{let f,c,g,b=L.split(":");return 2===b.length?[c,g]=b:[f,c,g]=b,parseInt(g.replace(".",""),10)+60*parseInt(c,10)*1e3+60*(f?parseInt(f,10):0)*60*1e3},j=()=>({start(L){let b="HEADER",f={tokens:L.split(/\n/),pos:0,result:[],current:{}};for(;"FINISH"!==b;){const c=this[b](f);f=c.params,b=c.next}return f.result},HEADER:L=>({next:"ID_OR_NOTE_OR_STYLE",params:mo(po({},L),{pos:L.pos+1})}),ID_OR_NOTE_OR_STYLE(L){const{tokens:b,pos:f}=L;return b.length<=f?{next:"FINISH",params:L}:e.isBlank(b[f])?{next:"ID_OR_NOTE_OR_STYLE",params:mo(po({},L),{pos:f+1})}:b[f].toUpperCase().includes("NOTE")?{next:"NOTE",params:L}:b[f].toUpperCase().includes("STYLE")?{next:"STYLE",params:L}:{next:"ID",params:L}},STYLE(L){const{tokens:b,pos:f}=L;return e.isBlank(b[f])?{next:"ID_OR_NOTE_OR_STYLE",params:mo(po({},L),{pos:f+1})}:{next:"STYLE",params:mo(po({},L),{pos:f+1})}},NOTE(L){const{tokens:b,pos:f}=L;return e.isBlank(b[f])?{next:"ID_OR_NOTE_OR_STYLE",params:mo(po({},L),{pos:f+1})}:{next:"STYLE",params:mo(po({},L),{pos:f+1})}},ID(L){const{tokens:b,pos:f,current:c}=L;if(b.length<=f)return{next:"FINISH",params:L};if(e.isBlank(b[f]))return{next:"ID",params:mo(po({},L),{pos:f+1})};const g=b[f].includes("--\x3e");return c.id=g?"":b[f],{next:"TIME_LINE",params:mo(po({},L),{current:c,tokens:b,pos:g?f:f+1})}},TIME_LINE(L){const{tokens:b,pos:f,current:c}=L,g=b[f],[v,T]=g.split("--\x3e");return c.from=R(v),c.to=R(T),{next:"TEXT",params:mo(po({},L),{current:c,pos:f+1})}},TEXT(L){const{tokens:b,pos:f,current:c}=L;return b.length<=f?{next:"FINISH",params:L}:(c.text=b[f],{next:"MULTI_LINE_TEXT",params:mo(po({},L),{current:c,pos:f+1})})},MULTI_LINE_TEXT(L){const{tokens:b,pos:f,current:c}=L;return b.length<=f?{next:"FINISH",params:L}:e.isBlank(b[f])?{next:"FIN_ENTRY",params:L}:(c.text=`${c.text}\n${b[f]}`,{next:"MULTI_LINE_TEXT",params:mo(po({},L),{current:c,pos:f+1})})},FIN_ENTRY(L){const{pos:b,current:f,result:c}=L;if(!r.isEntryFromPartial(f))throw new Error(`Parsing error current not complete ${JSON.stringify(f)}`);return c.push(f),{next:"ID_OR_NOTE_OR_STYLE",params:mo(po({},L),{current:{},pos:b+1})}},FINISH:L=>({next:"FINISH",params:L})});Ve.vttParser=L=>({entries:j().start(L)})},5343:(Fn,Ve)=>{"use strict";Ve.byteLength=function L(T){var k=U(T),B=k[1];return 3*(k[0]+B)/4-B},Ve.toByteArray=function f(T){var k,y,N=U(T),B=N[0],x=N[1],P=new e(function b(T,k,N){return 3*(k+N)/4-N}(0,B,x)),_=0,D=x>0?B-4:B;for(y=0;y<D;y+=4)k=r[T.charCodeAt(y)]<<18|r[T.charCodeAt(y+1)]<<12|r[T.charCodeAt(y+2)]<<6|r[T.charCodeAt(y+3)],P[_++]=k>>16&255,P[_++]=k>>8&255,P[_++]=255&k;return 2===x&&(k=r[T.charCodeAt(y)]<<2|r[T.charCodeAt(y+1)]>>4,P[_++]=255&k),1===x&&(k=r[T.charCodeAt(y)]<<10|r[T.charCodeAt(y+1)]<<4|r[T.charCodeAt(y+2)]>>2,P[_++]=k>>8&255,P[_++]=255&k),P},Ve.fromByteArray=function v(T){for(var k,N=T.length,B=N%3,x=[],P=16383,_=0,D=N-B;_<D;_+=P)x.push(g(T,_,_+P>D?D:_+P));return 1===B?x.push(O[(k=T[N-1])>>2]+O[k<<4&63]+"=="):2===B&&x.push(O[(k=(T[N-2]<<8)+T[N-1])>>10]+O[k>>4&63]+O[k<<2&63]+"="),x.join("")};for(var O=[],r=[],e="undefined"!=typeof Uint8Array?Uint8Array:Array,S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",R=0,j=S.length;R<j;++R)O[R]=S[R],r[S.charCodeAt(R)]=R;function U(T){var k=T.length;if(k%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var N=T.indexOf("=");return-1===N&&(N=k),[N,N===k?0:4-N%4]}function c(T){return O[T>>18&63]+O[T>>12&63]+O[T>>6&63]+O[63&T]}function g(T,k,N){for(var x=[],P=k;P<N;P+=3)x.push(c((T[P]<<16&16711680)+(T[P+1]<<8&65280)+(255&T[P+2])));return x.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},3172:(Fn,Ve,O)=>{"use strict";var e=O(5343),S=O(8461),R="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;Ve.lW=b,Ve.h2=50;var j=2147483647;function L(re){if(re>j)throw new RangeError('The value "'+re+'" is invalid for option "size"');var z=new Uint8Array(re);return Object.setPrototypeOf(z,b.prototype),z}function b(re,z,te){if("number"==typeof re){if("string"==typeof z)throw new TypeError('The "string" argument must be of type string. Received type number');return v(re)}return f(re,z,te)}function f(re,z,te){if("string"==typeof re)return function T(re,z){if(("string"!=typeof z||""===z)&&(z="utf8"),!b.isEncoding(z))throw new TypeError("Unknown encoding: "+z);var te=0|D(re,z),X=L(te),Z=X.write(re,z);return Z!==te&&(X=X.slice(0,Z)),X}(re,z);if(ArrayBuffer.isView(re))return function N(re){if(J(re,Uint8Array)){var z=new Uint8Array(re);return B(z.buffer,z.byteOffset,z.byteLength)}return k(re)}(re);if(null==re)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof re);if(J(re,ArrayBuffer)||re&&J(re.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(J(re,SharedArrayBuffer)||re&&J(re.buffer,SharedArrayBuffer)))return B(re,z,te);if("number"==typeof re)throw new TypeError('The "value" argument must not be of type number. Received type number');var X=re.valueOf&&re.valueOf();if(null!=X&&X!==re)return b.from(X,z,te);var Z=function x(re){if(b.isBuffer(re)){var z=0|P(re.length),te=L(z);return 0===te.length||re.copy(te,0,0,z),te}return void 0!==re.length?"number"!=typeof re.length||Me(re.length)?L(0):k(re):"Buffer"===re.type&&Array.isArray(re.data)?k(re.data):void 0}(re);if(Z)return Z;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof re[Symbol.toPrimitive])return b.from(re[Symbol.toPrimitive]("string"),z,te);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof re)}function c(re){if("number"!=typeof re)throw new TypeError('"size" argument must be of type number');if(re<0)throw new RangeError('The value "'+re+'" is invalid for option "size"')}function v(re){return c(re),L(re<0?0:0|P(re))}function k(re){for(var z=re.length<0?0:0|P(re.length),te=L(z),X=0;X<z;X+=1)te[X]=255&re[X];return te}function B(re,z,te){if(z<0||re.byteLength<z)throw new RangeError('"offset" is outside of buffer bounds');if(re.byteLength<z+(te||0))throw new RangeError('"length" is outside of buffer bounds');var X;return X=void 0===z&&void 0===te?new Uint8Array(re):void 0===te?new Uint8Array(re,z):new Uint8Array(re,z,te),Object.setPrototypeOf(X,b.prototype),X}function P(re){if(re>=j)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+j.toString(16)+" bytes");return 0|re}function D(re,z){if(b.isBuffer(re))return re.length;if(ArrayBuffer.isView(re)||J(re,ArrayBuffer))return re.byteLength;if("string"!=typeof re)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof re);var te=re.length,X=arguments.length>2&&!0===arguments[2];if(!X&&0===te)return 0;for(var Z=!1;;)switch(z){case"ascii":case"latin1":case"binary":return te;case"utf8":case"utf-8":return qe(re).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*te;case"hex":return te>>>1;case"base64":return he(re).length;default:if(Z)return X?-1:qe(re).length;z=(""+z).toLowerCase(),Z=!0}}function y(re,z,te){var X=!1;if((void 0===z||z<0)&&(z=0),z>this.length||((void 0===te||te>this.length)&&(te=this.length),te<=0)||(te>>>=0)<=(z>>>=0))return"";for(re||(re="utf8");;)switch(re){case"hex":return xe(this,z,te);case"utf8":case"utf-8":return H(this,z,te);case"ascii":return pe(this,z,te);case"latin1":case"binary":return me(this,z,te);case"base64":return se(this,z,te);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ve(this,z,te);default:if(X)throw new TypeError("Unknown encoding: "+re);re=(re+"").toLowerCase(),X=!0}}function A(re,z,te){var X=re[z];re[z]=re[te],re[te]=X}function I(re,z,te,X,Z){if(0===re.length)return-1;if("string"==typeof te?(X=te,te=0):te>2147483647?te=2147483647:te<-2147483648&&(te=-2147483648),Me(te=+te)&&(te=Z?0:re.length-1),te<0&&(te=re.length+te),te>=re.length){if(Z)return-1;te=re.length-1}else if(te<0){if(!Z)return-1;te=0}if("string"==typeof z&&(z=b.from(z,X)),b.isBuffer(z))return 0===z.length?-1:G(re,z,te,X,Z);if("number"==typeof z)return z&=255,"function"==typeof Uint8Array.prototype.indexOf?Z?Uint8Array.prototype.indexOf.call(re,z,te):Uint8Array.prototype.lastIndexOf.call(re,z,te):G(re,[z],te,X,Z);throw new TypeError("val must be string, number or Buffer")}function G(re,z,te,X,Z){var We,W=1,oe=re.length,be=z.length;if(void 0!==X&&("ucs2"===(X=String(X).toLowerCase())||"ucs-2"===X||"utf16le"===X||"utf-16le"===X)){if(re.length<2||z.length<2)return-1;W=2,oe/=2,be/=2,te/=2}function Fe(Ot,tt){return 1===W?Ot[tt]:Ot.readUInt16BE(tt*W)}if(Z){var at=-1;for(We=te;We<oe;We++)if(Fe(re,We)===Fe(z,-1===at?0:We-at)){if(-1===at&&(at=We),We-at+1===be)return at*W}else-1!==at&&(We-=We-at),at=-1}else for(te+be>oe&&(te=oe-be),We=te;We>=0;We--){for(var et=!0,ut=0;ut<be;ut++)if(Fe(re,We+ut)!==Fe(z,ut)){et=!1;break}if(et)return We}return-1}function ee(re,z,te,X){te=Number(te)||0;var Z=re.length-te;X?(X=Number(X))>Z&&(X=Z):X=Z;var W=z.length;X>W/2&&(X=W/2);for(var oe=0;oe<X;++oe){var be=parseInt(z.substr(2*oe,2),16);if(Me(be))return oe;re[te+oe]=be}return oe}function de(re,z,te,X){return Y(qe(z,re.length-te),re,te,X)}function ue(re,z,te,X){return Y(function He(re){for(var z=[],te=0;te<re.length;++te)z.push(255&re.charCodeAt(te));return z}(z),re,te,X)}function Te(re,z,te,X){return Y(he(z),re,te,X)}function q(re,z,te,X){return Y(function De(re,z){for(var te,X,W=[],oe=0;oe<re.length&&!((z-=2)<0);++oe)X=(te=re.charCodeAt(oe))>>8,W.push(te%256),W.push(X);return W}(z,re.length-te),re,te,X)}function se(re,z,te){return e.fromByteArray(0===z&&te===re.length?re:re.slice(z,te))}function H(re,z,te){te=Math.min(re.length,te);for(var X=[],Z=z;Z<te;){var Fe,We,at,et,W=re[Z],oe=null,be=W>239?4:W>223?3:W>191?2:1;if(Z+be<=te)switch(be){case 1:W<128&&(oe=W);break;case 2:128==(192&(Fe=re[Z+1]))&&(et=(31&W)<<6|63&Fe)>127&&(oe=et);break;case 3:We=re[Z+2],128==(192&(Fe=re[Z+1]))&&128==(192&We)&&(et=(15&W)<<12|(63&Fe)<<6|63&We)>2047&&(et<55296||et>57343)&&(oe=et);break;case 4:We=re[Z+2],at=re[Z+3],128==(192&(Fe=re[Z+1]))&&128==(192&We)&&128==(192&at)&&(et=(15&W)<<18|(63&Fe)<<12|(63&We)<<6|63&at)>65535&&et<1114112&&(oe=et)}null===oe?(oe=65533,be=1):oe>65535&&(X.push((oe-=65536)>>>10&1023|55296),oe=56320|1023&oe),X.push(oe),Z+=be}return function ne(re){var z=re.length;if(z<=4096)return String.fromCharCode.apply(String,re);for(var te="",X=0;X<z;)te+=String.fromCharCode.apply(String,re.slice(X,X+=4096));return te}(X)}function pe(re,z,te){var X="";te=Math.min(re.length,te);for(var Z=z;Z<te;++Z)X+=String.fromCharCode(127&re[Z]);return X}function me(re,z,te){var X="";te=Math.min(re.length,te);for(var Z=z;Z<te;++Z)X+=String.fromCharCode(re[Z]);return X}function xe(re,z,te){var X=re.length;(!z||z<0)&&(z=0),(!te||te<0||te>X)&&(te=X);for(var Z="",W=z;W<te;++W)Z+=ae[re[W]];return Z}function ve(re,z,te){for(var X=re.slice(z,te),Z="",W=0;W<X.length-1;W+=2)Z+=String.fromCharCode(X[W]+256*X[W+1]);return Z}function Oe(re,z,te){if(re%1!=0||re<0)throw new RangeError("offset is not uint");if(re+z>te)throw new RangeError("Trying to access beyond buffer length")}function Ee(re,z,te,X,Z,W){if(!b.isBuffer(re))throw new TypeError('"buffer" argument must be a Buffer instance');if(z>Z||z<W)throw new RangeError('"value" argument is out of bounds');if(te+X>re.length)throw new RangeError("Index out of range")}function Ie(re,z,te,X,Z,W){if(te+X>re.length)throw new RangeError("Index out of range");if(te<0)throw new RangeError("Index out of range")}function Re(re,z,te,X,Z){return z=+z,te>>>=0,Z||Ie(re,0,te,4),S.write(re,z,te,X,23,4),te+4}function Pe(re,z,te,X,Z){return z=+z,te>>>=0,Z||Ie(re,0,te,8),S.write(re,z,te,X,52,8),te+8}!(b.TYPED_ARRAY_SUPPORT=function U(){try{var re=new Uint8Array(1),z={foo:function(){return 42}};return Object.setPrototypeOf(z,Uint8Array.prototype),Object.setPrototypeOf(re,z),42===re.foo()}catch(te){return!1}}())&&"undefined"!=typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(b.prototype,"parent",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.buffer}}),Object.defineProperty(b.prototype,"offset",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.byteOffset}}),b.poolSize=8192,b.from=function(re,z,te){return f(re,z,te)},Object.setPrototypeOf(b.prototype,Uint8Array.prototype),Object.setPrototypeOf(b,Uint8Array),b.alloc=function(re,z,te){return function g(re,z,te){return c(re),re<=0?L(re):void 0!==z?"string"==typeof te?L(re).fill(z,te):L(re).fill(z):L(re)}(re,z,te)},b.allocUnsafe=function(re){return v(re)},b.allocUnsafeSlow=function(re){return v(re)},b.isBuffer=function(z){return null!=z&&!0===z._isBuffer&&z!==b.prototype},b.compare=function(z,te){if(J(z,Uint8Array)&&(z=b.from(z,z.offset,z.byteLength)),J(te,Uint8Array)&&(te=b.from(te,te.offset,te.byteLength)),!b.isBuffer(z)||!b.isBuffer(te))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(z===te)return 0;for(var X=z.length,Z=te.length,W=0,oe=Math.min(X,Z);W<oe;++W)if(z[W]!==te[W]){X=z[W],Z=te[W];break}return X<Z?-1:Z<X?1:0},b.isEncoding=function(z){switch(String(z).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},b.concat=function(z,te){if(!Array.isArray(z))throw new TypeError('"list" argument must be an Array of Buffers');if(0===z.length)return b.alloc(0);var X;if(void 0===te)for(te=0,X=0;X<z.length;++X)te+=z[X].length;var Z=b.allocUnsafe(te),W=0;for(X=0;X<z.length;++X){var oe=z[X];if(J(oe,Uint8Array))W+oe.length>Z.length?b.from(oe).copy(Z,W):Uint8Array.prototype.set.call(Z,oe,W);else{if(!b.isBuffer(oe))throw new TypeError('"list" argument must be an Array of Buffers');oe.copy(Z,W)}W+=oe.length}return Z},b.byteLength=D,b.prototype._isBuffer=!0,b.prototype.swap16=function(){var z=this.length;if(z%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var te=0;te<z;te+=2)A(this,te,te+1);return this},b.prototype.swap32=function(){var z=this.length;if(z%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var te=0;te<z;te+=4)A(this,te,te+3),A(this,te+1,te+2);return this},b.prototype.swap64=function(){var z=this.length;if(z%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var te=0;te<z;te+=8)A(this,te,te+7),A(this,te+1,te+6),A(this,te+2,te+5),A(this,te+3,te+4);return this},b.prototype.toLocaleString=b.prototype.toString=function(){var z=this.length;return 0===z?"":0===arguments.length?H(this,0,z):y.apply(this,arguments)},b.prototype.equals=function(z){if(!b.isBuffer(z))throw new TypeError("Argument must be a Buffer");return this===z||0===b.compare(this,z)},b.prototype.inspect=function(){var z="",te=Ve.h2;return z=this.toString("hex",0,te).replace(/(.{2})/g,"$1 ").trim(),this.length>te&&(z+=" ... "),"<Buffer "+z+">"},R&&(b.prototype[R]=b.prototype.inspect),b.prototype.compare=function(z,te,X,Z,W){if(J(z,Uint8Array)&&(z=b.from(z,z.offset,z.byteLength)),!b.isBuffer(z))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof z);if(void 0===te&&(te=0),void 0===X&&(X=z?z.length:0),void 0===Z&&(Z=0),void 0===W&&(W=this.length),te<0||X>z.length||Z<0||W>this.length)throw new RangeError("out of range index");if(Z>=W&&te>=X)return 0;if(Z>=W)return-1;if(te>=X)return 1;if(this===z)return 0;for(var oe=(W>>>=0)-(Z>>>=0),be=(X>>>=0)-(te>>>=0),Fe=Math.min(oe,be),We=this.slice(Z,W),at=z.slice(te,X),et=0;et<Fe;++et)if(We[et]!==at[et]){oe=We[et],be=at[et];break}return oe<be?-1:be<oe?1:0},b.prototype.includes=function(z,te,X){return-1!==this.indexOf(z,te,X)},b.prototype.indexOf=function(z,te,X){return I(this,z,te,X,!0)},b.prototype.lastIndexOf=function(z,te,X){return I(this,z,te,X,!1)},b.prototype.write=function(z,te,X,Z){if(void 0===te)Z="utf8",X=this.length,te=0;else if(void 0===X&&"string"==typeof te)Z=te,X=this.length,te=0;else{if(!isFinite(te))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");te>>>=0,isFinite(X)?(X>>>=0,void 0===Z&&(Z="utf8")):(Z=X,X=void 0)}var W=this.length-te;if((void 0===X||X>W)&&(X=W),z.length>0&&(X<0||te<0)||te>this.length)throw new RangeError("Attempt to write outside buffer bounds");Z||(Z="utf8");for(var oe=!1;;)switch(Z){case"hex":return ee(this,z,te,X);case"utf8":case"utf-8":return de(this,z,te,X);case"ascii":case"latin1":case"binary":return ue(this,z,te,X);case"base64":return Te(this,z,te,X);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,z,te,X);default:if(oe)throw new TypeError("Unknown encoding: "+Z);Z=(""+Z).toLowerCase(),oe=!0}},b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},b.prototype.slice=function(z,te){var X=this.length;(z=~~z)<0?(z+=X)<0&&(z=0):z>X&&(z=X),(te=void 0===te?X:~~te)<0?(te+=X)<0&&(te=0):te>X&&(te=X),te<z&&(te=z);var Z=this.subarray(z,te);return Object.setPrototypeOf(Z,b.prototype),Z},b.prototype.readUintLE=b.prototype.readUIntLE=function(z,te,X){z>>>=0,te>>>=0,X||Oe(z,te,this.length);for(var Z=this[z],W=1,oe=0;++oe<te&&(W*=256);)Z+=this[z+oe]*W;return Z},b.prototype.readUintBE=b.prototype.readUIntBE=function(z,te,X){z>>>=0,te>>>=0,X||Oe(z,te,this.length);for(var Z=this[z+--te],W=1;te>0&&(W*=256);)Z+=this[z+--te]*W;return Z},b.prototype.readUint8=b.prototype.readUInt8=function(z,te){return z>>>=0,te||Oe(z,1,this.length),this[z]},b.prototype.readUint16LE=b.prototype.readUInt16LE=function(z,te){return z>>>=0,te||Oe(z,2,this.length),this[z]|this[z+1]<<8},b.prototype.readUint16BE=b.prototype.readUInt16BE=function(z,te){return z>>>=0,te||Oe(z,2,this.length),this[z]<<8|this[z+1]},b.prototype.readUint32LE=b.prototype.readUInt32LE=function(z,te){return z>>>=0,te||Oe(z,4,this.length),(this[z]|this[z+1]<<8|this[z+2]<<16)+16777216*this[z+3]},b.prototype.readUint32BE=b.prototype.readUInt32BE=function(z,te){return z>>>=0,te||Oe(z,4,this.length),16777216*this[z]+(this[z+1]<<16|this[z+2]<<8|this[z+3])},b.prototype.readIntLE=function(z,te,X){z>>>=0,te>>>=0,X||Oe(z,te,this.length);for(var Z=this[z],W=1,oe=0;++oe<te&&(W*=256);)Z+=this[z+oe]*W;return Z>=(W*=128)&&(Z-=Math.pow(2,8*te)),Z},b.prototype.readIntBE=function(z,te,X){z>>>=0,te>>>=0,X||Oe(z,te,this.length);for(var Z=te,W=1,oe=this[z+--Z];Z>0&&(W*=256);)oe+=this[z+--Z]*W;return oe>=(W*=128)&&(oe-=Math.pow(2,8*te)),oe},b.prototype.readInt8=function(z,te){return z>>>=0,te||Oe(z,1,this.length),128&this[z]?-1*(255-this[z]+1):this[z]},b.prototype.readInt16LE=function(z,te){z>>>=0,te||Oe(z,2,this.length);var X=this[z]|this[z+1]<<8;return 32768&X?4294901760|X:X},b.prototype.readInt16BE=function(z,te){z>>>=0,te||Oe(z,2,this.length);var X=this[z+1]|this[z]<<8;return 32768&X?4294901760|X:X},b.prototype.readInt32LE=function(z,te){return z>>>=0,te||Oe(z,4,this.length),this[z]|this[z+1]<<8|this[z+2]<<16|this[z+3]<<24},b.prototype.readInt32BE=function(z,te){return z>>>=0,te||Oe(z,4,this.length),this[z]<<24|this[z+1]<<16|this[z+2]<<8|this[z+3]},b.prototype.readFloatLE=function(z,te){return z>>>=0,te||Oe(z,4,this.length),S.read(this,z,!0,23,4)},b.prototype.readFloatBE=function(z,te){return z>>>=0,te||Oe(z,4,this.length),S.read(this,z,!1,23,4)},b.prototype.readDoubleLE=function(z,te){return z>>>=0,te||Oe(z,8,this.length),S.read(this,z,!0,52,8)},b.prototype.readDoubleBE=function(z,te){return z>>>=0,te||Oe(z,8,this.length),S.read(this,z,!1,52,8)},b.prototype.writeUintLE=b.prototype.writeUIntLE=function(z,te,X,Z){z=+z,te>>>=0,X>>>=0,Z||Ee(this,z,te,X,Math.pow(2,8*X)-1,0);var oe=1,be=0;for(this[te]=255&z;++be<X&&(oe*=256);)this[te+be]=z/oe&255;return te+X},b.prototype.writeUintBE=b.prototype.writeUIntBE=function(z,te,X,Z){z=+z,te>>>=0,X>>>=0,Z||Ee(this,z,te,X,Math.pow(2,8*X)-1,0);var oe=X-1,be=1;for(this[te+oe]=255&z;--oe>=0&&(be*=256);)this[te+oe]=z/be&255;return te+X},b.prototype.writeUint8=b.prototype.writeUInt8=function(z,te,X){return z=+z,te>>>=0,X||Ee(this,z,te,1,255,0),this[te]=255&z,te+1},b.prototype.writeUint16LE=b.prototype.writeUInt16LE=function(z,te,X){return z=+z,te>>>=0,X||Ee(this,z,te,2,65535,0),this[te]=255&z,this[te+1]=z>>>8,te+2},b.prototype.writeUint16BE=b.prototype.writeUInt16BE=function(z,te,X){return z=+z,te>>>=0,X||Ee(this,z,te,2,65535,0),this[te]=z>>>8,this[te+1]=255&z,te+2},b.prototype.writeUint32LE=b.prototype.writeUInt32LE=function(z,te,X){return z=+z,te>>>=0,X||Ee(this,z,te,4,4294967295,0),this[te+3]=z>>>24,this[te+2]=z>>>16,this[te+1]=z>>>8,this[te]=255&z,te+4},b.prototype.writeUint32BE=b.prototype.writeUInt32BE=function(z,te,X){return z=+z,te>>>=0,X||Ee(this,z,te,4,4294967295,0),this[te]=z>>>24,this[te+1]=z>>>16,this[te+2]=z>>>8,this[te+3]=255&z,te+4},b.prototype.writeIntLE=function(z,te,X,Z){if(z=+z,te>>>=0,!Z){var W=Math.pow(2,8*X-1);Ee(this,z,te,X,W-1,-W)}var oe=0,be=1,Fe=0;for(this[te]=255&z;++oe<X&&(be*=256);)z<0&&0===Fe&&0!==this[te+oe-1]&&(Fe=1),this[te+oe]=(z/be>>0)-Fe&255;return te+X},b.prototype.writeIntBE=function(z,te,X,Z){if(z=+z,te>>>=0,!Z){var W=Math.pow(2,8*X-1);Ee(this,z,te,X,W-1,-W)}var oe=X-1,be=1,Fe=0;for(this[te+oe]=255&z;--oe>=0&&(be*=256);)z<0&&0===Fe&&0!==this[te+oe+1]&&(Fe=1),this[te+oe]=(z/be>>0)-Fe&255;return te+X},b.prototype.writeInt8=function(z,te,X){return z=+z,te>>>=0,X||Ee(this,z,te,1,127,-128),z<0&&(z=255+z+1),this[te]=255&z,te+1},b.prototype.writeInt16LE=function(z,te,X){return z=+z,te>>>=0,X||Ee(this,z,te,2,32767,-32768),this[te]=255&z,this[te+1]=z>>>8,te+2},b.prototype.writeInt16BE=function(z,te,X){return z=+z,te>>>=0,X||Ee(this,z,te,2,32767,-32768),this[te]=z>>>8,this[te+1]=255&z,te+2},b.prototype.writeInt32LE=function(z,te,X){return z=+z,te>>>=0,X||Ee(this,z,te,4,2147483647,-2147483648),this[te]=255&z,this[te+1]=z>>>8,this[te+2]=z>>>16,this[te+3]=z>>>24,te+4},b.prototype.writeInt32BE=function(z,te,X){return z=+z,te>>>=0,X||Ee(this,z,te,4,2147483647,-2147483648),z<0&&(z=4294967295+z+1),this[te]=z>>>24,this[te+1]=z>>>16,this[te+2]=z>>>8,this[te+3]=255&z,te+4},b.prototype.writeFloatLE=function(z,te,X){return Re(this,z,te,!0,X)},b.prototype.writeFloatBE=function(z,te,X){return Re(this,z,te,!1,X)},b.prototype.writeDoubleLE=function(z,te,X){return Pe(this,z,te,!0,X)},b.prototype.writeDoubleBE=function(z,te,X){return Pe(this,z,te,!1,X)},b.prototype.copy=function(z,te,X,Z){if(!b.isBuffer(z))throw new TypeError("argument should be a Buffer");if(X||(X=0),!Z&&0!==Z&&(Z=this.length),te>=z.length&&(te=z.length),te||(te=0),Z>0&&Z<X&&(Z=X),Z===X||0===z.length||0===this.length)return 0;if(te<0)throw new RangeError("targetStart out of bounds");if(X<0||X>=this.length)throw new RangeError("Index out of range");if(Z<0)throw new RangeError("sourceEnd out of bounds");Z>this.length&&(Z=this.length),z.length-te<Z-X&&(Z=z.length-te+X);var W=Z-X;return this===z&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(te,X,Z):Uint8Array.prototype.set.call(z,this.subarray(X,Z),te),W},b.prototype.fill=function(z,te,X,Z){if("string"==typeof z){if("string"==typeof te?(Z=te,te=0,X=this.length):"string"==typeof X&&(Z=X,X=this.length),void 0!==Z&&"string"!=typeof Z)throw new TypeError("encoding must be a string");if("string"==typeof Z&&!b.isEncoding(Z))throw new TypeError("Unknown encoding: "+Z);if(1===z.length){var W=z.charCodeAt(0);("utf8"===Z&&W<128||"latin1"===Z)&&(z=W)}}else"number"==typeof z?z&=255:"boolean"==typeof z&&(z=Number(z));if(te<0||this.length<te||this.length<X)throw new RangeError("Out of range index");if(X<=te)return this;var oe;if(te>>>=0,X=void 0===X?this.length:X>>>0,z||(z=0),"number"==typeof z)for(oe=te;oe<X;++oe)this[oe]=z;else{var be=b.isBuffer(z)?z:b.from(z,Z),Fe=be.length;if(0===Fe)throw new TypeError('The value "'+z+'" is invalid for argument "value"');for(oe=0;oe<X-te;++oe)this[oe+te]=be[oe%Fe]}return this};var ke=/[^+/0-9A-Za-z-_]/g;function qe(re,z){z=z||1/0;for(var te,X=re.length,Z=null,W=[],oe=0;oe<X;++oe){if((te=re.charCodeAt(oe))>55295&&te<57344){if(!Z){if(te>56319){(z-=3)>-1&&W.push(239,191,189);continue}if(oe+1===X){(z-=3)>-1&&W.push(239,191,189);continue}Z=te;continue}if(te<56320){(z-=3)>-1&&W.push(239,191,189),Z=te;continue}te=65536+(Z-55296<<10|te-56320)}else Z&&(z-=3)>-1&&W.push(239,191,189);if(Z=null,te<128){if((z-=1)<0)break;W.push(te)}else if(te<2048){if((z-=2)<0)break;W.push(te>>6|192,63&te|128)}else if(te<65536){if((z-=3)<0)break;W.push(te>>12|224,te>>6&63|128,63&te|128)}else{if(!(te<1114112))throw new Error("Invalid code point");if((z-=4)<0)break;W.push(te>>18|240,te>>12&63|128,te>>6&63|128,63&te|128)}}return W}function he(re){return e.toByteArray(function Be(re){if((re=(re=re.split("=")[0]).trim().replace(ke,"")).length<2)return"";for(;re.length%4!=0;)re+="=";return re}(re))}function Y(re,z,te,X){for(var Z=0;Z<X&&!(Z+te>=z.length||Z>=re.length);++Z)z[Z+te]=re[Z];return Z}function J(re,z){return re instanceof z||null!=re&&null!=re.constructor&&null!=re.constructor.name&&re.constructor.name===z.name}function Me(re){return re!=re}var ae=function(){for(var re="0123456789abcdef",z=new Array(256),te=0;te<16;++te)for(var X=16*te,Z=0;Z<16;++Z)z[X+Z]=re[te]+re[Z];return z}()},8377:Fn=>{window,Fn.exports=function(Ve){var O={};function r(e){if(O[e])return O[e].exports;var S=O[e]={i:e,l:!1,exports:{}};return Ve[e].call(S.exports,S,S.exports,r),S.l=!0,S.exports}return r.m=Ve,r.c=O,r.d=function(e,S,R){r.o(e,S)||Object.defineProperty(e,S,{enumerable:!0,get:R})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,S){if(1&S&&(e=r(e)),8&S||4&S&&"object"==typeof e&&e&&e.__esModule)return e;var R=Object.create(null);if(r.r(R),Object.defineProperty(R,"default",{enumerable:!0,value:e}),2&S&&"string"!=typeof e)for(var j in e)r.d(R,j,function(U){return e[U]}.bind(null,j));return R},r.n=function(e){var S=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(S,"a",S),S},r.o=function(e,S){return Object.prototype.hasOwnProperty.call(e,S)},r.p="/dist/",r(r.s="./index.js")}({"./externals/base64.js":function(Ve,O,r){var R,j,U,L,b,e_encode=function(R){for(var j=[],U=0;U<R.length;++U){var L=R.charCodeAt(U);L<128?j.push(L):L<2048?(j.push(192|L>>6),j.push(128|63&L)):L<65536?(j.push(224|L>>12),j.push(128|63&L>>6),j.push(128|63&L)):(j.push(240|L>>18),j.push(128|63&L>>12),j.push(128|63&L>>6),j.push(128|63&L))}return j},e_decode=function(R){for(var j=[],U=0;U<R.length;){var L=R[U++];L<128||(L<224?(L=(31&L)<<6,L|=63&R[U++]):L<240?(L=(15&L)<<12,L|=(63&R[U++])<<6,L|=63&R[U++]):(L=(7&L)<<18,L|=(63&R[U++])<<12,L|=(63&R[U++])<<6,L|=63&R[U++])),j.push(String.fromCharCode(L))}return j.join("")},S={};R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",j=function(c){for(var g=0,v=[],T=0|c.length/3;0<T--;){var k=(c[g]<<16)+(c[g+1]<<8)+c[g+2];g+=3,v.push(R.charAt(63&k>>18)),v.push(R.charAt(63&k>>12)),v.push(R.charAt(63&k>>6)),v.push(R.charAt(63&k))}return c.length-g==2?(v.push(R.charAt(63&(k=(c[g]<<16)+(c[g+1]<<8))>>18)),v.push(R.charAt(63&k>>12)),v.push(R.charAt(63&k>>6)),v.push("=")):c.length-g==1&&(v.push(R.charAt(63&(k=c[g]<<16)>>18)),v.push(R.charAt(63&k>>12)),v.push("==")),v.join("")},U=function(){for(var f=[],c=0;c<R.length;++c)f[R.charCodeAt(c)]=c;return f["=".charCodeAt(0)]=0,f}(),L=function(c){for(var g=0,v=[],T=0|c.length/4;0<T--;){var k=(U[c.charCodeAt(g)]<<18)+(U[c.charCodeAt(g+1)]<<12)+(U[c.charCodeAt(g+2)]<<6)+U[c.charCodeAt(g+3)];v.push(255&k>>16),v.push(255&k>>8),v.push(255&k),g+=4}return v&&("="==c.charAt(g-2)?(v.pop(),v.pop()):"="==c.charAt(g-1)&&v.pop()),v},b={encode:function(f){for(var c=[],g=0;g<f.length;++g)c.push(f.charCodeAt(g));return c},decode:function(f){for(var c=0;c<s.length;++c)a[c]=String.fromCharCode(a[c]);return a.join("")}},S.decodeArray=function(f){var c=L(f);return new Uint8Array(c)},S.encodeASCII=function(f){var c=b.encode(f);return j(c)},S.decodeASCII=function(f){var c=L(f);return b.decode(c)},S.encode=function(f){var c=e_encode(f);return j(c)},S.decode=function(f){var c=L(f);return e_decode(c)},O.decode=S.decode,O.decodeArray=S.decodeArray,O.encode=S.encode,O.encodeASCII=S.encodeASCII},"./externals/cea608-parser.js":function(Ve,O,r){!function(e){"use strict";var S={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},R=function(I){var G=I;return S.hasOwnProperty(I)&&(G=S[I]),String.fromCharCode(G)},j=15,U=32,L={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},b={17:2,18:4,21:6,22:8,23:10,19:13,20:15},f={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},c={25:2,26:4,29:6,30:8,31:10,27:13,28:15},g=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],v={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(I){this.time=I},log:function(I,G){this.verboseLevel>=this.verboseFilter[I]&&console.log(this.time+" ["+I+"] "+G)}},T=function(I){for(var G=[],ee=0;ee<I.length;ee++)G.push(I[ee].toString(16));return G},k=function(I,G,ee,de,ue){this.foreground=I||"white",this.underline=G||!1,this.italics=ee||!1,this.background=de||"black",this.flash=ue||!1};k.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(I){for(var G=["foreground","underline","italics","background","flash"],ee=0;ee<G.length;ee++){var de=G[ee];I.hasOwnProperty(de)&&(this[de]=I[de])}},isDefault:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},equals:function(I){return this.foreground===I.foreground&&this.underline===I.underline&&this.italics===I.italics&&this.background===I.background&&this.flash===I.flash},copy:function(I){this.foreground=I.foreground,this.underline=I.underline,this.italics=I.italics,this.background=I.background,this.flash=I.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var N=function(I,G,ee,de,ue,Te){this.uchar=I||" ",this.penState=new k(G,ee,de,ue,Te)};N.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(I,G){this.uchar=I,this.penState.copy(G)},setPenState:function(I){this.penState.copy(I)},equals:function(I){return this.uchar===I.uchar&&this.penState.equals(I.penState)},copy:function(I){this.uchar=I.uchar,this.penState.copy(I.penState)},isEmpty:function(){return" "===this.uchar&&this.penState.isDefault()}};var B=function(){this.chars=[];for(var I=0;I<U;I++)this.chars.push(new N);this.pos=0,this.currPenState=new k};B.prototype={equals:function(I){for(var G=!0,ee=0;ee<U;ee++)if(!this.chars[ee].equals(I.chars[ee])){G=!1;break}return G},copy:function(I){for(var G=0;G<U;G++)this.chars[G].copy(I.chars[G])},isEmpty:function(){for(var I=!0,G=0;G<U;G++)if(!this.chars[G].isEmpty()){I=!1;break}return I},setCursor:function(I){this.pos!==I&&(this.pos=I),this.pos<0?(v.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>U&&(v.log("ERROR","Too large cursor position "+this.pos),this.pos=U)},moveCursor:function(I){var G=this.pos+I;if(I>1)for(var ee=this.pos+1;ee<G+1;ee++)this.chars[ee].setPenState(this.currPenState);this.setCursor(G)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(I){I>=144&&this.backSpace();var G=R(I);this.pos>=U?v.log("ERROR","Cannot insert "+I.toString(16)+" ("+G+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(G,this.currPenState),this.moveCursor(1))},clearFromPos:function(I){var G;for(G=I;G<U;G++)this.chars[G].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var I=[],G=!0,ee=0;ee<U;ee++){var de=this.chars[ee].uchar;" "!==de&&(G=!1),I.push(de)}return G?"":I.join("")},setPenStyles:function(I){this.currPenState.setStyles(I),this.chars[this.pos].setPenState(this.currPenState)}};var x=function(){this.rows=[];for(var I=0;I<j;I++)this.rows.push(new B);this.currRow=14,this.nrRollUpRows=null,this.reset()};x.prototype={reset:function(){for(var I=0;I<j;I++)this.rows[I].clear();this.currRow=14},equals:function(I){for(var G=!0,ee=0;ee<j;ee++)if(!this.rows[ee].equals(I.rows[ee])){G=!1;break}return G},copy:function(I){for(var G=0;G<j;G++)this.rows[G].copy(I.rows[G])},isEmpty:function(){for(var I=!0,G=0;G<j;G++)if(!this.rows[G].isEmpty()){I=!1;break}return I},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(I){this.rows[this.currRow].insertChar(I)},setPen:function(I){this.rows[this.currRow].setPenStyles(I)},moveCursor:function(I){this.rows[this.currRow].moveCursor(I)},setCursor:function(I){v.log("INFO","setCursor: "+I),this.rows[this.currRow].setCursor(I)},setPAC:function(I){v.log("INFO","pacData = "+JSON.stringify(I));var G=I.row-1;this.nrRollUpRows&&G<this.nrRollUpRows-1&&(G=this.nrRollUpRows-1),this.currRow=G;var ee=this.rows[this.currRow];if(null!==I.indent){var ue=Math.max(I.indent-1,0);ee.setCursor(I.indent),I.color=ee.chars[ue].penState.foreground}this.setPen({foreground:I.color,underline:I.underline,italics:I.italics,background:"black",flash:!1})},setBkgData:function(I){v.log("INFO","bkgData = "+JSON.stringify(I)),this.backSpace(),this.setPen(I),this.insertChar(32)},setRollUpRows:function(I){this.nrRollUpRows=I},rollUp:function(){if(null!==this.nrRollUpRows){v.log("TEXT",this.getDisplayText());var G=this.rows.splice(this.currRow+1-this.nrRollUpRows,1)[0];G.clear(),this.rows.splice(this.currRow,0,G),v.log("INFO","Rolling up")}else v.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(I){I=I||!1;for(var G=[],ee="",ue=0;ue<j;ue++){var Te=this.rows[ue].getTextString();Te&&G.push(I?"Row "+(ue+1)+': "'+Te+'"':Te.trim())}return G.length>0&&(ee=I?"["+G.join(" | ")+"]":G.join("\n")),ee},getTextAndFormat:function(){return this.rows}};var P=function(I,G){this.chNr=I,this.outputFilter=G,this.mode=null,this.verbose=0,this.displayedMemory=new x,this.nonDisplayedMemory=new x,this.lastOutputScreen=new x,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};P.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(I){this.outputFilter=I},setPAC:function(I){this.writeScreen.setPAC(I)},setBkgData:function(I){this.writeScreen.setBkgData(I)},setMode:function(I){I!==this.mode&&(this.mode=I,v.log("INFO","MODE="+I),"MODE_POP-ON"==this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=I)},insertChars:function(I){for(var G=0;G<I.length;G++)this.writeScreen.insertChar(I[G]);v.log("INFO",(this.writeScreen===this.displayedMemory?"DISP":"NON_DISP")+": "+this.writeScreen.getDisplayText(!0)),("MODE_PAINT-ON"===this.mode||"MODE_ROLL-UP"===this.mode)&&(v.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){v.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){v.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){v.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(I){v.log("INFO","RU("+I+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(I)},cc_FON:function(){v.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){v.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){v.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){v.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){v.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){v.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){v.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(v.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var I=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=I,this.writeScreen=this.nonDisplayedMemory,v.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(I){v.log("INFO","TO("+I+") - Tab Offset"),this.writeScreen.moveCursor(I)},cc_MIDROW:function(I){var G={flash:!1};if(G.underline=I%2==1,G.italics=I>=46,G.italics)G.foreground="white";else{var ee=Math.floor(I/2)-16;G.foreground=["white","green","blue","cyan","red","yellow","magenta"][ee]}v.log("INFO","MIDROW: "+JSON.stringify(G)),this.writeScreen.setPen(G)},outputDataUpdate:function(){var I=v.time;null!==I&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(I,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,I,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:I):this.cueStartTime=I,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(I){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,I,this.displayedMemory),this.cueStartTime=I))}};var _=function(I,G,ee){this.field=I||1,this.outputs=[G,ee],this.channels=[new P(1,G),new P(2,ee)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};_.prototype={getHandler:function(I){return this.channels[I].getHandler()},setHandler:function(I,G){this.channels[I].setHandler(G)},addData:function(I,G){var ee,de,ue,Te=!1;this.lastTime=I,v.setTime(I);for(var q=0;q<G.length;q+=2)ue=127&G[q+1],(de=127&G[q])>=16&&de<=31&&de===this.lastCmdA&&ue===this.lastCmdB?(this.lastCmdA=null,this.lastCmdB=null,v.log("DEBUG","Repeated command ("+T([de,ue])+") is dropped")):0!==de||0!==ue?(v.log("DATA","["+T([G[q],G[q+1]])+"] -> ("+T([de,ue])+")"),(ee=this.parseCmd(de,ue))||(ee=this.parseMidrow(de,ue)),ee||(ee=this.parsePAC(de,ue)),ee||(ee=this.parseBackgroundAttributes(de,ue)),!ee&&(Te=this.parseChars(de,ue))&&(this.currChNr&&this.currChNr>=0?this.channels[this.currChNr-1].insertChars(Te):v.log("WARNING","No channel found yet. TEXT-MODE?")),ee?this.dataCounters.cmd+=2:Te?this.dataCounters.char+=2:(this.dataCounters.other+=2,v.log("WARNING","Couldn't parse cleaned data "+T([de,ue])+" orig: "+T([G[q],G[q+1]])))):this.dataCounters.padding+=2},parseCmd:function(I,G){var ee;if(!((20===I||21===I||28===I||29===I)&&32<=G&&G<=47||(23===I||31===I)&&33<=G&&G<=35))return!1;var Te=this.channels[(ee=20===I||21===I||23===I?1:2)-1];return 20===I||21===I||28===I||29===I?32===G?Te.cc_RCL():33===G?Te.cc_BS():34===G?Te.cc_AOF():35===G?Te.cc_AON():36===G?Te.cc_DER():37===G?Te.cc_RU(2):38===G?Te.cc_RU(3):39===G?Te.cc_RU(4):40===G?Te.cc_FON():41===G?Te.cc_RDC():42===G?Te.cc_TR():43===G?Te.cc_RTD():44===G?Te.cc_EDM():45===G?Te.cc_CR():46===G?Te.cc_ENM():47===G&&Te.cc_EOC():Te.cc_TO(G-32),this.lastCmdA=I,this.lastCmdB=G,this.currChNr=ee,!0},parseMidrow:function(I,G){var ee=null;if((17===I||25===I)&&32<=G&&G<=47){if((ee=17===I?1:2)!==this.currChNr)return v.log("ERROR","Mismatch channel in midrow parsing"),!1;var de=this.channels[ee-1];return de.insertChars([32]),de.cc_MIDROW(G),v.log("DEBUG","MIDROW ("+T([I,G])+")"),this.lastCmdA=I,this.lastCmdB=G,!0}return!1},parsePAC:function(I,G){var ee;if(!((17<=I&&I<=23||25<=I&&I<=31)&&64<=G&&G<=127||(16===I||24===I)&&64<=G&&G<=95))return!1;ee=I<=23?1:2;var q=this.interpretPAC(64<=G&&G<=95?1===ee?L[I]:f[I]:1===ee?b[I]:c[I],G);return this.channels[ee-1].setPAC(q),this.lastCmdA=I,this.lastCmdB=G,this.currChNr=ee,!0},interpretPAC:function(I,G){var ee,de={color:null,italics:!1,indent:null,underline:!1,row:I};return de.underline=1==(1&(ee=G>95?G-96:G-64)),ee<=13?de.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(ee/2)]:ee<=15?(de.italics=!0,de.color="white"):de.indent=4*Math.floor((ee-16)/2),de},parseChars:function(I,G){var ee=null,de=null,ue=null;if(I>=25?(ee=2,ue=I-8):(ee=1,ue=I),17<=ue&&ue<=19){var q;v.log("INFO","Special char '"+R(q=17===ue?G+80:18===ue?G+112:G+144)+"' in channel "+ee),de=[q],this.lastCmdA=I,this.lastCmdB=G}else 32<=I&&I<=127&&(de=0===G?[I]:[I,G],this.lastCmdA=null,this.lastCmdB=null);if(de){var se=T(de);v.log("DEBUG","Char codes =  "+se.join(","))}return de},parseBackgroundAttributes:function(I,G){var ee,de;return!!((16===I||24===I)&&32<=G&&G<=47||(23===I||31===I)&&45<=G&&G<=47)&&(ee={},16===I||24===I?(de=Math.floor((G-32)/2),ee.background=g[de],G%2==1&&(ee.background=ee.background+"_semi")):45===G?ee.background="transparent":(ee.foreground="black",47===G&&(ee.underline=!0)),this.channels[(I<24?1:2)-1].setBkgData(ee),this.lastCmdA=I,this.lastCmdB=G,!0)},reset:function(){for(var I=0;I<this.channels.length;I++)this.channels[I]&&this.channels[I].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(I){for(var G=0;G<this.channels.length;G++)this.channels[G]&&this.channels[G].cueSplitAtTime(I)}};e.logger=v,e.PenState=k,e.CaptionScreen=x,e.Cea608Parser=_,e.findCea608Nalus=function(I,G,ee){for(var de=0,ue=G,q=[],se=function(xe,ve,Oe,Ee){if(4!==xe||ve<8)return null;var Ie=Oe.getUint8(Ee),Re=Oe.getUint16(Ee+1),Pe=Oe.getUint32(Ee+3),ke=Oe.getUint8(Ee+7);return 181==Ie&&49==Re&&1195456820==Pe&&3==ke};ue<G+ee;){if(de=I.getUint32(ue),6==(31&I.getUint8(ue+4)))for(var H=ue+5,ce=-1;H<ue+4+de-1;){ce=0;for(var ne=255;255===ne;)ce+=ne=I.getUint8(H),H++;var pe=0;for(ne=255;255===ne;)pe+=ne=I.getUint8(H),H++;se(ce,pe,I,H)&&q.push([H,pe]),H+=pe}ue+=de+4}return q},e.extractCea608DataFromRange=function(I,G){var ee=G[0],de=[[],[]],ue=31&I.getUint8(ee+=8);ee+=2;for(var Te=0;Te<ue;Te++){var q=I.getUint8(ee),se=4&q,H=3&q;ee++;var ce=I.getUint8(ee);ee++;var ne=I.getUint8(ee);ee++,se&&(127&ce)+(127&ne)!=0&&(0===H?(de[0].push(ce),de[0].push(ne)):1===H&&(de[1].push(ce),de[1].push(ne)))}return de}}(O)},"./externals/xml2json.js":function(Ve,O,r){"use strict";r.r(O),O.default=function e(S){S=S||{},function j(){void 0===S.escapeMode&&(S.escapeMode=!0),void 0===S.attributePrefix&&(S.attributePrefix="_"),S.arrayAccessForm=S.arrayAccessForm||"none",S.emptyNodeForm=S.emptyNodeForm||"text",void 0===S.enableToStringFunc&&(S.enableToStringFunc=!0),S.arrayAccessFormPaths=S.arrayAccessFormPaths||[],void 0===S.skipEmptyTextNodesForObj&&(S.skipEmptyTextNodesForObj=!0),void 0===S.stripWhitespaces&&(S.stripWhitespaces=!0),S.datetimeAccessFormPaths=S.datetimeAccessFormPaths||[],void 0===S.useDoubleQuotes&&(S.useDoubleQuotes=!1),S.xmlElementsFilter=S.xmlElementsFilter||[],S.jsonPropertiesFilter=S.jsonPropertiesFilter||[],void 0===S.keepCData&&(S.keepCData=!1),void 0===S.ignoreRoot&&(S.ignoreRoot=!1)}();var U_ELEMENT_NODE=1,U_TEXT_NODE=3,U_CDATA_SECTION_NODE=4,U_COMMENT_NODE=8,U_DOCUMENT_NODE=9;function b(se){var H=se.localName;return null==H&&(H=se.baseName),(null==H||""==H)&&(H=se.nodeName),H}function c(se){return"string"==typeof se?se.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):se}function v(se,H,ce,ne){for(var pe=0;pe<se.length;pe++){var me=se[pe];if("string"==typeof me){if(me==ne)break}else if(me instanceof RegExp){if(me.test(ne))break}else if("function"==typeof me&&me(H,ce,ne))break}return pe!=se.length}function T(se,H,ce){"property"===S.arrayAccessForm&&(se[H+"_asArray"]=se[H]instanceof Array?se[H]:[se[H]]),!(se[H]instanceof Array)&&S.arrayAccessFormPaths.length>0&&v(S.arrayAccessFormPaths,se,H,ce)&&(se[H]=[se[H]])}function k(se){var H=se.split(/[-T:+Z]/g),ce=new Date(H[0],H[1]-1,H[2]),ne=H[5].split(".");if(ce.setHours(H[3],H[4],ne[0]),ne.length>1&&ce.setMilliseconds(ne[1]),H[6]&&H[7]){var pe=60*H[6]+Number(H[7]);pe=0+("-"==(/\d\d-\d\d:\d\d$/.test(se)?"-":"+")?-1*pe:pe),ce.setMinutes(ce.getMinutes()-pe-ce.getTimezoneOffset())}else-1!==se.indexOf("Z",se.length-1)&&(ce=new Date(Date.UTC(ce.getFullYear(),ce.getMonth(),ce.getDate(),ce.getHours(),ce.getMinutes(),ce.getSeconds(),ce.getMilliseconds())));return ce}function B(se,H,ce,ne){return!(H==U_ELEMENT_NODE&&S.xmlElementsFilter.length>0)||v(S.xmlElementsFilter,se,ce,ne)}function x(se,H){if(se.nodeType==U_DOCUMENT_NODE){for(var ce=new Object,ne=se.childNodes,pe=0;pe<ne.length;pe++)(me=ne[pe]).nodeType==U_ELEMENT_NODE&&(S.ignoreRoot?ce=x(me):(ce={})[xe=b(me)]=x(me));return ce}if(se.nodeType==U_ELEMENT_NODE){(ce=new Object).__cnt=0;var ve=[];for(ne=se.childNodes,pe=0;pe<ne.length;pe++){var me,xe=b(me=ne[pe]);if(me.nodeType!=U_COMMENT_NODE){var Oe=H+"."+xe;if(B(ce,me.nodeType,xe,Oe))if(ce.__cnt++,null==ce[xe]){var Ee=x(me,Oe);("#text"!=xe||/[^\s]/.test(Ee))&&((Ie={})[xe]=Ee,ve.push(Ie)),ce[xe]=Ee,T(ce,xe,Oe)}else{var Ie;null!=ce[xe]&&(ce[xe]instanceof Array||(ce[xe]=[ce[xe]],T(ce,xe,Oe))),Ee=x(me,Oe),("#text"!=xe||/[^\s]/.test(Ee))&&((Ie={})[xe]=Ee,ve.push(Ie)),ce[xe][ce[xe].length]=Ee}}}ce.__children=ve;for(var Re=b(se),Pe=0;Pe<se.attributes.length;Pe++){var ke=se.attributes[Pe];ce.__cnt++;for(var Be=ke.value,qe=0,He=S.matchers.length;qe<He;qe++){var De=S.matchers[qe];De.test(ke,Re)&&(Be=De.converter(ke.value))}ce[S.attributePrefix+ke.name]=Be}var he=function f(se){return se.prefix}(se);return null!=he&&""!=he&&(ce.__cnt++,ce.__prefix=he),null!=ce["#text"]&&(ce.__text=ce["#text"],ce.__text instanceof Array&&(ce.__text=ce.__text.join("\n")),S.stripWhitespaces&&(ce.__text=ce.__text.trim()),delete ce["#text"],"property"==S.arrayAccessForm&&delete ce["#text_asArray"],ce.__text=function N(se,H,ce){if(S.datetimeAccessFormPaths.length>0){var ne=ce.split(".#")[0];return v(S.datetimeAccessFormPaths,se,H,ne)?k(se):se}return se}(ce.__text,xe,H+"."+xe)),null!=ce["#cdata-section"]&&(ce.__cdata=ce["#cdata-section"],delete ce["#cdata-section"],"property"==S.arrayAccessForm&&delete ce["#cdata-section_asArray"]),0==ce.__cnt&&"text"==S.emptyNodeForm?ce="":1==ce.__cnt&&null!=ce.__text?ce=ce.__text:1!=ce.__cnt||null==ce.__cdata||S.keepCData?ce.__cnt>1&&null!=ce.__text&&S.skipEmptyTextNodesForObj&&(S.stripWhitespaces&&""==ce.__text||""==ce.__text.trim())&&delete ce.__text:ce=ce.__cdata,delete ce.__cnt,S.enableToStringFunc&&(null!=ce.__text||null!=ce.__cdata)&&(ce.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),ce}if(se.nodeType==U_TEXT_NODE||se.nodeType==U_CDATA_SECTION_NODE)return se.nodeValue}function P(se,H,ce,ne){var pe="<"+(null!=se&&null!=se.__prefix?se.__prefix+":":"")+H;if(null!=ce)for(var me=0;me<ce.length;me++){var xe=ce[me],ve=se[xe];S.escapeMode&&(ve=c(ve)),pe+=" "+xe.substr(S.attributePrefix.length)+"=",pe+=S.useDoubleQuotes?'"'+ve+'"':"'"+ve+"'"}return pe+(ne?"/>":">")}function _(se,H){return"</"+(null!=se.__prefix?se.__prefix+":":"")+H+">"}function y(se,H){return!!("property"==S.arrayAccessForm&&function D(se,H){return-1!==se.indexOf(H,se.length-H.length)}(H.toString(),"_asArray")||0==H.toString().indexOf(S.attributePrefix)||0==H.toString().indexOf("__")||se[H]instanceof Function)}function A(se){var H=0;if(se instanceof Object)for(var ce in se)y(se,ce)||H++;return H}function I(se,H,ce){return 0==S.jsonPropertiesFilter.length||""==ce||v(S.jsonPropertiesFilter,se,H,ce)}function G(se){var H=[];if(se instanceof Object)for(var ce in se)-1==ce.toString().indexOf("__")&&0==ce.toString().indexOf(S.attributePrefix)&&H.push(ce);return H}function de(se){var H="";return se instanceof Object?H+=function ee(se){var H="";return null!=se.__cdata&&(H+="<![CDATA["+se.__cdata+"]]>"),null!=se.__text&&(H+=S.escapeMode?c(se.__text):se.__text),H}(se):null!=se&&(H+=S.escapeMode?c(se):se),H}function ue(se,H){return""===se?H:se+"."+H}function Te(se,H,ce,ne){var pe="";if(0==se.length)pe+=P(se,H,ce,!0);else for(var me=0;me<se.length;me++)pe+=P(se[me],H,G(se[me]),!1),pe+=q(se[me],ue(ne,H)),pe+=_(se[me],H);return pe}function q(se,H){var ce="";if(A(se)>0)for(var pe in se)if(!y(se,pe)&&(""==H||I(se,pe,ue(H,pe)))){var me=se[pe],xe=G(me);null==me||null==me?ce+=P(me,pe,xe,!0):me instanceof Object?me instanceof Array?ce+=Te(me,pe,xe,H):me instanceof Date?(ce+=P(me,pe,xe,!1),ce+=me.toISOString(),ce+=_(me,pe)):A(me)>0||null!=me.__text||null!=me.__cdata?(ce+=P(me,pe,xe,!1),ce+=q(me,ue(H,pe)),ce+=_(me,pe)):ce+=P(me,pe,xe,!0):(ce+=P(me,pe,xe,!1),ce+=de(me),ce+=_(me,pe))}return ce+de(se)}this.parseXmlString=function(se){var ce;if(window.ActiveXObject||window,void 0===se)return null;if(window.DOMParser){var ne=new window.DOMParser;try{(ce=ne.parseFromString(se,"text/xml")).getElementsByTagNameNS("*","parsererror").length>0&&(ce=null)}catch(me){ce=null}}else 0==se.indexOf("<?")&&(se=se.substr(se.indexOf("?>")+2)),(ce=new ActiveXObject("Microsoft.XMLDOM")).async="false",ce.loadXML(se);return ce},this.asArray=function(se){return void 0===se||null==se?[]:se instanceof Array?se:[se]},this.toXmlDateTime=function(se){return se instanceof Date?se.toISOString():"number"==typeof se?new Date(se).toISOString():null},this.asDateTime=function(se){return"string"==typeof se?k(se):se},this.xml2json=function(se){return x(se)},this.xml_str2json=function(se){var H=this.parseXmlString(se);return null!=H?this.xml2json(H):null},this.json2xml_str=function(se){return q(se,"")},this.json2xml=function(se){var H=this.json2xml_str(se);return this.parseXmlString(H)},this.getVersion=function(){return"1.2.0"}}},"./index.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./index_mediaplayerOnly.js");r.d(O,"MediaPlayer",function(){return e.MediaPlayer});var S=r("./src/streaming/utils/Capabilities.js");r.d(O,"supportsMediaSource",function(){return S.supportsMediaSource});var R=r("./src/streaming/metrics/MetricsReporting.js");r.d(O,"MetricsReporting",function(){return R.default});var j=r("./src/streaming/protection/Protection.js");r.d(O,"Protection",function(){return j.default});var U=r("./src/streaming/MediaPlayerFactory.js");r.d(O,"MediaPlayerFactory",function(){return U.default});var L=r("./src/core/Debug.js");r.d(O,"Debug",function(){return L.default}),dashjs.Protection=j.default,dashjs.MetricsReporting=R.default,dashjs.MediaPlayerFactory=U.default,dashjs.Debug=L.default,dashjs.supportsMediaSource=S.supportsMediaSource,O.default=dashjs},"./index_mediaplayerOnly.js":function(Ve,O,r){"use strict";r.r(O),function(e){var S=r("./src/streaming/MediaPlayer.js");r.d(O,"MediaPlayer",function(){return S.default});var R=r("./src/core/FactoryMaker.js");r.d(O,"FactoryMaker",function(){return R.default});var j=r("./src/core/Debug.js");r.d(O,"Debug",function(){return j.default});var U=r("./src/core/Version.js"),f=(r("./node_modules/es6-promise/auto.js"),"undefined"!=typeof window&&window||e),c=f.dashjs;c||(c=f.dashjs={}),c.MediaPlayer=S.default,c.FactoryMaker=R.default,c.Debug=j.default,c.Version=Object(U.getVersionString)(),O.default=c}.call(this,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/base64-js/index.js":function(Ve,O,r){"use strict";O.byteLength=function f(N){var B=b(N),P=B[1];return 3*(B[0]+P)/4-P},O.toByteArray=function g(N){var B,I,x=b(N),P=x[0],_=x[1],D=new R(function c(N,B,x){return 3*(B+x)/4-x}(0,P,_)),y=0,A=_>0?P-4:P;for(I=0;I<A;I+=4)B=S[N.charCodeAt(I)]<<18|S[N.charCodeAt(I+1)]<<12|S[N.charCodeAt(I+2)]<<6|S[N.charCodeAt(I+3)],D[y++]=B>>16&255,D[y++]=B>>8&255,D[y++]=255&B;return 2===_&&(B=S[N.charCodeAt(I)]<<2|S[N.charCodeAt(I+1)]>>4,D[y++]=255&B),1===_&&(B=S[N.charCodeAt(I)]<<10|S[N.charCodeAt(I+1)]<<4|S[N.charCodeAt(I+2)]>>2,D[y++]=B>>8&255,D[y++]=255&B),D},O.fromByteArray=function k(N){for(var B,x=N.length,P=x%3,_=[],D=16383,y=0,A=x-P;y<A;y+=D)_.push(T(N,y,y+D>A?A:y+D));return 1===P?_.push(e[(B=N[x-1])>>2]+e[B<<4&63]+"=="):2===P&&_.push(e[(B=(N[x-2]<<8)+N[x-1])>>10]+e[B>>4&63]+e[B<<2&63]+"="),_.join("")};for(var e=[],S=[],R="undefined"!=typeof Uint8Array?Uint8Array:Array,j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",U=0,L=j.length;U<L;++U)e[U]=j[U],S[j.charCodeAt(U)]=U;function b(N){var B=N.length;if(B%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var x=N.indexOf("=");return-1===x&&(x=B),[x,x===B?0:4-x%4]}function v(N){return e[N>>18&63]+e[N>>12&63]+e[N>>6&63]+e[63&N]}function T(N,B,x){for(var _=[],D=B;D<x;D+=3)_.push(v((N[D]<<16&16711680)+(N[D+1]<<8&65280)+(255&N[D+2])));return _.join("")}S["-".charCodeAt(0)]=62,S["_".charCodeAt(0)]=63},"./node_modules/bcp-47-match/index.js":function(Ve,O,r){"use strict";function j(L,b){return function f(c,g){for(var B,x,P,v=U(c,"tag"),T=U(null==g?"*":g,"range"),k=[],N=-1;++N<T.length;)if(B=T[N].toLowerCase(),b||"*"!==B){for(x=-1,P=[];++x<v.length;)if(L(v[x].toLowerCase(),B)){if(!b)return v[x];k.push(v[x])}else P.push(v[x]);v=P}return b?k:void 0}}function U(L,b){var f=L&&"string"==typeof L?[L]:L;if(!f||"object"!=typeof f||!("length"in f))throw new Error("Invalid "+b+" `"+f+"`, expected non-empty string");return f}O.basicFilter=j(function e(L,b){return"*"===b||L===b||L.indexOf(b+"-")>-1},!0),O.extendedFilter=j(function S(L,b){var f=L.split("-"),c=b.split("-"),g=0,v=0;if("*"!==c[v]&&f[g]!==c[v])return!1;for(g++,v++;v<c.length;)if("*"!==c[v]){if(!f[g])return!1;if(f[g]!==c[v]){if(1===f[g].length)return!1;g++}else g++,v++}else v++;return!0},!0),O.lookup=j(function R(L,b){for(var c,f=b;;){if("*"===f||L===f)return!0;if((c=f.lastIndexOf("-"))<0)return!1;"-"===f.charAt(c-2)&&(c-=2),f=f.slice(0,c)}})},"./node_modules/bcp-47-normalize/index.js":function(Ve,O,r){"use strict";Ve.exports=r("./node_modules/bcp-47-normalize/lib/index.js")},"./node_modules/bcp-47-normalize/lib/defaults.json":function(Ve){Ve.exports=JSON.parse('["mni-beng-in","mni-mtei-in","sat-deva-in","sat-olck-in","shi-latn-ma","shi-tfng-ma","vai-latn-lr","vai-vaii-lr","yue-hans-cn","yue-hant-hk","az-arab-ir","az-cyrl-az","az-latn-az","bm-nkoo-ml","bs-cyrl-ba","bs-latn-ba","en-dsrt-us","ff-adlm-gn","ff-latn-sn","ha-arab-ng","hi-latn-in","iu-latn-ca","ks-arab-in","ks-deva-in","mn-mong-cn","ms-arab-my","pa-arab-pk","pa-guru-in","sd-arab-pk","sd-deva-in","sr-cyrl-rs","sr-latn-rs","su-latn-id","uz-arab-af","uz-cyrl-uz","uz-latn-uz","zh-hans-cn","zh-hant-tw","mni-beng","sat-olck","shi-tfng","vai-vaii","yue-hant","az-latn","bs-latn","ff-latn","jbo-001","ks-arab","pa-guru","prg-001","sd-arab","sr-cyrl","su-latn","uz-latn","zh-hans","agq-cm","ar-001","arn-cl","asa-tz","ast-es","bas-cm","bem-zm","bez-tz","bgn-pk","blt-vn","brx-in","bss-cm","byn-er","cad-us","cch-ng","ccp-bd","ceb-ph","cgg-ug","chr-us","cic-us","ckb-iq","dav-ke","dje-ne","doi-in","dsb-de","dua-cm","dyo-sn","ebu-ke","eo-001","ewo-cm","fil-ph","fur-it","gaa-gh","gez-et","gsw-ch","guz-ke","haw-us","hsb-de","ia-001","ife-tg","io-001","jgo-cm","jmc-tz","kab-dz","kaj-ng","kam-ke","kcg-ng","kde-tz","kea-cv","ken-cm","khq-ml","kkj-cm","kln-ke","kok-in","kpe-lr","ksb-tz","ksf-cm","ksh-de","lag-tz","lkt-us","lrc-ir","luo-ke","luy-ke","mai-in","mas-ke","mer-ke","mfe-mu","mgh-mz","mgo-cm","moh-ca","mua-cm","mus-us","myv-ru","mzn-ir","naq-na","nds-de","nmg-cm","nnh-cm","nqo-gn","nso-za","nus-ss","nyn-ug","osa-us","pcm-ng","quc-gt","rof-tz","rwk-tz","sah-ru","saq-ke","sbp-tz","scn-it","sdh-ir","seh-mz","ses-ml","sid-et","sma-se","smj-se","smn-fi","sms-fi","ssy-er","syr-iq","szl-pl","teo-ug","tig-er","trv-tw","trw-pk","twq-ne","tzm-ma","vo-001","vun-tz","wae-ch","wal-et","wbp-au","xog-ug","yav-cm","yi-001","zgh-ma","aa-et","af-za","ak-gh","am-et","an-es","as-in","ba-ru","be-by","bg-bg","bm-ml","bn-bd","bo-cn","br-fr","ca-es","ce-ru","co-fr","cs-cz","cu-ru","cv-ru","cy-gb","da-dk","de-de","dv-mv","dz-bt","ee-gh","el-gr","en-us","es-es","et-ee","eu-es","fa-ir","fi-fi","fo-fo","fr-fr","fy-nl","ga-ie","gd-gb","gl-es","gn-py","gu-in","gv-im","ha-ng","he-il","hi-in","hr-hr","hu-hu","hy-am","id-id","ig-ng","ii-cn","is-is","it-it","iu-ca","ja-jp","jv-id","ka-ge","ki-ke","kk-kz","kl-gl","km-kh","kn-in","ko-kr","ku-tr","kw-gb","ky-kg","lb-lu","lg-ug","ln-cd","lo-la","lt-lt","lu-cd","lv-lv","mg-mg","mi-nz","mk-mk","ml-in","mn-mn","mr-in","ms-my","mt-mt","my-mm","nb-no","nd-zw","ne-np","nl-nl","nn-no","nr-za","nv-us","ny-mw","oc-fr","om-et","or-in","os-ge","pl-pl","ps-af","pt-br","qu-pe","rm-ch","rn-bi","ro-ro","ru-ru","rw-rw","sa-in","sc-it","se-no","sg-cf","si-lk","sk-sk","sl-si","sn-zw","so-so","sq-al","ss-za","st-za","sv-se","sw-tz","ta-in","te-in","tg-tj","th-th","ti-et","tk-tm","tn-za","to-to","tr-tr","ts-za","tt-ru","ug-cn","uk-ua","ur-pk","ve-za","vi-vn","wa-be","wo-sn","xh-za","yo-ng","zu-za"]')},"./node_modules/bcp-47-normalize/lib/fields.json":function(Ve){Ve.exports=JSON.parse('[{"from":{"field":"script","value":"qaai"},"to":{"field":"script","value":"zinh"}},{"from":{"field":"region","value":"bu"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"ct"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"dd"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"dy"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"fx"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"hv"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"jt"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"mi"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"nh"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"nq"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"pu"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"pz"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"qu"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"rh"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"tp"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"uk"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"vd"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"wk"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"yd"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"zr"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"230"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"280"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"736"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"886"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"958"},"to":{"field":"region","value":"aa"}},{"from":{"field":"region","value":"020"},"to":{"field":"region","value":"ad"}},{"from":{"field":"region","value":"784"},"to":{"field":"region","value":"ae"}},{"from":{"field":"region","value":"004"},"to":{"field":"region","value":"af"}},{"from":{"field":"region","value":"028"},"to":{"field":"region","value":"ag"}},{"from":{"field":"region","value":"660"},"to":{"field":"region","value":"ai"}},{"from":{"field":"region","value":"008"},"to":{"field":"region","value":"al"}},{"from":{"field":"region","value":"051"},"to":{"field":"region","value":"am"}},{"from":{"field":"region","value":"024"},"to":{"field":"region","value":"ao"}},{"from":{"field":"region","value":"010"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"032"},"to":{"field":"region","value":"ar"}},{"from":{"field":"region","value":"016"},"to":{"field":"region","value":"as"}},{"from":{"field":"region","value":"040"},"to":{"field":"region","value":"at"}},{"from":{"field":"region","value":"036"},"to":{"field":"region","value":"au"}},{"from":{"field":"region","value":"533"},"to":{"field":"region","value":"aw"}},{"from":{"field":"region","value":"248"},"to":{"field":"region","value":"ax"}},{"from":{"field":"region","value":"031"},"to":{"field":"region","value":"az"}},{"from":{"field":"region","value":"070"},"to":{"field":"region","value":"ba"}},{"from":{"field":"region","value":"052"},"to":{"field":"region","value":"bb"}},{"from":{"field":"region","value":"050"},"to":{"field":"region","value":"bd"}},{"from":{"field":"region","value":"056"},"to":{"field":"region","value":"be"}},{"from":{"field":"region","value":"854"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"100"},"to":{"field":"region","value":"bg"}},{"from":{"field":"region","value":"048"},"to":{"field":"region","value":"bh"}},{"from":{"field":"region","value":"108"},"to":{"field":"region","value":"bi"}},{"from":{"field":"region","value":"204"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"652"},"to":{"field":"region","value":"bl"}},{"from":{"field":"region","value":"060"},"to":{"field":"region","value":"bm"}},{"from":{"field":"region","value":"096"},"to":{"field":"region","value":"bn"}},{"from":{"field":"region","value":"068"},"to":{"field":"region","value":"bo"}},{"from":{"field":"region","value":"535"},"to":{"field":"region","value":"bq"}},{"from":{"field":"region","value":"076"},"to":{"field":"region","value":"br"}},{"from":{"field":"region","value":"044"},"to":{"field":"region","value":"bs"}},{"from":{"field":"region","value":"064"},"to":{"field":"region","value":"bt"}},{"from":{"field":"region","value":"104"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"074"},"to":{"field":"region","value":"bv"}},{"from":{"field":"region","value":"072"},"to":{"field":"region","value":"bw"}},{"from":{"field":"region","value":"112"},"to":{"field":"region","value":"by"}},{"from":{"field":"region","value":"084"},"to":{"field":"region","value":"bz"}},{"from":{"field":"region","value":"124"},"to":{"field":"region","value":"ca"}},{"from":{"field":"region","value":"166"},"to":{"field":"region","value":"cc"}},{"from":{"field":"region","value":"180"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"140"},"to":{"field":"region","value":"cf"}},{"from":{"field":"region","value":"178"},"to":{"field":"region","value":"cg"}},{"from":{"field":"region","value":"756"},"to":{"field":"region","value":"ch"}},{"from":{"field":"region","value":"384"},"to":{"field":"region","value":"ci"}},{"from":{"field":"region","value":"184"},"to":{"field":"region","value":"ck"}},{"from":{"field":"region","value":"152"},"to":{"field":"region","value":"cl"}},{"from":{"field":"region","value":"120"},"to":{"field":"region","value":"cm"}},{"from":{"field":"region","value":"156"},"to":{"field":"region","value":"cn"}},{"from":{"field":"region","value":"170"},"to":{"field":"region","value":"co"}},{"from":{"field":"region","value":"188"},"to":{"field":"region","value":"cr"}},{"from":{"field":"region","value":"192"},"to":{"field":"region","value":"cu"}},{"from":{"field":"region","value":"132"},"to":{"field":"region","value":"cv"}},{"from":{"field":"region","value":"531"},"to":{"field":"region","value":"cw"}},{"from":{"field":"region","value":"162"},"to":{"field":"region","value":"cx"}},{"from":{"field":"region","value":"196"},"to":{"field":"region","value":"cy"}},{"from":{"field":"region","value":"203"},"to":{"field":"region","value":"cz"}},{"from":{"field":"region","value":"278"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"276"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"262"},"to":{"field":"region","value":"dj"}},{"from":{"field":"region","value":"208"},"to":{"field":"region","value":"dk"}},{"from":{"field":"region","value":"212"},"to":{"field":"region","value":"dm"}},{"from":{"field":"region","value":"214"},"to":{"field":"region","value":"do"}},{"from":{"field":"region","value":"012"},"to":{"field":"region","value":"dz"}},{"from":{"field":"region","value":"218"},"to":{"field":"region","value":"ec"}},{"from":{"field":"region","value":"233"},"to":{"field":"region","value":"ee"}},{"from":{"field":"region","value":"818"},"to":{"field":"region","value":"eg"}},{"from":{"field":"region","value":"732"},"to":{"field":"region","value":"eh"}},{"from":{"field":"region","value":"232"},"to":{"field":"region","value":"er"}},{"from":{"field":"region","value":"724"},"to":{"field":"region","value":"es"}},{"from":{"field":"region","value":"231"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"246"},"to":{"field":"region","value":"fi"}},{"from":{"field":"region","value":"242"},"to":{"field":"region","value":"fj"}},{"from":{"field":"region","value":"238"},"to":{"field":"region","value":"fk"}},{"from":{"field":"region","value":"583"},"to":{"field":"region","value":"fm"}},{"from":{"field":"region","value":"234"},"to":{"field":"region","value":"fo"}},{"from":{"field":"region","value":"250"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"249"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"266"},"to":{"field":"region","value":"ga"}},{"from":{"field":"region","value":"826"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"308"},"to":{"field":"region","value":"gd"}},{"from":{"field":"region","value":"268"},"to":{"field":"region","value":"ge"}},{"from":{"field":"region","value":"254"},"to":{"field":"region","value":"gf"}},{"from":{"field":"region","value":"831"},"to":{"field":"region","value":"gg"}},{"from":{"field":"region","value":"288"},"to":{"field":"region","value":"gh"}},{"from":{"field":"region","value":"292"},"to":{"field":"region","value":"gi"}},{"from":{"field":"region","value":"304"},"to":{"field":"region","value":"gl"}},{"from":{"field":"region","value":"270"},"to":{"field":"region","value":"gm"}},{"from":{"field":"region","value":"324"},"to":{"field":"region","value":"gn"}},{"from":{"field":"region","value":"312"},"to":{"field":"region","value":"gp"}},{"from":{"field":"region","value":"226"},"to":{"field":"region","value":"gq"}},{"from":{"field":"region","value":"300"},"to":{"field":"region","value":"gr"}},{"from":{"field":"region","value":"239"},"to":{"field":"region","value":"gs"}},{"from":{"field":"region","value":"320"},"to":{"field":"region","value":"gt"}},{"from":{"field":"region","value":"316"},"to":{"field":"region","value":"gu"}},{"from":{"field":"region","value":"624"},"to":{"field":"region","value":"gw"}},{"from":{"field":"region","value":"328"},"to":{"field":"region","value":"gy"}},{"from":{"field":"region","value":"344"},"to":{"field":"region","value":"hk"}},{"from":{"field":"region","value":"334"},"to":{"field":"region","value":"hm"}},{"from":{"field":"region","value":"340"},"to":{"field":"region","value":"hn"}},{"from":{"field":"region","value":"191"},"to":{"field":"region","value":"hr"}},{"from":{"field":"region","value":"332"},"to":{"field":"region","value":"ht"}},{"from":{"field":"region","value":"348"},"to":{"field":"region","value":"hu"}},{"from":{"field":"region","value":"360"},"to":{"field":"region","value":"id"}},{"from":{"field":"region","value":"372"},"to":{"field":"region","value":"ie"}},{"from":{"field":"region","value":"376"},"to":{"field":"region","value":"il"}},{"from":{"field":"region","value":"833"},"to":{"field":"region","value":"im"}},{"from":{"field":"region","value":"356"},"to":{"field":"region","value":"in"}},{"from":{"field":"region","value":"086"},"to":{"field":"region","value":"io"}},{"from":{"field":"region","value":"368"},"to":{"field":"region","value":"iq"}},{"from":{"field":"region","value":"364"},"to":{"field":"region","value":"ir"}},{"from":{"field":"region","value":"352"},"to":{"field":"region","value":"is"}},{"from":{"field":"region","value":"380"},"to":{"field":"region","value":"it"}},{"from":{"field":"region","value":"832"},"to":{"field":"region","value":"je"}},{"from":{"field":"region","value":"388"},"to":{"field":"region","value":"jm"}},{"from":{"field":"region","value":"400"},"to":{"field":"region","value":"jo"}},{"from":{"field":"region","value":"392"},"to":{"field":"region","value":"jp"}},{"from":{"field":"region","value":"404"},"to":{"field":"region","value":"ke"}},{"from":{"field":"region","value":"417"},"to":{"field":"region","value":"kg"}},{"from":{"field":"region","value":"116"},"to":{"field":"region","value":"kh"}},{"from":{"field":"region","value":"296"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"174"},"to":{"field":"region","value":"km"}},{"from":{"field":"region","value":"659"},"to":{"field":"region","value":"kn"}},{"from":{"field":"region","value":"408"},"to":{"field":"region","value":"kp"}},{"from":{"field":"region","value":"410"},"to":{"field":"region","value":"kr"}},{"from":{"field":"region","value":"414"},"to":{"field":"region","value":"kw"}},{"from":{"field":"region","value":"136"},"to":{"field":"region","value":"ky"}},{"from":{"field":"region","value":"398"},"to":{"field":"region","value":"kz"}},{"from":{"field":"region","value":"418"},"to":{"field":"region","value":"la"}},{"from":{"field":"region","value":"422"},"to":{"field":"region","value":"lb"}},{"from":{"field":"region","value":"662"},"to":{"field":"region","value":"lc"}},{"from":{"field":"region","value":"438"},"to":{"field":"region","value":"li"}},{"from":{"field":"region","value":"144"},"to":{"field":"region","value":"lk"}},{"from":{"field":"region","value":"430"},"to":{"field":"region","value":"lr"}},{"from":{"field":"region","value":"426"},"to":{"field":"region","value":"ls"}},{"from":{"field":"region","value":"440"},"to":{"field":"region","value":"lt"}},{"from":{"field":"region","value":"442"},"to":{"field":"region","value":"lu"}},{"from":{"field":"region","value":"428"},"to":{"field":"region","value":"lv"}},{"from":{"field":"region","value":"434"},"to":{"field":"region","value":"ly"}},{"from":{"field":"region","value":"504"},"to":{"field":"region","value":"ma"}},{"from":{"field":"region","value":"492"},"to":{"field":"region","value":"mc"}},{"from":{"field":"region","value":"498"},"to":{"field":"region","value":"md"}},{"from":{"field":"region","value":"499"},"to":{"field":"region","value":"me"}},{"from":{"field":"region","value":"663"},"to":{"field":"region","value":"mf"}},{"from":{"field":"region","value":"450"},"to":{"field":"region","value":"mg"}},{"from":{"field":"region","value":"584"},"to":{"field":"region","value":"mh"}},{"from":{"field":"region","value":"807"},"to":{"field":"region","value":"mk"}},{"from":{"field":"region","value":"466"},"to":{"field":"region","value":"ml"}},{"from":{"field":"region","value":"496"},"to":{"field":"region","value":"mn"}},{"from":{"field":"region","value":"446"},"to":{"field":"region","value":"mo"}},{"from":{"field":"region","value":"580"},"to":{"field":"region","value":"mp"}},{"from":{"field":"region","value":"474"},"to":{"field":"region","value":"mq"}},{"from":{"field":"region","value":"478"},"to":{"field":"region","value":"mr"}},{"from":{"field":"region","value":"500"},"to":{"field":"region","value":"ms"}},{"from":{"field":"region","value":"470"},"to":{"field":"region","value":"mt"}},{"from":{"field":"region","value":"480"},"to":{"field":"region","value":"mu"}},{"from":{"field":"region","value":"462"},"to":{"field":"region","value":"mv"}},{"from":{"field":"region","value":"454"},"to":{"field":"region","value":"mw"}},{"from":{"field":"region","value":"484"},"to":{"field":"region","value":"mx"}},{"from":{"field":"region","value":"458"},"to":{"field":"region","value":"my"}},{"from":{"field":"region","value":"508"},"to":{"field":"region","value":"mz"}},{"from":{"field":"region","value":"516"},"to":{"field":"region","value":"na"}},{"from":{"field":"region","value":"540"},"to":{"field":"region","value":"nc"}},{"from":{"field":"region","value":"562"},"to":{"field":"region","value":"ne"}},{"from":{"field":"region","value":"574"},"to":{"field":"region","value":"nf"}},{"from":{"field":"region","value":"566"},"to":{"field":"region","value":"ng"}},{"from":{"field":"region","value":"558"},"to":{"field":"region","value":"ni"}},{"from":{"field":"region","value":"528"},"to":{"field":"region","value":"nl"}},{"from":{"field":"region","value":"578"},"to":{"field":"region","value":"no"}},{"from":{"field":"region","value":"524"},"to":{"field":"region","value":"np"}},{"from":{"field":"region","value":"520"},"to":{"field":"region","value":"nr"}},{"from":{"field":"region","value":"570"},"to":{"field":"region","value":"nu"}},{"from":{"field":"region","value":"554"},"to":{"field":"region","value":"nz"}},{"from":{"field":"region","value":"512"},"to":{"field":"region","value":"om"}},{"from":{"field":"region","value":"591"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"604"},"to":{"field":"region","value":"pe"}},{"from":{"field":"region","value":"258"},"to":{"field":"region","value":"pf"}},{"from":{"field":"region","value":"598"},"to":{"field":"region","value":"pg"}},{"from":{"field":"region","value":"608"},"to":{"field":"region","value":"ph"}},{"from":{"field":"region","value":"586"},"to":{"field":"region","value":"pk"}},{"from":{"field":"region","value":"616"},"to":{"field":"region","value":"pl"}},{"from":{"field":"region","value":"666"},"to":{"field":"region","value":"pm"}},{"from":{"field":"region","value":"612"},"to":{"field":"region","value":"pn"}},{"from":{"field":"region","value":"630"},"to":{"field":"region","value":"pr"}},{"from":{"field":"region","value":"275"},"to":{"field":"region","value":"ps"}},{"from":{"field":"region","value":"620"},"to":{"field":"region","value":"pt"}},{"from":{"field":"region","value":"585"},"to":{"field":"region","value":"pw"}},{"from":{"field":"region","value":"600"},"to":{"field":"region","value":"py"}},{"from":{"field":"region","value":"634"},"to":{"field":"region","value":"qa"}},{"from":{"field":"region","value":"959"},"to":{"field":"region","value":"qm"}},{"from":{"field":"region","value":"960"},"to":{"field":"region","value":"qn"}},{"from":{"field":"region","value":"962"},"to":{"field":"region","value":"qp"}},{"from":{"field":"region","value":"963"},"to":{"field":"region","value":"qq"}},{"from":{"field":"region","value":"964"},"to":{"field":"region","value":"qr"}},{"from":{"field":"region","value":"965"},"to":{"field":"region","value":"qs"}},{"from":{"field":"region","value":"966"},"to":{"field":"region","value":"qt"}},{"from":{"field":"region","value":"967"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"968"},"to":{"field":"region","value":"qv"}},{"from":{"field":"region","value":"969"},"to":{"field":"region","value":"qw"}},{"from":{"field":"region","value":"970"},"to":{"field":"region","value":"qx"}},{"from":{"field":"region","value":"971"},"to":{"field":"region","value":"qy"}},{"from":{"field":"region","value":"972"},"to":{"field":"region","value":"qz"}},{"from":{"field":"region","value":"638"},"to":{"field":"region","value":"re"}},{"from":{"field":"region","value":"642"},"to":{"field":"region","value":"ro"}},{"from":{"field":"region","value":"688"},"to":{"field":"region","value":"rs"}},{"from":{"field":"region","value":"643"},"to":{"field":"region","value":"ru"}},{"from":{"field":"region","value":"646"},"to":{"field":"region","value":"rw"}},{"from":{"field":"region","value":"682"},"to":{"field":"region","value":"sa"}},{"from":{"field":"region","value":"090"},"to":{"field":"region","value":"sb"}},{"from":{"field":"region","value":"690"},"to":{"field":"region","value":"sc"}},{"from":{"field":"region","value":"729"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"752"},"to":{"field":"region","value":"se"}},{"from":{"field":"region","value":"702"},"to":{"field":"region","value":"sg"}},{"from":{"field":"region","value":"654"},"to":{"field":"region","value":"sh"}},{"from":{"field":"region","value":"705"},"to":{"field":"region","value":"si"}},{"from":{"field":"region","value":"744"},"to":{"field":"region","value":"sj"}},{"from":{"field":"region","value":"703"},"to":{"field":"region","value":"sk"}},{"from":{"field":"region","value":"694"},"to":{"field":"region","value":"sl"}},{"from":{"field":"region","value":"674"},"to":{"field":"region","value":"sm"}},{"from":{"field":"region","value":"686"},"to":{"field":"region","value":"sn"}},{"from":{"field":"region","value":"706"},"to":{"field":"region","value":"so"}},{"from":{"field":"region","value":"740"},"to":{"field":"region","value":"sr"}},{"from":{"field":"region","value":"728"},"to":{"field":"region","value":"ss"}},{"from":{"field":"region","value":"678"},"to":{"field":"region","value":"st"}},{"from":{"field":"region","value":"222"},"to":{"field":"region","value":"sv"}},{"from":{"field":"region","value":"534"},"to":{"field":"region","value":"sx"}},{"from":{"field":"region","value":"760"},"to":{"field":"region","value":"sy"}},{"from":{"field":"region","value":"748"},"to":{"field":"region","value":"sz"}},{"from":{"field":"region","value":"796"},"to":{"field":"region","value":"tc"}},{"from":{"field":"region","value":"148"},"to":{"field":"region","value":"td"}},{"from":{"field":"region","value":"260"},"to":{"field":"region","value":"tf"}},{"from":{"field":"region","value":"768"},"to":{"field":"region","value":"tg"}},{"from":{"field":"region","value":"764"},"to":{"field":"region","value":"th"}},{"from":{"field":"region","value":"762"},"to":{"field":"region","value":"tj"}},{"from":{"field":"region","value":"772"},"to":{"field":"region","value":"tk"}},{"from":{"field":"region","value":"626"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"795"},"to":{"field":"region","value":"tm"}},{"from":{"field":"region","value":"788"},"to":{"field":"region","value":"tn"}},{"from":{"field":"region","value":"776"},"to":{"field":"region","value":"to"}},{"from":{"field":"region","value":"792"},"to":{"field":"region","value":"tr"}},{"from":{"field":"region","value":"780"},"to":{"field":"region","value":"tt"}},{"from":{"field":"region","value":"798"},"to":{"field":"region","value":"tv"}},{"from":{"field":"region","value":"158"},"to":{"field":"region","value":"tw"}},{"from":{"field":"region","value":"834"},"to":{"field":"region","value":"tz"}},{"from":{"field":"region","value":"804"},"to":{"field":"region","value":"ua"}},{"from":{"field":"region","value":"800"},"to":{"field":"region","value":"ug"}},{"from":{"field":"region","value":"581"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"840"},"to":{"field":"region","value":"us"}},{"from":{"field":"region","value":"858"},"to":{"field":"region","value":"uy"}},{"from":{"field":"region","value":"860"},"to":{"field":"region","value":"uz"}},{"from":{"field":"region","value":"336"},"to":{"field":"region","value":"va"}},{"from":{"field":"region","value":"670"},"to":{"field":"region","value":"vc"}},{"from":{"field":"region","value":"862"},"to":{"field":"region","value":"ve"}},{"from":{"field":"region","value":"092"},"to":{"field":"region","value":"vg"}},{"from":{"field":"region","value":"850"},"to":{"field":"region","value":"vi"}},{"from":{"field":"region","value":"704"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"548"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"876"},"to":{"field":"region","value":"wf"}},{"from":{"field":"region","value":"882"},"to":{"field":"region","value":"ws"}},{"from":{"field":"region","value":"973"},"to":{"field":"region","value":"xa"}},{"from":{"field":"region","value":"974"},"to":{"field":"region","value":"xb"}},{"from":{"field":"region","value":"975"},"to":{"field":"region","value":"xc"}},{"from":{"field":"region","value":"976"},"to":{"field":"region","value":"xd"}},{"from":{"field":"region","value":"977"},"to":{"field":"region","value":"xe"}},{"from":{"field":"region","value":"978"},"to":{"field":"region","value":"xf"}},{"from":{"field":"region","value":"979"},"to":{"field":"region","value":"xg"}},{"from":{"field":"region","value":"980"},"to":{"field":"region","value":"xh"}},{"from":{"field":"region","value":"981"},"to":{"field":"region","value":"xi"}},{"from":{"field":"region","value":"982"},"to":{"field":"region","value":"xj"}},{"from":{"field":"region","value":"983"},"to":{"field":"region","value":"xk"}},{"from":{"field":"region","value":"984"},"to":{"field":"region","value":"xl"}},{"from":{"field":"region","value":"985"},"to":{"field":"region","value":"xm"}},{"from":{"field":"region","value":"986"},"to":{"field":"region","value":"xn"}},{"from":{"field":"region","value":"987"},"to":{"field":"region","value":"xo"}},{"from":{"field":"region","value":"988"},"to":{"field":"region","value":"xp"}},{"from":{"field":"region","value":"989"},"to":{"field":"region","value":"xq"}},{"from":{"field":"region","value":"990"},"to":{"field":"region","value":"xr"}},{"from":{"field":"region","value":"991"},"to":{"field":"region","value":"xs"}},{"from":{"field":"region","value":"992"},"to":{"field":"region","value":"xt"}},{"from":{"field":"region","value":"993"},"to":{"field":"region","value":"xu"}},{"from":{"field":"region","value":"994"},"to":{"field":"region","value":"xv"}},{"from":{"field":"region","value":"995"},"to":{"field":"region","value":"xw"}},{"from":{"field":"region","value":"996"},"to":{"field":"region","value":"xx"}},{"from":{"field":"region","value":"997"},"to":{"field":"region","value":"xy"}},{"from":{"field":"region","value":"998"},"to":{"field":"region","value":"xz"}},{"from":{"field":"region","value":"720"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"887"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"175"},"to":{"field":"region","value":"yt"}},{"from":{"field":"region","value":"710"},"to":{"field":"region","value":"za"}},{"from":{"field":"region","value":"894"},"to":{"field":"region","value":"zm"}},{"from":{"field":"region","value":"716"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"999"},"to":{"field":"region","value":"zz"}},{"from":{"field":"variants","value":"aaland"},"to":{"field":"region","value":"ax"}},{"from":{"field":"variants","value":"polytoni"},"to":{"field":"variants","value":"polyton"}},{"from":{"field":"variants","value":"heploc"},"to":{"field":"variants","value":"alalc97"}},{"from":{"field":"variants","value":"arevela"},"to":{"field":"language","value":"hy"}},{"from":{"field":"variants","value":"arevmda"},"to":{"field":"language","value":"hyw"}}]')},"./node_modules/bcp-47-normalize/lib/index.js":function(Ve,O,r){"use strict";var e=r("./node_modules/bcp-47/index.js"),S=r("./node_modules/bcp-47-match/index.js"),R=r("./node_modules/bcp-47-normalize/lib/matches.json"),j=r("./node_modules/bcp-47-normalize/lib/fields.json"),U=r("./node_modules/bcp-47-normalize/lib/defaults.json"),L=r("./node_modules/bcp-47-normalize/lib/many.json");Ve.exports=function g(B,x){var A,P=x||{},_=e.parse(String(B||"").toLowerCase(),P),D=e.stringify(_),y=-1;if(!D)return D;for(;++y<R.length;)S.extendedFilter(D,R[y].from).length&&(v(_,R[y].from,R[y].to),D=e.stringify(_));for(y=-1;++y<j.length;)T(_,j[y].from.field,j[y].from.value)&&k(_,j[y].to.field,j[y].to.value);for(D=e.stringify(Object.assign({},_,c)),y=-1;++y<U.length;)D===U[y]&&(v(_,U[y],U[y].split("-").slice(0,-1).join("-")),D=e.stringify(Object.assign({},_,c)));if(_.extensions.sort(N),P.warning)for(A in L)b.call(L[A],_[A])&&P.warning("Deprecated "+A+" `"+_[A]+"`, expected one of `"+L[A][_[A]].join("`, `")+"`",null,7);return _.script&&(_.script=_.script.charAt(0).toUpperCase()+_.script.slice(1)),_.region&&(_.region=_.region.toUpperCase()),e.stringify(_)};var b={}.hasOwnProperty,f=new Intl.Collator,c={variants:[],extensions:[],privateuse:[],irregular:null,regular:null};function v(B,x,P){var A,_=e.parse(x),D=e.parse(P),y=[];for(A in _)_[A]&&_[A].length&&T(B,A,_[A])&&y.push(A);for(A in D)D[A]&&D[A].length&&(y.indexOf(A)>-1||!B[A]||!B[A].length)&&k(B,A,D[A])}function T(B,x,P){var D,y,A,I,_=!1;if(P){if(y=D=B[x],D&&"object"==typeof D)for(y=[],A=-1;++A<D.length;)P.indexOf(I=D[A])<0?y.push(I):_=!0;else D===P&&(y=null,_=!0);B[x]=y}return _}function k(B,x,P){var D,y,A,_=B[x];if(_&&"object"==typeof _)for(D=[].concat(P),y=-1;++y<D.length;)_.indexOf(A=D[y])<0&&_.push(A);else B[x]=P}function N(B,x){return f.compare(B.singleton,x.singleton)}},"./node_modules/bcp-47-normalize/lib/many.json":function(Ve){Ve.exports=JSON.parse('{"region":{"172":["ru","am","az","by","ge","kg","kz","md","tj","tm","ua","uz"],"200":["cz","sk"],"530":["cw","sx","bq"],"532":["cw","sx","bq"],"536":["sa","iq"],"582":["fm","mh","mp","pw"],"810":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"830":["je","gg"],"890":["rs","me","si","hr","mk","ba"],"891":["rs","me"],"an":["cw","sx","bq"],"cs":["rs","me"],"fq":["aq","tf"],"nt":["sa","iq"],"pc":["fm","mh","mp","pw"],"su":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yu":["rs","me"],"062":["034","143"],"ant":["cw","sx","bq"],"scg":["rs","me"],"ntz":["sa","iq"],"sun":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yug":["rs","me"]}}')},"./node_modules/bcp-47-normalize/lib/matches.json":function(Ve){Ve.exports=JSON.parse('[{"from":"in","to":"id"},{"from":"iw","to":"he"},{"from":"ji","to":"yi"},{"from":"jw","to":"jv"},{"from":"mo","to":"ro"},{"from":"scc","to":"sr"},{"from":"scr","to":"hr"},{"from":"aam","to":"aas"},{"from":"adp","to":"dz"},{"from":"aue","to":"ktz"},{"from":"ayx","to":"nun"},{"from":"bgm","to":"bcg"},{"from":"bjd","to":"drl"},{"from":"ccq","to":"rki"},{"from":"cjr","to":"mom"},{"from":"cka","to":"cmr"},{"from":"cmk","to":"xch"},{"from":"coy","to":"pij"},{"from":"cqu","to":"quh"},{"from":"drh","to":"mn"},{"from":"drw","to":"fa-af"},{"from":"gav","to":"dev"},{"from":"gfx","to":"vaj"},{"from":"ggn","to":"gvr"},{"from":"gti","to":"nyc"},{"from":"guv","to":"duz"},{"from":"hrr","to":"jal"},{"from":"ibi","to":"opa"},{"from":"ilw","to":"gal"},{"from":"jeg","to":"oyb"},{"from":"kgc","to":"tdf"},{"from":"kgh","to":"kml"},{"from":"koj","to":"kwv"},{"from":"krm","to":"bmf"},{"from":"ktr","to":"dtp"},{"from":"kvs","to":"gdj"},{"from":"kwq","to":"yam"},{"from":"kxe","to":"tvd"},{"from":"kzj","to":"dtp"},{"from":"kzt","to":"dtp"},{"from":"lii","to":"raq"},{"from":"lmm","to":"rmx"},{"from":"meg","to":"cir"},{"from":"mst","to":"mry"},{"from":"mwj","to":"vaj"},{"from":"myt","to":"mry"},{"from":"nad","to":"xny"},{"from":"ncp","to":"kdz"},{"from":"nnx","to":"ngv"},{"from":"nts","to":"pij"},{"from":"oun","to":"vaj"},{"from":"pcr","to":"adx"},{"from":"pmc","to":"huw"},{"from":"pmu","to":"phr"},{"from":"ppa","to":"bfy"},{"from":"ppr","to":"lcq"},{"from":"pry","to":"prt"},{"from":"puz","to":"pub"},{"from":"sca","to":"hle"},{"from":"skk","to":"oyb"},{"from":"tdu","to":"dtp"},{"from":"thc","to":"tpo"},{"from":"thx","to":"oyb"},{"from":"tie","to":"ras"},{"from":"tkk","to":"twm"},{"from":"tlw","to":"weo"},{"from":"tmp","to":"tyj"},{"from":"tne","to":"kak"},{"from":"tnf","to":"fa-af"},{"from":"tsf","to":"taj"},{"from":"uok","to":"ema"},{"from":"xba","to":"cax"},{"from":"xia","to":"acn"},{"from":"xkh","to":"waw"},{"from":"xsj","to":"suj"},{"from":"ybd","to":"rki"},{"from":"yma","to":"lrr"},{"from":"ymt","to":"mtm"},{"from":"yos","to":"zom"},{"from":"yuu","to":"yug"},{"from":"asd","to":"snz"},{"from":"dit","to":"dif"},{"from":"llo","to":"ngt"},{"from":"myd","to":"aog"},{"from":"nns","to":"nbr"},{"from":"sgn-br","to":"bzs"},{"from":"sgn-co","to":"csn"},{"from":"sgn-de","to":"gsg"},{"from":"sgn-dk","to":"dsl"},{"from":"sgn-fr","to":"fsl"},{"from":"sgn-gb","to":"bfi"},{"from":"sgn-gr","to":"gss"},{"from":"sgn-ie","to":"isg"},{"from":"sgn-it","to":"ise"},{"from":"sgn-jp","to":"jsl"},{"from":"sgn-mx","to":"mfs"},{"from":"sgn-ni","to":"ncs"},{"from":"sgn-nl","to":"dse"},{"from":"sgn-no","to":"nsi"},{"from":"sgn-pt","to":"psr"},{"from":"sgn-se","to":"swl"},{"from":"sgn-us","to":"ase"},{"from":"sgn-za","to":"sfs"},{"from":"no-bokmal","to":"nb"},{"from":"no-nynorsk","to":"nn"},{"from":"aa-saaho","to":"ssy"},{"from":"sh","to":"sr-latn"},{"from":"cnr","to":"sr-me"},{"from":"no","to":"nb"},{"from":"tl","to":"fil"},{"from":"az-az","to":"az-latn-az"},{"from":"bs-ba","to":"bs-latn-ba"},{"from":"ha-latn-gh","to":"ha-gh"},{"from":"ha-latn-ne","to":"ha-ne"},{"from":"ha-latn-ng","to":"ha-ng"},{"from":"kk-cyrl-kz","to":"kk-kz"},{"from":"ky-cyrl-kg","to":"ky-kg"},{"from":"ks-arab-in","to":"ks-in"},{"from":"mn-cyrl-mn","to":"mn-mn"},{"from":"ms-latn-bn","to":"ms-bn"},{"from":"ms-latn-my","to":"ms-my"},{"from":"ms-latn-sg","to":"ms-sg"},{"from":"pa-in","to":"pa-guru-in"},{"from":"pa-pk","to":"pa-arab-pk"},{"from":"shi-ma","to":"shi-tfng-ma"},{"from":"sr-ba","to":"sr-cyrl-ba"},{"from":"sr-me","to":"sr-latn-me"},{"from":"sr-rs","to":"sr-cyrl-rs"},{"from":"sr-xk","to":"sr-cyrl-xk"},{"from":"tzm-latn-ma","to":"tzm-ma"},{"from":"ug-arab-cn","to":"ug-cn"},{"from":"uz-af","to":"uz-arab-af"},{"from":"uz-uz","to":"uz-latn-uz"},{"from":"vai-lr","to":"vai-vaii-lr"},{"from":"yue-cn","to":"yue-hans-cn"},{"from":"yue-hk","to":"yue-hant-hk"},{"from":"zh-cn","to":"zh-hans-cn"},{"from":"zh-hk","to":"zh-hant-hk"},{"from":"zh-mo","to":"zh-hant-mo"},{"from":"zh-sg","to":"zh-hans-sg"},{"from":"zh-tw","to":"zh-hant-tw"},{"from":"aju","to":"jrb"},{"from":"als","to":"sq"},{"from":"arb","to":"ar"},{"from":"ayr","to":"ay"},{"from":"azj","to":"az"},{"from":"bcc","to":"bal"},{"from":"bcl","to":"bik"},{"from":"bxk","to":"luy"},{"from":"bxr","to":"bua"},{"from":"cld","to":"syr"},{"from":"cmn","to":"zh"},{"from":"cwd","to":"cr"},{"from":"dgo","to":"doi"},{"from":"dhd","to":"mwr"},{"from":"dik","to":"din"},{"from":"diq","to":"zza"},{"from":"lbk","to":"bnc"},{"from":"ekk","to":"et"},{"from":"emk","to":"man"},{"from":"esk","to":"ik"},{"from":"fat","to":"ak"},{"from":"fuc","to":"ff"},{"from":"gaz","to":"om"},{"from":"gbo","to":"grb"},{"from":"gno","to":"gon"},{"from":"gug","to":"gn"},{"from":"gya","to":"gba"},{"from":"hdn","to":"hai"},{"from":"hea","to":"hmn"},{"from":"ike","to":"iu"},{"from":"kmr","to":"ku"},{"from":"knc","to":"kr"},{"from":"kng","to":"kg"},{"from":"knn","to":"kok"},{"from":"kpv","to":"kv"},{"from":"lvs","to":"lv"},{"from":"mhr","to":"chm"},{"from":"mup","to":"raj"},{"from":"khk","to":"mn"},{"from":"npi","to":"ne"},{"from":"ojg","to":"oj"},{"from":"ory","to":"or"},{"from":"pbu","to":"ps"},{"from":"pes","to":"fa"},{"from":"plt","to":"mg"},{"from":"pnb","to":"lah"},{"from":"quz","to":"qu"},{"from":"rmy","to":"rom"},{"from":"spy","to":"kln"},{"from":"src","to":"sc"},{"from":"swh","to":"sw"},{"from":"ttq","to":"tmh"},{"from":"tw","to":"ak"},{"from":"umu","to":"del"},{"from":"uzn","to":"uz"},{"from":"xpe","to":"kpe"},{"from":"xsl","to":"den"},{"from":"ydd","to":"yi"},{"from":"zai","to":"zap"},{"from":"zsm","to":"ms"},{"from":"zyb","to":"za"},{"from":"him","to":"srx"},{"from":"mnk","to":"man"},{"from":"bh","to":"bho"},{"from":"prs","to":"fa-af"},{"from":"swc","to":"sw-cd"},{"from":"aar","to":"aa"},{"from":"abk","to":"ab"},{"from":"ave","to":"ae"},{"from":"afr","to":"af"},{"from":"aka","to":"ak"},{"from":"amh","to":"am"},{"from":"arg","to":"an"},{"from":"ara","to":"ar"},{"from":"asm","to":"as"},{"from":"ava","to":"av"},{"from":"aym","to":"ay"},{"from":"aze","to":"az"},{"from":"bak","to":"ba"},{"from":"bel","to":"be"},{"from":"bul","to":"bg"},{"from":"bih","to":"bho"},{"from":"bis","to":"bi"},{"from":"bam","to":"bm"},{"from":"ben","to":"bn"},{"from":"bod","to":"bo"},{"from":"bre","to":"br"},{"from":"bos","to":"bs"},{"from":"cat","to":"ca"},{"from":"che","to":"ce"},{"from":"cha","to":"ch"},{"from":"cos","to":"co"},{"from":"cre","to":"cr"},{"from":"ces","to":"cs"},{"from":"chu","to":"cu"},{"from":"chv","to":"cv"},{"from":"cym","to":"cy"},{"from":"dan","to":"da"},{"from":"deu","to":"de"},{"from":"div","to":"dv"},{"from":"dzo","to":"dz"},{"from":"ewe","to":"ee"},{"from":"ell","to":"el"},{"from":"eng","to":"en"},{"from":"epo","to":"eo"},{"from":"spa","to":"es"},{"from":"est","to":"et"},{"from":"eus","to":"eu"},{"from":"fas","to":"fa"},{"from":"ful","to":"ff"},{"from":"fin","to":"fi"},{"from":"fij","to":"fj"},{"from":"fao","to":"fo"},{"from":"fra","to":"fr"},{"from":"fry","to":"fy"},{"from":"gle","to":"ga"},{"from":"gla","to":"gd"},{"from":"glg","to":"gl"},{"from":"grn","to":"gn"},{"from":"guj","to":"gu"},{"from":"glv","to":"gv"},{"from":"hau","to":"ha"},{"from":"heb","to":"he"},{"from":"hin","to":"hi"},{"from":"hmo","to":"ho"},{"from":"hrv","to":"hr"},{"from":"hat","to":"ht"},{"from":"hun","to":"hu"},{"from":"hye","to":"hy"},{"from":"her","to":"hz"},{"from":"ina","to":"ia"},{"from":"ind","to":"id"},{"from":"ile","to":"ie"},{"from":"ibo","to":"ig"},{"from":"iii","to":"ii"},{"from":"ipk","to":"ik"},{"from":"ido","to":"io"},{"from":"isl","to":"is"},{"from":"ita","to":"it"},{"from":"iku","to":"iu"},{"from":"jpn","to":"ja"},{"from":"jav","to":"jv"},{"from":"kat","to":"ka"},{"from":"kon","to":"kg"},{"from":"kik","to":"ki"},{"from":"kua","to":"kj"},{"from":"kaz","to":"kk"},{"from":"kal","to":"kl"},{"from":"khm","to":"km"},{"from":"kan","to":"kn"},{"from":"kor","to":"ko"},{"from":"kau","to":"kr"},{"from":"kas","to":"ks"},{"from":"kur","to":"ku"},{"from":"kom","to":"kv"},{"from":"cor","to":"kw"},{"from":"kir","to":"ky"},{"from":"lat","to":"la"},{"from":"ltz","to":"lb"},{"from":"lug","to":"lg"},{"from":"lim","to":"li"},{"from":"lin","to":"ln"},{"from":"lao","to":"lo"},{"from":"lit","to":"lt"},{"from":"lub","to":"lu"},{"from":"lav","to":"lv"},{"from":"mlg","to":"mg"},{"from":"mah","to":"mh"},{"from":"mri","to":"mi"},{"from":"mkd","to":"mk"},{"from":"mal","to":"ml"},{"from":"mon","to":"mn"},{"from":"mol","to":"ro"},{"from":"mar","to":"mr"},{"from":"msa","to":"ms"},{"from":"mlt","to":"mt"},{"from":"mya","to":"my"},{"from":"nau","to":"na"},{"from":"nob","to":"nb"},{"from":"nde","to":"nd"},{"from":"nep","to":"ne"},{"from":"ndo","to":"ng"},{"from":"nld","to":"nl"},{"from":"nno","to":"nn"},{"from":"nor","to":"nb"},{"from":"nbl","to":"nr"},{"from":"nav","to":"nv"},{"from":"nya","to":"ny"},{"from":"oci","to":"oc"},{"from":"oji","to":"oj"},{"from":"orm","to":"om"},{"from":"ori","to":"or"},{"from":"oss","to":"os"},{"from":"pan","to":"pa"},{"from":"pli","to":"pi"},{"from":"pol","to":"pl"},{"from":"pus","to":"ps"},{"from":"por","to":"pt"},{"from":"que","to":"qu"},{"from":"roh","to":"rm"},{"from":"run","to":"rn"},{"from":"ron","to":"ro"},{"from":"rus","to":"ru"},{"from":"kin","to":"rw"},{"from":"san","to":"sa"},{"from":"srd","to":"sc"},{"from":"snd","to":"sd"},{"from":"sme","to":"se"},{"from":"sag","to":"sg"},{"from":"hbs","to":"sr-latn"},{"from":"sin","to":"si"},{"from":"slk","to":"sk"},{"from":"slv","to":"sl"},{"from":"smo","to":"sm"},{"from":"sna","to":"sn"},{"from":"som","to":"so"},{"from":"sqi","to":"sq"},{"from":"srp","to":"sr"},{"from":"ssw","to":"ss"},{"from":"sot","to":"st"},{"from":"sun","to":"su"},{"from":"swe","to":"sv"},{"from":"swa","to":"sw"},{"from":"tam","to":"ta"},{"from":"tel","to":"te"},{"from":"tgk","to":"tg"},{"from":"tha","to":"th"},{"from":"tir","to":"ti"},{"from":"tuk","to":"tk"},{"from":"tgl","to":"fil"},{"from":"tsn","to":"tn"},{"from":"ton","to":"to"},{"from":"tur","to":"tr"},{"from":"tso","to":"ts"},{"from":"tat","to":"tt"},{"from":"twi","to":"ak"},{"from":"tah","to":"ty"},{"from":"uig","to":"ug"},{"from":"ukr","to":"uk"},{"from":"urd","to":"ur"},{"from":"uzb","to":"uz"},{"from":"ven","to":"ve"},{"from":"vie","to":"vi"},{"from":"vol","to":"vo"},{"from":"wln","to":"wa"},{"from":"wol","to":"wo"},{"from":"xho","to":"xh"},{"from":"yid","to":"yi"},{"from":"yor","to":"yo"},{"from":"zha","to":"za"},{"from":"zho","to":"zh"},{"from":"zul","to":"zu"},{"from":"alb","to":"sq"},{"from":"arm","to":"hy"},{"from":"baq","to":"eu"},{"from":"bur","to":"my"},{"from":"chi","to":"zh"},{"from":"cze","to":"cs"},{"from":"dut","to":"nl"},{"from":"fre","to":"fr"},{"from":"geo","to":"ka"},{"from":"ger","to":"de"},{"from":"gre","to":"el"},{"from":"ice","to":"is"},{"from":"mac","to":"mk"},{"from":"mao","to":"mi"},{"from":"may","to":"ms"},{"from":"per","to":"fa"},{"from":"rum","to":"ro"},{"from":"slo","to":"sk"},{"from":"tib","to":"bo"},{"from":"wel","to":"cy"}]')},"./node_modules/bcp-47/index.js":function(Ve,O,r){"use strict";O.parse=r("./node_modules/bcp-47/lib/parse.js"),O.stringify=r("./node_modules/bcp-47/lib/stringify.js")},"./node_modules/bcp-47/lib/normalize.json":function(Ve){Ve.exports=JSON.parse('{"en-gb-oed":"en-GB-oxendict","i-ami":"ami","i-bnn":"bnn","i-default":null,"i-enochian":null,"i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-mingo":null,"i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","sgn-be-fr":"sfb","sgn-be-nl":"vgt","sgn-ch-de":"sgg","art-lojban":"jbo","cel-gaulish":null,"no-bok":"nb","no-nyn":"nn","zh-guoyu":"cmn","zh-hakka":"hak","zh-min":null,"zh-min-nan":"nan","zh-xiang":"hsn"}')},"./node_modules/bcp-47/lib/parse.js":function(Ve,O,r){"use strict";var e=r("./node_modules/is-alphanumerical/index.js"),S=r("./node_modules/is-alphabetical/index.js"),R=r("./node_modules/is-decimal/index.js"),j=r("./node_modules/bcp-47/lib/regular.json"),U=r("./node_modules/bcp-47/lib/normalize.json");Ve.exports=function b(c,g){var x,P,_,v=g||{},T={language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null},k=String(c),N=k.toLowerCase(),B=0;if(null==c)throw new Error("Expected string, got `"+c+"`");if(L.call(U,N))return(null==v.normalize||v.normalize)&&U[N]?b(U[N]):(T[-1===j.indexOf(N)?"irregular":"regular"]=k,T);for(;S(N.charCodeAt(B))&&B<9;)B++;if(B>1&&B<9){if(T.language=k.slice(0,B),B<4)for(P=0;45===N.charCodeAt(B)&&S(N.charCodeAt(B+1))&&S(N.charCodeAt(B+2))&&S(N.charCodeAt(B+3))&&!S(N.charCodeAt(B+4));){if(P>2)return D(B,3,"Too many extended language subtags, expected at most 3 subtags");T.extendedLanguageSubtags.push(k.slice(B+1,B+4)),B+=4,P++}for(45===N.charCodeAt(B)&&S(N.charCodeAt(B+1))&&S(N.charCodeAt(B+2))&&S(N.charCodeAt(B+3))&&S(N.charCodeAt(B+4))&&!S(N.charCodeAt(B+5))&&(T.script=k.slice(B+1,B+5),B+=5),45===N.charCodeAt(B)&&(S(N.charCodeAt(B+1))&&S(N.charCodeAt(B+2))&&!S(N.charCodeAt(B+3))?(T.region=k.slice(B+1,B+3),B+=3):R(N.charCodeAt(B+1))&&R(N.charCodeAt(B+2))&&R(N.charCodeAt(B+3))&&!R(N.charCodeAt(B+4))&&(T.region=k.slice(B+1,B+4),B+=4));45===N.charCodeAt(B);){for(_=x=B+1;e(N.charCodeAt(_));){if(_-x>7)return D(_,1,"Too long variant, expected at most 8 characters");_++}if(!(_-x>4||_-x>3&&R(N.charCodeAt(x))))break;T.variants.push(k.slice(x,_)),B=_}for(;45===N.charCodeAt(B)&&120!==N.charCodeAt(B+1)&&e(N.charCodeAt(B+1))&&45===N.charCodeAt(B+2)&&e(N.charCodeAt(B+3));){for(_=B+2,P=0;45===N.charCodeAt(_)&&e(N.charCodeAt(_+1))&&e(N.charCodeAt(_+2));)for(_=(x=_+1)+2,P++;e(N.charCodeAt(_));){if(_-x>7)return D(_,2,"Too long extension, expected at most 8 characters");_++}if(!P)return D(_,4,"Empty extension, extensions must have at least 2 characters of content");T.extensions.push({singleton:k.charAt(B+1),extensions:k.slice(B+3,_).split("-")}),B=_}}else B=0;if(0===B&&120===N.charCodeAt(B)||45===N.charCodeAt(B)&&120===N.charCodeAt(B+1))for(_=B=B?B+2:1;45===N.charCodeAt(_)&&e(N.charCodeAt(_+1));){for(_=x=B+1;e(N.charCodeAt(_));){if(_-x>7)return D(_,5,"Too long private-use area, expected at most 8 characters");_++}T.privateuse.push(k.slice(B+1,_)),B=_}return B!==k.length?D(B,6,"Found superfluous content after tag"):T;function D(y,A,I){return v.warning&&v.warning(I,A,y),v.forgiving?T:{language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null}}};var L={}.hasOwnProperty},"./node_modules/bcp-47/lib/regular.json":function(Ve){Ve.exports=JSON.parse('["art-lojban","cel-gaulish","no-bok","no-nyn","zh-guoyu","zh-hakka","zh-min","zh-min-nan","zh-xiang"]')},"./node_modules/bcp-47/lib/stringify.js":function(Ve,O,r){"use strict";Ve.exports=function e(S){var U,L,b,R=S||{},j=[];if(R.irregular||R.regular)return R.irregular||R.regular;if(R.language)for(j=j.concat(R.language,R.extendedLanguageSubtags||[],R.script||[],R.region||[],R.variants||[]),U=R.extensions||[],L=-1;++L<U.length;)(b=U[L]).singleton&&b.extensions&&b.extensions.length&&(j=j.concat(b.singleton,b.extensions));return R.privateuse&&R.privateuse.length&&(j=j.concat("x",R.privateuse)),j.join("-")}},"./node_modules/buffer/index.js":function(Ve,O,r){"use strict";(function(e){var S=r("./node_modules/base64-js/index.js"),R=r("./node_modules/ieee754/index.js"),j=r("./node_modules/isarray/index.js");function L(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function b(X,Z){if(L()<Z)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(X=new Uint8Array(Z)).__proto__=f.prototype:(null===X&&(X=new f(Z)),X.length=Z),X}function f(X,Z,W){if(!(f.TYPED_ARRAY_SUPPORT||this instanceof f))return new f(X,Z,W);if("number"==typeof X){if("string"==typeof Z)throw new Error("If encoding is specified then the first argument must be a string");return T(this,X)}return c(this,X,Z,W)}function c(X,Z,W,oe){if("number"==typeof Z)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&Z instanceof ArrayBuffer?function B(X,Z,W,oe){if(W<0||Z.byteLength<W)throw new RangeError("'offset' is out of bounds");if(Z.byteLength<W+(oe||0))throw new RangeError("'length' is out of bounds");return Z=void 0===W&&void 0===oe?new Uint8Array(Z):void 0===oe?new Uint8Array(Z,W):new Uint8Array(Z,W,oe),f.TYPED_ARRAY_SUPPORT?(X=Z).__proto__=f.prototype:X=N(X,Z),X}(X,Z,W,oe):"string"==typeof Z?function k(X,Z,W){if(("string"!=typeof W||""===W)&&(W="utf8"),!f.isEncoding(W))throw new TypeError('"encoding" must be a valid string encoding');var oe=0|D(Z,W),be=(X=b(X,oe)).write(Z,W);return be!==oe&&(X=X.slice(0,be)),X}(X,Z,W):function x(X,Z){if(f.isBuffer(Z)){var W=0|P(Z.length);return 0===(X=b(X,W)).length||Z.copy(X,0,0,W),X}if(Z){if("undefined"!=typeof ArrayBuffer&&Z.buffer instanceof ArrayBuffer||"length"in Z)return"number"!=typeof Z.length||function te(X){return X!=X}(Z.length)?b(X,0):N(X,Z);if("Buffer"===Z.type&&j(Z.data))return N(X,Z.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(X,Z)}function g(X){if("number"!=typeof X)throw new TypeError('"size" argument must be a number');if(X<0)throw new RangeError('"size" argument must not be negative')}function T(X,Z){if(g(Z),X=b(X,Z<0?0:0|P(Z)),!f.TYPED_ARRAY_SUPPORT)for(var W=0;W<Z;++W)X[W]=0;return X}function N(X,Z){var W=Z.length<0?0:0|P(Z.length);X=b(X,W);for(var oe=0;oe<W;oe+=1)X[oe]=255&Z[oe];return X}function P(X){if(X>=L())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+L().toString(16)+" bytes");return 0|X}function D(X,Z){if(f.isBuffer(X))return X.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(X)||X instanceof ArrayBuffer))return X.byteLength;"string"!=typeof X&&(X=""+X);var W=X.length;if(0===W)return 0;for(var oe=!1;;)switch(Z){case"ascii":case"latin1":case"binary":return W;case"utf8":case"utf-8":case void 0:return J(X).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*W;case"hex":return W>>>1;case"base64":return re(X).length;default:if(oe)return J(X).length;Z=(""+Z).toLowerCase(),oe=!0}}function y(X,Z,W){var oe=!1;if((void 0===Z||Z<0)&&(Z=0),Z>this.length||((void 0===W||W>this.length)&&(W=this.length),W<=0)||(W>>>=0)<=(Z>>>=0))return"";for(X||(X="utf8");;)switch(X){case"hex":return ve(this,Z,W);case"utf8":case"utf-8":return ce(this,Z,W);case"ascii":return me(this,Z,W);case"latin1":case"binary":return xe(this,Z,W);case"base64":return H(this,Z,W);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Oe(this,Z,W);default:if(oe)throw new TypeError("Unknown encoding: "+X);X=(X+"").toLowerCase(),oe=!0}}function A(X,Z,W){var oe=X[Z];X[Z]=X[W],X[W]=oe}function I(X,Z,W,oe,be){if(0===X.length)return-1;if("string"==typeof W?(oe=W,W=0):W>2147483647?W=2147483647:W<-2147483648&&(W=-2147483648),W=+W,isNaN(W)&&(W=be?0:X.length-1),W<0&&(W=X.length+W),W>=X.length){if(be)return-1;W=X.length-1}else if(W<0){if(!be)return-1;W=0}if("string"==typeof Z&&(Z=f.from(Z,oe)),f.isBuffer(Z))return 0===Z.length?-1:G(X,Z,W,oe,be);if("number"==typeof Z)return Z&=255,f.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?be?Uint8Array.prototype.indexOf.call(X,Z,W):Uint8Array.prototype.lastIndexOf.call(X,Z,W):G(X,[Z],W,oe,be);throw new TypeError("val must be string, number or Buffer")}function G(X,Z,W,oe,be){var ut,Fe=1,We=X.length,at=Z.length;if(void 0!==oe&&("ucs2"===(oe=String(oe).toLowerCase())||"ucs-2"===oe||"utf16le"===oe||"utf-16le"===oe)){if(X.length<2||Z.length<2)return-1;Fe=2,We/=2,at/=2,W/=2}function et(Yt,vt){return 1===Fe?Yt[vt]:Yt.readUInt16BE(vt*Fe)}if(be){var Ot=-1;for(ut=W;ut<We;ut++)if(et(X,ut)===et(Z,-1===Ot?0:ut-Ot)){if(-1===Ot&&(Ot=ut),ut-Ot+1===at)return Ot*Fe}else-1!==Ot&&(ut-=ut-Ot),Ot=-1}else for(W+at>We&&(W=We-at),ut=W;ut>=0;ut--){for(var tt=!0,Et=0;Et<at;Et++)if(et(X,ut+Et)!==et(Z,Et)){tt=!1;break}if(tt)return ut}return-1}function ee(X,Z,W,oe){W=Number(W)||0;var be=X.length-W;oe?(oe=Number(oe))>be&&(oe=be):oe=be;var Fe=Z.length;if(Fe%2!=0)throw new TypeError("Invalid hex string");oe>Fe/2&&(oe=Fe/2);for(var We=0;We<oe;++We){var at=parseInt(Z.substr(2*We,2),16);if(isNaN(at))return We;X[W+We]=at}return We}function de(X,Z,W,oe){return z(J(Z,X.length-W),X,W,oe)}function ue(X,Z,W,oe){return z(function Me(X){for(var Z=[],W=0;W<X.length;++W)Z.push(255&X.charCodeAt(W));return Z}(Z),X,W,oe)}function Te(X,Z,W,oe){return ue(X,Z,W,oe)}function q(X,Z,W,oe){return z(re(Z),X,W,oe)}function se(X,Z,W,oe){return z(function ae(X,Z){for(var W,oe,Fe=[],We=0;We<X.length&&!((Z-=2)<0);++We)oe=(W=X.charCodeAt(We))>>8,Fe.push(W%256),Fe.push(oe);return Fe}(Z,X.length-W),X,W,oe)}function H(X,Z,W){return S.fromByteArray(0===Z&&W===X.length?X:X.slice(Z,W))}function ce(X,Z,W){W=Math.min(X.length,W);for(var oe=[],be=Z;be<W;){var et,ut,Ot,tt,Fe=X[be],We=null,at=Fe>239?4:Fe>223?3:Fe>191?2:1;if(be+at<=W)switch(at){case 1:Fe<128&&(We=Fe);break;case 2:128==(192&(et=X[be+1]))&&(tt=(31&Fe)<<6|63&et)>127&&(We=tt);break;case 3:ut=X[be+2],128==(192&(et=X[be+1]))&&128==(192&ut)&&(tt=(15&Fe)<<12|(63&et)<<6|63&ut)>2047&&(tt<55296||tt>57343)&&(We=tt);break;case 4:ut=X[be+2],Ot=X[be+3],128==(192&(et=X[be+1]))&&128==(192&ut)&&128==(192&Ot)&&(tt=(15&Fe)<<18|(63&et)<<12|(63&ut)<<6|63&Ot)>65535&&tt<1114112&&(We=tt)}null===We?(We=65533,at=1):We>65535&&(oe.push((We-=65536)>>>10&1023|55296),We=56320|1023&We),oe.push(We),be+=at}return function pe(X){var Z=X.length;if(Z<=4096)return String.fromCharCode.apply(String,X);for(var W="",oe=0;oe<Z;)W+=String.fromCharCode.apply(String,X.slice(oe,oe+=4096));return W}(oe)}O.Buffer=f,O.SlowBuffer=function _(X){return+X!=X&&(X=0),f.alloc(+X)},O.INSPECT_MAX_BYTES=50,f.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function U(){try{var X=new Uint8Array(1);return X.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===X.foo()&&"function"==typeof X.subarray&&0===X.subarray(1,1).byteLength}catch(Z){return!1}}(),O.kMaxLength=L(),f.poolSize=8192,f._augment=function(X){return X.__proto__=f.prototype,X},f.from=function(X,Z,W){return c(null,X,Z,W)},f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0})),f.alloc=function(X,Z,W){return function v(X,Z,W,oe){return g(Z),Z<=0?b(X,Z):void 0!==W?"string"==typeof oe?b(X,Z).fill(W,oe):b(X,Z).fill(W):b(X,Z)}(null,X,Z,W)},f.allocUnsafe=function(X){return T(null,X)},f.allocUnsafeSlow=function(X){return T(null,X)},f.isBuffer=function(Z){return!(null==Z||!Z._isBuffer)},f.compare=function(Z,W){if(!f.isBuffer(Z)||!f.isBuffer(W))throw new TypeError("Arguments must be Buffers");if(Z===W)return 0;for(var oe=Z.length,be=W.length,Fe=0,We=Math.min(oe,be);Fe<We;++Fe)if(Z[Fe]!==W[Fe]){oe=Z[Fe],be=W[Fe];break}return oe<be?-1:be<oe?1:0},f.isEncoding=function(Z){switch(String(Z).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(Z,W){if(!j(Z))throw new TypeError('"list" argument must be an Array of Buffers');if(0===Z.length)return f.alloc(0);var oe;if(void 0===W)for(W=0,oe=0;oe<Z.length;++oe)W+=Z[oe].length;var be=f.allocUnsafe(W),Fe=0;for(oe=0;oe<Z.length;++oe){var We=Z[oe];if(!f.isBuffer(We))throw new TypeError('"list" argument must be an Array of Buffers');We.copy(be,Fe),Fe+=We.length}return be},f.byteLength=D,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var Z=this.length;if(Z%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var W=0;W<Z;W+=2)A(this,W,W+1);return this},f.prototype.swap32=function(){var Z=this.length;if(Z%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var W=0;W<Z;W+=4)A(this,W,W+3),A(this,W+1,W+2);return this},f.prototype.swap64=function(){var Z=this.length;if(Z%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var W=0;W<Z;W+=8)A(this,W,W+7),A(this,W+1,W+6),A(this,W+2,W+5),A(this,W+3,W+4);return this},f.prototype.toString=function(){var Z=0|this.length;return 0===Z?"":0===arguments.length?ce(this,0,Z):y.apply(this,arguments)},f.prototype.equals=function(Z){if(!f.isBuffer(Z))throw new TypeError("Argument must be a Buffer");return this===Z||0===f.compare(this,Z)},f.prototype.inspect=function(){var Z="",W=O.INSPECT_MAX_BYTES;return this.length>0&&(Z=this.toString("hex",0,W).match(/.{2}/g).join(" "),this.length>W&&(Z+=" ... ")),"<Buffer "+Z+">"},f.prototype.compare=function(Z,W,oe,be,Fe){if(!f.isBuffer(Z))throw new TypeError("Argument must be a Buffer");if(void 0===W&&(W=0),void 0===oe&&(oe=Z?Z.length:0),void 0===be&&(be=0),void 0===Fe&&(Fe=this.length),W<0||oe>Z.length||be<0||Fe>this.length)throw new RangeError("out of range index");if(be>=Fe&&W>=oe)return 0;if(be>=Fe)return-1;if(W>=oe)return 1;if(this===Z)return 0;for(var We=(Fe>>>=0)-(be>>>=0),at=(oe>>>=0)-(W>>>=0),et=Math.min(We,at),ut=this.slice(be,Fe),Ot=Z.slice(W,oe),tt=0;tt<et;++tt)if(ut[tt]!==Ot[tt]){We=ut[tt],at=Ot[tt];break}return We<at?-1:at<We?1:0},f.prototype.includes=function(Z,W,oe){return-1!==this.indexOf(Z,W,oe)},f.prototype.indexOf=function(Z,W,oe){return I(this,Z,W,oe,!0)},f.prototype.lastIndexOf=function(Z,W,oe){return I(this,Z,W,oe,!1)},f.prototype.write=function(Z,W,oe,be){if(void 0===W)be="utf8",oe=this.length,W=0;else if(void 0===oe&&"string"==typeof W)be=W,oe=this.length,W=0;else{if(!isFinite(W))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");W|=0,isFinite(oe)?(oe|=0,void 0===be&&(be="utf8")):(be=oe,oe=void 0)}var Fe=this.length-W;if((void 0===oe||oe>Fe)&&(oe=Fe),Z.length>0&&(oe<0||W<0)||W>this.length)throw new RangeError("Attempt to write outside buffer bounds");be||(be="utf8");for(var We=!1;;)switch(be){case"hex":return ee(this,Z,W,oe);case"utf8":case"utf-8":return de(this,Z,W,oe);case"ascii":return ue(this,Z,W,oe);case"latin1":case"binary":return Te(this,Z,W,oe);case"base64":return q(this,Z,W,oe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return se(this,Z,W,oe);default:if(We)throw new TypeError("Unknown encoding: "+be);be=(""+be).toLowerCase(),We=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function me(X,Z,W){var oe="";W=Math.min(X.length,W);for(var be=Z;be<W;++be)oe+=String.fromCharCode(127&X[be]);return oe}function xe(X,Z,W){var oe="";W=Math.min(X.length,W);for(var be=Z;be<W;++be)oe+=String.fromCharCode(X[be]);return oe}function ve(X,Z,W){var oe=X.length;(!Z||Z<0)&&(Z=0),(!W||W<0||W>oe)&&(W=oe);for(var be="",Fe=Z;Fe<W;++Fe)be+=Y(X[Fe]);return be}function Oe(X,Z,W){for(var oe=X.slice(Z,W),be="",Fe=0;Fe<oe.length;Fe+=2)be+=String.fromCharCode(oe[Fe]+256*oe[Fe+1]);return be}function Ee(X,Z,W){if(X%1!=0||X<0)throw new RangeError("offset is not uint");if(X+Z>W)throw new RangeError("Trying to access beyond buffer length")}function Ie(X,Z,W,oe,be,Fe){if(!f.isBuffer(X))throw new TypeError('"buffer" argument must be a Buffer instance');if(Z>be||Z<Fe)throw new RangeError('"value" argument is out of bounds');if(W+oe>X.length)throw new RangeError("Index out of range")}function Re(X,Z,W,oe){Z<0&&(Z=65535+Z+1);for(var be=0,Fe=Math.min(X.length-W,2);be<Fe;++be)X[W+be]=(Z&255<<8*(oe?be:1-be))>>>8*(oe?be:1-be)}function Pe(X,Z,W,oe){Z<0&&(Z=4294967295+Z+1);for(var be=0,Fe=Math.min(X.length-W,4);be<Fe;++be)X[W+be]=Z>>>8*(oe?be:3-be)&255}function ke(X,Z,W,oe,be,Fe){if(W+oe>X.length)throw new RangeError("Index out of range");if(W<0)throw new RangeError("Index out of range")}function Be(X,Z,W,oe,be){return be||ke(X,0,W,4),R.write(X,Z,W,oe,23,4),W+4}function qe(X,Z,W,oe,be){return be||ke(X,0,W,8),R.write(X,Z,W,oe,52,8),W+8}f.prototype.slice=function(Z,W){var be,oe=this.length;if((Z=~~Z)<0?(Z+=oe)<0&&(Z=0):Z>oe&&(Z=oe),(W=void 0===W?oe:~~W)<0?(W+=oe)<0&&(W=0):W>oe&&(W=oe),W<Z&&(W=Z),f.TYPED_ARRAY_SUPPORT)(be=this.subarray(Z,W)).__proto__=f.prototype;else{var Fe=W-Z;be=new f(Fe,void 0);for(var We=0;We<Fe;++We)be[We]=this[We+Z]}return be},f.prototype.readUIntLE=function(Z,W,oe){Z|=0,W|=0,oe||Ee(Z,W,this.length);for(var be=this[Z],Fe=1,We=0;++We<W&&(Fe*=256);)be+=this[Z+We]*Fe;return be},f.prototype.readUIntBE=function(Z,W,oe){Z|=0,W|=0,oe||Ee(Z,W,this.length);for(var be=this[Z+--W],Fe=1;W>0&&(Fe*=256);)be+=this[Z+--W]*Fe;return be},f.prototype.readUInt8=function(Z,W){return W||Ee(Z,1,this.length),this[Z]},f.prototype.readUInt16LE=function(Z,W){return W||Ee(Z,2,this.length),this[Z]|this[Z+1]<<8},f.prototype.readUInt16BE=function(Z,W){return W||Ee(Z,2,this.length),this[Z]<<8|this[Z+1]},f.prototype.readUInt32LE=function(Z,W){return W||Ee(Z,4,this.length),(this[Z]|this[Z+1]<<8|this[Z+2]<<16)+16777216*this[Z+3]},f.prototype.readUInt32BE=function(Z,W){return W||Ee(Z,4,this.length),16777216*this[Z]+(this[Z+1]<<16|this[Z+2]<<8|this[Z+3])},f.prototype.readIntLE=function(Z,W,oe){Z|=0,W|=0,oe||Ee(Z,W,this.length);for(var be=this[Z],Fe=1,We=0;++We<W&&(Fe*=256);)be+=this[Z+We]*Fe;return be>=(Fe*=128)&&(be-=Math.pow(2,8*W)),be},f.prototype.readIntBE=function(Z,W,oe){Z|=0,W|=0,oe||Ee(Z,W,this.length);for(var be=W,Fe=1,We=this[Z+--be];be>0&&(Fe*=256);)We+=this[Z+--be]*Fe;return We>=(Fe*=128)&&(We-=Math.pow(2,8*W)),We},f.prototype.readInt8=function(Z,W){return W||Ee(Z,1,this.length),128&this[Z]?-1*(255-this[Z]+1):this[Z]},f.prototype.readInt16LE=function(Z,W){W||Ee(Z,2,this.length);var oe=this[Z]|this[Z+1]<<8;return 32768&oe?4294901760|oe:oe},f.prototype.readInt16BE=function(Z,W){W||Ee(Z,2,this.length);var oe=this[Z+1]|this[Z]<<8;return 32768&oe?4294901760|oe:oe},f.prototype.readInt32LE=function(Z,W){return W||Ee(Z,4,this.length),this[Z]|this[Z+1]<<8|this[Z+2]<<16|this[Z+3]<<24},f.prototype.readInt32BE=function(Z,W){return W||Ee(Z,4,this.length),this[Z]<<24|this[Z+1]<<16|this[Z+2]<<8|this[Z+3]},f.prototype.readFloatLE=function(Z,W){return W||Ee(Z,4,this.length),R.read(this,Z,!0,23,4)},f.prototype.readFloatBE=function(Z,W){return W||Ee(Z,4,this.length),R.read(this,Z,!1,23,4)},f.prototype.readDoubleLE=function(Z,W){return W||Ee(Z,8,this.length),R.read(this,Z,!0,52,8)},f.prototype.readDoubleBE=function(Z,W){return W||Ee(Z,8,this.length),R.read(this,Z,!1,52,8)},f.prototype.writeUIntLE=function(Z,W,oe,be){Z=+Z,W|=0,oe|=0,be||Ie(this,Z,W,oe,Math.pow(2,8*oe)-1,0);var We=1,at=0;for(this[W]=255&Z;++at<oe&&(We*=256);)this[W+at]=Z/We&255;return W+oe},f.prototype.writeUIntBE=function(Z,W,oe,be){Z=+Z,W|=0,oe|=0,be||Ie(this,Z,W,oe,Math.pow(2,8*oe)-1,0);var We=oe-1,at=1;for(this[W+We]=255&Z;--We>=0&&(at*=256);)this[W+We]=Z/at&255;return W+oe},f.prototype.writeUInt8=function(Z,W,oe){return Z=+Z,W|=0,oe||Ie(this,Z,W,1,255,0),f.TYPED_ARRAY_SUPPORT||(Z=Math.floor(Z)),this[W]=255&Z,W+1},f.prototype.writeUInt16LE=function(Z,W,oe){return Z=+Z,W|=0,oe||Ie(this,Z,W,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[W]=255&Z,this[W+1]=Z>>>8):Re(this,Z,W,!0),W+2},f.prototype.writeUInt16BE=function(Z,W,oe){return Z=+Z,W|=0,oe||Ie(this,Z,W,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[W]=Z>>>8,this[W+1]=255&Z):Re(this,Z,W,!1),W+2},f.prototype.writeUInt32LE=function(Z,W,oe){return Z=+Z,W|=0,oe||Ie(this,Z,W,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[W+3]=Z>>>24,this[W+2]=Z>>>16,this[W+1]=Z>>>8,this[W]=255&Z):Pe(this,Z,W,!0),W+4},f.prototype.writeUInt32BE=function(Z,W,oe){return Z=+Z,W|=0,oe||Ie(this,Z,W,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[W]=Z>>>24,this[W+1]=Z>>>16,this[W+2]=Z>>>8,this[W+3]=255&Z):Pe(this,Z,W,!1),W+4},f.prototype.writeIntLE=function(Z,W,oe,be){if(Z=+Z,W|=0,!be){var Fe=Math.pow(2,8*oe-1);Ie(this,Z,W,oe,Fe-1,-Fe)}var We=0,at=1,et=0;for(this[W]=255&Z;++We<oe&&(at*=256);)Z<0&&0===et&&0!==this[W+We-1]&&(et=1),this[W+We]=(Z/at>>0)-et&255;return W+oe},f.prototype.writeIntBE=function(Z,W,oe,be){if(Z=+Z,W|=0,!be){var Fe=Math.pow(2,8*oe-1);Ie(this,Z,W,oe,Fe-1,-Fe)}var We=oe-1,at=1,et=0;for(this[W+We]=255&Z;--We>=0&&(at*=256);)Z<0&&0===et&&0!==this[W+We+1]&&(et=1),this[W+We]=(Z/at>>0)-et&255;return W+oe},f.prototype.writeInt8=function(Z,W,oe){return Z=+Z,W|=0,oe||Ie(this,Z,W,1,127,-128),f.TYPED_ARRAY_SUPPORT||(Z=Math.floor(Z)),Z<0&&(Z=255+Z+1),this[W]=255&Z,W+1},f.prototype.writeInt16LE=function(Z,W,oe){return Z=+Z,W|=0,oe||Ie(this,Z,W,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[W]=255&Z,this[W+1]=Z>>>8):Re(this,Z,W,!0),W+2},f.prototype.writeInt16BE=function(Z,W,oe){return Z=+Z,W|=0,oe||Ie(this,Z,W,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[W]=Z>>>8,this[W+1]=255&Z):Re(this,Z,W,!1),W+2},f.prototype.writeInt32LE=function(Z,W,oe){return Z=+Z,W|=0,oe||Ie(this,Z,W,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[W]=255&Z,this[W+1]=Z>>>8,this[W+2]=Z>>>16,this[W+3]=Z>>>24):Pe(this,Z,W,!0),W+4},f.prototype.writeInt32BE=function(Z,W,oe){return Z=+Z,W|=0,oe||Ie(this,Z,W,4,2147483647,-2147483648),Z<0&&(Z=4294967295+Z+1),f.TYPED_ARRAY_SUPPORT?(this[W]=Z>>>24,this[W+1]=Z>>>16,this[W+2]=Z>>>8,this[W+3]=255&Z):Pe(this,Z,W,!1),W+4},f.prototype.writeFloatLE=function(Z,W,oe){return Be(this,Z,W,!0,oe)},f.prototype.writeFloatBE=function(Z,W,oe){return Be(this,Z,W,!1,oe)},f.prototype.writeDoubleLE=function(Z,W,oe){return qe(this,Z,W,!0,oe)},f.prototype.writeDoubleBE=function(Z,W,oe){return qe(this,Z,W,!1,oe)},f.prototype.copy=function(Z,W,oe,be){if(oe||(oe=0),!be&&0!==be&&(be=this.length),W>=Z.length&&(W=Z.length),W||(W=0),be>0&&be<oe&&(be=oe),be===oe||0===Z.length||0===this.length)return 0;if(W<0)throw new RangeError("targetStart out of bounds");if(oe<0||oe>=this.length)throw new RangeError("sourceStart out of bounds");if(be<0)throw new RangeError("sourceEnd out of bounds");be>this.length&&(be=this.length),Z.length-W<be-oe&&(be=Z.length-W+oe);var We,Fe=be-oe;if(this===Z&&oe<W&&W<be)for(We=Fe-1;We>=0;--We)Z[We+W]=this[We+oe];else if(Fe<1e3||!f.TYPED_ARRAY_SUPPORT)for(We=0;We<Fe;++We)Z[We+W]=this[We+oe];else Uint8Array.prototype.set.call(Z,this.subarray(oe,oe+Fe),W);return Fe},f.prototype.fill=function(Z,W,oe,be){if("string"==typeof Z){if("string"==typeof W?(be=W,W=0,oe=this.length):"string"==typeof oe&&(be=oe,oe=this.length),1===Z.length){var Fe=Z.charCodeAt(0);Fe<256&&(Z=Fe)}if(void 0!==be&&"string"!=typeof be)throw new TypeError("encoding must be a string");if("string"==typeof be&&!f.isEncoding(be))throw new TypeError("Unknown encoding: "+be)}else"number"==typeof Z&&(Z&=255);if(W<0||this.length<W||this.length<oe)throw new RangeError("Out of range index");if(oe<=W)return this;var We;if(W>>>=0,oe=void 0===oe?this.length:oe>>>0,Z||(Z=0),"number"==typeof Z)for(We=W;We<oe;++We)this[We]=Z;else{var at=f.isBuffer(Z)?Z:J(new f(Z,be).toString()),et=at.length;for(We=0;We<oe-W;++We)this[We+W]=at[We%et]}return this};var He=/[^+\/0-9A-Za-z-_]/g;function Y(X){return X<16?"0"+X.toString(16):X.toString(16)}function J(X,Z){Z=Z||1/0;for(var W,oe=X.length,be=null,Fe=[],We=0;We<oe;++We){if((W=X.charCodeAt(We))>55295&&W<57344){if(!be){if(W>56319){(Z-=3)>-1&&Fe.push(239,191,189);continue}if(We+1===oe){(Z-=3)>-1&&Fe.push(239,191,189);continue}be=W;continue}if(W<56320){(Z-=3)>-1&&Fe.push(239,191,189),be=W;continue}W=65536+(be-55296<<10|W-56320)}else be&&(Z-=3)>-1&&Fe.push(239,191,189);if(be=null,W<128){if((Z-=1)<0)break;Fe.push(W)}else if(W<2048){if((Z-=2)<0)break;Fe.push(W>>6|192,63&W|128)}else if(W<65536){if((Z-=3)<0)break;Fe.push(W>>12|224,W>>6&63|128,63&W|128)}else{if(!(W<1114112))throw new Error("Invalid code point");if((Z-=4)<0)break;Fe.push(W>>18|240,W>>12&63|128,W>>6&63|128,63&W|128)}}return Fe}function re(X){return S.toByteArray(function De(X){if((X=function he(X){return X.trim?X.trim():X.replace(/^\s+|\s+$/g,"")}(X).replace(He,"")).length<2)return"";for(;X.length%4!=0;)X+="=";return X}(X))}function z(X,Z,W,oe){for(var be=0;be<oe&&!(be+W>=Z.length||be>=X.length);++be)Z[be+W]=X[be];return be}}).call(this,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/codem-isoboxer/dist/iso_boxer.js":function(Ve,O,r){var e={parseBuffer:function(j){return new S(j).parse()},addBoxProcessor:function(j,U){"string"!=typeof j||"function"!=typeof U||(R.prototype._boxProcessors[j]=U)},createFile:function(){return new S},createBox:function(j,U,L){var b=R.create(j);return U&&U.append(b,L),b},createFullBox:function(j,U,L){var b=e.createBox(j,U,L);return b.version=0,b.flags=0,b},Utils:{}};e.Utils.dataViewToString=function(j,U){var L=U||"utf-8";if("undefined"!=typeof TextDecoder)return new TextDecoder(L).decode(j);var b=[],f=0;if("utf-8"===L)for(;f<j.byteLength;){var c=j.getUint8(f++);c<128||(c<224?(c=(31&c)<<6,c|=63&j.getUint8(f++)):c<240?(c=(15&c)<<12,c|=(63&j.getUint8(f++))<<6,c|=63&j.getUint8(f++)):(c=(7&c)<<18,c|=(63&j.getUint8(f++))<<12,c|=(63&j.getUint8(f++))<<6,c|=63&j.getUint8(f++))),b.push(String.fromCharCode(c))}else for(;f<j.byteLength;)b.push(String.fromCharCode(j.getUint8(f++)));return b.join("")},e.Utils.utf8ToByteArray=function(j){var U,L;if("undefined"!=typeof TextEncoder)U=(new TextEncoder).encode(j);else for(U=[],L=0;L<j.length;++L){var b=j.charCodeAt(L);b<128?U.push(b):b<2048?(U.push(192|b>>6),U.push(128|63&b)):b<65536?(U.push(224|b>>12),U.push(128|63&b>>6),U.push(128|63&b)):(U.push(240|b>>18),U.push(128|63&b>>12),U.push(128|63&b>>6),U.push(128|63&b))}return U},e.Utils.appendBox=function(j,U,L){if(U._offset=j._cursor.offset,U._root=j._root?j._root:j,U._raw=j._raw,U._parent=j,-1!==L){if(null==L)return void j.boxes.push(U);var f,b=-1;if("number"==typeof L)b=L;else{if("string"==typeof L)f=L;else{if("object"!=typeof L||!L.type)return void j.boxes.push(U);f=L.type}for(var c=0;c<j.boxes.length;c++)if(f===j.boxes[c].type){b=c+1;break}}j.boxes.splice(b,0,U)}},O.parseBuffer=e.parseBuffer,O.addBoxProcessor=e.addBoxProcessor,O.createFile=e.createFile,O.createBox=e.createBox,O.createFullBox=e.createFullBox,O.Utils=e.Utils,e.Cursor=function(j){this.offset=void 0===j?0:j};var S=function(j){this._cursor=new e.Cursor,this.boxes=[],j&&(this._raw=new DataView(j))};S.prototype.fetch=function(j){var U=this.fetchAll(j,!0);return U.length?U[0]:null},S.prototype.fetchAll=function(j,U){var L=[];return S._sweep.call(this,j,L,U),L},S.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var j=R.parse(this);if(void 0===j.type)break;this.boxes.push(j)}return this},S._sweep=function(j,U,L){for(var b in this.type&&this.type==j&&U.push(this),this.boxes){if(U.length&&L)return;S._sweep.call(this.boxes[b],j,U,L)}},S.prototype.write=function(){var U,j=0;for(U=0;U<this.boxes.length;U++)j+=this.boxes[U].getLength(!1);var L=new Uint8Array(j);for(this._rawo=new DataView(L.buffer),this.bytes=L,this._cursor.offset=0,U=0;U<this.boxes.length;U++)this.boxes[U].write();return L.buffer},S.prototype.append=function(j,U){e.Utils.appendBox(this,j,U)};var R=function(){this._cursor=new e.Cursor};R.parse=function(j){var U=new R;return U._offset=j._cursor.offset,U._root=j._root?j._root:j,U._raw=j._raw,U._parent=j,U._parseBox(),j._cursor.offset=U._raw.byteOffset+U._raw.byteLength,U},R.create=function(j){var U=new R;return U.type=j,U.boxes=[],U},R.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],R.prototype._boxProcessors={},R.prototype._procField=function(j,U,L){this._parsing?this[j]=this._readField(U,L):this._writeField(U,L,this[j])},R.prototype._procFieldArray=function(j,U,L,b){var f;if(this._parsing)for(this[j]=[],f=0;f<U;f++)this[j][f]=this._readField(L,b);else for(f=0;f<this[j].length;f++)this._writeField(L,b,this[j][f])},R.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},R.prototype._procEntries=function(j,U,L){var b;if(this._parsing)for(this[j]=[],b=0;b<U;b++)this[j].push({}),L.call(this,this[j][b]);else for(b=0;b<U;b++)L.call(this,this[j][b])},R.prototype._procSubEntries=function(j,U,L,b){var f;if(this._parsing)for(j[U]=[],f=0;f<L;f++)j[U].push({}),b.call(this,j[U][f]);else for(f=0;f<L;f++)b.call(this,j[U][f])},R.prototype._procEntryField=function(j,U,L,b){this._parsing?j[U]=this._readField(L,b):this._writeField(L,b,j[U])},R.prototype._procSubBoxes=function(j,U){var L;if(this._parsing)for(this[j]=[],L=0;L<U;L++)this[j].push(R.parse(this));else for(L=0;L<U;L++)this._rawo?this[j][L].write():this.size+=this[j][L].getLength()},R.prototype._readField=function(j,U){switch(j){case"uint":return this._readUint(U);case"int":return this._readInt(U);case"template":return this._readTemplate(U);case"string":return-1===U?this._readTerminatedString():this._readString(U);case"data":return this._readData(U);case"utf8":return this._readUTF8String();default:return-1}},R.prototype._readInt=function(j){var U=null,L=this._cursor.offset-this._raw.byteOffset;switch(j){case 8:U=this._raw.getInt8(L);break;case 16:U=this._raw.getInt16(L);break;case 32:U=this._raw.getInt32(L);break;case 64:var b=this._raw.getInt32(L),f=this._raw.getInt32(L+4);U=b*Math.pow(2,32)+f}return this._cursor.offset+=j>>3,U},R.prototype._readUint=function(j){var b,f,U=null,L=this._cursor.offset-this._raw.byteOffset;switch(j){case 8:U=this._raw.getUint8(L);break;case 16:U=this._raw.getUint16(L);break;case 24:U=((b=this._raw.getUint16(L))<<8)+(f=this._raw.getUint8(L+2));break;case 32:U=this._raw.getUint32(L);break;case 64:b=this._raw.getUint32(L),f=this._raw.getUint32(L+4),U=b*Math.pow(2,32)+f}return this._cursor.offset+=j>>3,U},R.prototype._readString=function(j){for(var U="",L=0;L<j;L++){var b=this._readUint(8);U+=String.fromCharCode(b)}return U},R.prototype._readTemplate=function(j){return this._readUint(j/2)+this._readUint(j/2)/Math.pow(2,j/2)},R.prototype._readTerminatedString=function(){for(var j="";this._cursor.offset-this._offset<this._raw.byteLength;){var U=this._readUint(8);if(0===U)break;j+=String.fromCharCode(U)}return j},R.prototype._readData=function(j){var U=j>0?j:this._raw.byteLength-(this._cursor.offset-this._offset);if(U>0){var L=new Uint8Array(this._raw.buffer,this._cursor.offset,U);return this._cursor.offset+=U,L}return null},R.prototype._readUTF8String=function(){var j=this._raw.byteLength-(this._cursor.offset-this._offset),U=null;return j>0&&(U=new DataView(this._raw.buffer,this._cursor.offset,j),this._cursor.offset+=j),U&&e.Utils.dataViewToString(U)},R.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset,this._raw.byteLength-this._cursor.offset+8);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type)?this._parseContainerBox():this._data=this._readData())}},R.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},R.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(R.parse(this))},R.prototype.append=function(j,U){e.Utils.appendBox(this,j,U)},R.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var j=0;j<this.boxes.length;j++)this.size+=this.boxes[j].getLength();return this._data&&this._writeData(this._data),this.size},R.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var j=0;j<this.boxes.length;j++)this.boxes[j].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},R.prototype._writeInt=function(j,U){if(this._rawo){var L=this._cursor.offset-this._rawo.byteOffset;switch(j){case 8:this._rawo.setInt8(L,U);break;case 16:this._rawo.setInt16(L,U);break;case 32:this._rawo.setInt32(L,U);break;case 64:var b=Math.floor(U/Math.pow(2,32)),f=U-b*Math.pow(2,32);this._rawo.setUint32(L,b),this._rawo.setUint32(L+4,f)}this._cursor.offset+=j>>3}else this.size+=j>>3},R.prototype._writeUint=function(j,U){if(this._rawo){var b,f,L=this._cursor.offset-this._rawo.byteOffset;switch(j){case 8:this._rawo.setUint8(L,U);break;case 16:this._rawo.setUint16(L,U);break;case 24:f=255&U,this._rawo.setUint16(L,b=(16776960&U)>>8),this._rawo.setUint8(L+2,f);break;case 32:this._rawo.setUint32(L,U);break;case 64:f=U-(b=Math.floor(U/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(L,b),this._rawo.setUint32(L+4,f)}this._cursor.offset+=j>>3}else this.size+=j>>3},R.prototype._writeString=function(j,U){for(var L=0;L<j;L++)this._writeUint(8,U.charCodeAt(L))},R.prototype._writeTerminatedString=function(j){if(0!==j.length){for(var U=0;U<j.length;U++)this._writeUint(8,j.charCodeAt(U));this._writeUint(8,0)}},R.prototype._writeTemplate=function(j,U){var L=Math.floor(U),b=(U-L)*Math.pow(2,j/2);this._writeUint(j/2,L),this._writeUint(j/2,b)},R.prototype._writeData=function(j){if(j)if(this._rawo){if(j instanceof Array){for(var L=this._cursor.offset-this._rawo.byteOffset,U=0;U<j.length;U++)this._rawo.setInt8(L+U,j[U]);this._cursor.offset+=j.length}j instanceof Uint8Array&&(this._root.bytes.set(j,this._cursor.offset),this._cursor.offset+=j.length)}else this.size+=j.length},R.prototype._writeUTF8String=function(j){var U=e.Utils.utf8ToByteArray(j);if(this._rawo)for(var L=new DataView(this._rawo.buffer,this._cursor.offset,U.length),b=0;b<U.length;b++)L.setUint8(b,U[b]);else this.size+=U.length},R.prototype._writeField=function(j,U,L){switch(j){case"uint":this._writeUint(U,L);break;case"int":this._writeInt(U,L);break;case"template":this._writeTemplate(U,L);break;case"string":-1==U?this._writeTerminatedString(L):this._writeString(U,L);break;case"data":this._writeData(L);break;case"utf8":this._writeUTF8String(L)}},R.prototype._boxProcessors.avc1=R.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},R.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},R.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(j){this._procEntryField(j,"segment_duration","uint",1===this.version?64:32),this._procEntryField(j,"media_time","int",1===this.version?64:32),this._procEntryField(j,"media_rate_integer","int",16),this._procEntryField(j,"media_rate_fraction","int",16)})},R.prototype._boxProcessors.emsg=function(){this._procFullBox(),1==this.version?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},R.prototype._boxProcessors.free=R.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},R.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},R.prototype._boxProcessors.ftyp=R.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var j=-1;this._parsing&&(j=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",j,"string",4)},R.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},R.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},R.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),!this._parsing&&"string"==typeof this.language&&(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},R.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",1==this.version?64:32)},R.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},R.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},R.prototype._boxProcessors.mp4a=R.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},R.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},R.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},R.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},R.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},R.prototype._boxProcessors.sdtp=function(){this._procFullBox();var j=-1;this._parsing&&(j=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",j,"uint",8)},R.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",1==this.version?64:32),this._procField("first_offset","uint",1==this.version?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(j){this._parsing||(j.reference=(1&j.reference_type)<<31,j.reference|=2147483647&j.referenced_size,j.sap=(1&j.starts_with_SAP)<<31,j.sap|=(3&j.SAP_type)<<28,j.sap|=268435455&j.SAP_delta_time),this._procEntryField(j,"reference","uint",32),this._procEntryField(j,"subsegment_duration","uint",32),this._procEntryField(j,"sap","uint",32),this._parsing&&(j.reference_type=j.reference>>31&1,j.referenced_size=2147483647&j.reference,j.starts_with_SAP=j.sap>>31&1,j.SAP_type=j.sap>>28&7,j.SAP_delta_time=268435455&j.sap)})},R.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},R.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(j){this._procEntryField(j,"ranges_count","uint",32),this._procSubEntries(j,"ranges",j.ranges_count,function(U){this._procEntryField(U,"level","uint",8),this._procEntryField(U,"range_size","uint",24)})})},R.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},R.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(j){this._procEntryField(j,"sample_delta","uint",32),this._procEntryField(j,"subsample_count","uint",16),this._procSubEntries(j,"subsamples",j.subsample_count,function(U){this._procEntryField(U,"subsample_size","uint",1===this.version?32:16),this._procEntryField(U,"subsample_priority","uint",8),this._procEntryField(U,"discardable","uint",8),this._procEntryField(U,"codec_specific_parameters","uint",32)})})},R.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},R.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",1==this.version?64:32)},R.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},R.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(j){this._procEntryField(j,"time","uint",1===this.version?64:32),this._procEntryField(j,"moof_offset","uint",1===this.version?64:32),this._procEntryField(j,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(j,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(j,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},R.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},R.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},R.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(j){256&this.flags&&this._procEntryField(j,"sample_duration","uint",32),512&this.flags&&this._procEntryField(j,"sample_size","uint",32),1024&this.flags&&this._procEntryField(j,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(j,"sample_composition_time_offset",1===this.version?"int":"uint",32)})},R.prototype._boxProcessors["url "]=R.prototype._boxProcessors["urn "]=function(){this._procFullBox(),"urn "===this.type&&this._procField("name","string",-1),this._procField("location","string",-1)},R.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},R.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},R.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},R.prototype._boxProcessors.vtte=function(){}},"./node_modules/core-util-is/lib/util.js":function(Ve,O,r){function B(x){return Object.prototype.toString.call(x)}O.isArray=function e(x){return Array.isArray?Array.isArray(x):"[object Array]"===B(x)},O.isBoolean=function S(x){return"boolean"==typeof x},O.isNull=function R(x){return null===x},O.isNullOrUndefined=function j(x){return null==x},O.isNumber=function U(x){return"number"==typeof x},O.isString=function L(x){return"string"==typeof x},O.isSymbol=function b(x){return"symbol"==typeof x},O.isUndefined=function f(x){return void 0===x},O.isRegExp=function c(x){return"[object RegExp]"===B(x)},O.isObject=function g(x){return"object"==typeof x&&null!==x},O.isDate=function v(x){return"[object Date]"===B(x)},O.isError=function T(x){return"[object Error]"===B(x)||x instanceof Error},O.isFunction=function k(x){return"function"==typeof x},O.isPrimitive=function N(x){return null===x||"boolean"==typeof x||"number"==typeof x||"string"==typeof x||"symbol"==typeof x||void 0===x},O.isBuffer=r("./node_modules/buffer/index.js").Buffer.isBuffer},"./node_modules/es6-promise/auto.js":function(Ve,O,r){"use strict";Ve.exports=r("./node_modules/es6-promise/dist/es6-promise.js").polyfill()},"./node_modules/es6-promise/dist/es6-promise.js":function(Ve,O,r){(function(e,S){var j;j=function(){"use strict";function j(Fe){return"function"==typeof Fe}var L=Array.isArray?Array.isArray:function(Fe){return"[object Array]"===Object.prototype.toString.call(Fe)},b=0,f=void 0,c=void 0,g=function(We,at){G[b]=We,G[b+1]=at,2===(b+=2)&&(c?c(ee):ue())};var k="undefined"!=typeof window?window:void 0,N=k||{},B=N.MutationObserver||N.WebKitMutationObserver,x="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),P="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function I(){var Fe=setTimeout;return function(){return Fe(ee,1)}}var G=new Array(1e3);function ee(){for(var Fe=0;Fe<b;Fe+=2)(0,G[Fe])(G[Fe+1]),G[Fe]=void 0,G[Fe+1]=void 0;b=0}var ue=void 0;function Te(Fe,We){var at=this,et=new this.constructor(H);void 0===et[se]&&Me(et);var ut=at._state;if(ut){var Ot=arguments[ut-1];g(function(){return De(ut,et,Ot,at._result)})}else qe(at,et,Fe,We);return et}function q(Fe){if(Fe&&"object"==typeof Fe&&Fe.constructor===this)return Fe;var at=new this(H);return Re(at,Fe),at}ue=x?function _(){return function(){return e.nextTick(ee)}}():B?function y(){var Fe=0,We=new B(ee),at=document.createTextNode("");return We.observe(at,{characterData:!0}),function(){at.data=Fe=++Fe%2}}():P?function A(){var Fe=new MessageChannel;return Fe.port1.onmessage=ee,function(){return Fe.port2.postMessage(0)}}():void 0===k?function de(){try{var Fe=Function("return this")().require("vertx");return f=Fe.runOnLoop||Fe.runOnContext,function D(){return void 0!==f?function(){f(ee)}:I()}()}catch(We){return I()}}():I();var se=Math.random().toString(36).substring(2);function H(){}var ce=void 0;function Ie(Fe,We,at){We.constructor===Fe.constructor&&at===Te&&We.constructor.resolve===q?function Ee(Fe,We){1===We._state?ke(Fe,We._result):2===We._state?Be(Fe,We._result):qe(We,void 0,function(at){return Re(Fe,at)},function(at){return Be(Fe,at)})}(Fe,We):void 0===at?ke(Fe,We):j(at)?function Oe(Fe,We,at){g(function(et){var ut=!1,Ot=function ve(Fe,We,at,et){try{Fe.call(We,at,et)}catch(ut){return ut}}(at,We,function(tt){ut||(ut=!0,We!==tt?Re(et,tt):ke(et,tt))},function(tt){ut||(ut=!0,Be(et,tt))});!ut&&Ot&&(ut=!0,Be(et,Ot))},Fe)}(Fe,We,at):ke(Fe,We)}function Re(Fe,We){if(Fe===We)Be(Fe,function me(){return new TypeError("You cannot resolve a promise with itself")}());else if(function R(Fe){var We=typeof Fe;return null!==Fe&&("object"===We||"function"===We)}(We)){var at=void 0;try{at=We.then}catch(et){return void Be(Fe,et)}Ie(Fe,We,at)}else ke(Fe,We)}function Pe(Fe){Fe._onerror&&Fe._onerror(Fe._result),He(Fe)}function ke(Fe,We){Fe._state===ce&&(Fe._result=We,Fe._state=1,0!==Fe._subscribers.length&&g(He,Fe))}function Be(Fe,We){Fe._state===ce&&(Fe._state=2,Fe._result=We,g(Pe,Fe))}function qe(Fe,We,at,et){var ut=Fe._subscribers,Ot=ut.length;Fe._onerror=null,ut[Ot]=We,ut[Ot+1]=at,ut[Ot+2]=et,0===Ot&&Fe._state&&g(He,Fe)}function He(Fe){var We=Fe._subscribers,at=Fe._state;if(0!==We.length){for(var et=void 0,ut=void 0,Ot=Fe._result,tt=0;tt<We.length;tt+=3)ut=We[tt+at],(et=We[tt])?De(at,et,ut,Ot):ut(Ot);Fe._subscribers.length=0}}function De(Fe,We,at,et){var ut=j(at),Ot=void 0,tt=void 0,Et=!0;if(ut){try{Ot=at(et)}catch(Yt){Et=!1,tt=Yt}if(We===Ot)return void Be(We,function xe(){return new TypeError("A promises callback cannot return that same promise.")}())}else Ot=et;We._state!==ce||(ut&&Et?Re(We,Ot):!1===Et?Be(We,tt):1===Fe?ke(We,Ot):2===Fe&&Be(We,Ot))}var Y=0;function Me(Fe){Fe[se]=Y++,Fe._state=void 0,Fe._result=void 0,Fe._subscribers=[]}var re=function(){function Fe(We,at){this._instanceConstructor=We,this.promise=new We(H),this.promise[se]||Me(this.promise),L(at)?(this.length=at.length,this._remaining=at.length,this._result=new Array(this.length),0===this.length?ke(this.promise,this._result):(this.length=this.length||0,this._enumerate(at),0===this._remaining&&ke(this.promise,this._result))):Be(this.promise,function ae(){return new Error("Array Methods must be provided an Array")}())}return Fe.prototype._enumerate=function(at){for(var et=0;this._state===ce&&et<at.length;et++)this._eachEntry(at[et],et)},Fe.prototype._eachEntry=function(at,et){var ut=this._instanceConstructor,Ot=ut.resolve;if(Ot===q){var tt=void 0,Et=void 0,Yt=!1;try{tt=at.then}catch(At){Yt=!0,Et=At}if(tt===Te&&at._state!==ce)this._settledAt(at._state,et,at._result);else if("function"!=typeof tt)this._remaining--,this._result[et]=at;else if(ut===oe){var vt=new ut(H);Yt?Be(vt,Et):Ie(vt,at,tt),this._willSettleAt(vt,et)}else this._willSettleAt(new ut(function(At){return At(at)}),et)}else this._willSettleAt(Ot(at),et)},Fe.prototype._settledAt=function(at,et,ut){var Ot=this.promise;Ot._state===ce&&(this._remaining--,2===at?Be(Ot,ut):this._result[et]=ut),0===this._remaining&&ke(Ot,this._result)},Fe.prototype._willSettleAt=function(at,et){var ut=this;qe(at,void 0,function(Ot){return ut._settledAt(1,et,Ot)},function(Ot){return ut._settledAt(2,et,Ot)})},Fe}();var oe=function(){function Fe(We){this[se]=function J(){return Y++}(),this._result=this._state=void 0,this._subscribers=[],H!==We&&("function"!=typeof We&&function Z(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof Fe?function he(Fe,We){try{We(function(et){Re(Fe,et)},function(et){Be(Fe,et)})}catch(at){Be(Fe,at)}}(this,We):function W(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return Fe.prototype.catch=function(at){return this.then(null,at)},Fe.prototype.finally=function(at){var ut=this.constructor;return j(at)?this.then(function(Ot){return ut.resolve(at()).then(function(){return Ot})},function(Ot){return ut.resolve(at()).then(function(){throw Ot})}):this.then(at,at)},Fe}();return oe.prototype.then=Te,oe.all=function z(Fe){return new re(this,Fe).promise},oe.race=function te(Fe){var We=this;return L(Fe)?new We(function(at,et){for(var ut=Fe.length,Ot=0;Ot<ut;Ot++)We.resolve(Fe[Ot]).then(at,et)}):new We(function(at,et){return et(new TypeError("You must pass an array to race."))})},oe.resolve=q,oe.reject=function X(Fe){var at=new this(H);return Be(at,Fe),at},oe._setScheduler=function v(Fe){c=Fe},oe._setAsap=function T(Fe){g=Fe},oe._asap=g,oe.polyfill=function be(){var Fe=void 0;if(void 0!==S)Fe=S;else if("undefined"!=typeof self)Fe=self;else try{Fe=Function("return this")()}catch(et){throw new Error("polyfill failed because global object is unavailable in this environment")}var We=Fe.Promise;if(We){var at=null;try{at=Object.prototype.toString.call(We.resolve())}catch(et){}if("[object Promise]"===at&&!We.cast)return}Fe.Promise=oe},oe.Promise=oe,oe},Ve.exports=j()}).call(this,r("./node_modules/process/browser.js"),r("./node_modules/webpack/buildin/global.js"))},"./node_modules/events/events.js":function(Ve,O,r){"use strict";var R,e="object"==typeof Reflect?Reflect:null,S=e&&"function"==typeof e.apply?e.apply:function(I,G,ee){return Function.prototype.apply.call(I,G,ee)};R=e&&"function"==typeof e.ownKeys?e.ownKeys:Object.getOwnPropertySymbols?function(I){return Object.getOwnPropertyNames(I).concat(Object.getOwnPropertySymbols(I))}:function(I){return Object.getOwnPropertyNames(I)};var U=Number.isNaN||function(I){return I!=I};function L(){L.init.call(this)}Ve.exports=L,Ve.exports.once=function _(A,I){return new Promise(function(G,ee){function de(Te){A.removeListener(I,ue),ee(Te)}function ue(){"function"==typeof A.removeListener&&A.removeListener("error",de),G([].slice.call(arguments))}y(A,I,ue,{once:!0}),"error"!==I&&function D(A,I,G){"function"==typeof A.on&&y(A,"error",I,G)}(A,de,{once:!0})})},L.EventEmitter=L,L.prototype._events=void 0,L.prototype._eventsCount=0,L.prototype._maxListeners=void 0;var b=10;function f(A){if("function"!=typeof A)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof A)}function c(A){return void 0===A._maxListeners?L.defaultMaxListeners:A._maxListeners}function g(A,I,G,ee){var de,ue,Te;if(f(G),void 0===(ue=A._events)?(ue=A._events=Object.create(null),A._eventsCount=0):(void 0!==ue.newListener&&(A.emit("newListener",I,G.listener?G.listener:G),ue=A._events),Te=ue[I]),void 0===Te)Te=ue[I]=G,++A._eventsCount;else if("function"==typeof Te?Te=ue[I]=ee?[G,Te]:[Te,G]:ee?Te.unshift(G):Te.push(G),(de=c(A))>0&&Te.length>de&&!Te.warned){Te.warned=!0;var q=new Error("Possible EventEmitter memory leak detected. "+Te.length+" "+String(I)+" listeners added. Use emitter.setMaxListeners() to increase limit");q.name="MaxListenersExceededWarning",q.emitter=A,q.type=I,q.count=Te.length,function j(A){console&&console.warn&&console.warn(A)}(q)}return A}function v(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function T(A,I,G){var ee={fired:!1,wrapFn:void 0,target:A,type:I,listener:G},de=v.bind(ee);return de.listener=G,ee.wrapFn=de,de}function k(A,I,G){var ee=A._events;if(void 0===ee)return[];var de=ee[I];return void 0===de?[]:"function"==typeof de?G?[de.listener||de]:[de]:G?function P(A){for(var I=new Array(A.length),G=0;G<I.length;++G)I[G]=A[G].listener||A[G];return I}(de):B(de,de.length)}function N(A){var I=this._events;if(void 0!==I){var G=I[A];if("function"==typeof G)return 1;if(void 0!==G)return G.length}return 0}function B(A,I){for(var G=new Array(I),ee=0;ee<I;++ee)G[ee]=A[ee];return G}function y(A,I,G,ee){if("function"==typeof A.on)ee.once?A.once(I,G):A.on(I,G);else{if("function"!=typeof A.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof A);A.addEventListener(I,function de(ue){ee.once&&A.removeEventListener(I,de),G(ue)})}}Object.defineProperty(L,"defaultMaxListeners",{enumerable:!0,get:function(){return b},set:function(A){if("number"!=typeof A||A<0||U(A))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+A+".");b=A}}),L.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},L.prototype.setMaxListeners=function(I){if("number"!=typeof I||I<0||U(I))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+I+".");return this._maxListeners=I,this},L.prototype.getMaxListeners=function(){return c(this)},L.prototype.emit=function(I){for(var G=[],ee=1;ee<arguments.length;ee++)G.push(arguments[ee]);var de="error"===I,ue=this._events;if(void 0!==ue)de=de&&void 0===ue.error;else if(!de)return!1;if(de){var Te;if(G.length>0&&(Te=G[0]),Te instanceof Error)throw Te;var q=new Error("Unhandled error."+(Te?" ("+Te.message+")":""));throw q.context=Te,q}var se=ue[I];if(void 0===se)return!1;if("function"==typeof se)S(se,this,G);else{var H=se.length,ce=B(se,H);for(ee=0;ee<H;++ee)S(ce[ee],this,G)}return!0},L.prototype.on=L.prototype.addListener=function(I,G){return g(this,I,G,!1)},L.prototype.prependListener=function(I,G){return g(this,I,G,!0)},L.prototype.once=function(I,G){return f(G),this.on(I,T(this,I,G)),this},L.prototype.prependOnceListener=function(I,G){return f(G),this.prependListener(I,T(this,I,G)),this},L.prototype.off=L.prototype.removeListener=function(I,G){var ee,de,ue,Te,q;if(f(G),void 0===(de=this._events))return this;if(void 0===(ee=de[I]))return this;if(ee===G||ee.listener===G)0==--this._eventsCount?this._events=Object.create(null):(delete de[I],de.removeListener&&this.emit("removeListener",I,ee.listener||G));else if("function"!=typeof ee){for(ue=-1,Te=ee.length-1;Te>=0;Te--)if(ee[Te]===G||ee[Te].listener===G){q=ee[Te].listener,ue=Te;break}if(ue<0)return this;0===ue?ee.shift():function x(A,I){for(;I+1<A.length;I++)A[I]=A[I+1];A.pop()}(ee,ue),1===ee.length&&(de[I]=ee[0]),void 0!==de.removeListener&&this.emit("removeListener",I,q||G)}return this},L.prototype.removeAllListeners=function(I){var G,ee,de;if(void 0===(ee=this._events))return this;if(void 0===ee.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==ee[I]&&(0==--this._eventsCount?this._events=Object.create(null):delete ee[I]),this;if(0===arguments.length){var Te,ue=Object.keys(ee);for(de=0;de<ue.length;++de)"removeListener"!==(Te=ue[de])&&this.removeAllListeners(Te);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(G=ee[I]))this.removeListener(I,G);else if(void 0!==G)for(de=G.length-1;de>=0;de--)this.removeListener(I,G[de]);return this},L.prototype.listeners=function(I){return k(this,I,!0)},L.prototype.rawListeners=function(I){return k(this,I,!1)},L.listenerCount=function(A,I){return"function"==typeof A.listenerCount?A.listenerCount(I):N.call(A,I)},L.prototype.listenerCount=N,L.prototype.eventNames=function(){return this._eventsCount>0?R(this._events):[]}},"./node_modules/fast-deep-equal/index.js":function(Ve,O,r){"use strict";var e=Array.isArray,S=Object.keys,R=Object.prototype.hasOwnProperty;Ve.exports=function j(U,L){if(U===L)return!0;if(U&&L&&"object"==typeof U&&"object"==typeof L){var c,g,v,b=e(U),f=e(L);if(b&&f){if((g=U.length)!=L.length)return!1;for(c=g;0!=c--;)if(!j(U[c],L[c]))return!1;return!0}if(b!=f)return!1;var T=U instanceof Date,k=L instanceof Date;if(T!=k)return!1;if(T&&k)return U.getTime()==L.getTime();var N=U instanceof RegExp,B=L instanceof RegExp;if(N!=B)return!1;if(N&&B)return U.toString()==L.toString();var x=S(U);if((g=x.length)!==S(L).length)return!1;for(c=g;0!=c--;)if(!R.call(L,x[c]))return!1;for(c=g;0!=c--;)if(!j(U[v=x[c]],L[v]))return!1;return!0}return U!=U&&L!=L}},"./node_modules/ieee754/index.js":function(Ve,O){O.read=function(r,e,S,R,j){var U,L,b=8*j-R-1,f=(1<<b)-1,c=f>>1,g=-7,v=S?j-1:0,T=S?-1:1,k=r[e+v];for(v+=T,U=k&(1<<-g)-1,k>>=-g,g+=b;g>0;U=256*U+r[e+v],v+=T,g-=8);for(L=U&(1<<-g)-1,U>>=-g,g+=R;g>0;L=256*L+r[e+v],v+=T,g-=8);if(0===U)U=1-c;else{if(U===f)return L?NaN:1/0*(k?-1:1);L+=Math.pow(2,R),U-=c}return(k?-1:1)*L*Math.pow(2,U-R)},O.write=function(r,e,S,R,j,U){var L,b,f,c=8*U-j-1,g=(1<<c)-1,v=g>>1,T=23===j?Math.pow(2,-24)-Math.pow(2,-77):0,k=R?0:U-1,N=R?1:-1,B=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(b=isNaN(e)?1:0,L=g):(L=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-L))<1&&(L--,f*=2),(e+=L+v>=1?T/f:T*Math.pow(2,1-v))*f>=2&&(L++,f/=2),L+v>=g?(b=0,L=g):L+v>=1?(b=(e*f-1)*Math.pow(2,j),L+=v):(b=e*Math.pow(2,v-1)*Math.pow(2,j),L=0));j>=8;r[S+k]=255&b,k+=N,b/=256,j-=8);for(L=L<<j|b,c+=j;c>0;r[S+k]=255&L,k+=N,L/=256,c-=8);r[S+k-N]|=128*B}},"./node_modules/imsc/src/main/js/doc.js":function(Ve,O,r){!function(e,S,R,j,U){function L(ae){if("contents"in ae)for(var re=("styleAttrs"in ae?ae.styleAttrs[j.byName.ruby.qname]:null),z="span"===ae.kind&&("container"===re||"textContainer"===re||"baseContainer"===re),te=ae.contents.length-1;te>=0;te--)!z||"styleAttrs"in ae.contents[te]&&j.byName.ruby.qname in ae.contents[te].styleAttrs?L(ae.contents[te]):delete ae.contents[te]}function b(ae,re,z,te){var X=te&&"seq"===te.timeContainer,Z=0;te&&(Z=X&&z?z.end:te.begin),re.begin=re.explicit_begin?re.explicit_begin+Z:Z;var W=re.begin,oe=null;if("sets"in re)for(var be=0;be<re.sets.length;be++)b(ae,re.sets[be],oe,re),W="seq"===re.timeContainer?re.sets[be].end:Math.max(W,re.sets[be].end),oe=re.sets[be];if("contents"in re){if("contents"in re)for(var Fe=0;Fe<re.contents.length;Fe++)b(ae,re.contents[Fe],oe,re),W="seq"===re.timeContainer?re.contents[Fe].end:Math.max(W,re.contents[Fe].end),oe=re.contents[Fe]}else W=X?re.begin:Number.POSITIVE_INFINITY;re.end=null!==re.explicit_end&&null!==re.explicit_dur?Math.min(re.begin+re.explicit_dur,Z+re.explicit_end):null===re.explicit_end&&null!==re.explicit_dur?re.begin+re.explicit_dur:null!==re.explicit_end&&null===re.explicit_dur?Z+re.explicit_end:W,delete re.explicit_begin,delete re.explicit_dur,delete re.explicit_end,ae._registerEvent(re)}function f(ae){this.node=ae}function c(){this.events=[],this.head=new g,this.body=null}function g(){this.styling=new v,this.layout=new N}function v(){this.styles={},this.initials={}}function T(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function k(){this.styleAttrs=null}function N(){this.regions={}}function B(ae,re){x.call(this,"image"),this.src=ae,this.type=re}function x(ae){this.kind=ae}function P(ae){this.id=ae}function _(ae){this.regionID=ae}function D(ae){this.styleAttrs=ae}function y(ae){this.sets=ae}function A(ae){this.contents=ae}function I(ae,re,z){this.explicit_begin=ae,this.explicit_end=re,this.explicit_dur=z}function G(){x.call(this,"body")}function ee(){x.call(this,"div")}function de(){x.call(this,"p")}function ue(){x.call(this,"span")}function Te(){x.call(this,"span")}function q(){x.call(this,"br")}function se(){}function H(){}function ce(ae){return ae&&"xml:id"in ae.attributes&&ae.attributes["xml:id"].value||null}function me(ae){return ae&&"style"in ae.attributes?ae.attributes.style.value.split(" "):[]}function xe(ae,re){var z={};if(null!==ae)for(var te in ae.attributes){var X=ae.attributes[te].uri+" "+ae.attributes[te].local,Z=j.byQName[X];if(void 0!==Z){var W=Z.parse(ae.attributes[te].value);null!==W?(z[X]=W,Z===j.byName.zIndex&&he(re,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):Y(re,"Cannot parse styling attribute "+X+" --\x3e "+ae.attributes[te].value)}}return z}function ve(ae,re,z){for(var te in ae.attributes)if(ae.attributes[te].uri===re&&ae.attributes[te].local===z)return ae.attributes[te].value;return null}function Pe(ae,re,z){var at,et=null;return null!==(at=/^(\d+(?:\.\d+)?)f$/.exec(z))?null!==re&&(et=parseFloat(at[1])/re):null!==(at=/^(\d+(?:\.\d+)?)t$/.exec(z))?null!==ae&&(et=parseFloat(at[1])/ae):null!==(at=/^(\d+(?:\.\d+)?)ms$/.exec(z))?et=parseFloat(at[1])/1e3:null!==(at=/^(\d+(?:\.\d+)?)s$/.exec(z))?et=parseFloat(at[1]):null!==(at=/^(\d+(?:\.\d+)?)h$/.exec(z))?et=3600*parseFloat(at[1]):null!==(at=/^(\d+(?:\.\d+)?)m$/.exec(z))?et=60*parseFloat(at[1]):null!==(at=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(z))?et=3600*parseInt(at[1])+60*parseInt(at[2])+parseFloat(at[3]):null!==(at=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(z))&&null!==re&&(et=3600*parseInt(at[1])+60*parseInt(at[2])+parseInt(at[3])+(null===at[4]?0:parseInt(at[4])/re)),et}function Be(ae,re,z){for(;re.styleRefs.length>0;){var te=re.styleRefs.pop();te in ae.styles?(Be(ae,ae.styles[te],z),He(ae.styles[te].styleAttrs,re.styleAttrs)):Y(z,"Non-existant style id referenced")}}function qe(ae,re,z,te){for(var X=re.length-1;X>=0;X--){var Z=re[X];Z in ae.styles?He(ae.styles[Z].styleAttrs,z):Y(te,"Non-existant style id referenced")}}function He(ae,re){for(var z in ae)!ae.hasOwnProperty(z)||z in re||(re[z]=ae[z])}function he(ae,re){if(ae&&ae.warn&&ae.warn(re))throw re}function Y(ae,re){if(ae&&ae.error&&ae.error(re))throw re}function J(ae,re){throw ae&&ae.fatal&&ae.fatal(re),re}function Me(ae,re){for(var X,z=0,te=ae.length-1;z<=te;){var Z=ae[X=Math.floor((z+te)/2)];if(Z<re)z=X+1;else{if(!(Z>re))return{found:!0,index:X};te=X-1}}return{found:!1,index:z}}e.fromXML=function(ae,re,z){var te=S.parser(!0,{xmlns:!0}),X=[],Z=[],W=[],oe=0,be=null;te.onclosetag=function(ut){if(X[0]instanceof se)null!==be.head&&null!==be.head.styling&&qe(be.head.styling,X[0].styleRefs,X[0].styleAttrs,re),delete X[0].styleRefs;else if(X[0]instanceof v)for(var Ot in X[0].styles)!X[0].styles.hasOwnProperty(Ot)||Be(X[0],X[0].styles[Ot],re);else if(X[0]instanceof de||X[0]instanceof ue){if(X[0].contents.length>1){var Et,tt=[X[0].contents[0]];for(Et=1;Et<X[0].contents.length;Et++)X[0].contents[Et]instanceof Te&&tt[tt.length-1]instanceof Te?tt[tt.length-1].text+=X[0].contents[Et].text:tt.push(X[0].contents[Et]);X[0].contents=tt}X[0]instanceof ue&&1===X[0].contents.length&&X[0].contents[0]instanceof Te&&(X[0].text=X[0].contents[0].text,delete X[0].contents)}else X[0]instanceof f&&(X[0].node.uri===R.ns_tt&&"metadata"===X[0].node.local?oe--:oe>0&&z&&"onCloseTag"in z&&z.onCloseTag());W.shift(),Z.shift(),X.shift()},te.ontext=function(ut){if(void 0!==X[0])if(X[0]instanceof ue||X[0]instanceof de){if(X[0]instanceof ue){var Ot=X[0].styleAttrs[j.byName.ruby.qname];if("container"===Ot||"textContainer"===Ot||"baseContainer"===Ot)return}var tt=new Te;tt.initFromText(be,X[0],ut,Z[0],W[0],re),X[0].contents.push(tt)}else X[0]instanceof f&&oe>0&&z&&"onText"in z&&z.onText(ut)},te.onopentag=function(ut){var Ot=ut.attributes["xml:space"];W.unshift(Ot?Ot.value:0===W.length?"default":W[0]);var tt=ut.attributes["xml:lang"];if(Z.unshift(tt?tt.value:0===Z.length?"":Z[0]),ut.uri===R.ns_tt)if("tt"===ut.local)null!==be&&J(re,"Two <tt> elements at ("+this.line+","+this.column+")"),(be=new c).initFromNode(ut,Z[0],re),X.unshift(be);else if("head"===ut.local)X[0]instanceof c||J(re,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),X.unshift(be.head);else if("styling"===ut.local)X[0]instanceof g||J(re,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),X.unshift(be.head.styling);else if("style"===ut.local){var Et;X[0]instanceof v?((Et=new T).initFromNode(ut,re),Et.id?be.head.styling.styles[Et.id]=Et:Y(re,"<style> element missing @id attribute"),X.unshift(Et)):X[0]instanceof se?((Et=new T).initFromNode(ut,re),He(Et.styleAttrs,X[0].styleAttrs),X.unshift(Et)):J(re,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if("initial"===ut.local){var Yt;if(X[0]instanceof v){for(var vt in(Yt=new k).initFromNode(ut,re),Yt.styleAttrs)!Yt.styleAttrs.hasOwnProperty(vt)||(be.head.styling.initials[vt]=Yt.styleAttrs[vt]);X.unshift(Yt)}else J(re,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")")}else if("layout"===ut.local)X[0]instanceof g||J(re,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),X.unshift(be.head.layout);else if("region"===ut.local){X[0]instanceof N||J(re,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var At=new se;At.initFromNode(be,ut,Z[0],re),!At.id||At.id in be.head.layout.regions?Y(re,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):be.head.layout.regions[At.id]=At,X.unshift(At)}else if("body"===ut.local){X[0]instanceof c||J(re,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==be.body&&J(re,"Second <body> element at "+this.line+","+this.column+")");var Dt=new G;Dt.initFromNode(be,ut,Z[0],re),be.body=Dt,X.unshift(Dt)}else if("div"===ut.local){X[0]instanceof ee||X[0]instanceof G||J(re,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var $t=new ee;$t.initFromNode(be,X[0],ut,Z[0],re);var Kt=$t.styleAttrs[j.byName.backgroundImage.qname];Kt&&($t.contents.push(new B(Kt)),delete $t.styleAttrs[j.byName.backgroundImage.qname]),X[0].contents.push($t),X.unshift($t)}else if("image"===ut.local){X[0]instanceof ee||J(re,"Parent of <image> element is not <div> at "+this.line+","+this.column+")");var Xt=new B;Xt.initFromNode(be,X[0],ut,Z[0],re),X[0].contents.push(Xt),X.unshift(Xt)}else if("p"===ut.local){X[0]instanceof ee||J(re,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var ln=new de;ln.initFromNode(be,X[0],ut,Z[0],re),X[0].contents.push(ln),X.unshift(ln)}else if("span"===ut.local){X[0]instanceof ue||X[0]instanceof de||J(re,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var Bn=new ue;Bn.initFromNode(be,X[0],ut,Z[0],W[0],re),X[0].contents.push(Bn),X.unshift(Bn)}else if("br"===ut.local){X[0]instanceof ue||X[0]instanceof de||J(re,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var Rn=new q;Rn.initFromNode(be,X[0],ut,Z[0],re),X[0].contents.push(Rn),X.unshift(Rn)}else if("set"===ut.local){X[0]instanceof ue||X[0]instanceof de||X[0]instanceof ee||X[0]instanceof G||X[0]instanceof se||X[0]instanceof q||J(re,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var jn=new H;jn.initFromNode(be,X[0],ut,re),X[0].sets.push(jn),X.unshift(jn)}else X.unshift(new f(ut));else X.unshift(new f(ut));if(X[0]instanceof f)if(ut.uri===R.ns_tt&&"metadata"===ut.local)oe++;else if(oe>0&&z&&"onOpenTag"in z){var Vn=[];for(var ot in ut.attributes)Vn[ut.attributes[ot].uri+" "+ut.attributes[ot].local]={uri:ut.attributes[ot].uri,local:ut.attributes[ot].local,value:ut.attributes[ot].value};z.onOpenTag(ut.uri,ut.local,Vn)}},te.write(ae).close(),delete be.head.styling.styles;var Fe=!1;for(var We in be.head.layout.regions)if(be.head.layout.regions.hasOwnProperty(We)){Fe=!0;break}if(!Fe){var at=se.prototype.createDefaultRegion(be.lang);be.head.layout.regions[at.id]=at}for(var et in be.head.layout.regions)!be.head.layout.regions.hasOwnProperty(et)||b(be,be.head.layout.regions[et],null,null);return be.body&&b(be,be.body,null,null),be.body&&L(be.body),be},c.prototype.initFromNode=function(ae,re,z){var te=function Ee(ae,re){var z=ve(ae,R.ns_ttp,"cellResolution"),te=15,X=32;if(null!==z){var W=/(\d+) (\d+)/.exec(z);null!==W?(X=parseInt(W[1]),te=parseInt(W[2])):he(re,"Malformed cellResolution value (using initial value instead)")}return{w:X,h:te}}(ae,z);this.cellLength={h:new U.ComputedLength(0,1/te.h),w:new U.ComputedLength(1/te.w,0)};var X=function Ie(ae,re){var X,z=ve(ae,R.ns_ttp,"frameRate"),te=30;null!==z&&(null!==(X=/(\d+)/.exec(z))?te=parseInt(X[1]):he(re,"Malformed frame rate attribute (using initial value instead)"));var W=ve(ae,R.ns_ttp,"frameRateMultiplier"),oe=1;null!==W&&(null!==(X=/(\d+) (\d+)/.exec(W))?oe=parseInt(X[1])/parseInt(X[2]):he(re,"Malformed frame rate multiplier attribute (using initial value instead)"));var Fe=oe*te,We=1,at=ve(ae,R.ns_ttp,"tickRate");return null===at?null!==z&&(We=Fe):null!==(X=/(\d+)/.exec(at))?We=parseInt(X[1]):he(re,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:Fe,tickRate:We}}(ae,z);this.effectiveFrameRate=X.effectiveFrameRate,this.tickRate=X.tickRate,this.aspectRatio=function Oe(ae,re){var z=ve(ae,R.ns_ittp,"aspectRatio");null===z&&(z=ve(ae,R.ns_ttp,"displayAspectRatio"));var te=null;if(null!==z){var Z=/(\d+)\s+(\d+)/.exec(z);if(null!==Z){var W=parseInt(Z[1]),oe=parseInt(Z[2]);0!==W&&0!==oe?te=W/oe:Y(re,"Illegal aspectRatio values (ignoring)")}else Y(re,"Malformed aspectRatio attribute (ignoring)")}return te}(ae,z);var Z=ve(ae,R.ns_ttp,"timeBase");null!==Z&&"media"!==Z&&J(z,"Unsupported time base");var W=function Re(ae,re){var z=ve(ae,R.ns_tts,"extent");if(null===z)return null;var te=z.split(" ");if(2!==te.length)return he(re,"Malformed extent (ignoring)"),null;var X=U.parseLength(te[0]),Z=U.parseLength(te[1]);return Z&&X?{h:Z,w:X}:(he(re,"Malformed extent values (ignoring)"),null)}(ae,z);null===W?this.pxLength={h:null,w:null}:(("px"!==W.h.unit||"px"!==W.w.unit)&&J(z,"Extent on TT must be in px or absent"),this.pxLength={h:new U.ComputedLength(0,1/W.h.value),w:new U.ComputedLength(1/W.w.value,0)}),this.dimensions={h:new U.ComputedLength(0,1),w:new U.ComputedLength(1,0)},this.lang=re},c.prototype._registerEvent=function(ae){if(!(ae.end<=ae.begin)){var re=Me(this.events,ae.begin);if(re.found||this.events.splice(re.index,0,ae.begin),ae.end!==Number.POSITIVE_INFINITY){var z=Me(this.events,ae.end);z.found||this.events.splice(z.index,0,ae.end)}}},c.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},c.prototype.getMediaTimeEvents=function(){return this.events},T.prototype.initFromNode=function(ae,re){this.id=ce(ae),this.styleAttrs=xe(ae,re),this.styleRefs=me(ae)},k.prototype.initFromNode=function(ae,re){for(var z in this.styleAttrs={},ae.attributes)ae.attributes[z].uri!==R.ns_itts&&ae.attributes[z].uri!==R.ns_ebutts&&ae.attributes[z].uri!==R.ns_tts||(this.styleAttrs[ae.attributes[z].uri+" "+ae.attributes[z].local]=ae.attributes[z].value)},B.prototype.initFromNode=function(ae,re,z,te,X){this.src="src"in z.attributes?z.attributes.src.value:null,this.src||Y(X,"Invalid image@src attribute"),this.type="type"in z.attributes?z.attributes.type.value:null,this.type||Y(X,"Invalid image@type attribute"),D.prototype.initFromNode.call(this,ae,re,z,X),I.prototype.initFromNode.call(this,ae,re,z,X),y.prototype.initFromNode.call(this,ae,re,z,X),_.prototype.initFromNode.call(this,ae,re,z,X),this.lang=te},P.prototype.initFromNode=function(ae,re,z,te){this.id=ce(z)},_.prototype.initFromNode=function(ae,re,z,te){this.regionID=function ne(ae){return ae&&"region"in ae.attributes?ae.attributes.region.value:""}(z)},D.prototype.initFromNode=function(ae,re,z,te){this.styleAttrs=xe(z,te),null!==ae.head&&null!==ae.head.styling&&qe(ae.head.styling,me(z),this.styleAttrs,te)},y.prototype.initFromNode=function(ae,re,z,te){this.sets=[]},A.prototype.initFromNode=function(ae,re,z,te){this.contents=[]},I.prototype.initFromNode=function(ae,re,z,te){var X=function ke(ae,re,z,te){var X=null;z&&"begin"in z.attributes&&null===(X=Pe(ae.tickRate,ae.effectiveFrameRate,z.attributes.begin.value))&&he(te,"Malformed begin value "+z.attributes.begin.value+" (using 0)");var Z=null;z&&"dur"in z.attributes&&null===(Z=Pe(ae.tickRate,ae.effectiveFrameRate,z.attributes.dur.value))&&he(te,"Malformed dur value "+z.attributes.dur.value+" (ignoring)");var W=null;return z&&"end"in z.attributes&&null===(W=Pe(ae.tickRate,ae.effectiveFrameRate,z.attributes.end.value))&&he(te,"Malformed end value (ignoring)"),{explicit_begin:X,explicit_end:W,explicit_dur:Z}}(ae,0,z,te);this.explicit_begin=X.explicit_begin,this.explicit_end=X.explicit_end,this.explicit_dur=X.explicit_dur,this.timeContainer=function pe(ae,re){var z=ae&&"timeContainer"in ae.attributes?ae.attributes.timeContainer.value:null;return z&&"par"!==z?"seq"===z?"seq":(Y(re,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}(z,te)},G.prototype.initFromNode=function(ae,re,z,te){D.prototype.initFromNode.call(this,ae,null,re,te),I.prototype.initFromNode.call(this,ae,null,re,te),y.prototype.initFromNode.call(this,ae,null,re,te),_.prototype.initFromNode.call(this,ae,null,re,te),A.prototype.initFromNode.call(this,ae,null,re,te),this.lang=z},ee.prototype.initFromNode=function(ae,re,z,te,X){D.prototype.initFromNode.call(this,ae,re,z,X),I.prototype.initFromNode.call(this,ae,re,z,X),y.prototype.initFromNode.call(this,ae,re,z,X),_.prototype.initFromNode.call(this,ae,re,z,X),A.prototype.initFromNode.call(this,ae,re,z,X),this.lang=te},de.prototype.initFromNode=function(ae,re,z,te,X){D.prototype.initFromNode.call(this,ae,re,z,X),I.prototype.initFromNode.call(this,ae,re,z,X),y.prototype.initFromNode.call(this,ae,re,z,X),_.prototype.initFromNode.call(this,ae,re,z,X),A.prototype.initFromNode.call(this,ae,re,z,X),this.lang=te},ue.prototype.initFromNode=function(ae,re,z,te,X,Z){D.prototype.initFromNode.call(this,ae,re,z,Z),I.prototype.initFromNode.call(this,ae,re,z,Z),y.prototype.initFromNode.call(this,ae,re,z,Z),_.prototype.initFromNode.call(this,ae,re,z,Z),A.prototype.initFromNode.call(this,ae,re,z,Z),this.space=X,this.lang=te},Te.prototype.initFromText=function(ae,re,z,te,X,Z){I.prototype.initFromNode.call(this,ae,re,null,Z),this.text=z,this.space=X,this.lang=te},q.prototype.initFromNode=function(ae,re,z,te,X){_.prototype.initFromNode.call(this,ae,re,z,X),I.prototype.initFromNode.call(this,ae,re,z,X),this.lang=te},se.prototype.createDefaultRegion=function(ae){var re=new se;return P.call(re,""),D.call(re,{}),y.call(re,[]),I.call(re,0,Number.POSITIVE_INFINITY,null),this.lang=ae,re},se.prototype.initFromNode=function(ae,re,z,te){P.prototype.initFromNode.call(this,ae,null,re,te),I.prototype.initFromNode.call(this,ae,null,re,te),y.prototype.initFromNode.call(this,ae,null,re,te),this.styleAttrs=xe(re,te),this.styleRefs=me(re),this.lang=z},H.prototype.initFromNode=function(ae,re,z,te){I.prototype.initFromNode.call(this,ae,re,z,te);var X=xe(z,te);for(var Z in this.qname=null,this.value=null,X)if(X.hasOwnProperty(Z)){if(this.qname){Y(te,"More than one style specified on set");break}this.qname=Z,this.value=X[Z]}}}(O,"undefined"==typeof sax?r("./node_modules/sax/lib/sax.js"):sax,"undefined"==typeof imscNames?r("./node_modules/imsc/src/main/js/names.js"):imscNames,"undefined"==typeof imscStyles?r("./node_modules/imsc/src/main/js/styles.js"):imscStyles,"undefined"==typeof imscUtils?r("./node_modules/imsc/src/main/js/utils.js"):imscUtils)},"./node_modules/imsc/src/main/js/html.js":function(Ve,O,r){!function(e,S,R){function j(q,se,H,ce){var ne;if("region"===H.kind)(ne=document.createElement("div")).style.position="absolute";else if("body"===H.kind)ne=document.createElement("div");else if("div"===H.kind)ne=document.createElement("div");else if("image"===H.kind){if(ne=document.createElement("img"),null!==q.imgResolver&&null!==H.src){var pe=q.imgResolver(H.src,ne);pe&&(ne.src=pe),ne.height=q.regionH,ne.width=q.regionW}}else if("p"===H.kind)ne=document.createElement("p");else if("span"===H.kind)if("container"===H.styleAttrs[R.byName.ruby.qname])ne=document.createElement("ruby"),q.ruby=!0;else if("base"===H.styleAttrs[R.byName.ruby.qname])ne=document.createElement("rb");else if("text"===H.styleAttrs[R.byName.ruby.qname])ne=document.createElement("rt");else if("baseContainer"===H.styleAttrs[R.byName.ruby.qname])ne=document.createElement("rbc");else if("textContainer"===H.styleAttrs[R.byName.ruby.qname])ne=document.createElement("rtc");else{if("delimiter"===H.styleAttrs[R.byName.ruby.qname])return;ne=document.createElement("span")}else"br"===H.kind&&(ne=document.createElement("br"));if(ne){if(H.lang&&("region"===H.kind||H.lang!==ce.lang)&&(ne.lang=H.lang),se.appendChild(ne),ne.style.margin="0","region"===H.kind){var me=H.styleAttrs[R.byName.writingMode.qname];"lrtb"===me||"lr"===me?(q.ipd="lr",q.bpd="tb"):"rltb"===me||"rl"===me?(q.ipd="rl",q.bpd="tb"):"tblr"===me?(q.ipd="tb",q.bpd="lr"):("tbrl"===me||"tb"===me)&&(q.ipd="tb",q.bpd="rl")}else"p"===H.kind&&"tb"===q.bpd&&(q.ipd="ltr"===H.styleAttrs[R.byName.direction.qname]?"lr":"rl");for(var ve=0;ve<y.length;ve++){var Oe=y[ve],Ee=H.styleAttrs[Oe.qname];void 0!==Ee&&null!==Oe.map&&Oe.map(q,ne,H,Ee)}var Ie=ne,Re=H.styleAttrs[R.byName.linePadding.qname];if(Re&&!Re.isZero()){var Pe=Re.toUsedLength(q.w,q.h);if(Pe>0){var ke=Math.ceil(Pe)+"px";"tb"===q.bpd?(Ie.style.paddingLeft=ke,Ie.style.paddingRight=ke):(Ie.style.paddingTop=ke,Ie.style.paddingBottom=ke),q.lp=Re}}var Be=H.styleAttrs[R.byName.multiRowAlign.qname];if(Be&&"auto"!==Be){var qe=document.createElement("span");qe.style.display="inline-block",qe.style.textAlign=Be,ne.appendChild(qe),Ie=qe,q.mra=Be}var He=H.styleAttrs[R.byName.rubyReserve.qname];if(He&&"none"!==He[0]&&(q.rubyReserve=He),H.styleAttrs[R.byName.fillLineGap.qname]&&(q.flg=!0),"span"===H.kind&&H.text){var De=H.styleAttrs[R.byName.textEmphasis.qname];if(De&&"none"!==De.style&&(q.textEmphasis=!0),R.byName.textCombine.qname in H.styleAttrs&&"all"===H.styleAttrs[R.byName.textCombine.qname])ne.textContent=H.text,De&&_(q,ne,0,De);else for(var he="",Y=0;Y<H.text.length;Y++){he+=H.text.charAt(Y);var J=H.text.charCodeAt(Y);if(J<55296||J>56319||Y===H.text.length-1){var Me=document.createElement("span");Me.textContent=he,De&&_(q,Me,0,De),ne.appendChild(Me),he="",Me._isd_element=H}}}if("contents"in H)for(var ae=0;ae<H.contents.length;ae++)j(q,Ie,H.contents[ae],H);var re=[];if("p"===H.kind&&(x(q,Ie,re,null),q.rubyReserve&&(function T(q,se){for(var H=0;H<q.length;H++){var ce=document.createElement("ruby"),ne=document.createElement("rb");ne.textContent="\u200b",ce.appendChild(ne);var pe,me,xe=se.rubyReserve[1].toUsedLength(se.w,se.h)+"px";"both"===se.rubyReserve[0]||"outside"===se.rubyReserve[0]&&1==q.length?((pe=document.createElement("rtc")).style[ee]=G?"after":"under",pe.textContent="\u200b",pe.style.fontSize=xe,(me=document.createElement("rtc")).style[ee]=G?"before":"over",me.textContent="\u200b",me.style.fontSize=xe,ce.appendChild(pe),ce.appendChild(me)):((pe=document.createElement("rtc")).textContent="\u200b",pe.style.fontSize=xe,pe.style[ee]="after"===se.rubyReserve[0]||"outside"===se.rubyReserve[0]&&H>0?G?"after":"tb"===se.bpd||"rl"===se.bpd?"under":"over":G?"before":"tb"===se.bpd||"rl"===se.bpd?"over":"under",ce.appendChild(pe));for(var Oe=null,Ee=0;Ee<q[H].rbc.length;Ee++)if("ruby"===q[H].rbc[Ee].localName){Oe=q[H].rbc[Ee];for(var Ie=0;Ie<Oe.style.length;Ie++)ce.style.setProperty(Oe.style.item(Ie),Oe.style.getPropertyValue(Oe.style.item(Ie)));break}(Oe=Oe||q[H].elements[0].node).parentElement.insertBefore(ce,Oe)}}(re,q),q.rubyReserve=null),(q.ruby||q.rubyReserve)&&(function v(q,se){for(var H=0;H<q.length;H++)for(var ce=0;ce<q[H].rbc.length;ce++)q[H].rbc[ce].style[ee]||(q[H].rbc[ce].style[ee]=G?0===H?"before":"after":"tb"===se.bpd||"rl"===se.bpd?0===H?"over":"under":0===H?"under":"over")}(re,q),q.ruby=null),q.textEmphasis&&(function g(q,se){for(var H=0;H<q.length;H++)for(var ce=0;ce<q[H].te.length;ce++)q[H].te[ce].style[ue]&&"none"!==q[H].te[ce].style[ue]||(q[H].te[ce].style[ue]="tb"===se.bpd?0===H?"left over":"left under":"rl"===se.bpd?0===H?"right under":"left under":0===H?"left under":"right under")}(re,q),q.textEmphasis=null),q.mra&&(function c(q){for(var se=0;se<q.length-1;se++){var H=q[se].elements.length;if(0!==H&&!1===q[se].br){var ce=document.createElement("br"),ne=q[se].elements[H-1].node;ne.parentElement.insertBefore(ce,ne.nextSibling)}}}(re),q.mra=null),q.lp&&(function f(q,se,H){if(null!==q)for(var ce=0;ce<q.length;ce++){var ne=q[ce].elements.length,pe=Math.ceil(se)+"px",me="-"+Math.ceil(se)+"px";if(0!==ne){var xe=q[ce].elements[q[ce].start_elem],ve=q[ce].elements[q[ce].end_elem];if(xe===ve&&(elementBoundingRect=xe.node.getBoundingClientRect(),0==elementBoundingRect.width||0==elementBoundingRect.height))continue;"lr"===H.ipd?(xe.node.style.marginLeft=me,xe.node.style.paddingLeft=pe):"rl"===H.ipd?(xe.node.style.paddingRight=pe,xe.node.style.marginRight=me):"tb"===H.ipd&&(xe.node.style.paddingTop=pe,xe.node.style.marginTop=me),"lr"===H.ipd?(ve.node.style.marginRight=me,ve.node.style.paddingRight=pe):"rl"===H.ipd?(ve.node.style.paddingLeft=pe,ve.node.style.marginLeft=me):"tb"===H.ipd&&(ve.node.style.paddingBottom=pe,ve.node.style.marginBottom=me)}}}(re,q.lp.toUsedLength(q.w,q.h),q),q.lp=null),function U(q){for(var se=0;se<q.length;se++)for(var H=q[se],ce=1;ce<H.elements.length;)b(H.elements[ce-1].node,H.elements[ce].node)?H.elements.splice(ce,1):ce++;for(var me,xe,ve=[],Oe=0;Oe<q.length;Oe++)for(var Ee=0;Ee<q[Oe].elements.length;Ee++)(xe=L(me=q[Oe].elements[Ee].node,ve,!1))&&(me.style.backgroundColor=xe);for(var Ie=0;Ie<ve.length;Ie++)ve[Ie].style.backgroundColor=""}(re),q.flg)){var z=B(Ie.getBoundingClientRect(),q);(function k(q,se,H,ce,ne){for(var pe=Math.sign(H-se),me=0;me<=q.length;me++){var xe,ve,Oe,Ee;if(xe=0===me?Math.round(se):me===q.length?Math.round(H):Math.round((q[me-1].after+q[me].before)/2),me>0&&q[me-1])for(Oe=0;Oe<q[me-1].elements.length;Oe++)ve=pe*(xe-(Ee=q[me-1].elements[Oe]).after)+"px","lr"===ce.bpd?Ee.node.style.paddingRight=ve:"rl"===ce.bpd?Ee.node.style.paddingLeft=ve:"tb"===ce.bpd&&(Ee.node.style.paddingBottom=ve);if(me<q.length)for(Oe=0;Oe<q[me].elements.length;Oe++)ve=pe*((Ee=q[me].elements[Oe]).before-xe)+"px","lr"===ce.bpd?Ee.node.style.paddingLeft=ve:"rl"===ce.bpd?Ee.node.style.paddingRight=ve:"tb"===ce.bpd&&(Ee.node.style.paddingTop=ve)}})(re,z.before,z.after,q),q.flg=null}if("region"===H.kind&&"tb"===q.bpd&&q.enableRollUp&&H.contents.length>0&&"after"===H.styleAttrs[R.byName.displayAlign.qname]){x(q,Ie,re,null);var X=new N(""===H.id?"_":H.id,re);if(q.currentISDState[X.id]=X,q.previousISDState&&X.id in q.previousISDState&&q.previousISDState[X.id].plist.length>0&&X.plist.length>1&&X.plist[X.plist.length-2].text===q.previousISDState[X.id].plist[q.previousISDState[X.id].plist.length-1].text){var Z=ne.firstElementChild,W=X.plist[X.plist.length-1].after-X.plist[X.plist.length-1].before;Z.style.bottom="-"+W+"px",Z.style.transition="transform 0.4s",Z.style.position="relative",Z.style.transform="translateY(-"+W+"px)"}}}else!function Te(q,se){if(q&&q.error&&q.error(se))throw se}(q.errorHandler,"Error processing ISD element kind: "+H.kind)}function L(q,se,H){return q.style.backgroundColor?(H&&!se.includes(q)&&se.push(q),q.style.backgroundColor):"SPAN"===q.parentElement.nodeName?L(q.parentElement,se,!0):void 0}function b(q,se){if("SPAN"===q.tagName&&"SPAN"===se.tagName&&q._isd_element===se._isd_element){q.textContent+=se.textContent;for(var H=0;H<se.style.length;H++){var ce=se.style[H];(ce.indexOf("border")>=0||ce.indexOf("padding")>=0||ce.indexOf("margin")>=0)&&(q.style[ce]=se.style[ce])}return se.parentElement.removeChild(se),!0}return!1}function N(q,se){this.id=q,this.plist=se}function B(q,se){var H={before:null,after:null,start:null,end:null};return"tb"===se.bpd?(H.before=q.top,H.after=q.bottom,"lr"===se.ipd?(H.start=q.left,H.end=q.right):(H.start=q.right,H.end=q.left)):"lr"===se.bpd?(H.before=q.left,H.after=q.right,H.start=q.top,H.end=q.bottom):"rl"===se.bpd&&(H.before=q.right,H.after=q.left,H.start=q.top,H.end=q.bottom),H}function x(q,se,H,ce){if("rt"!==se.localName&&"rtc"!==se.localName){var ne=se.style.backgroundColor||ce;if(0===se.childElementCount)if("span"===se.localName||"rb"===se.localName){var me=B(se.getBoundingClientRect(),q);if(0!==H.length&&function P(q,se,H,ce){return se<ce&&q>H||ce<=se&&H>=q}(me.before,me.after,H[H.length-1].before,H[H.length-1].after)){var xe=Math.sign(me.after-me.before),ve=Math.sign(me.end-me.start);xe*(me.before-H[H.length-1].before)<0&&(H[H.length-1].before=me.before),xe*(me.after-H[H.length-1].after)>0&&(H[H.length-1].after=me.after),ve*(me.start-H[H.length-1].start)<0&&(H[H.length-1].start=me.start,H[H.length-1].start_elem=H[H.length-1].elements.length),ve*(me.end-H[H.length-1].end)>0&&(H[H.length-1].end=me.end,H[H.length-1].end_elem=H[H.length-1].elements.length)}else H.push({before:me.before,after:me.after,start:me.start,end:me.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1});H[H.length-1].text+=se.textContent,H[H.length-1].elements.push({node:se,bgcolor:ne,before:me.before,after:me.after})}else"br"===se.localName&&0!==H.length&&(H[H.length-1].br=!0);else for(var Oe=se.firstChild;Oe;)Oe.nodeType===Node.ELEMENT_NODE&&(x(q,Oe,H,ne),"ruby"===Oe.localName||"rtc"===Oe.localName?H.length>0&&H[H.length-1].rbc.push(Oe):"span"===Oe.localName&&Oe.style[de]&&"none"!==Oe.style[de]&&H.length>0&&H[H.length-1].te.push(Oe)),Oe=Oe.nextSibling}}function _(q,se,H,ce){"none"!==ce.style&&(se.style[de]="auto"===ce.style?"filled":ce.style+" "+ce.symbol,"before"===ce.position||"after"===ce.position)&&(se.style[ue]="tb"===q.bpd?"before"===ce.position?"left over":"left under":"rl"===q.bpd?"before"===ce.position?"right under":"left under":"before"===ce.position?"left under":"right under")}function D(q,se){this.qname=q,this.map=se}e.render=function(q,se,H,ce,ne,pe,me,xe,ve){var Oe=ce||se.clientHeight,Ee=ne||se.clientWidth;if(null!==q.aspectRatio){var Ie=Oe*q.aspectRatio;Ie>Ee?Oe=Math.round(Ee/q.aspectRatio):Ee=Ie}var Re=document.createElement("div");Re.style.position="relative",Re.style.width=Ee+"px",Re.style.height=Oe+"px",Re.style.margin="auto",Re.style.top=0,Re.style.bottom=0,Re.style.left=0,Re.style.right=0,Re.style.zIndex=0;var Pe={h:Oe,w:Ee,regionH:null,regionW:null,imgResolver:H,displayForcedOnlyMode:pe||!1,isd:q,errorHandler:me,previousISDState:xe,enableRollUp:ve||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null};if(se.appendChild(Re),"contents"in q)for(var ke=0;ke<q.contents.length;ke++)j(Pe,Re,q.contents[ke],q);return Pe.currentISDState};for(var y=[new D("http://www.w3.org/ns/ttml#styling backgroundColor",function(q,se,H,ce){0!==ce[3]&&(se.style.backgroundColor="rgba("+ce[0].toString()+","+ce[1].toString()+","+ce[2].toString()+","+(ce[3]/255).toString()+")")}),new D("http://www.w3.org/ns/ttml#styling color",function(q,se,H,ce){se.style.color="rgba("+ce[0].toString()+","+ce[1].toString()+","+ce[2].toString()+","+(ce[3]/255).toString()+")"}),new D("http://www.w3.org/ns/ttml#styling direction",function(q,se,H,ce){se.style.direction=ce}),new D("http://www.w3.org/ns/ttml#styling display",function(q,se,H,ce){}),new D("http://www.w3.org/ns/ttml#styling displayAlign",function(q,se,H,ce){se.style.display="flex",se.style.flexDirection="column","before"===ce?se.style.justifyContent="flex-start":"center"===ce?se.style.justifyContent="center":"after"===ce&&(se.style.justifyContent="flex-end")}),new D("http://www.w3.org/ns/ttml#styling extent",function(q,se,H,ce){q.regionH=ce.h.toUsedLength(q.w,q.h),q.regionW=ce.w.toUsedLength(q.w,q.h);var ne=0,pe=0,me=H.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];me&&(ne=me[0].toUsedLength(q.w,q.h)+me[2].toUsedLength(q.w,q.h),pe=me[1].toUsedLength(q.w,q.h)+me[3].toUsedLength(q.w,q.h)),se.style.height=q.regionH-ne+"px",se.style.width=q.regionW-pe+"px"}),new D("http://www.w3.org/ns/ttml#styling fontFamily",function(q,se,H,ce){for(var ne=[],pe=0;pe<ce.length;pe++)"monospaceSerif"===ce[pe]?(ne.push("Courier New"),ne.push('"Liberation Mono"'),ne.push("Courier"),ne.push("monospace")):"proportionalSansSerif"===ce[pe]?(ne.push("Arial"),ne.push("Helvetica"),ne.push('"Liberation Sans"'),ne.push("sans-serif")):"monospace"===ce[pe]?ne.push("monospace"):"sansSerif"===ce[pe]?ne.push("sans-serif"):"serif"===ce[pe]?ne.push("serif"):"monospaceSansSerif"===ce[pe]?(ne.push("Consolas"),ne.push("monospace")):ne.push("proportionalSerif"===ce[pe]?"serif":ce[pe]);if(ne.length>0){for(var me=[ne[0]],xe=1;xe<ne.length;xe++)-1==me.indexOf(ne[xe])&&me.push(ne[xe]);ne=me}se.style.fontFamily=ne.join(",")}),new D("http://www.w3.org/ns/ttml#styling shear",function(q,se,H,ce){if(0!==ce){var ne=-.9*ce;se.style.transform="tb"===q.bpd?"skewX("+ne+"deg)":"skewY("+ne+"deg)"}}),new D("http://www.w3.org/ns/ttml#styling fontSize",function(q,se,H,ce){se.style.fontSize=ce.toUsedLength(q.w,q.h)+"px"}),new D("http://www.w3.org/ns/ttml#styling fontStyle",function(q,se,H,ce){se.style.fontStyle=ce}),new D("http://www.w3.org/ns/ttml#styling fontWeight",function(q,se,H,ce){se.style.fontWeight=ce}),new D("http://www.w3.org/ns/ttml#styling lineHeight",function(q,se,H,ce){se.style.lineHeight="normal"===ce?"normal":ce.toUsedLength(q.w,q.h)+"px"}),new D("http://www.w3.org/ns/ttml#styling opacity",function(q,se,H,ce){se.style.opacity=ce}),new D("http://www.w3.org/ns/ttml#styling origin",function(q,se,H,ce){se.style.top=ce.h.toUsedLength(q.w,q.h)+"px",se.style.left=ce.w.toUsedLength(q.w,q.h)+"px"}),new D("http://www.w3.org/ns/ttml#styling overflow",function(q,se,H,ce){se.style.overflow=ce}),new D("http://www.w3.org/ns/ttml#styling padding",function(q,se,H,ce){var ne=[];ne[0]=ce[0].toUsedLength(q.w,q.h)+"px",ne[1]=ce[3].toUsedLength(q.w,q.h)+"px",ne[2]=ce[2].toUsedLength(q.w,q.h)+"px",ne[3]=ce[1].toUsedLength(q.w,q.h)+"px",se.style.padding=ne.join(" ")}),new D("http://www.w3.org/ns/ttml#styling position",function(q,se,H,ce){se.style.top=ce.h.toUsedLength(q.w,q.h)+"px",se.style.left=ce.w.toUsedLength(q.w,q.h)+"px"}),new D("http://www.w3.org/ns/ttml#styling rubyAlign",function(q,se,H,ce){se.style.rubyAlign="spaceAround"===ce?"space-around":"center"}),new D("http://www.w3.org/ns/ttml#styling rubyPosition",function(q,se,H,ce){"before"!==ce&&"after"!==ce||(se.parentElement.style[ee]=G?ce:"tb"===q.bpd||"rl"===q.bpd?"before"===ce?"over":"under":"before"===ce?"under":"over")}),new D("http://www.w3.org/ns/ttml#styling showBackground",null),new D("http://www.w3.org/ns/ttml#styling textAlign",function(q,se,H,ce){se.style.textAlign="start"===ce?"rl"===q.ipd?"right":"left":"end"===ce?"rl"===q.ipd?"left":"right":ce}),new D("http://www.w3.org/ns/ttml#styling textDecoration",function(q,se,H,ce){se.style.textDecoration=ce.join(" ").replace("lineThrough","line-through")}),new D("http://www.w3.org/ns/ttml#styling textOutline",function(q,se,H,ce){}),new D("http://www.w3.org/ns/ttml#styling textShadow",function(q,se,H,ce){var ne=H.styleAttrs[R.byName.textOutline.qname];if("none"===ce&&"none"===ne)se.style.textShadow="";else{var pe=[];if("none"!==ne){var me="rgba("+ne.color[0].toString()+","+ne.color[1].toString()+","+ne.color[2].toString()+","+(ne.color[3]/255).toString()+")";pe.push("1px 1px 1px "+me),pe.push("-1px 1px 1px "+me),pe.push("1px -1px 1px "+me),pe.push("-1px -1px 1px "+me)}if("none"!==ce)for(var xe=0;xe<ce.length;xe++)pe.push(ce[xe].x_off.toUsedLength(q.w,q.h)+"px "+ce[xe].y_off.toUsedLength(q.w,q.h)+"px "+ce[xe].b_radius.toUsedLength(q.w,q.h)+"px rgba("+ce[xe].color[0].toString()+","+ce[xe].color[1].toString()+","+ce[xe].color[2].toString()+","+(ce[xe].color[3]/255).toString()+")");se.style.textShadow=pe.join(",")}}),new D("http://www.w3.org/ns/ttml#styling textCombine",function(q,se,H,ce){se.style.textCombineUpright=ce}),new D("http://www.w3.org/ns/ttml#styling textEmphasis",function(q,se,H,ce){}),new D("http://www.w3.org/ns/ttml#styling unicodeBidi",function(q,se,H,ce){se.style.unicodeBidi="bidiOverride"===ce?"bidi-override":ce}),new D("http://www.w3.org/ns/ttml#styling visibility",function(q,se,H,ce){se.style.visibility=ce}),new D("http://www.w3.org/ns/ttml#styling wrapOption",function(q,se,H,ce){se.style.whiteSpace="wrap"===ce?"preserve"===H.space?"pre-wrap":"normal":"preserve"===H.space?"pre":"noWrap"}),new D("http://www.w3.org/ns/ttml#styling writingMode",function(q,se,H,ce){"lrtb"===ce||"lr"===ce||"rltb"===ce||"rl"===ce?se.style.writingMode="horizontal-tb":"tblr"===ce?se.style.writingMode="vertical-lr":("tbrl"===ce||"tb"===ce)&&(se.style.writingMode="vertical-rl")}),new D("http://www.w3.org/ns/ttml#styling zIndex",function(q,se,H,ce){se.style.zIndex=ce}),new D("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(q,se,H,ce){q.displayForcedOnlyMode&&!1===ce&&(se.style.visibility="hidden")})],A={},I=0;I<y.length;I++)A[y[I].qname]=y[I];var G="webkitRubyPosition"in window.getComputedStyle(document.documentElement),ee=G?"webkitRubyPosition":"rubyPosition",de="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",ue="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition"}(O,"undefined"==typeof imscNames?r("./node_modules/imsc/src/main/js/names.js"):imscNames,"undefined"==typeof imscStyles?r("./node_modules/imsc/src/main/js/styles.js"):imscStyles,"undefined"==typeof imscUtils?r("./node_modules/imsc/src/main/js/utils.js"):imscUtils)},"./node_modules/imsc/src/main/js/isd.js":function(Ve,O,r){!function(e,S,R,j){e.generateISD=function(x,P,_){var A,D=new g(x),y={},I={},G=x.head.styling.initials[R.byName.showBackground.qname],ee=x.head.styling.initials[R.byName.backgroundColor.qname];for(var de in x.head.layout.regions)if(x.head.layout.regions.hasOwnProperty(de)){var ue=x.head.layout.regions[de],Te=ue.styleAttrs[R.byName.showBackground.qname]||G;I[ue.id]=("always"===Te||void 0===Te)&&void 0!==(ue.styleAttrs[R.byName.backgroundColor.qname]||ee)&&!(P<ue.begin||P>=ue.end)}for(var H in x.body&&x.body.regionID&&(I[x.body.regionID]=!0),A=null!==x.body?function se(ne,pe){if(pe.contents){var xe={};for(var ve in pe)pe.hasOwnProperty(ve)&&(xe[ve]=pe[ve]);return xe.contents=[],pe.contents.filter(function me(Oe){return!(ne<Oe.begin||ne>=Oe.end)}).forEach(function(Oe){var Ee=se(ne,Oe);Ee.regionID&&(I[Ee.regionID]=!0),null!==Ee&&xe.contents.push(Ee)}),xe}return pe}(P,x.body):null,void 0!==I[""]&&(I[""]=!0),I)if(I[H]){var ce=L(x,P,x.head.layout.regions[H],A,null,"",x.head.layout.regions[H],_,y);null!==ce&&D.contents.push(ce.element)}return D};var U=[R.byName.color.qname,R.byName.textCombine.qname,R.byName.textDecoration.qname,R.byName.textEmphasis.qname,R.byName.textOutline.qname,R.byName.textShadow.qname];function L(x,P,_,D,y,A,I,G,ee){if(P<I.begin||P>=I.end)return null;var de="regionID"in I&&""!==I.regionID?I.regionID:A;if(null!==y&&de!==_.id&&(!("contents"in I)||"contents"in I&&0===I.contents.length||""!==de))return null;var ue=new v(I);if("sets"in I)for(var Te=0;Te<I.sets.length;Te++)P<I.sets[Te].begin||P>=I.sets[Te].end||(ue.styleAttrs[I.sets[Te].qname]=I.sets[Te].value);var q={};for(var se in ue.styleAttrs)if(ue.styleAttrs.hasOwnProperty(se)&&(q[se]=!0,"region"===ue.kind&&se===R.byName.writingMode.qname&&!(R.byName.direction.qname in ue.styleAttrs))){var H=ue.styleAttrs[se];"lrtb"===H||"lr"===H?ue.styleAttrs[R.byName.direction.qname]="ltr":("rltb"===H||"rl"===H)&&(ue.styleAttrs[R.byName.direction.qname]="rtl")}if(null!==y)for(var ce=0;ce<R.all.length;ce++){var ne=R.all[ce];if(ne.qname===R.byName.textDecoration.qname){var pe=y.styleAttrs[ne.qname],me=ue.styleAttrs[ne.qname],xe=[];void 0===me?xe=pe:-1===me.indexOf("none")?((-1===me.indexOf("noUnderline")&&-1!==pe.indexOf("underline")||-1!==me.indexOf("underline"))&&xe.push("underline"),(-1===me.indexOf("noLineThrough")&&-1!==pe.indexOf("lineThrough")||-1!==me.indexOf("lineThrough"))&&xe.push("lineThrough"),(-1===me.indexOf("noOverline")&&-1!==pe.indexOf("overline")||-1!==me.indexOf("overline"))&&xe.push("overline")):xe.push("none"),ue.styleAttrs[ne.qname]=xe}else if(ne.qname!==R.byName.fontSize.qname||ne.qname in ue.styleAttrs||"span"!==ue.kind||"textContainer"!==ue.styleAttrs[R.byName.ruby.qname])if(ne.qname!==R.byName.fontSize.qname||ne.qname in ue.styleAttrs||"span"!==ue.kind||"text"!==ue.styleAttrs[R.byName.ruby.qname])ne.inherit&&ne.qname in y.styleAttrs&&!(ne.qname in ue.styleAttrs)&&(ue.styleAttrs[ne.qname]=y.styleAttrs[ne.qname]);else{var Oe=y.styleAttrs[R.byName.fontSize.qname];ue.styleAttrs[ne.qname]="textContainer"===y.styleAttrs[R.byName.ruby.qname]?Oe:new j.ComputedLength(.5*Oe.rw,.5*Oe.rh)}else{var ve=y.styleAttrs[R.byName.fontSize.qname];ue.styleAttrs[ne.qname]=new j.ComputedLength(.5*ve.rw,.5*ve.rh)}}for(var Ee=0;Ee<R.all.length;Ee++){var Ie=R.all[Ee];if(!(Ie.qname in ue.styleAttrs||Ie.qname===R.byName.position.qname&&R.byName.origin.qname in ue.styleAttrs||Ie.qname===R.byName.origin.qname&&R.byName.position.qname in ue.styleAttrs)){var Re=x.head.styling.initials[Ie.qname]||Ie.initial;if(null!==Re&&("region"===ue.kind||!1===Ie.inherit&&null!==Re)){var Pe=Ie.parse(Re);null!==Pe?(ue.styleAttrs[Ie.qname]=Pe,q[Ie.qname]=!0):N(G,"Invalid initial value for '"+Ie.qname+"' on element '"+ue.kind)}}}for(var ke=0;ke<R.all.length;ke++){var Be=R.all[ke];if(Be.qname in q&&null!==Be.compute){var qe=Be.compute(x,y,ue,ue.styleAttrs[Be.qname],ee);null!==qe?ue.styleAttrs[Be.qname]=qe:(ue.styleAttrs[Be.qname]=Be.compute(x,y,ue,Be.parse(Be.initial),ee),N(G,"Style '"+Be.qname+"' on element '"+ue.kind+"' cannot be computed"))}}if("none"===ue.styleAttrs[R.byName.display.qname])return null;var He=null;null===y?He=null===D?[]:[D]:"contents"in I&&(He=I.contents);for(var De=0;null!==He&&De<He.length;De++){var he=L(x,P,_,D,ue,de,He[De],G,ee);null!==he&&ue.contents.push(he.element)}for(var Y in ue.styleAttrs)if(ue.styleAttrs.hasOwnProperty(Y)){var J=!1;if("span"===ue.kind){var Me=ue.styleAttrs[R.byName.ruby.qname];(J=("container"===Me||"textContainer"===Me||"baseContainer"===Me)&&-1!==U.indexOf(Y))||(J="container"!==Me&&Y===R.byName.rubyAlign.qname),J||(J=!("textContainer"===Me||"text"===Me)&&Y===R.byName.rubyPosition.qname)}if(!J){var ae=R.byQName[Y];"applies"in ae&&(J=-1===ae.applies.indexOf(ue.kind))}J&&delete ue.styleAttrs[Y]}var re=ue.styleAttrs[R.byName.ruby.qname];if("p"===ue.kind||"span"===ue.kind&&("textContainer"===re||"text"===re)){var z=[];f(ue,z),function b(x){function P(I){return"br"===I.kind||/[\r\n\t ]$/.test(I.text)}function _(I){return"br"===I.kind||"preserve"===I.space&&/^[\r\n]/.test(I.text)}for(var D,y=0;y<x.length;)if("br"!==(D=x[y]).kind&&"preserve"!==D.space){var A=D.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(A)&&(0===y||P(x[y-1]))&&(A=A.substring(1)),D.text=A,0===A.length?x.splice(y,1):y++}else y++;for(y=0;y<x.length;y++)"br"!==(D=x[y]).kind&&"preserve"!==D.space?/[ ]$/.test(D.text)&&(y===x.length-1||_(x[y+1]))&&(D.text=D.text.slice(0,-1)):y++}(z),c(ue)}return"div"===ue.kind&&R.byName.backgroundImage.qname in ue.styleAttrs||"br"===ue.kind||"image"===ue.kind||"contents"in ue&&ue.contents.length>0||"span"===ue.kind&&null!==ue.text||"region"===ue.kind&&"always"===ue.styleAttrs[R.byName.showBackground.qname]?{region_id:de,element:ue}:null}function f(x,P){if("contents"in x)for(var _=0;_<x.contents.length;_++){var D=x.contents[_],y=D.styleAttrs[R.byName.ruby.qname];"span"===D.kind&&("textContainer"===y||"text"===y)||("contents"in D?f(D,P):("span"===D.kind&&0!==D.text.length||"br"===D.kind)&&P.push(D))}}function c(x){if("br"===x.kind)return!1;if("text"in x)return 0===x.text.length;if("contents"in x){for(var P=x.contents.length;P--;)c(x.contents[P])&&x.contents.splice(P,1);return 0===x.contents.length}}function g(x){this.contents=[],this.aspectRatio=x.aspectRatio,this.lang=x.lang}function v(x){for(var P in this.kind=x.kind||"region",this.lang=x.lang,x.id&&(this.id=x.id),this.styleAttrs={},x.styleAttrs)!x.styleAttrs.hasOwnProperty(P)||(this.styleAttrs[P]=x.styleAttrs[P]);"src"in x&&(this.src=x.src),"type"in x&&(this.type=x.type),"text"in x?this.text=x.text:("region"===this.kind||"contents"in x)&&(this.contents=[]),"space"in x&&(this.space=x.space)}function N(x,P){if(x&&x.error&&x.error(P))throw P}}(O,"undefined"==typeof imscNames?r("./node_modules/imsc/src/main/js/names.js"):imscNames,"undefined"==typeof imscStyles?r("./node_modules/imsc/src/main/js/styles.js"):imscStyles,"undefined"==typeof imscUtils?r("./node_modules/imsc/src/main/js/utils.js"):imscUtils)},"./node_modules/imsc/src/main/js/main.js":function(Ve,O,r){O.generateISD=r("./node_modules/imsc/src/main/js/isd.js").generateISD,O.fromXML=r("./node_modules/imsc/src/main/js/doc.js").fromXML,O.renderHTML=r("./node_modules/imsc/src/main/js/html.js").render},"./node_modules/imsc/src/main/js/names.js":function(Ve,O,r){var e;(e=O).ns_tt="http://www.w3.org/ns/ttml",e.ns_tts="http://www.w3.org/ns/ttml#styling",e.ns_ttp="http://www.w3.org/ns/ttml#parameter",e.ns_xml="http://www.w3.org/XML/1998/namespace",e.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",e.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",e.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",e.ns_ebutts="urn:ebu:tt:style"},"./node_modules/imsc/src/main/js/styles.js":function(Ve,O,r){!function(e,S,R){function j(b,f,c,g,v,T,k,N){this.name=f,this.ns=b,this.qname=b+" "+f,this.inherit=v,this.animatable=T,this.initial=c,this.applies=g,this.parse=k,this.compute=N}for(var U in e.all=[new j(S.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,R.parseColor,null),new j(S.ns_tts,"color","white",["span"],!0,!0,R.parseColor,null),new j(S.ns_tts,"direction","ltr",["p","span"],!0,!0,function(b){return b},null),new j(S.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(b){return b},null),new j(S.ns_tts,"displayAlign","before",["region"],!1,!0,function(b){return b},null),new j(S.ns_tts,"extent","auto",["tt","region"],!1,!0,function(b){if("auto"===b)return b;var f=b.split(" ");if(2!==f.length)return null;var c=R.parseLength(f[0]),g=R.parseLength(f[1]);return g&&c?{h:g,w:c}:null},function(b,f,c,g,v){var T,k;if("auto"===g)T=new R.ComputedLength(0,1);else if(null===(T=R.toComputedLength(g.h.value,g.h.unit,null,b.dimensions.h,null,b.pxLength.h)))return null;if("auto"===g)k=new R.ComputedLength(1,0);else if(null===(k=R.toComputedLength(g.w.value,g.w.unit,null,b.dimensions.w,null,b.pxLength.w)))return null;return{h:T,w:k}}),new j(S.ns_tts,"fontFamily","default",["span","p"],!0,!0,function(b){for(var f=b.split(","),c=[],g=0;g<f.length;g++)"'"!==f[g].charAt(0)&&'"'!==f[g].charAt(0)&&"default"===f[g]?c.push("monospaceSerif"):c.push(f[g]);return c},null),new j(S.ns_tts,"shear","0%",["p"],!0,!0,R.parseLength,function(b,f,c,g){return"%"!==g.unit?null:Math.abs(g.value)>100?100*Math.sign(g.value):g.value}),new j(S.ns_tts,"fontSize","1c",["span","p"],!0,!0,R.parseLength,function(b,f,c,g,v){return R.toComputedLength(g.value,g.unit,null!==f?f.styleAttrs[e.byName.fontSize.qname]:b.cellLength.h,null!==f?f.styleAttrs[e.byName.fontSize.qname]:b.cellLength.h,b.cellLength.h,b.pxLength.h)}),new j(S.ns_tts,"fontStyle","normal",["span","p"],!0,!0,function(b){return b},null),new j(S.ns_tts,"fontWeight","normal",["span","p"],!0,!0,function(b){return b},null),new j(S.ns_tts,"lineHeight","normal",["p"],!0,!0,function(b){return"normal"===b?b:R.parseLength(b)},function(b,f,c,g,v){var T;if("normal"===g)T=g;else if(null===(T=R.toComputedLength(g.value,g.unit,c.styleAttrs[e.byName.fontSize.qname],c.styleAttrs[e.byName.fontSize.qname],b.cellLength.h,b.pxLength.h)))return null;return T}),new j(S.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new j(S.ns_tts,"origin","auto",["region"],!1,!0,function(b){if("auto"===b)return b;var f=b.split(" ");if(2!==f.length)return null;var c=R.parseLength(f[0]),g=R.parseLength(f[1]);return g&&c?{h:g,w:c}:null},function(b,f,c,g,v){var T,k;if("auto"===g)T=new R.ComputedLength(0,0);else if(null===(T=R.toComputedLength(g.h.value,g.h.unit,null,b.dimensions.h,null,b.pxLength.h)))return null;if("auto"===g)k=new R.ComputedLength(0,0);else if(null===(k=R.toComputedLength(g.w.value,g.w.unit,null,b.dimensions.w,null,b.pxLength.w)))return null;return{h:T,w:k}}),new j(S.ns_tts,"overflow","hidden",["region"],!1,!0,function(b){return b},null),new j(S.ns_tts,"padding","0px",["region"],!1,!0,function(b){var f=b.split(" ");if(f.length>4)return null;for(var c=[],g=0;g<f.length;g++){var v=R.parseLength(f[g]);if(!v)return null;c.push(v)}return c},function(b,f,c,g,v){var T;if(1===g.length)T=[g[0],g[0],g[0],g[0]];else if(2===g.length)T=[g[0],g[1],g[0],g[1]];else if(3===g.length)T=[g[0],g[1],g[2],g[1]];else{if(4!==g.length)return null;T=[g[0],g[1],g[2],g[3]]}var k=c.styleAttrs[e.byName.writingMode.qname];if("lrtb"===k||"lr"===k)T=[T[0],T[3],T[2],T[1]];else if("rltb"===k||"rl"===k)T=[T[0],T[1],T[2],T[3]];else if("tblr"===k)T=[T[3],T[0],T[1],T[2]];else{if("tbrl"!==k&&"tb"!==k)return null;T=[T[3],T[2],T[1],T[0]]}for(var N=[],B=0;B<T.length;B++)if(0===T[B].value)N[B]=new R.ComputedLength(0,0);else if(N[B]=R.toComputedLength(T[B].value,T[B].unit,c.styleAttrs[e.byName.fontSize.qname],0===B||2===B?c.styleAttrs[e.byName.extent.qname].h:c.styleAttrs[e.byName.extent.qname].w,0===B||2===B?b.cellLength.h:b.cellLength.w,0===B||2===B?b.pxLength.h:b.pxLength.w),null===N[B])return null;return N}),new j(S.ns_tts,"position","top left",["region"],!1,!0,function(b){return R.parsePosition(b)},function(b,f,c,g){var v,T;return null===(v=R.toComputedLength(g.v.offset.value,g.v.offset.unit,null,new R.ComputedLength(-c.styleAttrs[e.byName.extent.qname].h.rw,b.dimensions.h.rh-c.styleAttrs[e.byName.extent.qname].h.rh),null,b.pxLength.h))||("bottom"===g.v.edge&&(v=new R.ComputedLength(-v.rw-c.styleAttrs[e.byName.extent.qname].h.rw,b.dimensions.h.rh-v.rh-c.styleAttrs[e.byName.extent.qname].h.rh)),T=R.toComputedLength(g.h.offset.value,g.h.offset.unit,null,new R.ComputedLength(b.dimensions.w.rw-c.styleAttrs[e.byName.extent.qname].w.rw,-c.styleAttrs[e.byName.extent.qname].w.rh),null,b.pxLength.w),null===v)?null:("right"===g.h.edge&&(T=new R.ComputedLength(b.dimensions.w.rw-T.rw-c.styleAttrs[e.byName.extent.qname].w.rw,-T.rh-c.styleAttrs[e.byName.extent.qname].w.rh)),{h:v,w:T})}),new j(S.ns_tts,"ruby","none",["span"],!1,!0,function(b){return b},null),new j(S.ns_tts,"rubyAlign","center",["span"],!0,!0,function(b){return"center"===b||"spaceAround"===b?b:null},null),new j(S.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(b){return b},null),new j(S.ns_tts,"rubyReserve","none",["p"],!0,!0,function(b){var f=b.split(" "),c=[null,null];if(0===f.length||f.length>2)return null;if("none"!==f[0]&&"both"!==f[0]&&"after"!==f[0]&&"before"!==f[0]&&"outside"!==f[0])return null;if(c[0]=f[0],2===f.length&&"none"!==f[0]){var g=R.parseLength(f[1]);if(!g)return null;c[1]=g}return c},function(b,f,c,g,v){if("none"===g[0])return g;var T;return null===(T=null===g[1]?new R.ComputedLength(.5*c.styleAttrs[e.byName.fontSize.qname].rw,.5*c.styleAttrs[e.byName.fontSize.qname].rh):R.toComputedLength(g[1].value,g[1].unit,c.styleAttrs[e.byName.fontSize.qname],c.styleAttrs[e.byName.fontSize.qname],b.cellLength.h,b.pxLength.h))?null:[g[0],T]}),new j(S.ns_tts,"showBackground","always",["region"],!1,!0,function(b){return b},null),new j(S.ns_tts,"textAlign","start",["p"],!0,!0,function(b){return b},function(b,f,c,g,v){return"left"===g?"start":"right"===g?"end":g}),new j(S.ns_tts,"textCombine","none",["span"],!0,!0,function(b){return"none"===b||"all"===b?b:null},null),new j(S.ns_tts,"textDecoration","none",["span"],!0,!0,function(b){return b.split(" ")},null),new j(S.ns_tts,"textEmphasis","none",["span"],!0,!0,function(b){for(var f=b.split(" "),c={style:null,symbol:null,color:null,position:null},g=0;g<f.length;g++)if("none"===f[g]||"auto"===f[g])c.style=f[g];else if("filled"===f[g]||"open"===f[g])c.style=f[g];else if("circle"===f[g]||"dot"===f[g]||"sesame"===f[g])c.symbol=f[g];else if("current"===f[g])c.color=f[g];else if("outside"===f[g]||"before"===f[g]||"after"===f[g])c.position=f[g];else if(c.color=R.parseColor(f[g]),null===c.color)return null;return null==c.style&&null==c.symbol?c.style="auto":(c.symbol=c.symbol||"circle",c.style=c.style||"filled"),c.position=c.position||"outside",c.color=c.color||"current",c},null),new j(S.ns_tts,"textOutline","none",["span"],!0,!0,function(b){if("none"===b)return b;var f={},c=b.split(" ");if(0===c.length||c.length>2)return null;var g=R.parseColor(c[0]);if(f.color=g,null!==g&&c.shift(),1!==c.length)return null;var v=R.parseLength(c[0]);return v?(f.thickness=v,f):null},function(b,f,c,g,v){if("none"===g)return g;var T={};return T.color=null===g.color?c.styleAttrs[e.byName.color.qname]:g.color,T.thickness=R.toComputedLength(g.thickness.value,g.thickness.unit,c.styleAttrs[e.byName.fontSize.qname],c.styleAttrs[e.byName.fontSize.qname],b.cellLength.h,b.pxLength.h),null===T.thickness?null:T}),new j(S.ns_tts,"textShadow","none",["span"],!0,!0,R.parseTextShadow,function(b,f,c,g){if("none"===g)return g;for(var v=[],T=0;T<g.length;T++){var k={};if(k.x_off=R.toComputedLength(g[T][0].value,g[T][0].unit,null,c.styleAttrs[e.byName.fontSize.qname],null,b.pxLength.w),null===k.x_off||(k.y_off=R.toComputedLength(g[T][1].value,g[T][1].unit,null,c.styleAttrs[e.byName.fontSize.qname],null,b.pxLength.h),null===k.y_off))return null;if(null===g[T][2])k.b_radius=0;else if(k.b_radius=R.toComputedLength(g[T][2].value,g[T][2].unit,null,c.styleAttrs[e.byName.fontSize.qname],null,b.pxLength.h),null===k.b_radius)return null;k.color=null===g[T][3]?c.styleAttrs[e.byName.color.qname]:g[T][3],v.push(k)}return v}),new j(S.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(b){return b},null),new j(S.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(b){return b},null),new j(S.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(b){return b},null),new j(S.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(b){return b},null),new j(S.ns_tts,"zIndex","auto",["region"],!1,!0,function(b){var f;return"auto"===b?f=b:(f=parseInt(b),isNaN(f)&&(f=null)),f},null),new j(S.ns_ebutts,"linePadding","0c",["p"],!0,!1,R.parseLength,function(b,f,c,g,v){return R.toComputedLength(g.value,g.unit,null,null,b.cellLength.w,null)}),new j(S.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(b){return b},null),new j(S.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(b){return b},null),new j(S.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(b){return"true"===b},null),new j(S.ns_itts,"fillLineGap","false",["p"],!0,!0,function(b){return"true"===b},null)],e.byQName={},e.all)e.byQName[e.all[U].qname]=e.all[U];for(var L in e.byName={},e.all)e.byName[e.all[L].name]=e.all[L]}(O,"undefined"==typeof imscNames?r("./node_modules/imsc/src/main/js/names.js"):imscNames,"undefined"==typeof imscUtils?r("./node_modules/imsc/src/main/js/utils.js"):imscUtils)},"./node_modules/imsc/src/main/js/utils.js":function(Ve,O,r){!function(e){var S=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,R=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,j=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,U={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};e.parseColor=function(b){var f,c=null,g=U[b.toLowerCase()];return void 0!==g?c=g:null!==(f=S.exec(b))?c=[parseInt(f[1],16),parseInt(f[2],16),parseInt(f[3],16),void 0!==f[4]?parseInt(f[4],16):255]:null!==(f=R.exec(b))?c=[parseInt(f[1]),parseInt(f[2]),parseInt(f[3]),255]:null!==(f=j.exec(b))&&(c=[parseInt(f[1]),parseInt(f[2]),parseInt(f[3]),parseInt(f[4])]),c};var L=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;e.parseLength=function(b){var f,c=null;return null!==(f=L.exec(b))&&(c={value:parseFloat(f[1]),unit:f[2]}),c},e.parseTextShadow=function(b){for(var f=b.match(/([^\(,\)]|\([^\)]+\))+/g),c=[],g=0;g<f.length;g++){var v=f[g].split(" ");if(1===v.length&&"none"===v[0])return"none";if(v.length>1&&v.length<5){var T=[null,null,null,null],k=e.parseLength(v.shift());if(null===k||(T[0]=k,null===(k=e.parseLength(v.shift()))))return null;if(T[1]=k,0===v.length){c.push(T);continue}if(null!==(k=e.parseLength(v[0]))&&(T[2]=k,v.shift()),0===v.length){c.push(T);continue}var N=e.parseColor(v[0]);if(null===N)return null;T[3]=N,c.push(T)}}return c},e.parsePosition=function(b){var f=b.split(" "),c=function(x){return"center"===x||"left"===x||"top"===x||"bottom"===x||"right"===x};if(f.length>4)return null;for(var g=0;g<f.length;g++)if(!c(f[g])){var v=e.parseLength(f[g]);if(null===v)return null;f[g]=v}for(var T={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}},k=0;k<f.length;){var N=f[k++];if(c(N)){var B={value:0,unit:"%"};2!==f.length&&k<f.length&&!c(f[k])&&(B=f[k++]),"right"===N?(T.h.edge=N,T.h.offset=B):"bottom"===N?(T.v.edge=N,T.v.offset=B):"left"===N?T.h.offset=B:"top"===N&&(T.v.offset=B)}else{if(1!==f.length&&2!==f.length)return null;1===k?T.h.offset=N:T.v.offset=N}}return T},e.ComputedLength=function(b,f){this.rw=b,this.rh=f},e.ComputedLength.prototype.toUsedLength=function(b,f){return b*this.rw+f*this.rh},e.ComputedLength.prototype.isZero=function(){return 0===this.rw&&0===this.rh},e.toComputedLength=function(b,f,c,g,v,T){return"%"===f&&g?new e.ComputedLength(g.rw*b/100,g.rh*b/100):"em"===f&&c?new e.ComputedLength(c.rw*b,c.rh*b):"c"===f&&v?new e.ComputedLength(b*v.rw,b*v.rh):"px"===f&&T?new e.ComputedLength(b*T.rw,b*T.rh):"rh"===f?new e.ComputedLength(0,b/100):"rw"===f?new e.ComputedLength(b/100,0):null}}(O)},"./node_modules/inherits/inherits_browser.js":function(Ve,O){Ve.exports="function"==typeof Object.create?function(e,S){S&&(e.super_=S,e.prototype=Object.create(S.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:function(e,S){if(S){e.super_=S;var R=function(){};R.prototype=S.prototype,e.prototype=new R,e.prototype.constructor=e}}},"./node_modules/is-alphabetical/index.js":function(Ve,O,r){"use strict";Ve.exports=function e(S){var R="string"==typeof S?S.charCodeAt(0):S;return R>=97&&R<=122||R>=65&&R<=90}},"./node_modules/is-alphanumerical/index.js":function(Ve,O,r){"use strict";var e=r("./node_modules/is-alphabetical/index.js"),S=r("./node_modules/is-decimal/index.js");Ve.exports=function R(j){return e(j)||S(j)}},"./node_modules/is-decimal/index.js":function(Ve,O,r){"use strict";Ve.exports=function e(S){var R="string"==typeof S?S.charCodeAt(0):S;return R>=48&&R<=57}},"./node_modules/isarray/index.js":function(Ve,O){var r={}.toString;Ve.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},"./node_modules/path-browserify/index.js":function(Ve,O,r){(function(e){function S(L,b){for(var f=0,c=L.length-1;c>=0;c--){var g=L[c];"."===g?L.splice(c,1):".."===g?(L.splice(c,1),f++):f&&(L.splice(c,1),f--)}if(b)for(;f--;f)L.unshift("..");return L}function j(L,b){if(L.filter)return L.filter(b);for(var f=[],c=0;c<L.length;c++)b(L[c],c,L)&&f.push(L[c]);return f}O.resolve=function(){for(var L="",b=!1,f=arguments.length-1;f>=-1&&!b;f--){var c=f>=0?arguments[f]:e.cwd();if("string"!=typeof c)throw new TypeError("Arguments to path.resolve must be strings");c&&(L=c+"/"+L,b="/"===c.charAt(0))}return(b?"/":"")+(L=S(j(L.split("/"),function(g){return!!g}),!b).join("/"))||"."},O.normalize=function(L){var b=O.isAbsolute(L),f="/"===U(L,-1);return!(L=S(j(L.split("/"),function(c){return!!c}),!b).join("/"))&&!b&&(L="."),L&&f&&(L+="/"),(b?"/":"")+L},O.isAbsolute=function(L){return"/"===L.charAt(0)},O.join=function(){var L=Array.prototype.slice.call(arguments,0);return O.normalize(j(L,function(b,f){if("string"!=typeof b)throw new TypeError("Arguments to path.join must be strings");return b}).join("/"))},O.relative=function(L,b){function f(B){for(var x=0;x<B.length&&""===B[x];x++);for(var P=B.length-1;P>=0&&""===B[P];P--);return x>P?[]:B.slice(x,P-x+1)}L=O.resolve(L).substr(1),b=O.resolve(b).substr(1);for(var c=f(L.split("/")),g=f(b.split("/")),v=Math.min(c.length,g.length),T=v,k=0;k<v;k++)if(c[k]!==g[k]){T=k;break}var N=[];for(k=T;k<c.length;k++)N.push("..");return(N=N.concat(g.slice(T))).join("/")},O.sep="/",O.delimiter=":",O.dirname=function(L){if("string"!=typeof L&&(L+=""),0===L.length)return".";for(var b=L.charCodeAt(0),f=47===b,c=-1,g=!0,v=L.length-1;v>=1;--v)if(47===(b=L.charCodeAt(v))){if(!g){c=v;break}}else g=!1;return-1===c?f?"/":".":f&&1===c?"/":L.slice(0,c)},O.basename=function(L,b){var f=function R(L){"string"!=typeof L&&(L+="");var g,b=0,f=-1,c=!0;for(g=L.length-1;g>=0;--g)if(47===L.charCodeAt(g)){if(!c){b=g+1;break}}else-1===f&&(c=!1,f=g+1);return-1===f?"":L.slice(b,f)}(L);return b&&f.substr(-1*b.length)===b&&(f=f.substr(0,f.length-b.length)),f},O.extname=function(L){"string"!=typeof L&&(L+="");for(var b=-1,f=0,c=-1,g=!0,v=0,T=L.length-1;T>=0;--T){var k=L.charCodeAt(T);if(47!==k)-1===c&&(g=!1,c=T+1),46===k?-1===b?b=T:1!==v&&(v=1):-1!==b&&(v=-1);else if(!g){f=T+1;break}}return-1===b||-1===c||0===v||1===v&&b===c-1&&b===f+1?"":L.slice(b,c)};var U=function(L,b,f){return L.substr(b,f)}}).call(this,r("./node_modules/process/browser.js"))},"./node_modules/process-nextick-args/index.js":function(Ve,O,r){"use strict";(function(e){Ve.exports=void 0===e||!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?{nextTick:function S(R,j,U,L){if("function"!=typeof R)throw new TypeError('"callback" argument must be a function');var f,c,b=arguments.length;switch(b){case 0:case 1:return e.nextTick(R);case 2:return e.nextTick(function(){R.call(null,j)});case 3:return e.nextTick(function(){R.call(null,j,U)});case 4:return e.nextTick(function(){R.call(null,j,U,L)});default:for(f=new Array(b-1),c=0;c<f.length;)f[c++]=arguments[c];return e.nextTick(function(){R.apply(null,f)})}}}:e}).call(this,r("./node_modules/process/browser.js"))},"./node_modules/process/browser.js":function(Ve,O){var e,S,r=Ve.exports={};function R(){throw new Error("setTimeout has not been defined")}function j(){throw new Error("clearTimeout has not been defined")}function U(B){if(e===setTimeout)return setTimeout(B,0);if((e===R||!e)&&setTimeout)return e=setTimeout,setTimeout(B,0);try{return e(B,0)}catch(x){try{return e.call(null,B,0)}catch(P){return e.call(this,B,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:R}catch(B){e=R}try{S="function"==typeof clearTimeout?clearTimeout:j}catch(B){S=j}}();var c,b=[],f=!1,g=-1;function v(){!f||!c||(f=!1,c.length?b=c.concat(b):g=-1,b.length&&T())}function T(){if(!f){var B=U(v);f=!0;for(var x=b.length;x;){for(c=b,b=[];++g<x;)c&&c[g].run();g=-1,x=b.length}c=null,f=!1,function L(B){if(S===clearTimeout)return clearTimeout(B);if((S===j||!S)&&clearTimeout)return S=clearTimeout,clearTimeout(B);try{return S(B)}catch(x){try{return S.call(null,B)}catch(P){return S.call(this,B)}}}(B)}}function k(B,x){this.fun=B,this.array=x}function N(){}r.nextTick=function(B){var x=new Array(arguments.length-1);if(arguments.length>1)for(var P=1;P<arguments.length;P++)x[P-1]=arguments[P];b.push(new k(B,x)),1===b.length&&!f&&U(T)},k.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=N,r.addListener=N,r.once=N,r.off=N,r.removeListener=N,r.removeAllListeners=N,r.emit=N,r.prependListener=N,r.prependOnceListener=N,r.listeners=function(B){return[]},r.binding=function(B){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(B){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},"./node_modules/readable-stream/duplex-browser.js":function(Ve,O,r){Ve.exports=r("./node_modules/readable-stream/lib/_stream_duplex.js")},"./node_modules/readable-stream/lib/_stream_duplex.js":function(Ve,O,r){"use strict";var e=r("./node_modules/process-nextick-args/index.js"),S=Object.keys||function(T){var k=[];for(var N in T)k.push(N);return k};Ve.exports=c;var R=Object.create(r("./node_modules/core-util-is/lib/util.js"));R.inherits=r("./node_modules/inherits/inherits_browser.js");var j=r("./node_modules/readable-stream/lib/_stream_readable.js"),U=r("./node_modules/readable-stream/lib/_stream_writable.js");R.inherits(c,j);for(var L=S(U.prototype),b=0;b<L.length;b++){var f=L[b];c.prototype[f]||(c.prototype[f]=U.prototype[f])}function c(T){if(!(this instanceof c))return new c(T);j.call(this,T),U.call(this,T),T&&!1===T.readable&&(this.readable=!1),T&&!1===T.writable&&(this.writable=!1),this.allowHalfOpen=!0,T&&!1===T.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",g)}function g(){this.allowHalfOpen||this._writableState.ended||e.nextTick(v,this)}function v(T){T.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(T){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=T,this._writableState.destroyed=T)}}),c.prototype._destroy=function(T,k){this.push(null),this.end(),e.nextTick(k,T)}},"./node_modules/readable-stream/lib/_stream_passthrough.js":function(Ve,O,r){"use strict";Ve.exports=R;var e=r("./node_modules/readable-stream/lib/_stream_transform.js"),S=Object.create(r("./node_modules/core-util-is/lib/util.js"));function R(j){if(!(this instanceof R))return new R(j);e.call(this,j)}S.inherits=r("./node_modules/inherits/inherits_browser.js"),S.inherits(R,e),R.prototype._transform=function(j,U,L){L(null,j)}},"./node_modules/readable-stream/lib/_stream_readable.js":function(Ve,O,r){"use strict";(function(e,S){var R=r("./node_modules/process-nextick-args/index.js");Ve.exports=I;var U,j=r("./node_modules/isarray/index.js");I.ReadableState=A,r("./node_modules/events/events.js");var b=function(he,Y){return he.listeners(Y).length},f=r("./node_modules/readable-stream/lib/internal/streams/stream-browser.js"),c=r("./node_modules/readable-stream/node_modules/safe-buffer/index.js").Buffer,g=e.Uint8Array||function(){};var k=Object.create(r("./node_modules/core-util-is/lib/util.js"));k.inherits=r("./node_modules/inherits/inherits_browser.js");var N=r(0),B=void 0;B=N&&N.debuglog?N.debuglog("stream"):function(){};var _,x=r("./node_modules/readable-stream/lib/internal/streams/BufferList.js"),P=r("./node_modules/readable-stream/lib/internal/streams/destroy.js");k.inherits(I,f);var D=["error","close","destroy","pause","resume"];function A(he,Y){var J=Y instanceof(U=U||r("./node_modules/readable-stream/lib/_stream_duplex.js"));this.objectMode=!!(he=he||{}).objectMode,J&&(this.objectMode=this.objectMode||!!he.readableObjectMode);var Me=he.highWaterMark,ae=he.readableHighWaterMark;this.highWaterMark=Me||0===Me?Me:J&&(ae||0===ae)?ae:this.objectMode?16:16384,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new x,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=he.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,he.encoding&&(_||(_=r("./node_modules/string_decoder/lib/string_decoder.js").StringDecoder),this.decoder=new _(he.encoding),this.encoding=he.encoding)}function I(he){if(U=U||r("./node_modules/readable-stream/lib/_stream_duplex.js"),!(this instanceof I))return new I(he);this._readableState=new A(he,this),this.readable=!0,he&&("function"==typeof he.read&&(this._read=he.read),"function"==typeof he.destroy&&(this._destroy=he.destroy)),f.call(this)}function G(he,Y,J,Me,ae){var z,re=he._readableState;return null===Y?(re.reading=!1,function H(he,Y){if(!Y.ended){if(Y.decoder){var J=Y.decoder.end();J&&J.length&&(Y.buffer.push(J),Y.length+=Y.objectMode?1:J.length)}Y.ended=!0,ce(he)}}(he,re)):(ae||(z=function de(he,Y){var J;return!function T(he){return c.isBuffer(he)||he instanceof g}(Y)&&"string"!=typeof Y&&void 0!==Y&&!he.objectMode&&(J=new TypeError("Invalid non-string/buffer chunk")),J}(re,Y)),z?he.emit("error",z):re.objectMode||Y&&Y.length>0?("string"!=typeof Y&&!re.objectMode&&Object.getPrototypeOf(Y)!==c.prototype&&(Y=function v(he){return c.from(he)}(Y)),Me?re.endEmitted?he.emit("error",new Error("stream.unshift() after end event")):ee(he,re,Y,!0):re.ended?he.emit("error",new Error("stream.push() after EOF")):(re.reading=!1,re.decoder&&!J?(Y=re.decoder.write(Y),re.objectMode||0!==Y.length?ee(he,re,Y,!1):pe(he,re)):ee(he,re,Y,!1))):Me||(re.reading=!1)),function ue(he){return!he.ended&&(he.needReadable||he.length<he.highWaterMark||0===he.length)}(re)}function ee(he,Y,J,Me){Y.flowing&&0===Y.length&&!Y.sync?(he.emit("data",J),he.read(0)):(Y.length+=Y.objectMode?1:J.length,Me?Y.buffer.unshift(J):Y.buffer.push(J),Y.needReadable&&ce(he)),pe(he,Y)}Object.defineProperty(I.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(he){!this._readableState||(this._readableState.destroyed=he)}}),I.prototype.destroy=P.destroy,I.prototype._undestroy=P.undestroy,I.prototype._destroy=function(he,Y){this.push(null),Y(he)},I.prototype.push=function(he,Y){var Me,J=this._readableState;return J.objectMode?Me=!0:"string"==typeof he&&((Y=Y||J.defaultEncoding)!==J.encoding&&(he=c.from(he,Y),Y=""),Me=!0),G(this,he,Y,!1,Me)},I.prototype.unshift=function(he){return G(this,he,null,!0,!1)},I.prototype.isPaused=function(){return!1===this._readableState.flowing},I.prototype.setEncoding=function(he){return _||(_=r("./node_modules/string_decoder/lib/string_decoder.js").StringDecoder),this._readableState.decoder=new _(he),this._readableState.encoding=he,this};function se(he,Y){return he<=0||0===Y.length&&Y.ended?0:Y.objectMode?1:he!=he?Y.flowing&&Y.length?Y.buffer.head.data.length:Y.length:(he>Y.highWaterMark&&(Y.highWaterMark=function q(he){return he>=8388608?he=8388608:(he--,he|=he>>>1,he|=he>>>2,he|=he>>>4,he|=he>>>8,he|=he>>>16,he++),he}(he)),he<=Y.length?he:Y.ended?Y.length:(Y.needReadable=!0,0))}function ce(he){var Y=he._readableState;Y.needReadable=!1,Y.emittedReadable||(B("emitReadable",Y.flowing),Y.emittedReadable=!0,Y.sync?R.nextTick(ne,he):ne(he))}function ne(he){B("emit readable"),he.emit("readable"),Ie(he)}function pe(he,Y){Y.readingMore||(Y.readingMore=!0,R.nextTick(me,he,Y))}function me(he,Y){for(var J=Y.length;!Y.reading&&!Y.flowing&&!Y.ended&&Y.length<Y.highWaterMark&&(B("maybeReadMore read 0"),he.read(0),J!==Y.length);)J=Y.length;Y.readingMore=!1}function ve(he){B("readable nexttick read 0"),he.read(0)}function Ee(he,Y){Y.reading||(B("resume read 0"),he.read(0)),Y.resumeScheduled=!1,Y.awaitDrain=0,he.emit("resume"),Ie(he),Y.flowing&&!Y.reading&&he.read(0)}function Ie(he){var Y=he._readableState;for(B("flow",Y.flowing);Y.flowing&&null!==he.read(););}function Re(he,Y){return 0===Y.length?null:(Y.objectMode?J=Y.buffer.shift():!he||he>=Y.length?(J=Y.decoder?Y.buffer.join(""):1===Y.buffer.length?Y.buffer.head.data:Y.buffer.concat(Y.length),Y.buffer.clear()):J=function Pe(he,Y,J){var Me;return he<Y.head.data.length?(Me=Y.head.data.slice(0,he),Y.head.data=Y.head.data.slice(he)):Me=he===Y.head.data.length?Y.shift():J?function ke(he,Y){var J=Y.head,Me=1,ae=J.data;for(he-=ae.length;J=J.next;){var re=J.data,z=he>re.length?re.length:he;if(ae+=z===re.length?re:re.slice(0,he),0==(he-=z)){z===re.length?(++Me,Y.head=J.next?J.next:Y.tail=null):(Y.head=J,J.data=re.slice(z));break}++Me}return Y.length-=Me,ae}(he,Y):function Be(he,Y){var J=c.allocUnsafe(he),Me=Y.head,ae=1;for(Me.data.copy(J),he-=Me.data.length;Me=Me.next;){var re=Me.data,z=he>re.length?re.length:he;if(re.copy(J,J.length-he,0,z),0==(he-=z)){z===re.length?(++ae,Y.head=Me.next?Me.next:Y.tail=null):(Y.head=Me,Me.data=re.slice(z));break}++ae}return Y.length-=ae,J}(he,Y),Me}(he,Y.buffer,Y.decoder),J);var J}function qe(he){var Y=he._readableState;if(Y.length>0)throw new Error('"endReadable()" called on non-empty stream');Y.endEmitted||(Y.ended=!0,R.nextTick(He,Y,he))}function He(he,Y){!he.endEmitted&&0===he.length&&(he.endEmitted=!0,Y.readable=!1,Y.emit("end"))}function De(he,Y){for(var J=0,Me=he.length;J<Me;J++)if(he[J]===Y)return J;return-1}I.prototype.read=function(he){B("read",he),he=parseInt(he,10);var Y=this._readableState,J=he;if(0!==he&&(Y.emittedReadable=!1),0===he&&Y.needReadable&&(Y.length>=Y.highWaterMark||Y.ended))return B("read: emitReadable",Y.length,Y.ended),0===Y.length&&Y.ended?qe(this):ce(this),null;if(0===(he=se(he,Y))&&Y.ended)return 0===Y.length&&qe(this),null;var ae,Me=Y.needReadable;return B("need readable",Me),(0===Y.length||Y.length-he<Y.highWaterMark)&&B("length less than watermark",Me=!0),Y.ended||Y.reading?B("reading or ended",Me=!1):Me&&(B("do read"),Y.reading=!0,Y.sync=!0,0===Y.length&&(Y.needReadable=!0),this._read(Y.highWaterMark),Y.sync=!1,Y.reading||(he=se(J,Y))),null===(ae=he>0?Re(he,Y):null)?(Y.needReadable=!0,he=0):Y.length-=he,0===Y.length&&(Y.ended||(Y.needReadable=!0),J!==he&&Y.ended&&qe(this)),null!==ae&&this.emit("data",ae),ae},I.prototype._read=function(he){this.emit("error",new Error("_read() is not implemented"))},I.prototype.pipe=function(he,Y){var J=this,Me=this._readableState;switch(Me.pipesCount){case 0:Me.pipes=he;break;case 1:Me.pipes=[Me.pipes,he];break;default:Me.pipes.push(he)}Me.pipesCount+=1,B("pipe count=%d opts=%j",Me.pipesCount,Y);var re=Y&&!1===Y.end||he===S.stdout||he===S.stderr?et:te;function z(ut,Ot){B("onunpipe"),ut===J&&Ot&&!1===Ot.hasUnpiped&&(Ot.hasUnpiped=!0,function W(){B("cleanup"),he.removeListener("close",We),he.removeListener("finish",at),he.removeListener("drain",X),he.removeListener("error",Fe),he.removeListener("unpipe",z),J.removeListener("end",te),J.removeListener("end",et),J.removeListener("data",be),Z=!0,Me.awaitDrain&&(!he._writableState||he._writableState.needDrain)&&X()}())}function te(){B("onend"),he.end()}Me.endEmitted?R.nextTick(re):J.once("end",re),he.on("unpipe",z);var X=function xe(he){return function(){var Y=he._readableState;B("pipeOnDrain",Y.awaitDrain),Y.awaitDrain&&Y.awaitDrain--,0===Y.awaitDrain&&b(he,"data")&&(Y.flowing=!0,Ie(he))}}(J);he.on("drain",X);var Z=!1;var oe=!1;function be(ut){B("ondata"),oe=!1,!1===he.write(ut)&&!oe&&((1===Me.pipesCount&&Me.pipes===he||Me.pipesCount>1&&-1!==De(Me.pipes,he))&&!Z&&(B("false write response, pause",J._readableState.awaitDrain),J._readableState.awaitDrain++,oe=!0),J.pause())}function Fe(ut){B("onerror",ut),et(),he.removeListener("error",Fe),0===b(he,"error")&&he.emit("error",ut)}function We(){he.removeListener("finish",at),et()}function at(){B("onfinish"),he.removeListener("close",We),et()}function et(){B("unpipe"),J.unpipe(he)}return J.on("data",be),function y(he,Y,J){if("function"==typeof he.prependListener)return he.prependListener(Y,J);he._events&&he._events[Y]?j(he._events[Y])?he._events[Y].unshift(J):he._events[Y]=[J,he._events[Y]]:he.on(Y,J)}(he,"error",Fe),he.once("close",We),he.once("finish",at),he.emit("pipe",J),Me.flowing||(B("pipe resume"),J.resume()),he},I.prototype.unpipe=function(he){var Y=this._readableState,J={hasUnpiped:!1};if(0===Y.pipesCount)return this;if(1===Y.pipesCount)return he&&he!==Y.pipes||(he||(he=Y.pipes),Y.pipes=null,Y.pipesCount=0,Y.flowing=!1,he&&he.emit("unpipe",this,J)),this;if(!he){var Me=Y.pipes,ae=Y.pipesCount;Y.pipes=null,Y.pipesCount=0,Y.flowing=!1;for(var re=0;re<ae;re++)Me[re].emit("unpipe",this,J);return this}var z=De(Y.pipes,he);return-1===z||(Y.pipes.splice(z,1),Y.pipesCount-=1,1===Y.pipesCount&&(Y.pipes=Y.pipes[0]),he.emit("unpipe",this,J)),this},I.prototype.addListener=I.prototype.on=function(he,Y){var J=f.prototype.on.call(this,he,Y);if("data"===he)!1!==this._readableState.flowing&&this.resume();else if("readable"===he){var Me=this._readableState;!Me.endEmitted&&!Me.readableListening&&(Me.readableListening=Me.needReadable=!0,Me.emittedReadable=!1,Me.reading?Me.length&&ce(this):R.nextTick(ve,this))}return J},I.prototype.resume=function(){var he=this._readableState;return he.flowing||(B("resume"),he.flowing=!0,function Oe(he,Y){Y.resumeScheduled||(Y.resumeScheduled=!0,R.nextTick(Ee,he,Y))}(this,he)),this},I.prototype.pause=function(){return B("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(B("pause"),this._readableState.flowing=!1,this.emit("pause")),this},I.prototype.wrap=function(he){var Y=this,J=this._readableState,Me=!1;for(var ae in he.on("end",function(){if(B("wrapped end"),J.decoder&&!J.ended){var z=J.decoder.end();z&&z.length&&Y.push(z)}Y.push(null)}),he.on("data",function(z){B("wrapped data"),J.decoder&&(z=J.decoder.write(z)),J.objectMode&&null==z||!(J.objectMode||z&&z.length)||Y.push(z)||(Me=!0,he.pause())}),he)void 0===this[ae]&&"function"==typeof he[ae]&&(this[ae]=function(z){return function(){return he[z].apply(he,arguments)}}(ae));for(var re=0;re<D.length;re++)he.on(D[re],this.emit.bind(this,D[re]));return this._read=function(z){B("wrapped _read",z),Me&&(Me=!1,he.resume())},this},Object.defineProperty(I.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),I._fromList=Re}).call(this,r("./node_modules/webpack/buildin/global.js"),r("./node_modules/process/browser.js"))},"./node_modules/readable-stream/lib/_stream_transform.js":function(Ve,O,r){"use strict";Ve.exports=j;var e=r("./node_modules/readable-stream/lib/_stream_duplex.js"),S=Object.create(r("./node_modules/core-util-is/lib/util.js"));function R(b,f){var c=this._transformState;c.transforming=!1;var g=c.writecb;if(!g)return this.emit("error",new Error("write callback called multiple times"));c.writechunk=null,c.writecb=null,null!=f&&this.push(f),g(b);var v=this._readableState;v.reading=!1,(v.needReadable||v.length<v.highWaterMark)&&this._read(v.highWaterMark)}function j(b){if(!(this instanceof j))return new j(b);e.call(this,b),this._transformState={afterTransform:R.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,b&&("function"==typeof b.transform&&(this._transform=b.transform),"function"==typeof b.flush&&(this._flush=b.flush)),this.on("prefinish",U)}function U(){var b=this;"function"==typeof this._flush?this._flush(function(f,c){L(b,f,c)}):L(this,null,null)}function L(b,f,c){if(f)return b.emit("error",f);if(null!=c&&b.push(c),b._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(b._transformState.transforming)throw new Error("Calling transform done when still transforming");return b.push(null)}S.inherits=r("./node_modules/inherits/inherits_browser.js"),S.inherits(j,e),j.prototype.push=function(b,f){return this._transformState.needTransform=!1,e.prototype.push.call(this,b,f)},j.prototype._transform=function(b,f,c){throw new Error("_transform() is not implemented")},j.prototype._write=function(b,f,c){var g=this._transformState;if(g.writecb=c,g.writechunk=b,g.writeencoding=f,!g.transforming){var v=this._readableState;(g.needTransform||v.needReadable||v.length<v.highWaterMark)&&this._read(v.highWaterMark)}},j.prototype._read=function(b){var f=this._transformState;null!==f.writechunk&&f.writecb&&!f.transforming?(f.transforming=!0,this._transform(f.writechunk,f.writeencoding,f.afterTransform)):f.needTransform=!0},j.prototype._destroy=function(b,f){var c=this;e.prototype._destroy.call(this,b,function(g){f(g),c.emit("close")})}},"./node_modules/readable-stream/lib/_stream_writable.js":function(Ve,O,r){"use strict";(function(e,S,R){var j=r("./node_modules/process-nextick-args/index.js");function L(Ee){var Ie=this;this.next=null,this.entry=null,this.finish=function(){!function Oe(Ee,Ie,Re){var Pe=Ee.entry;for(Ee.entry=null;Pe;){var ke=Pe.callback;Ie.pendingcb--,ke(Re),Pe=Pe.next}Ie.corkedRequestsFree?Ie.corkedRequestsFree.next=Ee:Ie.corkedRequestsFree=Ee}(Ie,Ee)}}Ve.exports=y;var f,b=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?S:j.nextTick;y.WritableState=_;var c=Object.create(r("./node_modules/core-util-is/lib/util.js"));c.inherits=r("./node_modules/inherits/inherits_browser.js");var g={deprecate:r("./node_modules/util-deprecate/browser.js")},v=r("./node_modules/readable-stream/lib/internal/streams/stream-browser.js"),T=r("./node_modules/readable-stream/node_modules/safe-buffer/index.js").Buffer,k=R.Uint8Array||function(){};var D,x=r("./node_modules/readable-stream/lib/internal/streams/destroy.js");function P(){}function _(Ee,Ie){f=f||r("./node_modules/readable-stream/lib/_stream_duplex.js");var Re=Ie instanceof f;this.objectMode=!!(Ee=Ee||{}).objectMode,Re&&(this.objectMode=this.objectMode||!!Ee.writableObjectMode);var Pe=Ee.highWaterMark,ke=Ee.writableHighWaterMark;this.highWaterMark=Pe||0===Pe?Pe:Re&&(ke||0===ke)?ke:this.objectMode?16:16384,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===Ee.decodeStrings),this.defaultEncoding=Ee.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(He){!function q(Ee,Ie){var Re=Ee._writableState,Pe=Re.sync,ke=Re.writecb;if(function Te(Ee){Ee.writing=!1,Ee.writecb=null,Ee.length-=Ee.writelen,Ee.writelen=0}(Re),Ie)!function ue(Ee,Ie,Re,Pe,ke){--Ie.pendingcb,Re?(j.nextTick(ke,Pe),j.nextTick(xe,Ee,Ie),Ee._writableState.errorEmitted=!0,Ee.emit("error",Pe)):(ke(Pe),Ee._writableState.errorEmitted=!0,Ee.emit("error",Pe),xe(Ee,Ie))}(Ee,Re,Pe,Ie,ke);else{var Be=ne(Re);!Be&&!Re.corked&&!Re.bufferProcessing&&Re.bufferedRequest&&ce(Ee,Re),Pe?b(se,Ee,Re,Be,ke):se(Ee,Re,Be,ke)}}(Ie,He)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new L(this)}function y(Ee){if(f=f||r("./node_modules/readable-stream/lib/_stream_duplex.js"),!(D.call(y,this)||this instanceof f))return new y(Ee);this._writableState=new _(Ee,this),this.writable=!0,Ee&&("function"==typeof Ee.write&&(this._write=Ee.write),"function"==typeof Ee.writev&&(this._writev=Ee.writev),"function"==typeof Ee.destroy&&(this._destroy=Ee.destroy),"function"==typeof Ee.final&&(this._final=Ee.final)),v.call(this)}function ee(Ee,Ie,Re,Pe,ke,Be){if(!Re){var qe=function G(Ee,Ie,Re){return!Ee.objectMode&&!1!==Ee.decodeStrings&&"string"==typeof Ie&&(Ie=T.from(Ie,Re)),Ie}(Ie,Pe,ke);Pe!==qe&&(Re=!0,ke="buffer",Pe=qe)}var He=Ie.objectMode?1:Pe.length;Ie.length+=He;var De=Ie.length<Ie.highWaterMark;if(De||(Ie.needDrain=!0),Ie.writing||Ie.corked){var he=Ie.lastBufferedRequest;Ie.lastBufferedRequest={chunk:Pe,encoding:ke,isBuf:Re,callback:Be,next:null},he?he.next=Ie.lastBufferedRequest:Ie.bufferedRequest=Ie.lastBufferedRequest,Ie.bufferedRequestCount+=1}else de(Ee,Ie,!1,He,Pe,ke,Be);return De}function de(Ee,Ie,Re,Pe,ke,Be,qe){Ie.writelen=Pe,Ie.writecb=qe,Ie.writing=!0,Ie.sync=!0,Re?Ee._writev(ke,Ie.onwrite):Ee._write(ke,Be,Ie.onwrite),Ie.sync=!1}function se(Ee,Ie,Re,Pe){Re||function H(Ee,Ie){0===Ie.length&&Ie.needDrain&&(Ie.needDrain=!1,Ee.emit("drain"))}(Ee,Ie),Ie.pendingcb--,Pe(),xe(Ee,Ie)}function ce(Ee,Ie){Ie.bufferProcessing=!0;var Re=Ie.bufferedRequest;if(Ee._writev&&Re&&Re.next){var ke=new Array(Ie.bufferedRequestCount),Be=Ie.corkedRequestsFree;Be.entry=Re;for(var qe=0,He=!0;Re;)ke[qe]=Re,Re.isBuf||(He=!1),Re=Re.next,qe+=1;ke.allBuffers=He,de(Ee,Ie,!0,Ie.length,ke,"",Be.finish),Ie.pendingcb++,Ie.lastBufferedRequest=null,Be.next?(Ie.corkedRequestsFree=Be.next,Be.next=null):Ie.corkedRequestsFree=new L(Ie),Ie.bufferedRequestCount=0}else{for(;Re;){var De=Re.chunk;if(de(Ee,Ie,!1,Ie.objectMode?1:De.length,De,Re.encoding,Re.callback),Re=Re.next,Ie.bufferedRequestCount--,Ie.writing)break}null===Re&&(Ie.lastBufferedRequest=null)}Ie.bufferedRequest=Re,Ie.bufferProcessing=!1}function ne(Ee){return Ee.ending&&0===Ee.length&&null===Ee.bufferedRequest&&!Ee.finished&&!Ee.writing}function pe(Ee,Ie){Ee._final(function(Re){Ie.pendingcb--,Re&&Ee.emit("error",Re),Ie.prefinished=!0,Ee.emit("prefinish"),xe(Ee,Ie)})}function xe(Ee,Ie){var Re=ne(Ie);return Re&&(function me(Ee,Ie){!Ie.prefinished&&!Ie.finalCalled&&("function"==typeof Ee._final?(Ie.pendingcb++,Ie.finalCalled=!0,j.nextTick(pe,Ee,Ie)):(Ie.prefinished=!0,Ee.emit("prefinish")))}(Ee,Ie),0===Ie.pendingcb&&(Ie.finished=!0,Ee.emit("finish"))),Re}c.inherits(y,v),_.prototype.getBuffer=function(){for(var Ie=this.bufferedRequest,Re=[];Ie;)Re.push(Ie),Ie=Ie.next;return Re},function(){try{Object.defineProperty(_.prototype,"buffer",{get:g.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(Ee){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(D=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(Ee){return!!D.call(this,Ee)||this===y&&Ee&&Ee._writableState instanceof _}})):D=function(Ee){return Ee instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},y.prototype.write=function(Ee,Ie,Re){var Pe=this._writableState,ke=!1,Be=!Pe.objectMode&&function B(Ee){return T.isBuffer(Ee)||Ee instanceof k}(Ee);return Be&&!T.isBuffer(Ee)&&(Ee=function N(Ee){return T.from(Ee)}(Ee)),"function"==typeof Ie&&(Re=Ie,Ie=null),Be?Ie="buffer":Ie||(Ie=Pe.defaultEncoding),"function"!=typeof Re&&(Re=P),Pe.ended?function A(Ee,Ie){var Re=new Error("write after end");Ee.emit("error",Re),j.nextTick(Ie,Re)}(this,Re):(Be||function I(Ee,Ie,Re,Pe){var ke=!0,Be=!1;return null===Re?Be=new TypeError("May not write null values to stream"):"string"!=typeof Re&&void 0!==Re&&!Ie.objectMode&&(Be=new TypeError("Invalid non-string/buffer chunk")),Be&&(Ee.emit("error",Be),j.nextTick(Pe,Be),ke=!1),ke}(this,Pe,Ee,Re))&&(Pe.pendingcb++,ke=ee(this,Pe,Be,Ee,Ie,Re)),ke},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var Ee=this._writableState;Ee.corked&&(Ee.corked--,!Ee.writing&&!Ee.corked&&!Ee.finished&&!Ee.bufferProcessing&&Ee.bufferedRequest&&ce(this,Ee))},y.prototype.setDefaultEncoding=function(Ie){if("string"==typeof Ie&&(Ie=Ie.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Ie+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+Ie);return this._writableState.defaultEncoding=Ie,this},Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),y.prototype._write=function(Ee,Ie,Re){Re(new Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(Ee,Ie,Re){var Pe=this._writableState;"function"==typeof Ee?(Re=Ee,Ee=null,Ie=null):"function"==typeof Ie&&(Re=Ie,Ie=null),null!=Ee&&this.write(Ee,Ie),Pe.corked&&(Pe.corked=1,this.uncork()),!Pe.ending&&!Pe.finished&&function ve(Ee,Ie,Re){Ie.ending=!0,xe(Ee,Ie),Re&&(Ie.finished?j.nextTick(Re):Ee.once("finish",Re)),Ie.ended=!0,Ee.writable=!1}(this,Pe,Re)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(Ee){!this._writableState||(this._writableState.destroyed=Ee)}}),y.prototype.destroy=x.destroy,y.prototype._undestroy=x.undestroy,y.prototype._destroy=function(Ee,Ie){this.end(),Ie(Ee)}}).call(this,r("./node_modules/process/browser.js"),r("./node_modules/timers-browserify/main.js").setImmediate,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/readable-stream/lib/internal/streams/BufferList.js":function(Ve,O,r){"use strict";var S=r("./node_modules/readable-stream/node_modules/safe-buffer/index.js").Buffer,R=r(1);function j(U,L,b){U.copy(L,b)}Ve.exports=function(){function U(){(function e(U,L){if(!(U instanceof L))throw new TypeError("Cannot call a class as a function")})(this,U),this.head=null,this.tail=null,this.length=0}return U.prototype.push=function(b){var f={data:b,next:null};this.length>0?this.tail.next=f:this.head=f,this.tail=f,++this.length},U.prototype.unshift=function(b){var f={data:b,next:this.head};0===this.length&&(this.tail=f),this.head=f,++this.length},U.prototype.shift=function(){if(0!==this.length){var b=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,b}},U.prototype.clear=function(){this.head=this.tail=null,this.length=0},U.prototype.join=function(b){if(0===this.length)return"";for(var f=this.head,c=""+f.data;f=f.next;)c+=b+f.data;return c},U.prototype.concat=function(b){if(0===this.length)return S.alloc(0);if(1===this.length)return this.head.data;for(var f=S.allocUnsafe(b>>>0),c=this.head,g=0;c;)j(c.data,f,g),g+=c.data.length,c=c.next;return f},U}(),R&&R.inspect&&R.inspect.custom&&(Ve.exports.prototype[R.inspect.custom]=function(){var U=R.inspect({length:this.length});return this.constructor.name+" "+U})},"./node_modules/readable-stream/lib/internal/streams/destroy.js":function(Ve,O,r){"use strict";var e=r("./node_modules/process-nextick-args/index.js");function j(U,L){U.emit("error",L)}Ve.exports={destroy:function S(U,L){var b=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(L?L(U):U&&(!this._writableState||!this._writableState.errorEmitted)&&e.nextTick(j,this,U),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(U||null,function(g){!L&&g?(e.nextTick(j,b,g),b._writableState&&(b._writableState.errorEmitted=!0)):L&&L(g)}),this)},undestroy:function R(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},"./node_modules/readable-stream/lib/internal/streams/stream-browser.js":function(Ve,O,r){Ve.exports=r("./node_modules/events/events.js").EventEmitter},"./node_modules/readable-stream/node_modules/safe-buffer/index.js":function(Ve,O,r){var e=r("./node_modules/buffer/index.js"),S=e.Buffer;function R(U,L){for(var b in U)L[b]=U[b]}function j(U,L,b){return S(U,L,b)}S.from&&S.alloc&&S.allocUnsafe&&S.allocUnsafeSlow?Ve.exports=e:(R(e,O),O.Buffer=j),R(S,j),j.from=function(U,L,b){if("number"==typeof U)throw new TypeError("Argument must not be a number");return S(U,L,b)},j.alloc=function(U,L,b){if("number"!=typeof U)throw new TypeError("Argument must be a number");var f=S(U);return void 0!==L?"string"==typeof b?f.fill(L,b):f.fill(L):f.fill(0),f},j.allocUnsafe=function(U){if("number"!=typeof U)throw new TypeError("Argument must be a number");return S(U)},j.allocUnsafeSlow=function(U){if("number"!=typeof U)throw new TypeError("Argument must be a number");return e.SlowBuffer(U)}},"./node_modules/readable-stream/passthrough.js":function(Ve,O,r){Ve.exports=r("./node_modules/readable-stream/readable-browser.js").PassThrough},"./node_modules/readable-stream/readable-browser.js":function(Ve,O,r){(O=Ve.exports=r("./node_modules/readable-stream/lib/_stream_readable.js")).Stream=O,O.Readable=O,O.Writable=r("./node_modules/readable-stream/lib/_stream_writable.js"),O.Duplex=r("./node_modules/readable-stream/lib/_stream_duplex.js"),O.Transform=r("./node_modules/readable-stream/lib/_stream_transform.js"),O.PassThrough=r("./node_modules/readable-stream/lib/_stream_passthrough.js")},"./node_modules/readable-stream/transform.js":function(Ve,O,r){Ve.exports=r("./node_modules/readable-stream/readable-browser.js").Transform},"./node_modules/readable-stream/writable-browser.js":function(Ve,O,r){Ve.exports=r("./node_modules/readable-stream/lib/_stream_writable.js")},"./node_modules/safe-buffer/index.js":function(Ve,O,r){var e=r("./node_modules/buffer/index.js"),S=e.Buffer;function R(U,L){for(var b in U)L[b]=U[b]}function j(U,L,b){return S(U,L,b)}S.from&&S.alloc&&S.allocUnsafe&&S.allocUnsafeSlow?Ve.exports=e:(R(e,O),O.Buffer=j),j.prototype=Object.create(S.prototype),R(S,j),j.from=function(U,L,b){if("number"==typeof U)throw new TypeError("Argument must not be a number");return S(U,L,b)},j.alloc=function(U,L,b){if("number"!=typeof U)throw new TypeError("Argument must be a number");var f=S(U);return void 0!==L?"string"==typeof b?f.fill(L,b):f.fill(L):f.fill(0),f},j.allocUnsafe=function(U){if("number"!=typeof U)throw new TypeError("Argument must be a number");return S(U)},j.allocUnsafeSlow=function(U){if("number"!=typeof U)throw new TypeError("Argument must be a number");return e.SlowBuffer(U)}},"./node_modules/sax/lib/sax.js":function(Ve,O,r){(function(e){!function(S){S.parser=function(Y,J){return new j(Y,J)},S.SAXParser=j,S.SAXStream=v,S.createStream=function g(Y,J){return new v(Y,J)},S.MAX_BUFFER_LENGTH=65536;var f,R=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function j(Y,J){if(!(this instanceof j))return new j(Y,J);var Me=this;(function L(Y){for(var J=0,Me=R.length;J<Me;J++)Y[R[J]]=""})(Me),Me.q=Me.c="",Me.bufferCheckPosition=S.MAX_BUFFER_LENGTH,Me.opt=J||{},Me.opt.lowercase=Me.opt.lowercase||Me.opt.lowercasetags,Me.looseCase=Me.opt.lowercase?"toLowerCase":"toUpperCase",Me.tags=[],Me.closed=Me.closedRoot=Me.sawRoot=!1,Me.tag=Me.error=null,Me.strict=!!Y,Me.noscript=!(!Y&&!Me.opt.noscript),Me.state=H.BEGIN,Me.strictEntities=Me.opt.strictEntities,Me.ENTITIES=Object.create(Me.strictEntities?S.XML_ENTITIES:S.ENTITIES),Me.attribList=[],Me.opt.xmlns&&(Me.ns=Object.create(A)),Me.trackPosition=!1!==Me.opt.position,Me.trackPosition&&(Me.position=Me.line=Me.column=0),ne(Me,"onready")}S.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(Y){function J(){}return J.prototype=Y,new J}),Object.keys||(Object.keys=function(Y){var J=[];for(var Me in Y)Y.hasOwnProperty(Me)&&J.push(Me);return J}),j.prototype={end:function(){Oe(this)},write:function he(Y){var J=this;if(this.error)throw this.error;if(J.closed)return ve(J,"Cannot write after close. Assign an onready handler.");if(null===Y)return Oe(J);"object"==typeof Y&&(Y=Y.toString());for(var Me=0,ae="";ae=De(Y,Me++),J.c=ae,ae;)switch(J.trackPosition&&(J.position++,"\n"===ae?(J.line++,J.column=0):J.column++),J.state){case H.BEGIN:if(J.state=H.BEGIN_WHITESPACE,"\ufeff"===ae)continue;He(J,ae);continue;case H.BEGIN_WHITESPACE:He(J,ae);continue;case H.TEXT:if(J.sawRoot&&!J.closedRoot){for(var re=Me-1;ae&&"<"!==ae&&"&"!==ae;)(ae=De(Y,Me++))&&J.trackPosition&&(J.position++,"\n"===ae?(J.line++,J.column=0):J.column++);J.textNode+=Y.substring(re,Me-1)}"<"!==ae||J.sawRoot&&J.closedRoot&&!J.strict?(se(T,ae)&&(!J.sawRoot||J.closedRoot)&&Ee(J,"Text data outside of root node."),"&"===ae?J.state=H.TEXT_ENTITY:J.textNode+=ae):(J.state=H.OPEN_WAKA,J.startTagPosition=J.position);continue;case H.SCRIPT:"<"===ae?J.state=H.SCRIPT_ENDING:J.script+=ae;continue;case H.SCRIPT_ENDING:"/"===ae?J.state=H.CLOSE_TAG:(J.script+="<"+ae,J.state=H.SCRIPT);continue;case H.OPEN_WAKA:"!"===ae?(J.state=H.SGML_DECL,J.sgmlDecl=""):q(T,ae)||(q(I,ae)?(J.state=H.OPEN_TAG,J.tagName=ae):"/"===ae?(J.state=H.CLOSE_TAG,J.tagName=""):"?"===ae?(J.state=H.PROC_INST,J.procInstName=J.procInstBody=""):(Ee(J,"Unencoded <"),J.startTagPosition+1<J.position&&(ae=new Array(J.position-J.startTagPosition).join(" ")+ae),J.textNode+="<"+ae,J.state=H.TEXT));continue;case H.SGML_DECL:"[CDATA["===(J.sgmlDecl+ae).toUpperCase()?(pe(J,"onopencdata"),J.state=H.CDATA,J.sgmlDecl="",J.cdata=""):J.sgmlDecl+ae==="--"?(J.state=H.COMMENT,J.comment="",J.sgmlDecl=""):"DOCTYPE"===(J.sgmlDecl+ae).toUpperCase()?(J.state=H.DOCTYPE,(J.doctype||J.sawRoot)&&Ee(J,"Inappropriately located doctype declaration"),J.doctype="",J.sgmlDecl=""):">"===ae?(pe(J,"onsgmldeclaration",J.sgmlDecl),J.sgmlDecl="",J.state=H.TEXT):(q(B,ae)&&(J.state=H.SGML_DECL_QUOTED),J.sgmlDecl+=ae);continue;case H.SGML_DECL_QUOTED:ae===J.q&&(J.state=H.SGML_DECL,J.q=""),J.sgmlDecl+=ae;continue;case H.DOCTYPE:">"===ae?(J.state=H.TEXT,pe(J,"ondoctype",J.doctype),J.doctype=!0):(J.doctype+=ae,"["===ae?J.state=H.DOCTYPE_DTD:q(B,ae)&&(J.state=H.DOCTYPE_QUOTED,J.q=ae));continue;case H.DOCTYPE_QUOTED:J.doctype+=ae,ae===J.q&&(J.q="",J.state=H.DOCTYPE);continue;case H.DOCTYPE_DTD:J.doctype+=ae,"]"===ae?J.state=H.DOCTYPE:q(B,ae)&&(J.state=H.DOCTYPE_DTD_QUOTED,J.q=ae);continue;case H.DOCTYPE_DTD_QUOTED:J.doctype+=ae,ae===J.q&&(J.state=H.DOCTYPE_DTD,J.q="");continue;case H.COMMENT:"-"===ae?J.state=H.COMMENT_ENDING:J.comment+=ae;continue;case H.COMMENT_ENDING:"-"===ae?(J.state=H.COMMENT_ENDED,J.comment=xe(J.opt,J.comment),J.comment&&pe(J,"oncomment",J.comment),J.comment=""):(J.comment+="-"+ae,J.state=H.COMMENT);continue;case H.COMMENT_ENDED:">"!==ae?(Ee(J,"Malformed comment"),J.comment+="--"+ae,J.state=H.COMMENT):J.state=H.TEXT;continue;case H.CDATA:"]"===ae?J.state=H.CDATA_ENDING:J.cdata+=ae;continue;case H.CDATA_ENDING:"]"===ae?J.state=H.CDATA_ENDING_2:(J.cdata+="]"+ae,J.state=H.CDATA);continue;case H.CDATA_ENDING_2:">"===ae?(J.cdata&&pe(J,"oncdata",J.cdata),pe(J,"onclosecdata"),J.cdata="",J.state=H.TEXT):"]"===ae?J.cdata+="]":(J.cdata+="]]"+ae,J.state=H.CDATA);continue;case H.PROC_INST:"?"===ae?J.state=H.PROC_INST_ENDING:q(T,ae)?J.state=H.PROC_INST_BODY:J.procInstName+=ae;continue;case H.PROC_INST_BODY:if(!J.procInstBody&&q(T,ae))continue;"?"===ae?J.state=H.PROC_INST_ENDING:J.procInstBody+=ae;continue;case H.PROC_INST_ENDING:">"===ae?(pe(J,"onprocessinginstruction",{name:J.procInstName,body:J.procInstBody}),J.procInstName=J.procInstBody="",J.state=H.TEXT):(J.procInstBody+="?"+ae,J.state=H.PROC_INST_BODY);continue;case H.OPEN_TAG:q(G,ae)?J.tagName+=ae:(Ie(J),">"===ae?ke(J):"/"===ae?J.state=H.OPEN_TAG_SLASH:(se(T,ae)&&Ee(J,"Invalid character in tag name"),J.state=H.ATTRIB));continue;case H.OPEN_TAG_SLASH:">"===ae?(ke(J,!0),Be(J)):(Ee(J,"Forward-slash in opening tag not followed by >"),J.state=H.ATTRIB);continue;case H.ATTRIB:if(q(T,ae))continue;">"===ae?ke(J):"/"===ae?J.state=H.OPEN_TAG_SLASH:q(I,ae)?(J.attribName=ae,J.attribValue="",J.state=H.ATTRIB_NAME):Ee(J,"Invalid attribute name");continue;case H.ATTRIB_NAME:"="===ae?J.state=H.ATTRIB_VALUE:">"===ae?(Ee(J,"Attribute without value"),J.attribValue=J.attribName,Pe(J),ke(J)):q(T,ae)?J.state=H.ATTRIB_NAME_SAW_WHITE:q(G,ae)?J.attribName+=ae:Ee(J,"Invalid attribute name");continue;case H.ATTRIB_NAME_SAW_WHITE:if("="===ae)J.state=H.ATTRIB_VALUE;else{if(q(T,ae))continue;Ee(J,"Attribute without value"),J.tag.attributes[J.attribName]="",J.attribValue="",pe(J,"onattribute",{name:J.attribName,value:""}),J.attribName="",">"===ae?ke(J):q(I,ae)?(J.attribName=ae,J.state=H.ATTRIB_NAME):(Ee(J,"Invalid attribute name"),J.state=H.ATTRIB)}continue;case H.ATTRIB_VALUE:if(q(T,ae))continue;q(B,ae)?(J.q=ae,J.state=H.ATTRIB_VALUE_QUOTED):(Ee(J,"Unquoted attribute value"),J.state=H.ATTRIB_VALUE_UNQUOTED,J.attribValue=ae);continue;case H.ATTRIB_VALUE_QUOTED:if(ae!==J.q){"&"===ae?J.state=H.ATTRIB_VALUE_ENTITY_Q:J.attribValue+=ae;continue}Pe(J),J.q="",J.state=H.ATTRIB_VALUE_CLOSED;continue;case H.ATTRIB_VALUE_CLOSED:q(T,ae)?J.state=H.ATTRIB:">"===ae?ke(J):"/"===ae?J.state=H.OPEN_TAG_SLASH:q(I,ae)?(Ee(J,"No whitespace between attributes"),J.attribName=ae,J.attribValue="",J.state=H.ATTRIB_NAME):Ee(J,"Invalid attribute name");continue;case H.ATTRIB_VALUE_UNQUOTED:if(se(x,ae)){"&"===ae?J.state=H.ATTRIB_VALUE_ENTITY_U:J.attribValue+=ae;continue}Pe(J),">"===ae?ke(J):J.state=H.ATTRIB;continue;case H.CLOSE_TAG:if(J.tagName)">"===ae?Be(J):q(G,ae)?J.tagName+=ae:J.script?(J.script+="</"+J.tagName,J.tagName="",J.state=H.SCRIPT):(se(T,ae)&&Ee(J,"Invalid tagname in closing tag"),J.state=H.CLOSE_TAG_SAW_WHITE);else{if(q(T,ae))continue;se(I,ae)?J.script?(J.script+="</"+ae,J.state=H.SCRIPT):Ee(J,"Invalid tagname in closing tag."):J.tagName=ae}continue;case H.CLOSE_TAG_SAW_WHITE:if(q(T,ae))continue;">"===ae?Be(J):Ee(J,"Invalid characters in closing tag");continue;case H.TEXT_ENTITY:case H.ATTRIB_VALUE_ENTITY_Q:case H.ATTRIB_VALUE_ENTITY_U:var te,X;switch(J.state){case H.TEXT_ENTITY:te=H.TEXT,X="textNode";break;case H.ATTRIB_VALUE_ENTITY_Q:te=H.ATTRIB_VALUE_QUOTED,X="attribValue";break;case H.ATTRIB_VALUE_ENTITY_U:te=H.ATTRIB_VALUE_UNQUOTED,X="attribValue"}";"===ae?(J[X]+=qe(J),J.entity="",J.state=te):q(J.entity.length?de:ee,ae)?J.entity+=ae:(Ee(J,"Invalid character in entity name"),J[X]+="&"+J.entity+ae,J.entity="",J.state=te);continue;default:throw new Error(J,"Unknown state: "+J.state)}return J.position>=J.bufferCheckPosition&&function U(Y){for(var J=Math.max(S.MAX_BUFFER_LENGTH,10),Me=0,ae=0,re=R.length;ae<re;ae++){var z=Y[R[ae]].length;if(z>J)switch(R[ae]){case"textNode":me(Y);break;case"cdata":pe(Y,"oncdata",Y.cdata),Y.cdata="";break;case"script":pe(Y,"onscript",Y.script),Y.script="";break;default:ve(Y,"Max buffer length exceeded: "+R[ae])}Me=Math.max(Me,z)}Y.bufferCheckPosition=S.MAX_BUFFER_LENGTH-Me+Y.position}(J),J},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function b(Y){me(Y),""!==Y.cdata&&(pe(Y,"oncdata",Y.cdata),Y.cdata=""),""!==Y.script&&(pe(Y,"onscript",Y.script),Y.script="")}(this)}};try{f=r("./node_modules/stream-browserify/index.js").Stream}catch(Y){f=function(){}}var c=S.EVENTS.filter(function(Y){return"error"!==Y&&"end"!==Y});function v(Y,J){if(!(this instanceof v))return new v(Y,J);f.apply(this),this._parser=new j(Y,J),this.writable=!0,this.readable=!0;var Me=this;this._parser.onend=function(){Me.emit("end")},this._parser.onerror=function(ae){Me.emit("error",ae),Me._parser.error=null},this._decoder=null,c.forEach(function(ae){Object.defineProperty(Me,"on"+ae,{get:function(){return Me._parser["on"+ae]},set:function(re){if(!re)return Me.removeAllListeners(ae),Me._parser["on"+ae]=re,re;Me.on(ae,re)},enumerable:!0,configurable:!1})})}(v.prototype=Object.create(f.prototype,{constructor:{value:v}})).write=function(Y){if("function"==typeof e&&"function"==typeof e.isBuffer&&e.isBuffer(Y)){if(!this._decoder){var J=r("./node_modules/string_decoder/lib/string_decoder.js").StringDecoder;this._decoder=new J("utf8")}Y=this._decoder.write(Y)}return this._parser.write(Y.toString()),this.emit("data",Y),!0},v.prototype.end=function(Y){return Y&&Y.length&&this.write(Y),this._parser.end(),!0},v.prototype.on=function(Y,J){var Me=this;return!Me._parser["on"+Y]&&-1!==c.indexOf(Y)&&(Me._parser["on"+Y]=function(){var ae=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);ae.splice(0,0,Y),Me.emit.apply(Me,ae)}),f.prototype.on.call(Me,Y,J)};var T="\r\n\t ",k="0124356789",N="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",B="'\"",x=T+">",D="http://www.w3.org/XML/1998/namespace",y="http://www.w3.org/2000/xmlns/",A={xml:D,xmlns:y};T=ue(T),k=ue(k),N=ue(N);var I=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,G=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,ee=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,de=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function ue(Y){return Y.split("").reduce(function(J,Me){return J[Me]=!0,J},{})}function q(Y,J){return function Te(Y){return"[object RegExp]"===Object.prototype.toString.call(Y)}(Y)?!!J.match(Y):Y[J]}function se(Y,J){return!q(Y,J)}B=ue(B),x=ue(x);var Y,J,Me,H=0;for(var ce in S.STATE={BEGIN:H++,BEGIN_WHITESPACE:H++,TEXT:H++,TEXT_ENTITY:H++,OPEN_WAKA:H++,SGML_DECL:H++,SGML_DECL_QUOTED:H++,DOCTYPE:H++,DOCTYPE_QUOTED:H++,DOCTYPE_DTD:H++,DOCTYPE_DTD_QUOTED:H++,COMMENT_STARTING:H++,COMMENT:H++,COMMENT_ENDING:H++,COMMENT_ENDED:H++,CDATA:H++,CDATA_ENDING:H++,CDATA_ENDING_2:H++,PROC_INST:H++,PROC_INST_BODY:H++,PROC_INST_ENDING:H++,OPEN_TAG:H++,OPEN_TAG_SLASH:H++,ATTRIB:H++,ATTRIB_NAME:H++,ATTRIB_NAME_SAW_WHITE:H++,ATTRIB_VALUE:H++,ATTRIB_VALUE_QUOTED:H++,ATTRIB_VALUE_CLOSED:H++,ATTRIB_VALUE_UNQUOTED:H++,ATTRIB_VALUE_ENTITY_Q:H++,ATTRIB_VALUE_ENTITY_U:H++,CLOSE_TAG:H++,CLOSE_TAG_SAW_WHITE:H++,SCRIPT:H++,SCRIPT_ENDING:H++},S.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},S.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(S.ENTITIES).forEach(function(Y){var J=S.ENTITIES[Y],Me="number"==typeof J?String.fromCharCode(J):J;S.ENTITIES[Y]=Me}),S.STATE)S.STATE[S.STATE[ce]]=ce;function ne(Y,J,Me){Y[J]&&Y[J](Me)}function pe(Y,J,Me){Y.textNode&&me(Y),ne(Y,J,Me)}function me(Y){Y.textNode=xe(Y.opt,Y.textNode),Y.textNode&&ne(Y,"ontext",Y.textNode),Y.textNode=""}function xe(Y,J){return Y.trim&&(J=J.trim()),Y.normalize&&(J=J.replace(/\s+/g," ")),J}function ve(Y,J){return me(Y),Y.trackPosition&&(J+="\nLine: "+Y.line+"\nColumn: "+Y.column+"\nChar: "+Y.c),J=new Error(J),Y.error=J,ne(Y,"onerror",J),Y}function Oe(Y){return Y.sawRoot&&!Y.closedRoot&&Ee(Y,"Unclosed root tag"),Y.state!==H.BEGIN&&Y.state!==H.BEGIN_WHITESPACE&&Y.state!==H.TEXT&&ve(Y,"Unexpected end"),me(Y),Y.c="",Y.closed=!0,ne(Y,"onend"),j.call(Y,Y.strict,Y.opt),Y}function Ee(Y,J){if("object"!=typeof Y||!(Y instanceof j))throw new Error("bad call to strictFail");Y.strict&&ve(Y,J)}function Ie(Y){Y.strict||(Y.tagName=Y.tagName[Y.looseCase]());var J=Y.tags[Y.tags.length-1]||Y,Me=Y.tag={name:Y.tagName,attributes:{}};Y.opt.xmlns&&(Me.ns=J.ns),Y.attribList.length=0,pe(Y,"onopentagstart",Me)}function Re(Y,J){var ae=Y.indexOf(":")<0?["",Y]:Y.split(":"),re=ae[0],z=ae[1];return J&&"xmlns"===Y&&(re="xmlns",z=""),{prefix:re,local:z}}function Pe(Y){if(Y.strict||(Y.attribName=Y.attribName[Y.looseCase]()),-1!==Y.attribList.indexOf(Y.attribName)||Y.tag.attributes.hasOwnProperty(Y.attribName))Y.attribName=Y.attribValue="";else{if(Y.opt.xmlns){var J=Re(Y.attribName,!0),ae=J.local;if("xmlns"===J.prefix)if("xml"===ae&&Y.attribValue!==D)Ee(Y,"xml: prefix must be bound to "+D+"\nActual: "+Y.attribValue);else if("xmlns"===ae&&Y.attribValue!==y)Ee(Y,"xmlns: prefix must be bound to "+y+"\nActual: "+Y.attribValue);else{var re=Y.tag,z=Y.tags[Y.tags.length-1]||Y;re.ns===z.ns&&(re.ns=Object.create(z.ns)),re.ns[ae]=Y.attribValue}Y.attribList.push([Y.attribName,Y.attribValue])}else Y.tag.attributes[Y.attribName]=Y.attribValue,pe(Y,"onattribute",{name:Y.attribName,value:Y.attribValue});Y.attribName=Y.attribValue=""}}function ke(Y,J){if(Y.opt.xmlns){var Me=Y.tag,ae=Re(Y.tagName);Me.prefix=ae.prefix,Me.local=ae.local,Me.uri=Me.ns[ae.prefix]||"",Me.prefix&&!Me.uri&&(Ee(Y,"Unbound namespace prefix: "+JSON.stringify(Y.tagName)),Me.uri=ae.prefix),Me.ns&&(Y.tags[Y.tags.length-1]||Y).ns!==Me.ns&&Object.keys(Me.ns).forEach(function(et){pe(Y,"onopennamespace",{prefix:et,uri:Me.ns[et]})});for(var z=0,te=Y.attribList.length;z<te;z++){var X=Y.attribList[z],Z=X[0],W=X[1],oe=Re(Z,!0),be=oe.prefix,We=""===be?"":Me.ns[be]||"",at={name:Z,value:W,prefix:be,local:oe.local,uri:We};be&&"xmlns"!==be&&!We&&(Ee(Y,"Unbound namespace prefix: "+JSON.stringify(be)),at.uri=be),Y.tag.attributes[Z]=at,pe(Y,"onattribute",at)}Y.attribList.length=0}Y.tag.isSelfClosing=!!J,Y.sawRoot=!0,Y.tags.push(Y.tag),pe(Y,"onopentag",Y.tag),J||(Y.state=Y.noscript||"script"!==Y.tagName.toLowerCase()?H.TEXT:H.SCRIPT,Y.tag=null,Y.tagName=""),Y.attribName=Y.attribValue="",Y.attribList.length=0}function Be(Y){if(!Y.tagName)return Ee(Y,"Weird empty close tag."),Y.textNode+="</>",void(Y.state=H.TEXT);if(Y.script){if("script"!==Y.tagName)return Y.script+="</"+Y.tagName+">",Y.tagName="",void(Y.state=H.SCRIPT);pe(Y,"onscript",Y.script),Y.script=""}var J=Y.tags.length,Me=Y.tagName;Y.strict||(Me=Me[Y.looseCase]());for(var ae=Me;J--&&Y.tags[J].name!==ae;)Ee(Y,"Unexpected close tag");if(J<0)return Ee(Y,"Unmatched closing tag: "+Y.tagName),Y.textNode+="</"+Y.tagName+">",void(Y.state=H.TEXT);Y.tagName=Me;for(var z=Y.tags.length;z-- >J;){var te=Y.tag=Y.tags.pop();Y.tagName=Y.tag.name,pe(Y,"onclosetag",Y.tagName);var X={};for(var Z in te.ns)X[Z]=te.ns[Z];Y.opt.xmlns&&te.ns!==(Y.tags[Y.tags.length-1]||Y).ns&&Object.keys(te.ns).forEach(function(oe){pe(Y,"onclosenamespace",{prefix:oe,uri:te.ns[oe]})})}0===J&&(Y.closedRoot=!0),Y.tagName=Y.attribValue=Y.attribName="",Y.attribList.length=0,Y.state=H.TEXT}function qe(Y){var ae,J=Y.entity,Me=J.toLowerCase(),re="";return Y.ENTITIES[J]?Y.ENTITIES[J]:Y.ENTITIES[Me]?Y.ENTITIES[Me]:("#"===(J=Me).charAt(0)&&("x"===J.charAt(1)?(J=J.slice(2),re=(ae=parseInt(J,16)).toString(16)):(J=J.slice(1),re=(ae=parseInt(J,10)).toString(10))),J=J.replace(/^0+/,""),re.toLowerCase()!==J?(Ee(Y,"Invalid character entity"),"&"+Y.entity+";"):String.fromCodePoint(ae))}function He(Y,J){"<"===J?(Y.state=H.OPEN_WAKA,Y.startTagPosition=Y.position):se(T,J)&&(Ee(Y,"Non-whitespace before first tag."),Y.textNode=J,Y.state=H.TEXT)}function De(Y,J){var Me="";return J<Y.length&&(Me=Y.charAt(J)),Me}H=S.STATE,String.fromCodePoint||(Y=String.fromCharCode,J=Math.floor,Me=function(){var ae=16384,re=[],X=-1,Z=arguments.length;if(!Z)return"";for(var W="";++X<Z;){var oe=Number(arguments[X]);if(!isFinite(oe)||oe<0||oe>1114111||J(oe)!==oe)throw RangeError("Invalid code point: "+oe);oe<=65535?re.push(oe):re.push(55296+((oe-=65536)>>10),oe%1024+56320),(X+1===Z||re.length>ae)&&(W+=Y.apply(null,re),re.length=0)}return W},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:Me,configurable:!0,writable:!0}):String.fromCodePoint=Me)}(O)}).call(this,r("./node_modules/buffer/index.js").Buffer)},"./node_modules/setimmediate/setImmediate.js":function(Ve,O,r){(function(e,S){!function(R,j){"use strict";if(!R.setImmediate){var c,U=1,L={},b=!1,f=R.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(R);y=y&&y.setTimeout?y:R,"[object process]"==={}.toString.call(R.process)?function N(){c=function(A){S.nextTick(function(){k(A)})}}():function B(){if(R.postMessage&&!R.importScripts){var A=!0,I=R.onmessage;return R.onmessage=function(){A=!1},R.postMessage("","*"),R.onmessage=I,A}}()?function x(){var A="setImmediate$"+Math.random()+"$",I=function(G){G.source===R&&"string"==typeof G.data&&0===G.data.indexOf(A)&&k(+G.data.slice(A.length))};R.addEventListener?R.addEventListener("message",I,!1):R.attachEvent("onmessage",I),c=function(G){R.postMessage(A+G,"*")}}():R.MessageChannel?function P(){var A=new MessageChannel;A.port1.onmessage=function(I){k(I.data)},c=function(I){A.port2.postMessage(I)}}():f&&"onreadystatechange"in f.createElement("script")?function _(){var A=f.documentElement;c=function(I){var G=f.createElement("script");G.onreadystatechange=function(){k(I),G.onreadystatechange=null,A.removeChild(G),G=null},A.appendChild(G)}}():function D(){c=function(A){setTimeout(k,0,A)}}(),y.setImmediate=function g(A){"function"!=typeof A&&(A=new Function(""+A));for(var I=new Array(arguments.length-1),G=0;G<I.length;G++)I[G]=arguments[G+1];return L[U]={callback:A,args:I},c(U),U++},y.clearImmediate=v}function v(A){delete L[A]}function k(A){if(b)setTimeout(k,0,A);else{var I=L[A];if(I){b=!0;try{!function T(A){var I=A.callback,G=A.args;switch(G.length){case 0:I();break;case 1:I(G[0]);break;case 2:I(G[0],G[1]);break;case 3:I(G[0],G[1],G[2]);break;default:I.apply(void 0,G)}}(I)}finally{v(A),b=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,r("./node_modules/webpack/buildin/global.js"),r("./node_modules/process/browser.js"))},"./node_modules/stream-browserify/index.js":function(Ve,O,r){Ve.exports=R;var e=r("./node_modules/events/events.js").EventEmitter;function R(){e.call(this)}r("./node_modules/inherits/inherits_browser.js")(R,e),R.Readable=r("./node_modules/readable-stream/readable-browser.js"),R.Writable=r("./node_modules/readable-stream/writable-browser.js"),R.Duplex=r("./node_modules/readable-stream/duplex-browser.js"),R.Transform=r("./node_modules/readable-stream/transform.js"),R.PassThrough=r("./node_modules/readable-stream/passthrough.js"),R.Stream=R,R.prototype.pipe=function(j,U){var L=this;function b(N){j.writable&&!1===j.write(N)&&L.pause&&L.pause()}function f(){L.readable&&L.resume&&L.resume()}L.on("data",b),j.on("drain",f),!j._isStdio&&(!U||!1!==U.end)&&(L.on("end",g),L.on("close",v));var c=!1;function g(){c||(c=!0,j.end())}function v(){c||(c=!0,"function"==typeof j.destroy&&j.destroy())}function T(N){if(k(),0===e.listenerCount(this,"error"))throw N}function k(){L.removeListener("data",b),j.removeListener("drain",f),L.removeListener("end",g),L.removeListener("close",v),L.removeListener("error",T),j.removeListener("error",T),L.removeListener("end",k),L.removeListener("close",k),j.removeListener("close",k)}return L.on("error",T),j.on("error",T),L.on("end",k),L.on("close",k),j.on("close",k),j.emit("pipe",L),j}},"./node_modules/string_decoder/lib/string_decoder.js":function(Ve,O,r){"use strict";var e=r("./node_modules/safe-buffer/index.js").Buffer,S=e.isEncoding||function(_){switch((_=""+_)&&_.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function U(_){var D;switch(this.encoding=function j(_){var D=function R(_){if(!_)return"utf8";for(var D;;)switch(_){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return _;default:if(D)return;_=(""+_).toLowerCase(),D=!0}}(_);if("string"!=typeof D&&(e.isEncoding===S||!S(_)))throw new Error("Unknown encoding: "+_);return D||_}(_),this.encoding){case"utf16le":this.text=T,this.end=k,D=4;break;case"utf8":this.fillLast=c,D=4;break;case"base64":this.text=N,this.end=B,D=3;break;default:return this.write=x,void(this.end=P)}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(D)}function L(_){return _<=127?0:_>>5==6?2:_>>4==14?3:_>>3==30?4:_>>6==2?-1:-2}function c(_){var D=this.lastTotal-this.lastNeed,y=function f(_,D,y){if(128!=(192&D[0]))return _.lastNeed=0,"\ufffd";if(_.lastNeed>1&&D.length>1){if(128!=(192&D[1]))return _.lastNeed=1,"\ufffd";if(_.lastNeed>2&&D.length>2&&128!=(192&D[2]))return _.lastNeed=2,"\ufffd"}}(this,_);return void 0!==y?y:this.lastNeed<=_.length?(_.copy(this.lastChar,D,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(_.copy(this.lastChar,D,0,_.length),void(this.lastNeed-=_.length))}function T(_,D){if((_.length-D)%2==0){var y=_.toString("utf16le",D);if(y){var A=y.charCodeAt(y.length-1);if(A>=55296&&A<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=_[_.length-2],this.lastChar[1]=_[_.length-1],y.slice(0,-1)}return y}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=_[_.length-1],_.toString("utf16le",D,_.length-1)}function k(_){var D=_&&_.length?this.write(_):"";return this.lastNeed?D+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):D}function N(_,D){var y=(_.length-D)%3;return 0===y?_.toString("base64",D):(this.lastNeed=3-y,this.lastTotal=3,1===y?this.lastChar[0]=_[_.length-1]:(this.lastChar[0]=_[_.length-2],this.lastChar[1]=_[_.length-1]),_.toString("base64",D,_.length-y))}function B(_){var D=_&&_.length?this.write(_):"";return this.lastNeed?D+this.lastChar.toString("base64",0,3-this.lastNeed):D}function x(_){return _.toString(this.encoding)}function P(_){return _&&_.length?this.write(_):""}O.StringDecoder=U,U.prototype.write=function(_){if(0===_.length)return"";var D,y;if(this.lastNeed){if(void 0===(D=this.fillLast(_)))return"";y=this.lastNeed,this.lastNeed=0}else y=0;return y<_.length?D?D+this.text(_,y):this.text(_,y):D||""},U.prototype.end=function v(_){var D=_&&_.length?this.write(_):"";return this.lastNeed?D+"\ufffd":D},U.prototype.text=function g(_,D){var y=function b(_,D,y){var A=D.length-1;if(A<y)return 0;var I=L(D[A]);return I>=0?(I>0&&(_.lastNeed=I-1),I):--A<y||-2===I?0:(I=L(D[A]))>=0?(I>0&&(_.lastNeed=I-2),I):--A<y||-2===I?0:(I=L(D[A]))>=0?(I>0&&(2===I?I=0:_.lastNeed=I-3),I):0}(this,_,D);if(!this.lastNeed)return _.toString("utf8",D);this.lastTotal=y;var A=_.length-(y-this.lastNeed);return _.copy(this.lastChar,0,A),_.toString("utf8",D,A)},U.prototype.fillLast=function(_){if(this.lastNeed<=_.length)return _.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);_.copy(this.lastChar,this.lastTotal-this.lastNeed,0,_.length),this.lastNeed-=_.length}},"./node_modules/timers-browserify/main.js":function(Ve,O,r){(function(e){var S=void 0!==e&&e||"undefined"!=typeof self&&self||window,R=Function.prototype.apply;function j(U,L){this._id=U,this._clearFn=L}O.setTimeout=function(){return new j(R.call(setTimeout,S,arguments),clearTimeout)},O.setInterval=function(){return new j(R.call(setInterval,S,arguments),clearInterval)},O.clearTimeout=O.clearInterval=function(U){U&&U.close()},j.prototype.unref=j.prototype.ref=function(){},j.prototype.close=function(){this._clearFn.call(S,this._id)},O.enroll=function(U,L){clearTimeout(U._idleTimeoutId),U._idleTimeout=L},O.unenroll=function(U){clearTimeout(U._idleTimeoutId),U._idleTimeout=-1},O._unrefActive=O.active=function(U){clearTimeout(U._idleTimeoutId);var L=U._idleTimeout;L>=0&&(U._idleTimeoutId=setTimeout(function(){U._onTimeout&&U._onTimeout()},L))},r("./node_modules/setimmediate/setImmediate.js"),O.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,O.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/ua-parser-js/src/ua-parser.js":function(Ve,O,r){var e;!function(S,R){"use strict";var b="function",f="undefined",c="object",g="string",T="model",k="name",N="type",B="vendor",x="version",P="architecture",_="console",D="mobile",y="tablet",A="smarttv",I="wearable",G="embedded",de="Amazon",ue="Apple",q="BlackBerry",se="Browser",H="Chrome",ne="Firefox",pe="Google",ve="Microsoft",Oe="Motorola",Ee="Opera",Ie="Samsung",Pe="Sony",ke="Xiaomi",Be="Zebra",qe="Facebook",De=function(be){for(var Fe={},We=0;We<be.length;We++)Fe[be[We].toUpperCase()]=be[We];return Fe},he=function(be,Fe){return typeof be===g&&-1!==Y(Fe).indexOf(Y(be))},Y=function(be){return be.toLowerCase()},Me=function(be,Fe){if(typeof be===g)return be=be.replace(/^\s\s*/,"").replace(/\s\s*$/,""),typeof Fe===f?be:be.substring(0,350)},ae=function(be,Fe){for(var at,et,ut,Ot,tt,Et,We=0;We<Fe.length&&!tt;){var Yt=Fe[We],vt=Fe[We+1];for(at=et=0;at<Yt.length&&!tt;)if(tt=Yt[at++].exec(be))for(ut=0;ut<vt.length;ut++)Et=tt[++et],typeof(Ot=vt[ut])===c&&Ot.length>0?2===Ot.length?this[Ot[0]]=typeof Ot[1]==b?Ot[1].call(this,Et):Ot[1]:3===Ot.length?this[Ot[0]]=typeof Ot[1]!==b||Ot[1].exec&&Ot[1].test?Et?Et.replace(Ot[1],Ot[2]):R:Et?Ot[1].call(this,Et,Ot[2]):R:4===Ot.length&&(this[Ot[0]]=Et?Ot[3].call(this,Et.replace(Ot[1],Ot[2])):R):this[Ot]=Et||R;We+=2}},re=function(be,Fe){for(var We in Fe)if(typeof Fe[We]===c&&Fe[We].length>0){for(var at=0;at<Fe[We].length;at++)if(he(Fe[We][at],be))return"?"===We?R:We}else if(he(Fe[We],be))return"?"===We?R:We;return be},te={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},X={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[x,[k,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[x,[k,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[k,x],[/opios[\/ ]+([\w\.]+)/i],[x,[k,Ee+" Mini"]],[/\bopr\/([\w\.]+)/i],[x,[k,Ee]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[k,x],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[x,[k,"UC"+se]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[x,[k,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[x,[k,"WeChat"]],[/konqueror\/([\w\.]+)/i],[x,[k,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[x,[k,"IE"]],[/yabrowser\/([\w\.]+)/i],[x,[k,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[k,/(.+)/,"$1 Secure "+se],x],[/\bfocus\/([\w\.]+)/i],[x,[k,ne+" Focus"]],[/\bopt\/([\w\.]+)/i],[x,[k,Ee+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[x,[k,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[x,[k,"Dolphin"]],[/coast\/([\w\.]+)/i],[x,[k,Ee+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[x,[k,"MIUI "+se]],[/fxios\/([-\w\.]+)/i],[x,[k,ne]],[/\bqihu|(qi?ho?o?|360)browser/i],[[k,"360 "+se]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[k,/(.+)/,"$1 "+se],x],[/(comodo_dragon)\/([\w\.]+)/i],[[k,/_/g," "],x],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[k,x],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[k],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[k,qe],x],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[k,x],[/\bgsa\/([\w\.]+) .*safari\//i],[x,[k,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[x,[k,H+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[k,H+" WebView"],x],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[x,[k,"Android "+se]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[k,x],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[x,[k,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[x,k],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[k,[x,re,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[k,x],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[k,"Netscape"],x],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[x,[k,ne+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[k,x]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[P,"amd64"]],[/(ia32(?=;))/i],[[P,Y]],[/((?:i[346]|x)86)[;\)]/i],[[P,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[P,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[P,"armhf"]],[/windows (ce|mobile); ppc;/i],[[P,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[P,/ower/,"",Y]],[/(sun4\w)[;\)]/i],[[P,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[P,Y]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[T,[B,Ie],[N,y]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[T,[B,Ie],[N,D]],[/\((ip(?:hone|od)[\w ]*);/i],[T,[B,ue],[N,D]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[T,[B,ue],[N,y]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[T,[B,"Huawei"],[N,y]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[T,[B,"Huawei"],[N,D]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[T,/_/g," "],[B,ke],[N,D]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[T,/_/g," "],[B,ke],[N,y]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[T,[B,"OPPO"],[N,D]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[T,[B,"Vivo"],[N,D]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[T,[B,"Realme"],[N,D]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[T,[B,Oe],[N,D]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[T,[B,Oe],[N,y]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[T,[B,"LG"],[N,y]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[T,[B,"LG"],[N,D]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[T,[B,"Lenovo"],[N,y]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[T,/_/g," "],[B,"Nokia"],[N,D]],[/(pixel c)\b/i],[T,[B,pe],[N,y]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[T,[B,pe],[N,D]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[T,[B,Pe],[N,D]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[T,"Xperia Tablet"],[B,Pe],[N,y]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[T,[B,"OnePlus"],[N,D]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[T,[B,de],[N,y]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[T,/(.+)/g,"Fire Phone $1"],[B,de],[N,D]],[/(playbook);[-\w\),; ]+(rim)/i],[T,B,[N,y]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[T,[B,q],[N,D]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[T,[B,"ASUS"],[N,y]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[T,[B,"ASUS"],[N,D]],[/(nexus 9)/i],[T,[B,"HTC"],[N,y]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[B,[T,/_/g," "],[N,D]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[T,[B,"Acer"],[N,y]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[T,[B,"Meizu"],[N,D]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[T,[B,"Sharp"],[N,D]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[B,T,[N,D]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[B,T,[N,y]],[/(surface duo)/i],[T,[B,ve],[N,y]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[T,[B,"Fairphone"],[N,D]],[/(u304aa)/i],[T,[B,"AT&T"],[N,D]],[/\bsie-(\w*)/i],[T,[B,"Siemens"],[N,D]],[/\b(rct\w+) b/i],[T,[B,"RCA"],[N,y]],[/\b(venue[\d ]{2,7}) b/i],[T,[B,"Dell"],[N,y]],[/\b(q(?:mv|ta)\w+) b/i],[T,[B,"Verizon"],[N,y]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[T,[B,"Barnes & Noble"],[N,y]],[/\b(tm\d{3}\w+) b/i],[T,[B,"NuVision"],[N,y]],[/\b(k88) b/i],[T,[B,"ZTE"],[N,y]],[/\b(nx\d{3}j) b/i],[T,[B,"ZTE"],[N,D]],[/\b(gen\d{3}) b.+49h/i],[T,[B,"Swiss"],[N,D]],[/\b(zur\d{3}) b/i],[T,[B,"Swiss"],[N,y]],[/\b((zeki)?tb.*\b) b/i],[T,[B,"Zeki"],[N,y]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[B,"Dragon Touch"],T,[N,y]],[/\b(ns-?\w{0,9}) b/i],[T,[B,"Insignia"],[N,y]],[/\b((nxa|next)-?\w{0,9}) b/i],[T,[B,"NextBook"],[N,y]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[B,"Voice"],T,[N,D]],[/\b(lvtel\-)?(v1[12]) b/i],[[B,"LvTel"],T,[N,D]],[/\b(ph-1) /i],[T,[B,"Essential"],[N,D]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[T,[B,"Envizen"],[N,y]],[/\b(trio[-\w\. ]+) b/i],[T,[B,"MachSpeed"],[N,y]],[/\btu_(1491) b/i],[T,[B,"Rotor"],[N,y]],[/(shield[\w ]+) b/i],[T,[B,"Nvidia"],[N,y]],[/(sprint) (\w+)/i],[B,T,[N,D]],[/(kin\.[onetw]{3})/i],[[T,/\./g," "],[B,ve],[N,D]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[T,[B,Be],[N,y]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[T,[B,Be],[N,D]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[B,T,[N,_]],[/droid.+; (shield) bui/i],[T,[B,"Nvidia"],[N,_]],[/(playstation [345portablevi]+)/i],[T,[B,Pe],[N,_]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[T,[B,ve],[N,_]],[/smart-tv.+(samsung)/i],[B,[N,A]],[/hbbtv.+maple;(\d+)/i],[[T,/^/,"SmartTV"],[B,Ie],[N,A]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[B,"LG"],[N,A]],[/(apple) ?tv/i],[B,[T,ue+" TV"],[N,A]],[/crkey/i],[[T,H+"cast"],[B,pe],[N,A]],[/droid.+aft(\w)( bui|\))/i],[T,[B,de],[N,A]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[T,[B,"Sharp"],[N,A]],[/(bravia[\w ]+)( bui|\))/i],[T,[B,Pe],[N,A]],[/(mitv-\w{5}) bui/i],[T,[B,ke],[N,A]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[B,Me],[T,Me],[N,A]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[N,A]],[/((pebble))app/i],[B,T,[N,I]],[/droid.+; (glass) \d/i],[T,[B,pe],[N,I]],[/droid.+; (wt63?0{2,3})\)/i],[T,[B,Be],[N,I]],[/(quest( 2)?)/i],[T,[B,qe],[N,I]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[B,[N,G]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[T,[N,D]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[T,[N,y]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[N,y]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[N,D]],[/(android[-\w\. ]{0,9});.+buil/i],[T,[B,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[x,[k,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[x,[k,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[k,x],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[x,k]],os:[[/microsoft (windows) (vista|xp)/i],[k,x],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[k,[x,re,te]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[k,"Windows"],[x,re,te]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[x,/_/g,"."],[k,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[k,"Mac OS"],[x,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[x,k],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[k,x],[/\(bb(10);/i],[x,[k,q]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[x,[k,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[x,[k,ne+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[x,[k,"webOS"]],[/crkey\/([\d\.]+)/i],[x,[k,H+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[k,"Chromium OS"],x],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[k,x],[/(sunos) ?([\w\.\d]*)/i],[[k,"Solaris"],x],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[k,x]]},Z=function(be,Fe){if(typeof be===c&&(Fe=be,be=R),!(this instanceof Z))return new Z(be,Fe).getResult();var We=be||(typeof S!==f&&S.navigator&&S.navigator.userAgent?S.navigator.userAgent:""),at=Fe?function(be,Fe){var We={};for(var at in be)We[at]=Fe[at]&&Fe[at].length%2==0?Fe[at].concat(be[at]):be[at];return We}(X,Fe):X;return this.getBrowser=function(){var et={};return et[k]=R,et[x]=R,ae.call(et,We,at.browser),et.major=function(be){return typeof be===g?be.replace(/[^\d\.]/g,"").split(".")[0]:R}(et.version),et},this.getCPU=function(){var et={};return et[P]=R,ae.call(et,We,at.cpu),et},this.getDevice=function(){var et={};return et[B]=R,et[T]=R,et[N]=R,ae.call(et,We,at.device),et},this.getEngine=function(){var et={};return et[k]=R,et[x]=R,ae.call(et,We,at.engine),et},this.getOS=function(){var et={};return et[k]=R,et[x]=R,ae.call(et,We,at.os),et},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return We},this.setUA=function(et){return We=typeof et===g&&et.length>350?Me(et,350):et,this},this.setUA(We),this};Z.VERSION="1.0.32",Z.BROWSER=De([k,x,"major"]),Z.CPU=De([P]),Z.DEVICE=De([T,B,N,_,D,A,y,I,G]),Z.ENGINE=Z.OS=De([k,x]),typeof O!==f?(typeof Ve!==f&&Ve.exports&&(O=Ve.exports=Z),O.UAParser=Z):r("./node_modules/webpack/buildin/amd-options.js")?(e=function(){return Z}.call(O,r,O,Ve))!==R&&(Ve.exports=e):typeof S!==f&&(S.UAParser=Z);var W=typeof S!==f&&(S.jQuery||S.Zepto);if(W&&!W.ua){var oe=new Z;W.ua=oe.getResult(),W.ua.get=function(){return oe.getUA()},W.ua.set=function(be){oe.setUA(be);var Fe=oe.getResult();for(var We in Fe)W.ua[We]=Fe[We]}}}("object"==typeof window?window:this)},"./node_modules/util-deprecate/browser.js":function(Ve,O,r){(function(e){function R(j){try{if(!e.localStorage)return!1}catch(L){return!1}var U=e.localStorage[j];return null!=U&&"true"===String(U).toLowerCase()}Ve.exports=function S(j,U){if(R("noDeprecation"))return j;var L=!1;return function b(){if(!L){if(R("throwDeprecation"))throw new Error(U);R("traceDeprecation")?console.trace(U):console.warn(U),L=!0}return j.apply(this,arguments)}}}).call(this,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/webpack/buildin/amd-options.js":function(Ve,O){(function(r){Ve.exports=r}).call(this,{})},"./node_modules/webpack/buildin/global.js":function(Ve,O){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}Ve.exports=r},"./src/core/Debug.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/EventBus.js"),S=r("./src/core/events/Events.js"),R=r("./src/core/FactoryMaker.js"),U=1,L=2,b=3,f=4,c=5;function g(T){T=T||{};var P,_,D,y,k=this.context,N=Object(e.default)(k).getInstance(),B=T.settings,x=[];function I(ne){return ne&&ne.bind?ne.bind(window.console):window.console.log.bind(window.console)}function ue(){for(var ne=arguments.length,pe=new Array(ne),me=0;me<ne;me++)pe[me]=arguments[me];ce.apply(void 0,[U,this].concat(pe))}function Te(){for(var ne=arguments.length,pe=new Array(ne),me=0;me<ne;me++)pe[me]=arguments[me];ce.apply(void 0,[L,this].concat(pe))}function q(){for(var ne=arguments.length,pe=new Array(ne),me=0;me<ne;me++)pe[me]=arguments[me];ce.apply(void 0,[b,this].concat(pe))}function se(){for(var ne=arguments.length,pe=new Array(ne),me=0;me<ne;me++)pe[me]=arguments[me];ce.apply(void 0,[f,this].concat(pe))}function H(){for(var ne=arguments.length,pe=new Array(ne),me=0;me<ne;me++)pe[me]=arguments[me];ce.apply(void 0,[c,this].concat(pe))}function ce(ne,pe){var me="",xe=null;_&&(xe=(new Date).getTime(),me+="["+(xe-y)+"]"),D&&pe&&pe.getClassName&&(me+="["+pe.getClassName()+"]",pe.getType&&(me+="["+pe.getType()+"]")),me.length>0&&(me+=" ");for(var ve=arguments.length,Oe=new Array(ve>2?ve-2:0),Ee=2;Ee<ve;Ee++)Oe[Ee-2]=arguments[Ee];Array.apply(null,Oe).forEach(function(Ie){me+=Ie+" "}),x[ne]&&B.get().debug.logLevel>=ne&&x[ne](me),B&&B.get().debug.dispatchEvent&&N.trigger(S.default.LOG,{message:me,level:ne})}return P={getLogger:function G(ne){return{fatal:ue.bind(ne),error:Te.bind(ne),warn:q.bind(ne),info:se.bind(ne),debug:H.bind(ne)}},setLogTimestampVisible:function ee(ne){_=ne},setCalleeNameVisible:function de(ne){D=ne}},function A(){_=!0,D=!0,y=(new Date).getTime(),"undefined"!=typeof window&&window.console&&(x[U]=I(window.console.error),x[L]=I(window.console.error),x[b]=I(window.console.warn),x[f]=I(window.console.info),x[c]=I(window.console.debug))}(),P}g.__dashjs_factory_name="Debug";var v=R.default.getSingletonFactory(g);v.LOG_LEVEL_NONE=0,v.LOG_LEVEL_FATAL=U,v.LOG_LEVEL_ERROR=L,v.LOG_LEVEL_WARNING=b,v.LOG_LEVEL_INFO=f,v.LOG_LEVEL_DEBUG=c,R.default.updateSingletonFactory(g.__dashjs_factory_name,v),O.default=v},"./src/core/EventBus.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js"),S=r("./src/streaming/MediaPlayerEvents.js");function U(){var b={};function v(N,B,x){var P=-1;return b[N]&&b[N].some(function(_,D){if(_&&_.callback===B&&(!x||x===_.scope))return P=D,!0}),P}return{on:function f(N,B,x){var P=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!N)throw new Error("event type cannot be null or undefined");if(!B||"function"!=typeof B)throw new Error("listener must be a function: "+B);var _=P.priority||0;if(!(v(N,B,x)>=0)){b[N]=b[N]||[];var D={callback:B,scope:x,priority:_};x&&x.getStreamId&&(D.streamId=x.getStreamId()),x&&x.getType&&(D.mediaType=x.getType()),P&&P.mode&&(D.mode=P.mode),b[N].some(function(A,I){if(A&&_>A.priority)return b[N].splice(I,0,D),!0})||b[N].push(D)}},off:function c(N,B,x){if(N&&B&&b[N]){var P=v(N,B,x);P<0||(b[N][P]=null)}},trigger:function g(N){var B=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},x=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(N&&b[N]){if((B=B||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");B.type=N,x.streamId&&(B.streamId=x.streamId),x.mediaType&&(B.mediaType=x.mediaType),b[N].filter(function(P){return!(!P||x.streamId&&P.streamId&&P.streamId!==x.streamId||x.mediaType&&P.mediaType&&P.mediaType!==x.mediaType||x.mode&&P.mode&&P.mode!==x.mode||!P.mode&&x.mode&&x.mode===S.default.EVENT_MODE_ON_RECEIVE)}).forEach(function(P){return P&&P.callback.call(P.scope,B)})}},reset:function T(){b={}}}}U.__dashjs_factory_name="EventBus";var L=e.default.getSingletonFactory(U);L.EVENT_PRIORITY_LOW=0,L.EVENT_PRIORITY_HIGH=5e3,e.default.updateSingletonFactory(U.__dashjs_factory_name,L),O.default=L},"./src/core/FactoryMaker.js":function(Ve,O,r){"use strict";r.r(O);var e=function(){var S,R=[],j={},U={};function b(D,y){for(var A in R){var I=R[A];if(I.context===D&&I.name===y)return I.instance}return null}function g(D,y){return y[D]}function v(D,y,A){D in A&&(A[D]=y)}function _(D,y,A){var I,G=D.__dashjs_factory_name,ee=y[G];if(ee){var de=ee.instance;if(!ee.override)return de.apply({context:y,factory:S},A);for(var ue in I=D.apply({context:y},A),de=de.apply({context:y,factory:S,parent:I},A))I.hasOwnProperty(ue)&&(I[ue]=de[ue])}else I=D.apply({context:y},A);return I.getClassName=function(){return G},I}return S={extend:function L(D,y,A,I){!I[D]&&y&&(I[D]={instance:y,override:A})},getSingletonInstance:b,setSingletonInstance:function f(D,y,A){for(var I in R){var G=R[I];if(G.context===D&&G.name===y)return void(R[I].instance=A)}R.push({name:y,context:D,instance:A})},deleteSingletonInstances:function c(D){R=R.filter(function(y){return y.context!==D})},getSingletonFactory:function P(D){var y=g(D.__dashjs_factory_name,j);return y||(y=function(I){var G;return void 0===I&&(I={}),{getInstance:function(){return G||(G=b(I,D.__dashjs_factory_name)),G||(G=_(D,I,arguments),R.push({name:D.__dashjs_factory_name,context:I,instance:G})),G}}},j[D.__dashjs_factory_name]=y),y},getSingletonFactoryByName:function x(D){return g(D,j)},updateSingletonFactory:function B(D,y){v(D,y,j)},getClassFactory:function N(D){var y=g(D.__dashjs_factory_name,U);return y||(y=function(I){return void 0===I&&(I={}),{create:function(){return _(D,I,arguments)}}},U[D.__dashjs_factory_name]=y),y},getClassFactoryByName:function k(D){return g(D,U)},updateClassFactory:function T(D,y){v(D,y,U)}}}();O.default=e},"./src/core/Settings.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js"),S=r("./src/core/Utils.js"),R=r("./src/core/Debug.js"),j=r("./src/streaming/constants/Constants.js"),U=r("./src/streaming/vo/metrics/HTTPRequest.js"),L=r("./src/core/EventBus.js"),b=r("./src/core/events/Events.js");function f(N){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(B){return typeof B}:function(B){return B&&"function"==typeof Symbol&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B})(N)}function c(N,B,x){return(B=function g(N){var B=function v(N,B){if("object"!==f(N)||null===N)return N;var x=N[Symbol.toPrimitive];if(void 0!==x){var P=x.call(N,B||"default");if("object"!==f(P))return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===B?String:Number)(N)}(N,"string");return"symbol"===f(B)?B:String(B)}(B))in N?Object.defineProperty(N,B,{value:x,enumerable:!0,configurable:!0,writable:!0}):N[B]=x,N}function T(){var N,B,P=this.context,_=Object(L.default)(P).getInstance(),D={"streaming.delay.liveDelay":b.default.SETTING_UPDATED_LIVE_DELAY,"streaming.delay.liveDelayFragmentCount":b.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,"streaming.liveCatchup.enabled":b.default.SETTING_UPDATED_CATCHUP_ENABLED,"streaming.liveCatchup.playbackRate.min":b.default.SETTING_UPDATED_PLAYBACK_RATE_MIN,"streaming.liveCatchup.playbackRate.max":b.default.SETTING_UPDATED_PLAYBACK_RATE_MAX},y={debug:{logLevel:R.default.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,manifestUpdateRetryInterval:100,cacheInitSegments:!1,applyServiceDescription:!0,applyProducerReferenceTime:!0,applyContentSteering:!0,eventControllerRefreshDelay:100,enableManifestDurationMismatchFix:!0,capabilities:{filterUnsupportedEssentialProperties:!0,useMediaCapabilitiesApi:!1},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0},protection:{keepProtectionMediaKeys:!1,ignoreEmeEncryptedEvent:!1,detectPlayreadyMessageFormat:!0},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:!0,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,stableBufferTime:12,longFormContentDurationThreshold:600,stallThreshold:.3,useAppendWindow:!0,setStallState:!0,avoidCurrentTimeRangePruning:!1,useChangeTypeForTrackSwitch:!0},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!0,enableStallFix:!1,stallSeek:.1},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"}},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0,webvtt:{customRenderingEnabled:!1}},liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN},playbackBufferMin:.5,enabled:null,mode:j.default.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},cacheLoadThresholds:{video:50,audio:5},trackSwitchMode:{audio:j.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:j.default.TRACK_SWITCH_MODE_NEVER_REPLACE},selectionModeForInitialTrack:j.default.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY,fragmentRequestTimeout:2e4,manifestRequestTimeout:1e4,retryIntervals:(N={},c(N,U.HTTPRequest.MPD_TYPE,500),c(N,U.HTTPRequest.XLINK_EXPANSION_TYPE,500),c(N,U.HTTPRequest.MEDIA_SEGMENT_TYPE,1e3),c(N,U.HTTPRequest.INIT_SEGMENT_TYPE,1e3),c(N,U.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),c(N,U.HTTPRequest.INDEX_SEGMENT_TYPE,1e3),c(N,U.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE,1e3),c(N,U.HTTPRequest.LICENSE,1e3),c(N,U.HTTPRequest.OTHER_TYPE,1e3),c(N,"lowLatencyReductionFactor",10),N),retryAttempts:(B={},c(B,U.HTTPRequest.MPD_TYPE,3),c(B,U.HTTPRequest.XLINK_EXPANSION_TYPE,1),c(B,U.HTTPRequest.MEDIA_SEGMENT_TYPE,3),c(B,U.HTTPRequest.INIT_SEGMENT_TYPE,3),c(B,U.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),c(B,U.HTTPRequest.INDEX_SEGMENT_TYPE,3),c(B,U.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE,3),c(B,U.HTTPRequest.LICENSE,3),c(B,U.HTTPRequest.OTHER_TYPE,3),c(B,"lowLatencyMultiplyFactor",5),B),abr:{movingAverageMethod:j.default.MOVING_AVERAGE_SLIDING_WINDOW,ABRStrategy:j.default.ABR_STRATEGY_DYNAMIC,additionalAbrRules:{insufficientBufferRule:!0,switchHistoryRule:!0,droppedFramesRule:!0,abandonRequestsRule:!0},bandwidthSafetyFactor:.9,useDefaultABRRules:!0,useDeadTimeLatency:!0,limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},maxRepresentationRatio:{audio:1,video:1},initialBitrate:{audio:-1,video:-1},initialRepresentationRatio:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0},fetchThroughputCalculationMode:j.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING},cmcd:{enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:j.default.CMCD_MODE_QUERY,enabledKeys:["br","d","ot","tb","bl","dl","mtp","nor","nrr","su","bs","rtp","cid","pr","sf","sid","st","v"]}},errors:{recoverAttempts:{mediaErrorDecode:5}}},A=S.default.clone(y);function I(ue,Te,q){for(var se in ue)ue.hasOwnProperty(se)&&(Te.hasOwnProperty(se)?"object"!==f(ue[se])||ue[se]instanceof Array||null===ue[se]?(Te[se]=S.default.clone(ue[se]),D[q+se]&&_.trigger(D[q+se])):I(ue[se],Te[se],q.slice()+se+"."):console.error("Settings parameter "+q+se+" is not supported"))}return{get:function G(){return A},update:function ee(ue){"object"===f(ue)&&I(ue,A,"")},reset:function de(){A=S.default.clone(y)}}}T.__dashjs_factory_name="Settings";var k=e.default.getSingletonFactory(T);O.default=k},"./src/core/Utils.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./node_modules/path-browserify/index.js"),S=r.n(e),R=r("./node_modules/ua-parser-js/src/ua-parser.js");function U(T){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(k){return typeof k}:function(k){return k&&"function"==typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(T)}function b(T,k){for(var N=0;N<k.length;N++){var B=k[N];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(T,c(B.key),B)}}function c(T){var k=function g(T,k){if("object"!==U(T)||null===T)return T;var N=T[Symbol.toPrimitive];if(void 0!==N){var B=N.call(T,k||"default");if("object"!==U(B))return B;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===k?String:Number)(T)}(T,"string");return"symbol"===U(k)?k:String(k)}var v=function(){function T(){!function L(T,k){if(!(T instanceof k))throw new TypeError("Cannot call a class as a function")}(this,T)}return function f(T,k,N){return k&&b(T.prototype,k),N&&b(T,N),Object.defineProperty(T,"prototype",{writable:!1}),T}(T,null,[{key:"mixin",value:function(N,B,x){var P,_={};if(N)for(var D in B)B.hasOwnProperty(D)&&(P=B[D],(!(D in N)||N[D]!==P&&(!(D in _)||_[D]!==P))&&(N[D]="object"===U(N[D])&&null!==N[D]?T.mixin(N[D],P,x):x(P)));return N}},{key:"clone",value:function(N){if(!N||"object"!==U(N))return N;var B;if(N instanceof Array){B=[];for(var x=0,P=N.length;x<P;++x)x in N&&B.push(T.clone(N[x]))}else B={};return T.mixin(B,N,T.clone)}},{key:"addAditionalQueryParameterToUrl",value:function(N,B){try{if(!B||0===B.length)return N;var x=new URL(N);return B.forEach(function(P){P.key&&P.value&&x.searchParams.set(P.key,P.value)}),x.href}catch(P){return N}}},{key:"parseHttpHeaders",value:function(N){var B={};if(!N)return B;for(var x=N.trim().split("\r\n"),P=0,_=x.length;P<_;P++){var D=x[P],y=D.indexOf(": ");y>0&&(B[D.substring(0,y)]=D.substring(y+2))}return B}},{key:"generateUuid",value:function(){var N=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(x){var P=(N+16*Math.random())%16|0;return N=Math.floor(N/16),("x"==x?P:3&P|8).toString(16)})}},{key:"generateHashCode",value:function(N){var B=0;if(0===N.length)return B;for(var x=0;x<N.length;x++)B=(B<<5)-B+N.charCodeAt(x),B|=0;return B}},{key:"getRelativeUrl",value:function(N,B){try{var x=new URL(N),P=new URL(B);if(x.protocol=P.protocol,x.origin!==P.origin)return B;var _=S.a.relative(x.pathname.substr(0,x.pathname.lastIndexOf("/")),P.pathname.substr(0,P.pathname.lastIndexOf("/"))),D=0===_.length?1:0;return _+=P.pathname.substr(P.pathname.lastIndexOf("/")+D,P.pathname.length-1),P.pathname.length<_.length?P.pathname:_}catch(y){return B}}},{key:"parseUserAgent",value:function(){var N=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{var B=null===N&&"undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"";return Object(R.UAParser)(B)}catch(x){return{}}}}]),T}();O.default=v},"./src/core/Version.js":function(Ve,O,r){"use strict";r.r(O),r.d(O,"getVersionString",function(){return S});function S(){return"4.5.2"}},"./src/core/errors/Errors.js":function(Ve,O,r){"use strict";function S(P){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(_){return typeof _}:function(_){return _&&"function"==typeof Symbol&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(P)}function R(P,_){for(var D=0;D<_.length;D++){var y=_[D];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(P,U(y.key),y)}}function U(P){var _=function L(P,_){if("object"!==S(P)||null===P)return P;var D=P[Symbol.toPrimitive];if(void 0!==D){var y=D.call(P,_||"default");if("object"!==S(y))return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===_?String:Number)(P)}(P,"string");return"symbol"===S(_)?_:String(_)}function f(P,_){if("function"!=typeof _&&null!==_)throw new TypeError("Super expression must either be null or a function");P.prototype=Object.create(_&&_.prototype,{constructor:{value:P,writable:!0,configurable:!0}}),Object.defineProperty(P,"prototype",{writable:!1}),_&&c(P,_)}function c(P,_){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(y,A){return y.__proto__=A,y})(P,_)}function g(P){var _=function k(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(P){return!1}}();return function(){var A,y=N(P);if(_){var I=N(this).constructor;A=Reflect.construct(y,arguments,I)}else A=y.apply(this,arguments);return v(this,A)}}function v(P,_){if(_&&("object"===S(_)||"function"==typeof _))return _;if(void 0!==_)throw new TypeError("Derived constructors may only return object or undefined");return function T(P){if(void 0===P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P}(P)}function N(P){return(N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(D){return D.__proto__||Object.getPrototypeOf(D)})(P)}r.r(O);var x=new(function(P){f(D,P);var _=g(D);function D(){var y;return function b(P,_){if(!(P instanceof _))throw new TypeError("Cannot call a class as a function")}(this,D),(y=_.call(this)).MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,y.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,y.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,y.SEGMENT_BASE_LOADER_ERROR_CODE=15,y.TIME_SYNC_FAILED_ERROR_CODE=16,y.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,y.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,y.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,y.APPEND_ERROR_CODE=20,y.REMOVE_ERROR_CODE=21,y.DATA_UPDATE_FAILED_ERROR_CODE=22,y.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,y.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,y.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,y.DOWNLOAD_ERROR_ID_SIDX_CODE=26,y.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,y.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,y.DOWNLOAD_ERROR_ID_XLINK_CODE=29,y.MANIFEST_ERROR_ID_PARSE_CODE=31,y.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,y.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,y.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,y.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,y.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",y.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",y.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",y.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",y.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",y.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segment ranges from sidx",y.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize client and server time",y.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",y.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",y.APPEND_ERROR_MESSAGE="chunk is not defined",y.REMOVE_ERROR_MESSAGE="Removing data from the SourceBuffer",y.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",y.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",y.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",y.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",y.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",y}return function j(P,_,D){return _&&R(P.prototype,_),D&&R(P,D),Object.defineProperty(P,"prototype",{writable:!1}),P}(D)}(r("./src/core/errors/ErrorsBase.js").default));O.default=x},"./src/core/errors/ErrorsBase.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function R(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,U(v.key),v)}}function U(f){var c=function L(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=function(){function f(){!function S(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")}(this,f)}return function j(f,c,g){return c&&R(f.prototype,c),g&&R(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}(f,[{key:"extend",value:function(g,v){if(g){var T=!!v&&v.override,k=!!v&&v.publicOnly;for(var N in g)!g.hasOwnProperty(N)||this[N]&&!T||k&&-1===g[N].indexOf("public_")||(this[N]=g[N])}}}]),f}()},"./src/core/events/CoreEvents.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/events/EventsBase.js");function S(x){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(P){return typeof P}:function(P){return P&&"function"==typeof Symbol&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P})(x)}function R(x,P){for(var _=0;_<P.length;_++){var D=P[_];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(x,U(D.key),D)}}function U(x){var P=function L(x,P){if("object"!==S(x)||null===x)return x;var _=x[Symbol.toPrimitive];if(void 0!==_){var D=_.call(x,P||"default");if("object"!==S(D))return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===P?String:Number)(x)}(x,"string");return"symbol"===S(P)?P:String(P)}function f(x,P){if("function"!=typeof P&&null!==P)throw new TypeError("Super expression must either be null or a function");x.prototype=Object.create(P&&P.prototype,{constructor:{value:x,writable:!0,configurable:!0}}),Object.defineProperty(x,"prototype",{writable:!1}),P&&c(x,P)}function c(x,P){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(D,y){return D.__proto__=y,D})(x,P)}function g(x){var P=function k(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(x){return!1}}();return function(){var y,D=N(x);if(P){var A=N(this).constructor;y=Reflect.construct(D,arguments,A)}else y=D.apply(this,arguments);return v(this,y)}}function v(x,P){if(P&&("object"===S(P)||"function"==typeof P))return P;if(void 0!==P)throw new TypeError("Derived constructors may only return object or undefined");return function T(x){if(void 0===x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}(x)}function N(x){return(N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(_){return _.__proto__||Object.getPrototypeOf(_)})(x)}O.default=function(x){f(_,x);var P=g(_);function _(){var D;return function b(x,P){if(!(x instanceof P))throw new TypeError("Cannot call a class as a function")}(this,_),(D=P.call(this)).ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",D.BUFFERING_COMPLETED="bufferingCompleted",D.BUFFER_CLEARED="bufferCleared",D.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",D.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",D.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",D.CURRENT_TRACK_CHANGED="currentTrackChanged",D.DATA_UPDATE_COMPLETED="dataUpdateCompleted",D.INBAND_EVENTS="inbandEvents",D.INITIAL_STREAM_SWITCH="initialStreamSwitch",D.INIT_FRAGMENT_LOADED="initFragmentLoaded",D.INIT_FRAGMENT_NEEDED="initFragmentNeeded",D.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",D.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",D.LOADING_COMPLETED="loadingCompleted",D.LOADING_PROGRESS="loadingProgress",D.LOADING_DATA_PROGRESS="loadingDataProgress",D.LOADING_ABANDONED="loadingAborted",D.MANIFEST_UPDATED="manifestUpdated",D.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",D.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",D.QUOTA_EXCEEDED="quotaExceeded",D.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",D.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",D.SERVICE_LOCATION_BLACKLIST_ADD="serviceLocationBlacklistAdd",D.SERVICE_LOCATION_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",D.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",D.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",D.SOURCE_BUFFER_ERROR="sourceBufferError",D.STREAMS_COMPOSED="streamsComposed",D.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",D.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",D.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",D.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",D.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",D.URL_RESOLUTION_FAILED="urlResolutionFailed",D.VIDEO_CHUNK_RECEIVED="videoChunkReceived",D.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",D.XLINK_ELEMENT_LOADED="xlinkElementLoaded",D.XLINK_READY="xlinkReady",D.SEEK_TARGET="seekTarget",D.SETTING_UPDATED_LIVE_DELAY="settingUpdatedLiveDelay",D.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT="settingUpdatedLiveDelayFragmentCount",D.SETTING_UPDATED_CATCHUP_ENABLED="settingUpdatedCatchupEnabled",D.SETTING_UPDATED_PLAYBACK_RATE_MIN="settingUpdatedPlaybackRateMin",D.SETTING_UPDATED_PLAYBACK_RATE_MAX="settingUpdatedPlaybackRateMax",D}return function j(x,P,_){return P&&R(x.prototype,P),_&&R(x,_),Object.defineProperty(x,"prototype",{writable:!1}),x}(_)}(e.default)},"./src/core/events/Events.js":function(Ve,O,r){"use strict";function S(P){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(_){return typeof _}:function(_){return _&&"function"==typeof Symbol&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(P)}function R(P,_){for(var D=0;D<_.length;D++){var y=_[D];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(P,U(y.key),y)}}function U(P){var _=function L(P,_){if("object"!==S(P)||null===P)return P;var D=P[Symbol.toPrimitive];if(void 0!==D){var y=D.call(P,_||"default");if("object"!==S(y))return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===_?String:Number)(P)}(P,"string");return"symbol"===S(_)?_:String(_)}function b(P,_){if(!(P instanceof _))throw new TypeError("Cannot call a class as a function")}function f(P,_){if("function"!=typeof _&&null!==_)throw new TypeError("Super expression must either be null or a function");P.prototype=Object.create(_&&_.prototype,{constructor:{value:P,writable:!0,configurable:!0}}),Object.defineProperty(P,"prototype",{writable:!1}),_&&c(P,_)}function c(P,_){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(y,A){return y.__proto__=A,y})(P,_)}function g(P){var _=function k(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(P){return!1}}();return function(){var A,y=N(P);if(_){var I=N(this).constructor;A=Reflect.construct(y,arguments,I)}else A=y.apply(this,arguments);return v(this,A)}}function v(P,_){if(_&&("object"===S(_)||"function"==typeof _))return _;if(void 0!==_)throw new TypeError("Derived constructors may only return object or undefined");return function T(P){if(void 0===P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P}(P)}function N(P){return(N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(D){return D.__proto__||Object.getPrototypeOf(D)})(P)}r.r(O);var B=function(P){f(D,P);var _=g(D);function D(){return b(this,D),_.apply(this,arguments)}return function j(P,_,D){return _&&R(P.prototype,_),D&&R(P,D),Object.defineProperty(P,"prototype",{writable:!1}),P}(D)}(r("./src/core/events/CoreEvents.js").default),x=new B;O.default=x},"./src/core/events/EventsBase.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function R(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,U(v.key),v)}}function U(f){var c=function L(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=function(){function f(){!function S(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")}(this,f)}return function j(f,c,g){return c&&R(f.prototype,c),g&&R(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}(f,[{key:"extend",value:function(g,v){if(g){var T=!!v&&v.override,k=!!v&&v.publicOnly;for(var N in g)!g.hasOwnProperty(N)||this[N]&&!T||k&&-1===g[N].indexOf("public_")||(this[N]=g[N])}}}]),f}()},"./src/dash/DashAdapter.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/dash/constants/DashConstants.js"),S=r("./src/dash/vo/RepresentationInfo.js"),R=r("./src/dash/vo/MediaInfo.js"),j=r("./src/dash/vo/StreamInfo.js"),U=r("./src/dash/vo/ManifestInfo.js"),L=r("./src/dash/vo/Event.js"),b=r("./src/core/FactoryMaker.js"),f=r("./src/dash/models/DashManifestModel.js"),c=r("./src/dash/models/PatchManifestModel.js"),g=r("./node_modules/bcp-47-normalize/index.js"),v=r.n(g);function T(){var k,N,B,x,P,_,D,y=this.context;function ue(ot){return N.getRolesForAdaptation(ot).filter(function(Qe){return Qe.value===e.default.MAIN})[0]}function Te(ot,Qe,mt){var Lt=N.getAdaptationsForType(x[0].mpd.manifest,ot,Qe);if(!Lt||0===Lt.length)return null;if(Lt.length>1&&mt){var nn=H(mt,Qe);if(P[mt.id]&&P[mt.id][Qe])for(var zt=0,_t=Lt.length;zt<_t;zt++)if(q(P[mt.id][Qe],nn[zt]))return Lt[zt];for(var pt=0,rt=Lt.length;pt<rt;pt++)if(ue(Lt[pt]))return Lt[pt]}return Lt[0]}function q(ot,Qe){if(!ot||!Qe)return!1;var mt=ot.id===Qe.id,Lt=ot.codec===Qe.codec,nn=ot.viewpoint===Qe.viewpoint,zt=ot.lang===Qe.lang,_t=ot.roles.toString()===Qe.roles.toString(),pt=ot.accessibility.toString()===Qe.accessibility.toString(),rt=ot.audioChannelConfiguration.toString()===Qe.audioChannelConfiguration.toString();return mt&&Lt&&nn&&zt&&_t&&pt&&rt}function se(ot,Qe,mt,Lt,nn,zt){var rt,Xe,yt,Gt,Qt,_t=[];if(!Lt||0===Lt.length)return[];var on=N.getAdaptationsForPeriod(Qe);for(yt=0,Qt=Lt.length;yt<Qt;yt++)if(rt=At(on[Xe=N.getIndexForAdaptation(Lt[yt],ot,mt.index)]),zt){var mn=rt.accessibility.length;for(Gt=0;Gt<mn;Gt++)if(rt){var Dn=rt.accessibility[Gt];if(0===Dn.indexOf("cea-608:")){var Jn=Dn.substring(8).split(";");if("CC"===Jn[0].substring(0,2))for(Gt=0;Gt<Jn.length;Gt++)rt||(rt=At.call(this,on[Xe])),Dt(rt,Jn[Gt].substring(0,3),Jn[Gt].substring(4)),_t.push(rt),rt=null;else for(Gt=0;Gt<Jn.length;Gt++)rt||(rt=At.call(this,on[Xe])),Dt(rt,"CC"+(Gt+1),Jn[Gt]),_t.push(rt),rt=null}else 0===Dn.indexOf("cea-608")&&(Dt(rt,_.CC1,"eng"),_t.push(rt),rt=null)}}else nn===_.IMAGE?($t(rt),_t.push(rt),rt=null):rt&&_t.push(rt);return _t}function H(ot,Qe,mt){var Lt=x,nn=mt,zt=[];if(nn)ln(),Lt=he(nn);else{if(!(x.length>0))return zt;nn=x[0].mpd.manifest}var _t=vt(ot,Lt),pt=N.getAdaptationsForType(nn,ot?ot.index:null,Qe);return zt=se(nn,_t,ot,pt,Qe),Qe===_.TEXT&&(pt=N.getAdaptationsForType(nn,ot?ot.index:null,_.VIDEO),zt=zt.concat(se(nn,_t,ot,pt,Qe,!0))),zt}function he(ot){var Qe=Y(ot);return N.getRegularPeriods(Qe)}function Y(ot){var Qe=Et(ot);return N.getMpd(Qe)}function ut(){x=[],P={}}function Et(ot){return ot||(x.length>0?x[0].mpd.manifest:null)}function Yt(ot){try{var Qe=vt(ot.streamInfo,x),mt=N.getAdaptationsForPeriod(Qe);return ot&&ot.streamInfo&&void 0!==ot.streamInfo.id&&mt?mt[ot.index]:null}catch(Lt){return null}}function vt(ot,Qe){for(var mt=Qe.length,Lt=0;Lt<mt;Lt++){var nn=Qe[Lt];if(ot&&ot.id===nn.id)return nn}return null}function At(ot){if(!ot)return null;var Lt,Qe=new R.default,mt=ot.period.mpd.manifest.Period_asArray[ot.period.index].AdaptationSet_asArray[ot.index];if(Qe.id=ot.id,Qe.index=ot.index,Qe.type=ot.type,Qe.streamInfo=Kt(ot.period),Qe.representationCount=N.getRepresentationCount(mt),Qe.labels=N.getLabelsForAdaptation(mt),Qe.lang=N.getLanguageForAdaptation(mt),Lt=N.getViewpointForAdaptation(mt),Qe.viewpoint=Lt?Lt.value:void 0,Qe.accessibility=N.getAccessibilityForAdaptation(mt).map(function(_t){var pt=_t.value,rt=pt;return _t.schemeIdUri&&_t.schemeIdUri.search("cea-608")>=0&&void 0!==D&&(rt=pt?"cea-608:"+pt:"cea-608",Qe.embeddedCaptions=!0),rt}),Qe.audioChannelConfiguration=N.getAudioChannelConfigurationForAdaptation(mt).map(function(_t){return _t.value}),0===Qe.audioChannelConfiguration.length&&Array.isArray(mt.Representation_asArray)&&mt.Representation_asArray.length>0&&(Qe.audioChannelConfiguration=N.getAudioChannelConfigurationForRepresentation(mt.Representation_asArray[0]).map(function(_t){return _t.value})),Qe.roles=N.getRolesForAdaptation(mt).map(function(_t){return _t.value}),Qe.codec=N.getCodec(mt),Qe.mimeType=N.getMimeType(mt),Qe.contentProtection=N.getContentProtectionData(mt),Qe.bitrateList=N.getBitrateListForAdaptation(mt),Qe.selectionPriority=N.getSelectionPriority(mt),Qe.contentProtection){var nn=Qe.contentProtection.map(function(_t){return N.getKID(_t)}).filter(function(_t){return null!==_t});if(nn.length){var zt=nn[0];Qe.contentProtection.forEach(function(_t){_t.keyId=zt})}}return Qe.isText=N.getIsText(mt),Qe.supplementalProperties=N.getSupplementalProperties(mt),Qe.isFragmented=N.getIsFragmented(mt),Qe.isEmbedded=!1,Qe}function Dt(ot,Qe,mt){ot.id=Qe,ot.index=100+parseInt(Qe.substring(2,3)),ot.type=_.TEXT,ot.codec="cea-608-in-SEI",ot.isEmbedded=!0,ot.isFragmented=!1,ot.lang=v()(mt),ot.roles=["caption"]}function $t(ot){ot.type=_.IMAGE}function Kt(ot){var Qe=new j.default;return Qe.id=ot.id,Qe.index=ot.index,Qe.start=ot.start,Qe.duration=ot.duration,Qe.manifestInfo=function Xt(ot){var Qe=new U.default;return Qe.dvrWindowSize=ot.timeShiftBufferDepth,Qe.loadedTime=ot.manifest.loadedTime,Qe.availableFrom=ot.availabilityStartTime,Qe.minBufferTime=ot.manifest.minBufferTime,Qe.maxFragmentDuration=ot.maxSegmentDuration,Qe.duration=N.getDuration(ot.manifest),Qe.isDynamic=N.getIsDynamic(ot.manifest),Qe.serviceDescriptions=N.getServiceDescriptions(ot.manifest),Qe.protocol=ot.manifest.protocol,Qe}(ot.mpd),Qe.isLast=1===ot.mpd.manifest.Period_asArray.length||Math.abs(Qe.start+Qe.duration-Qe.manifestInfo.duration)<1,Qe}function ln(){if(!_)throw new Error("setConfig function has to be called previously")}function Bn(ot){return x.length>0?x[0].mpd.manifest.Period_asArray[ot]:null}function jn(ot,Qe,mt){var nn,zt,_t,pt,rt;if(ot)for(nn=ot.AdaptationSet_asArray,pt=0;pt<nn.length;pt+=1)for(_t=nn[pt].Representation_asArray,rt=0;rt<_t.length;rt+=1)if(Qe===(zt=_t[rt]).id)return mt?rt:zt;return null}return k={getBandwidthForRepresentation:function be(ot,Qe){var mt;return(mt=jn(Bn(Qe),ot))?mt.bandwidth:null},getIndexForRepresentation:function Fe(ot,Qe){return function Rn(ot,Qe){var mt=jn(ot,Qe,!0);return null!==mt?mt:-1}(Bn(Qe),ot)},getMaxIndexForBufferType:function We(ot,Qe){return function Vn(ot,Qe){var mt,Lt,nn,zt;if(!ot||!Qe)return-1;for(Lt=ot.AdaptationSet_asArray,zt=0;zt<Lt.length;zt+=1)if(nn=(mt=Lt[zt]).Representation_asArray,N.getIsTypeOf(mt,Qe))return nn.length;return-1}(Bn(Qe),ot)},convertRepresentationToRepresentationInfo:function ee(ot){if(ot){var Qe=new S.default,Lt=N.getRepresentationFor(ot.index,ot.adaptation.period.mpd.manifest.Period_asArray[ot.adaptation.period.index].AdaptationSet_asArray[ot.adaptation.index]);return Qe.id=ot.id,Qe.quality=ot.index,Qe.bandwidth=N.getBandwidth(Lt),Qe.fragmentDuration=ot.segmentDuration||(ot.segments&&ot.segments.length>0?ot.segments[0].duration:NaN),Qe.MSETimeOffset=ot.MSETimeOffset,Qe.mediaInfo=At(ot.adaptation),Qe}return null},getStreamsInfo:function ne(ot,Qe){var mt=[],Lt=x;if(ot&&(ln(),Lt=he(ot)),Lt.length>0){(!Qe||Qe>Lt.length)&&(Qe=Lt.length);for(var nn=0;nn<Qe;nn++)mt.push(Kt(Lt[nn]))}return mt},getMediaInfoForType:function de(ot,Qe){if(0===x.length||!ot)return null;var mt=vt(ot,x);if(!mt)return null;var Lt=N.getAdaptationsForPeriod(mt),nn=Te(ot.index,Qe,ot);return nn?At(Lt[N.getIndexForAdaptation(nn,x[0].mpd.manifest,ot.index)]):null},getAllMediaInfoForType:H,getAdaptationForType:Te,getRealAdaptation:function pe(ot,Qe){var mt,Lt,nn=vt(ot,x);return mt=Qe?Qe.id:null,x.length>0&&nn&&(Lt=mt?N.getAdaptationForId(mt,x[0].mpd.manifest,nn.index):N.getAdaptationForIndex(Qe?Qe.index:null,x[0].mpd.manifest,nn.index)),Lt},getProducerReferenceTimes:function me(ot,Qe){var mt,Lt,nn=vt(ot,x);return mt=Qe?Qe.id:null,x.length>0&&nn&&(Lt=mt?N.getAdaptationForId(mt,x[0].mpd.manifest,nn.index):N.getAdaptationForIndex(Qe?Qe.index:null,x[0].mpd.manifest,nn.index)),Lt?N.getProducerReferenceTimesForAdaptation(Lt):[]},getRealPeriodByIndex:function ve(ot){return N.getRealPeriodForIndex(ot,x[0].mpd.manifest)},getEssentialPropertiesForRepresentation:function xe(ot){try{return N.getEssentialPropertiesForRepresentation(ot)}catch(Qe){return[]}},getVoRepresentations:function Oe(ot){var mt=Yt(ot);return N.getRepresentationsForAdaptation(mt)},getEventsFor:function Ie(ot,Qe,mt){var Lt=[];if(x.length>0){var nn=x[0].mpd.manifest;if(ot instanceof j.default){var zt=vt(ot,x);Lt=N.getEventsForPeriod(zt)}else if(ot instanceof R.default){var _t=vt(mt,x);Lt=N.getEventStreamForAdaptationSet(nn,Yt(ot),_t)}else if(ot instanceof S.default){var pt=vt(mt,x);Lt=N.getEventStreamForRepresentation(nn,Qe,pt)}}return Lt},getEvent:function Ee(ot,Qe,mt,Lt){try{if(!ot||!Qe||isNaN(mt)||!Lt)return null;var nn=ot.scheme_id_uri,zt=ot.value;if(!Qe[nn+"/"+zt])return null;var Qt,_t=new L.default,pt=ot.timescale||1,rt=Lt.adaptation.period.start,Xe=Qe[nn+"/"+zt],yt=isNaN(Lt.presentationTimeOffset)?isNaN(Xe.presentationTimeOffset)?0:Xe.presentationTimeOffset:Lt.presentationTimeOffset,Gt=ot.presentation_time_delta/pt;Qt=0===ot.version?rt+mt-yt+Gt:rt-yt+Gt;var on=ot.event_duration/pt,mn=ot.id,Dn=ot.message_data;return _t.eventStream=Xe,_t.eventStream.value=zt,_t.eventStream.timescale=pt,_t.duration=on,_t.id=mn,_t.calculatedPresentationTime=Qt,_t.messageData=Dn,_t.presentationTimeDelta=Gt,_t}catch(Zn){return null}},getMpd:Y,setConfig:function G(ot){!ot||(ot.constants&&(_=ot.constants),ot.cea608parser&&(D=ot.cea608parser),ot.errHandler&&N.setConfig({errHandler:ot.errHandler}),ot.BASE64&&N.setConfig({BASE64:ot.BASE64}))},updatePeriods:function ce(ot){if(!ot)return null;ln(),x=he(ot)},getIsTextTrack:function Pe(ot){return N.getIsText(ot)},getUTCTimingSources:function ke(){var ot=Et();return N.getUTCTimingSources(ot)},getSuggestedPresentationDelay:function Be(){return N.getSuggestedPresentationDelay(x.length>0?x[0].mpd:null)},getAvailabilityStartTime:function qe(ot){var Qe=Y(ot);return N.getAvailabilityStartTime(Qe)},getIsTypeOf:function et(ot,Qe){return N.getIsTypeOf(ot,Qe)},getIsDynamic:function He(ot){var Qe=Et(ot);return N.getIsDynamic(Qe)},getDuration:function De(ot){var Qe=Et(ot);return N.getDuration(Qe)},getRegularPeriods:he,getContentSteering:function J(ot){return N.getContentSteering(ot)},getLocation:function Me(ot){return N.getLocation(ot)},getPatchLocation:function z(ot){var Qe=N.getPatchLocation(ot),mt=N.getPublishTime(ot);if(!Qe||!mt)return null;if(Qe.hasOwnProperty("ttl")&&mt){var Lt=1e3*parseFloat(Qe.ttl);if(mt.getTime()+Lt<=(new Date).getTime())return null}return Qe.__text},getManifestUpdatePeriod:function ae(ot){return N.getManifestUpdatePeriod(ot,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)},getPublishTime:function re(ot){return N.getPublishTime(ot)},getIsDVB:function te(ot){return N.hasProfile(ot,"urn:dvb:dash:profile:dvb-dash:2014")},getIsPatch:function X(ot){return B.getIsPatch(ot)},getBaseURLsFromElement:function Z(ot){return N.getBaseURLsFromElement(ot)},getRepresentationSortFunction:function W(){return N.getRepresentationSortFunction()},getCodec:function oe(ot,Qe,mt){return N.getCodec(ot,Qe,mt)},getPeriodById:function at(ot){if(!ot||0===x.length)return null;var Qe=x.filter(function(mt){return mt.id===ot});return Qe&&Qe.length>0?Qe[0]:null},setCurrentMediaInfo:function Re(ot,Qe,mt){P[ot]=P[ot]||{},P[ot][Qe]=P[ot][Qe]||{},P[ot][Qe]=mt},isPatchValid:function Ot(ot,Qe){var mt=N.getId(ot),Lt=B.getMpdId(Qe),nn=N.getPublishTime(ot),zt=B.getPublishTime(Qe),_t=B.getOriginalPublishTime(Qe);return!!(mt&&Lt&&mt==Lt&&nn&&_t&&nn.getTime()==_t.getTime()&&zt&&nn.getTime()<zt.getTime())},applyPatchToManifest:function tt(ot,Qe){B.getPatchOperations(Qe).forEach(function(mt){var Lt=mt.getMpdTarget(ot);if(null!==Lt){var nn=Lt.name,zt=Lt.target,_t=Lt.leaf;if(mt.xpath.findsAttribute()){switch(mt.action){case"add":case"replace":zt[nn]=mt.value;break;case"remove":delete zt[nn]}return}var pt=(zt[nn+"_asArray"]||[]).indexOf(_t),rt="prepend"===mt.position||"before"===mt.position;if(("remove"===mt.action||"replace"===mt.action)&&(delete zt[nn],-1!=pt)){var Xe=zt[nn+"_asArray"];Xe.splice(pt,1),Xe.length>1?zt[nn]=Xe:1==Xe.length?zt[nn]=Xe[0]:delete zt[nn+"_asArray"]}("add"===mt.action||"replace"===mt.action)&&Object.keys(mt.value).forEach(function(yt){var Gt=mt.value[yt],Qt=zt[yt+"_asArray"]||[];0===Qt.length&&zt[yt]&&Qt.push(zt[yt]),0===Qt.length?Qt=Gt:Qt.splice.apply(Qt,[yt==nn&&-1!=pt?pt+(rt?0:1)+("replace"==mt.action?-1:0):rt?0:Qt.length,0].concat(Gt)),zt[yt+"_asArray"]=Qt,zt[yt]=1==Qt.length?Qt[0]:Qt})}})},areMediaInfosEqual:q,reset:ut},function I(){N=Object(f.default)(y).getInstance(),B=Object(c.default)(y).getInstance(),ut()}(),k}T.__dashjs_factory_name="DashAdapter",O.default=b.default.getSingletonFactory(T)},"./src/dash/DashHandler.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/vo/FragmentRequest.js"),S=r("./src/streaming/vo/metrics/HTTPRequest.js"),R=r("./src/core/FactoryMaker.js"),j=r("./src/streaming/MediaPlayerEvents.js"),U=r("./src/dash/utils/SegmentsUtils.js"),L=r("./src/dash/constants/DashConstants.js");function c(g){var D,y,A,I,G,v=(g=g||{}).eventBus,T=g.debug,k=g.urlUtils,N=g.type,B=g.streamInfo,x=g.segmentsController,P=g.timelineConverter,_=g.baseURLController;function Te(){return N}function se(){A=null}function ce(ke,Be,qe){var De,he,He=_.resolve(qe.path);return He&&Be!==He.url&&k.isRelative(Be)?(De=He.url,he=He.serviceLocation,Be&&(De=k.resolve(Be,De))):De=Be,!k.isRelative(De)&&(ke.url=De,ke.serviceLocation=he,!0)}function me(ke,Be){if(null==Be)return null;var qe=new e.default,He=Be.representation,De=He.adaptation.period.mpd.manifest.Period_asArray[He.adaptation.period.index].AdaptationSet_asArray[He.adaptation.index].Representation_asArray[He.index].bandwidth,he=Be.media;return he=Object(U.replaceTokenForTemplate)(he,"Number",Be.replacementNumber),he=Object(U.replaceTokenForTemplate)(he,"Time",Be.replacementTime),he=Object(U.replaceTokenForTemplate)(he,"Bandwidth",De),he=Object(U.replaceIDForTemplate)(he,He.id),he=Object(U.unescapeDollarsInTemplate)(he),qe.mediaType=Te(),qe.type=S.HTTPRequest.MEDIA_SEGMENT_TYPE,qe.range=Be.mediaRange,qe.startTime=Be.presentationStartTime,qe.mediaStartTime=Be.mediaStartTime,qe.duration=Be.duration,qe.timescale=He.timescale,qe.availabilityStartTime=Be.availabilityStartTime,qe.availabilityEndTime=Be.availabilityEndTime,qe.availabilityTimeComplete=He.availabilityTimeComplete,qe.wallStartTime=Be.wallStartTime,qe.quality=He.index,qe.index=Be.index,qe.mediaInfo=ke,qe.adaptationIndex=He.adaptation.index,qe.representationId=He.id,ce(qe,he,He)?qe:void 0}function ve(ke,Be,qe){var He=null;if(!Be||!Be.segmentInfoType)return He;var De=x.getSegmentByTime(Be,qe);return De&&(A=De,y.debug("Index for time "+qe+" is "+De.index),He=me(ke,De)),He}function Pe(){y.debug("Dynamic stream complete"),G=!0}return D={initialize:function de(ke){I=ke,G=!1,x.initialize(ke)},getStreamId:function ue(){return B.id},getType:Te,getStreamInfo:function q(){return B},getInitRequest:function ne(ke,Be){return Be?function pe(ke,Be,qe){var He=new e.default,De=Be.adaptation.period,he=De.start;if(He.mediaType=qe,He.type=S.HTTPRequest.INIT_SEGMENT_TYPE,He.range=Be.range,He.availabilityStartTime=P.calcAvailabilityStartTimeFromPresentationTime(he,Be,I),He.availabilityEndTime=P.calcAvailabilityEndTimeFromPresentationTime(he+De.duration,Be,I),He.quality=Be.index,He.mediaInfo=ke,He.representationId=Be.id,ce(He,Be.initialization,Be))return He.url=Object(U.replaceTokenForTemplate)(He.url,"Bandwidth",Be.bandwidth),He}(ke,Be,Te()):null},getSegmentRequestForTime:ve,getCurrentIndex:function Re(){return A?A.index:-1},getNextSegmentRequest:function Ee(ke,Be){var qe=null;if(!Be||!Be.segmentInfoType)return null;var He=A?A.index+1:0,De=x.getSegmentByIndex(Be,He,A?A.mediaStartTime:-1);if(De)qe=me(ke,De),A=De;else{if(I&&!G)return y.debug(Te()+" No segment found at index: "+He+". Wait for next loop"),null;G=!0}return qe},isLastSegmentRequested:function xe(ke,Be){if(!ke||!A)return!1;if(G)return!0;if(!isFinite(ke.adaptation.period.duration)||A.presentationStartTime+A.duration>Be)return!1;if(ke.mediaFinishedInformation&&!isNaN(ke.mediaFinishedInformation.numberOfSegments)&&!isNaN(A.index)&&A.index>=ke.mediaFinishedInformation.numberOfSegments-1){if(!I||ke.segmentInfoType===L.default.SEGMENT_TEMPLATE)return!0;if(I&&ke.segmentInfoType===L.default.SEGMENT_LIST&&ke.adaptation.period.nextPeriodId)return!0}return!!(I&&ke.adaptation.period.nextPeriodId&&ke.segmentInfoType===L.default.SEGMENT_TIMELINE&&ke.mediaFinishedInformation&&!isNaN(ke.mediaFinishedInformation.mediaTimeOfLastSignaledSegment)&&A&&!isNaN(A.mediaStartTime)&&!isNaN(A.duration)&&A.mediaStartTime+A.duration>=ke.mediaFinishedInformation.mediaTimeOfLastSignaledSegment-.05)},reset:function H(){se(),v.off(j.default.DYNAMIC_TO_STATIC,Pe,D)},getNextSegmentRequestIdempotent:function Oe(ke,Be){var De=x.getSegmentByIndex(Be,A?A.index+1:0,A?A.mediaStartTime:-1);return De?me(ke,De):null},getValidTimeAheadOfTargetTime:function Ie(ke,Be,qe,He){try{if(isNaN(ke)||!Be||!qe)return NaN;if(ke<0&&(ke=0),isNaN(He)&&(He=.5),ve(Be,qe,ke))return ke;if(qe.adaptation.period.start+qe.adaptation.period.duration<ke)return NaN;for(var De=isFinite(qe.adaptation.period.duration)?qe.adaptation.period.start+qe.adaptation.period.duration:ke+30,he=Math.min(ke+He,De),Y=NaN,J=null;he<=De;){var Me=null;if(he<=De&&(Me=ve(Be,qe,he)),Me){Y=he,J=Me;break}he+=He}if(J){var ae=J.startTime+J.duration;return ke>J.startTime&&ae-ke>He?ke:!isNaN(J.startTime)&&ke<J.startTime&&Y>J.startTime?J.startTime+.001:Math.min(ae-He,Y)}return Y}catch(re){return NaN}}},function ee(){y=T.getLogger(D),se(),v.on(j.default.DYNAMIC_TO_STATIC,Pe,D)}(),D}c.__dashjs_factory_name="DashHandler",O.default=R.default.getClassFactory(c)},"./src/dash/DashMetrics.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/constants/Constants.js"),S=r("./src/streaming/vo/metrics/HTTPRequest.js"),R=r("./src/core/FactoryMaker.js"),j=r("./src/streaming/constants/MetricsConstants.js"),U=r("./src/dash/utils/Round10.js"),L=r("./src/streaming/models/MetricsModel.js"),b=r("./src/core/Utils.js"),f=r("./src/streaming/vo/metrics/PlayList.js");function c(g){var T,k,N,B,v=this.context,x=(g=g||{}).metricsModel;function ue(Me){var ae=x.getMetricsFor(Me,!0);if(!ae)return null;var te,re=ae.HttpList,z=null;if(!re||re.length<=0)return null;for(te=re.length-1;te>=0;){if(re[te].responsecode){z=re[te];break}te--}return z}function Te(Me){var ae=x.getMetricsFor(Me,!0);return ae&&ae.HttpList?ae.HttpList:[]}function se(Me,ae){if(!Me)return null;var re=Me[ae];return re&&0!==re.length?re[re.length-1]:null}return T={getCurrentRepresentationSwitch:function D(Me){return se(x.getMetricsFor(Me,!0),j.default.TRACK_SWITCH)},getCurrentBufferState:function A(Me){return se(x.getMetricsFor(Me,!0),j.default.BUFFER_STATE)},getCurrentBufferLevel:function I(Me){var re=se(x.getMetricsFor(Me,!0),j.default.BUFFER_LEVEL);return re?U.default.round10(re.level/1e3,-3):0},getCurrentHttpRequest:ue,getHttpRequests:Te,getCurrentDroppedFrames:function H(){return se(x.getMetricsFor(e.default.VIDEO,!0),j.default.DROPPED_FRAMES)},getCurrentSchedulingInfo:function ne(Me){return se(x.getMetricsFor(Me,!0),j.default.SCHEDULING_INFO)},getCurrentDVRInfo:function Re(Me){return se(Me?x.getMetricsFor(Me,!0):x.getMetricsFor(e.default.VIDEO,!0)||x.getMetricsFor(e.default.AUDIO,!0),j.default.DVR_INFO)},getCurrentManifestUpdate:function me(){return se(x.getMetricsFor(e.default.STREAM),j.default.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function Be(Me,ae){if(!ae)return null;var re={},z=ue(Me);z&&(re=b.default.parseHttpHeaders(z._responseHeaders));var te=re[ae.toLowerCase()];return void 0===te?null:te},getLatestMPDRequestHeaderValueByID:function ke(Me){if(!Me)return null;var re,z,te,ae={};for(te=(re=Te(e.default.STREAM)).length-1;te>=0;te--)if((z=re[te]).type===S.HTTPRequest.MPD_TYPE){ae=b.default.parseHttpHeaders(z._responseHeaders);break}var X=ae[Me.toLowerCase()];return void 0===X?null:X},addRepresentationSwitch:function y(Me,ae,re,z,te){x.addRepresentationSwitch(Me,ae,re,z,te)},addDVRInfo:function Pe(Me,ae,re,z){x.addDVRInfo(Me,ae,re,z)},updateManifestUpdateInfo:function xe(Me){var ae=this.getCurrentManifestUpdate();x.updateManifestUpdateInfo(ae,Me)},addManifestUpdateStreamInfo:function ve(Me){if(Me){var ae=this.getCurrentManifestUpdate();x.addManifestUpdateStreamInfo(ae,Me.id,Me.index,Me.start,Me.duration)}},addManifestUpdateRepresentationInfo:function Ie(Me,ae){if(Me){var re=this.getCurrentManifestUpdate();x.addManifestUpdateRepresentationInfo(re,Me.id,Me.index,Me.streamIndex,ae,Me.presentationTimeOffset,Me.startNumber,Me.fragmentInfoType)}},addManifestUpdate:function Oe(Me){x.addManifestUpdate(e.default.STREAM,Me.type,Me.requestStartDate,Me.requestEndDate)},addHttpRequest:function Ee(Me,ae,re,z,te){x.addHttpRequest(Me.mediaType,null,Me.type,Me.url,Me.quality,ae,Me.serviceLocation||null,Me.range||null,Me.requestStartDate,Me.firstByteDate,Me.requestEndDate,re,Me.duration,z,te,Me.fileLoaderType)},addSchedulingInfo:function pe(Me,ae){x.addSchedulingInfo(Me.mediaType,new Date,Me.type,Me.startTime,Me.availabilityStartTime,Me.duration,Me.quality,Me.range,ae)},addRequestsQueue:function q(Me,ae,re){x.addRequestsQueue(Me,ae,re)},addBufferLevel:function G(Me,ae,re){x.addBufferLevel(Me,ae,re)},addBufferState:function ee(Me,ae,re){x.addBufferState(Me,ae,re)},addDroppedFrames:function ce(Me){x.addDroppedFrames(e.default.VIDEO,Me)},addPlayList:function qe(){B&&(x.addPlayList(B),B=null)},addDVBErrors:function J(Me){x.addDVBErrors(Me)},createPlaylistMetrics:function He(Me,ae){(B=new f.PlayList).start=new Date,B.mstart=Me,B.starttype=ae},createPlaylistTraceMetrics:function De(Me,ae,re){!0===k&&(k=!1,(N=new f.PlayListTrace).representationid=Me,N.start=new Date,N.mstart=ae,N.playbackspeed=null!==re?re.toString():null)},updatePlayListTraceMetrics:function he(Me){if(N)for(var ae in N)N[ae]=Me[ae]},pushPlayListTraceMetrics:function Y(Me,ae){if(!1===k&&B&&N&&N.start){var re=N.start,z=Me.getTime()-re.getTime();N.duration=z,N.stopreason=ae,B.trace.push(N),k=!0}},clearAllCurrentMetrics:function de(){x.clearAllCurrentMetrics()}},function P(){x=x||Object(L.default)(v).getInstance({settings:g.settings}),function _(){k=!0,N=null,B=null}()}(),T}c.__dashjs_factory_name="DashMetrics",O.default=R.default.getSingletonFactory(c)},"./src/dash/SegmentBaseLoader.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/dash/vo/Segment.js"),S=r("./src/streaming/vo/DashJSError.js"),R=r("./src/core/FactoryMaker.js"),j=r("./src/streaming/vo/FragmentRequest.js"),U=r("./src/streaming/net/URLLoader.js");function L(){var f,c,g,v,T,k,N,B,x,P,_,D,y,b=this.context;function de(ne,pe,me,xe){var ve=null,Oe=ne?y.resolve(ne.path):null,Ee=xe||{init:!0,url:Oe?Oe.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:pe};c.debug("Start searching for initialization.");var Ie=ce(Ee);B.load({request:Ie,success:function(Be){if(Ee.bytesLoaded=Ee.range.end,!(ve=v.findInitRange(Be)))return Ee.range.end=Ee.bytesLoaded+Ee.bytesToLoad,de(ne,pe,me,Ee);ne.range=ve,me(ne)},error:function(){me(ne)}}),c.debug("Perform init search: "+Ee.url)}function Te(ne,pe,me,xe,ve,Oe){if(me&&(void 0===me.start||void 0===me.end)){var Ee=me?me.toString().split("-"):null;me=Ee?{start:parseFloat(Ee[0]),end:parseFloat(Ee[1])}:null}ve=ve||q;var Ie=null,Re=null,Pe=!!me,ke=ne?y.resolve(ne.path):null,Be={init:!1,url:ke?ke.url:void 0,range:Pe?me:{start:0,end:1500},searching:!Pe,bytesLoaded:Oe?Oe.bytesLoaded:0,bytesToLoad:1500,mediaType:pe},qe=ce(Be);B.load({request:qe,success:function(Y){var J=Be.bytesToLoad,Me=Y.byteLength;if(Be.bytesLoaded=Be.range.end-Be.range.start,Ie=v.parse(Y),(Re=Ie.getBox("sidx"))&&Re.isComplete){var z,te,re=Re.references;if(null!=re&&re.length>0&&(z=1===re[0].reference_type),z){c.debug("Initiate multiple SIDX load."),Be.range.end=Be.range.start+Re.size;var X,Z,W,oe,Fe=[],We=0,at=(Re.offset||Be.range.start)+Re.size,et=function(Ot){Ot?(Fe=Fe.concat(Ot),++We>=Z&&(Fe.sort(function(tt,Et){return tt.startTime-Et.startTime<0?-1:0}),ve(Fe,ne,xe))):ve(null,ne,xe)};for(X=0,Z=re.length;X<Z;X++)W=at,oe=at+re[X].referenced_size-1,at+=re[X].referenced_size,Te(ne,pe,{start:W,end:oe},xe,et,Be)}else c.debug("Parsing segments from SIDX. representation "+pe+" - id: "+ne.id+" for range : "+Be.range.start+" - "+Be.range.end),te=function H(ne,pe){for(var Re,ke,Be,me=ne.references,xe=me.length,ve=ne.timescale,Oe=ne.earliest_presentation_time,Ee=pe.range.start+ne.offset+ne.first_offset+ne.size,Ie=[],qe=0;qe<xe;qe++)ke=me[qe].subsegment_duration,Be=me[qe].referenced_size,(Re=new e.default).duration=ke,Re.startTime=Oe,Re.timescale=ve,Re.mediaRange=Ee+"-"+(Ee+Be-1),Ie.push(Re),Oe+=ke,Ee+=Be;return Ie}(Re,Be),ve(te,ne,xe)}else{if(Re)Be.range.start=Re.offset||Be.range.start,Be.range.end=Be.range.start+(Re.size||J);else{if(Me<Be.bytesLoaded)return void ve(null,ne,xe);var ae=Ie.getLastBox();ae&&ae.size?(Be.range.start=ae.offset+ae.size,Be.range.end=Be.range.start+J):Be.range.end+=J}Te(ne,pe,Be.range,xe,null,Be)}},error:function(){ve(null,ne,xe)}}),c.debug("Perform SIDX load for type ".concat(pe," : ").concat(Be.url," with range ").concat(Be.range.start," - ").concat(Be.range.end))}function q(ne,pe,me){me({segments:ne,representation:pe,error:ne?void 0:new S.default(x.SEGMENT_BASE_LOADER_ERROR_CODE,x.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function ce(ne){if(ne.url){var pe=new j.default;return pe.setInfo(ne),pe}}return f={setConfig:function G(ne){ne.baseURLController&&(y=ne.baseURLController),ne.dashMetrics&&(k=ne.dashMetrics),ne.mediaPlayerModel&&(N=ne.mediaPlayerModel),ne.errHandler&&(g=ne.errHandler),ne.boxParser&&(v=ne.boxParser),ne.debug&&(c=ne.debug.getLogger(f)),ne.requestModifier&&(T=ne.requestModifier),ne.errors&&(x=ne.errors),ne.urlUtils&&(D=ne.urlUtils),ne.constants&&(P=ne.constants),ne.dashConstants&&(_=ne.dashConstants)},initialize:function I(){B=Object(U.default)(b).create({errHandler:g,dashMetrics:k,mediaPlayerModel:N,requestModifier:T,boxParser:v,errors:x,urlUtils:D,constants:P,dashConstants:_})},loadInitialization:function ee(ne,pe){return new Promise(function(me){de(ne,pe,me)})},loadSegments:function ue(ne,pe,me){return new Promise(function(xe){Te(ne,pe,me,xe)})},reset:function se(){B&&(B.abort(),B=null)}}}L.__dashjs_factory_name="SegmentBaseLoader",O.default=R.default.getSingletonFactory(L)},"./src/dash/WebmSegmentBaseLoader.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/utils/EBMLParser.js"),S=r("./src/streaming/constants/Constants.js"),R=r("./src/core/FactoryMaker.js"),j=r("./src/dash/vo/Segment.js"),U=r("./src/streaming/vo/FragmentRequest.js"),L=r("./src/streaming/net/URLLoader.js"),b=r("./src/streaming/vo/DashJSError.js");function f(){var g,v,T,k,N,B,x,P,_,D,c=this.context;function ee(H,ce,ne,pe){var xe,ve,Oe,Ee,Ie;for(ve=[],Ee=0,Ie=(xe=function G(H){var pe,me,ce=[],ne=Object(e.default)(c).create({data:H});for(ne.consumeTagAndSize(T.Segment.Cues);ne.moreData()&&ne.consumeTagAndSize(T.Segment.Cues.CuePoint,!0);){for((pe={}).CueTime=ne.parseTag(T.Segment.Cues.CuePoint.CueTime),pe.CueTracks=[];ne.moreData()&&ne.consumeTag(T.Segment.Cues.CuePoint.CueTrackPositions,!0);){var xe=ne.getMatroskaCodedNum(),ve=ne.getPos();if((me={}).Track=ne.parseTag(T.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),0===me.Track)throw new Error("Cue track cannot be 0");me.ClusterPosition=ne.parseTag(T.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),pe.CueTracks.push(me),ne.setPos(ve+xe)}if(0===pe.CueTracks.length)throw new Error("Mandatory cuetrack not found");ce.push(pe)}if(0===ce.length)throw new Error("mandatory cuepoint not found");return ce}(H)).length;Ee<Ie;Ee+=1)(Oe=new j.default).duration=Ee<xe.length-1?xe[Ee+1].CueTime-xe[Ee].CueTime:pe-xe[Ee].CueTime,Oe.startTime=xe[Ee].CueTime,Oe.timescale=1e3,Oe.mediaRange=xe[Ee].CueTracks[0].ClusterPosition+ce+"-"+(Ee<xe.length-1?xe[Ee+1].CueTracks[0].ClusterPosition+ce-1:ne-1),ve.push(Oe);return v.debug("Parsed cues: "+ve.length+" cues."),ve}function q(H){var ce=new U.default;return ce.setInfo(H),ce}return g={setConfig:function I(H){if(!(H.baseURLController&&H.dashMetrics&&H.mediaPlayerModel&&H.errHandler))throw new Error(S.default.MISSING_CONFIG_ERROR);D=H.baseURLController,B=H.dashMetrics,x=H.mediaPlayerModel,k=H.errHandler,_=H.errors,v=H.debug.getLogger(g),N=H.requestModifier},initialize:function A(){P=Object(L.default)(c).create({errHandler:k,dashMetrics:B,mediaPlayerModel:x,requestModifier:N,errors:_})},loadInitialization:function ue(H,ce){return new Promise(function(ne){var pe=null,me=H?D.resolve(H.path):null,xe=H?H.range.split("-"):null,ve={range:{start:xe?parseFloat(xe[0]):null,end:xe?parseFloat(xe[1]):null},request:pe,url:me?me.url:void 0,init:!0,mediaType:ce};v.info("Start loading initialization."),pe=q(ve),P.load({request:pe,success:function(){ne(H)},error:function(){ne(H)}}),v.debug("Perform init load: "+ve.url)})},loadSegments:function Te(H,ce,ne){return new Promise(function(pe){var me=null,xe=H?D.resolve(H.path):null,ve=xe?xe.url:void 0;me=q({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:me,url:ve,init:!1,mediaType:ce}),v.debug("Parsing ebml header"),P.load({request:me,success:function(ke){!function de(H,ce,ne,pe){if(H&&0!==H.byteLength){var xe,ve,Oe,Ee,me=Object(e.default)(c).create({data:H}),Ie=ne?ne.split("-"):null,Re=null,Pe={url:ce,range:{start:Ie?parseFloat(Ie[0]):null,end:Ie?parseFloat(Ie[1]):null},request:Re};for(v.debug("Parse EBML header: "+Pe.url),me.skipOverElement(T.EBML),me.consumeTag(T.Segment),Oe=me.getMatroskaCodedNum(),Oe+=me.getPos(),Ee=me.getPos();me.moreData()&&!me.consumeTagAndSize(T.Segment.Info,!0);)if(!(me.skipOverElement(T.Segment.SeekHead,!0)||me.skipOverElement(T.Segment.Tracks,!0)||me.skipOverElement(T.Segment.Cues,!0)||me.skipOverElement(T.Void,!0)))throw new Error("no valid top level element found");for(;void 0===xe;){var ke=me.getMatroskaCodedNum(!0),Be=me.getMatroskaCodedNum();ke===T.Segment.Info.Duration.tag?xe=me[T.Segment.Info.Duration.parse](Be):me.setPos(me.getPos()+Be)}Re=q(Pe),P.load({request:Re,success:function(he){ve=ee(he,Ee,Oe,xe),pe(ve)},error:function(){v.error("Download Error: Cues "+Pe.url),pe(null)}}),v.debug("Perform cues load: "+Pe.url+" bytes="+Pe.range.start+"-"+Pe.range.end)}else pe(null)}(ke,ve,ne,function(Be){pe({segments:Be,representation:H,error:Be?void 0:new b.default(_.SEGMENT_BASE_LOADER_ERROR_CODE,_.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})})},error:function(){pe({representation:H,error:new b.default(_.SEGMENT_BASE_LOADER_ERROR_CODE,_.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}})})},reset:function se(){P&&(P.abort(),P=null)}},function y(){T={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}}}(),g}f.__dashjs_factory_name="WebmSegmentBaseLoader",O.default=R.default.getSingletonFactory(f)},"./src/dash/constants/DashConstants.js":function(Ve,O,r){"use strict";function e(c){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(c)}function R(c,g){for(var v=0;v<g.length;v++){var T=g[v];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(c,U(T.key),T)}}function U(c){var g=function L(c,g){if("object"!==e(c)||null===c)return c;var v=c[Symbol.toPrimitive];if(void 0!==v){var T=v.call(c,g||"default");if("object"!==e(T))return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===g?String:Number)(c)}(c,"string");return"symbol"===e(g)?g:String(g)}r.r(O);var f=new(function(){function c(){(function S(c,g){if(!(c instanceof g))throw new TypeError("Cannot call a class as a function")})(this,c),this.init()}return function j(c,g,v){return g&&R(c.prototype,g),v&&R(c,v),Object.defineProperty(c,"prototype",{writable:!1}),c}(c,[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.INBAND_EVENT_STREAM="InbandEventStream",this.PRODUCER_REFERENCE_TIME="ProducerReferenceTime",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.ROLE_ASARRAY="Role_asArray",this.REPRESENTATION_ASARRAY="Representation_asArray",this.PRODUCERREFERENCETIME_ASARRAY="ProducerReferenceTime_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.STATIC="static",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SERVICE_DESCRIPTION="ServiceDescription",this.SERVICE_DESCRIPTION_SCOPE="Scope",this.SERVICE_DESCRIPTION_LATENCY="Latency",this.SERVICE_DESCRIPTION_PLAYBACK_RATE="PlaybackRate",this.SERVICE_DESCRIPTION_OPERATING_QUALITY="OperatingQuality",this.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH="OperatingBandwidth",this.PATCH_LOCATION="PatchLocation",this.PUBLISH_TIME="publishTime",this.ORIGINAL_PUBLISH_TIME="originalPublishTime",this.ORIGINAL_MPD_ID="mpdId",this.WALL_CLOCK_TIME="wallClockTime",this.PRESENTATION_TIME="presentationTime",this.LABEL="Label",this.GROUP_LABEL="GroupLabel",this.CONTENT_STEERING="ContentSteering",this.CONTENT_STEERING_AS_ARRAY="ContentSteering_asArray",this.DEFAULT_SERVICE_LOCATION="defaultServiceLocation",this.QUERY_BEFORE_START="queryBeforeStart",this.PROXY_SERVER_URL="proxyServerURL",this.CONTENT_STEERING_RESPONSE={VERSION:"VERSION",TTL:"TTL",RELOAD_URI:"RELOAD-URI",SERVICE_LOCATION_PRIORITY:"SERVICE-LOCATION-PRIORITY"}}}]),c}());O.default=f},"./src/dash/controllers/ContentSteeringController.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js"),S=r("./src/core/Debug.js"),R=r("./src/streaming/net/URLLoader.js"),j=r("./src/core/errors/Errors.js"),U=r("./src/dash/vo/ContentSteeringRequest.js"),L=r("./src/dash/vo/ContentSteeringResponse.js"),b=r("./src/dash/constants/DashConstants.js"),f=r("./src/streaming/MediaPlayerEvents.js"),c=r("./src/core/events/Events.js"),g=r("./src/streaming/constants/Constants.js"),v=r("./src/core/Utils.js"),T=r("./src/streaming/utils/URLUtils.js"),k_THROUGHPUT="_DASH_throughput",k_PATHWAY="_DASH_pathway",k_URL="url";function N(){var P,_,D,y,A,I,G,ee,de,ue,Te,q,se,H,ce,B=this.context,x=Object(T.default)(B).getInstance();function xe(Y){Y&&Y.toStreamInfo&&(y=Y.toStreamInfo)}function ve(Y){Y&&Y.request&&Y.request.serviceLocation&&(A=Y.request.serviceLocation)}function Oe(){var Y=Te.getValue();return ce.getContentSteering(Y)}function Ie(){return new Promise(function(Y){try{var J=Oe();if(!J||!J.serverUrl)return void Y();var Me=function Re(Y){var J=Y.proxyServerUrl?Y.proxyServerUrl:Y.serverUrl;D&&D.reloadUri&&(J=x.isRelative(D.reloadUri)?x.resolve(D.reloadUri,Y.serverUrl):D.reloadUri);var Me=[];if(y){var ae=ce.getIsDynamic(),re=ce.getAllMediaInfoForType(y,g.default.VIDEO).length>0?g.default.VIDEO:g.default.AUDIO,z=se.getThroughputHistory(),te=z?z.getAverageThroughput(re,ae):NaN;isNaN(te)||Me.push({key:k_THROUGHPUT,value:1e3*te})}return A&&Me.push({key:k_PATHWAY,value:A}),Y.proxyServerUrl&&Y.proxyServerUrl===J&&Y.serverUrl&&Me.push({key:k_URL,value:encodeURI(Y.serverUrl)}),v.default.addAditionalQueryParameterToUrl(J,Me)}(J),ae=new U.default(Me);G.load({request:ae,success:function(z){(function Pe(Y){!Y||!Y[b.default.CONTENT_STEERING_RESPONSE.VERSION]||1!==parseInt(Y[b.default.CONTENT_STEERING_RESPONSE.VERSION])||((D=new L.default).version=Y[b.default.CONTENT_STEERING_RESPONSE.VERSION],Y[b.default.CONTENT_STEERING_RESPONSE.TTL]&&!isNaN(Y[b.default.CONTENT_STEERING_RESPONSE.TTL])&&(D.ttl=Y[b.default.CONTENT_STEERING_RESPONSE.TTL]),Y[b.default.CONTENT_STEERING_RESPONSE.RELOAD_URI]&&(D.reloadUri=Y[b.default.CONTENT_STEERING_RESPONSE.RELOAD_URI]),Y[b.default.CONTENT_STEERING_RESPONSE.SERVICE_LOCATION_PRIORITY]&&(D.serviceLocationPriority=Y[b.default.CONTENT_STEERING_RESPONSE.SERVICE_LOCATION_PRIORITY]),ke())})(z),H.trigger(f.default.CONTENT_STEERING_REQUEST_COMPLETED,{currentSteeringResponseData:D,url:Me}),Y()},error:function(z){(function qe(Y){_.warn("Error fetching data from content steering server",Y),ke()})(z),Y(z)}})}catch(re){Y(re)}})}function ke(){D&&D.ttl&&!isNaN(D.ttl)&&(I&&clearTimeout(I),I=setTimeout(function(){Ie()},1e3*D.ttl))}function Be(){I&&clearTimeout(I),I=null}function he(){D=null,y=null,A=null,Be()}return P={reset:function De(){he(),H.off(f.default.PERIOD_SWITCH_COMPLETED,xe,P),H.off(c.default.FRAGMENT_LOADING_STARTED,ve,P)},setConfig:function pe(Y){!Y||(Y.adapter&&(ce=Y.adapter),Y.errHandler&&(ee=Y.errHandler),Y.dashMetrics&&(de=Y.dashMetrics),Y.mediaPlayerModel&&(ue=Y.mediaPlayerModel),Y.requestModifier&&(q=Y.requestModifier),Y.manifestModel&&(Te=Y.manifestModel),Y.abrController&&(se=Y.abrController),Y.eventBus&&(H=Y.eventBus))},loadSteeringData:Ie,getCurrentSteeringResponseData:function He(){return D},shouldQueryBeforeStart:function Ee(){var Y=Oe();return Y&&Y.queryBeforeStart},getSteeringDataFromManifest:Oe,stopSteeringRequestTimer:Be,initialize:function me(){G=Object(R.default)(B).create({errHandler:ee,dashMetrics:de,mediaPlayerModel:ue,requestModifier:q,errors:j.default}),H.on(f.default.PERIOD_SWITCH_COMPLETED,xe,P),H.on(c.default.FRAGMENT_LOADING_STARTED,ve,P)}},function ne(){_=Object(S.default)(B).getInstance().getLogger(P),he()}(),P}N.__dashjs_factory_name="ContentSteeringController",O.default=e.default.getSingletonFactory(N)},"./src/dash/controllers/RepresentationController.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/constants/Constants.js"),S=r("./src/core/FactoryMaker.js"),R=r("./src/streaming/MediaPlayerEvents.js"),j=r("./src/dash/utils/SegmentsUtils.js");function U(L){var _,D,y,A,I,b=(L=L||{}).eventBus,f=L.events,c=L.abrController,g=L.dashMetrics,v=L.playbackController,T=L.timelineConverter,k=L.type,N=L.streamInfo,B=L.dashConstants,x=L.segmentsController,P=L.isDynamic;function de(){return k}function ue(){if(!(c&&g&&v&&T))throw new Error(e.default.MISSING_CONFIG_ERROR)}function q(){return y}function se(){return I}function H(){D=null,y=!0,A=[]}function pe(De){return new Promise(function(he,Y){var J=De.hasInitialization(),Me=De.hasSegments(),ae=[];ae.push(x.updateInitData(De,J)),ae.push(x.updateSegmentData(De,Me)),Promise.all(ae).then(function(re){re[0]&&!re[0].error&&(De=function xe(De,he){return he&&!he.error&&he.representation?he.representation:De}(De,re[0])),re[1]&&!re[1].error&&(De=function ve(De,he){if(he&&!he.error){var ae,re,z,te,Y=he.segments,J=[],Me=0;for(ae=0,re=Y?Y.length:0;ae<re;ae++)z=Y[ae],(te=Object(j.getTimeBasedSegment)(T,P,De,z.startTime,z.duration,z.timescale,z.media,z.mediaRange,Me))&&(J.push(te),te=null,Me++);return J.length>0&&(De.segments=J),De}}(De,re[1])),function me(De){De.mediaFinishedInformation=x.getMediaFinishedInformation(De)}(De),function ke(De){if(q()){var J,he=g.getCurrentManifestUpdate(),Y=!1;if(he){for(var ae=0;ae<he.representationInfo.length;ae++)if((J=he.representationInfo[ae]).index===De.index&&J.mediaType===de()){Y=!0;break}Y||g.addManifestUpdateRepresentationInfo(De,de())}if(function Re(){for(var De=0,he=A.length;De<he;De++){var Y=A[De].segmentInfoType;if(!A[De].hasInitialization()||(Y===B.SEGMENT_BASE||Y===B.BASE_URL)&&!A[De].segments)return!1}return!0}()){c.setPlaybackQuality(k,N,function Ie(De){return A.indexOf(De)}(I));var re=g.getCurrentDVRInfo(k);re&&g.updateManifestUpdateInfo({latency:re.range.end-v.getTime()}),g.getCurrentRepresentationSwitch(se().adaptation.type)||Oe(),Pe()}}}(De),he()}).catch(function(re){Y(re)})})}function Oe(){ue();var De=new Date,he=se(),Y=1e3*v.getTime();he&&g.addRepresentationSwitch(he.adaptation.type,De,Y,he.id),b.trigger(R.default.REPRESENTATION_SWITCH,{mediaType:k,streamId:N.id,currentRepresentation:he,numberOfRepresentations:A.length},{streamId:N.id,mediaType:k})}function Ee(De){return null==De||De>=A.length?null:A[De]}function Pe(De){y=!1,b.trigger(f.DATA_UPDATE_COMPLETED,{data:D,currentRepresentation:I,error:De},{streamId:N.id,mediaType:k})}function qe(De){I=De}function He(De){if(De.newDuration){var he=se();he&&he.adaptation.period&&(he.adaptation.period.duration=De.newDuration)}}return _={getStreamId:function ee(){return N.id},getType:de,getData:function Te(){return D},isUpdating:q,updateData:function ne(De,he,Y,J,Me){if(ue(),y=!0,A=he,qe(Ee(Me)),D=De,Y!==e.default.VIDEO&&Y!==e.default.AUDIO&&(Y!==e.default.TEXT||!J))return Pe(),Promise.resolve();for(var re=[],z=0,te=A.length;z<te;z++)re.push(pe(A[z]));return Promise.all(re)},getCurrentRepresentation:se,getRepresentationForQuality:Ee,prepareQualityChange:function Be(De){qe(Ee(De)),Oe()},reset:function ce(){b.off(R.default.MANIFEST_VALIDITY_CHANGED,He,_),H()}},function G(){H(),b.on(R.default.MANIFEST_VALIDITY_CHANGED,He,_)}(),_}U.__dashjs_factory_name="RepresentationController",O.default=S.default.getClassFactory(U)},"./src/dash/controllers/SegmentBaseController.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js"),S=r("./src/dash/SegmentBaseLoader.js"),R=r("./src/dash/WebmSegmentBaseLoader.js");function j(L){var _,D,y,b=this.context,f=(L=L||{}).eventBus,c=L.events,g=L.dashMetrics,v=L.mediaPlayerModel,T=L.errHandler,k=L.baseURLController,N=L.debug,B=L.boxParser,x=L.requestModifier,P=L.errors;function I(Te){return"webm"===(Te?Te.split("/")[1]:"").toLowerCase()}return _={initialize:function G(){D.initialize(),y.initialize()},getSegmentBaseInitSegment:function ee(Te){return I(Te.representation.mimeType)?y.loadInitialization(Te.representation,Te.mediaType):D.loadInitialization(Te.representation,Te.mediaType)},getSegmentList:function de(Te){return I(Te.mimeType)?y.loadSegments(Te.representation,Te.mediaType,Te.representation?Te.representation.indexRange:null):D.loadSegments(Te.representation,Te.mediaType,Te.representation?Te.representation.indexRange:null)},reset:function ue(){D.reset(),y.reset()}},function A(){D=Object(S.default)(b).getInstance(),y=Object(R.default)(b).getInstance(),D.setConfig({baseURLController:k,dashMetrics:g,mediaPlayerModel:v,errHandler:T,eventBus:f,events:c,errors:P,debug:N,boxParser:B,requestModifier:x}),y.setConfig({baseURLController:k,dashMetrics:g,mediaPlayerModel:v,errHandler:T,eventBus:f,events:c,errors:P,debug:N,requestModifier:x})}(),_}j.__dashjs_factory_name="SegmentBaseController";var U=e.default.getSingletonFactory(j);O.default=U},"./src/dash/controllers/SegmentsController.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js"),S=r("./src/dash/utils/TimelineSegmentsGetter.js"),R=r("./src/dash/utils/TemplateSegmentsGetter.js"),j=r("./src/dash/utils/ListSegmentsGetter.js"),U=r("./src/dash/utils/SegmentBaseGetter.js");function L(f){var k,N,c=this.context,g=(f=f||{}).dashConstants,v=f.type,T=f.segmentBaseController;function D(G){return G?G.segments?N[g.SEGMENT_BASE]:N[G.segmentInfoType]:null}return k={initialize:function x(G){N[g.SEGMENT_TIMELINE]=Object(S.default)(c).create(f,G),N[g.SEGMENT_TEMPLATE]=Object(R.default)(c).create(f,G),N[g.SEGMENT_LIST]=Object(j.default)(c).create(f,G),N[g.SEGMENT_BASE]=Object(U.default)(c).create(f,G)},updateInitData:function P(G,ee){return ee?Promise.resolve():T.getSegmentBaseInitSegment({representation:G,mediaType:v})},updateSegmentData:function _(G,ee){return ee?Promise.resolve():T.getSegmentList({mimeType:G.mimeType,representation:G,mediaType:v})},getSegmentByIndex:function y(G,ee,de){var ue=D(G);return ue?ue.getSegmentByIndex(G,ee,de):null},getSegmentByTime:function A(G,ee){var de=D(G);return de?de.getSegmentByTime(G,ee):null},getMediaFinishedInformation:function I(G){var ee=D(G);return ee?ee.getMediaFinishedInformation(G):{numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN}}},function B(){N={}}(),k}L.__dashjs_factory_name="SegmentsController";var b=e.default.getClassFactory(L);O.default=b},"./src/dash/controllers/ServiceDescriptionController.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js"),S=r("./src/core/Debug.js"),R=r("./src/streaming/constants/Constants.js"),j=r("./src/dash/constants/DashConstants.js"),U=[R.default.SERVICE_DESCRIPTION_DVB_LL_SCHEME],L_VIDEO="video",L_AUDIO="audio",L_ANY="any",L_ALL="all";function b(){var c,g,v,T,k,f=this.context;function P(){g={liveDelay:NaN,liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN}},minBitrate:{},maxBitrate:{},initialBitrate:{}},v=[]}function ue(H,ce,ne){try{g[H][ce]=ne/1e3}catch(pe){T.error(pe)}}return c={getServiceDescriptionSettings:function _(){return g},getProducerReferenceTimeOffsets:function Te(){return v},calculateProducerReferenceTimeOffsets:function q(H){try{var ce=[];if(H&&H.length>0){var ne=[R.default.VIDEO,R.default.AUDIO,R.default.TEXT],pe=k.getAvailabilityStartTime()/1e3;H.forEach(function(me){var xe=ne.reduce(function(ve,Oe){return ve.concat(k.getAllMediaInfoForType(me,Oe))},[]).reduce(function(ve,Oe){return k.getProducerReferenceTimes(me,Oe).forEach(function(Ie){var Re=k.getVoRepresentations(Oe);if(Re&&Re.length>0&&Re[0].adaptation&&Re[0].segmentInfoType===j.default.SEGMENT_TEMPLATE){var Pe=Re[0],Be=new Date(Ie[j.default.WALL_CLOCK_TIME]).getTime()/1e3;ve.push({id:Ie[j.default.ID],to:pe-(Be-(Ie[j.default.PRESENTATION_TIME]/Pe[j.default.TIMESCALE]-Pe[j.default.PRESENTATION_TIME_OFFSET]+me.start))})}}),ve},[]);ce=ce.concat(xe)})}v=ce}catch(me){T.error(me),v=[]}},applyServiceDescription:function D(H){if(H&&H.serviceDescriptions){var ce=H.serviceDescriptions.filter(function(me){return U.includes(me.schemeIdUri)}),ne=H.serviceDescriptions.filter(function(me){return null==me.schemeIdUri}),pe=ce.length>0?ce[ce.length-1]:ne[ne.length-1];!pe||(pe.latency&&pe.latency.target>0&&function y(H){var ce;if(ce=H.schemeIdUri===R.default.SERVICE_DESCRIPTION_DVB_LL_SCHEME?function I(H){return{liveDelay:H.latency.target/1e3,maxDrift:!isNaN(H.latency.max)&&H.latency.max>H.latency.target?(H.latency.max-H.latency.target+500)/1e3:NaN,referenceId:H.latency.referenceId||NaN}}(H):function A(H){return{liveDelay:H.latency.target/1e3,maxDrift:!isNaN(H.latency.max)&&H.latency.max>H.latency.target?(H.latency.max-H.latency.target+500)/1e3:NaN,referenceId:H.latency.referenceId||NaN}}(H),v.length>0){var ne=function se(H){var ne,ce=0,pe=v.filter(function(me){return me.id===H.referenceId});return 0===pe.length?(ce=v.length>0?v[0].to:0,ne=v[0].id||NaN):(ce=pe[0].to||0,ne=pe[0].id||NaN),{to:ce,id:ne}}(ce),pe=ne.to,me=ne.id;g.liveDelay=ce.liveDelay-pe,g.liveCatchup.maxDrift=ce.maxDrift,T.debug("\n                Found latency properties coming from service description. Applied time offset of ".concat(pe," from ProducerReferenceTime element with id ").concat(me,".\n                Live Delay: ").concat(ce.liveDelay-pe,", Live catchup max drift: ").concat(ce.maxDrift,"\n            "))}else g.liveDelay=ce.liveDelay,g.liveCatchup.maxDrift=ce.maxDrift,T.debug("Found latency properties coming from service description: Live Delay: ".concat(ce.liveDelay,", Live catchup max drift: ").concat(ce.maxDrift))}(pe),pe.playbackRate&&function G(H){var ce=H.playbackRate.min?Math.round(1e3*(H.playbackRate.min-1))/1e3:NaN,ne=H.playbackRate.max?Math.round(1e3*(H.playbackRate.max-1))/1e3:NaN;g.liveCatchup.playbackRate.min=ce,g.liveCatchup.playbackRate.max=ne,T.debug("Found latency properties coming from service description: Live catchup min playback rate: ".concat(ce)),T.debug("Found latency properties coming from service description: Live catchup max playback rate: ".concat(ne))}(pe),pe.operatingBandwidth&&function de(H){if(H&&H.operatingBandwidth&&H.operatingBandwidth.mediaType&&H.operatingBandwidth.mediaType!==L_ALL){var ce={};ce.minBandwidth=H.operatingBandwidth.min,ce.maxBandwidth=H.operatingBandwidth.max,ce.targetBandwidth=H.operatingBandwidth.target;var ne=[];H.operatingBandwidth.mediaType===L_VIDEO||H.operatingBandwidth.mediaType===L_AUDIO?ne.push(H.operatingBandwidth.mediaType):H.operatingBandwidth.mediaType===L_ANY&&(ne.push(L_AUDIO),ne.push(L_VIDEO)),ne.forEach(function(pe){isNaN(ce.minBandwidth)||ue("minBitrate",pe,ce.minBandwidth),isNaN(ce.maxBandwidth)||ue("maxBitrate",pe,ce.maxBandwidth),isNaN(ce.targetBandwidth)||ue("initialBitrate",pe,ce.targetBandwidth)})}}(pe))}},reset:function x(){P()},setConfig:function B(H){!H||H.adapter&&(k=H.adapter)}},function N(){T=Object(S.default)(f).getInstance().getLogger(c),P()}(),c}b.__dashjs_factory_name="ServiceDescriptionController",O.default=e.default.getSingletonFactory(b)},"./src/dash/models/DashManifestModel.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/constants/Constants.js"),S=r("./src/dash/constants/DashConstants.js"),R=r("./src/dash/vo/Representation.js"),j=r("./src/dash/vo/AdaptationSet.js"),U=r("./src/dash/vo/Period.js"),L=r("./src/dash/vo/Mpd.js"),b=r("./src/dash/vo/UTCTiming.js"),f=r("./src/dash/vo/Event.js"),c=r("./src/dash/vo/BaseURL.js"),g=r("./src/dash/vo/EventStream.js"),v=r("./src/dash/vo/ProducerReferenceTime.js"),T=r("./src/dash/vo/ContentSteering.js"),k=r("./src/streaming/utils/ObjectUtils.js"),N=r("./src/streaming/utils/URLUtils.js"),B=r("./src/core/FactoryMaker.js"),x=r("./src/core/Debug.js"),P=r("./src/streaming/vo/DashJSError.js"),_=r("./src/core/errors/Errors.js"),D=r("./src/streaming/thumbnail/ThumbnailTracks.js");function y(q,se){var H="undefined"!=typeof Symbol&&q[Symbol.iterator]||q["@@iterator"];if(!H){if(Array.isArray(q)||(H=G(q))||se&&q&&"number"==typeof q.length){H&&(q=H);var ce=0,ne=function(){};return{s:ne,n:function(){return ce>=q.length?{done:!0}:{done:!1,value:q[ce++]}},e:function(Oe){throw Oe},f:ne}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var xe,pe=!0,me=!1;return{s:function(){H=H.call(q)},n:function(){var Oe=H.next();return pe=Oe.done,Oe},e:function(Oe){me=!0,xe=Oe},f:function(){try{!pe&&null!=H.return&&H.return()}finally{if(me)throw xe}}}}function A(q){return function de(q){if(Array.isArray(q))return ue(q)}(q)||function ee(q){if("undefined"!=typeof Symbol&&null!=q[Symbol.iterator]||null!=q["@@iterator"])return Array.from(q)}(q)||G(q)||function I(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(q,se){if(q){if("string"==typeof q)return ue(q,se);var H=Object.prototype.toString.call(q).slice(8,-1);if("Object"===H&&q.constructor&&(H=q.constructor.name),"Map"===H||"Set"===H)return Array.from(q);if("Arguments"===H||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(H))return ue(q,se)}}function ue(q,se){(null==se||se>q.length)&&(se=q.length);for(var H=0,ce=new Array(se);H<se;H++)ce[H]=q[H];return ce}function Te(){var q,se,H,ce,ne=this.context,pe=Object(N.default)(ne).getInstance(),me=Number.isInteger||function(ct){return"number"==typeof ct&&isFinite(ct)&&Math.floor(ct)===ct};function ve(ct,qt){if(!ct)throw new Error("adaptation is not defined");if(!qt)throw new Error("type is not defined");if(ct.Representation_asArray&&ct.Representation_asArray.length){var fn=Xt(ct.Representation_asArray[0]);if(fn&&fn.length>0&&D.THUMBNAILS_SCHEME_ID_URIS.indexOf(fn[0].schemeIdUri)>=0)return qt===e.default.IMAGE}if(ct.ContentComponent_asArray&&ct.ContentComponent_asArray.length>0){if(ct.ContentComponent_asArray.length>1)return qt===e.default.MUXED;if(ct.ContentComponent_asArray[0].contentType===qt)return!0}var It=qt===e.default.TEXT?new RegExp("(ttml|vtt|wvtt|stpp)"):new RegExp(qt);if(ct.Representation_asArray&&ct.Representation_asArray.length&&It.test(ct.Representation_asArray[0].codecs))return!0;if(ct.hasOwnProperty(S.default.MIME_TYPE))return It.test(ct.mimeType);if(ct.Representation_asArray)for(var Rt,sn=0;sn<ct.Representation_asArray.length;sn++)if((Rt=ct.Representation_asArray[sn]).hasOwnProperty(S.default.MIME_TYPE))return It.test(Rt.mimeType);return!1}function Oe(ct){if(!ct)throw new Error("adaptation is not defined");if(ct.hasOwnProperty(S.default.SEGMENT_TEMPLATE)||ct.hasOwnProperty(S.default.SEGMENT_TIMELINE)||ct.hasOwnProperty(S.default.SEGMENT_LIST)||ct.hasOwnProperty(S.default.SEGMENT_BASE))return!0;if(ct.Representation_asArray&&ct.Representation_asArray.length>0){var qt=ct.Representation_asArray[0];if(qt.hasOwnProperty(S.default.SEGMENT_TEMPLATE)||qt.hasOwnProperty(S.default.SEGMENT_TIMELINE)||qt.hasOwnProperty(S.default.SEGMENT_LIST)||qt.hasOwnProperty(S.default.SEGMENT_BASE))return!0}return!1}function Ee(ct){return ve(ct,e.default.AUDIO)}function Ie(ct){return ve(ct,e.default.VIDEO)}function Re(ct){return ve(ct,e.default.TEXT)}function Pe(ct){return ve(ct,e.default.MUXED)}function ke(ct){return ve(ct,e.default.IMAGE)}function Me(){return function(ct,qt){return ct.bandwidth-qt.bandwidth}}function ae(ct){return ct&&Array.isArray(ct.Representation_asArray)&&ct.Representation_asArray.sort(function(ct,qt){return ct.bandwidth-qt.bandwidth}),ct}function re(ct,qt){return ct&&ct.Period_asArray&&me(qt)&&ct.Period_asArray[qt]?ct.Period_asArray[qt].AdaptationSet_asArray:[]}function z(ct){return ct&&ct.Period_asArray?ct.Period_asArray:[]}function ut(ct){var qt=!1;return ct&&ct.hasOwnProperty("type")&&(qt=ct.type===S.default.DYNAMIC),qt}function Xt(ct){return ct&&ct.EssentialProperty_asArray&&ct.EssentialProperty_asArray.length?ct.EssentialProperty_asArray.map(function(qt){return{schemeIdUri:qt.schemeIdUri,value:qt.value}}):null}function jn(ct){if(!ct||!ct.S_asArray)return NaN;var qt=ct.S_asArray[0],fn=ct.S_asArray[1];return qt.hasOwnProperty("d")?qt.d:fn.t-qt.t}function Vn(ct){return ct.adaptation.period.start-ct.presentationTimeOffset}function mt(ct,qt){if(!ct)throw new Error("Period cannot be null or undefined");var fn=U.default.DEFAULT_ID+"_"+qt;return ct.hasOwnProperty(S.default.ID)&&ct.id.length>0&&"__proto__"!==ct.id&&(fn=ct.id),fn}function pt(ct,qt,fn){var kt,It=[];if(!ct)return It;for(kt=0;kt<ct.length;kt++){var Rt=new g.default;if(Rt.timescale=1,Rt.representation=qt,!ct[kt].hasOwnProperty(e.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");Rt.schemeIdUri=ct[kt].schemeIdUri,ct[kt].hasOwnProperty(S.default.TIMESCALE)&&(Rt.timescale=ct[kt].timescale),ct[kt].hasOwnProperty(S.default.VALUE)&&(Rt.value=ct[kt].value),It.push(Rt),Rt.period=fn}return It}function Gt(ct){var qt=[],It=!1;return(ct.BaseURL_asArray||[ct.baseUri]).some(function(kt){if(kt){var Rt=new c.default,sn=kt.__text||kt;return pe.isRelative(sn)&&(It=!0,ct.baseUri&&(sn=pe.resolve(sn,ct.baseUri))),Rt.url=sn,Rt.serviceLocation=kt.hasOwnProperty(S.default.SERVICE_LOCATION)&&kt.serviceLocation.length?kt.serviceLocation:sn,kt.hasOwnProperty(S.default.DVB_PRIORITY)&&(Rt.dvb_priority=kt[S.default.DVB_PRIORITY]),kt.hasOwnProperty(S.default.DVB_WEIGHT)&&(Rt.dvb_weight=kt[S.default.DVB_WEIGHT]),kt.hasOwnProperty(S.default.AVAILABILITY_TIME_OFFSET)&&(Rt.availabilityTimeOffset=kt[S.default.AVAILABILITY_TIME_OFFSET]),kt.hasOwnProperty(S.default.AVAILABILITY_TIME_COMPLETE)&&(Rt.availabilityTimeComplete="false"!==kt[S.default.AVAILABILITY_TIME_COMPLETE]),qt.push(Rt),It}}),qt}return q={getIsTypeOf:ve,getIsText:Re,getIsFragmented:Oe,getProducerReferenceTimesForAdaptation:function Be(ct){var qt=ct&&ct.hasOwnProperty(S.default.PRODUCERREFERENCETIME_ASARRAY)?ct[S.default.PRODUCERREFERENCETIME_ASARRAY]:[];(ct&&ct.hasOwnProperty(S.default.REPRESENTATION_ASARRAY)?ct[S.default.REPRESENTATION_ASARRAY]:[]).forEach(function(kt){kt.hasOwnProperty(S.default.PRODUCERREFERENCETIME_ASARRAY)&&qt.push.apply(qt,A(kt[S.default.PRODUCERREFERENCETIME_ASARRAY]))});var It=[];return qt.forEach(function(kt){var Rt=new v.default;kt.hasOwnProperty(S.default.ID)&&(Rt[S.default.ID]=kt[S.default.ID],kt.hasOwnProperty(S.default.WALL_CLOCK_TIME)&&(Rt[S.default.WALL_CLOCK_TIME]=kt[S.default.WALL_CLOCK_TIME],kt.hasOwnProperty(S.default.PRESENTATION_TIME)&&(Rt[S.default.PRESENTATION_TIME]=kt[S.default.PRESENTATION_TIME],It.push(Rt))))}),It},getLanguageForAdaptation:function qe(ct){var qt="";return ct&&ct.hasOwnProperty(S.default.LANG)&&(qt=ct.lang),qt},getViewpointForAdaptation:function He(ct){return ct&&ct.hasOwnProperty(S.default.VIEWPOINT)?ct.Viewpoint:null},getRolesForAdaptation:function De(ct){return ct&&ct.hasOwnProperty(S.default.ROLE_ASARRAY)?ct.Role_asArray:[]},getAccessibilityForAdaptation:function he(ct){return ct&&ct.hasOwnProperty(S.default.ACCESSIBILITY_ASARRAY)?ct.Accessibility_asArray:[]},getAudioChannelConfigurationForAdaptation:function Y(ct){return ct&&ct.hasOwnProperty(S.default.AUDIOCHANNELCONFIGURATION_ASARRAY)?ct.AudioChannelConfiguration_asArray:[]},getAudioChannelConfigurationForRepresentation:function J(ct){return ct&&ct.hasOwnProperty(S.default.AUDIOCHANNELCONFIGURATION_ASARRAY)?ct.AudioChannelConfiguration_asArray:[]},getAdaptationForIndex:function Z(ct,qt,fn){var It=re(qt,fn);return It.length>0&&me(ct)?It[ct]:null},getIndexForAdaptation:function W(ct,qt,fn){if(!ct)return-1;for(var It=re(qt,fn),kt=0;kt<It.length;kt++)if(Object(k.default)(ne).getInstance().areEqual(It[kt],ct))return kt;return-1},getAdaptationForId:function X(ct,qt,fn){var kt,Rt,It=re(qt,fn);for(kt=0,Rt=It.length;kt<Rt;kt++)if(It[kt].hasOwnProperty(S.default.ID)&&It[kt].id===ct)return It[kt];return null},getAdaptationsForType:function oe(ct,qt,fn){var kt,Rt,It=re(ct,qt),sn=[];for(kt=0,Rt=It.length;kt<Rt;kt++)ve(It[kt],fn)&&sn.push(ae(It[kt]));return sn},getRealPeriods:z,getRealPeriodForIndex:function te(ct,qt){var fn=z(qt);return fn.length>0&&me(ct)?fn[ct]:null},getCodec:function be(ct,qt,fn){var It=null;if(ct&&ct.Representation_asArray&&ct.Representation_asArray.length>0){var kt=me(qt)&&qt>=0&&qt<ct.Representation_asArray.length?ct.Representation_asArray[qt]:ct.Representation_asArray[0];kt&&(It=kt.mimeType+';codecs="'+kt.codecs+'"',fn&&void 0!==kt.width&&(It+=';width="'+kt.width+'";height="'+kt.height+'"'))}return It&&(It=It.replace(/\sprofiles=[^;]*/g,"")),It},getSelectionPriority:function Kt(ct){try{var qt=ct&&void 0!==ct.selectionPriority?parseInt(ct.selectionPriority):1;return isNaN(qt)?1:qt}catch(fn){return 1}},getMimeType:function Fe(ct){return ct&&ct.Representation_asArray&&ct.Representation_asArray.length>0?ct.Representation_asArray[0].mimeType:null},getKID:function We(ct){return ct&&ct.hasOwnProperty(S.default.CENC_DEFAULT_KID)?ct[S.default.CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function at(ct){if(!ct||!Array.isArray(ct.Label_asArray))return[];for(var qt=[],fn=0;fn<ct.Label_asArray.length;fn++)qt.push({lang:ct.Label_asArray[fn].lang,text:ct.Label_asArray[fn].__text||ct.Label_asArray[fn]});return qt},getContentProtectionData:function et(ct){return ct&&ct.hasOwnProperty(S.default.CONTENTPROTECTION_ASARRAY)&&0!==ct.ContentProtection_asArray.length?ct.ContentProtection_asArray:null},getIsDynamic:ut,getId:function Ot(ct){return ct&&ct[S.default.ID]||null},hasProfile:function tt(ct,qt){var fn=!1;return ct&&ct.profiles&&ct.profiles.length>0&&(fn=-1!==ct.profiles.indexOf(qt)),fn},getDuration:function Et(ct){return ct&&ct.hasOwnProperty(S.default.MEDIA_PRESENTATION_DURATION)?ct.mediaPresentationDuration:ct&&"dynamic"==ct.type?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function Yt(ct){return ct&&ct.bandwidth?ct.bandwidth:NaN},getManifestUpdatePeriod:function vt(ct){var qt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,fn=NaN;return ct&&ct.hasOwnProperty(S.default.MINIMUM_UPDATE_PERIOD)&&(fn=ct.minimumUpdatePeriod),isNaN(fn)?fn:Math.max(fn-qt,1)},getPublishTime:function At(ct){return ct&&ct.hasOwnProperty(S.default.PUBLISH_TIME)?new Date(ct[S.default.PUBLISH_TIME]):null},getRepresentationCount:function Dt(ct){return ct&&Array.isArray(ct.Representation_asArray)?ct.Representation_asArray.length:0},getBitrateListForAdaptation:function $t(ct){var qt=ae(ct);return(qt&&Array.isArray(qt.Representation_asArray)?qt.Representation_asArray:[]).map(function(It){return{bandwidth:It.bandwidth,width:It.width||0,height:It.height||0,scanType:It.scanType||null,id:It.id||null}})},getRepresentationFor:function ln(ct,qt){return qt&&qt.Representation_asArray&&qt.Representation_asArray.length>0&&me(ct)?qt.Representation_asArray[ct]:null},getRepresentationsForAdaptation:function Rn(ct){var It,kt,qt=[],fn=function Bn(ct){if(ct&&ct.period&&me(ct.period.index)){var qt=ct.period.mpd.manifest.Period_asArray[ct.period.index];if(qt&&qt.AdaptationSet_asArray&&me(ct.index))return ae(qt.AdaptationSet_asArray[ct.index])}}(ct);if(fn&&fn.Representation_asArray){if(ct&&ct.period&&me(ct.period.index)){var Rt=Gt(ct.period.mpd.manifest);Rt&&(kt=Rt[0])}for(var sn=0,kn=fn.Representation_asArray.length;sn<kn;++sn){var wn=fn.Representation_asArray[sn],xt=new R.default;if(xt.index=sn,xt.adaptation=ct,wn.hasOwnProperty(S.default.ID)&&(xt.id=wn.id),wn.hasOwnProperty(S.default.CODECS)&&(xt.codecs=wn.codecs),wn.hasOwnProperty(S.default.MIME_TYPE)&&(xt.mimeType=wn[S.default.MIME_TYPE]),wn.hasOwnProperty(S.default.CODEC_PRIVATE_DATA)&&(xt.codecPrivateData=wn.codecPrivateData),wn.hasOwnProperty(S.default.BANDWITH)&&(xt.bandwidth=wn.bandwidth),wn.hasOwnProperty(S.default.WIDTH)&&(xt.width=wn.width),wn.hasOwnProperty(S.default.HEIGHT)&&(xt.height=wn.height),wn.hasOwnProperty(S.default.SCAN_TYPE)&&(xt.scanType=wn.scanType),wn.hasOwnProperty(S.default.MAX_PLAYOUT_RATE)&&(xt.maxPlayoutRate=wn.maxPlayoutRate),wn.hasOwnProperty(S.default.SEGMENT_BASE)?(It=wn.SegmentBase,xt.segmentInfoType=S.default.SEGMENT_BASE):wn.hasOwnProperty(S.default.SEGMENT_LIST)?xt.segmentInfoType=(It=wn.SegmentList).hasOwnProperty(S.default.SEGMENT_TIMELINE)?S.default.SEGMENT_TIMELINE:S.default.SEGMENT_LIST:wn.hasOwnProperty(S.default.SEGMENT_TEMPLATE)?(xt.segmentInfoType=(It=wn.SegmentTemplate).hasOwnProperty(S.default.SEGMENT_TIMELINE)?S.default.SEGMENT_TIMELINE:S.default.SEGMENT_TEMPLATE,It.hasOwnProperty(S.default.INITIALIZATION_MINUS)&&(xt.initialization=It.initialization.split("$Bandwidth$").join(wn.bandwidth).split("$RepresentationID$").join(wn.id))):xt.segmentInfoType=S.default.BASE_URL,xt.essentialProperties=Xt(wn),It){if(It.hasOwnProperty(S.default.INITIALIZATION)){var Ct=It.Initialization;Ct.hasOwnProperty(S.default.SOURCE_URL)&&(xt.initialization=Ct.sourceURL),Ct.hasOwnProperty(S.default.RANGE)&&(xt.range=Ct.range)}else Re(fn)&&Oe(fn)&&fn.mimeType&&-1===fn.mimeType.indexOf("application/mp4")&&(xt.range=0);It.hasOwnProperty(S.default.TIMESCALE)&&(xt.timescale=It.timescale),It.hasOwnProperty(S.default.DURATION)?xt.segmentDuration=It.duration/xt.timescale:wn.hasOwnProperty(S.default.SEGMENT_TEMPLATE)&&(It=wn.SegmentTemplate).hasOwnProperty(S.default.SEGMENT_TIMELINE)&&(xt.segmentDuration=jn(It.SegmentTimeline)/xt.timescale),It.hasOwnProperty(S.default.MEDIA)&&(xt.media=It.media),It.hasOwnProperty(S.default.START_NUMBER)&&(xt.startNumber=It.startNumber),It.hasOwnProperty(S.default.INDEX_RANGE)&&(xt.indexRange=It.indexRange),It.hasOwnProperty(S.default.PRESENTATION_TIME_OFFSET)&&(xt.presentationTimeOffset=It.presentationTimeOffset/xt.timescale),It.hasOwnProperty(S.default.AVAILABILITY_TIME_OFFSET)?xt.availabilityTimeOffset=It.availabilityTimeOffset:kt&&void 0!==kt.availabilityTimeOffset&&(xt.availabilityTimeOffset=kt.availabilityTimeOffset),It.hasOwnProperty(S.default.AVAILABILITY_TIME_COMPLETE)?xt.availabilityTimeComplete="false"!==It.availabilityTimeComplete:kt&&void 0!==kt.availabilityTimeComplete&&(xt.availabilityTimeComplete=kt.availabilityTimeComplete)}xt.MSETimeOffset=Vn(xt),xt.path=[ct.period.index,ct.index,sn],qt.push(xt)}}return qt},getAdaptationsForPeriod:function ot(ct){var It,kt,Rt,qt=ct&&me(ct.index)?ct.mpd.manifest.Period_asArray[ct.index]:null,fn=[];if(qt&&qt.AdaptationSet_asArray)for(Rt=0;Rt<qt.AdaptationSet_asArray.length;Rt++)kt=qt.AdaptationSet_asArray[Rt],It=new j.default,kt.hasOwnProperty(S.default.ID)&&(It.id=kt.id),It.index=Rt,It.period=ct,Pe(kt)?It.type=e.default.MUXED:Ee(kt)?It.type=e.default.AUDIO:Ie(kt)?It.type=e.default.VIDEO:Re(kt)?It.type=e.default.TEXT:ke(kt)?It.type=e.default.IMAGE:se.warn("Unknown Adaptation stream type"),fn.push(It);return fn},getRegularPeriods:function Qe(ct){var kn,wn,qt=!!ct&&ut(ct.manifest),fn=[],It=null,kt=null,Rt=null,sn=null;for(wn=0,kn=ct&&ct.manifest&&ct.manifest.Period_asArray?ct.manifest.Period_asArray.length:0;wn<kn;wn++)(kt=ct.manifest.Period_asArray[wn]).hasOwnProperty(S.default.START)?(sn=new U.default).start=kt.start:null!==It&&It.hasOwnProperty(S.default.DURATION)&&null!==Rt?(sn=new U.default).start=parseFloat((Rt.start+Rt.duration).toFixed(5)):0===wn&&!qt&&((sn=new U.default).start=0),null!==Rt&&isNaN(Rt.duration)&&(null!==sn?Rt.duration=parseFloat((sn.start-Rt.start).toFixed(5)):se.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),null!==sn&&(sn.id=mt(kt,wn),sn.index=wn,sn.mpd=ct,kt.hasOwnProperty(S.default.DURATION)&&(sn.duration=kt.duration),Rt&&(Rt.nextPeriodId=sn.id),fn.push(sn),It=kt,Rt=sn),kt=null,sn=null;return 0===fn.length||null!==Rt&&isNaN(Rt.duration)&&(Rt.duration=parseFloat((function zt(ct){!function nn(){if(!H||!H.hasOwnProperty("error"))throw new Error(e.default.MISSING_CONFIG_ERROR)}();var fn,qt=ut(ct.mpd.manifest);return ct.mpd.manifest.mediaPresentationDuration?fn=ct.mpd.manifest.mediaPresentationDuration:ct.duration?fn=ct.duration:qt?fn=Number.POSITIVE_INFINITY:H.error(new P.default(_.default.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",ct)),fn}(Rt)-Rt.start).toFixed(5))),fn},getMpd:function Lt(ct){var qt=new L.default;return ct&&(qt.manifest=ct,ct.hasOwnProperty(S.default.AVAILABILITY_START_TIME)?qt.availabilityStartTime=new Date(ct.availabilityStartTime.getTime()):ct.loadedTime&&(qt.availabilityStartTime=new Date(ct.loadedTime.getTime())),ct.hasOwnProperty(S.default.AVAILABILITY_END_TIME)&&(qt.availabilityEndTime=new Date(ct.availabilityEndTime.getTime())),ct.hasOwnProperty(S.default.MINIMUM_UPDATE_PERIOD)&&(qt.minimumUpdatePeriod=ct.minimumUpdatePeriod),ct.hasOwnProperty(S.default.MEDIA_PRESENTATION_DURATION)&&(qt.mediaPresentationDuration=ct.mediaPresentationDuration),ct.hasOwnProperty(S.default.SUGGESTED_PRESENTATION_DELAY)&&(qt.suggestedPresentationDelay=ct.suggestedPresentationDelay),ct.hasOwnProperty(S.default.TIMESHIFT_BUFFER_DEPTH)&&(qt.timeShiftBufferDepth=ct.timeShiftBufferDepth),ct.hasOwnProperty(S.default.MAX_SEGMENT_DURATION)&&(qt.maxSegmentDuration=ct.maxSegmentDuration),ct.hasOwnProperty(S.default.PUBLISH_TIME)&&(qt.publishTime=new Date(ct.publishTime))),qt},getEventsForPeriod:function _t(ct){var Rt,sn,qt=ct&&ct.mpd&&ct.mpd.manifest?ct.mpd.manifest:null,fn=qt?qt.Period_asArray:null,It=fn&&ct&&me(ct.index)?fn[ct.index].EventStream_asArray:null,kt=[];if(It)for(Rt=0;Rt<It.length;Rt++){var kn=new g.default;if(kn.period=ct,kn.timescale=1,!It[Rt].hasOwnProperty(e.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(kn.schemeIdUri=It[Rt][e.default.SCHEME_ID_URI],It[Rt].hasOwnProperty(S.default.TIMESCALE)&&(kn.timescale=It[Rt][S.default.TIMESCALE]),It[Rt].hasOwnProperty(S.default.VALUE)&&(kn.value=It[Rt][S.default.VALUE]),It[Rt].hasOwnProperty(S.default.PRESENTATION_TIME_OFFSET)&&(kn.presentationTimeOffset=It[Rt][S.default.PRESENTATION_TIME_OFFSET]),sn=0;It[Rt].Event_asArray&&sn<It[Rt].Event_asArray.length;sn++){var wn=It[Rt].Event_asArray[sn],xt=new f.default;xt.presentationTime=0,xt.eventStream=kn,wn.hasOwnProperty(S.default.PRESENTATION_TIME)&&(xt.presentationTime=wn.presentationTime),xt.calculatedPresentationTime=xt.presentationTime/kn.timescale+ct.start-(kn.presentationTimeOffset?kn.presentationTimeOffset/kn.timescale:0),wn.hasOwnProperty(S.default.DURATION)&&(xt.duration=wn.duration/kn.timescale),xt.id=wn.hasOwnProperty(S.default.ID)?wn.id:null,xt.messageData=wn.Signal&&wn.Signal.Binary?ce.decodeArray(wn.Signal.Binary.toString()):wn.messageData||wn.__cdata||wn.__text,kt.push(xt)}}return kt},getEssentialPropertiesForRepresentation:Xt,getEventStreamForAdaptationSet:function rt(ct,qt,fn){var It,kt,Rt;return ct&&ct.Period_asArray&&qt&&qt.period&&me(qt.period.index)&&(kt=ct.Period_asArray[qt.period.index])&&kt.AdaptationSet_asArray&&me(qt.index)&&(Rt=kt.AdaptationSet_asArray[qt.index])&&(It=Rt.InbandEventStream_asArray),pt(It,null,fn)},getEventStreamForRepresentation:function Xe(ct,qt,fn){var It,kt,Rt,sn;return ct&&ct.Period_asArray&&qt&&qt.adaptation&&qt.adaptation.period&&me(qt.adaptation.period.index)&&(kt=ct.Period_asArray[qt.adaptation.period.index])&&kt.AdaptationSet_asArray&&me(qt.adaptation.index)&&(Rt=kt.AdaptationSet_asArray[qt.adaptation.index])&&Rt.Representation_asArray&&me(qt.index)&&(sn=Rt.Representation_asArray[qt.index])&&(It=sn.InbandEventStream_asArray),pt(It,qt,fn)},getUTCTimingSources:function yt(ct){var qt=ut(ct),fn=!!ct&&ct.hasOwnProperty(S.default.AVAILABILITY_START_TIME),It=ct?ct.UTCTiming_asArray:null,kt=[];return(qt||fn)&&It&&It.forEach(function(Rt){var sn=new b.default;Rt.hasOwnProperty(e.default.SCHEME_ID_URI)&&(sn.schemeIdUri=Rt.schemeIdUri,Rt.hasOwnProperty(S.default.VALUE)&&(sn.value=Rt.value.toString(),kt.push(sn)))}),kt},getBaseURLsFromElement:Gt,getRepresentationSortFunction:Me,getContentSteering:function Qt(ct){if(ct&&ct.hasOwnProperty(S.default.CONTENT_STEERING_AS_ARRAY)){var qt=ct[S.default.CONTENT_STEERING_AS_ARRAY][0],fn=new T.default;return fn.serverUrl=qt.__text,qt.hasOwnProperty(S.default.DEFAULT_SERVICE_LOCATION)&&(fn.defaultServiceLocation=qt[S.default.DEFAULT_SERVICE_LOCATION]),qt.hasOwnProperty(S.default.QUERY_BEFORE_START)&&(fn.queryBeforeStart="true"===qt[S.default.QUERY_BEFORE_START].toLowerCase()),qt.hasOwnProperty(S.default.PROXY_SERVER_URL)&&(fn.proxyServerUrl=qt[S.default.PROXY_SERVER_URL]),fn}},getLocation:function on(ct){if(ct&&ct.hasOwnProperty(e.default.LOCATION))return ct.Location=ct.Location_asArray[0],ct.Location},getPatchLocation:function mn(ct){if(ct&&ct.hasOwnProperty(S.default.PATCH_LOCATION))return ct.PatchLocation=ct.PatchLocation_asArray[0],ct.PatchLocation},getSuggestedPresentationDelay:function Dn(ct){return ct&&ct.hasOwnProperty(S.default.SUGGESTED_PRESENTATION_DELAY)?ct.suggestedPresentationDelay:null},getAvailabilityStartTime:function Zn(ct){return ct&&ct.hasOwnProperty(S.default.AVAILABILITY_START_TIME)&&null!==ct.availabilityStartTime?ct.availabilityStartTime.getTime():null},getServiceDescriptions:function Jn(ct){var qt=[];if(ct&&ct.hasOwnProperty(S.default.SERVICE_DESCRIPTION)){var It,fn=y(ct.ServiceDescription_asArray);try{for(fn.s();!(It=fn.n()).done;){var kt=It.value,Rt=null,sn=null,kn=null,wn=null,xt=null,Ct=null;for(var Vt in kt)kt.hasOwnProperty(Vt)&&(Vt===S.default.ID?Rt=kt[Vt]:Vt===S.default.SERVICE_DESCRIPTION_SCOPE?sn=kt[Vt].schemeIdUri:Vt===S.default.SERVICE_DESCRIPTION_LATENCY?kn={target:parseInt(kt[Vt].target),max:parseInt(kt[Vt].max),min:parseInt(kt[Vt].min),referenceId:parseInt(kt[Vt].referenceId)}:Vt===S.default.SERVICE_DESCRIPTION_PLAYBACK_RATE?wn={max:parseFloat(kt[Vt].max),min:parseFloat(kt[Vt].min)}:Vt===S.default.SERVICE_DESCRIPTION_OPERATING_QUALITY?xt={mediaType:kt[Vt].mediaType,max:parseInt(kt[Vt].max),min:parseInt(kt[Vt].min),target:parseInt(kt[Vt].target),type:kt[Vt].type,maxQualityDifference:parseInt(kt[Vt].maxQualityDifference)}:Vt===S.default.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH&&(Ct={mediaType:kt[Vt].mediaType,max:parseInt(kt[Vt].max),min:parseInt(kt[Vt].min),target:parseInt(kt[Vt].target)}));qt.push({id:Rt,schemeIdUri:sn,latency:kn,playbackRate:wn,operatingQuality:xt,operatingBandwidth:Ct})}}catch(Jt){fn.e(Jt)}finally{fn.f()}}return qt},getSupplementalProperties:function _r(ct){var qt={};if(ct&&ct.hasOwnProperty(S.default.SUPPLEMENTAL_PROPERTY)){var It,fn=y(ct.SupplementalProperty_asArray);try{for(fn.s();!(It=fn.n()).done;){var kt=It.value;kt.hasOwnProperty(e.default.SCHEME_ID_URI)&&kt.hasOwnProperty(S.default.VALUE)&&(qt[kt[e.default.SCHEME_ID_URI]]=kt[S.default.VALUE])}}catch(Rt){fn.e(Rt)}finally{fn.f()}}return qt},setConfig:function Pr(ct){!ct||(ct.errHandler&&(H=ct.errHandler),ct.BASE64&&(ce=ct.BASE64))}},function xe(){se=Object(x.default)(ne).getInstance().getLogger(q)}(),q}Te.__dashjs_factory_name="DashManifestModel",O.default=B.default.getSingletonFactory(Te)},"./src/dash/models/PatchManifestModel.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/dash/constants/DashConstants.js"),S=r("./src/core/FactoryMaker.js"),R=r("./src/core/Debug.js"),j=r("./src/dash/vo/SimpleXPath.js"),U=r("./src/dash/vo/PatchOperation.js");function L(){var b,f,c=this.context;return b={getIsPatch:function v(x){return x&&x.hasOwnProperty(e.default.ORIGINAL_MPD_ID)||!1},getPublishTime:function T(x){return x&&x.hasOwnProperty(e.default.PUBLISH_TIME)?new Date(x[e.default.PUBLISH_TIME]):null},getOriginalPublishTime:function k(x){return x&&x.hasOwnProperty(e.default.ORIGINAL_PUBLISH_TIME)?new Date(x[e.default.ORIGINAL_PUBLISH_TIME]):null},getMpdId:function N(x){return x&&x[e.default.ORIGINAL_MPD_ID]||null},getPatchOperations:function B(x){return x?(x.__children||[]).map(function(P){var _=Object.keys(P)[0];if("add"!==_&&"remove"!==_&&"replace"!==_)return f.warn("Ignoring node of invalid action: ".concat(_)),null;var D=P[_],y=D.sel;if("add"===_&&D.type){if(!D.type.startsWith("@"))return f.warn("Ignoring add action for prefixed namespace declaration: ".concat(D.type,"=").concat(D.__text)),null;y="".concat(y,"/").concat(D.type)}var A=new j.default(y);if(!A.isValid())return f.warn("Ignoring action with invalid selector: ".concat(_," - ").concat(y)),null;var I=null;A.findsAttribute()?I=D.__text||"":"remove"!==_&&(I=D.__children.reduce(function(ee,de){var ue=Object.keys(de)[0];return"#text"!==ue&&(ee[ue]=ee[ue]||[],ee[ue].push(de[ue])),ee},{}));var G=new U.default(_,A,I);return"add"===_&&(G.position=D.pos),G}).filter(function(P){return!!P}):[]}},function g(){f=Object(R.default)(c).getInstance().getLogger(b)}(),b}L.__dashjs_factory_name="PatchManifestModel",O.default=S.default.getSingletonFactory(L)},"./src/dash/parser/DashParser.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js"),S=r("./src/dash/parser/objectiron.js"),R=r("./externals/xml2json.js"),j=r("./src/dash/parser/matchers/StringMatcher.js"),U=r("./src/dash/parser/matchers/DurationMatcher.js"),L=r("./src/dash/parser/matchers/DateTimeMatcher.js"),b=r("./src/dash/parser/matchers/NumericMatcher.js"),f=r("./src/dash/parser/matchers/LangMatcher.js"),c=r("./src/dash/parser/maps/RepresentationBaseValuesMap.js"),g=r("./src/dash/parser/maps/SegmentValuesMap.js");function v(T){var B,x,P,_,D,k=this.context,N=(T=T||{}).debug;return B={parse:function G(ee){var de,ue=window.performance.now();if(!(de=_.xml_str2json(ee)))throw new Error("parsing the manifest failed");var Te=window.performance.now();de.Patch?((de=de.Patch).add_asArray&&de.add_asArray.forEach(function(se){return D.run(se)}),de.replace_asArray&&de.replace_asArray.forEach(function(se){return D.run(se)})):D.run(de=de.MPD);var q=window.performance.now();return x.info("Parsing complete: ( xml2json: "+(Te-ue).toPrecision(3)+"ms, objectiron: "+(q-Te).toPrecision(3)+"ms, total: "+((q-ue)/1e3).toPrecision(3)+"s)"),de.protocol="DASH",de},getMatchers:function A(){return P},getIron:function I(){return D}},function y(){x=N.getLogger(B),P=[new U.default,new L.default,new b.default,new f.default,new j.default],_=new R.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!0,ignoreRoot:!1,matchers:P}),D=Object(S.default)(k).create({adaptationset:new c.default,period:new g.default})}(),B}v.__dashjs_factory_name="DashParser",O.default=e.default.getClassFactory(v)},"./src/dash/parser/maps/CommonProperty.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function R(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,U(v.key),v)}}function U(f){var c=function L(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=function(){function f(c){!function S(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")}(this,f);var T;this._name=c,this._merge=(T=c)&&T.length&&T.charAt(0)===T.charAt(0).toUpperCase()}return function j(f,c,g){return c&&R(f.prototype,c),g&&R(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}(f,[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}]),f}()},"./src/dash/parser/maps/MapNode.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/dash/parser/maps/CommonProperty.js");function S(c){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(c)}function j(c,g){for(var v=0;v<g.length;v++){var T=g[v];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(c,L(T.key),T)}}function L(c){var g=function b(c,g){if("object"!==S(c)||null===c)return c;var v=c[Symbol.toPrimitive];if(void 0!==v){var T=v.call(c,g||"default");if("object"!==S(T))return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===g?String:Number)(c)}(c,"string");return"symbol"===S(g)?g:String(g)}O.default=function(){function c(g,v,T){var k=this;(function R(c,g){if(!(c instanceof g))throw new TypeError("Cannot call a class as a function")})(this,c),this._name=g||"",this._properties=[],this._children=T||[],Array.isArray(v)&&v.forEach(function(N){k._properties.push(new e.default(N))})}return function U(c,g,v){return g&&j(c.prototype,g),v&&j(c,v),Object.defineProperty(c,"prototype",{writable:!1}),c}(c,[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}]),c}()},"./src/dash/parser/maps/RepresentationBaseValuesMap.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/dash/parser/maps/MapNode.js"),S=r("./src/dash/constants/DashConstants.js");function R(P){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(_){return typeof _}:function(_){return _&&"function"==typeof Symbol&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(P)}function j(P,_){for(var D=0;D<_.length;D++){var y=_[D];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(P,L(y.key),y)}}function L(P){var _=function b(P,_){if("object"!==R(P)||null===P)return P;var D=P[Symbol.toPrimitive];if(void 0!==D){var y=D.call(P,_||"default");if("object"!==R(y))return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===_?String:Number)(P)}(P,"string");return"symbol"===R(_)?_:String(_)}function c(P,_){if("function"!=typeof _&&null!==_)throw new TypeError("Super expression must either be null or a function");P.prototype=Object.create(_&&_.prototype,{constructor:{value:P,writable:!0,configurable:!0}}),Object.defineProperty(P,"prototype",{writable:!1}),_&&g(P,_)}function g(P,_){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(y,A){return y.__proto__=A,y})(P,_)}function v(P){var _=function N(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(P){return!1}}();return function(){var A,y=B(P);if(_){var I=B(this).constructor;A=Reflect.construct(y,arguments,I)}else A=y.apply(this,arguments);return T(this,A)}}function T(P,_){if(_&&("object"===R(_)||"function"==typeof _))return _;if(void 0!==_)throw new TypeError("Derived constructors may only return object or undefined");return function k(P){if(void 0===P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P}(P)}function B(P){return(B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(D){return D.__proto__||Object.getPrototypeOf(D)})(P)}O.default=function(P){c(D,P);var _=v(D);function D(){!function f(P,_){if(!(P instanceof _))throw new TypeError("Cannot call a class as a function")}(this,D);var y=[S.default.PROFILES,S.default.WIDTH,S.default.HEIGHT,S.default.SAR,S.default.FRAMERATE,S.default.AUDIO_SAMPLING_RATE,S.default.MIME_TYPE,S.default.SEGMENT_PROFILES,S.default.CODECS,S.default.MAXIMUM_SAP_PERIOD,S.default.START_WITH_SAP,S.default.MAX_PLAYOUT_RATE,S.default.CODING_DEPENDENCY,S.default.SCAN_TYPE,S.default.FRAME_PACKING,S.default.AUDIO_CHANNEL_CONFIGURATION,S.default.CONTENT_PROTECTION,S.default.ESSENTIAL_PROPERTY,S.default.SUPPLEMENTAL_PROPERTY,S.default.INBAND_EVENT_STREAM];return _.call(this,S.default.ADAPTATION_SET,y,[new e.default(S.default.REPRESENTATION,y,[new e.default(S.default.SUB_REPRESENTATION,y)])])}return function U(P,_,D){return _&&j(P.prototype,_),D&&j(P,D),Object.defineProperty(P,"prototype",{writable:!1}),P}(D)}(e.default)},"./src/dash/parser/maps/SegmentValuesMap.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/dash/parser/maps/MapNode.js"),S=r("./src/dash/constants/DashConstants.js");function R(P){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(_){return typeof _}:function(_){return _&&"function"==typeof Symbol&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(P)}function j(P,_){for(var D=0;D<_.length;D++){var y=_[D];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(P,L(y.key),y)}}function L(P){var _=function b(P,_){if("object"!==R(P)||null===P)return P;var D=P[Symbol.toPrimitive];if(void 0!==D){var y=D.call(P,_||"default");if("object"!==R(y))return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===_?String:Number)(P)}(P,"string");return"symbol"===R(_)?_:String(_)}function c(P,_){if("function"!=typeof _&&null!==_)throw new TypeError("Super expression must either be null or a function");P.prototype=Object.create(_&&_.prototype,{constructor:{value:P,writable:!0,configurable:!0}}),Object.defineProperty(P,"prototype",{writable:!1}),_&&g(P,_)}function g(P,_){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(y,A){return y.__proto__=A,y})(P,_)}function v(P){var _=function N(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(P){return!1}}();return function(){var A,y=B(P);if(_){var I=B(this).constructor;A=Reflect.construct(y,arguments,I)}else A=y.apply(this,arguments);return T(this,A)}}function T(P,_){if(_&&("object"===R(_)||"function"==typeof _))return _;if(void 0!==_)throw new TypeError("Derived constructors may only return object or undefined");return function k(P){if(void 0===P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P}(P)}function B(P){return(B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(D){return D.__proto__||Object.getPrototypeOf(D)})(P)}O.default=function(P){c(D,P);var _=v(D);function D(){!function f(P,_){if(!(P instanceof _))throw new TypeError("Cannot call a class as a function")}(this,D);var y=[S.default.SEGMENT_BASE,S.default.SEGMENT_TEMPLATE,S.default.SEGMENT_LIST];return _.call(this,S.default.PERIOD,y,[new e.default(S.default.ADAPTATION_SET,y,[new e.default(S.default.REPRESENTATION,y)])])}return function U(P,_,D){return _&&j(P.prototype,_),D&&j(P,D),Object.defineProperty(P,"prototype",{writable:!1}),P}(D)}(e.default)},"./src/dash/parser/matchers/BaseMatcher.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function R(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,U(v.key),v)}}function U(f){var c=function L(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=function(){function f(c,g){(function S(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,f),this._test=c,this._converter=g}return function j(f,c,g){return c&&R(f.prototype,c),g&&R(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}(f,[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}]),f}()},"./src/dash/parser/matchers/DateTimeMatcher.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/dash/parser/matchers/BaseMatcher.js");function S(y){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(A){return typeof A}:function(A){return A&&"function"==typeof Symbol&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(y)}function R(y,A){for(var I=0;I<A.length;I++){var G=A[I];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(y,U(G.key),G)}}function U(y){var A=function L(y,A){if("object"!==S(y)||null===y)return y;var I=y[Symbol.toPrimitive];if(void 0!==I){var G=I.call(y,A||"default");if("object"!==S(G))return G;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===A?String:Number)(y)}(y,"string");return"symbol"===S(A)?A:String(A)}function f(y,A){if("function"!=typeof A&&null!==A)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(A&&A.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),Object.defineProperty(y,"prototype",{writable:!1}),A&&c(y,A)}function c(y,A){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(G,ee){return G.__proto__=ee,G})(y,A)}function g(y){var A=function k(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(y){return!1}}();return function(){var ee,G=N(y);if(A){var de=N(this).constructor;ee=Reflect.construct(G,arguments,de)}else ee=G.apply(this,arguments);return v(this,ee)}}function v(y,A){if(A&&("object"===S(A)||"function"==typeof A))return A;if(void 0!==A)throw new TypeError("Derived constructors may only return object or undefined");return function T(y){if(void 0===y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}(y)}function N(y){return(N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(I){return I.__proto__||Object.getPrototypeOf(I)})(y)}var _=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/;O.default=function(y){f(I,y);var A=g(I);function I(){return function b(y,A){if(!(y instanceof A))throw new TypeError("Cannot call a class as a function")}(this,I),A.call(this,function(G){return _.test(G.value)},function(G){var de,ee=_.exec(G);if(de=Date.UTC(parseInt(ee[1],10),parseInt(ee[2],10)-1,parseInt(ee[3],10),parseInt(ee[4],10),parseInt(ee[5],10),ee[6]&&parseInt(ee[6],10)||0,ee[7]&&1e3*parseFloat(ee[7])||0),ee[9]&&ee[10]){var ue=60*parseInt(ee[9],10)+parseInt(ee[10],10);de+=("+"===ee[8]?-1:1)*ue*60*1e3}return new Date(de)})}return function j(y,A,I){return A&&R(y.prototype,A),I&&R(y,I),Object.defineProperty(y,"prototype",{writable:!1}),y}(I)}(e.default)},"./src/dash/parser/matchers/DurationMatcher.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/dash/parser/matchers/BaseMatcher.js"),S=r("./src/streaming/constants/Constants.js"),R=r("./src/dash/constants/DashConstants.js");function j(ee){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(de){return typeof de}:function(de){return de&&"function"==typeof Symbol&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":typeof de})(ee)}function U(ee,de){for(var ue=0;ue<de.length;ue++){var Te=de[ue];Te.enumerable=Te.enumerable||!1,Te.configurable=!0,"value"in Te&&(Te.writable=!0),Object.defineProperty(ee,b(Te.key),Te)}}function b(ee){var de=function f(ee,de){if("object"!==j(ee)||null===ee)return ee;var ue=ee[Symbol.toPrimitive];if(void 0!==ue){var Te=ue.call(ee,de||"default");if("object"!==j(Te))return Te;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===de?String:Number)(ee)}(ee,"string");return"symbol"===j(de)?de:String(de)}function g(ee,de){if("function"!=typeof de&&null!==de)throw new TypeError("Super expression must either be null or a function");ee.prototype=Object.create(de&&de.prototype,{constructor:{value:ee,writable:!0,configurable:!0}}),Object.defineProperty(ee,"prototype",{writable:!1}),de&&v(ee,de)}function v(ee,de){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Te,q){return Te.__proto__=q,Te})(ee,de)}function T(ee){var de=function B(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ee){return!1}}();return function(){var q,Te=x(ee);if(de){var se=x(this).constructor;q=Reflect.construct(Te,arguments,se)}else q=Te.apply(this,arguments);return k(this,q)}}function k(ee,de){if(de&&("object"===j(de)||"function"==typeof de))return de;if(void 0!==de)throw new TypeError("Derived constructors may only return object or undefined");return function N(ee){if(void 0===ee)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ee}(ee)}function x(ee){return(x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ue){return ue.__proto__||Object.getPrototypeOf(ue)})(ee)}var P=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/;O.default=function(ee){g(ue,ee);var de=T(ue);function ue(){return function c(ee,de){if(!(ee instanceof de))throw new TypeError("Cannot call a class as a function")}(this,ue),de.call(this,function(Te){for(var q=[R.default.MIN_BUFFER_TIME,R.default.MEDIA_PRESENTATION_DURATION,R.default.MINIMUM_UPDATE_PERIOD,R.default.TIMESHIFT_BUFFER_DEPTH,R.default.MAX_SEGMENT_DURATION,R.default.MAX_SUBSEGMENT_DURATION,R.default.SUGGESTED_PRESENTATION_DELAY,R.default.START,S.default.START_TIME,R.default.DURATION],se=q.length,H=0;H<se;H++)if(Te.nodeName===q[H])return P.test(Te.value);return!1},function(Te){var q=P.exec(Te),se=31536e3*parseFloat(q[3]||0)+2592e3*parseFloat(q[5]||0)+86400*parseFloat(q[7]||0)+3600*parseFloat(q[9]||0)+60*parseFloat(q[11]||0)+parseFloat(q[13]||0);return void 0!==q[1]&&(se=-se),se})}return function L(ee,de,ue){return de&&U(ee.prototype,de),ue&&U(ee,ue),Object.defineProperty(ee,"prototype",{writable:!1}),ee}(ue)}(e.default)},"./src/dash/parser/matchers/LangMatcher.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/dash/parser/matchers/BaseMatcher.js"),S=r("./src/dash/constants/DashConstants.js"),R=r("./node_modules/bcp-47-normalize/index.js"),j=r.n(R);function U(y){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(A){return typeof A}:function(A){return A&&"function"==typeof Symbol&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(y)}function L(y,A,I){return(A=c(A))in y?Object.defineProperty(y,A,{value:I,enumerable:!0,configurable:!0,writable:!0}):y[A]=I,y}function b(y,A){for(var I=0;I<A.length;I++){var G=A[I];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(y,c(G.key),G)}}function c(y){var A=function g(y,A){if("object"!==U(y)||null===y)return y;var I=y[Symbol.toPrimitive];if(void 0!==I){var G=I.call(y,A||"default");if("object"!==U(G))return G;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===A?String:Number)(y)}(y,"string");return"symbol"===U(A)?A:String(A)}function T(y,A){if("function"!=typeof A&&null!==A)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(A&&A.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),Object.defineProperty(y,"prototype",{writable:!1}),A&&k(y,A)}function k(y,A){return(k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(G,ee){return G.__proto__=ee,G})(y,A)}function N(y){var A=function P(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(y){return!1}}();return function(){var ee,G=_(y);if(A){var de=_(this).constructor;ee=Reflect.construct(G,arguments,de)}else ee=G.apply(this,arguments);return B(this,ee)}}function B(y,A){if(A&&("object"===U(A)||"function"==typeof A))return A;if(void 0!==A)throw new TypeError("Derived constructors may only return object or undefined");return function x(y){if(void 0===y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}(y)}function _(y){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(I){return I.__proto__||Object.getPrototypeOf(I)})(y)}O.default=function(y){T(I,y);var A=N(I);function I(){return function v(y,A){if(!(y instanceof A))throw new TypeError("Cannot call a class as a function")}(this,I),A.call(this,function(G,ee){var de,ue=(L(de={},S.default.ADAPTATION_SET,[S.default.LANG]),L(de,S.default.REPRESENTATION,[S.default.LANG]),L(de,S.default.CONTENT_COMPONENT,[S.default.LANG]),L(de,S.default.LABEL,[S.default.LANG]),L(de,S.default.GROUP_LABEL,[S.default.LANG]),de);if(ue.hasOwnProperty(ee)){var Te=ue[ee];return void 0!==Te&&Te.indexOf(G.name)>=0}return!1},function(G){var ee=j()(G);return void 0!==ee?ee:String(G)})}return function f(y,A,I){return A&&b(y.prototype,A),I&&b(y,I),Object.defineProperty(y,"prototype",{writable:!1}),y}(I)}(e.default)},"./src/dash/parser/matchers/NumericMatcher.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/dash/parser/matchers/BaseMatcher.js");function S(P){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(_){return typeof _}:function(_){return _&&"function"==typeof Symbol&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(P)}function R(P,_){for(var D=0;D<_.length;D++){var y=_[D];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(P,U(y.key),y)}}function U(P){var _=function L(P,_){if("object"!==S(P)||null===P)return P;var D=P[Symbol.toPrimitive];if(void 0!==D){var y=D.call(P,_||"default");if("object"!==S(y))return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===_?String:Number)(P)}(P,"string");return"symbol"===S(_)?_:String(_)}function f(P,_){if("function"!=typeof _&&null!==_)throw new TypeError("Super expression must either be null or a function");P.prototype=Object.create(_&&_.prototype,{constructor:{value:P,writable:!0,configurable:!0}}),Object.defineProperty(P,"prototype",{writable:!1}),_&&c(P,_)}function c(P,_){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(y,A){return y.__proto__=A,y})(P,_)}function g(P){var _=function k(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(P){return!1}}();return function(){var A,y=N(P);if(_){var I=N(this).constructor;A=Reflect.construct(y,arguments,I)}else A=y.apply(this,arguments);return v(this,A)}}function v(P,_){if(_&&("object"===S(_)||"function"==typeof _))return _;if(void 0!==_)throw new TypeError("Derived constructors may only return object or undefined");return function T(P){if(void 0===P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P}(P)}function N(P){return(N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(D){return D.__proto__||Object.getPrototypeOf(D)})(P)}var B=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/;O.default=function(P){f(D,P);var _=g(D);function D(){return function b(P,_){if(!(P instanceof _))throw new TypeError("Cannot call a class as a function")}(this,D),_.call(this,function(y){return B.test(y.value)},function(y){return parseFloat(y)})}return function j(P,_,D){return _&&R(P.prototype,_),D&&R(P,D),Object.defineProperty(P,"prototype",{writable:!1}),P}(D)}(e.default)},"./src/dash/parser/matchers/StringMatcher.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/dash/parser/matchers/BaseMatcher.js"),S=r("./src/dash/constants/DashConstants.js");function R(_){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(_)}function j(_,D,y){return(D=b(D))in _?Object.defineProperty(_,D,{value:y,enumerable:!0,configurable:!0,writable:!0}):_[D]=y,_}function U(_,D){for(var y=0;y<D.length;y++){var A=D[y];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(_,b(A.key),A)}}function b(_){var D=function f(_,D){if("object"!==R(_)||null===_)return _;var y=_[Symbol.toPrimitive];if(void 0!==y){var A=y.call(_,D||"default");if("object"!==R(A))return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===D?String:Number)(_)}(_,"string");return"symbol"===R(D)?D:String(D)}function g(_,D){if("function"!=typeof D&&null!==D)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create(D&&D.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),Object.defineProperty(_,"prototype",{writable:!1}),D&&v(_,D)}function v(_,D){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(A,I){return A.__proto__=I,A})(_,D)}function T(_){var D=function B(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(_){return!1}}();return function(){var I,A=x(_);if(D){var G=x(this).constructor;I=Reflect.construct(A,arguments,G)}else I=A.apply(this,arguments);return k(this,I)}}function k(_,D){if(D&&("object"===R(D)||"function"==typeof D))return D;if(void 0!==D)throw new TypeError("Derived constructors may only return object or undefined");return function N(_){if(void 0===_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}(_)}function x(_){return(x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(y){return y.__proto__||Object.getPrototypeOf(y)})(_)}O.default=function(_){g(y,_);var D=T(y);function y(){return function c(_,D){if(!(_ instanceof D))throw new TypeError("Cannot call a class as a function")}(this,y),D.call(this,function(A,I){var G,ee=(j(G={},S.default.MPD,[S.default.ID,S.default.PROFILES]),j(G,S.default.PERIOD,[S.default.ID]),j(G,S.default.BASE_URL,[S.default.SERVICE_LOCATION,S.default.BYTE_RANGE]),j(G,S.default.SEGMENT_BASE,[S.default.INDEX_RANGE]),j(G,S.default.INITIALIZATION,[S.default.RANGE]),j(G,S.default.REPRESENTATION_INDEX,[S.default.RANGE]),j(G,S.default.SEGMENT_LIST,[S.default.INDEX_RANGE]),j(G,S.default.BITSTREAM_SWITCHING,[S.default.RANGE]),j(G,S.default.SEGMENT_URL,[S.default.MEDIA_RANGE,S.default.INDEX_RANGE]),j(G,S.default.SEGMENT_TEMPLATE,[S.default.INDEX_RANGE,S.default.MEDIA,S.default.INDEX,S.default.INITIALIZATION_MINUS,S.default.BITSTREAM_SWITCHING_MINUS]),j(G,S.default.ASSET_IDENTIFIER,[S.default.VALUE,S.default.ID]),j(G,S.default.EVENT_STREAM,[S.default.VALUE]),j(G,S.default.ADAPTATION_SET,[S.default.PROFILES,S.default.MIME_TYPE,S.default.SEGMENT_PROFILES,S.default.CODECS,S.default.CONTENT_TYPE]),j(G,S.default.FRAME_PACKING,[S.default.VALUE,S.default.ID]),j(G,S.default.AUDIO_CHANNEL_CONFIGURATION,[S.default.VALUE,S.default.ID]),j(G,S.default.CONTENT_PROTECTION,[S.default.VALUE,S.default.ID]),j(G,S.default.ESSENTIAL_PROPERTY,[S.default.VALUE,S.default.ID]),j(G,S.default.SUPPLEMENTAL_PROPERTY,[S.default.VALUE,S.default.ID]),j(G,S.default.INBAND_EVENT_STREAM,[S.default.VALUE,S.default.ID]),j(G,S.default.ACCESSIBILITY,[S.default.VALUE,S.default.ID]),j(G,S.default.ROLE,[S.default.VALUE,S.default.ID]),j(G,S.default.RATING,[S.default.VALUE,S.default.ID]),j(G,S.default.VIEWPOINT,[S.default.VALUE,S.default.ID]),j(G,S.default.CONTENT_COMPONENT,[S.default.CONTENT_TYPE]),j(G,S.default.REPRESENTATION,[S.default.ID,S.default.DEPENDENCY_ID,S.default.MEDIA_STREAM_STRUCTURE_ID]),j(G,S.default.SUBSET,[S.default.ID]),j(G,S.default.METRICS,[S.default.METRICS_MINUS]),j(G,S.default.REPORTING,[S.default.VALUE,S.default.ID]),G);if(ee.hasOwnProperty(I)){var de=ee[I];return void 0!==de&&de.indexOf(A.name)>=0}return!1},function(A){return String(A)})}return function L(_,D,y){return D&&U(_.prototype,D),y&&U(_,y),Object.defineProperty(_,"prototype",{writable:!1}),_}(y)}(e.default)},"./src/dash/parser/objectiron.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js");function S(U){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(L){return typeof L}:function(L){return L&&"function"==typeof Symbol&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L})(U)}function R(U){function L(g,v){for(var T in g)v.hasOwnProperty(T)||(v[T]=g[T])}function b(g,v,T){for(var k=0,N=g.length;k<N;++k){var B=g[k];if(v[B.name])if(T[B.name]){if(B.merge){var x=v[B.name],P=T[B.name];"object"===S(x)&&"object"===S(P)?L(x,P):T[B.name]=x+P}}else T[B.name]=v[B.name]}}function f(g,v){for(var T=0,k=g.children.length;T<k;++T){var N=g.children[T],B=v[N.name+"_asArray"];if(B)for(var x=0,P=B.length;x<P;++x){var _=B[x];b(g.properties,v,_),f(N,_)}}}return{run:function c(g){if(null===g||"object"!==S(g))return g;if(g.Period_asArray&&"period"in U)for(var v=U.period,T=g.Period_asArray,k=0,N=T.length;k<N;++k){var B=T[k];if(f(v,B),"adaptationset"in U){var x=B.AdaptationSet_asArray;if(x)for(var P=U.adaptationset,_=0,D=x.length;_<D;++_)f(P,x[_])}}return g}}}R.__dashjs_factory_name="ObjectIron";var j=e.default.getClassFactory(R);O.default=j},"./src/dash/utils/ListSegmentsGetter.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js"),S=r("./src/streaming/constants/Constants.js"),R=r("./src/dash/utils/SegmentsUtils.js");function j(L,b){var f=(L=L||{}).timelineConverter;function g(){if(!f||!f.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(S.default.MISSING_CONFIG_ERROR)}function T(N,B){if(g(),!N)return null;var x=N.adaptation.period.mpd.manifest.Period_asArray[N.adaptation.period.index].AdaptationSet_asArray[N.adaptation.index].Representation_asArray[N.index].SegmentList,P=x.SegmentURL_asArray.length,_=N&&!isNaN(N.startNumber)?N.startNumber:1,D=Math.max(_-1,0),y=Math.max(B-D,0),A=null;if(y<P){var I=x.SegmentURL_asArray[y];(A=Object(R.getIndexBasedSegment)(f,b,N,B))&&(A.replacementTime=(_+B-1)*N.segmentDuration,A.media=I.media?I.media:"",A.mediaRange=I.mediaRange,A.indexRange=I.indexRange)}return A}return{getSegmentByIndex:T,getSegmentByTime:function k(N,B){if(g(),!N)return null;var x=N.segmentDuration;if(isNaN(x))return null;var P=f.calcPeriodRelativeTimeFromMpdRelativeTime(N,B);return T(N,Math.floor(P/x))},getMediaFinishedInformation:function v(N){var B={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!N)return B;var x=N.adaptation.period.mpd.manifest.Period_asArray[N.adaptation.period.index].AdaptationSet_asArray[N.adaptation.index].Representation_asArray[N.index].SegmentList,P=N&&!isNaN(N.startNumber)?N.startNumber:1,_=Math.max(P-1,0);return B.numberOfSegments=_+x.SegmentURL_asArray.length,B}}}j.__dashjs_factory_name="ListSegmentsGetter";var U=e.default.getClassFactory(j);O.default=U},"./src/dash/utils/Round10.js":function(Ve,O,r){"use strict";function e(c){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(c)}function R(c,g){for(var v=0;v<g.length;v++){var T=g[v];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(c,U(T.key),T)}}function U(c){var g=function L(c,g){if("object"!==e(c)||null===c)return c;var v=c[Symbol.toPrimitive];if(void 0!==v){var T=v.call(c,g||"default");if("object"!==e(T))return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===g?String:Number)(c)}(c,"string");return"symbol"===e(g)?g:String(g)}r.r(O),r.d(O,"default",function(){return b});var b=function(){function c(){!function S(c,g){if(!(c instanceof g))throw new TypeError("Cannot call a class as a function")}(this,c)}return function j(c,g,v){return g&&R(c.prototype,g),v&&R(c,v),Object.defineProperty(c,"prototype",{writable:!1}),c}(c,null,[{key:"round10",value:function(v,T){return function f(c,g,v){return void 0===v||0==+v?Math[c](g):(v=+v,null===(g=+g)||isNaN(g)||"number"!=typeof v||v%1!=0?NaN:(g=g.toString().split("e"),+((g=(g=Math[c](+(g[0]+"e"+(g[1]?+g[1]-v:-v)))).toString().split("e"))[0]+"e"+(g[1]?+g[1]+v:v))))}("round",v,T)}}]),c}()},"./src/dash/utils/SegmentBaseGetter.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js"),S=r("./src/streaming/constants/Constants.js");function R(U){var L=(U=U||{}).timelineConverter;function f(){if(!L||!L.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(S.default.MISSING_CONFIG_ERROR)}function g(k,N){if(f(),!k)return null;var x,B=k.segments?k.segments.length:-1;if(N<B&&(x=k.segments[N])&&x.index===N)return x;for(var P=0;P<B;P++)if((x=k.segments[P])&&x.index===N)return x;return null}return{getSegmentByIndex:g,getSegmentByTime:function v(k,N){return f(),g(k,function T(k,N){if(!k)return-1;var _,D,y,A,I,B=k.segments,x=B?B.length:null,P=-1;if(B&&x>0)for(I=0;I<x;I++)if(N+(_=(A=(D=B[I]).duration)/2)>=(y=D.presentationStartTime)&&N-_<y+A){P=D.index;break}return P}(k,N))},getMediaFinishedInformation:function c(k){var N={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return!k||!k.segments||(N.numberOfSegments=k.segments.length),N}}}R.__dashjs_factory_name="SegmentBaseGetter";var j=e.default.getClassFactory(R);O.default=j},"./src/dash/utils/SegmentsUtils.js":function(Ve,O,r){"use strict";r.r(O),r.d(O,"unescapeDollarsInTemplate",function(){return j}),r.d(O,"replaceIDForTemplate",function(){return U}),r.d(O,"replaceTokenForTemplate",function(){return L}),r.d(O,"getIndexBasedSegment",function(){return c}),r.d(O,"getTimeBasedSegment",function(){return g});var e=r("./src/dash/vo/Segment.js");function S(v,T){for(;v.length<T;)v="0"+v;return v}function j(v){return v&&v.split("$$").join("$")}function U(v,T){if(!T||!v||-1===v.indexOf("$RepresentationID$"))return v;var k=T.toString();return v.split("$RepresentationID$").join(k)}function L(v,T,k){var B,x,P,_,D,y,A=T.length,I="%0".length;if(!v)return v;for(;;){if((B=v.indexOf("$"+T))<0||(x=v.indexOf("$",B+A))<0)return v;if((P=v.indexOf("%0",B+A))>B&&P<x)switch(_=v.charAt(x-1),D=parseInt(v.substring(P+I,x-1),10),_){case"d":case"i":case"u":y=S(k.toString(),D);break;case"x":y=S(k.toString(16),D);break;case"X":y=S(k.toString(16),D).toUpperCase();break;case"o":y=S(k.toString(8),D);break;default:return v}else y=k;v=v.substring(0,B)+y+v.substring(x+1)}}function b(v,T,k,N,B,x,P,_){var D=new e.default;return D.representation=v,D.duration=T,D.presentationStartTime=k,D.mediaStartTime=N,D.availabilityStartTime=B.calcAvailabilityStartTimeFromPresentationTime(x,v,P),D.availabilityEndTime=B.calcAvailabilityEndTimeFromPresentationTime(x+T,v,P),D.wallStartTime=B.calcWallTimeForSegment(D,P),D.replacementNumber=function R(v,T){return v.representation.startNumber+T}(D,_),D.index=_,D}function f(v,T,k,N){var B=T.adaptation.period;if(isFinite(B.duration)&&B.start+B.duration<=k.presentationStartTime)return!1;if(N){if("INF"===T.availabilityTimeOffset)return!0;var x=v.getClientReferenceTime();return k.availabilityStartTime.getTime()<=x&&(!isFinite(k.availabilityEndTime)||k.availabilityEndTime.getTime()>=x)}return!0}function c(v,T,k,N){var B,x,P;B=k.segmentDuration,isNaN(B)&&(B=k.adaptation.period.duration),x=parseFloat((k.adaptation.period.start+N*B).toFixed(5)),P=parseFloat((x+B).toFixed(5));var D=b(k,B,x,v.calcMediaTimeFromPresentationTime(x,k),v,P,T,N);return f(v,k,D,T)?D:null}function g(v,T,k,N,B,x,P,_,D,y){var G,de,A=N/x,I=B/x;return G=v.calcPresentationTimeFromMediaTime(A,k),f(v,k,de=b(k,I,G,A,v,G+I,T,D),T)?(de.replacementTime=y||N,P=L(P,"Number",de.replacementNumber),P=L(P,"Time",de.replacementTime),de.media=P,de.mediaRange=_,de):null}},"./src/dash/utils/TemplateSegmentsGetter.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js"),S=r("./src/streaming/constants/Constants.js"),R=r("./src/dash/utils/SegmentsUtils.js");function j(L,b){var f=(L=L||{}).timelineConverter;function g(){if(!f||!f.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(S.default.MISSING_CONFIG_ERROR)}function T(N,B){if(g(),!N)return null;var x=N.adaptation.period.mpd.manifest.Period_asArray[N.adaptation.period.index].AdaptationSet_asArray[N.adaptation.index].Representation_asArray[N.index].SegmentTemplate;B=Math.max(B,0);var P=Object(R.getIndexBasedSegment)(f,b,N,B);if(P){P.replacementTime=Math.round((B-1)*N.segmentDuration*N.timescale,10);var _=x.media;_=Object(R.replaceTokenForTemplate)(_,"Number",P.replacementNumber),_=Object(R.replaceTokenForTemplate)(_,"Time",P.replacementTime),P.media=_}return P}return{getSegmentByIndex:T,getSegmentByTime:function k(N,B){if(g(),!N)return null;var x=N.segmentDuration;if(isNaN(x))return null;var P=f.calcPeriodRelativeTimeFromMpdRelativeTime(N,B);return T(N,Math.floor(P/x))},getMediaFinishedInformation:function v(N){var B={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!N)return B;var x=N.segmentDuration;return B.numberOfSegments=isNaN(x)?1:Math.ceil(N.adaptation.period.duration/x),B}}}j.__dashjs_factory_name="TemplateSegmentsGetter";var U=e.default.getClassFactory(j);O.default=U},"./src/dash/utils/TimelineConverter.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/EventBus.js"),S=r("./src/core/events/Events.js"),R=r("./src/core/FactoryMaker.js"),j=r("./src/dash/constants/DashConstants.js"),U=r("./src/dash/models/DashManifestModel.js"),L=r("./src/core/Settings.js"),b=r("./src/streaming/constants/Constants.js"),f=r("./src/streaming/MediaPlayerEvents.js"),c=r("./src/streaming/constants/ConformanceViolationConstants.js");function g(){var N,B,x,P,v=this.context,T=Object(e.default)(v).getInstance(),k=Object(L.default)(v).getInstance();function A(Pe){P=Pe}function G(Pe,ke,Be,qe){var He,De=ke.adaptation.period.mpd,he=De.availabilityStartTime;if(qe)He=Be&&De.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(he.getTime()+1e3*(Pe+De.timeShiftBufferDepth)):De.availabilityEndTime;else if(Be){var Y=ke.availabilityTimeOffset;He=new Date(he.getTime()+1e3*(Pe-Y))}else He=he;return He}function ue(Pe,ke){return(Pe.getTime()-ke.mpd.availabilityStartTime.getTime()+1e3*P)/1e3}function Te(Pe,ke){return Pe+(ke.adaptation.period.start-ke.presentationTimeOffset)}function pe(Pe){var ke={start:NaN,end:NaN},Be=Pe[0].getAdapter().getRegularPeriods()[0],qe=ue(new Date,Be);if(!Pe||0===Pe.length)return{range:ke,now:qe};Pe.forEach(function(De){var he=De.getAdapter(),Y=he.getMediaInfoForType(De.getStreamInfo(),b.default.VIDEO)||he.getMediaInfoForType(De.getStreamInfo(),b.default.AUDIO),Me=he.getVoRepresentations(Y)[0],ae={start:NaN,end:NaN};if(Me)if(Me.segmentInfoType===j.default.SEGMENT_TIMELINE)ae=function ve(Pe){var J,Me,ae,re,Be=B.getRepresentationFor(Pe.index,Pe.adaptation.period.mpd.manifest.Period_asArray[Pe.adaptation.period.index].AdaptationSet_asArray[Pe.adaptation.index]),He=Be.SegmentTemplate.timescale,De=Be.SegmentTemplate.SegmentTimeline.S_asArray,he={start:0,end:0},Y=0;for(he.start=Te(De[0].t/He,Pe),ae=0,re=De.length;ae<re;ae++)Me=0,(J=De[ae]).hasOwnProperty("r")&&(Me=J.r),Y+=J.d*(1+Me);return he.end=Te((De[0].t+Y)/He,Pe),he}(Me);else{var re=Me.adaptation.period;ae.start=re.start,ae.end=Math.max(qe,re.start+re.duration)}!isNaN(ae.start)&&(isNaN(ke.start)||ke.start>ae.start)&&(ke.start=ae.start),!isNaN(ae.end)&&(isNaN(ke.end)||ke.end<ae.end)&&(ke.end=ae.end)}),ke.end=Math.min(qe,ke.end);var He=xe(Pe,ke.end,!0);return ke.end=isNaN(He)?ke.end:He,ke.start=Be&&Be.mpd&&Be.mpd.timeShiftBufferDepth&&!isNaN(Be.mpd.timeShiftBufferDepth)&&!isNaN(ke.end)?Math.max(ke.end-Be.mpd.timeShiftBufferDepth,ke.start):ke.start,ke.start=xe(Pe,ke.start),{range:ke,now:qe}}function me(Pe,ke){x=Pe-ke.end}function xe(Pe,ke){var Be=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{for(var qe=0,He=!1,De=NaN;!He&&qe<Pe.length;){var he=Pe[qe].getStreamInfo();he.start<=ke&&(!isFinite(he.duration)||he.start+he.duration>=ke)?(De=ke,He=!0):!Be&&he.start>ke&&(isNaN(De)||he.start<De)?De=he.start:Be&&he.start+he.duration<ke&&(isNaN(De)||he.start+he.duration>De)&&(De=he.start+he.duration),qe+=1}return De}catch(Y){return ke}}function Ee(Pe){void 0!==Pe.offset&&!isNaN(Pe.offset)&&A(Pe.offset/1e3)}function Ie(){P=0,x=0}function Re(){T.off(S.default.UPDATE_TIME_SYNC_OFFSET,Ee,this),Ie()}return N={initialize:function D(){Ie(),T.on(S.default.UPDATE_TIME_SYNC_OFFSET,Ee,this)},getClientTimeOffset:function y(){return P},setClientTimeOffset:A,getClientReferenceTime:function I(){return Date.now()-1e3*x+1e3*P},calcAvailabilityStartTimeFromPresentationTime:function ee(Pe,ke,Be){return G(Pe,ke,Be)},calcAvailabilityEndTimeFromPresentationTime:function de(Pe,ke,Be){return G(Pe,ke,Be,!0)},calcPresentationTimeFromWallTime:ue,calcPresentationTimeFromMediaTime:Te,calcPeriodRelativeTimeFromMpdRelativeTime:function Oe(Pe,ke){return ke-Pe.adaptation.period.start},calcMediaTimeFromPresentationTime:function q(Pe,ke){return Pe-ke.adaptation.period.start+ke.presentationTimeOffset},calcWallTimeForSegment:function se(Pe,ke){var qe,He;return ke&&(qe=Pe.presentationStartTime+Pe.representation.adaptation.period.mpd.suggestedPresentationDelay,He=new Date(Pe.availabilityStartTime.getTime()+1e3*qe)),He},calcTimeShiftBufferWindow:function H(Pe,ke){if(!ke)return function ce(Pe){var ke={start:NaN,end:NaN},Be=0,qe=NaN;return Pe.forEach(function(He){var De=He.getStreamInfo();Be+=De.duration,(isNaN(qe)||De.start<qe)&&(qe=De.start)}),ke.start=qe,ke.end=qe+Be,ke}(Pe);if(k.get().streaming.timeShiftBuffer.calcFromSegmentTimeline){var Be=pe(Pe);return me(Be.now,Be.range),Be.range}return function ne(Pe){var ke={start:NaN,end:NaN};if(!Pe||0===Pe.length)return ke;var Be=Pe[0].getAdapter().getRegularPeriods()[0],qe=ue(new Date,Be),He=Be.mpd.timeShiftBufferDepth,De=isNaN(He)?0:qe-He;if(ke.start=xe(Pe,De),ke.end=!isNaN(ke.start)&&qe<ke.start?qe:xe(Pe,qe,!0),!isNaN(He)&&ke.end<qe-He&&(ke.end=NaN),k.get().streaming.timeShiftBuffer.fallbackToSegmentTimeline){var he=pe(Pe);if(he.range.end<ke.start)return T.trigger(f.default.CONFORMANCE_VIOLATION,{level:c.default.LEVELS.WARNING,event:c.default.EVENTS.INVALID_DVR_WINDOW}),me(he.now,he.range),he.range}return ke}(Pe)},reset:Re},function _(){B=Object(U.default)(v).getInstance(),Re()}(),N}g.__dashjs_factory_name="TimelineConverter",O.default=R.default.getSingletonFactory(g)},"./src/dash/utils/TimelineSegmentsGetter.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js"),S=r("./src/streaming/constants/Constants.js"),R=r("./src/dash/utils/SegmentsUtils.js");function j(L,b){var f=(L=L||{}).timelineConverter,c=L.dashMetrics;function v(){if(!f)throw new Error(S.default.MISSING_CONFIG_ERROR)}function k(_,D){var de,ue,Te,q,se,H,ce,y=_.adaptation.period.mpd.manifest.Period_asArray[_.adaptation.period.index].AdaptationSet_asArray[_.adaptation.index].Representation_asArray[_.index].SegmentTemplate||_.adaptation.period.mpd.manifest.Period_asArray[_.adaptation.period.index].AdaptationSet_asArray[_.adaptation.index].Representation_asArray[_.index].SegmentList,I=y.SegmentURL_asArray,G=0,ee=-1;ce=_.timescale;var ne=!1;for(Te=0,q=(de=y.SegmentTimeline.S_asArray).length;Te<q&&!ne;Te++)for(H=0,(ue=de[Te]).hasOwnProperty("r")&&(H=ue.r),ue.hasOwnProperty("t")&&(G=ue.t),H<0&&(H=N(_,de[Te+1],ue,ce,G/ce)),se=0;se<=H&&!ne;se++)(ne=D(G,y,I,ue,ce,++ee,Te))&&(_.segmentDuration=ue.d/ce),G+=ue.d}function N(_,D,y,A,I){var G;if(D&&D.hasOwnProperty("t"))G=D.t/A;else try{var ee=0;if(isNaN(_.adaptation.period.start)||isNaN(_.adaptation.period.duration)||!isFinite(_.adaptation.period.duration)){var de=c.getCurrentDVRInfo();ee=isNaN(de.end)?0:de.end}else ee=_.adaptation.period.start+_.adaptation.period.duration;G=f.calcMediaTimeFromPresentationTime(ee,_),_.segmentDuration=y.d/A}catch(ue){G=0}return Math.max(Math.ceil((G-I)/(y.d/A))-1,0)}return{getSegmentByIndex:function B(_,D,y){if(v(),!_)return null;var A=null,I=!1;return k(_,function(G,ee,de,ue,Te,q,se){if(I||y<0){var H=ee.media,ce=ue.mediaRange;return de&&(H=de[se].media||"",ce=de[se].mediaRange),A=Object(R.getTimeBasedSegment)(f,b,_,G,ue.d,Te,H,ce,q,ue.tManifest),!0}return G>=y*Te-.5*ue.d&&(I=!0),!1}),A},getSegmentByTime:function x(_,D){if(v(),!_)return null;void 0===D&&(D=null);var y=null,A=f.calcMediaTimeFromPresentationTime(D,_);return k(_,function(I,G,ee,de,ue,Te,q){var se=function P(_){return parseFloat(_.toPrecision(15))}(A*ue);if(se<I+de.d&&se>=I){var H=G.media,ce=de.mediaRange;return ee&&(H=ee[q].media||"",ce=ee[q].mediaRange),y=Object(R.getTimeBasedSegment)(f,b,_,I,de.d,ue,H,ce,Te,de.tManifest),!0}return!1}),y},getMediaFinishedInformation:function T(_){if(!_)return 0;var ee,de,ue,Te,q,se,H,A=0,I=0,G=0;for(H=_.timescale,Te=(ee=(_.adaptation.period.mpd.manifest.Period_asArray[_.adaptation.period.index].AdaptationSet_asArray[_.adaptation.index].Representation_asArray[_.index].SegmentTemplate||_.adaptation.period.mpd.manifest.Period_asArray[_.adaptation.period.index].AdaptationSet_asArray[_.adaptation.index].Representation_asArray[_.index].SegmentList).SegmentTimeline.S_asArray).length,ue=0;ue<Te;ue++)for(se=0,(de=ee[ue]).hasOwnProperty("r")&&(se=de.r),de.hasOwnProperty("t")&&(I=(A=de.t)/H),se<0&&(se=N(_,ee[ue+1],de,H,I)),q=0;q<=se;q++)G++,I=(A+=de.d)/H;return{numberOfSegments:G,mediaTimeOfLastSignaledSegment:I}}}}j.__dashjs_factory_name="TimelineSegmentsGetter";var U=e.default.getClassFactory(j);O.default=U},"./src/dash/vo/AdaptationSet.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function S(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,j(v.key),v)}}function R(f,c,g){return c&&S(f.prototype,c),g&&S(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}function j(f){var c=function U(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=R(function f(){(function L(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,f),this.period=null,this.index=-1,this.type=null})},"./src/dash/vo/BaseURL.js":function(Ve,O,r){"use strict";function e(g){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(v){return typeof v}:function(v){return v&&"function"==typeof Symbol&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(g)}function S(g,v){for(var T=0;T<v.length;T++){var k=v[T];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(g,j(k.key),k)}}function R(g,v,T){return v&&S(g.prototype,v),T&&S(g,T),Object.defineProperty(g,"prototype",{writable:!1}),g}function j(g){var v=function U(g,v){if("object"!==e(g)||null===g)return g;var T=g[Symbol.toPrimitive];if(void 0!==T){var k=T.call(g,v||"default");if("object"!==e(k))return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===v?String:Number)(g)}(g,"string");return"symbol"===e(v)?v:String(v)}r.r(O);var c=R(function g(v,T,k,N){(function L(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")})(this,g),this.url=v||"",this.serviceLocation=T||v||"",this.dvb_priority=k||1,this.dvb_weight=N||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0});c.DEFAULT_DVB_PRIORITY=1,c.DEFAULT_DVB_WEIGHT=1,O.default=c},"./src/dash/vo/ContentSteering.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function S(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,j(v.key),v)}}function R(f,c,g){return c&&S(f.prototype,c),g&&S(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}function j(f){var c=function U(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=R(function f(){(function L(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,f),this.defaultServiceLocation=null,this.queryBeforeStart=!1,this.proxyServerUrl=null,this.serverUrl=null})},"./src/dash/vo/ContentSteeringRequest.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/vo/metrics/HTTPRequest.js");function S(c){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(c)}function R(c,g){for(var v=0;v<g.length;v++){var T=g[v];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(c,U(T.key),T)}}function j(c,g,v){return g&&R(c.prototype,g),v&&R(c,v),Object.defineProperty(c,"prototype",{writable:!1}),c}function U(c){var g=function L(c,g){if("object"!==S(c)||null===c)return c;var v=c[Symbol.toPrimitive];if(void 0!==v){var T=v.call(c,g||"default");if("object"!==S(T))return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===g?String:Number)(c)}(c,"string");return"symbol"===S(g)?g:String(g)}O.default=j(function c(g){(function b(c,g){if(!(c instanceof g))throw new TypeError("Cannot call a class as a function")})(this,c),this.url=g||null,this.type=e.HTTPRequest.CONTENT_STEERING_TYPE,this.responseType="json"})},"./src/dash/vo/ContentSteeringResponse.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function S(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,j(v.key),v)}}function R(f,c,g){return c&&S(f.prototype,c),g&&S(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}function j(f){var c=function U(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=R(function f(){(function L(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,f),this.version=null,this.ttl=300,this.reloadUri=null,this.serviceLocationPriority=[]})},"./src/dash/vo/Event.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function S(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,j(v.key),v)}}function R(f,c,g){return c&&S(f.prototype,c),g&&S(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}function j(f){var c=function U(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=R(function f(){(function L(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,f),this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN})},"./src/dash/vo/EventStream.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function S(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,j(v.key),v)}}function R(f,c,g){return c&&S(f.prototype,c),g&&S(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}function j(f){var c=function U(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=R(function f(){(function L(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,f),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0})},"./src/dash/vo/ManifestInfo.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function S(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,j(v.key),v)}}function R(f,c,g){return c&&S(f.prototype,c),g&&S(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}function j(f){var c=function U(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=R(function f(){(function L(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,f),this.dvrWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null})},"./src/dash/vo/MediaInfo.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function S(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,j(v.key),v)}}function R(f,c,g){return c&&S(f.prototype,c),g&&S(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}function j(f){var c=function U(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=R(function f(){(function L(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,f),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.labels=null,this.lang=null,this.viewpoint=null,this.accessibility=null,this.audioChannelConfiguration=null,this.roles=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.KID=null,this.bitrateList=null,this.isFragmented=null,this.isEmbedded=null,this.selectionPriority=1,this.supplementalProperties={}})},"./src/dash/vo/Mpd.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function S(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,j(v.key),v)}}function R(f,c,g){return c&&S(f.prototype,c),g&&S(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}function j(f){var c=function U(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=R(function f(){(function L(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,f),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.publishTime=null,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN})},"./src/dash/vo/PatchOperation.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function R(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,U(v.key),v)}}function U(f){var c=function L(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=function(){function f(c,g,v){(function S(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,f),this.action=c,this.xpath=g,this.value=v,this.position=null}return function j(f,c,g){return c&&R(f.prototype,c),g&&R(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}(f,[{key:"getMpdTarget",value:function(g){return this.xpath.getMpdTarget(g,"remove"===this.action||"replace"===this.action||"before"===this.position||"after"===this.position)}}]),f}()},"./src/dash/vo/Period.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function S(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,j(v.key),v)}}function R(f,c,g){return c&&S(f.prototype,c),g&&S(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}function j(f){var c=function U(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O);var b=R(function f(){(function L(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,f),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.nextPeriodId=null});b.DEFAULT_ID="defaultId",O.default=b},"./src/dash/vo/ProducerReferenceTime.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function S(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,j(v.key),v)}}function R(f,c,g){return c&&S(f.prototype,c),g&&S(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}function j(f){var c=function U(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=R(function f(){(function L(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,f),this.id=null,this.inband=!1,this.type="encoder",this.applicationScheme=null,this.wallClockTime=null,this.presentationTime=NaN,this.UTCTiming=null})},"./src/dash/vo/Representation.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/dash/constants/DashConstants.js");function S(c){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(c)}function j(c,g){for(var v=0;v<g.length;v++){var T=g[v];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(c,L(T.key),T)}}function L(c){var g=function b(c,g){if("object"!==S(c)||null===c)return c;var v=c[Symbol.toPrimitive];if(void 0!==v){var T=v.call(c,g||"default");if("object"!==S(T))return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===g?String:Number)(c)}(c,"string");return"symbol"===S(g)?g:String(g)}O.default=function(){function c(){(function R(c,g){if(!(c instanceof g))throw new TypeError("Cannot call a class as a function")})(this,c),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.mimeType=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.mediaFinishedInformation={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN},this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0}return function U(c,g,v){return g&&j(c.prototype,g),v&&j(c,v),Object.defineProperty(c,"prototype",{writable:!1}),c}(c,[{key:"hasInitialization",value:function(){return null!==this.initialization||null!==this.range}},{key:"hasSegments",value:function(){return this.segmentInfoType!==e.default.BASE_URL&&this.segmentInfoType!==e.default.SEGMENT_BASE&&!this.indexRange}}]),c}()},"./src/dash/vo/RepresentationInfo.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function S(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,j(v.key),v)}}function R(f,c,g){return c&&S(f.prototype,c),g&&S(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}function j(f){var c=function U(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=R(function f(){(function L(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,f),this.id=null,this.quality=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null})},"./src/dash/vo/Segment.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function S(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,j(v.key),v)}}function R(f,c,g){return c&&S(f.prototype,c),g&&S(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}function j(f){var c=function U(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=R(function f(){(function L(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,f),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.wallStartTime=NaN,this.representation=null})},"./src/dash/vo/SimpleXPath.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function R(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,U(v.key),v)}}function U(f){var c=function L(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=function(){function f(c){var g=this;(function S(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,f),this.valid="/"==c[0],this.path=c.split("/").filter(function(v){return 0!==v.length}).map(function(v){var T={name:v},k=v.indexOf("[");if(-1!=k){T.name=v.substring(0,k);var N=v.substring(k+1,v.length-1);g.valid=g.valid&&-1==N.indexOf("[");var B=N.indexOf("=");-1!=B?(T.attribute={name:N.substring(1,B),value:N.substring(B+1)},-1!=["'",'"'].indexOf(T.attribute.value[0])&&(T.attribute.value=T.attribute.value.substring(1,T.attribute.value.length-1))):T.position=parseInt(N,10)-1}return T})}return function j(f,c,g){return c&&R(f.prototype,c),g&&R(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}(f,[{key:"isValid",value:function(){return this.valid}},{key:"findsElement",value:function(){return!this.findsAttribute()}},{key:"findsAttribute",value:function(){return this.path[this.path.length-1].name.startsWith("@")}},{key:"getMpdTarget",value:function(g,v){for(var T=null,k=g,N=1,B="MPD";N<this.path.length&&null!==k;){T=k;var x=this.path[N];if(B=x.name,N!==this.path.length-1||!B.startsWith("@")){var P=T[B+"_asArray"]||[];0===P.length&&T[B]&&P.push(T[B]),x.position?k=P[x.position]||null:x.attribute?function(){var _=x.attribute;k=P.filter(function(D){return D[_.name]==_.value})[0]||null}():k=P[0]||null}N++}return null===k?null:B.startsWith("@")?{name:B.substring(1),leaf:k,target:k}:{name:B,leaf:k,target:v?T:k}}}]),f}()},"./src/dash/vo/StreamInfo.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function S(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,j(v.key),v)}}function R(f,c,g){return c&&S(f.prototype,c),g&&S(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}function j(f){var c=function U(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=R(function f(){(function L(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,f),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0})},"./src/dash/vo/UTCTiming.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function S(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,j(v.key),v)}}function R(f,c,g){return c&&S(f.prototype,c),g&&S(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}function j(f){var c=function U(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=R(function f(){(function L(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,f),this.schemeIdUri="",this.value=""})},"./src/streaming/FragmentLoader.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/constants/Constants.js"),S=r("./src/streaming/net/URLLoader.js"),R=r("./src/streaming/vo/HeadRequest.js"),j=r("./src/streaming/vo/DashJSError.js"),U=r("./src/core/FactoryMaker.js");function L(b){var N,B,f=this.context,c=(b=b||{}).eventBus,g=b.events,v=b.urlUtils,T=b.errors,k=b.streamId;return N={checkForExistence:function P(A){var I=function(de){c.trigger(g.CHECK_FOR_EXISTENCE_COMPLETED,{request:A,exists:de})};if(A){var G=new R.default(A.url);B.load({request:G,success:function(){I(!0)},error:function(){I(!1)}})}else I(!1)},load:function _(A){var I=function(ee,de){c.trigger(g.LOADING_COMPLETED,{request:A,response:ee||null,error:de||null,sender:N})};A?B.load({request:A,progress:function(ee){c.trigger(g.LOADING_PROGRESS,{request:A,stream:ee.stream,streamId:k}),ee.data&&c.trigger(g.LOADING_DATA_PROGRESS,{request:A,response:ee.data||null,error:null,sender:N})},success:function(ee){I(ee)},error:function(ee,de,ue){I(void 0,new j.default(T.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,ue,de))},abort:function(ee){ee&&c.trigger(g.LOADING_ABANDONED,{mediaType:ee.mediaType,request:ee,sender:N})}}):I(void 0,new j.default(T.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,T.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},abort:function D(){B&&B.abort()},reset:function y(){B&&(B.abort(),B=null)}},function x(){B=Object(S.default)(f).create({errHandler:b.errHandler,errors:T,dashMetrics:b.dashMetrics,mediaPlayerModel:b.mediaPlayerModel,requestModifier:b.requestModifier,urlUtils:v,constants:e.default,boxParser:b.boxParser,dashConstants:b.dashConstants,requestTimeout:b.settings.get().streaming.fragmentRequestTimeout})}(),N}L.__dashjs_factory_name="FragmentLoader",O.default=U.default.getClassFactory(L)},"./src/streaming/ManifestLoader.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/constants/Constants.js"),S=r("./src/dash/constants/DashConstants.js"),R=r("./src/streaming/controllers/XlinkController.js"),j=r("./src/streaming/net/URLLoader.js"),U=r("./src/streaming/utils/URLUtils.js"),L=r("./src/streaming/vo/TextRequest.js"),b=r("./src/streaming/vo/DashJSError.js"),f=r("./src/streaming/vo/metrics/HTTPRequest.js"),c=r("./src/core/EventBus.js"),g=r("./src/core/events/Events.js"),v=r("./src/core/errors/Errors.js"),T=r("./src/core/FactoryMaker.js"),k=r("./src/dash/parser/DashParser.js");function N(x){var I,G,ee,de,ue,P=this.context,_=(x=x||{}).debug,D=x.settings,y=Object(c.default)(P).getInstance(),A=Object(U.default)(P).getInstance(),Te=x.mssHandler,q=x.errHandler;function H(me){y.trigger(g.default.INTERNAL_MANIFEST_LOADED,{manifest:me.manifest})}return I={load:function ne(me){var xe=new L.default(me,f.HTTPRequest.MPD_TYPE);ee.load({request:xe,success:function(Oe,Ee,Ie){if(de){var Re,Pe,ke;if(Ie&&Ie!==me?(Pe=A.parseBaseUrl(Ie),Re=Ie):(A.isRelative(me)&&(me=A.resolve(me,window.location.href)),Pe=A.parseBaseUrl(me)),"No Content"==Ee)return void y.trigger(g.default.INTERNAL_MANIFEST_LOADED,{manifest:null});if(null===ue&&(ue=function ce(me){var xe=null;return me.indexOf("SmoothStreamingMedia")>-1?(Te&&(xe=Te.createMssParser(),Te.registerEvents()),xe):me.indexOf("MPD")>-1||me.indexOf("Patch")>-1?Object(k.default)(P).create({debug:_}):xe}(Oe)),null===ue)return void y.trigger(g.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new b.default(v.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,v.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(me))});de.setMatchers(ue.getMatchers()),de.setIron(ue.getIron());try{ke=ue.parse(Oe)}catch(qe){return void y.trigger(g.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new b.default(v.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,v.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(me))})}if(ke){if(ke.url=Re||me,ke.originalUrl||(ke.originalUrl=ke.url),ke.hasOwnProperty(e.default.LOCATION)&&(Pe=A.parseBaseUrl(ke.Location_asArray[0]),G.debug("BaseURI set by Location to: "+Pe)),D&&D.get().streaming.enableManifestDurationMismatchFix&&ke.mediaPresentationDuration&&ke.Period_asArray.length>1){var Be=ke.Period_asArray.reduce(function(qe,He){return qe+He.duration},0);!isNaN(Be)&&ke.mediaPresentationDuration>Be&&(G.warn("Media presentation duration greater than duration of all periods. Setting duration to total period duration"),ke.mediaPresentationDuration=Be)}ke.baseUri=Pe,ke.loadedTime=new Date,de.resolveManifestOnLoad(ke),y.trigger(g.default.ORIGINAL_MANIFEST_LOADED,{originalManifest:Oe})}else y.trigger(g.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new b.default(v.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,v.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(me))})}},error:function(Oe,Ee,Ie){y.trigger(g.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new b.default(v.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,v.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+"".concat(me,", ").concat(Ie))})}})},reset:function pe(){y.off(g.default.XLINK_READY,H,I),Te&&Te.reset(),de&&(de.reset(),de=null),ee&&(ee.abort(),ee=null)}},function se(){G=_.getLogger(I),y.on(g.default.XLINK_READY,H,I),ee=Object(j.default)(P).create({errHandler:x.errHandler,dashMetrics:x.dashMetrics,mediaPlayerModel:x.mediaPlayerModel,requestModifier:x.requestModifier,urlUtils:A,constants:e.default,dashConstants:S.default,errors:v.default,requestTimeout:x.settings.get().streaming.manifestRequestTimeout}),de=Object(R.default)(P).create({errHandler:q,dashMetrics:x.dashMetrics,mediaPlayerModel:x.mediaPlayerModel,requestModifier:x.requestModifier,settings:x.settings}),ue=null}(),I}N.__dashjs_factory_name="ManifestLoader";var B=T.default.getClassFactory(N);O.default=B},"./src/streaming/ManifestUpdater.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/EventBus.js"),S=r("./src/core/events/Events.js"),R=r("./src/streaming/MediaPlayerEvents.js"),j=r("./src/core/FactoryMaker.js"),U=r("./src/core/Debug.js"),L=r("./src/core/errors/Errors.js"),b=r("./src/dash/constants/DashConstants.js"),f=r("./src/streaming/utils/URLUtils.js");function c(){var k,N,B,x,P,_,D,y,A,I,G,ee,g=this.context,v=Object(e.default)(g).getInstance(),T=Object(f.default)(g).getInstance();function se(){B=NaN,D=!1,P=!0,_=!1,ce()}function ce(){null!==x&&(clearTimeout(x),x=null)}function ne(Pe){ce(),!_&&(isNaN(Pe)&&!isNaN(B)&&(Pe=1e3*B),isNaN(Pe)||(N.debug("Refresh manifest in "+Pe+" milliseconds."),x=setTimeout(xe,Pe)))}function pe(){var Pe=arguments.length>0&&void 0!==arguments[0]&&arguments[0];D=!0;var ke=A.getValue(),Be=ke.url,qe=I.getPatchLocation(ke),He=I.getLocation(ke);qe&&!Pe?Be=qe:He&&(Be=He),T.isRelative(Be)&&(Be=T.resolve(Be,ke.url)),y.load(Be)}function me(Pe){if(Pe){if(I.getIsPatch(Pe)){var ke=Pe;Pe=A.getValue();var Be=I.isPatchValid(Pe,ke),qe=Be;if(Be){var He=I.getPublishTime(Pe);qe=I.applyPatchToManifest(Pe,ke);var De=I.getPublishTime(Pe);qe=He.getTime()!=De.getTime()}if(!qe)return N.debug("Patch provided is invalid, performing full manifest refresh"),void pe(!0);Pe.loadedTime=new Date}}else(Pe=A.getValue()).loadedTime=new Date;if(A.getValue()&&A.getValue().type===b.default.DYNAMIC&&Pe.type===b.default.STATIC)return v.trigger(S.default.DYNAMIC_TO_STATIC),D=!1,void(_=!0);A.setValue(Pe);var he=new Date,Y=(he.getTime()-Pe.loadedTime.getTime())/1e3;1e3*(B=I.getManifestUpdatePeriod(Pe,Y))>2147483647&&(B=2147483.647),v.trigger(S.default.MANIFEST_UPDATED,{manifest:Pe}),N.info("Manifest has been refreshed at "+he+"["+he.getTime()/1e3+"] "),P||ne()}function xe(){if(!P){if(D)return void ne(ee.get().streaming.manifestUpdateRetryInterval);pe()}}function ve(Pe){Pe.error?Pe.error.code===L.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&G.error(Pe.error):me(Pe.manifest)}function Oe(){P=!1,ne()}function Ee(){(P=!ee.get().streaming.scheduling.scheduleWhilePaused)&&ce()}function Ie(){D=!1}return k={initialize:function Te(){se(),v.on(S.default.STREAMS_COMPOSED,Ie,this),v.on(R.default.PLAYBACK_STARTED,Oe,this),v.on(R.default.PLAYBACK_PAUSED,Ee,this),v.on(S.default.INTERNAL_MANIFEST_LOADED,ve,this)},setManifest:function q(Pe){me(Pe)},refreshManifest:pe,getIsUpdating:function Re(){return D},setConfig:function ue(Pe){!Pe||(Pe.manifestModel&&(A=Pe.manifestModel),Pe.adapter&&(I=Pe.adapter),Pe.manifestLoader&&(y=Pe.manifestLoader),Pe.errHandler&&(G=Pe.errHandler),Pe.settings&&(ee=Pe.settings))},reset:function H(){v.off(R.default.PLAYBACK_STARTED,Oe,this),v.off(R.default.PLAYBACK_PAUSED,Ee,this),v.off(S.default.STREAMS_COMPOSED,Ie,this),v.off(S.default.INTERNAL_MANIFEST_LOADED,ve,this),se()}},function de(){N=Object(U.default)(g).getInstance().getLogger(k)}(),k}c.__dashjs_factory_name="ManifestUpdater",O.default=j.default.getClassFactory(c)},"./src/streaming/MediaPlayer.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./externals/cea608-parser.js"),S=r.n(e),R=r("./src/streaming/constants/Constants.js"),j=r("./src/dash/constants/DashConstants.js"),U=r("./src/streaming/constants/MetricsConstants.js"),L=r("./src/streaming/controllers/PlaybackController.js"),b=r("./src/streaming/controllers/StreamController.js"),f=r("./src/streaming/controllers/GapController.js"),c=r("./src/streaming/controllers/CatchupController.js"),g=r("./src/dash/controllers/ServiceDescriptionController.js"),v=r("./src/dash/controllers/ContentSteeringController.js"),T=r("./src/streaming/controllers/MediaController.js"),k=r("./src/streaming/controllers/BaseURLController.js"),N=r("./src/streaming/ManifestLoader.js"),B=r("./src/streaming/utils/ErrorHandler.js"),x=r("./src/streaming/utils/Capabilities.js"),P=r("./src/streaming/utils/CapabilitiesFilter.js"),_=r("./src/streaming/utils/RequestModifier.js"),D=r("./src/streaming/models/URIFragmentModel.js"),y=r("./src/streaming/models/ManifestModel.js"),A=r("./src/streaming/models/MediaPlayerModel.js"),I=r("./src/streaming/controllers/AbrController.js"),G=r("./src/streaming/net/SchemeLoaderFactory.js"),ee=r("./src/streaming/models/VideoModel.js"),de=r("./src/streaming/models/CmcdModel.js"),ue=r("./src/streaming/utils/DOMStorage.js"),Te=r("./src/core/Debug.js"),q=r("./src/core/errors/Errors.js"),se=r("./src/core/EventBus.js"),H=r("./src/core/events/Events.js"),ce=r("./src/streaming/MediaPlayerEvents.js"),ne=r("./src/core/FactoryMaker.js"),pe=r("./src/core/Settings.js"),me=r("./src/core/Version.js"),xe=r("./src/dash/controllers/SegmentBaseController.js"),ve=r("./src/dash/DashAdapter.js"),Oe=r("./src/dash/DashMetrics.js"),Ee=r("./src/dash/utils/TimelineConverter.js"),Ie=r("./src/streaming/vo/metrics/HTTPRequest.js"),Re=r("./externals/base64.js"),Pe=r.n(Re),ke=r("./node_modules/codem-isoboxer/dist/iso_boxer.js"),Be=r.n(ke),qe=r("./src/streaming/vo/DashJSError.js"),He=r("./src/streaming/utils/SupervisorTools.js"),De=r("./src/streaming/ManifestUpdater.js"),he=r("./src/streaming/utils/URLUtils.js"),Y=r("./src/streaming/utils/BoxParser.js"),J=r("./src/streaming/text/TextController.js"),Me=r("./src/streaming/models/CustomParametersModel.js");function ae(){var at,et,ut,Ot,tt,Et,Yt,vt,At,Dt,$t,Kt,Xt,ln,Bn,Rn,jn,Vn,ot,Qe,mt,Lt,nn,zt,_t,pt,rt,Xe,yt,Gt,Qt,on,mn,Dn,Zn,Jn,_r,z="You must first call initialize() and set a source before calling this method",te="You must first call initialize() and set a valid source and view before calling this method",X="You must first call attachView() to set the video element before calling this method",W="MediaPlayer not initialized!",oe=this.context,be=Object(se.default)(oe).getInstance(),Fe=Object(pe.default)(oe).getInstance(),We=Object(Te.default)(oe).getInstance({settings:Fe});function fn(){yr(null),fr(null),Ot=null,Xt&&(Xt.reset(),Xt=null),ln&&(ln.reset(),ln=null),ot&&ot.reset(),Fe.reset(),Rn&&(Rn.reset(),Rn=null)}function kt(){return!!ut&&!!Dn.getElement()}function kn(){return Object(me.getVersionString)()}function Vt(){if(!Yt)throw te;return rt.isPaused()}function Pt(){if(!Yt)throw te;return rt.getIsDynamic()}function Oi(wt){var vn=zt&&zt.hasVideoTrack()?R.default.VIDEO:R.default.AUDIO,Hn=Qt.getCurrentDVRInfo(vn);if(!Hn)return 0;var Gn=rt.getOriginalLiveDelay(),Jr=Hn.range.start+wt;return Jr>Hn.range.end-Gn&&(Jr=Hn.range.end-Gn),Jr}function oi(wt){if(!Yt)throw te;var vn=Ur().currentTime;if(void 0!==wt)vn=zt.getTimeRelativeToStreamId(vn,wt);else if(rt.getIsDynamic()){var Hn=zt&&zt.hasVideoTrack()?R.default.VIDEO:R.default.AUDIO,Gn=Qt.getCurrentDVRInfo(Hn);vn=null===Gn||0===vn?0:Math.max(0,vn-Gn.range.start)}return vn}function si(){if(!Yt)throw te;var wt=Ur().duration;if(rt.getIsDynamic()){var vn=zt&&zt.hasVideoTrack()?R.default.VIDEO:R.default.AUDIO,Hn=Qt.getCurrentDVRInfo(vn);wt=Hn?Hn.range.end-Hn.range.start:0}return wt}function vo(wt){Object(He.checkParameterType)(wt,"boolean"),vt=wt}function it(){ot.restoreDefaultUTCTimingSources()}function an(){return Qt}function Ur(){if(!Dn.getElement())throw X;return Dn.getElement()}function fr(wt){if(!tt)throw W;Dn.setElement(wt),wt&&(un(),function Xn(){if(!ln){var wt=dashjs.MetricsReporting;if("function"==typeof wt){var vn=wt(oe).create();ln=vn.createMetricsReporting({debug:We,eventBus:be,mediaElement:Ur(),adapter:jn,dashMetrics:Qt,mediaPlayerModel:Vn,events:H.default,constants:R.default,metricsConstants:U.default})}}}(),function qr(){if(!Bn){var wt=dashjs.MssHandler;"function"==typeof wt&&(q.default.extend(wt.errors),Bn=wt(oe).create({eventBus:be,mediaPlayerModel:Vn,dashMetrics:Qt,manifestModel:on,playbackController:rt,streamController:zt,protectionController:Xt,baseURLController:mt,errHandler:Qe,events:H.default,constants:R.default,debug:We,initSegmentType:Ie.HTTPRequest.INIT_SEGMENT_TYPE,BASE64:Pe.a,ISOBoxer:Be.a,settings:Fe}))}}(),zt&&zt.switchToVideoElement()),Yt&&Ne(),Cn()}function _o(wt){if(!Et)throw z;var vn=zt.getActiveStreamInfo();return vn?Kt.getTracksFor(wt,vn.id):[]}function yr(wt){var vn=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN;if(!tt)throw W;"string"==typeof wt&&Zn.initialize(wt),(null==vn||isNaN(vn))&&(vn=NaN),vn=Math.max(0,vn),ut=wt,(Et||Yt)&&Ne(),kt()&&Cn(vn)}function Eo(){if(!Et)throw z;var wt=zt.getActiveStreamInfo();return wt?zt.getStreamById(wt.id):null}function Ne(){Yt=!1,Et=!1,jn.reset(),zt.reset(),pt.reset(),Gt.reset(),rt.reset(),Xe.reset(),yt.reset(),At.reset(),Kt.reset(),_r.reset(),Xt&&(Fe.get().streaming.protection.keepProtectionMediaKeys?Xt.stop():(Xt.reset(),Xt=null,un())),_t.reset(),mn.reset()}function we(){var wt=ht();zt||(zt=Object(b.default)(oe).getInstance()),_t||(_t=Object(J.default)(oe).create({errHandler:Qe,manifestModel:on,adapter:jn,mediaController:Kt,videoModel:Dn,settings:Fe})),nn.setConfig({capabilities:Lt,customParametersModel:ot,adapter:jn,settings:Fe,manifestModel:on,errHandler:Qe}),zt.setConfig({capabilities:Lt,capabilitiesFilter:nn,manifestLoader:wt,manifestModel:on,mediaPlayerModel:Vn,customParametersModel:ot,protectionController:Xt,textController:_t,adapter:jn,dashMetrics:Qt,errHandler:Qe,timelineConverter:$t,videoModel:Dn,playbackController:rt,serviceDescriptionController:Xe,contentSteeringController:yt,abrController:At,mediaController:Kt,settings:Fe,baseURLController:mt,uriFragmentModel:Zn,segmentBaseController:_r}),pt.setConfig({settings:Fe,playbackController:rt,streamController:zt,videoModel:Dn,timelineConverter:$t,adapter:jn}),rt.setConfig({streamController:zt,serviceDescriptionController:Xe,dashMetrics:Qt,adapter:jn,videoModel:Dn,timelineConverter:$t,settings:Fe}),Gt.setConfig({streamController:zt,playbackController:rt,mediaPlayerModel:Vn,videoModel:Dn,settings:Fe}),At.setConfig({streamController:zt,domStorage:Jn,mediaPlayerModel:Vn,customParametersModel:ot,dashMetrics:Qt,adapter:jn,videoModel:Dn,settings:Fe}),mn.setConfig({abrController:At,dashMetrics:Qt,playbackController:rt}),yt.setConfig({adapter:jn,errHandler:Qe,dashMetrics:Qt,mediaPlayerModel:Vn,manifestModel:on,abrController:At,eventBus:be,requestModifier:Object(_.default)(oe).getInstance()}),At.initialize(),zt.initialize(vt,Ot),_t.initialize(),pt.initialize(),Gt.initialize(),mn.initialize(),yt.initialize(),_r.initialize()}function ht(){return Object(N.default)(oe).create({debug:We,errHandler:Qe,dashMetrics:Qt,mediaPlayerModel:Vn,requestModifier:Object(_.default)(oe).getInstance(),mssHandler:Bn,settings:Fe})}function un(){if(Xt)return Xt;var wt=dashjs.Protection;if("function"==typeof wt){var vn=wt(oe).create();return H.default.extend(wt.events),ce.default.extend(wt.events,{publicOnly:!0}),q.default.extend(wt.errors),Lt||(Lt=Object(x.default)(oe).getInstance()),Xt=vn.createProtectionSystem({debug:We,errHandler:Qe,videoModel:Dn,customParametersModel:ot,capabilities:Lt,eventBus:be,events:H.default,BASE64:Pe.a,constants:R.default,cmcdModel:mn,settings:Fe})}return null}function $r(){if(!tt)throw W;if(Rn)return Rn;var wt=dashjs.OfflineController;if("function"==typeof wt){H.default.extend(wt.events),ce.default.extend(wt.events,{publicOnly:!0}),q.default.extend(wt.errors);var vn=ht(),Hn=Object(De.default)(oe).create();return Hn.setConfig({manifestModel:on,adapter:jn,manifestLoader:vn,errHandler:Qe}),Rn=wt(oe).create({debug:We,manifestUpdater:Hn,baseURLController:mt,manifestLoader:vn,manifestModel:on,mediaPlayerModel:Vn,abrController:At,playbackController:rt,adapter:jn,errHandler:Qe,dashMetrics:Qt,timelineConverter:$t,segmentBaseController:_r,schemeLoaderFactory:Dt,eventBus:be,events:H.default,errors:q.default,constants:R.default,settings:Fe,dashConstants:j.default,urlUtils:Object(he.default)(oe).getInstance()})}return null}function no(wt){var vn=zt&&zt.hasVideoTrack()?R.default.VIDEO:R.default.AUDIO,Hn=Qt.getCurrentDVRInfo(vn);return Hn?wt+(Hn.manifestInfo.availableFrom.getTime()/1e3+Hn.range.start):0}function Cn(){var wt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NaN;Rn&&Rn.resetRecords(),!Et&&ut&&(Et=!0,et.info("Streaming Initialized"),we(),"string"==typeof ut?zt.load(ut,wt):zt.loadWithManifest(ut,wt)),!Yt&&kt()&&(Yt=!0,et.info("Playback Initialized"))}return at={initialize:function qt(wt,vn,Hn){var Gn=arguments.length>3&&void 0!==arguments[3]?arguments[3]:NaN;Lt||(Lt=Object(x.default)(oe).getInstance()).setConfig({settings:Fe}),Qe||(Qe=Object(B.default)(oe).getInstance()),Lt.supportsMediaSource()?(tt||(tt=!0,$t=Object(Ee.default)(oe).getInstance(),At||(At=Object(I.default)(oe).getInstance()).setConfig({settings:Fe}),Dt||(Dt=Object(G.default)(oe).getInstance()),rt||(rt=Object(L.default)(oe).getInstance()),Kt||(Kt=Object(T.default)(oe).getInstance()),zt||(zt=Object(b.default)(oe).getInstance()),pt||(pt=Object(f.default)(oe).getInstance()),Gt||(Gt=Object(c.default)(oe).getInstance()),Xe||(Xe=Object(g.default)(oe).getInstance()),yt||(yt=Object(v.default)(oe).getInstance()),nn||(nn=Object(P.default)(oe).getInstance()),jn=Object(ve.default)(oe).getInstance(),on=Object(y.default)(oe).getInstance(),mn=Object(de.default)(oe).getInstance(),Qt=Object(Oe.default)(oe).getInstance({settings:Fe}),Jn=Object(ue.default)(oe).getInstance({settings:Fe}),jn.setConfig({constants:R.default,cea608parser:S.a,errHandler:Qe,BASE64:Pe.a}),mt||(mt=Object(k.default)(oe).create()),mt.setConfig({adapter:jn}),Xe.setConfig({adapter:jn}),_r||(_r=Object(xe.default)(oe).getInstance({dashMetrics:Qt,mediaPlayerModel:Vn,errHandler:Qe,baseURLController:mt,events:H.default,eventBus:be,debug:We,boxParser:Object(Y.default)(oe).getInstance(),requestModifier:Object(_.default)(oe).getInstance(),errors:q.default})),Kt.setConfig({domStorage:Jn,settings:Fe,customParametersModel:ot}),Vn.setConfig({playbackController:rt,serviceDescriptionController:Xe}),it(),vo(void 0===Hn||Hn),$r()),wt&&fr(wt),vn&&yr(vn,Gn),et.info("[dash.js "+kn()+"] MediaPlayer has been initialized")):Qe.error(new qe.default(q.default.CAPABILITY_MEDIASOURCE_ERROR_CODE,q.default.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},setConfig:function ct(wt){!wt||(wt.capabilities&&(Lt=wt.capabilities),wt.capabilitiesFilter&&(nn=wt.capabilitiesFilter),wt.streamController&&(zt=wt.streamController),wt.textController&&(_t=wt.textController),wt.gapController&&(pt=wt.gapController),wt.playbackController&&(rt=wt.playbackController),wt.serviceDescriptionController&&(Xe=wt.serviceDescriptionController),wt.contentSteeringController&&(yt=wt.contentSteeringController),wt.catchupController&&(Gt=wt.catchupController),wt.mediaPlayerModel&&(Vn=wt.mediaPlayerModel),wt.customParametersModel&&(ot=wt.customParametersModel),wt.abrController&&(At=wt.abrController),wt.schemeLoaderFactory&&(Dt=wt.schemeLoaderFactory),wt.mediaController&&(Kt=wt.mediaController),wt.settings&&(Fe=wt.settings))},on:function Rt(wt,vn,Hn,Gn){be.on(wt,vn,Hn,Gn)},off:function sn(wt,vn,Hn){be.off(wt,vn,Hn)},extend:function Ri(wt,vn,Hn){ne.default.extend(wt,vn,Hn,oe)},attachView:fr,attachSource:yr,isReady:kt,play:function xt(){if(!Yt)throw te;(!vt||Vt()&&Yt)&&rt.play(!0)},isPaused:Vt,pause:function Ct(){if(!Yt)throw te;rt.pause()},isSeeking:function Ln(){if(!Yt)throw te;return rt.isSeeking()},isDynamic:Pt,getLowLatencyModeEnabled:function yn(){if(!Yt)throw te;return rt.getLowLatencyModeEnabled()},seek:function Jt(wt){if(!Yt)throw te;if(Object(He.checkParameterType)(wt,"number"),isNaN(wt))throw R.default.BAD_ARGUMENT_ERROR;wt<0&&(wt=0);var vn=rt.getIsDynamic()?Oi(wt):wt,Hn=Ur();!rt.getIsDynamic()&&Hn.duration&&(vn=Math.min(Hn.duration,vn)),rt.seek(vn,!1,!1,!0)},seekToOriginalLive:function bn(){!Yt||!Pt()||rt.seekToOriginalLive()},setPlaybackRate:function Nn(wt){Ur().playbackRate=wt},getPlaybackRate:function $n(){return Ur().playbackRate},setMute:function dr(wt){Object(He.checkParameterType)(wt,"boolean"),Ur().muted=wt},isMuted:function pr(){return Ur().muted},setVolume:function Cr(wt){if("number"!=typeof wt||isNaN(wt)||wt<0||wt>1)throw R.default.BAD_ARGUMENT_ERROR;Ur().volume=wt},getVolume:function Sr(){return Ur().volume},time:oi,duration:si,timeAsUTC:function Zi(){if(!Yt)throw te;return oi()<0?NaN:no(oi())},durationAsUTC:function ci(){if(!Yt)throw te;return no(si())},getActiveStream:Eo,getDVRWindowSize:function Tr(){var wt=zt&&zt.hasVideoTrack()?R.default.VIDEO:R.default.AUDIO,vn=Qt.getCurrentDVRInfo(wt);return vn?vn.manifestInfo.dvrWindowSize:0},getDVRSeekOffset:Oi,getTargetLiveDelay:function Mi(){if(!Yt)throw te;return rt.getOriginalLiveDelay()},convertToTimeCode:function Oo(wt){wt=Math.max(wt,0);var vn=Math.floor(wt/3600),Hn=Math.floor(wt%3600/60),Gn=Math.floor(wt%3600%60);return(0===vn?"":vn<10?"0"+vn.toString()+":":vn.toString()+":")+(Hn<10?"0"+Hn.toString():Hn.toString())+":"+(Gn<10?"0"+Gn.toString():Gn.toString())},formatUTC:function Gr(wt,vn,Hn){var Gn=arguments.length>3&&void 0!==arguments[3]&&arguments[3],Jr=new Date(1e3*wt),Ni=Jr.toLocaleDateString(vn),Mr=Jr.toLocaleTimeString(vn,{hour12:Hn});return Gn?Mr+" "+Ni:Mr},getVersion:kn,getDebug:function wn(){return We},getBufferLength:function Yr(wt){var vn=[R.default.VIDEO,R.default.AUDIO,R.default.TEXT];if(wt)return-1!==vn.indexOf(wt)?an().getCurrentBufferLevel(wt)||NaN:(et.warn("getBufferLength requested for invalid type"),NaN);var Hn=vn.map(function(Jr){return _o(Jr).length>0?an().getCurrentBufferLevel(Jr):Number.MAX_VALUE}).reduce(function(Jr,Ni){return Math.min(Jr,Ni)});return Hn===Number.MAX_VALUE?NaN:Hn},getTTMLRenderingDiv:function pi(){return Dn?Dn.getTTMLRenderingDiv():null},getVideoElement:Ur,getSource:function Zr(){if(!ut)throw"You must first call attachSource() with a valid source before calling this method";return ut},updateSource:function Dr(wt){zt.load(ut=wt)},getCurrentLiveLatency:function Mo(){if(!tt)throw W;return Yt?rt.getCurrentLiveLatency():NaN},getTopBitrateInfoFor:function Si(wt){if(!Et)throw z;return At.getTopBitrateInfoFor(wt)},setAutoPlay:vo,getAutoPlay:function Ui(){return vt},getDashMetrics:an,getQualityFor:function Ar(wt){if(!Et)throw z;if(wt===R.default.IMAGE){var vn=Eo();if(!vn)return-1;var Hn=vn.getThumbnailController();return Hn?Hn.getCurrentTrackIndex():-1}return At.getQualityFor(wt)},setQualityFor:function eo(wt,vn){var Hn=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!Et)throw z;if(wt===R.default.IMAGE){var Gn=Eo();if(!Gn)return;var Jr=Gn.getThumbnailController();Jr&&Jr.setTrackByIndex(vn)}At.setPlaybackQuality(wt,zt.getActiveStreamInfo(),vn,{forceReplace:Hn})},updatePortalSize:function Bi(){At.setElementSize(),At.setWindowResizeEventCalled(!0)},enableText:function In(wt){var vn=zt.getActiveStreamInfo();return!(!vn||!_t)&&_t.enableText(vn.id,wt)},enableForcedTextStreaming:function tr(wt){return!(!zt.getActiveStreamInfo()||!_t)&&_t.enableForcedTextStreaming(wt)},isTextEnabled:function lr(){var wt=zt.getActiveStreamInfo();return!(!wt||!_t)&&_t.isTextEnabled(wt)},setTextTrack:function Bt(wt){if(!Yt)throw te;var vn=zt.getActiveStreamInfo();!vn||!_t||_t.setTextTrack(vn.id,wt)},getBitrateInfoListFor:function to(wt){if(!Et)throw z;var vn=Eo();return vn?vn.getBitrateListFor(wt):[]},getStreamsFromManifest:function kr(wt){if(!Et)throw z;return jn.getStreamsInfo(wt)},getTracksFor:_o,getTracksForTypeFromManifest:function Ao(wt,vn,Hn){if(!Et)throw z;return(Hn=Hn||jn.getStreamsInfo(vn,1)[0])?jn.getAllMediaInfoForType(Hn,wt,vn):[]},getCurrentTrackFor:function Bo(wt){if(!Et)throw z;var vn=zt.getActiveStreamInfo();return Kt.getCurrentTrackFor(wt,vn.id)},setInitialMediaSettingsFor:function Ms(wt,vn){if(!tt)throw W;Kt.setInitialSettings(wt,vn)},getInitialMediaSettingsFor:function xi(wt){if(!tt)throw W;return Kt.getInitialSettings(wt)},setCurrentTrack:function wi(wt){if(!Et)throw z;Kt.setTrack(wt)},addABRCustomRule:function ji(wt,vn,Hn){ot.addAbrCustomRule(wt,vn,Hn)},removeABRCustomRule:function _i(wt){ot.removeAbrCustomRule(wt)},removeAllABRCustomRule:function Ko(){ot.removeAllAbrCustomRule()},getABRCustomRules:function Wr(){return ot.getAbrCustomRules()},getAverageThroughput:function rr(wt){var vn=At.getThroughputHistory(),Hn=rt.getIsDynamic();return vn?vn.getAverageThroughput(wt,Hn):0},retrieveManifest:function Qn(wt,vn){var Hn=ht(),Gn=this;be.on(H.default.INTERNAL_MANIFEST_LOADED,function Ni(Mr){Mr.error?vn(null,Mr.error):vn(Mr.manifest),be.off(H.default.INTERNAL_MANIFEST_LOADED,Ni,Gn),Hn.reset()},Gn),Zn.initialize(wt),Hn.load(wt)},addUTCTimingSource:function Po(wt,vn){ot.addUTCTimingSource(wt,vn)},removeUTCTimingSource:function ko(wt,vn){ot.removeUTCTimingSource(wt,vn)},clearDefaultUTCTimingSources:function ir(){ot.clearDefaultUTCTimingSources()},restoreDefaultUTCTimingSources:it,setXHRWithCredentialsForType:function hn(wt,vn){ot.setXHRWithCredentialsForType(wt,vn)},getXHRWithCredentialsForType:function Pi(wt){return ot.getXHRWithCredentialsForType(wt)},getProtectionController:function dt(){return un()},attachProtectionController:function Ut(wt){Xt=wt},setProtectionData:function gn(wt){Ot=wt,zt&&zt.setProtectionData(Ot)},registerLicenseRequestFilter:function Hr(wt){ot.registerLicenseRequestFilter(wt)},registerLicenseResponseFilter:function je(wt){ot.registerLicenseResponseFilter(wt)},unregisterLicenseRequestFilter:function lt(wt){ot.unregisterLicenseRequestFilter(wt)},unregisterLicenseResponseFilter:function Ge(wt){ot.unregisterLicenseResponseFilter(wt)},registerCustomCapabilitiesFilter:function Fi(wt){ot.registerCustomCapabilitiesFilter(wt)},unregisterCustomCapabilitiesFilter:function yo(wt){ot.unregisterCustomCapabilitiesFilter(wt)},setCustomInitialTrackSelectionFunction:function es(wt){ot.setCustomInitialTrackSelectionFunction(wt)},resetCustomInitialTrackSelectionFunction:function Io(){ot.resetCustomInitialTrackSelectionFunction(null)},attachTTMLRenderingDiv:function Vi(wt){if(!Dn.getElement())throw X;Dn.setTTMLRenderingDiv(wt)},attachVttRenderingDiv:function so(wt){if(!Dn.getElement())throw X;Dn.setVttRenderingDiv(wt)},getCurrentTextTrackIndex:function Or(){var vn=zt.getActiveStreamInfo();if(vn&&_t)return _t.getCurrentTrackIdx(vn.id)},provideThumbnail:function _n(wt,vn){if("function"==typeof vn){if(wt<0)return void vn(null);var Hn=rt.getIsDynamic()?Oi(wt):wt,Gn=zt.getStreamForTime(Hn);if(null===Gn)return void vn(null);var Jr=Gn.getThumbnailController();return Jr?Jr.provide(Hn,vn):void vn(null)}},getDashAdapter:function Ti(){return jn},getOfflineController:function Nt(){return $r()},triggerSteeringRequest:function xo(){if(yt)return yt.loadSteeringData()},getCurrentSteeringResponseData:function Ye(){if(yt)return yt.getCurrentSteeringResponseData()},getSettings:function Rr(){return Fe.get()},updateSettings:function ai(wt){Fe.update(wt)},resetSettings:function jr(){Fe.reset()},reset:fn,destroy:function It(){fn(),ne.default.deleteSingletonInstances(oe)}},function Pr(){et=We.getLogger(at),tt=!1,Yt=!1,Et=!1,vt=!0,Xt=null,Rn=null,Ot=null,jn=null,_r=null,H.default.extend(ce.default),Vn=Object(A.default)(oe).getInstance(),ot=Object(Me.default)(oe).getInstance(),Dn=Object(ee.default)(oe).getInstance(),Zn=Object(D.default)(oe).getInstance()}(),at}ae.__dashjs_factory_name="MediaPlayer";var re=ne.default.getClassFactory(ae);re.events=ce.default,re.errors=q.default,ne.default.updateClassFactory(ae.__dashjs_factory_name,re),O.default=re},"./src/streaming/MediaPlayerEvents.js":function(Ve,O,r){"use strict";function S(P){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(_){return typeof _}:function(_){return _&&"function"==typeof Symbol&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(P)}function R(P,_){for(var D=0;D<_.length;D++){var y=_[D];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(P,U(y.key),y)}}function U(P){var _=function L(P,_){if("object"!==S(P)||null===P)return P;var D=P[Symbol.toPrimitive];if(void 0!==D){var y=D.call(P,_||"default");if("object"!==S(y))return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===_?String:Number)(P)}(P,"string");return"symbol"===S(_)?_:String(_)}function f(P,_){if("function"!=typeof _&&null!==_)throw new TypeError("Super expression must either be null or a function");P.prototype=Object.create(_&&_.prototype,{constructor:{value:P,writable:!0,configurable:!0}}),Object.defineProperty(P,"prototype",{writable:!1}),_&&c(P,_)}function c(P,_){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(y,A){return y.__proto__=A,y})(P,_)}function g(P){var _=function k(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(P){return!1}}();return function(){var A,y=N(P);if(_){var I=N(this).constructor;A=Reflect.construct(y,arguments,I)}else A=y.apply(this,arguments);return v(this,A)}}function v(P,_){if(_&&("object"===S(_)||"function"==typeof _))return _;if(void 0!==_)throw new TypeError("Derived constructors may only return object or undefined");return function T(P){if(void 0===P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P}(P)}function N(P){return(N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(D){return D.__proto__||Object.getPrototypeOf(D)})(P)}r.r(O);var x=new(function(P){f(D,P);var _=g(D);function D(){var y;return function b(P,_){if(!(P instanceof _))throw new TypeError("Cannot call a class as a function")}(this,D),(y=_.call(this)).AST_IN_FUTURE="astInFuture",y.BUFFER_EMPTY="bufferStalled",y.BUFFER_LOADED="bufferLoaded",y.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",y.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",y.DYNAMIC_TO_STATIC="dynamicToStatic",y.ERROR="error",y.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",y.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",y.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",y.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",y.LOG="log",y.MANIFEST_LOADED="manifestLoaded",y.METRICS_CHANGED="metricsChanged",y.METRIC_CHANGED="metricChanged",y.METRIC_ADDED="metricAdded",y.METRIC_UPDATED="metricUpdated",y.PERIOD_SWITCH_STARTED="periodSwitchStarted",y.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",y.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",y.QUALITY_CHANGE_RENDERED="qualityChangeRendered",y.TRACK_CHANGE_RENDERED="trackChangeRendered",y.STREAM_INITIALIZING="streamInitializing",y.STREAM_UPDATED="streamUpdated",y.STREAM_ACTIVATED="streamActivated",y.STREAM_DEACTIVATED="streamDeactivated",y.STREAM_INITIALIZED="streamInitialized",y.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",y.TEXT_TRACKS_ADDED="allTextTracksAdded",y.TEXT_TRACK_ADDED="textTrackAdded",y.TTML_PARSED="ttmlParsed",y.TTML_TO_PARSE="ttmlToParse",y.CAPTION_RENDERED="captionRendered",y.CAPTION_CONTAINER_RESIZE="captionContainerResize",y.CAN_PLAY="canPlay",y.CAN_PLAY_THROUGH="canPlayThrough",y.PLAYBACK_ENDED="playbackEnded",y.PLAYBACK_ERROR="playbackError",y.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",y.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",y.PLAYBACK_LOADED_DATA="playbackLoadedData",y.PLAYBACK_PAUSED="playbackPaused",y.PLAYBACK_PLAYING="playbackPlaying",y.PLAYBACK_PROGRESS="playbackProgress",y.PLAYBACK_RATE_CHANGED="playbackRateChanged",y.PLAYBACK_SEEKED="playbackSeeked",y.PLAYBACK_SEEKING="playbackSeeking",y.PLAYBACK_STALLED="playbackStalled",y.PLAYBACK_STARTED="playbackStarted",y.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",y.PLAYBACK_VOLUME_CHANGED="playbackVolumeChanged",y.PLAYBACK_WAITING="playbackWaiting",y.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",y.EVENT_MODE_ON_START="eventModeOnStart",y.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",y.CONFORMANCE_VIOLATION="conformanceViolation",y.REPRESENTATION_SWITCH="representationSwitch",y.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",y.CONTENT_STEERING_REQUEST_COMPLETED="contentSteeringRequestCompleted",y}return function j(P,_,D){return _&&R(P.prototype,_),D&&R(P,D),Object.defineProperty(P,"prototype",{writable:!1}),P}(D)}(r("./src/core/events/EventsBase.js").default));O.default=x},"./src/streaming/MediaPlayerFactory.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/MediaPlayer.js");var j,R=function S(){var c,f="application/dash+xml";function g(k,N,B){if(!k||!/^VIDEO$/i.test(k.nodeName))return null;if(k._dashjs_player)return k._dashjs_player;var x,P=k.id||k.name||"video element";if(!(N=N||[].slice.call(k.querySelectorAll("source")).filter(function(_){return _.type==f})[0])&&k.src)(N=document.createElement("source")).src=k.src;else if(!N&&!k.src)return null;return B=B||{},(x=Object(e.default)(B).create()).initialize(k,N.src,k.autoplay),c||(c=x.getDebug().getLogger()),c.debug("Converted "+P+" to dash.js player and added content: "+N.src),k._dashjs_player=x,x}function T(k){return/^VIDEO$/i.test(k.nodeName)?k:T(k.parentNode)}return{create:g,createAll:function v(k,N){var B=[];k=k||"[data-dashjs-player]";for(var x=(N=N||document).querySelectorAll(k),P=0;P<x.length;P++){var _=g(x[P],null);B.push(_)}for(var D=N.querySelectorAll('source[type="'+f+'"]'),y=0;y<D.length;y++){var I=g(T(D[y]),null);B.push(I)}return B}}}();!("undefined"!=typeof window&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&"undefined"!=typeof window&&window&&window.addEventListener&&("complete"===window.document.readyState?window.dashjs?R.createAll():j=window.setInterval(function L(){window.dashjs&&(window.clearInterval(j),R.createAll())},500):window.addEventListener("load",function U(){window.removeEventListener("load",U),R.createAll()})),O.default=R},"./src/streaming/SourceBufferSink.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/Debug.js"),S=r("./src/streaming/vo/DashJSError.js"),R=r("./src/core/FactoryMaker.js"),j=r("./src/core/errors/Errors.js"),U=r("./src/core/Settings.js"),L=r("./src/streaming/constants/Constants.js"),b=r("./src/streaming/vo/metrics/HTTPRequest.js"),f=r("./src/core/events/Events.js");function T(N){var D,y,A,I,G,ee,B=this.context,x=Object(U.default)(B).getInstance(),P=N.textController,_=N.eventBus,de=[],ue=[],Te=!1,q=N.mediaSource,se=null;function ne(te){return new Promise(function(X){z(function(){I.changeType&&I.changeType(te),X()})})}function xe(te){return I=P.getTextSourceBuffer(te),Promise.resolve()}function ve(){if("function"==typeof I.addEventListener)try{I.addEventListener("updateend",Me,!1),I.addEventListener("error",ae,!1),I.addEventListener("abort",ae,!1)}catch(te){ee=setInterval(Me,50)}else ee=setInterval(Me,50)}function Ie(te){return new Promise(function(X){I&&x.get().streaming.buffer.useAppendWindow?z(function(){try{if(!I)return void X();var Z=q.duration,W=0;te&&!isNaN(te.start)&&!isNaN(te.duration)&&isFinite(te.duration)&&(Z=te.start+te.duration),te&&!isNaN(te.start)&&(W=te.start),(I.appendWindowEnd!==Z||I.appendWindowStart!==W)&&(I.appendWindowStart=0,I.appendWindowEnd=Z+.01,I.appendWindowStart=Math.max(W-.1,0),A.debug("Updated append window for ".concat(G.type,". Set start to ").concat(I.appendWindowStart," and end to ").concat(I.appendWindowEnd))),X()}catch(oe){A.warn("Failed to set append window"),X()}}):X()})}function Re(te){return new Promise(function(X){I?z(function(){try{I.timestampOffset!==te&&!isNaN(te)&&(I.timestampOffset=te,A.debug("Set MSE timestamp offset to ".concat(te))),X()}catch(Z){X()}}):X()})}function he(){if(!Te&&ue.length>0){Te=!0;var te=ue[0];ue.splice(0,1);var X=function(){Te=!1,ue.length>0&&he.call(this),te&&te.data&&te.data.segmentType&&te.data.segmentType!==b.HTTPRequest.INIT_SEGMENT_TYPE&&delete te.data.bytes,te.promise.resolve({chunk:te.data})};try{se=te.request,0===te.data.bytes.byteLength?X.call(this):(I.appendBuffer?I.appendBuffer(te.data.bytes):I.append(te.data.bytes,te.data),z(X.bind(this)))}catch(Z){A.fatal('SourceBuffer append failed "'+Z+'"'),ue.length>0?he():Te=!1,delete te.data.bytes,te.promise.reject({chunk:te.data,error:new S.default(Z.code,Z.message)})}}}function J(){de.length>0&&!I.updating&&(de.shift()(),J())}function Me(){I.updating||J()}function ae(te){!function re(te,X){_.trigger(te,X||{},{streamId:G.streamInfo.id,mediaType:y})}(f.default.SOURCE_BUFFER_ERROR,{error:te.target||{},lastRequestAppended:se})}function z(te){de.push(te),I.updating||J()}return D={getType:function Oe(){return y},getAllBufferRanges:function Be(){try{return I.buffered}catch(te){return A.error("getAllBufferRanges exception: "+te.message),null}},getBuffer:function ke(){return I},append:function qe(te){var X=this,Z=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise(function(W,oe){te?(ue.push({data:te,promise:{resolve:W,reject:oe},request:Z}),z(he.bind(X))):oe({chunk:te,error:new S.default(j.default.APPEND_ERROR_CODE,j.default.APPEND_ERROR_MESSAGE)})})},remove:function De(te){return new Promise(function(X,Z){var W=te.start,oe=te.end;W>=0&&oe>W?z(function(){try{I.remove(W,oe),z(function(){X({from:W,to:oe,unintended:!1}),te.resolve&&te.resolve()})}catch(be){Z({from:W,to:oe,unintended:!1,error:new S.default(j.default.REMOVE_ERROR_CODE,j.default.REMOVE_ERROR_MESSAGE)}),te.reject&&te.reject(be)}}):X()})},abort:function Y(){return new Promise(function(te){try{ue=[],"open"===q.readyState?z(function(){try{I&&I.abort(),te()}catch(X){te()}}):(I&&I.setTextTrack&&"ended"===q.readyState&&I.abort(),te())}catch(X){te()}})},reset:function Pe(){if(I){try{de=[],function Ee(){try{"function"==typeof I.removeEventListener&&(I.removeEventListener("updateend",Me,!1),I.removeEventListener("error",ae,!1),I.removeEventListener("abort",ae,!1)),clearInterval(ee)}catch(te){A.error(te)}}(),Te=!1,ue=[],(!I.getClassName||"TextSourceBuffer"!==I.getClassName())&&(A.debug("Removing sourcebuffer from media source"),q.removeSourceBuffer(I))}catch(te){}I=null}se=null},updateTimestampOffset:Re,initializeForStreamSwitch:function ce(te,X,Z){y=(G=te).type;var W=G.codec;(function pe(te){I=te.getBuffer()})(Z),ve();var oe=[];return oe.push(function He(){return new Promise(function(te){z(function(){var X=I.appendWindowStart,Z=I.appendWindowEnd;I&&(I.abort(),I.appendWindowStart=X,I.appendWindowEnd=Z),te()})})}()),oe.push(Ie(G.streamInfo)),oe.push(ne(W)),X&&void 0!==X.MSETimeOffset&&oe.push(Re(X.MSETimeOffset)),Promise.all(oe)},initializeForFirstUse:function me(te,X,Z){y=(G=X).type;var W=G.codec;try{if(W.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))return xe(te);I=q.addSourceBuffer(W),ve();var oe=[];return oe.push(Ie(G.streamInfo)),Z&&void 0!==Z.MSETimeOffset&&oe.push(Re(Z.MSETimeOffset)),Promise.all(oe)}catch(be){return G.type==L.default.TEXT&&!G.isFragmented||-1!==W.indexOf('codecs="stpp')||-1!==W.indexOf('codecs="vtt')?xe(te):Promise.reject(be)}},updateAppendWindow:Ie,changeType:ne},function H(){A=Object(e.default)(B).getInstance().getLogger(D)}(),D}T.__dashjs_factory_name="SourceBufferSink";var k=R.default.getClassFactory(T);O.default=k},"./src/streaming/Stream.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/constants/Constants.js"),S=r("./src/dash/constants/DashConstants.js"),R=r("./src/streaming/StreamProcessor.js"),j=r("./src/streaming/controllers/FragmentController.js"),U=r("./src/streaming/thumbnail/ThumbnailController.js"),L=r("./src/core/EventBus.js"),b=r("./src/core/events/Events.js"),f=r("./src/core/Debug.js"),c=r("./src/core/errors/Errors.js"),g=r("./src/core/FactoryMaker.js"),v=r("./src/streaming/vo/DashJSError.js"),T=r("./src/streaming/utils/BoxParser.js"),k=r("./src/streaming/utils/URLUtils.js"),N=r("./src/streaming/controllers/BlacklistController.js"),B=[e.default.VIDEO,e.default.AUDIO,e.default.TEXT,e.default.MUXED,e.default.IMAGE];function x(P){P=P||{};var Ee,Ie,Re,Pe,ke,Be,qe,He,De,he,Y,J,Me,ae,re,z,te,X,_=this.context,D=Object(L.default)(_).getInstance(),y=Object(k.default)(_).getInstance(),A=P.manifestModel,I=P.mediaPlayerModel,G=P.dashMetrics,ee=P.manifestUpdater,de=P.adapter,ue=P.timelineConverter,Te=P.capabilities,q=P.errHandler,se=P.abrController,H=P.playbackController,ce=P.eventController,ne=P.mediaController,pe=P.protectionController,me=P.textController,xe=P.videoModel,ve=P.streamInfo,Oe=P.settings;function tt(Ct,Vt){return new Promise(function(Jt,bn){zt(),he=!0,yt();var Ln=xe.getElement();B.forEach(function(Pt){(Pt!==e.default.VIDEO||!Ln||Ln&&/^VIDEO$/i.test(Ln.nodeName))&&function Et(Ct,Vt){var Pt,Jt=de.getAllMediaInfoForType(ve,Ct),bn=[],Ln=null;if(Jt&&0!==Jt.length){Ct===e.default.VIDEO&&(qe=!0),Ct===e.default.AUDIO&&(He=!0);for(var yn=0,Nn=Jt.length;yn<Nn;yn++)Ln=Jt[yn],Ct===e.default.TEXT&&!!Ln.isEmbedded&&(me.addEmbeddedTrack(ve,Ln),bn.push(Ln)),Yt(Ln)&&ne.addTrack(Ln);if(bn.length>0&&(ne.setInitialMediaSettingsForType(Ct,ve),me.addMediaInfosToBuffer(ve,Ct,bn)),0!==(Jt=Jt.filter(function(dr){return!dr.isEmbedded})).length){if(Ct===e.default.IMAGE)return void(J=Object(U.default)(_).create({streamInfo:ve,adapter:de,baseURLController:P.baseURLController,timelineConverter:P.timelineConverter,debug:z,eventBus:D,events:b.default,dashConstants:S.default,dashMetrics:P.dashMetrics,segmentBaseController:P.segmentBaseController})).initialize();D.trigger(b.default.STREAM_INITIALIZING,{streamInfo:ve,mediaInfo:Ln}),ne.setInitialMediaSettingsForType(Ct,ve);var $n=function vt(Ct,Vt){var Jt=Ct&&Ct.length>0?Ct[0]:null,bn=Y.getModel(Jt?Jt.type:null),Ln=Jt?Jt.type:null,Pt=Jt?Jt.mimeType:null,yn=Jt?Jt.isFragmented:null,Nn=Object(R.default)(_).create({streamInfo:ve,type:Ln,mimeType:Pt,timelineConverter:ue,adapter:de,manifestModel:A,mediaPlayerModel:I,fragmentModel:bn,dashMetrics:P.dashMetrics,baseURLController:P.baseURLController,segmentBaseController:P.segmentBaseController,abrController:se,playbackController:H,mediaController:ne,textController:me,errHandler:q,settings:Oe,boxParser:re,segmentBlacklistController:Me});Nn.initialize(Vt,qe,yn),Re.push(Nn);for(var $n=0;$n<Ct.length;$n++)Nn.addMediaInfo(Ct[$n]);return Ln===e.default.TEXT&&me.addMediaInfosToBuffer(ve,Ln,Ct,bn),Nn}(Jt,Vt);(Pt=ne.getCurrentTrackFor(Ct,ve.id))&&(se.updateTopQualityIndex(Pt),$n.selectMediaInfo(Ct===e.default.TEXT&&Pt.isEmbedded?Jt[0]:Pt))}}else Ie.info("No "+Ct+" data.")}(Pt,Ct)}),function At(Ct){return new Promise(function(Vt){var Jt={},bn=Re.map(function(Ln){return Ln.createBufferSinks(Ct)});Promise.all(bn).then(function(Ln){Ln.forEach(function(Pt){Pt&&(Jt[Pt.getType()]=Pt)}),Vt(Jt)}).catch(function(){Vt(Jt)})})}(Vt).then(function(Pt){if(he=!1,0===Re.length){var yn="No streams to play.";q.error(new v.default(c.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,yn,A.getValue())),Ie.fatal(yn)}else Gt();me.createTracks(ve),Jt(Pt)}).catch(function(Pt){bn(Pt)})})}function Yt(Ct){var Vt=Ct?Ct.type:null;return Vt===e.default.MUXED?(Ie.fatal("Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines"),q.error(new v.default(c.default.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,"Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",A.getValue())),!1):!(Vt!==e.default.TEXT&&Vt!==e.default.IMAGE&&Ct.contentProtection&&!Te.supportsEncryptedMedia()&&(q.error(new v.default(c.default.CAPABILITY_MEDIAKEYS_ERROR_CODE,c.default.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE)),1))}function Dt(Ct){for(var Vt=Re?Re.length:0,bn=0;bn<Vt;bn++){var Ln=Re[bn].getFragmentModel();Ln.abortRequests(),Ln.resetInitialSettings(),Re[bn].reset(false,Ct)}me&&me.deactivateStream(ve),Re=[],ke=!1,Be=!1,sn(!1),jn(!1),D.trigger(b.default.STREAM_DEACTIVATED,{streamInfo:ve})}function Xt(Ct){Dt(Ct),Pe=!1,qe=!1,He=!1,De={},he=!1,te=!1,X=[]}function jn(Ct){te=Ct}function Vn(){return ve?ve.start:NaN}function ot(){return ve?ve.id:null}function Qe(){return ve}function zt(){if(!xe||!se)throw new Error(e.default.MISSING_CONFIG_ERROR)}function pt(Ct){Ct.error&&(q.error(Ct.error),Ie.fatal(Ct.error.message))}function yt(){if(ce){var Ct=de.getEventsFor(ve);Ct&&Ct.length>0&&ce.addInlineEvents(Ct,ve.id)}}function Gt(){for(var Ct=Re.length,Jt=De.audio||De.video?new v.default(c.default.DATA_UPDATE_FAILED_ERROR_CODE,c.default.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,bn=0;bn<Ct;bn++)if(Re[bn].isUpdating()||he)return;if(pe){pe.clearMediaInfoArray();for(var Ln=0;Ln<Ct&&Re[Ln];Ln++){var Pt=Re[Ln].getType(),yn=Re[Ln].getMediaInfo();if(Pt===e.default.AUDIO||Pt===e.default.VIDEO||Pt===e.default.TEXT&&yn.isFragmented){var Nn=Re[Ln].getMediaInfo();Nn&&pe.initializeForMedia(Nn)}}pe.handleKeySystemFromManifest()}Jt?q.error(Jt):Pe||(Pe=!0,xe.waitForReadyState(e.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){D.trigger(b.default.STREAM_INITIALIZED,{streamInfo:ve})}))}function on(){var Ct=_r(),Vt=Ct.length;if(0!==Vt){for(var Jt=0;Jt<Vt;Jt++)if(!Ct[Jt].isBufferingCompleted()&&(Ct[Jt].getType()===e.default.AUDIO||Ct[Jt].getType()===e.default.VIDEO))return void Ie.debug("onBufferingCompleted - One streamProcessor has finished but",Ct[Jt].getType(),"one is not buffering completed");Ie.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),Be=!0,D.trigger(b.default.STREAM_BUFFERING_COMPLETED,{streamInfo:ve},{streamInfo:ve})}else Ie.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}function mn(Ct){De[Ct.mediaType]=Ct.error,Gt()}function Dn(Ct){ce&&ce.addInbandEvents(Ct.events,ve.id)}function Zn(Ct){return Ct&&Ct.type?Jn(Ct.type):null}function Jn(Ct){return Ct?_r().filter(function(Jt){return Jt.getType()===Ct})[0]:null}function _r(){for(var Vt,Jt,Ct=[],bn=0;bn<Re.length;bn++)((Vt=(Jt=Re[bn]).getType())===e.default.AUDIO||Vt===e.default.VIDEO||Vt===e.default.TEXT)&&Ct.push(Jt);return Ct}function It(Ct,Vt){var Jt=Qe(),bn=Vt.getStreamInfo();if(!bn||!Jt)return!0;var Ln=de.getAdaptationForType(bn.index,Ct,bn),Pt=de.getAdaptationForType(Jt.index,Ct,Jt);return Ln&&Pt?!(!kt(Pt)&&kt(Ln)):!Ln&&!Pt}function kt(Ct){return!!Ct&&!!(Ct.ContentProtection||Ct.Representation&&Ct.Representation.length>0&&Ct.Representation[0].ContentProtection)}function Rt(Ct,Vt){var Jt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!Ct||!Ct.hasOwnProperty("getStreamInfo"))return!1;var bn=Ct.getStreamInfo(),Ln=Jt?Jt.getStreamInfo():Qe();if(!bn||!Ln)return!1;var Pt=de.getAdaptationForType(bn.index,Vt,bn),yn=de.getAdaptationForType(Ln.index,Vt,Ln);if(!Pt||!yn)return!Pt&&!yn;var Nn=Pt&&yn&&Pt.mimeType===yn.mimeType,$n=yn.Representation_asArray.map(function(Sr){return Sr.codecs}),dr=Pt.Representation_asArray.map(function(Sr){return Sr.codecs}),pr=dr.some(function(Sr){return $n.indexOf(Sr)>-1}),Cr=dr.some(function(Sr){return $n.some(function(Yr){return Te.codecRootCompatibleWithCodec(Yr,Sr)})});return pr||Cr&&Nn}function sn(Ct){ae=Ct}function kn(){return ae}return Ee={initialize:function W(){(function oe(){D.on(b.default.BUFFERING_COMPLETED,on,Ee),D.on(b.default.DATA_UPDATE_COMPLETED,mn,Ee),D.on(b.default.INBAND_EVENTS,Dn,Ee)})(),function Fe(){pe&&(D.on(b.default.KEY_ERROR,pt,Ee),D.on(b.default.SERVER_CERTIFICATE_UPDATED,pt,Ee),D.on(b.default.LICENSE_REQUEST_COMPLETE,pt,Ee),D.on(b.default.KEY_SYSTEM_SELECTED,pt,Ee),D.on(b.default.KEY_SESSION_CREATED,pt,Ee),D.on(b.default.KEY_STATUSES_CHANGED,pt,Ee))}(),me.initializeForStream(ve),D.trigger(b.default.STREAM_UPDATED,{streamInfo:ve})},getStreamId:function at(){return ve?ve.id:null},activate:function et(Ct,Vt){return new Promise(function(Jt,bn){if(!ke)return kn()?(ke=!0,D.trigger(b.default.STREAM_ACTIVATED,{streamInfo:ve}),void Jt(Vt)):void function ut(Ct,Vt){return tt(Ct,Vt)}(Ct,Vt).then(function(Ln){ke=!0,D.trigger(b.default.STREAM_ACTIVATED,{streamInfo:ve}),Jt(Ln)}).catch(function(Ln){bn(Ln)});Jt(Vt)})},deactivate:Dt,getIsActive:function $t(){return ke},getDuration:function Bn(){return ve?ve.duration:NaN},getStartTime:Vn,getId:ot,getStreamInfo:Qe,getHasAudioTrack:function mt(){return He},getHasVideoTrack:function Lt(){return qe},startPreloading:function Ot(Ct,Vt){return new Promise(function(Jt,bn){kn()?bn():(Ie.info("[startPreloading] Preloading next stream with id ".concat(ot())),sn(!0),tt(Ct,Vt).then(function(){for(var Ln=0;Ln<Re.length&&Re[Ln];Ln++)Re[Ln].setExplicitBufferingTime(Vn()),Re[Ln].getScheduleController().startScheduleTimer();Jt()}).catch(function(){sn(!1),bn()}))})},getThumbnailController:function nn(){return J},getBitrateListFor:function _t(Ct){if(zt(),Ct===e.default.IMAGE)return J?J.getBitrateList():[];var Vt=function Qt(Ct){for(var Vt=null,Jt=0;Jt<Re.length;Jt++)if((Vt=Re[Jt]).getType()===Ct)return Vt.getMediaInfo();return null}(Ct);return se.getBitrateList(Vt)},updateData:function ct(Ct){return new Promise(function(Vt){he=!0,ve=Ct,ce&&yt();for(var Jt=[],bn=0,Ln=Re.length;bn<Ln;bn++){var Pt=Re[bn],yn=Pt.getMediaInfo();Jt.push(Pt.updateStreamInfo(ve));var Nn=de.getAllMediaInfoForType(ve,Pt.getType());if(Nn){Pt.clearMediaInfoArray();for(var $n=0;$n<Nn.length;$n++){var dr=Nn[$n];Pt.addMediaInfo(Nn[$n]),de.areMediaInfosEqual(yn,dr)&&(se.updateTopQualityIndex(dr),Jt.push(Pt.selectMediaInfo(dr)))}}}Promise.all(Jt).then(function(){for(Jt=[];X.length>0;){var pr=X.pop(),Cr=pr.newMediaInfo,Sr=Zn(pr.oldMediaInfo);if(!Sr)return;Jt.push(Sr.prepareTrackSwitch()),Sr.selectMediaInfo(Cr)}return Promise.all(Jt)}).then(function(){he=!1,Gt(),D.trigger(b.default.STREAM_UPDATED,{streamInfo:ve}),Vt()})})},reset:function ln(Ct){Y&&(Y.reset(),Y=null),se&&ve&&se.clearDataForStream(ve.id),Me&&(Me.reset(),Me=null),Xt(Ct),ve=null,function be(){D.off(b.default.DATA_UPDATE_COMPLETED,mn,Ee),D.off(b.default.BUFFERING_COMPLETED,on,Ee),D.off(b.default.INBAND_EVENTS,Dn,Ee)}(),function We(){pe&&(D.off(b.default.KEY_ERROR,pt,Ee),D.off(b.default.SERVER_CERTIFICATE_UPDATED,pt,Ee),D.off(b.default.LICENSE_REQUEST_COMPLETE,pt,Ee),D.off(b.default.KEY_SYSTEM_SELECTED,pt,Ee),D.off(b.default.KEY_SESSION_CREATED,pt,Ee),D.off(b.default.KEY_STATUSES_CHANGED,pt,Ee))}()},getProcessors:_r,setMediaSource:function Kt(Ct){for(var Vt=0;Vt<Re.length;)Yt(Re[Vt].getMediaInfo())?(Re[Vt].setMediaSource(Ct),Vt++):(Re[Vt].reset(),Re.splice(Vt,1));if(0===Re.length){var Jt="No streams to play.";q.error(new v.default(c.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,Jt+"nostreams",A.getValue())),Ie.fatal(Jt)}},isMediaCodecCompatible:function qt(Ct){var Vt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Rt(Ct,e.default.VIDEO,Vt)&&Rt(Ct,e.default.AUDIO,Vt)},isProtectionCompatible:function fn(Ct){return!Ct||It(e.default.VIDEO,Ct)&&It(e.default.AUDIO,Ct)},getPreloaded:kn,getIsEndedEventSignaled:function Rn(){return te},setIsEndedEventSignaled:jn,getAdapter:function xt(){return de},getHasFinishedBuffering:function wn(){return Be},setPreloaded:sn,startScheduleControllers:function Pr(){for(var Ct=Re.length,Vt=0;Vt<Ct&&Re[Vt];Vt++)Re[Vt].getScheduleController().startScheduleTimer()},prepareTrackChange:function rt(Ct){if(ke&&ve){Be=!1;var Vt=Ct.newMediaInfo,Jt=A.getValue();de.setCurrentMediaInfo(ve.id,Vt.type,Vt);var bn=Zn(Vt);if(bn){var Ln=H.getTime();Ie.info("Stream -  Process track changed at current time "+Ln),Jt.refreshManifestOnSwitchTrack?(X.push(Ct),ee.getIsUpdating()||(Ie.debug("Stream -  Refreshing manifest for switch track"),ee.refreshManifest())):bn.selectMediaInfo(Vt).then(function(){(Vt.type===e.default.VIDEO||Vt.type===e.default.AUDIO)&&se.updateTopQualityIndex(Vt),bn.prepareTrackSwitch()})}}},prepareQualityChange:function Xe(Ct){var Vt=Jn(Ct.mediaType);Vt&&Vt.prepareQualityChange(Ct)}},function Z(){try{z=Object(f.default)(_).getInstance(),Ie=z.getLogger(Ee),Xt(),re=Object(T.default)(_).getInstance(),Me=Object(N.default)(_).create({updateEventName:b.default.SEGMENT_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:b.default.SEGMENT_LOCATION_BLACKLIST_ADD}),Y=Object(j.default)(_).create({streamInfo:ve,mediaPlayerModel:I,dashMetrics:G,errHandler:q,settings:Oe,boxParser:re,dashConstants:S.default,urlUtils:y})}catch(Ct){throw Ct}}(),Ee}x.__dashjs_factory_name="Stream",O.default=g.default.getClassFactory(x)},"./src/streaming/StreamProcessor.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/constants/Constants.js"),S=r("./src/dash/constants/DashConstants.js"),R=r("./src/streaming/constants/MetricsConstants.js"),j=r("./src/streaming/models/FragmentModel.js"),U=r("./src/streaming/controllers/BufferController.js"),L=r("./src/streaming/text/NotFragmentedTextBufferController.js"),b=r("./src/streaming/controllers/ScheduleController.js"),f=r("./src/dash/controllers/RepresentationController.js"),c=r("./src/core/FactoryMaker.js"),g=r("./src/streaming/utils/SupervisorTools.js"),v=r("./src/core/EventBus.js"),T=r("./src/core/events/Events.js"),k=r("./src/dash/DashHandler.js"),N=r("./src/core/errors/Errors.js"),B=r("./src/streaming/vo/DashJSError.js"),x=r("./src/core/Debug.js"),P=r("./src/streaming/utils/RequestModifier.js"),_=r("./src/streaming/utils/URLUtils.js"),D=r("./src/streaming/utils/BoxParser.js"),y=r("./src/streaming/vo/metrics/PlayList.js"),A=r("./src/dash/controllers/SegmentsController.js"),I=r("./src/streaming/vo/metrics/HTTPRequest.js");function G(ee){ee=ee||{};var qe,He,De,he,Y,J,Me,ae,re,z,te,X,Z,de=this.context,ue=Object(v.default)(de).getInstance(),Te=ee.streamInfo,q=ee.type,se=ee.errHandler,H=ee.mimeType,ce=ee.timelineConverter,ne=ee.adapter,pe=ee.manifestModel,me=ee.mediaPlayerModel,xe=ee.fragmentModel,ve=ee.abrController,Oe=ee.playbackController,Ee=ee.mediaController,Ie=ee.textController,Re=ee.dashMetrics,Pe=ee.settings,ke=ee.boxParser,Be=ee.segmentBlacklistController;function be(){return Te.id}function Fe(){return q}function We(){return ne.getIsTextTrack(ae.getData())}function at(){Y=[],he=null,Z=0,re=!1,z=!1}function Et(Pt){var yn=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(Pt.sender){if(Oe.getIsManifestUpdateInProgress())return void Kt();if((!We()||Ie.isTextEnabled())&&J&&Pt.representationId&&!J.appendInitSegmentFromCache(Pt.representationId)){var Nn=ae.getCurrentRepresentation();if(0===Nn.range)return void Yt();var $n=te?te.getInitRequest(he,Nn):null;$n?xe.executeRequest($n):yn&&(Me.setInitSegmentRequired(!0),Kt())}}}function Yt(Pt){var yn=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(Oe.getIsManifestUpdateInProgress()||J.getIsPruningInProgress())Kt();else{var Nn=$t();Nn?(re=!1,vt(Nn)):At(yn)}}function vt(Pt){isNaN(Pt.startTime+Pt.duration)||(Z=Pt.startTime+Pt.duration),Pt.delayLoadingTime=(new Date).getTime()+Me.getTimeToLoadDelay(),Me.setTimeToLoadDelay(0),function Dt(Pt){var yn=Pt.url;return Pt.range&&(yn=yn.concat("_",Pt.range)),Be.contains(yn)}(Pt)?(He.warn("Fragment request url ".concat(Pt.url," for stream id ").concat(Te.id," and media type ").concat(q," is on the ignore list and will be skipped")),Kt()):(He.debug("Next fragment request url for stream id ".concat(Te.id," and media type ").concat(q," is ").concat(Pt.url)),xe.executeRequest(Pt))}function At(Pt){var Nn,yn=ae.getCurrentRepresentation();if(!Pe.get().streaming.gaps.enableSeekFix||!re&&0!==Oe.getTime()||(De?De&&yn.segmentInfoType===S.default.SEGMENT_TIMELINE&&(Nn=te.getValidTimeAheadOfTargetTime(Z,he,yn,Pe.get().streaming.gaps.threshold)):Nn=te.getValidTimeAheadOfTargetTime(Z,he,yn,Pe.get().streaming.gaps.threshold),isNaN(Nn)||Nn===Z)){if(te.isLastSegmentRequested(yn,Z)){var dr=te.getCurrentIndex();return He.debug("Segment requesting for stream ".concat(Te.id," has finished")),ue.trigger(T.default.STREAM_REQUESTING_COMPLETED,{segmentIndex:dr},{streamId:Te.id,mediaType:q}),J.segmentRequestingCompleted(dr),void Me.clearScheduleTimer()}Pt&&Kt()}else Oe.isSeeking()||0===Oe.getTime()?(He.warn("Adjusting playback time ".concat(Nn," because of gap in the manifest. Seeking by ").concat(Nn-Z)),Oe.seek(Nn,!1,!1)):(He.warn("Adjusting buffering time ".concat(Nn," because of gap in the manifest. Adjusting time by ").concat(Nn-Z)),bn(Nn),Pt&&Kt())}function $t(){var yn,Pt=qt();if(isNaN(Z)||Fe()===e.default.TEXT&&!Ie.isTextEnabled())return null;var Nn=re;if(te){var $n=ae&&Pt?ae.getRepresentationForQuality(Pt.quality):null;yn=Nn?te.getSegmentRequestForTime(he,$n,Z):te.getNextSegmentRequest(he,$n)}return yn}function Kt(){Me.startScheduleTimer(Oe.getLowLatencyModeEnabled()?Pe.get().streaming.scheduling.lowLatencyTimeout:Pe.get().streaming.scheduling.defaultTimeout)}function Xt(Pt){Pt.error||(Me.setCurrentRepresentation(ne.convertRepresentationToRepresentationInfo(Pt.currentRepresentation)),J.getIsBufferingCompleted()||J.updateBufferTimestampOffset(Pt.currentRepresentation))}function ln(Pt){Re.addBufferState(q,Pt.state,Me.getBufferTarget()),Pt.state===R.default.BUFFER_EMPTY&&!Oe.isSeeking()&&(He.info("Buffer is empty! Stalling!"),Re.pushPlayListTraceMetrics(new Date,y.PlayListTrace.REBUFFERING_REASON))}function Bn(Pt){xe.syncExecutedRequestsWithBufferedRange(J.getBuffer().getAllBufferRanges(),Te.duration),Pt.quotaExceeded&&Pt.from>Oe.getTime()&&bn(Pt.from),Pt.hasEnoughSpaceToAppend&&Pt.quotaExceeded&&Me.startScheduleTimer()}function Rn(Pt){if(Pt&&Pt.lastRequestAppended&&Pt.lastRequestAppended.url){var yn=Pt.lastRequestAppended.url;Pt.lastRequestAppended.range&&(yn=yn.concat("_",Pt.lastRequestAppended.range)),He.warn("Blacklisting segment with url ".concat(yn)),Be.add(yn)}}function Qe(){Ct(),z=!1}function mt(Pt){He.info("onFragmentLoadingAbandoned request: "+Pt.request.url+" has been aborted"),!Oe.isSeeking()&&!Me.getSwitchStrack()&&!z&&(He.info("onFragmentLoadingAbandoned request: "+Pt.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),Pt.request&&Pt.request.isInitializationRequest()?Me.setInitSegmentRequired(!0):bn(Pt.request.startTime+Pt.request.duration/2),Me.startScheduleTimer(0))}function Lt(Pt){He.info("OnFragmentLoadingCompleted for stream id "+Te.id+" and media type "+q+" - Url:",Pt.request?Pt.request.url:"undefined",Pt.request.range?", Range:"+Pt.request.range:""),We()&&Me.startScheduleTimer(0),Pt.error&&Pt.request.serviceLocation&&function nn(Pt){He.info("Fragment loading completed with an error"),Pt&&Pt.request&&Pt.request.type&&(Pt.request.type===I.HTTPRequest.INIT_SEGMENT_TYPE?Et({representationId:Pt.request.representationId,sender:{}},!1):Pt.request.type===I.HTTPRequest.MEDIA_SEGMENT_TYPE&&(bn(Pt.request.startTime+Pt.request.duration/2),Yt({},!1)))}(Pt)}function zt(){bn(Oe.getTime()),ct().startScheduleTimer()}function _t(Pt){var yn=Pt.currentTrackInfo;if(yn){var Nn=Y.find(function($n){return $n.index===yn.index&&$n.lang===yn.lang});Nn&&mn(Nn).then(function(){J.setIsBufferingCompleted(!1),bn(Oe.getTime()),Me.setInitSegmentRequired(!0),Me.startScheduleTimer()})}}function pt(Pt){bn(Pt.quotaExceededTime),Me.clearScheduleTimer()}function Xe(){return J?J.getBuffer():null}function mn(Pt){Pt!==he&&(!Pt||!he||Pt.type===he.type)&&(he=Pt);var yn=ne.getRealAdaptation(Te,he),Nn=ne.getVoRepresentations(he);if(ae){var Cr,$n=ae.getData(),dr=ve.getMaxAllowedIndexFor(q,Te.id),pr=ve.getMinAllowedIndexFor(q,Te.id),Yr=null;return null!==$n&&$n.id===yn.id||q===e.default.TEXT?Cr=ve.getQualityFor(q,Te.id):(Yr=ve.getThroughputHistory().getAverageThroughput(q,De)||ve.getInitialBitrateFor(q,Te.id),Cr=ve.getQualityForBitrate(he,Yr,Te.id)),void 0!==pr&&Cr<pr&&(Cr=pr),Cr>dr&&(Cr=dr),ae.updateData(yn,Nn,q,he.isFragmented,Cr)}return Promise.resolve()}function ct(){return Me}function qt(Pt){var yn;return void 0!==Pt?(Object(g.checkInteger)(Pt),yn=ae?ae.getRepresentationForQuality(Pt):null):yn=ae?ae.getCurrentRepresentation():null,ne.convertRepresentationToRepresentationInfo(yn)}function fn(){return!!J&&J.getIsBufferingCompleted()}function Rt(Pt){var yn=Pt.chunk,Nn=yn.bytes,$n=yn.quality,dr=qt($n),pr=ae&&dr?ae.getRepresentationForQuality(dr.quality):null;if(dr&&pr){var Cr=ne.getEventsFor(dr.mediaInfo,null,Te),Sr=ne.getEventsFor(dr,pr,Te);if(Cr&&Cr.length>0||Sr&&Sr.length>0){var Tr=function sn(Pt,yn,Nn,$n){try{for(var dr={},pr=[],Cr=Nn.concat($n),Sr=0,Yr=Cr.length;Sr<Yr;Sr++)dr[Cr[Sr].schemeIdUri+"/"+Cr[Sr].value]=Cr[Sr];var Tr=Object(D.default)(de).getInstance().parse(Pt),Oi=Tr.getBoxes("emsg");if(!Oi||0===Oi.length)return pr;for(var Mi=Tr.getBox("sidx"),oi=!Mi||isNaN(Mi.earliest_presentation_time)||isNaN(Mi.timescale)?yn&&!isNaN(yn.mediaStartTime)?yn.mediaStartTime:0:Mi.earliest_presentation_time/Mi.timescale,si=Math.max(oi,0),Zi=ae.getCurrentRepresentation(),ci=0,Si=Oi.length;ci<Si;ci++){var Ar=ne.getEvent(Oi[ci],dr,si,Zi);Ar&&pr.push(Ar)}return pr}catch(eo){return[]}}(Nn,xe.getRequests({state:j.default.FRAGMENT_MODEL_EXECUTED,quality:$n,index:yn.index})[0],Cr,Sr);ue.trigger(T.default.INBAND_EVENTS,{events:Tr},{streamId:Te.id})}}}function xt(){var Pt=Oe.getTime();Pe.get().streaming.buffer.flushBufferAtTrackSwitch&&Oe.seek(Pt+.001,!1,!0),bn(Pt),J.setSeekTarget(Pt),Me.startScheduleTimer()}function Ct(){var Pt=Oe.getTime(),yn=J.getContinuousBufferTimeForTargetTime(Pt);bn(isNaN(yn)?Pt:yn),Me.startScheduleTimer()}function Jt(Pt){Pt&&!isNaN(Pt.time)&&(bn(Pt.time),J.setSeekTarget(Pt.time))}function bn(Pt){Z=Pt,re=!0}return qe={initialize:function oe(Pt,yn,Nn){X=Object(A.default)(de).create({events:T.default,eventBus:ue,streamInfo:Te,timelineConverter:ce,dashConstants:S.default,segmentBaseController:ee.segmentBaseController,type:q}),(te=Object(k.default)(de).create({streamInfo:Te,type:q,timelineConverter:ce,dashMetrics:Re,mediaPlayerModel:me,baseURLController:ee.baseURLController,errHandler:se,segmentsController:X,settings:Pe,boxParser:ke,events:T.default,eventBus:ue,errors:N.default,debug:Object(x.default)(de).getInstance(),requestModifier:Object(P.default)(de).getInstance(),dashConstants:S.default,constants:e.default,urlUtils:Object(_.default)(de).getInstance()})).initialize(De=Te.manifestInfo.isDynamic),ve.registerStreamType(q,qe),ae=Object(f.default)(de).create({streamInfo:Te,type:q,abrController:ve,dashMetrics:Re,playbackController:Oe,timelineConverter:ce,dashConstants:S.default,events:T.default,eventBus:ue,errors:N.default,isDynamic:De,segmentsController:X}),(J=function Vt(Pt,yn){return Pt?Pt!==e.default.TEXT||yn?Object(U.default)(de).create({streamInfo:Te,type:Pt,mediaPlayerModel:me,manifestModel:pe,fragmentModel:xe,errHandler:se,mediaController:Ee,representationController:ae,adapter:ne,textController:Ie,abrController:ve,playbackController:Oe,settings:Pe}):Object(L.default)(de).create({streamInfo:Te,type:Pt,mimeType:H,fragmentModel:xe,textController:Ie,errHandler:se,settings:Pe}):(se.error(new B.default(N.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,N.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null)}(q,Nn))&&J.initialize(Pt),(Me=Object(b.default)(de).create({streamInfo:Te,type:q,mimeType:H,adapter:ne,dashMetrics:Re,mediaPlayerModel:me,fragmentModel:xe,abrController:ve,playbackController:Oe,textController:Ie,mediaController:Ee,bufferController:J,settings:Pe})).initialize(yn),Z=0,re=!1},getStreamId:be,getType:Fe,isUpdating:function ut(){return!!ae&&ae.isUpdating()},getBufferController:function yt(){return J},getFragmentModel:function Gt(){return xe},getScheduleController:ct,getRepresentationController:function rt(){return ae},getRepresentationInfo:qt,getBufferLevel:function It(){return J?J.getBufferLevel():0},isBufferingCompleted:fn,createBufferSinks:function kn(Pt){var yn=Xe();return yn?Promise.resolve(yn):J?J.createBufferSink(he,Pt):Promise.resolve(null)},updateStreamInfo:function Qt(Pt){return Te=Pt,fn()?Promise.resolve():J.updateAppendWindow()},getStreamInfo:function on(){return Te},selectMediaInfo:mn,clearMediaInfoArray:function Zn(){Y=[]},addMediaInfo:function Dn(Pt){-1===Y.indexOf(Pt)&&Y.push(Pt)},prepareTrackSwitch:function wn(){return new Promise(function(Pt){He.debug("Preparing track switch for type ".concat(q));var yn=q===e.default.TEXT||Pe.get().streaming.trackSwitchMode[q]===e.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&Oe.getTimeToStreamEnd(Te)>Pe.get().streaming.buffer.stallThreshold;if(J.getIsBufferingCompleted()&&!yn)return J.prepareForNonReplacementTrackSwitch(he.codec).then(function(){ue.trigger(T.default.BUFFERING_COMPLETED,{},{streamId:Te.id,mediaType:q})}).catch(function(){ue.trigger(T.default.BUFFERING_COMPLETED,{},{streamId:Te.id,mediaType:q})}),void Pt();Me.clearScheduleTimer(),Me.setSwitchTrack(!0),yn?(ue.trigger(T.default.BUFFER_REPLACEMENT_STARTED,{mediaType:q,streamId:Te.id},{mediaType:q,streamId:Te.id}),xe.abortRequests(),J.prepareForReplacementTrackSwitch(he.codec).then(function(){var Nn=qt();return J.updateBufferTimestampOffset(Nn)}).then(function(){xt(),Pt()}).catch(function(){xt(),Pt()})):J.prepareForNonReplacementTrackSwitch(he.codec).then(function(){Ct(),Pt()}).catch(function(){Ct(),Pt()})})},prepareQualityChange:function jn(Pt){He.debug("Preparing quality switch for type ".concat(q));var yn=Pt.newQuality;z=!0,Me.clearScheduleTimer();var Nn=qt(yn);Me.setCurrentRepresentation(Nn),ae.prepareQualityChange(yn),xe.abortRequests(),J.updateBufferTimestampOffset(Nn).then(function(){Pt.reason&&Pt.reason.forceReplace?function Vn(){ue.trigger(T.default.BUFFER_REPLACEMENT_STARTED,{mediaType:q,streamId:Te.id},{mediaType:q,streamId:Te.id}),J.prepareForReplacementQualitySwitch().then(function(){xt(),z=!1}).catch(function(){xt(),z=!1})}():Pe.get().streaming.buffer.fastSwitchEnabled?function ot(Pt){var yn=Oe.getTime(),Nn=1.5*(isNaN(Pt.fragmentDuration)?1:Pt.fragmentDuration),$n=xe.getRequests({state:j.default.FRAGMENT_MODEL_EXECUTED,time:yn+Nn,threshold:0})[0];if($n&&!We()){var dr=J.getBufferLevel(),pr=ve.getAbandonmentStateFor(Te.id,q);$n.quality<Pt.quality&&dr>=Nn&&pr!==R.default.ABANDON_LOAD?(bn(yn+Nn),Me.setCheckPlaybackQuality(!1),Me.startScheduleTimer()):Qe()}else Me.startScheduleTimer();z=!1}(Nn):Qe(),Re.pushPlayListTraceMetrics(new Date,y.PlayListTrace.REPRESENTATION_SWITCH_STOP_REASON),Re.createPlaylistTraceMetrics(Nn.id,1e3*Oe.getTime(),Oe.getPlaybackRate())})},getMediaInfo:function Jn(){return he},getMediaSource:function _r(){return J.getMediaSource()},setMediaSource:function Pr(Pt){J.setMediaSource(Pt)},getBuffer:Xe,setExplicitBufferingTime:bn,finalisePlayList:function Ln(Pt,yn){Re.pushPlayListTraceMetrics(Pt,yn)},probeNextRequest:function kt(){var Pt=qt(),yn=ae&&Pt?ae.getRepresentationForQuality(Pt.quality):null;return te.getNextSegmentRequestIdempotent(he,yn)},prepareInnerPeriodPlaybackSeeking:function Ot(Pt){return new Promise(function(yn){if(J.hasBufferAtTime(Pt.seekTime))return J.pruneBuffer(),void yn();Me.clearScheduleTimer(),xe.abortRequests(),J.prepareForPlaybackSeek().then(function(){var $n=J.getAllRangesWithSafetyFactor(Pt.seekTime);return J.clearBuffers($n)}).then(function(){var $n=J.getContinuousBufferTimeForTargetTime(Pt.seekTime);if(!isNaN($n)&&!isNaN(Te.duration)&&isFinite(Te.duration)&&$n>=Te.start+Te.duration)J.setIsBufferingCompleted(!0),yn();else{var dr=isNaN($n)?Pt.seekTime:$n;bn(dr),J.setSeekTarget(dr);var pr=[];pr.push(J.updateAppendWindow());var Cr=qt();pr.push(J.updateBufferTimestampOffset(Cr)),Promise.all(pr).then(function(){Me.setInitSegmentRequired(!0),Me.setCheckPlaybackQuality(!1),Me.startScheduleTimer(),yn()})}}).catch(function($n){He.error($n)})})},prepareOuterPeriodPlaybackSeeking:function tt(){return new Promise(function(Pt,yn){try{Me.clearScheduleTimer(),xe.abortRequests(),J.prepareForPlaybackSeek().then(function(){return J.pruneAllSafely()}).then(function(){Pt()})}catch(Nn){yn(Nn)}})},reset:function et(Pt,yn){te&&te.reset(),J&&(J.reset(Pt,yn),J=null),Me&&(Me.reset(),Me=null),ae&&(ae.reset(),ae=null),X&&(X=null),ve&&ve.unRegisterStreamType(be(),q),ue.off(T.default.DATA_UPDATE_COMPLETED,Xt,qe),ue.off(T.default.INIT_FRAGMENT_NEEDED,Et,qe),ue.off(T.default.MEDIA_FRAGMENT_NEEDED,Yt,qe),ue.off(T.default.MEDIA_FRAGMENT_LOADED,Rt,qe),ue.off(T.default.BUFFER_LEVEL_STATE_CHANGED,ln,qe),ue.off(T.default.BUFFER_CLEARED,Bn,qe),ue.off(T.default.SEEK_TARGET,Jt,qe),ue.off(T.default.FRAGMENT_LOADING_ABANDONED,mt,qe),ue.off(T.default.FRAGMENT_LOADING_COMPLETED,Lt,qe),ue.off(T.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,zt,qe),ue.off(T.default.SET_NON_FRAGMENTED_TEXT,_t,qe),ue.off(T.default.QUOTA_EXCEEDED,pt,qe),ue.off(T.default.SOURCE_BUFFER_ERROR,Rn,qe),at(),q=null,Te=null}},function W(){He=Object(x.default)(de).getInstance().getLogger(qe),at(),ue.on(T.default.DATA_UPDATE_COMPLETED,Xt,qe,{priority:v.default.EVENT_PRIORITY_HIGH}),ue.on(T.default.INIT_FRAGMENT_NEEDED,Et,qe),ue.on(T.default.MEDIA_FRAGMENT_NEEDED,Yt,qe),ue.on(T.default.MEDIA_FRAGMENT_LOADED,Rt,qe),ue.on(T.default.BUFFER_LEVEL_STATE_CHANGED,ln,qe),ue.on(T.default.BUFFER_CLEARED,Bn,qe),ue.on(T.default.SEEK_TARGET,Jt,qe),ue.on(T.default.FRAGMENT_LOADING_ABANDONED,mt,qe),ue.on(T.default.FRAGMENT_LOADING_COMPLETED,Lt,qe),ue.on(T.default.QUOTA_EXCEEDED,pt,qe),ue.on(T.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,zt,qe),ue.on(T.default.SET_NON_FRAGMENTED_TEXT,_t,qe),ue.on(T.default.SOURCE_BUFFER_ERROR,Rn,qe)}(),qe}G.__dashjs_factory_name="StreamProcessor",O.default=c.default.getClassFactory(G)},"./src/streaming/XlinkLoader.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/vo/DashJSError.js"),S=r("./src/streaming/net/URLLoader.js"),R=r("./src/streaming/vo/metrics/HTTPRequest.js"),j=r("./src/streaming/vo/TextRequest.js"),U=r("./src/core/EventBus.js"),L=r("./src/core/events/Events.js"),b=r("./src/core/FactoryMaker.js"),f=r("./src/core/errors/Errors.js");function c(g){g=g||{};var T=this.context,k=Object(U.default)(T).getInstance(),N=Object(S.default)(T).create({errHandler:g.errHandler,dashMetrics:g.dashMetrics,mediaPlayerModel:g.mediaPlayerModel,requestModifier:g.requestModifier,errors:f.default});return{load:function x(_,D,y){var A=function(ee,de){D.resolved=!0,D.resolvedContent=ee||null,k.trigger(L.default.XLINK_ELEMENT_LOADED,{element:D,resolveObject:y,error:ee||de?null:new e.default(f.default.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,f.default.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+_)})};if("urn:mpeg:dash:resolve-to-zero:2013"===_)A(null,!0);else{var I=new j.default(_,R.HTTPRequest.XLINK_EXPANSION_TYPE);N.load({request:I,success:function(ee){A(ee)},error:function(){A(null)}})}},reset:function P(){N&&(N.abort(),N=null)}}}c.__dashjs_factory_name="XlinkLoader",O.default=b.default.getClassFactory(c)},"./src/streaming/constants/ConformanceViolationConstants.js":function(Ve,O,r){"use strict";r.r(O),O.default={LEVELS:{SUGGESTION:"Suggestion",WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'},INVALID_DVR_WINDOW:{key:"INVALID_DVR_WINDOW",message:"No valid segment found when applying a specification compliant DVR window calculation. Using SegmentTimeline entries as a fallback."}}}},"./src/streaming/constants/Constants.js":function(Ve,O,r){"use strict";function e(c){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(c)}function R(c,g){for(var v=0;v<g.length;v++){var T=g[v];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(c,U(T.key),T)}}function U(c){var g=function L(c,g){if("object"!==e(c)||null===c)return c;var v=c[Symbol.toPrimitive];if(void 0!==v){var T=v.call(c,g||"default");if("object"!==e(T))return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===g?String:Number)(c)}(c,"string");return"symbol"===e(g)?g:String(g)}r.r(O);var f=new(function(){function c(){(function S(c,g){if(!(c instanceof g))throw new TypeError("Cannot call a class as a function")})(this,c),this.init()}return function j(c,g,v){return g&&R(c.prototype,g),v&&R(c,v),Object.defineProperty(c,"prototype",{writable:!1}),c}(c,[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.MUXED="muxed",this.IMAGE="image",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.CONTENT_STEERING="contentSteering",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_L2A="abrL2A",this.ABR_STRATEGY_LoLP="abrLoLP",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA="abrFetchThroughputCalculationDownloadedData",this.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING="abrFetchThroughputCalculationMoofParsing",this.ABR_FETCH_THROUGHPUT_CALCULATION_AAST="abrFetchThroughputCalculationAAST",this.LIVE_CATCHUP_MODE_DEFAULT="liveCatchupModeDefault",this.LIVE_CATCHUP_MODE_LOLP="liveCatchupModeLoLP",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)",this.TRACK_SWITCH_MODE_ALWAYS_REPLACE="alwaysReplace",this.TRACK_SWITCH_MODE_NEVER_REPLACE="neverReplace",this.TRACK_SELECTION_MODE_FIRST_TRACK="firstTrack",this.TRACK_SELECTION_MODE_HIGHEST_BITRATE="highestBitrate",this.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY="highestEfficiency",this.TRACK_SELECTION_MODE_WIDEST_RANGE="widestRange",this.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY="highestSelectionPriority",this.CMCD_MODE_QUERY="query",this.CMCD_MODE_HEADER="header",this.LOCATION="Location",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.CC1="CC1",this.CC3="CC3",this.UTF8="utf-8",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.SERVICE_DESCRIPTION_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:scope:2019",this.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:critical:2019",this.XML="XML",this.ARRAY_BUFFER="ArrayBuffer",this.DVB_REPORTING_URL="dvb:reportingUrl",this.DVB_PROBABILITY="dvb:probability",this.VIDEO_ELEMENT_READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},this.FILE_LOADER_TYPES={FETCH:"fetch_loader",XHR:"xhr_loader"}}}]),c}());O.default=f},"./src/streaming/constants/MetricsConstants.js":function(Ve,O,r){"use strict";function e(c){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(c)}function R(c,g){for(var v=0;v<g.length;v++){var T=g[v];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(c,U(T.key),T)}}function U(c){var g=function L(c,g){if("object"!==e(c)||null===c)return c;var v=c[Symbol.toPrimitive];if(void 0!==v){var T=v.call(c,g||"default");if("object"!==e(T))return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===g?String:Number)(c)}(c,"string");return"symbol"===e(g)?g:String(g)}r.r(O);var f=new(function(){function c(){(function S(c,g){if(!(c instanceof g))throw new TypeError("Cannot call a class as a function")})(this,c),this.init()}return function j(c,g,v){return g&&R(c.prototype,g),v&&R(c,v),Object.defineProperty(c,"prototype",{writable:!1}),c}(c,[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_LOADED="bufferLoaded",this.ABANDON_LOAD="abandonload",this.ALLOW_LOAD="allowload",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors",this.HTTP_REQUEST_DVB_REPORTING_TYPE="DVBReporting"}}]),c}());O.default=f},"./src/streaming/constants/ProtectionConstants.js":function(Ve,O,r){"use strict";function e(c){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(c)}function R(c,g){for(var v=0;v<g.length;v++){var T=g[v];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(c,U(T.key),T)}}function U(c){var g=function L(c,g){if("object"!==e(c)||null===c)return c;var v=c[Symbol.toPrimitive];if(void 0!==v){var T=v.call(c,g||"default");if("object"!==e(T))return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===g?String:Number)(c)}(c,"string");return"symbol"===e(g)?g:String(g)}r.r(O);var f=new(function(){function c(){(function S(c,g){if(!(c instanceof g))throw new TypeError("Cannot call a class as a function")})(this,c),this.init()}return function j(c,g,v){return g&&R(c.prototype,g),v&&R(c,v),Object.defineProperty(c,"prototype",{writable:!1}),c}(c,[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready",this.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING="com.microsoft.playready.recommendation",this.INITIALIZATION_DATA_TYPE_CENC="cenc",this.INITIALIZATION_DATA_TYPE_KEYIDS="keyids",this.INITIALIZATION_DATA_TYPE_WEBM="webm"}}]),c}());O.default=f},"./src/streaming/controllers/AbrController.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/rules/abr/ABRRulesCollection.js"),S=r("./src/streaming/constants/Constants.js"),R=r("./src/streaming/constants/MetricsConstants.js"),j=r("./src/streaming/vo/BitrateInfo.js"),U=r("./src/streaming/models/FragmentModel.js"),L=r("./src/core/EventBus.js"),b=r("./src/core/events/Events.js"),f=r("./src/core/FactoryMaker.js"),c=r("./src/streaming/rules/RulesContext.js"),g=r("./src/streaming/rules/SwitchRequest.js"),v=r("./src/streaming/rules/SwitchRequestHistory.js"),T=r("./src/streaming/rules/DroppedFramesHistory.js"),k=r("./src/streaming/rules/ThroughputHistory.js"),N=r("./src/core/Debug.js"),B=r("./src/streaming/vo/metrics/HTTPRequest.js"),x=r("./src/streaming/utils/SupervisorTools.js"),P=r("./src/streaming/MediaPlayerEvents.js");function A(){var ue,Te,q,se,H,ce,ne,pe,me,xe,ve,Oe,Ee,Ie,Re,Pe,ke,Be,qe,He,De,he,Y,J,Me,ae,G=this.context,ee=Object(N.default)(G).getInstance(),de=Object(L.default)(G).getInstance();function W(){H={},ce={},pe={},ne={},qe={},he={},Y={},J={},void 0===xe&&(xe=!1),He&&He.reset(),Be=void 0,He=void 0,De=void 0,clearTimeout(me),me=null}function We(Xe){var yt=Xe.request.mediaType,Gt=Xe.streamId;if(yt&&Gt&&ne[Gt]&&ae.get().streaming.abr.autoSwitchBitrate[yt]){var Qt=ne[Gt][yt];if(Qt){var on=Object(c.default)(G).create({abrController:ue,streamProcessor:Qt,currentRequest:Xe.request,useBufferOccupancyABR:he[yt],useL2AABR:Y[yt],useLoLPABR:J[yt],videoModel:Ie}),mn=q.shouldAbandonFragment(on,Gt);mn.quality>g.default.NO_CHANGE&&Qt.getFragmentModel().getRequests({state:U.default.FRAGMENT_MODEL_LOADING,index:Xe.request.index})[0]&&(pe[Gt][yt].state=R.default.ABANDON_LOAD,qe[Gt][yt].reset(),qe[Gt][yt].push({oldValue:Xt(yt,Gt),newValue:mn.quality,confidence:1,reason:mn.reason}),ln(yt,se.getActiveStreamInfo(),mn.quality,mn.reason),clearTimeout(me),me=setTimeout(function(){pe[Gt][yt].state=R.default.ALLOW_LOAD,me=null},ae.get().streaming.abandonLoadTimeout))}}}function at(Xe){Xe.mediaType===S.default.VIDEO&&(void 0!==Be&&He.push(Xe.streamId,Be,Ie.getPlaybackQuality()),Be=Xe.newQuality)}function et(Xe){Xe.metric===R.default.HTTP_REQUEST&&Xe.value&&Xe.value.type===B.HTTPRequest.MEDIA_SEGMENT_TYPE&&(Xe.mediaType===S.default.AUDIO||Xe.mediaType===S.default.VIDEO)&&De.push(Xe.mediaType,Xe.value,ae.get().streaming.abr.useDeadTimeLatency),Xe.metric===R.default.BUFFER_LEVEL&&(Xe.mediaType===S.default.AUDIO||Xe.mediaType===S.default.VIDEO)&&function Qe(Xe,yt){ae.get().streaming.abr.ABRStrategy===S.default.ABR_STRATEGY_DYNAMIC&&function mt(Xe,yt){try{var Gt=Re.getStableBufferTime(),mn=he[Xe],Dn=yt>(mn?.5*Gt:Gt);he[Xe]=Dn,Dn!==mn&&Te.info(Dn?"["+Xe+"] switching from throughput to buffer occupancy ABR rule (buffer: "+yt.toFixed(3)+").":"["+Xe+"] switching from buffer occupancy to throughput ABR rule (buffer: "+yt.toFixed(3)+").")}catch(Zn){Te.error(Zn)}}(Xe,yt)}(Xe.mediaType,.001*Xe.value.level)}function ut(Xe,yt){try{return H[yt]=H[yt]||{},H[yt].hasOwnProperty(Xe)||(H[yt][Xe]=0),function At(Xe,yt,Gt){if(yt!==S.default.VIDEO||!ae.get().streaming.abr.limitBitrateByPortal||!ne[Gt]||!ne[Gt][yt])return Xe;xe||pt();var Qt=ne[Gt][yt].getStreamInfo(),on=Ee.getAdaptationForType(Qt.index,yt,Qt).Representation_asArray,mn=Xe;if(ve>0&&Oe>0){for(;mn>0&&on[mn]&&ve<on[mn].width&&ve-on[mn-1].width<on[mn].width-ve;)mn-=1;for(;mn<on.length-1&&on[mn].width===on[mn+1].width;)mn+=1}return mn}(function vt(Xe,yt,Gt){var Qt=H[Gt][yt],on=ae.get().streaming.abr.maxRepresentationRatio[yt];return isNaN(on)||on>=1||on<0?Xe:Math.min(Xe,Math.round(Qt*on))}(function Yt(Xe,yt){var Gt=H[yt][Xe],Qt=Gt;if(!ne[yt]||!ne[yt][Xe])return Qt;var on=Ot(Xe,yt);void 0!==on&&(Qt=Math.max(Gt,on));var mn=function tt(Xe,yt){try{var Gt=Re.getAbrBitrateParameter("maxBitrate",Xe);return Gt>-1?Vn(ne[yt][Xe].getMediaInfo(),Gt,yt):void 0}catch(Qt){return}}(Xe,yt);return void 0!==mn&&(Qt=Math.min(Qt,mn)),Qt}(Xe,yt),Xe,yt),Xe,yt)}catch(Qt){return}}function Ot(Xe,yt){try{return function Et(Xe,yt){try{var Gt=Re.getAbrBitrateParameter("minBitrate",Xe);if(Gt>-1){var Qt=ne[yt][Xe].getMediaInfo(),on=ot(Qt),mn=Vn(Qt,Gt,yt);return on[mn]&&mn<on.length-1&&on[mn].bitrate<1e3*Gt&&mn++,mn}return}catch(Dn){return}}(Xe,yt)}catch(Gt){return}}function Xt(Xe){var yt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{return yt||(yt=se.getActiveStreamInfo().id),Xe&&ne[yt]&&ne[yt][Xe]&&yt?(ce[yt]=ce[yt]||{},ce[yt].hasOwnProperty(Xe)||(ce[yt][Xe]=0),ce[yt][Xe]):0}catch(Qt){return 0}}function ln(Xe,yt,Gt){var Qt=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(yt&&yt.id&&Xe){var on=yt.id,mn=Xt(Xe,on);Object(x.checkInteger)(Gt);var Dn=ut(Xe,on);Gt!==mn&&Gt>=0&&Gt<=Dn&&Rn(Xe,mn,Gt,Dn,Qt,on)}}function Rn(Xe,yt,Gt,Qt,on,mn){if(Xe&&ne[mn]&&ne[mn][Xe]){var Dn=ne[mn][Xe].getStreamInfo(),Zn=Dn&&Dn.manifestInfo&&Dn.manifestInfo.isDynamic,Jn=Me.getCurrentBufferLevel(Xe);Te.info("Stream ID: "+mn+" ["+Xe+"] switch from "+yt+" to "+Gt+"/"+Qt+" (buffer: "+Jn+") "+(on?JSON.stringify(on):".")),ce[mn]=ce[mn]||{},ce[mn][Xe]=Gt;var _r=function jn(Xe,yt,Gt){if(yt&&ne&&ne[Xe]&&ne[Xe][yt]){var Qt=ot(ne[Xe][yt].getMediaInfo());return Qt[Gt]?Qt[Gt]:null}return null}(mn,Xe,Gt);de.trigger(b.default.QUALITY_CHANGE_REQUESTED,{oldQuality:yt,newQuality:Gt,reason:on,streamInfo:Dn,bitrateInfo:_r,maxIdx:Qt,mediaType:Xe},{streamId:Dn.id,mediaType:Xe});var Pr=De.getAverageThroughput(Xe,Zn);isNaN(Pr)||ke.setSavedBitrateSettings(Xe,Pr)}}function Vn(Xe,yt,Gt){var Qt=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,on=Xe&&Xe.type?ne[Gt][Xe.type].getRepresentationInfo():null;if(ae.get().streaming.abr.useDeadTimeLatency&&Qt&&on&&on.fragmentDuration){var mn=on.fragmentDuration;if((Qt/=1e3)>mn)return 0;yt*=1-Qt/mn}for(var Zn=ot(Xe),Jn=Zn.length-1;Jn>=0;Jn--)if(1e3*yt>=Zn[Jn].bitrate)return Jn;return 0}function ot(Xe){var yt=[];if(!Xe||!Xe.bitrateList)return yt;for(var on,Gt=Xe.bitrateList,Qt=Xe.type,mn=0,Dn=Gt.length;mn<Dn;mn++)(on=new j.default).mediaType=Qt,on.qualityIndex=mn,on.bitrate=Gt[mn].bandwidth,on.width=Gt[mn].width,on.height=Gt[mn].height,on.scanType=Gt[mn].scanType,yt.push(on);return yt}function pt(){if(Ie){var yt=ae.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;ve=Ie.getClientWidth()*yt,Oe=Ie.getClientHeight()*yt}}return ue={initialize:function z(){He=Object(T.default)(G).create(),De=Object(k.default)(G).create({settings:ae}),(q=Object(e.default)(G).create({dashMetrics:Me,customParametersModel:Pe,mediaPlayerModel:Re,settings:ae})).initialize(),de.on(P.default.QUALITY_CHANGE_RENDERED,at,ue),de.on(P.default.METRIC_ADDED,et,ue),de.on(b.default.LOADING_PROGRESS,We,ue)},isPlayingAtTopQuality:function zt(Xe){var yt=Xe?Xe.id:null,Gt=Xt(S.default.AUDIO,yt),Qt=Xt(S.default.VIDEO,yt);return Gt===ut(S.default.AUDIO,yt)&&Qt===ut(S.default.VIDEO,yt)},updateTopQualityIndex:function nn(Xe){var yt=Xe.type,Gt=Xe.streamInfo.id,Qt=Xe.representationCount-1;return H[Gt]=H[Gt]||{},H[Gt][yt]=Qt,Qt},clearDataForStream:function rt(Xe){He&&He.clearForStream(Xe),ne[Xe]&&delete ne[Xe],qe[Xe]&&delete qe[Xe],pe[Xe]&&delete pe[Xe]},getThroughputHistory:function Lt(){return De},getBitrateList:ot,getQualityForBitrate:Vn,getTopBitrateInfoFor:function Dt(Xe){var yt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(yt||(yt=se.getActiveStreamInfo().id),Xe&&ne&&ne[yt]&&ne[yt][Xe]){var Gt=ut(Xe,yt),Qt=ot(ne[yt][Xe].getMediaInfo());return Qt[Gt]?Qt[Gt]:null}return null},getMinAllowedIndexFor:Ot,getMaxAllowedIndexFor:ut,getInitialBitrateFor:function $t(Xe,yt){if(function Fe(){if(!ke||!ke.hasOwnProperty("getSavedBitrateSettings"))throw new Error(S.default.MISSING_CONFIG_ERROR)}(),Xe===S.default.TEXT)return NaN;var Gt=ke.getSavedBitrateSettings(Xe),Qt=Re.getAbrBitrateParameter("initialBitrate",Xe),on=ae.get().streaming.abr.initialRepresentationRatio[Xe];if(-1===Qt)if(on>-1){var mn=ne[yt][Xe].getStreamInfo(),Dn=Ee.getAdaptationForType(mn.index,Xe,mn).Representation_asArray;Qt=Array.isArray(Dn)?Dn[Math.max(Math.round(Dn.length*on)-1,0)].bandwidth/1e3:0}else Qt=isNaN(Gt)?Xe===S.default.VIDEO?1e3:100:Gt;return Qt},getQualityFor:Xt,getAbandonmentStateFor:function Bn(Xe,yt){return pe[Xe]&&pe[Xe][yt]?pe[Xe][yt].state:null},setPlaybackQuality:ln,checkPlaybackQuality:function Kt(Xe,yt){try{if(!(Xe&&ne&&ne[yt]&&ne[yt][Xe]))return!1;if(He){var Gt=Ie.getPlaybackQuality();Gt&&He.push(yt,Be,Gt)}if(!ae.get().streaming.abr.autoSwitchBitrate[Xe])return!1;var Qt=Xt(Xe,yt),on=Object(c.default)(G).create({abrController:ue,switchHistory:qe[yt][Xe],droppedFramesHistory:He,streamProcessor:ne[yt][Xe],currentValue:Qt,useBufferOccupancyABR:he[Xe],useL2AABR:Y[Xe],useLoLPABR:J[Xe],videoModel:Ie}),mn=Ot(Xe,yt),Dn=ut(Xe,yt),Zn=q.getMaxQuality(on),Jn=Zn.quality;return void 0!==mn&&(Jn>g.default.NO_CHANGE?Jn:Qt)<mn&&(Jn=mn),Jn>Dn&&(Jn=Dn),qe[yt][Xe].push({oldValue:Qt,newValue:Jn}),Jn>g.default.NO_CHANGE&&Jn!==Qt&&(pe[yt][Xe].state===R.default.ALLOW_LOAD||Jn<Qt)&&(Rn(Xe,Qt,Jn,Dn,Zn.reason,yt),!0)}catch(_r){return!1}},setElementSize:pt,setWindowResizeEventCalled:function _t(Xe){xe=Xe},registerStreamType:function te(Xe,yt){var Gt=yt.getStreamInfo().id;ne[Gt]||(ne[Gt]={}),qe[Gt]||(qe[Gt]={}),pe[Gt]||(pe[Gt]={}),qe[Gt][Xe]=Object(v.default)(G).create(),ne[Gt][Xe]=yt,pe[Gt][Xe]={},pe[Gt][Xe].state=R.default.ALLOW_LOAD,function X(Xe){var yt=ae.get().streaming.abr.ABRStrategy;yt===S.default.ABR_STRATEGY_L2A?(he[Xe]=!1,J[Xe]=!1,Y[Xe]=!0):yt===S.default.ABR_STRATEGY_LoLP?(he[Xe]=!1,J[Xe]=!0,Y[Xe]=!1):yt===S.default.ABR_STRATEGY_BOLA?(he[Xe]=!0,J[Xe]=!1,Y[Xe]=!1):yt===S.default.ABR_STRATEGY_THROUGHPUT?(he[Xe]=!1,J[Xe]=!1,Y[Xe]=!1):yt===S.default.ABR_STRATEGY_DYNAMIC&&(he[Xe]=!(!he||!he[Xe])&&he[Xe],J[Xe]=!1,Y[Xe]=!1)}(Xe),Xe===S.default.VIDEO&&pt()},unRegisterStreamType:function Z(Xe,yt){try{ne[Xe]&&ne[Xe][yt]&&delete ne[Xe][yt],qe[Xe]&&qe[Xe][yt]&&delete qe[Xe][yt],pe[Xe]&&pe[Xe][yt]&&delete pe[Xe][yt]}catch(Gt){}},setConfig:function be(Xe){!Xe||(Xe.streamController&&(se=Xe.streamController),Xe.domStorage&&(ke=Xe.domStorage),Xe.mediaPlayerModel&&(Re=Xe.mediaPlayerModel),Xe.customParametersModel&&(Pe=Xe.customParametersModel),Xe.dashMetrics&&(Me=Xe.dashMetrics),Xe.adapter&&(Ee=Xe.adapter),Xe.videoModel&&(Ie=Xe.videoModel),Xe.settings&&(ae=Xe.settings))},reset:function oe(){W(),de.off(b.default.LOADING_PROGRESS,We,ue),de.off(P.default.QUALITY_CHANGE_RENDERED,at,ue),de.off(P.default.METRIC_ADDED,et,ue),q&&q.reset()}},function re(){Te=ee.getLogger(ue),W()}(),ue}A.__dashjs_factory_name="AbrController";var I=f.default.getSingletonFactory(A);I.QUALITY_DEFAULT=0,f.default.updateSingletonFactory(A.__dashjs_factory_name,I),O.default=I},"./src/streaming/controllers/BaseURLController.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/models/BaseURLTreeModel.js"),S=r("./src/streaming/utils/BaseURLSelector.js"),R=r("./src/streaming/utils/URLUtils.js"),j=r("./src/dash/vo/BaseURL.js"),U=r("./src/core/FactoryMaker.js"),L=r("./src/core/EventBus.js"),b=r("./src/core/events/Events.js");function f(){var c,g,N,B,v=this.context,T=Object(L.default)(v).getInstance(),k=Object(R.default)(v).getInstance();function x(G){N.invalidateSelectedIndexes(G.entry)}return c={reset:function A(){N.reset(),B.reset()},initialize:function I(G){N.setConfig({adapter:g}),function D(G){N.update(G),B.chooseSelector(g.getIsDVB(G))}(G)},resolve:function y(G){var de=N.getForPath(G).reduce(function(ue,Te){var q=B.select(Te);return q?(k.isRelative(q.url)?ue.url=k.resolve(q.url,ue.url):(ue.url=q.url,ue.serviceLocation=q.serviceLocation),ue.availabilityTimeOffset=q.availabilityTimeOffset,ue.availabilityTimeComplete=q.availabilityTimeComplete,ue):new j.default},new j.default);if(!k.isRelative(de.url))return de},setConfig:function _(G){G.baseURLTreeModel&&(N=G.baseURLTreeModel),G.baseURLSelector&&(B=G.baseURLSelector),G.adapter&&(g=G.adapter)}},function P(){N=Object(e.default)(v).create(),B=Object(S.default)(v).create(),T.on(b.default.SERVICE_LOCATION_BLACKLIST_CHANGED,x,c)}(),c}f.__dashjs_factory_name="BaseURLController",O.default=U.default.getClassFactory(f)},"./src/streaming/controllers/BlacklistController.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js"),S=r("./src/core/EventBus.js");function R(j){j=j||{};var U,L=[],b=Object(S.default)(this.context).getInstance(),f=j.updateEventName,c=j.addBlacklistEventName;function v(B){-1===L.indexOf(B)&&(L.push(B),b.trigger(f,{entry:B}))}function T(B){v(B.entry)}return U={add:v,contains:function g(B){return!!(L.length&&B&&B.length)&&-1!==L.indexOf(B)},reset:function N(){L=[]}},function k(){c&&b.on(c,T,U)}(),U}R.__dashjs_factory_name="BlackListController",O.default=e.default.getClassFactory(R)},"./src/streaming/controllers/BufferController.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/constants/Constants.js"),S=r("./src/streaming/constants/MetricsConstants.js"),R=r("./src/streaming/models/FragmentModel.js"),j=r("./src/streaming/SourceBufferSink.js"),U=r("./src/core/EventBus.js"),L=r("./src/core/events/Events.js"),b=r("./src/core/FactoryMaker.js"),f=r("./src/core/Debug.js"),c=r("./src/streaming/utils/InitCache.js"),g=r("./src/streaming/vo/DashJSError.js"),v=r("./src/core/errors/Errors.js"),T=r("./src/streaming/vo/metrics/HTTPRequest.js"),k=r("./src/streaming/MediaPlayerEvents.js"),B=.01,P="BufferController";function _(D){D=D||{};var ne,pe,me,xe,ve,Oe,Ee,Ie,Re,Pe,ke,Be,qe,He,De,he,Y,J,y=this.context,A=Object(U.default)(y).getInstance(),I=D.errHandler,G=D.fragmentModel,ee=D.representationController,de=D.adapter,ue=D.textController,Te=D.abrController,q=D.playbackController,se=D.streamInfo,H=D.type,ce=D.settings;function X(xt){Oe=xt}function Z(xt){return de.convertRepresentationToRepresentationInfo(ee.getRepresentationForQuality(xt))}function oe(xt,Ct,Vt){var Jt=Z(Vt);return Ct&&Ct[H]&&(H===e.default.VIDEO||H===e.default.AUDIO)?Re.initializeForStreamSwitch(xt,Jt,Ct[H]):Re.initializeForFirstUse(se,xt,Jt)}function be(xt){ce.get().streaming.cacheInitSegments&&(pe.info("Init fragment finished loading saving to",H+"'s init cache"),De.save(xt.chunk)),pe.debug("Append Init fragment",H," with representationId:",xt.chunk.representationId," and quality:",xt.chunk.quality,", data size:",xt.chunk.bytes.byteLength),at(xt.chunk)}function We(xt){at(xt.chunk,xt.request)}function at(xt){Re.append(xt,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null).then(function(Vt){ut(Vt)}).catch(function(Vt){ut(Vt)}),xt.mediaInfo.type===e.default.VIDEO&&sn(L.default.VIDEO_CHUNK_RECEIVED,{chunk:xt})}function et(xt){if(xt&&xt.length>0)for(var Ct=0,Vt=xt.length;Ct<Vt;Ct++)pe.debug("Buffered range: "+xt.start(Ct)+" - "+xt.end(Ct)+", currentTime = ",q.getTime())}function ut(xt){if(xt.error)return 22===xt.error.code&&function tt(){if(He=!0,ve=.8*fn(),pe.warn("Quota exceeded, Critical Buffer: "+ve),ve>0){var xt=Math.max(.2*ve,1),Ct=ve-xt,Vt=Math.min(ce.get().streaming.buffer.bufferTimeAtTopQuality,.9*Ct),Jt=Math.min(ce.get().streaming.buffer.bufferTimeAtTopQualityLongForm,.9*Ct),bn={streaming:{buffer:{bufferToKeep:parseFloat(xt.toFixed(5)),bufferTimeAtTopQuality:parseFloat(Vt.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(Jt.toFixed(5))}}};ce.update(bn)}}(),void((22===xt.error.code||!kt())&&(pe.warn("Clearing playback buffer to overcome quota exceed situation"),sn(L.default.QUOTA_EXCEEDED,{criticalBufferLevel:ve,quotaExceededTime:xt.chunk.start}),pt(_t())));if(Re&&(Qe(),He=!1,(ke=xt.chunk)&&ke.endFragment)){ke&&!isNaN(ke.index)&&(Ee=Math.max(ke.index,Ee),mt());var Ct=Re.getAllBufferRanges();ke.segmentType===T.HTTPRequest.MEDIA_SEGMENT_TYPE&&(et(Ct),ln(),function Ot(){if(!isNaN(J)){if(H!==e.default.AUDIO&&H!==e.default.VIDEO)return void(J=NaN);var xt=q.getTime(),Ct=Vn(xt,0),Vt=Vn(J,0);if(Ct&&Vt&&Ct.start===Vt.start)return void(J=NaN);var Jt=ee.getCurrentRepresentation().segmentDuration,bn=Vn(J,Jt);!bn||(ce.get().streaming.buffer.enableSeekDecorrelationFix&&Math.abs(xt-J)>Jt?J<=bn.end&&q.seek(Math.max(J,bn.start),!1,!0):xt<bn.start&&q.seek(bn.start,!1,!0))}}()),ke&&sn(L.default.BYTES_APPENDED_END_FRAGMENT,{quality:ke.quality,startTime:ke.start,index:ke.index,bufferedRanges:Ct,segmentType:ke.segmentType,mediaType:H})}}function Dt(){return new Promise(function(xt,Ct){var Vt=$t();if(!Vt||0===Vt.length)return ln(),void xt();pt(Vt).then(function(){xt()}).catch(function(Jt){Ct(Jt)})})}function $t(xt){var Ct=[],Vt=Re.getAllBufferRanges();if(!Vt||0===Vt.length)return Ct;if(!xt&&0!==xt||isNaN(xt))Ct.push({start:Vt.start(0),end:Vt.end(Vt.length-1)+.5});else{var Jt=function Kt(xt,Ct){var Vt=ce.get().streaming.buffer.bufferToKeep,Jt=Ct.start(0);if(xt-Jt>Vt){var Ln=Math.max(0,xt-Vt),Pt=G.getRequests({state:R.default.FRAGMENT_MODEL_EXECUTED,time:xt,threshold:B})[0];if(Pt&&(Ln=Math.min(Pt.startTime,Ln)),Ln>0)return{start:Jt,end:Ln}}return null}(xt,Vt),bn=function Xt(xt,Ct){var Vt=Ct.end(Ct.length-1)+.5,Jt=It(xt),Ln=se.manifestInfo.duration>=ce.get().streaming.buffer.longFormContentDurationThreshold?ce.get().streaming.buffer.bufferTimeAtTopQualityLongForm:ce.get().streaming.buffer.bufferTimeAtTopQuality,Pt=isNaN(Jt)?xt:Math.min(Jt,xt+Ln);if(Pt>=Ct.end(Ct.length-1))return null;var yn=G.getRequests({state:R.default.FRAGMENT_MODEL_EXECUTED,time:xt,threshold:B})[0];if(yn&&(Pt=Math.max(yn.startTime+yn.duration,Pt)),ce.get().streaming.buffer.avoidCurrentTimeRangePruning)for(var $n=0;$n<Ct.length;$n++)if(Ct.start($n)<=xt&&xt<=Ct.end($n)&&Ct.start($n)<=Pt&&Pt<=Ct.end($n)){var dr=Pt;Pt=$n+1<Ct.length?Ct.start($n+1):Ct.end($n)+1,pe.debug("Buffered range ["+Ct.start($n)+", "+Ct.end($n)+"] overlaps with targetTime "+xt+" and range to be pruned ["+dr+", "+Vt+"], using ["+Pt+", "+Vt+"] instead"+(Pt<Vt?"":" (no actual pruning)"));break}return Pt<Ct.end(Ct.length-1)?{start:Pt,end:Vt}:null}(xt,Vt);Jt&&Ct.push(Jt),bn&&Ct.push(bn)}return Ct}function ln(){(!Y||H===e.default.TEXT&&ue.isTextEnabled())&&Qe()}function Bn(){Lt()}function Rn(){Lt(),J=NaN}function Vn(xt,Ct){var Nn,$n,Vt=Re.getAllBufferRanges(),Jt=0,bn=0,Ln=null,Pt=null,yn=0,dr=isNaN(Ct)?.15:Ct;if(null!=Vt){for($n=0,Nn=Vt.length;$n<Nn;$n++)if(Jt=Vt.start($n),bn=Vt.end($n),null===Ln)yn=Math.abs(Jt-xt),(xt>=Jt&&xt<bn||yn<=dr)&&(Ln=Jt,Pt=bn);else{if(!((yn=Jt-Pt)<=dr))break;Pt=bn}if(null!==Ln)return{start:Ln,end:Pt}}return null}function Qe(){if(q){var xt=ce.get().streaming.gaps.jumpGaps&&!isNaN(ce.get().streaming.gaps.smallGapLimit)?ce.get().streaming.gaps.smallGapLimit:NaN;xe=Math.max(function ot(xt,Ct){var Vt;return ce.get().streaming.gaps.jumpGaps&&(Ct=ce.get().streaming.gaps.smallGapLimit),null===(Vt=Vn(xt,Ct))?0:Vt.end-xt}(q.getTime()||0,xt),0),sn(L.default.BUFFER_LEVEL_UPDATED,{mediaType:H,bufferLevel:xe}),Lt()}}function mt(){var xt=Ee>=Ie-1,Ct=q.getTimeToStreamEnd(se)-xe<1e-5;(xt||Ct)&&!me&&(ct(!0),pe.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED for stream id ".concat(se.id," and type ").concat(H)))}function Lt(){H!==e.default.AUDIO&&H!==e.default.VIDEO||((!q.getLowLatencyModeEnabled()&&xe<ce.get().streaming.buffer.stallThreshold||0===xe)&&!me?nn(S.default.BUFFER_EMPTY):(me||xe>=ce.get().streaming.buffer.stallThreshold||q.getLowLatencyModeEnabled()&&xe>0)&&nn(S.default.BUFFER_LOADED))}function nn(xt){Pe===xt||xt===S.default.BUFFER_EMPTY&&0===q.getTime()||H===e.default.TEXT&&!ue.isTextEnabled()||(Pe=xt,sn(L.default.BUFFER_LEVEL_STATE_CHANGED,{state:xt}),sn(xt===S.default.BUFFER_LOADED?L.default.BUFFER_LOADED:L.default.BUFFER_EMPTY),pe.debug(xt===S.default.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function zt(){!Re||H===e.default.TEXT||me||pt(_t())}function _t(){var xt=[],Ct=Re.getAllBufferRanges();if(!Ct||0===Ct.length)return xt;var Vt=q.getTime(),Jt=Math.max(0,Vt-ce.get().streaming.buffer.bufferToKeep),bn=G.getRequests({state:R.default.FRAGMENT_MODEL_EXECUTED,time:Vt,threshold:B})[0];if(bn)Jt=Math.min(bn.startTime,Jt);else if(0===Vt&&q.getIsDynamic())return[];if(Ct.start(0)<=Jt){for(var Ln={start:0,end:Jt},Pt=0;Pt<Ct.length&&Ct.end(Pt)<=Jt;Pt++)Ln.end=Ct.end(Pt);Ln.start<Ln.end&&xt.push(Ln)}return xt}function pt(xt){return new Promise(function(Ct,Vt){if(xt&&Re&&0!==xt.length){var Jt=[];xt.forEach(function(bn){Jt.push(function rt(xt){return new Promise(function(Ct,Vt){xt.resolve=Ct,xt.reject=Vt,he.push(xt)})}(bn))}),qe||Xe(),Promise.all(Jt).then(function(){Ct()}).catch(function(bn){Vt(bn)})}else Ct()})}function Xe(){try{if(0===he.length||!Re)return pe.debug("Nothing to prune, halt pruning"),he=[],void(qe=!1);var xt=Re.getBuffer();if(!xt||!xt.buffered||0===xt.buffered.length)return pe.debug("SourceBuffer is empty (or does not exist), halt pruning"),he=[],void(qe=!1);var Ct=he.shift();pe.debug("".concat(H,": Removing buffer from: ").concat(Ct.start," to ").concat(Ct.end)),qe=!0,q.getTime()<Ct.end&&ct(!1),Re.remove(Ct).then(function(Jt){yt(Jt)}).catch(function(Jt){yt(Jt)})}catch(Jt){qe=!1}}function yt(xt){pe.debug("onRemoved buffer from:",xt.from,"to",xt.to),et(Re.getAllBufferRanges()),0===he.length&&(qe=!1,Qe()),xt.unintended&&(pe.warn("Detected unintended removal from:",xt.from,"to",xt.to,"setting streamprocessor time to",xt.from),sn(L.default.SEEK_TARGET,{time:xt.from})),qe?Xe():(Y?Y=!1:Qe(),sn(L.default.BUFFER_CLEARED,{from:xt.from,to:xt.to,unintended:xt.unintended,hasEnoughSpaceToAppend:kt(),quotaExceeded:He}))}function Gt(xt){return new Promise(function(Ct){xt&&void 0!==xt.MSETimeOffset&&Re&&Re.updateTimestampOffset?Re.updateTimestampOffset(xt.MSETimeOffset).then(function(){Ct()}).catch(function(){Ct()}):Ct()})}function Qt(){return Re&&!me?Re.updateAppendWindow(se):Promise.resolve()}function mn(){++Be*(ce.get().streaming.wallclockTimeUpdateInterval/1e3)>=ce.get().streaming.buffer.bufferPruningInterval&&(Be=0,zt())}function Dn(){Lt()}function ct(xt){me!==xt&&((me=xt)?sn(L.default.BUFFERING_COMPLETED):Ie=Number.POSITIVE_INFINITY)}function fn(){try{var Vt,Jt,xt=Re.getAllBufferRanges(),Ct=0;if(!xt)return Ct;for(Jt=0,Vt=xt.length;Jt<Vt;Jt++)Ct+=xt.end(Jt)-xt.start(Jt);return Ct}catch(bn){return 0}}function It(xt){try{var Ct=xt,Vt=Re.getAllBufferRanges();if(!Vt||0===Vt.length)return NaN;for(var Jt=0;Ct===xt&&Jt<Vt.length;){var bn=Vt.start(Jt),Ln=Vt.end(Jt);Ct>=bn&&Ct<=Ln&&(Ct=Ln),Jt+=1}return Ct===xt?NaN:Ct}catch(Pt){}}function kt(){var xt=fn();return isNaN(xt)||xt<ve}function sn(xt,Ct){A.trigger(xt,Ct||{},{streamId:se.id,mediaType:H})}function kn(xt,Ct){if(ve=Number.POSITIVE_INFINITY,Pe=void 0,Ie=Number.POSITIVE_INFINITY,Ee=0,ke=null,me=!1,qe=!1,He=!1,xe=0,Be=0,he=[],J=NaN,Re){var Vt=Re;Re=null,!xt&&!Ct&&Vt.abort().then(function(){Vt.reset(Ct),Vt=null})}Y=!1}return ne={initialize:function ae(xt){X(xt),A.on(L.default.INIT_FRAGMENT_LOADED,be,ne),A.on(L.default.MEDIA_FRAGMENT_LOADED,We,ne),A.on(L.default.WALLCLOCK_TIME_UPDATED,mn,ne),A.on(k.default.PLAYBACK_PLAYING,Rn,ne),A.on(k.default.PLAYBACK_PROGRESS,ln,ne),A.on(k.default.PLAYBACK_TIME_UPDATED,ln,ne),A.on(k.default.PLAYBACK_RATE_CHANGED,Dn,ne),A.on(k.default.PLAYBACK_STALLED,Bn,ne)},getStreamId:function re(){return se.id},getType:function z(){return H},getBufferControllerType:function te(){return P},createBufferSink:function W(xt){var Ct=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new Promise(function(Vt,Jt){if(De&&xt&&Oe){var bn=Te.getQualityFor(H,se.id);Re=Object(j.default)(y).create({mediaSource:Oe,textController:ue,eventBus:A}),oe(xt,Ct,bn).then(function(){return Gt(Z(bn))}).then(function(){Vt(Re)}).catch(function(Ln){pe.fatal("Caught error on create SourceBuffer: "+Ln),I.error(new g.default(v.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,v.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+H)),Jt(Ln)})}else Vt(null)})},getBuffer:function Zn(){return Re},getBufferLevel:function Jn(){return xe},getRangeAt:Vn,hasBufferAtTime:function jn(xt){try{var Ct=Re.getAllBufferRanges();if(!Ct||0===Ct.length)return!1;for(var Vt=0;Vt<Ct.length;){var Jt=Ct.start(Vt),bn=Ct.end(Vt);if(xt>=Jt&&xt<=bn)return!0;Vt+=1}return!1}catch(Ln){return pe.error(Ln),!1}},pruneBuffer:zt,setMediaSource:X,getMediaSource:function _r(){return Oe},appendInitSegmentFromCache:function Fe(xt){var Ct=De.extract(se.id,xt);return!!Ct&&(pe.info("Append Init fragment",H," with representationId:",Ct.representationId," and quality:",Ct.quality,", data size:",Ct.bytes.byteLength),at(Ct),!0)},getIsBufferingCompleted:function Pr(){return me},setIsBufferingCompleted:ct,getIsPruningInProgress:function qt(){return qe},reset:function wn(xt,Ct){A.off(L.default.INIT_FRAGMENT_LOADED,be,this),A.off(L.default.MEDIA_FRAGMENT_LOADED,We,this),A.off(L.default.WALLCLOCK_TIME_UPDATED,mn,this),A.off(k.default.PLAYBACK_PLAYING,Rn,this),A.off(k.default.PLAYBACK_PROGRESS,ln,this),A.off(k.default.PLAYBACK_TIME_UPDATED,ln,this),A.off(k.default.PLAYBACK_RATE_CHANGED,Dn,this),A.off(k.default.PLAYBACK_STALLED,Bn,this),kn(xt,Ct)},prepareForPlaybackSeek:function Et(){return me&&ct(!1),Re.abort()},prepareForReplacementTrackSwitch:function Yt(xt){return new Promise(function(Ct,Vt){Re.abort().then(function(){return Qt()}).then(function(){return ce.get().streaming.buffer.useChangeTypeForTrackSwitch?Re.changeType(xt):Promise.resolve()}).then(function(){return Dt()}).then(function(){ct(!1),Ct()}).catch(function(Jt){Vt(Jt)})})},prepareForNonReplacementTrackSwitch:function At(xt){return new Promise(function(Ct,Vt){Qt().then(function(){return ce.get().streaming.buffer.useChangeTypeForTrackSwitch?Re.changeType(xt):Promise.resolve()}).then(function(){Ct()}).catch(function(Jt){Vt(Jt)})})},prepareForReplacementQualitySwitch:function vt(){return new Promise(function(xt,Ct){Re.abort().then(function(){return Qt()}).then(function(){return Dt()}).then(function(){ct(!1),xt()}).catch(function(Vt){Ct(Vt)})})},updateAppendWindow:Qt,getAllRangesWithSafetyFactor:$t,getContinuousBufferTimeForTargetTime:It,clearBuffers:pt,pruneAllSafely:Dt,updateBufferTimestampOffset:Gt,setSeekTarget:function Rt(xt){J=xt},segmentRequestingCompleted:function on(xt){isNaN(xt)||(Ie=xt,mt())}},function Me(){pe=Object(f.default)(y).getInstance().getLogger(ne),De=Object(c.default)(y).getInstance(),kn()}(),ne}_.__dashjs_factory_name=P,O.default=b.default.getClassFactory(_)},"./src/streaming/controllers/CatchupController.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js"),S=r("./src/core/Debug.js"),R=r("./src/core/EventBus.js"),j=r("./src/streaming/constants/Constants.js"),U=r("./src/streaming/MediaPlayerEvents.js"),L=r("./src/core/events/Events.js"),b=r("./src/streaming/constants/MetricsConstants.js"),f=r("./src/core/Utils.js");function c(){var T,k,N,B,x,P,_,D,y,A,g=this.context,v=Object(R.default)(g).getInstance();function q(){k=!1;var Be=f.default.parseUserAgent();N=Be&&Be.browser&&Be.browser.name&&"safari"===Be.browser.name.toLowerCase()}function se(){k=!1}function H(Be){if(Be.streamId===P.getActiveStreamInfo().id&&y){var qe=_.getLiveDelay();_.getBufferLevel()>qe/2&&(y=!1)}}function ce(Be){Be.streamId===P.getActiveStreamInfo().id&&(y=Be.state===b.default.BUFFER_EMPTY)}function ne(){D.getCatchupModeEnabled()||B.setPlaybackRate(1)}function pe(){_.getIsDynamic()&&D.getCatchupModeEnabled()&&(D.getCatchupPlaybackRates().max>0||D.getCatchupPlaybackRates().min<0)&&!_.isPaused()&&!_.isSeeking()&&function ve(){try{return!(!_.getTime()>0||k)&&(Oe()===j.default.LIVE_CATCHUP_MODE_LOLP?function Ie(Be,qe){try{return Math.abs(xe())>0||Be<qe}catch(De){return!1}}(_.getBufferLevel(),x.get().streaming.liveCatchup.playbackBufferMin):function Ee(){try{return Math.abs(xe())>0}catch(qe){return!1}}())}catch(De){return!1}}()&&function me(){if(!k&&B){var Be,qe=B.getPlaybackRate(),He=D.getCatchupPlaybackRates(),De=_.getBufferLevel(),he=xe(),Y=D.getCatchupMaxDrift();if(!isNaN(Y)&&Y>0&&he>Y)A.info("[CatchupController]: Low Latency catchup mechanism. Latency too high, doing a seek to live point"),k=!0,_.seekToCurrentLive(!0,!1);else{var J=_.getCurrentLiveLatency(),Me=_.getLiveDelay();Be=Oe()===j.default.LIVE_CATCHUP_MODE_LOLP?function Pe(Be,qe,He,De,he){var Y;if(he<De){var J=Math.abs(Be.min),re=2*J/(1+Math.pow(Math.E,-5*(he-De)));A.debug("[LoL+ playback control_buffer-based] bufferLevel: "+he+", newRate: "+(Y=1-J+re))}else{var z=Be.max,te=.02;Y=Math.abs(qe-He)<=te*He?1:1-z+2*z/(1+Math.pow(Math.E,-5*(qe-He))),A.debug("[LoL+ playback control_latency-based] latency: "+qe+", newRate: "+Y)}return Y}(He,J,Me,x.get().streaming.liveCatchup.playbackBufferMin,De):function Re(Be,qe,He,De){if(y)return 1;var he=qe-He,Y=he<0?Math.abs(Be.min):Be.max,ae=1-Y+2*Y/(1+Math.pow(Math.E,-5*he));return _.getPlaybackStalled()&&De<=He/2&&he>0&&(ae=1),ae}(He,J,Me,De);var re=N?.25:.02/(.5/He.max);Be&&Math.abs(qe-Be)>=re&&(A.debug("[CatchupController]: Setting playback rate to ".concat(Be)),B.setPlaybackRate(Be))}}}()}function xe(){return _.getCurrentLiveLatency()-_.getLiveDelay()}function Oe(){var Be=x.get().streaming.liveCatchup.playbackBufferMin;return x.get().streaming.liveCatchup.mode!==j.default.LIVE_CATCHUP_MODE_LOLP||null===Be||isNaN(Be)?j.default.LIVE_CATCHUP_MODE_DEFAULT:j.default.LIVE_CATCHUP_MODE_LOLP}function ke(){D.getCatchupPlaybackRates(!0)}return T={reset:function Te(){(function de(){v.off(U.default.BUFFER_LEVEL_UPDATED,H,T),v.off(U.default.BUFFER_LEVEL_STATE_CHANGED,ce,T),v.off(U.default.PLAYBACK_PROGRESS,pe,T),v.off(U.default.PLAYBACK_TIME_UPDATED,pe,T),v.off(U.default.PLAYBACK_SEEKED,pe,T),v.off(L.default.SETTING_UPDATED_CATCHUP_ENABLED,ne,T),v.off(L.default.SETTING_UPDATED_PLAYBACK_RATE_MIN,ke,T),v.off(L.default.SETTING_UPDATED_PLAYBACK_RATE_MAX,ke,T),v.off(U.default.STREAM_INITIALIZED,ke,T)})(),q(),B.setPlaybackRate(1,!0)},setConfig:function G(Be){!Be||(Be.settings&&(x=Be.settings),Be.videoModel&&(B=Be.videoModel),Be.streamController&&(P=Be.streamController),Be.playbackController&&(_=Be.playbackController),Be.mediaPlayerModel&&(D=Be.mediaPlayerModel))},initialize:function I(){(function ee(){v.on(U.default.BUFFER_LEVEL_UPDATED,H,T),v.on(U.default.BUFFER_LEVEL_STATE_CHANGED,ce,T),v.on(U.default.PLAYBACK_PROGRESS,pe,T),v.on(U.default.PLAYBACK_TIME_UPDATED,pe,T),v.on(U.default.PLAYBACK_SEEKED,se,T),v.on(L.default.SETTING_UPDATED_CATCHUP_ENABLED,ne,T),v.on(L.default.SETTING_UPDATED_PLAYBACK_RATE_MIN,ke,T),v.on(L.default.SETTING_UPDATED_PLAYBACK_RATE_MAX,ke,T),v.on(U.default.STREAM_INITIALIZED,ke,T)})(),ke()}},function ue(){A=Object(S.default)(g).getInstance().getLogger(T),q()}(),T}c.__dashjs_factory_name="CatchupController",O.default=e.default.getSingletonFactory(c)},"./src/streaming/controllers/EventController.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js"),S=r("./src/core/Debug.js"),R=r("./src/core/EventBus.js"),j=r("./src/streaming/MediaPlayerEvents.js"),U=r("./src/streaming/net/XHRLoader.js");function L(){var B,x,P,_,D,y,A,I,G,ee,de,b="urn:mpeg:dash:event:2012",T_DISCARDED="discarded",T_UPDATED="updated",T_ADDED="added",k=this.context,N=Object(R.default)(k).getInstance();function Te(){if(!A||!I)throw new Error("setConfig function has to be called previously")}function q(){de=!1,P={},_={},D=null,ee=!1,y=Date.now()/1e3}function se(){try{null!==D&&de&&(clearInterval(D),D=null,de=!1,function Ee(){try{Ie(_),Ie(P)}catch(ae){x.error(ae)}}())}catch(ae){throw ae}}function ce(){try{if(!ee){ee=!0;var ae=I.getTime(),re=ae-y;re=y>0?Math.max(0,re):0,ne(_,re,ae),ne(P,re,ae),pe(_),pe(P),y=ae,ee=!1}}catch(z){ee=!1,x.error(z)}}function ne(ae,re,z){try{Re(ae,function(Z){if(void 0!==Z){var W=isNaN(Z.duration)?0:Z.duration;Z.calculatedPresentationTime<=z&&Z.calculatedPresentationTime+re+W>=z?Be(Z,j.default.EVENT_MODE_ON_START):(Pe(z,W+re,Z.calculatedPresentationTime)||function ke(ae){try{return ae.calculatedPresentationTime>ae.eventStream.period.start+ae.eventStream.period.duration}catch(z){return x.error(z),!1}}(Z))&&(x.debug("Removing event ".concat(Z.id," from period ").concat(Z.eventStream.period.id," as it is expired or invalid")),function qe(ae,re){try{var z=re.eventStream.schemeIdUri,te=re.eventStream.period.id,X=re.eventStream.value,Z=re.id;ae[te][z]=ae[te][z].filter(function(W){return X&&W.eventStream.value&&W.eventStream.value!==X||W.id!==Z}),0===ae[te][z].length&&delete ae[te][z]}catch(W){x.error(W)}}(ae,Z))}})}catch(X){x.error(X)}}function pe(ae){try{for(var re in ae)ae.hasOwnProperty(re)&&0===Object.keys(ae[re]).length&&delete ae[re]}catch(z){x.error(z)}}function ve(ae,re){var z=arguments.length>2&&void 0!==arguments[2]&&arguments[2],te=ae.eventStream.schemeIdUri,X=ae.eventStream.value,Z=ae.id,W=T_DISCARDED;re[te]||(re[te]=[]);var oe=re[te].findIndex(function(Fe){return(!X||Fe.eventStream.value&&Fe.eventStream.value===X)&&Fe.id===Z});if(-1===oe)re[te].push(ae),ae.triggeredReceivedEvent=!1,ae.triggeredStartEvent=!1,W=T_ADDED;else if(z){var be=re[te][oe];ae.triggeredReceivedEvent=be.triggeredReceivedEvent,ae.triggeredStartEvent=be.triggeredStartEvent,re[te][oe]=ae,W=T_UPDATED}return W}function Oe(ae){try{1==ae.eventStream.value&&N.trigger(j.default.MANIFEST_VALIDITY_CHANGED,{id:ae.id,validUntil:ae.calculatedPresentationTime,newDuration:4294967295==ae.calculatedPresentationTime?NaN:ae.calculatedPresentationTime+ae.duration,newManifestValidAfter:NaN},{mode:j.default.EVENT_MODE_ON_START})}catch(te){x.error(te)}}function Ie(ae){try{var re=I.getTime();Re(ae,function(X){var Z=X.eventStream&&X.eventStream.period&&!isNaN(X.eventStream.period.duration)?X.eventStream.period.duration:NaN,W=X.eventStream&&X.eventStream.period&&!isNaN(X.eventStream.period.start)?X.eventStream.period.start:NaN;isNaN(Z)||isNaN(W)||Math.abs(X.calculatedPresentationTime-re)<300&&Be(X,j.default.EVENT_MODE_ON_START)})}catch(te){x.error(te)}}function Re(ae,re){try{if(ae)for(var z=Object.keys(ae),te=0;te<z.length;te++)for(var X=ae[z[te]],Z=Object.keys(X),W=0;W<Z.length;W++)X[Z[W]].forEach(function(be){void 0!==be&&re(be)})}catch(be){x.error(be)}}function Pe(ae,re,z){try{return ae-re>z}catch(te){return x.error(te),!1}}function Be(ae,re){try{var z=I.getTime(),te=ae.id;if(re===j.default.EVENT_MODE_ON_RECEIVE&&!ae.triggeredReceivedEvent)return x.debug("Received event ".concat(te)),ae.triggeredReceivedEvent=!0,void N.trigger(ae.eventStream.schemeIdUri,{event:ae},{mode:re});ae.triggeredStartEvent||(ae.eventStream.schemeIdUri===b&&1==ae.eventStream.value?(0!==ae.duration||0!==ae.presentationTimeDelta)&&(x.debug("Starting manifest refresh event ".concat(te," at ").concat(z)),function He(){try{Te(),A.refreshManifest()}catch(ae){x.error(ae)}}()):"urn:mpeg:dash:event:callback:2015"===ae.eventStream.schemeIdUri&&1==ae.eventStream.value?(x.debug("Starting callback event ".concat(te," at ").concat(z)),function De(ae){try{Object(U.default)(k).create({}).load({method:"get",url:ae,request:{responseType:"arraybuffer"}})}catch(z){x.error(z)}}(ae.messageData)):(x.debug("Starting event ".concat(te," from period ").concat(ae.eventStream.period.id," at ").concat(z)),N.trigger(ae.eventStream.schemeIdUri,{event:ae},{mode:re})),ae.triggeredStartEvent=!0)}catch(X){x.error(X)}}return B={addInlineEvents:function me(ae,re){try{if(Te(),P[re]||(P[re]={}),ae)for(var z=0;z<ae.length;z++){var te=ae[z];if(!Pe(I.getTime(),isNaN(te.duration)?0:te.duration,te.calculatedPresentationTime)){var W=ve(te,P[re],!0);W===T_ADDED?(x.debug("Added inline event with id ".concat(te.id," from period ").concat(re)),Be(te,j.default.EVENT_MODE_ON_RECEIVE)):W===T_UPDATED&&x.debug("Updated inline event with id ".concat(te.id," from period ").concat(re))}}}catch(oe){throw oe}},addInbandEvents:function xe(ae,re){try{Te(),_[re]||(_[re]={});for(var z=0;z<ae.length;z++){var te=ae[z];Pe(I.getTime(),isNaN(te.duration)?0:te.duration,te.calculatedPresentationTime)||(ve(te,_[re],!1)===T_ADDED?(te.eventStream.schemeIdUri===b&&Oe(te),x.debug("Added inband event with id ".concat(te.id," from period ").concat(re)),Be(te,j.default.EVENT_MODE_ON_RECEIVE)):x.debug("Inband event with scheme_id_uri ".concat(te.eventStream.schemeIdUri,", value ").concat(te.eventStream.value,", period id ").concat(re," and event id ").concat(te.id," was ignored because it has been added before.")))}ce()}catch(oe){throw oe}},getInbandEvents:function J(){return _},getInlineEvents:function Y(){return P},start:function H(){try{Te(),x.debug("Start Event Controller");var ae=G.get().streaming.eventControllerRefreshDelay;!de&&!isNaN(ae)&&(de=!0,D=setInterval(ce,ae))}catch(re){throw re}},setConfig:function he(ae){try{if(!ae)return;ae.manifestUpdater&&(A=ae.manifestUpdater),ae.playbackController&&(I=ae.playbackController),ae.settings&&(G=ae.settings)}catch(re){throw re}},reset:function Me(){se(),q()}},function ue(){x=Object(S.default)(k).getInstance().getLogger(B),q()}(),B}L.__dashjs_factory_name="EventController",O.default=e.default.getSingletonFactory(L)},"./src/streaming/controllers/FragmentController.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/constants/Constants.js"),S=r("./src/streaming/vo/DataChunk.js"),R=r("./src/streaming/models/FragmentModel.js"),j=r("./src/streaming/FragmentLoader.js"),U=r("./src/streaming/utils/RequestModifier.js"),L=r("./src/core/EventBus.js"),b=r("./src/core/events/Events.js"),f=r("./src/streaming/MediaPlayerEvents.js"),c=r("./src/core/errors/Errors.js"),g=r("./src/core/FactoryMaker.js"),v=r("./src/core/Debug.js");function T(k){k=k||{};var A,I,G,N=this.context,B=Object(L.default)(N).getInstance(),x=k.errHandler,P=k.mediaPlayerModel,_=k.dashMetrics,D=Object(v.default)(N).getInstance(),y=k.streamInfo;function de(){return y.id}function Te(){for(var ce in G)G[ce].reset();G={}}function H(ce){if(ce.sender){var ne=ce.request,pe=ce.response,me=ne.isInitializationRequest(),xe=ne.mediaInfo.streamInfo;if(ce.error&&(ne.mediaType===e.default.AUDIO||ne.mediaType===e.default.VIDEO||ne.mediaType===e.default.TEXT&&ne.mediaInfo.isFragmented)&&B.trigger(b.default.SERVICE_LOCATION_BLACKLIST_ADD,{entry:ce.request.serviceLocation}),!pe||!xe)return void I.warn("No "+ne.mediaType+" bytes to push or stream is inactive.");var ve=function se(ce,ne,pe,me){var xe=new S.default;return xe.streamId=pe,xe.mediaInfo=ne.mediaInfo,xe.segmentType=ne.type,xe.start=ne.startTime,xe.duration=ne.duration,xe.end=xe.start+xe.duration,xe.bytes=ce,xe.index=ne.index,xe.quality=ne.quality,xe.representationId=ne.representationId,xe.endFragment=me,xe}(pe,ne,y.id,ce.type!==b.default.FRAGMENT_LOADING_PROGRESS);B.trigger(me?b.default.INIT_FRAGMENT_LOADED:b.default.MEDIA_FRAGMENT_LOADED,{chunk:ve,request:ne},{streamId:xe.id,mediaType:ne.mediaType})}}return A={getStreamId:de,getModel:function ue(ce){var ne=G[ce];return ne||(ne=Object(R.default)(N).create({streamInfo:y,type:ce,dashMetrics:_,fragmentLoader:Object(j.default)(N).create({dashMetrics:_,mediaPlayerModel:P,errHandler:x,requestModifier:Object(U.default)(N).getInstance(),settings:k.settings,boxParser:k.boxParser,eventBus:B,events:b.default,errors:c.default,dashConstants:k.dashConstants,urlUtils:k.urlUtils,streamId:de()}),debug:D,eventBus:B,events:b.default}),G[ce]=ne),ne},reset:function q(){B.off(f.default.FRAGMENT_LOADING_COMPLETED,H,this),B.off(f.default.FRAGMENT_LOADING_PROGRESS,H,this),Te()}},function ee(){I=D.getLogger(A),Te(),B.on(f.default.FRAGMENT_LOADING_COMPLETED,H,A),B.on(f.default.FRAGMENT_LOADING_PROGRESS,H,A)}(),A}T.__dashjs_factory_name="FragmentController",O.default=g.default.getClassFactory(T)},"./src/streaming/controllers/GapController.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js"),S=r("./src/core/Debug.js"),R=r("./src/core/events/Events.js"),j=r("./src/core/EventBus.js"),U=r("./src/streaming/constants/Constants.js");function c(){var T,k,N,B,x,P,_,D,y,A,I,G,g=this.context,v=Object(j.default)(g).getInstance();function ue(){(function Pe(){G.debug("Stopping the gap controller"),x&&(clearInterval(x),x=null)})(),function H(){v.off(R.default.WALLCLOCK_TIME_UPDATED,xe,this),v.off(R.default.INITIAL_STREAM_SWITCH,me,this),v.off(R.default.PLAYBACK_SEEKING,ce,this),v.off(R.default.BUFFER_REPLACEMENT_STARTED,ne,T),v.off(R.default.TRACK_CHANGE_RENDERED,pe,T)}(),function Te(){x=null,P=NaN,B=0,A=null,I={}}()}function ce(){A&&(clearTimeout(A),A=null)}function ne(Be){try{if(Be.streamId!==D.getActiveStreamInfo().id||Be.mediaType!==U.default.VIDEO&&Be.mediaType!==U.default.AUDIO)return;Be.streamId===D.getActiveStreamInfo().id&&(I[Be.mediaType]=!0)}catch(qe){G.error(qe)}}function pe(Be){!Be||!Be.mediaType||(I[Be.mediaType]=!1)}function me(){x||function Re(){try{x||(G.debug("Starting the gap controller"),x=setInterval(function(){ve()&&ke(_.getTime())},100))}catch(Be){}}()}function xe(){if(ve(N.get().streaming.gaps.enableSeekFix)&&++B>=10){var Be=_.getTime();k===Be?ke(Be,!0):(k=Be,P=NaN),B=0}}function ve(){var Be=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!D.getActiveStream())return!1;var qe=Object.keys(I).some(function(De){return I[De]}),He=!!Be&&Oe();return!qe&&N.get().streaming.gaps.jumpGaps&&D.getActiveStreamProcessors().length>0&&(!_.isSeeking()||He)&&!_.isPaused()&&!D.getIsStreamSwitchInProgress()&&!D.getHasMediaOrInitialisationError()}function Oe(){var Be=D.getActiveStream(),qe=parseFloat((Be.getStartTime()+Be.getDuration()).toFixed(5));return _.getTime()+N.get().streaming.gaps.threshold>=qe}function Ee(Be,qe){try{if(!Be||Be.length<=1&&qe>0)return NaN;for(var He=NaN,De=0;isNaN(He)&&De<Be.length;){var he=De>0?Be.end(De-1):0;qe<Be.start(De)&&he-qe<N.get().streaming.gaps.threshold&&(He=De),De+=1}return He}catch(Y){return null}}function Ie(Be,qe){for(var He=0,De=Be.length;He<De;He++)if(qe>=Be.start(He)&&qe<=Be.end(He))return!0;return!1}function ke(Be){var Me,qe=arguments.length>1&&void 0!==arguments[1]&&arguments[1],He=N.get().streaming.gaps.enableStallFix,De=N.get().streaming.gaps.stallSeek,he=N.get().streaming.gaps.smallGapLimit,Y=N.get().streaming.gaps.jumpLargeGaps,J=y.getBufferRange(),ae=NaN,re=!1;if(Me=Ee(J,Be),!isNaN(Me)){var z=J.start(Me),te=z-Be;te>0&&(te<=he||Y)&&(ae=z)}var X=_.getTimeToStreamEnd();if(isNaN(ae)&&qe&&isFinite(X)&&!isNaN(X)&&X<he&&(ae=parseFloat(_.getStreamEndTime().toFixed(5)),re=!0),He&&isNaN(ae)&&qe&&isNaN(Me)&&Ie(J,Be)&&(0===De?(G.warn("Toggle play pause to break stall"),y.pause(),y.play()):(G.warn("Jumping ".concat(De,"s to break stall")),ae=Be+De)),ae>0&&P!==ae&&ae>Be&&!A){var Z=ae-Be;if(re){var W=D.getStreamForTime(ae),oe=W&&!!W.getPreloaded();G.warn("Jumping to end of stream because of gap from ".concat(Be," to ").concat(ae,". Gap duration: ").concat(Z)),_.seek(ae,!0,oe)}else{var be=_.getIsDynamic(),Fe=Me>0?J.end(Me-1):Be,We=be?1e3*Math.max(0,Z-.1):0;A=window.setTimeout(function(){_.seek(ae,!0,!0),G.warn("Jumping gap occuring in period ".concat(D.getActiveStream().getStreamId()," starting at ").concat(Fe," and ending at ").concat(ae,". Jumping by: ").concat(ae-Fe)),A=null},We)}P=ae}}return T={reset:ue,setConfig:function q(Be){!Be||(Be.settings&&(N=Be.settings),Be.playbackController&&(_=Be.playbackController),Be.streamController&&(D=Be.streamController),Be.videoModel&&(y=Be.videoModel))},initialize:function ee(){!function se(){v.on(R.default.WALLCLOCK_TIME_UPDATED,xe,this),v.on(R.default.INITIAL_STREAM_SWITCH,me,this),v.on(R.default.PLAYBACK_SEEKING,ce,this),v.on(R.default.BUFFER_REPLACEMENT_STARTED,ne,T),v.on(R.default.TRACK_CHANGE_RENDERED,pe,T)}()}},function de(){G=Object(S.default)(g).getInstance().getLogger(T),ue()}(),T}c.__dashjs_factory_name="GapController",O.default=e.default.getSingletonFactory(c)},"./src/streaming/controllers/MediaController.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/constants/Constants.js"),S=r("./src/core/events/Events.js"),R=r("./src/core/EventBus.js"),j=r("./src/core/FactoryMaker.js"),U=r("./src/core/Debug.js"),L=r("./node_modules/bcp-47-normalize/index.js"),b=r.n(L),f=r("./node_modules/bcp-47-match/index.js");function g(){var N,B,x,P,_,D,y,A,T=this.context,k=Object(R.default)(T).getInstance();function de(W,oe){return W&&x[oe]&&x[oe][W]?x[oe][W].list:[]}function ue(W,oe){return W&&x[oe]&&x[oe][W]?x[oe][W].current:null}function q(W){var oe=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(W&&W.streamInfo){var be=W.type,We=W.streamInfo.id,at=ue(be,We);if(x[We]&&x[We][be]&&(x[We][be].current=W,x[We][be].current&&(be!==e.default.TEXT&&!pe(W,at)||be===e.default.TEXT&&W.isFragmented)&&k.trigger(S.default.CURRENT_TRACK_CHANGED,{oldMediaInfo:at,newMediaInfo:W,switchMode:P.get().streaming.trackSwitchMode[be]},{streamId:We}),!oe)){var et=ve(W);if(!et||!x[We][be].storeLastSettings)return;et.roles&&(et.role=et.roles[0],delete et.roles),et.accessibility&&(et.accessibility=et.accessibility[0]),et.audioChannelConfiguration&&(et.audioChannelConfiguration=et.audioChannelConfiguration[0]),D[be]=et,A.setSavedMediaSettings(be,et)}}}function se(W,oe){!W||!oe||(_[W]=oe)}function H(W){return W?_[W]:null}function pe(W,oe){if(!W&&!oe)return!0;if(!W||!oe)return!1;var be=W.id===oe.id,Fe=W.viewpoint===oe.viewpoint,We=W.lang===oe.lang,at=W.codec===oe.codec,et=W.roles.toString()===oe.roles.toString(),ut=W.accessibility.toString()===oe.accessibility.toString(),Ot=W.audioChannelConfiguration.toString()===oe.audioChannelConfiguration.toString();return be&&at&&Fe&&We&&et&&ut&&Ot}function xe(){x={},D={},function He(){_={audio:null,video:null,text:null}}()}function ve(W){var oe={lang:W.lang,viewpoint:W.viewpoint,roles:W.roles,accessibility:W.accessibility,audioChannelConfiguration:W.audioChannelConfiguration};return oe.lang||oe.viewpoint||oe.role&&oe.role.length>0||oe.accessibility&&oe.accessibility.length>0||oe.audioChannelConfiguration&&oe.audioChannelConfiguration.length>0?oe:null}function Oe(W,oe,be){var Fe=[];return W.forEach(function(We){oe(be,We)&&Fe.push(We)}),0!==Fe.length?Fe:W}function Ee(W,oe){return!W.lang||W.lang instanceof RegExp?oe.lang.match(W.lang):""!==oe.lang&&Object(f.extendedFilter)(oe.lang,b()(W.lang)).length>0}function Ie(W,oe){return null==W.index||oe.index===W.index}function Re(W,oe){return!W.viewpoint||W.viewpoint===oe.viewpoint}function Pe(W,oe){var be=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!W.role||!!oe.roles.filter(function(We){return We===W.role})[0]||oe.type===e.default.AUDIO&&be}function ke(W,oe){return W.accessibility?!!oe.accessibility.filter(function(Fe){return Fe===W.accessibility})[0]:!oe.accessibility.length}function Be(W,oe){return!W.audioChannelConfiguration||!!oe.audioChannelConfiguration.filter(function(Fe){return Fe===W.audioChannelConfiguration})[0]}function he(W){var Fe,oe=0,be=[];return W.forEach(function(We){(Fe=Math.max.apply(Math,We.bitrateList.map(function(at){return at.bandwidth})))>oe?(oe=Fe,be=[We]):Fe===oe&&be.push(We)}),be}function Y(W){var Fe,oe=1/0,be=[];return W.forEach(function(We){var at=We.bitrateList.reduce(function(et,ut){var Ot=Math.max(1,ut.width*ut.height);return et+ut.bandwidth/Ot},0);(Fe=at/We.bitrateList.length)<oe?(oe=Fe,be=[We]):Fe===oe&&be.push(We)}),be}function J(W){var Fe,oe=0,be=[];return W.forEach(function(We){(Fe=We.representationCount)>oe?(oe=Fe,be=[We]):Fe===oe&&be.push(We)}),be}function Me(W,oe){if(W===e.default.TEXT)return oe[0];var Fe,be=P.get().streaming.selectionModeForInitialTrack,We=y.getCustomInitialTrackSelectionFunction();if(We&&"function"==typeof We)Fe=We(oe);else switch(be){case e.default.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY:Fe=function ae(W){var oe=function De(W){var oe=0,be=[];return W.forEach(function(Fe){isNaN(Fe.selectionPriority)||(Fe.selectionPriority>oe?(oe=Fe.selectionPriority,be=[Fe]):Fe.selectionPriority===oe&&be.push(Fe))}),be}(W);return oe.length>1&&(oe=he(oe)),oe.length>1&&(oe=J(oe)),oe}(oe);break;case e.default.TRACK_SELECTION_MODE_HIGHEST_BITRATE:Fe=function re(W){var oe=he(W);return oe.length>1&&(oe=J(oe)),oe}(oe);break;case e.default.TRACK_SELECTION_MODE_FIRST_TRACK:Fe=z(oe);break;case e.default.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:Fe=function te(W){var oe=Y(W);return oe.length>1&&(oe=he(oe)),oe}(oe);break;case e.default.TRACK_SELECTION_MODE_WIDEST_RANGE:Fe=function X(W){var oe=J(W);return oe.length>1&&(oe=he(W)),oe}(oe);break;default:B.warn("Track selection mode ".concat(be," is not supported. Falling back to TRACK_SELECTION_MODE_FIRST_TRACK")),Fe=z(oe)}return Fe.length>0?Fe[0]:oe[0]}function z(W){return W[0]}return N={setInitialMediaSettingsForType:function G(W,oe){var be=D[W]||H(W),Fe=de(W,oe.id),We=[];be||se(W,be=A.getSavedMediaSettings(W)),Fe&&0!==Fe.length&&(be&&(We=Oe(We=Array.from(Fe),Ee,be),We=Oe(We,Ie,be),We=Oe(We,Re,be),W===e.default.AUDIO&&!!D[W]||(We=Oe(We,Pe,be)),We=Oe(We,ke,be),We=Oe(We,Be,be)),0===We.length?q(Me(W,Fe),!0):q(We.length>1?Me(W,We):We[0]))},addTrack:function ee(W){if(W){var oe=W.type;if(function ne(W){return W===e.default.AUDIO||W===e.default.VIDEO||W===e.default.TEXT||W===e.default.IMAGE}(oe)){var be=W.streamInfo.id;x[be]||(x[be]={audio:{list:[],storeLastSettings:!0,current:null},video:{list:[],storeLastSettings:!0,current:null},text:{list:[],storeLastSettings:!0,current:null},image:{list:[],storeLastSettings:!0,current:null}});for(var Fe=x[be][oe].list,We=0,at=Fe.length;We<at;++We)if(pe(Fe[We],W))return;Fe.push(W)}}},getTracksFor:de,getCurrentTrackFor:ue,isCurrentTrack:function Te(W){if(!W)return!1;var oe=W.type,be=W.streamInfo.id;return x[be]&&x[be][oe]&&pe(x[be][oe].current,W)},setTrack:q,selectInitialTrack:Me,setInitialSettings:se,getInitialSettings:H,getTracksWithHighestBitrate:he,getTracksWithHighestEfficiency:Y,getTracksWithWidestRange:J,isTracksEqual:pe,matchSettings:function qe(W,oe){var be=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{var Fe=!1;if(W.lang){if(W.lang instanceof RegExp)Fe=oe.lang.match(W.lang);else if(""!==oe.lang){var We=b()(W.lang);We&&(Fe=Object(f.extendedFilter)(oe.lang,We).length>0)}}else Fe=!0;var at=null==W.index||oe.index===W.index,et=!W.viewpoint||W.viewpoint===oe.viewpoint,ut=!W.role||!!oe.roles.filter(function(Et){return Et===W.role})[0],Ot=!W.accessibility||!!oe.accessibility.filter(function(Et){return Et===W.accessibility})[0],tt=!W.audioChannelConfiguration||!!oe.audioChannelConfiguration.filter(function(Et){return Et===W.audioChannelConfiguration})[0];return Fe&&at&&et&&(ut||oe.type===e.default.AUDIO&&be)&&Ot&&tt}catch(Et){return!1}},matchSettingsLang:Ee,matchSettingsIndex:Ie,matchSettingsViewPoint:Re,matchSettingsRole:Pe,matchSettingsAccessibility:ke,matchSettingsAudioChannelConfig:Be,saveTextSettingsDisabled:function ce(){A.setSavedMediaSettings(e.default.TEXT,null)},setConfig:function me(W){!W||(W.domStorage&&(A=W.domStorage),W.settings&&(P=W.settings),W.customParametersModel&&(y=W.customParametersModel))},reset:xe},function I(){B=Object(U.default)(T).getInstance().getLogger(N),xe()}(),N}g.__dashjs_factory_name="MediaController";var v=j.default.getSingletonFactory(g);j.default.updateSingletonFactory(g.__dashjs_factory_name,v),O.default=v},"./src/streaming/controllers/MediaSourceController.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js"),S=r("./src/core/Debug.js");function R(){var j,U,L,b=this.context;return j={createMediaSource:function c(){var x="WebKitMediaSource"in window;return"MediaSource"in window?U=new MediaSource:x&&(U=new WebKitMediaSource),U},attachMediaSource:function g(x){var P=window.URL.createObjectURL(U);return x.setSource(P),P},detachMediaSource:function v(x){x.setSource(null)},setDuration:function T(x){!U||"open"!==U.readyState||null===x&&isNaN(x)||U.duration!==x&&(function B(x){for(var P=x.sourceBuffers,_=0;_<P.length;_++)if(P[_].updating)return!0;return!1}(U)?setTimeout(T.bind(null,x),50):(L.info("Set MediaSource duration:"+x),U.duration=x))},setSeekable:function k(x,P){U&&"function"==typeof U.setLiveSeekableRange&&"function"==typeof U.clearLiveSeekableRange&&"open"===U.readyState&&x>=0&&x<P&&(U.clearLiveSeekableRange(),U.setLiveSeekableRange(x,P))},signalEndOfStream:function N(x){if(x&&"open"===x.readyState){for(var P=x.sourceBuffers,_=0;_<P.length;_++)if(P[_].updating||0===P[_].buffered.length)return;L.info("call to mediaSource endOfStream"),x.endOfStream()}}},function f(){L=Object(S.default)(b).getInstance().getLogger(j)}(),j}R.__dashjs_factory_name="MediaSourceController",O.default=e.default.getSingletonFactory(R)},"./src/streaming/controllers/PlaybackController.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/constants/Constants.js"),S=r("./src/core/EventBus.js"),R=r("./src/core/events/Events.js"),j=r("./src/core/FactoryMaker.js"),U=r("./src/core/Debug.js"),L=r("./src/streaming/MediaPlayerEvents.js"),b=r("./src/streaming/constants/MetricsConstants.js");function c(){var T,k,N,B,x,P,_,D,y,A,I,G,ee,de,ue,Te,se,H,ce,ne,pe,me,xe,g=this.context,v=Object(S.default)(g).getInstance();function Oe(){qe(),de=!1,A=0,I=0,Te=0,pe=!1,se=!1,me=!1,H=NaN,_&&(v.off(R.default.DATA_UPDATE_COMPLETED,At,T),v.off(R.default.LOADING_PROGRESS,on,T),v.off(R.default.MANIFEST_UPDATED,_r,T),v.off(R.default.STREAMS_COMPOSED,Pr,T),v.off(L.default.PLAYBACK_ENDED,pt,T),v.off(L.default.STREAM_INITIALIZING,Dn,T),v.off(L.default.REPRESENTATION_SWITCH,Zn,T),v.off(L.default.BUFFER_LEVEL_STATE_CHANGED,Kt,T),vt(),function fn(){_.removeEventListener("canplay",Dt),_.removeEventListener("canplaythrough",$t),_.removeEventListener("play",Xt),_.removeEventListener("waiting",ln),_.removeEventListener("playing",Bn),_.removeEventListener("pause",Rn),_.removeEventListener("error",rt),_.removeEventListener("seeking",jn),_.removeEventListener("seeked",Vn),_.removeEventListener("timeupdate",ot),_.removeEventListener("progress",Qe),_.removeEventListener("ratechange",mt),_.removeEventListener("loadedmetadata",Lt),_.removeEventListener("loadeddata",nn),_.removeEventListener("stalled",mn),_.removeEventListener("ended",zt),_.removeEventListener("volumechange",_t)}()),y=null,_=null,G=null,ee=null}function Pe(){return parseFloat((ke(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)-Me()).toFixed(5))}function ke(It){var kt=It||G;return kt.start+kt.duration}function Be(){var It=arguments.length>0&&void 0!==arguments[0]&&arguments[0];G&&_&&_.getElement()?(It&&ee&&J(Me()),_.play()):de=!0}function qe(){G&&_&&_.pause()}function He(It){var kt=arguments.length>1&&void 0!==arguments[1]&&arguments[1],Rt=arguments.length>2&&void 0!==arguments[2]&&arguments[2],sn=arguments.length>3&&void 0!==arguments[3]&&arguments[3];G&&_&&It!==(isNaN(H)?_.getTime():H)&&((ce=!0===Rt)||(H=It),k.info("Requesting seek to time: "+It+(ce?" (internal)":"")),ee&&sn&&J(It),_.setCurrentTime(It,kt))}function Y(){if(G&&_&&ee){var It=N&&N.hasVideoTrack()?e.default.VIDEO:e.default.AUDIO,kt=x.getCurrentDVRInfo(It);return kt&&kt.range?kt.range.end:0}}function J(It){var kt=new Date(D.getClientReferenceTime()),Rt=P.getRegularPeriods()[0],sn=D.calcPresentationTimeFromWallTime(kt,Rt);A=sn-It}function Me(){return G&&_?_.getTime():null}function ae(){return G&&_?_.isPaused():null}function re(){return G&&_?_.isSeeking():null}function z(){return G&&_?_.isStalled():null}function te(){return G&&_?_.getPlaybackRate():null}function Z(){return G&&_?_.getEnded():null}function W(){return ee}function tt(){var It=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!ae()&&ee&&0!==_.getReadyState()&&!re()&&!pe){It||(It=N.hasVideoTrack()?e.default.VIDEO:e.default.AUDIO);var kt=Me(),Rt=Et(kt,It);!isNaN(Rt)&&Rt!==kt&&!re()&&(z()||ne||1===_.getReadyState())&&(k.debug("UpdateCurrentTime: Seek to actual time: ".concat(Rt," from currentTime: ").concat(kt)),He(Rt,!1,!1))}}function Et(It,kt){var Rt=x.getCurrentDVRInfo(kt),sn=Rt?Rt.range:null;return sn?It>sn.end?Math.max(sn.end-A,sn.start):It>0&&It+.25<sn.start&&Math.abs(It-sn.start)<31536e4?se?Math.max(sn.end-A,sn.start):sn.start:It:NaN}function Yt(){null===y&&(y=setInterval(function(){!function Xe(){v.trigger(R.default.WALLCLOCK_TIME_UPDATED,{isDynamic:ee,time:new Date}),W()&&(N.addDVRMetric(),ae()?function yt(){var It=Date.now();(!ue||It>ue+500)&&(ue=It,ot())}():tt())}()},xe.get().streaming.wallclockTimeUpdateInterval))}function vt(){clearInterval(y),y=null}function At(It){var kt=P.convertRepresentationToRepresentationInfo(It.currentRepresentation),Rt=kt?kt.mediaInfo.streamInfo:null;null===Rt||G.id!==Rt.id||(G=Rt)}function Dt(){v.trigger(R.default.CAN_PLAY)}function $t(){v.trigger(R.default.CAN_PLAY_THROUGH)}function Kt(It){It.streamId===N.getActiveStreamInfo().id&&(ne=It.state===b.default.BUFFER_EMPTY,xe.get().streaming.buffer.setStallState&&_.setStallState(It.mediaType,It.state===b.default.BUFFER_EMPTY))}function Xt(){k.info("Native video element event: play"),tt(),Yt(),v.trigger(R.default.PLAYBACK_STARTED,{startTime:Me()})}function ln(){k.info("Native video element event: waiting"),v.trigger(R.default.PLAYBACK_WAITING,{playingTime:Me()})}function Bn(){k.info("Native video element event: playing"),ce=!1,v.trigger(R.default.PLAYBACK_PLAYING,{playingTime:Me()})}function Rn(){k.info("Native video element event: pause"),v.trigger(R.default.PLAYBACK_PAUSED,{ended:Z()})}function jn(){if(!ce){var It=Me();!isNaN(H)&&H!==It&&(It=H),H=NaN,k.info("Seeking to: "+It),Yt(),v.trigger(R.default.PLAYBACK_SEEKING,{seekTime:It,streamId:G.id})}}function Vn(){k.info("Native video element event: seeked"),ce=!1,v.trigger(R.default.PLAYBACK_SEEKED)}function ot(){G&&v.trigger(R.default.PLAYBACK_TIME_UPDATED,{timeToEnd:Pe(),time:Me(),streamId:G.id})}function Qe(){v.trigger(R.default.PLAYBACK_PROGRESS,{streamId:G.id})}function mt(){var It=te();k.info("Native video element event: ratechange: ",It),v.trigger(R.default.PLAYBACK_RATE_CHANGED,{playbackRate:It})}function Lt(){k.info("Native video element event: loadedmetadata"),v.trigger(R.default.PLAYBACK_METADATA_LOADED),Yt()}function nn(){k.info("Native video element event: loadeddata"),v.trigger(R.default.PLAYBACK_LOADED_DATA)}function zt(){k.info("Native video element event: ended"),qe(),vt();var It=N?N.getActiveStreamInfo():null;!It||v.trigger(R.default.PLAYBACK_ENDED,{isLast:It.isLast})}function _t(){v.trigger(R.default.PLAYBACK_VOLUME_CHANGED)}function pt(It){if(y&&It.isLast){k.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended");var kt=It.seekTime?It.seekTime:ke();_.setCurrentTime(kt),qe(),vt()}}function rt(It){v.trigger(R.default.PLAYBACK_ERROR,{error:(It.target||It.srcElement).error})}function on(It){if(!1===It.stream&&se&&!isNaN(It.request.duration)){var kt=1.2*It.request.duration;kt>A&&(k.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",kt.toFixed(2)),A=kt,I=kt)}}function mn(It){v.trigger(R.default.PLAYBACK_STALLED,{e:It})}function Dn(It){!function ct(It){It&&It.supplementalProperties&&"true"===It.supplementalProperties[e.default.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME]&&(k.debug("Low Latency critical SupplementalProperty set: Enabling low Latency"),se=!0)}(It.mediaInfo)}function Zn(It){var kt=N.getActiveStreamInfo();!It||!kt||!It.currentRepresentation||!It.streamId||It.streamId!==kt.id||!It.mediaType||It.mediaType!==e.default.VIDEO&&It.mediaType!==e.default.AUDIO||(se=!It.currentRepresentation.availabilityTimeComplete)&&!me&&(me=!0)}function _r(){pe=!0}function Pr(){pe=!1}return T={initialize:function Ee(It,kt){G=It,!0!==kt&&function Ie(){(function qt(){_.addEventListener("canplay",Dt),_.addEventListener("canplaythrough",$t),_.addEventListener("play",Xt),_.addEventListener("waiting",ln),_.addEventListener("playing",Bn),_.addEventListener("pause",Rn),_.addEventListener("error",rt),_.addEventListener("seeking",jn),_.addEventListener("seeked",Vn),_.addEventListener("timeupdate",ot),_.addEventListener("progress",Qe),_.addEventListener("ratechange",mt),_.addEventListener("loadedmetadata",Lt),_.addEventListener("loadeddata",nn),_.addEventListener("stalled",mn),_.addEventListener("ended",zt),_.addEventListener("volumechange",_t)})(),ee=G.manifestInfo.isDynamic,ne=!1,ce=!1,v.on(R.default.DATA_UPDATE_COMPLETED,At,T),v.on(R.default.LOADING_PROGRESS,on,T),v.on(R.default.MANIFEST_UPDATED,_r,T),v.on(R.default.STREAMS_COMPOSED,Pr,T),v.on(L.default.PLAYBACK_ENDED,pt,T,{priority:S.default.EVENT_PRIORITY_HIGH}),v.on(L.default.STREAM_INITIALIZING,Dn,T),v.on(L.default.REPRESENTATION_SWITCH,Zn,T),v.on(L.default.BUFFER_LEVEL_STATE_CHANGED,Kt,T),de&&(de=!1,Be())}()},setConfig:function Ot(It){!It||(It.streamController&&(N=It.streamController),It.serviceDescriptionController&&(B=It.serviceDescriptionController),It.dashMetrics&&(x=It.dashMetrics),It.adapter&&(P=It.adapter),It.videoModel&&(_=It.videoModel),It.timelineConverter&&(D=It.timelineConverter),It.settings&&(xe=It.settings))},getTimeToStreamEnd:Pe,getBufferLevel:function Gt(){var It=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,kt=null;return N.getActiveStreamProcessors().forEach(function(Rt){if(!It||0===It.length||-1===It.indexOf(Rt.getType())){var sn=Rt.getBufferLevel();kt=null===kt?sn:Math.min(kt,sn)}}),kt},getPlaybackStalled:function Re(){return ne},getTime:Me,getLowLatencyModeEnabled:function Qt(){return se},getInitialCatchupModeActivated:function Jn(){return me},getIsManifestUpdateInProgress:function be(){return pe},getPlaybackRate:te,getPlayedRanges:function X(){return G&&_?_.getPlayedRanges():null},getEnded:Z,getIsDynamic:W,getStreamController:function oe(){return N},computeAndSetLiveDelay:function ut(It,kt){var Rt,sn,kn,Ct=!isNaN(It)&&isFinite(It)?It:NaN,Vt=P.getSuggestedPresentationDelay(),Jt=B.getServiceDescriptionSettings();return Rt=isNaN(xe.get().streaming.delay.liveDelay)?null===xe.get().streaming.delay.liveDelayFragmentCount||isNaN(xe.get().streaming.delay.liveDelayFragmentCount)||isNaN(Ct)?Jt&&!isNaN(Jt.liveDelay)&&Jt.liveDelay>0?Jt.liveDelay:!0===xe.get().streaming.delay.useSuggestedPresentationDelay&&null!==Vt&&!isNaN(Vt)&&Vt>0?Vt:isNaN(Ct)?kt&&!isNaN(kt.minBufferTime)?4*kt.minBufferTime:4*G.manifestInfo.minBufferTime:4*Ct:Ct*xe.get().streaming.delay.liveDelayFragmentCount:xe.get().streaming.delay.liveDelay,null!==(kn=P.getAvailabilityStartTime())&&(Te=kn),sn=kt&&kt.dvrWindowSize>0?Math.min(Rt,kt.dvrWindowSize):Rt,A=sn,I=sn,sn},getLiveDelay:function We(){return A},getOriginalLiveDelay:function at(){return I},getCurrentLiveLatency:function et(){if(!ee||isNaN(Te))return NaN;var It=Me();if(isNaN(It)||0===It)return 0;var kt=(new Date).getTime()+1e3*D.getClientTimeOffset();return Math.max(((kt-Te-1e3*It)/1e3).toFixed(3),0)},play:Be,isPaused:ae,isStalled:z,pause:qe,isSeeking:re,getStreamEndTime:ke,seek:He,seekToOriginalLive:function De(){var It=arguments.length>0&&void 0!==arguments[0]&&arguments[0],kt=arguments.length>1&&void 0!==arguments[1]&&arguments[1],Rt=arguments.length>2&&void 0!==arguments[2]&&arguments[2],sn=Y();0!==sn&&He(sn-(A=I),It,kt,Rt)},seekToCurrentLive:function he(){var It=arguments.length>0&&void 0!==arguments[0]&&arguments[0],kt=arguments.length>1&&void 0!==arguments[1]&&arguments[1],Rt=arguments.length>2&&void 0!==arguments[2]&&arguments[2],sn=Y();0!==sn&&He(sn-A,It,kt,Rt)},reset:Oe,updateCurrentTime:tt,getAvailabilityStartTime:function Fe(){return Te}},function ve(){k=Object(U.default)(g).getInstance().getLogger(T),Oe()}(),T}c.__dashjs_factory_name="PlaybackController",O.default=j.default.getSingletonFactory(c)},"./src/streaming/controllers/ScheduleController.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/constants/Constants.js"),S=r("./src/streaming/models/FragmentModel.js"),R=r("./src/core/EventBus.js"),j=r("./src/core/events/Events.js"),U=r("./src/core/FactoryMaker.js"),L=r("./src/core/Debug.js"),b=r("./src/streaming/constants/MetricsConstants.js"),f=r("./src/streaming/MediaPlayerEvents.js");function c(g){g=g||{};var I,G,ee,de,ue,Te,q,se,H,ce,ne,pe,me,v=this.context,T=Object(R.default)(v).getInstance(),k=g.dashMetrics,N=g.mediaPlayerModel,B=g.fragmentModel,x=g.abrController,P=g.playbackController,_=g.textController,D=g.type,y=g.bufferController,A=g.settings;function Re(Et){if(!y.getIsBufferingCompleted()){Pe();var Yt=isNaN(Et)?0:Et;Te=setTimeout(Be,Yt)}}function Pe(){Te&&(clearTimeout(Te),Te=null)}function Be(){try{if(function He(){try{return D===e.default.TEXT&&!_.isTextEnabled()||P.isPaused()&&(!P.getStreamController().getInitialPlayback()||!P.getStreamController().getAutoPlay())&&!A.get().streaming.scheduling.scheduleWhilePaused}catch(Et){return!1}}())return void Pe();if(function De(){try{return de&&(isNaN(ce)||ne||function ke(){var Yt=x.getMaxAllowedIndexFor(D,G.id);return!(!isNaN(H)&&H==Yt||(ee.info("Top quality "+D+" index has changed from "+H+" to "+Yt),H=Yt,0))}()||function he(){return!D||!de||k.getCurrentBufferLevel(D)<Y()}())}catch(Et){return!1}}()){var Et=!1;me&&(Et=x.checkPlaybackQuality(D,G.id)),Et||function qe(){pe||de.quality!==ce||ne?(ne?(ee.debug("Switch track for "+D+", representation id = "+de.id),ne=!1):ee.debug("Quality has changed, get init request for representationid = "+de.id),T.trigger(j.default.INIT_FRAGMENT_NEEDED,{representationId:de.id,sender:I},{streamId:G.id,mediaType:D}),me=!1,pe=!1):(ee.debug("Media segment needed for ".concat(D," and stream id ").concat(G.id)),T.trigger(j.default.MEDIA_FRAGMENT_NEEDED,{},{streamId:G.id,mediaType:D}),me=!0)}()}else Re(P.getLowLatencyModeEnabled()?A.get().streaming.scheduling.lowLatencyTimeout:A.get().streaming.scheduling.defaultTimeout)}catch(Yt){Re(P.getLowLatencyModeEnabled()?A.get().streaming.scheduling.lowLatencyTimeout:A.get().streaming.scheduling.defaultTimeout)}}function Y(){var Et=NaN;return!D||!de||(Et=D===e.default.TEXT?function J(){try{if(_.isTextEnabled()){if(isNaN(de.fragmentDuration)){var Et=k.getCurrentSchedulingInfo(b.default.SCHEDULING_INFO);return Et?Et.duration:0}return de.fragmentDuration}return 0}catch(Yt){return 0}}():D===e.default.AUDIO&&q?function Me(){try{var Et=k.getCurrentBufferLevel(e.default.VIDEO);return isNaN(de.fragmentDuration)?Et+1:Math.max(Et+1,de.fragmentDuration)}catch(Yt){return 0}}():function ae(){try{var Et=de.mediaInfo.streamInfo;return x.isPlayingAtTopQuality(Et)?Et.manifestInfo.duration>=A.get().streaming.buffer.longFormContentDurationThreshold?A.get().streaming.buffer.bufferTimeAtTopQualityLongForm:A.get().streaming.buffer.bufferTimeAtTopQuality:N.getStableBufferTime()}catch(vt){return N.getStableBufferTime()}}()),Et}function te(){X(!0)}function X(Et){if(P&&B){var Yt=B.getRequests({state:S.default.FRAGMENT_MODEL_EXECUTED,time:P.getTime(),threshold:0})[0];Yt&&P.getTime()>=Yt.startTime&&((!se.mediaInfo||Yt.mediaInfo.type===se.mediaInfo.type&&Yt.mediaInfo.id!==se.mediaInfo.id)&&Et&&T.trigger(j.default.TRACK_CHANGE_RENDERED,{mediaType:D,oldMediaInfo:se.mediaInfo,newMediaInfo:Yt.mediaInfo,streamId:G.id}),(Yt.quality!==se.quality||Yt.adaptationIndex!==se.adaptationIndex)&&Et&&(ee.debug("Quality change rendered for streamId ".concat(G.id," and type ").concat(D)),T.trigger(j.default.QUALITY_CHANGE_RENDERED,{mediaType:D,oldQuality:se.quality,newQuality:Yt.quality,streamId:G.id})),se={mediaInfo:Yt.mediaInfo,quality:Yt.quality,adaptationIndex:Yt.adaptationIndex})}}function Z(Et){ee.debug("Appended bytes for ".concat(Et.mediaType," and stream id ").concat(G.id)),(isNaN(Et.index)||isNaN(ce))&&(ce=Et.quality,ee.info("["+D+"] lastInitializedRepresentationInfo changed to "+Et.quality)),Re(0)}function W(){B.abortRequests(),Pe()}function oe(){A.get().streaming.scheduling.scheduleWhilePaused||Re()}function be(Et){k.updatePlayListTraceMetrics({playbackspeed:Et.playbackRate.toString()})}function ut(){me=!0,ue=0,ce=NaN,se={mediaInfo:void 0,quality:NaN,adaptationIndex:NaN},H=NaN,ne=!1,pe=!1}return I={initialize:function ve(Et){q=Et,T.on(j.default.BYTES_APPENDED_END_FRAGMENT,Z,I),T.on(j.default.URL_RESOLUTION_FAILED,W,I),T.on(f.default.PLAYBACK_STARTED,oe,I),T.on(f.default.PLAYBACK_RATE_CHANGED,be,I),T.on(f.default.PLAYBACK_TIME_UPDATED,te,I)},getType:function Oe(){return D},getStreamId:function Ee(){return G.id},setCurrentRepresentation:function Ie(Et){de=Et},setTimeToLoadDelay:function Fe(Et){ue=Et},getTimeToLoadDelay:function We(){return ue},setSwitchTrack:function re(Et){ne=Et},getSwitchStrack:function z(){return ne},startScheduleTimer:Re,clearScheduleTimer:Pe,reset:function Ot(){T.off(j.default.BYTES_APPENDED_END_FRAGMENT,Z,I),T.off(j.default.URL_RESOLUTION_FAILED,W,I),T.off(f.default.PLAYBACK_STARTED,oe,I),T.off(f.default.PLAYBACK_RATE_CHANGED,be,I),T.off(f.default.PLAYBACK_TIME_UPDATED,te,I),Pe(),X(!1),ut(),G=null},getBufferTarget:Y,getPlaybackController:function tt(){return P},setCheckPlaybackQuality:function at(Et){me=Et},setInitSegmentRequired:function et(Et){pe=Et}},function xe(){ee=Object(L.default)(v).getInstance().getLogger(I),ut(),G=g.streamInfo}(),I}c.__dashjs_factory_name="ScheduleController",O.default=U.default.getClassFactory(c)},"./src/streaming/controllers/StreamController.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/constants/Constants.js"),S=r("./src/streaming/constants/MetricsConstants.js"),R=r("./src/streaming/Stream.js"),j=r("./src/streaming/ManifestUpdater.js"),U=r("./src/core/EventBus.js"),L=r("./src/core/events/Events.js"),b=r("./src/core/FactoryMaker.js"),f=r("./src/streaming/vo/metrics/PlayList.js"),c=r("./src/core/Debug.js"),g=r("./src/streaming/utils/InitCache.js"),v=r("./src/streaming/utils/URLUtils.js"),T=r("./src/streaming/MediaPlayerEvents.js"),k=r("./src/streaming/controllers/TimeSyncController.js"),N=r("./src/streaming/controllers/MediaSourceController.js"),B=r("./src/streaming/vo/DashJSError.js"),x=r("./src/core/errors/Errors.js"),P=r("./src/streaming/controllers/EventController.js"),_=r("./src/streaming/constants/ConformanceViolationConstants.js");function D(q){return function G(q){if(Array.isArray(q))return ee(q)}(q)||function I(q){if("undefined"!=typeof Symbol&&null!=q[Symbol.iterator]||null!=q["@@iterator"])return Array.from(q)}(q)||function A(q,se){if(q){if("string"==typeof q)return ee(q,se);var H=Object.prototype.toString.call(q).slice(8,-1);if("Object"===H&&q.constructor&&(H=q.constructor.name),"Map"===H||"Set"===H)return Array.from(q);if("Arguments"===H||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(H))return ee(q,se)}}(q)||function y(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(q,se){(null==se||se>q.length)&&(se=q.length);for(var H=0,ce=new Array(se);H<se;H++)ce[H]=q[H];return ce}function Te(){var H,ce,ne,pe,me,xe,ve,Oe,Ee,Ie,Re,Pe,ke,Be,qe,He,De,he,Y,J,Me,ae,re,z,te,X,Z,W,oe,be,Fe,We,at,et,ut,Ot,tt,Et,Yt,vt,At,Dt,$t,Kt,Xt,ln,Bn,Rn,jn,q=this.context,se=Object(U.default)(q).getInstance();function Lt(){if(!(xe&&xe.hasOwnProperty("load")&&ae&&ae.hasOwnProperty("initialize")&&ae.hasOwnProperty("reset")&&ae.hasOwnProperty("getClientTimeOffset")&&ve&&Me&&Ee&&et))throw new Error(e.default.MISSING_CONFIG_ERROR)}function nn(){if(!me||!me.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")}function pt(){!function Xe(){try{var Nt=Oe.getStreamsInfo();if(!z&&0===Nt.length)throw new Error("There are no periods in the MPD");z&&Nt.length>0&&Ee.updateManifestUpdateInfo({currentTime:et.getTime(),buffered:at.getBufferRange(),presentationStartTime:Nt[0].start,clientTimeOffset:ae.getClientTimeOffset()}),re.length>0&&function si(Nt){0!==Nt.length?re=re.filter(function(an){var tr=Nt.filter(function(lr){return lr.id===an.getId()}).length>0||an.getId()===z.getId();return tr||(ce.debug("Removing stream ".concat(an.getId())),an.reset(!0)),tr}):ce.warn("No periods included in the current manifest. Skipping the filtering of outdated stream objects.")}(Nt);for(var an=[],In=0,tr=Nt.length;In<tr;In++){var lr=Nt[In];an.push(yt(lr)),Ee.addManifestUpdateStreamInfo(lr)}Promise.all(an).then(function(){return Xt.get().streaming.applyContentSteering&&!z&&Pe.shouldQueryBeforeStart()?Pe.loadSteeringData():Promise.resolve()}).then(function(){z||Gt(Nt),se.trigger(L.default.STREAMS_COMPOSED),Jt()}).catch(function(Bt){throw Bt})}catch(Bt){Me.error(new B.default(x.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,Bt.message+" nostreamscomposed",ve.getValue())),Fe=!0,rr()}}()}function rt(){ln=!0}function yt(Nt){var an=Wr(Nt.id);return an?an.updateData(Nt):(an=Object(R.default)(q).create({manifestModel:ve,mediaPlayerModel:Ot,dashMetrics:Ee,manifestUpdater:me,adapter:Oe,timelineConverter:ae,capabilities:ne,capabilitiesFilter:pe,errHandler:Me,baseURLController:ke,segmentBaseController:Be,textController:X,abrController:He,playbackController:et,eventController:he,mediaController:De,protectionController:te,videoModel:at,streamInfo:Nt,settings:Xt}),re.push(an),an.initialize(),Promise.resolve())}function Gt(Nt){kt();var an=Ee.getCurrentDVRInfo().range;if(an.end<an.start){Bn&&clearTimeout(Bn);var In=Math.min(1e3*(-1*(an.end-an.start)+2),2147483647);return ce.debug("Waiting for ".concat(In," ms before playback can start")),se.trigger(L.default.AST_IN_FUTURE,{delay:In}),void(Bn=setTimeout(function(){Gt(Nt)},In))}Xt.get().streaming.applyProducerReferenceTime&&ut.calculateProducerReferenceTimeOffsets(Nt);var tr=Nt[0].manifestInfo;if(Xt.get().streaming.applyServiceDescription&&ut.applyServiceDescription(tr),Oe.getIsDynamic()){var lr=Zi(Nt,tr);et.computeAndSetLiveDelay(lr,tr)}var Bt=function Tr(){var Nt;if(Oe.getIsDynamic()){var In=Ee.getCurrentDVRInfo();Nt=(In&&In.range?In.range.end:0)-et.getOriginalLiveDelay();var lr=In?In.range:null;if(lr){if(isNaN(Rn)&&-1===Rn.toString().indexOf("posix:")){var Or=Oi(!0);isNaN(Or)||(ce.info("Start time from URI parameters: ".concat(Or)),Nt=Math.min(Nt,Or))}else{ce.info("Start time provided by the app: ".concat(Rn));var Bt=Mi(!0,Rn);isNaN(Bt)||(Nt=Math.min(Nt,Bt))}var Ur=Xt.get().streaming.timeShiftBuffer.calcFromSegmentTimeline?.1:0;Nt=Math.max(Nt,lr.start+Ur)}}else if(Nt=Pi()[0].getStreamInfo().start,isNaN(Rn)){var so=Oi(!1);isNaN(so)||(ce.info("Start time from URI parameters: ".concat(so)),Nt=Math.max(Nt,so))}else{ce.info("Start time provided by the app: ".concat(Rn));var Vi=Mi(!1,Rn);isNaN(Vi)||(Nt=Math.max(Nt,Vi))}return Nt}(),Or=It(Bt),Ur=null!==Or?Or:re[0];se.trigger(L.default.INITIAL_STREAM_SWITCH,{startTime:Bt}),Qt(Ur,null,Bt),function bn(){At||(At=setInterval(function(){!oe&&et.getTimeToStreamEnd()<=0&&!et.isSeeking()&&se.trigger(L.default.PLAYBACK_ENDED,{isLast:ji().isLast})},200))}()}function Qt(Nt,an,In){try{if(oe||!Nt||an===Nt&&Nt.getIsActive())return;oe=!0,se.trigger(L.default.PERIOD_SWITCH_STARTED,{fromStreamInfo:an?an.getStreamInfo():null,toStreamInfo:Nt.getStreamInfo()});var tr=!1;z=Nt,an&&(tr=qt(Nt,an),an.deactivate(tr)),In=isNaN(In)?!tr&&an?Nt.getStreamInfo().start:NaN:In,ce.info("Switch to stream ".concat(Nt.getId(),". Seektime is ").concat(In,", current playback time is ").concat(et.getTime(),". Seamless period switch is set to ").concat(tr)),$t=$t.filter(function(lr){return lr.getId()!==z.getId()}),et.initialize(ji(),!!an),at.getElement()&&on(In,tr)}catch(lr){oe=!1}}function on(Nt,an){var In;function tr(){if(We&&"open"===We.readyState){ce.debug("MediaSource is open!"),window.URL.revokeObjectURL(In),We.removeEventListener("sourceopen",tr),We.removeEventListener("webkitsourceopen",tr),pr();var Bt=Ee.getCurrentDVRInfo();Ie.setSeekable(Bt.range.start,Bt.range.end),mn(Nt,an)}}function lr(){We.addEventListener("sourceopen",tr,!1),We.addEventListener("webkitsourceopen",tr,!1),In=Ie.attachMediaSource(at),ce.debug("MediaSource attached to element.  Waiting on open...")}We?an?mn(Nt,an):(Ie.detachMediaSource(at),lr()):(We=Ie.createMediaSource(),lr())}function mn(Nt,an){z.activate(We,an?Dt:void 0,Nt).then(function(In){if(In){var tr=Object.keys(In);tr.length>0&&In[tr[0]].getBuffer().changeType&&(Kt=!0),Dt=In}isNaN(Nt)||(se.trigger(L.default.SEEK_TARGET,{time:Nt},{streamId:z.getId()}),et.seek(Nt,!1,!0),z.startScheduleControllers()),oe=!1,se.trigger(L.default.PERIOD_SWITCH_COMPLETED,{toStreamInfo:ji()})})}function Dn(Nt){var In=It(Nt.seekTime);In&&In!==z?In&&In!==z&&(Zn(),function Pr(Nt,an){var In=Nt&&!isNaN(Nt.seekTime)?Nt.seekTime:NaN,lr=z.getProcessors().map(function(Bt){return Bt.prepareOuterPeriodPlaybackSeeking(Nt)});Promise.all(lr).then(function(){Qt(an,z,In)}).catch(function(Bt){Me.error(Bt)})}(Nt,In)):(Zn(),function _r(Nt){z.getProcessors().forEach(function(In){return In.prepareInnerPeriodPlaybackSeeking(Nt)}),Bi(f.PlayListTrace.USER_REQUEST_STOP_REASON)}(Nt)),vo(f.PlayList.SEEK_START_REASON)}function Zn(){Jn()}function Jn(){$t&&$t.length>0&&($t.forEach(function(Nt){Nt.deactivate(!0)}),$t=[])}function ct(Nt){Nt.newMediaInfo.streamInfo.id===z.getId()&&(Jn(),z.prepareTrackChange(Nt))}function qt(Nt,an){try{return Xt.get().streaming.buffer.reuseExistingSourceBuffers&&(an.isProtectionCompatible(Nt)||ln)&&(Kt||an.isMediaCodecCompatible(Nt,an))}catch(In){return!1}}function fn(Nt){var an=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;We&&!Nt.getPreloaded()&&qt(Nt,an)&&Nt.startPreloading(We,Dt).then(function(){$t.push(Nt)})}function It(Nt){if(isNaN(Nt))return null;for(var an=re.length,In=0;In<an;In++){var tr=re[In];if(Nt<parseFloat((tr.getStartTime()+tr.getDuration()).toFixed(5)))return tr}return null}function kt(){try{var Nt=Oe.getIsDynamic(),In=Oe.getStreamsInfo()[0].manifestInfo,tr=et.getTime(),lr=ae.calcTimeShiftBufferWindow(re,Nt),Bt=yn();if(void 0===lr.start||void 0===lr.end)return;Bt&&0!==Bt.length?Bt.forEach(function(Or){Ee.addDVRInfo(Or.getType(),tr,In,lr)}):Ee.addDVRInfo(e.default.VIDEO,tr,In,lr)}catch(Or){}}function Rt(Nt){if(Yt&&W){var an=Ot.getInitialBufferLevel(),In=[e.default.TEXT];(isNaN(an)||an<=et.getBufferLevel(In)||Oe.getIsDynamic()&&an>et.getLiveDelay())&&(Yt=!1,vo(f.PlayList.INITIAL_PLAYOUT_START_REASON),et.play())}Nt&&Nt.mediaType&&Ee.addBufferLevel(Nt.mediaType,new Date,1e3*Nt.bufferLevel)}function sn(Nt){Nt.streamInfo.id===z.getId()&&Nt.reason&&Nt.reason.forceReplace&&Jn(),Wr(Nt.streamInfo.id).prepareQualityChange(Nt)}function kn(){if(Oe.getIsDynamic()&&0!==et.getOriginalLiveDelay()&&z){var Nt=Oe.getStreamsInfo();if(Nt.length>0){var an=Nt[0].manifestInfo,In=Zi(Nt,an);et.computeAndSetLiveDelay(In,an)}}}function wn(){if(Si()){var Nt=at.getPlaybackQuality();Nt&&Ee.addDroppedFrames(Nt)}}function xt(){ce.debug("[onPlaybackStarted]"),!Yt&&Et&&vo(f.PlayList.RESUME_FROM_PAUSE_START_REASON),Yt&&(Yt=!1),vt&&(vt=!1,Xt.get().streaming.applyContentSteering&&!Pe.shouldQueryBeforeStart()&&Pe.loadSteeringData()),Et=!1}function Ct(Nt){ce.debug("[onPlaybackPaused]"),Nt.ended||(Et=!0,Bi(f.PlayListTrace.USER_REQUEST_STOP_REASON))}function Vt(Nt){ce.debug("Stream with id ".concat(Nt.streamInfo.id," finished buffering")),We&&Nt.streamInfo.isLast?(ce.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),Ie.signalEndOfStream(We)):Jt()}function Jt(){if(z&&z.getHasFinishedBuffering())for(var Nt=function dr(){var Nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{var an=Nt||z||null;if(an){var In=an.getStreamInfo();return re.filter(function(tr){var lr=tr.getStreamInfo();return lr.start>In.start&&In.id!==lr.id})}}catch(tr){return[]}}(z),an=0;an<Nt.length;){var In=Nt[an],tr=0===an?z:Nt[an-1];!In.getPreloaded()&&tr.getHasFinishedBuffering()&&We&&fn(In,tr),an+=1}}function Ln(){At&&(clearInterval(At),At=null)}function yn(){return z?z.getProcessors():[]}function Nn(Nt){if(z&&!z.getIsEndedEventSignaled()){z.setIsEndedEventSignaled(!0);var an=function $n(){var an=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||z||null;if(!an)return null;for(var In=an.getStreamInfo(),tr=In.start,lr=0,Bt=-1,Or=NaN;lr<re.length;){var fr=re[lr].getStreamInfo(),pi=fr.start-tr;pi>0&&(isNaN(Or)||pi<Or)&&In.id!==fr.id&&(Or=pi,Bt=lr),lr+=1}return Bt>=0?re[Bt]:null}();an?(ce.debug("StreamController onEnded, found next stream with id ".concat(an.getStreamInfo().id,". Switching from ").concat(z.getStreamInfo().id," to ").concat(an.getStreamInfo().id)),Qt(an,z,NaN)):(ce.debug("StreamController no next stream found"),z.setIsEndedEventSignaled(!1)),Bi(an?f.PlayListTrace.END_OF_PERIOD_STOP_REASON:f.PlayListTrace.END_OF_CONTENT_STOP_REASON)}Nt&&Nt.isLast&&(Ln(),Pe.stopSteeringRequestTimer())}function pr(Nt){var an=Nt||ji().manifestInfo.duration;Ie.setDuration(an)}function Oi(Nt){var an=qe.getURIFragmentData();if(!an||!an.t)return NaN;var tr=Pi()[0].getStreamInfo().start;return an.t=an.t.split(",")[0],oi(Nt,an.t,tr)}function Mi(Nt,an){var In=0;return Nt||(In=Pi()[0].getStreamInfo().start),oi(Nt,an,In)}function oi(Nt,an,In){var tr=Oe.getRegularPeriods()[0],lr=an.toString(),Bt=-1!==lr.indexOf("posix:")?"now"===lr.substring(6)?Date.now()/1e3:parseFloat(lr.substring(6)):NaN;return Nt&&!isNaN(Bt)?ae.calcPresentationTimeFromWallTime(new Date(1e3*Bt),tr):parseFloat(lr)+In}function Zi(Nt,an){try{var In=NaN;if(an&&!isNaN(an.maxFragmentDuration)&&isFinite(an.maxFragmentDuration))return an.maxFragmentDuration;if(Nt&&1===Nt.length){var tr=Nt[0],Bt=[e.default.VIDEO,e.default.AUDIO,e.default.TEXT].reduce(function(Or,Ur){var fr=Oe.getMediaInfoForType(tr,Ur);return fr&&!1!==fr.isFragmented&&Or.push(fr),Or},[]).reduce(function(Or,Ur){var fr=Oe.getVoRepresentations(Ur);return fr&&fr.length>0&&fr.forEach(function(pi){pi&&Or.push(pi)}),Or},[]).reduce(function(Or,Ur){var fr=Oe.convertRepresentationToRepresentationInfo(Ur);return fr&&fr.fragmentDuration&&!isNaN(fr.fragmentDuration)&&Or.push(fr.fragmentDuration),Or},[]);In=Math.max.apply(Math,D(Bt))}return isFinite(In)?In:NaN}catch(Or){return NaN}}function ci(Nt){if(Nt.error)Fe=!0,rr();else{ce.info("Manifest updated... updating data system wide.");var an=Nt.manifest;Oe.updatePeriods(an);var In=Oe.getUTCTimingSources();Oe.getIsDynamic()&&(!In||0===In.length)&&se.trigger(T.default.CONFORMANCE_VIOLATION,{level:_.default.LEVELS.WARNING,event:_.default.EVENTS.NO_UTC_TIMING_ELEMENT});var tr=Oe.getIsDynamic()?In.concat(tt.getUTCTimingSources()):In,lr=J.isHTTPS(Nt.manifest.url);tr.forEach(function(Bt){Bt.value.replace(/.*?:\/\//g,"")===Xt.get().streaming.utcSynchronization.defaultTimingSource.value.replace(/.*?:\/\//g,"")&&(Bt.value=Bt.value.replace(lr?new RegExp(/^(http:)?\/\//i):new RegExp(/^(https:)?\/\//i),lr?"https://":"http://"),ce.debug("Matching default timing source protocol to manifest protocol: ",Bt.value))}),pe.filterUnsupportedFeatures(an).then(function(){ke.initialize(an),Re.attemptSync(tr,Oe.getIsDynamic())})}}function Si(){return!!z&&z.getHasVideoTrack()}function Ar(){return!!z&&z.getHasAudioTrack()}function Bi(Nt,an){an=an||new Date,yn().forEach(function(In){In.finalisePlayList(an,Nt)}),Ee.addPlayList()}function vo(Nt){Ee.createPlaylistMetrics(1e3*et.getTime(),Nt)}function Ui(Nt){if(Nt.error){var an="";switch(Nt.error.code){case 1:an="MEDIA_ERR_ABORTED";break;case 2:an="MEDIA_ERR_NETWORK";break;case 3:an="MEDIA_ERR_DECODE",jn.counts.mediaErrorDecode+=1;break;case 4:an="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:an="MEDIA_ERR_ENCRYPTED";break;default:an="UNKNOWN"}if("MEDIA_ERR_DECODE"===an&&Xt.get().errors.recoverAttempts.mediaErrorDecode>=jn.counts.mediaErrorDecode)return void function Mo(){ce.warn("A MEDIA_ERR_DECODE occured: Resetting the MediaSource");var Nt=et.getTime();z.deactivate(!1),ce.warn("MediaSource has been resetted. Resuming playback from time ".concat(Nt)),on(Nt,!1)}();be=!0,Nt.error.message&&(an+=" ("+Nt.error.message+")"),Nt.error.msExtendedCode&&(an+=" (0x"+(Nt.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),ce.fatal("Video Element Error: "+an),Nt.error&&ce.fatal(Nt.error),Me.error(new B.default(Nt.error.code,an)),rr()}}function ji(){return z?z.getStreamInfo():null}function Wr(Nt){for(var an=0,In=re.length;an<In;an++)if(re[an].getId()===Nt)return re[an];return null}function Po(Nt){isNaN(Nt.newDuration)||pr(Nt.newDuration)}function it(){re=[],Rn=NaN,te=null,oe=!1,z=null,be=!1,Fe=!1,Yt=!0,vt=!0,Et=!1,W=!0,At=null,ln=!1,Kt=!1,$t=[],Bn=null,jn={counts:{mediaErrorDecode:0}}}function rr(){Lt(),Re.reset(),Bi(be||Fe?f.PlayListTrace.FAILURE_STOP_REASON:f.PlayListTrace.USER_REQUEST_STOP_REASON);for(var Nt=0,an=re?re.length:0;Nt<an;Nt++)re[Nt].reset(be);(function mt(){se.off(T.default.PLAYBACK_TIME_UPDATED,wn,H),se.off(T.default.PLAYBACK_SEEKING,Dn,H),se.off(T.default.PLAYBACK_ERROR,Ui,H),se.off(T.default.PLAYBACK_STARTED,xt,H),se.off(T.default.PLAYBACK_PAUSED,Ct,H),se.off(T.default.PLAYBACK_ENDED,Nn,H),se.off(T.default.METRIC_ADDED,hn,H),se.off(T.default.MANIFEST_VALIDITY_CHANGED,Po,H),se.off(T.default.BUFFER_LEVEL_UPDATED,Rt,H),se.off(T.default.QUALITY_CHANGE_REQUESTED,sn,H),L.default.KEY_SESSION_UPDATED&&se.off(L.default.KEY_SESSION_UPDATED,rt,H),se.off(L.default.MANIFEST_UPDATED,ci,H),se.off(L.default.STREAM_BUFFERING_COMPLETED,Vt,H),se.off(L.default.TIME_SYNCHRONIZATION_COMPLETED,pt,H),se.off(L.default.CURRENT_TRACK_CHANGED,ct,H),se.off(L.default.SETTING_UPDATED_LIVE_DELAY,kn,H),se.off(L.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,kn,H)})(),ke.reset(),me.reset(),he.reset(),Ee.clearAllCurrentMetrics(),ve.setValue(null),xe.reset(),ae.reset(),Y.reset(),We&&(Ie.detachMediaSource(at),We=null),at=null,te&&(te=null,Z=null,ve.getValue()&&se.trigger(L.default.PROTECTION_DESTROYED,{data:ve.getValue().url})),Ln(),se.trigger(L.default.STREAM_TEARDOWN_COMPLETE),it()}function hn(Nt){if(Nt.metric===S.default.DVR_INFO){var an=Ar()?e.default.AUDIO:e.default.VIDEO;Nt.mediaType===an&&Ie.setSeekable(Nt.value.range.start,Nt.value.range.end)}}function Pi(){return re}return H={initialize:function ot(Nt,an){Lt(),W=Nt,Z=an,ae.initialize(),(me=Object(j.default)(q).create()).setConfig({manifestModel:ve,adapter:Oe,manifestLoader:xe,errHandler:Me,settings:Xt}),me.initialize(),(he=Object(P.default)(q).getInstance()).setConfig({manifestUpdater:me,playbackController:et,settings:Xt}),he.start(),Re.setConfig({dashMetrics:Ee,baseURLController:ke,errHandler:Me,settings:Xt}),Re.initialize(),te&&(se.trigger(L.default.PROTECTION_CREATED,{controller:te}),te.setMediaElement(at.getElement()),Z&&te.setProtectionData(Z)),function Qe(){se.on(T.default.PLAYBACK_TIME_UPDATED,wn,H),se.on(T.default.PLAYBACK_SEEKING,Dn,H),se.on(T.default.PLAYBACK_ERROR,Ui,H),se.on(T.default.PLAYBACK_STARTED,xt,H),se.on(T.default.PLAYBACK_PAUSED,Ct,H),se.on(T.default.PLAYBACK_ENDED,Nn,H),se.on(T.default.METRIC_ADDED,hn,H),se.on(T.default.MANIFEST_VALIDITY_CHANGED,Po,H),se.on(T.default.BUFFER_LEVEL_UPDATED,Rt,H),se.on(T.default.QUALITY_CHANGE_REQUESTED,sn,H),L.default.KEY_SESSION_UPDATED&&se.on(L.default.KEY_SESSION_UPDATED,rt,H),se.on(L.default.MANIFEST_UPDATED,ci,H),se.on(L.default.STREAM_BUFFERING_COMPLETED,Vt,H),se.on(L.default.TIME_SYNCHRONIZATION_COMPLETED,pt,H),se.on(L.default.CURRENT_TRACK_CHANGED,ct,H),se.on(L.default.SETTING_UPDATED_LIVE_DELAY,kn,H),se.on(L.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,kn,H)}()},getActiveStreamInfo:ji,addDVRMetric:kt,hasVideoTrack:Si,hasAudioTrack:Ar,getStreamById:Wr,getStreamForTime:It,getTimeRelativeToStreamId:function Pt(Nt,an){for(var In=null,tr=0,lr=0,Bt=null,Or=0;Or<re.length;Or++){if(lr=(In=re[Or]).getStartTime(),Bt=In.getDuration(),Number.isFinite(lr)&&(tr=lr),In.getId()===an)return Nt-tr;Number.isFinite(Bt)&&(tr+=Bt)}return null},load:function zt(Nt){var an=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN;Lt(),Rn=an,xe.load(Nt)},loadWithManifest:function _t(Nt){var an=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN;nn(),Rn=an,me.setManifest(Nt)},getActiveStreamProcessors:yn,setConfig:function ko(Nt){!Nt||(Nt.capabilities&&(ne=Nt.capabilities),Nt.capabilitiesFilter&&(pe=Nt.capabilitiesFilter),Nt.manifestLoader&&(xe=Nt.manifestLoader),Nt.manifestModel&&(ve=Nt.manifestModel),Nt.mediaPlayerModel&&(Ot=Nt.mediaPlayerModel),Nt.customParametersModel&&(tt=Nt.customParametersModel),Nt.protectionController&&(te=Nt.protectionController),Nt.adapter&&(Oe=Nt.adapter),Nt.dashMetrics&&(Ee=Nt.dashMetrics),Nt.errHandler&&(Me=Nt.errHandler),Nt.timelineConverter&&(ae=Nt.timelineConverter),Nt.videoModel&&(at=Nt.videoModel),Nt.playbackController&&(et=Nt.playbackController),Nt.serviceDescriptionController&&(ut=Nt.serviceDescriptionController),Nt.contentSteeringController&&(Pe=Nt.contentSteeringController),Nt.textController&&(X=Nt.textController),Nt.abrController&&(He=Nt.abrController),Nt.mediaController&&(De=Nt.mediaController),Nt.settings&&(Xt=Nt.settings),Nt.baseURLController&&(ke=Nt.baseURLController),Nt.uriFragmentModel&&(qe=Nt.uriFragmentModel),Nt.segmentBaseController&&(Be=Nt.segmentBaseController))},setProtectionData:function ir(Nt){Z=Nt,te&&te.setProtectionData(Z)},getIsStreamSwitchInProgress:function _i(){return oe},switchToVideoElement:function eo(Nt){z&&(et.initialize(ji()),on(Nt,!1))},getHasMediaOrInitialisationError:function Ko(){return be||Fe},getStreams:Pi,getActiveStream:function Cr(){return z},getInitialPlayback:function Sr(){return Yt},getAutoPlay:function Yr(){return W},reset:rr},function Vn(){ce=Object(c.default)(q).getInstance().getLogger(H),Re=Object(k.default)(q).getInstance(),Ie=Object(N.default)(q).getInstance(),Y=Object(g.default)(q).getInstance(),J=Object(v.default)(q).getInstance(),it()}(),H}Te.__dashjs_factory_name="StreamController",O.default=b.default.getSingletonFactory(Te)},"./src/streaming/controllers/TimeSyncController.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/vo/DashJSError.js"),S=r("./src/streaming/vo/metrics/HTTPRequest.js"),R=r("./src/core/EventBus.js"),j=r("./src/core/events/Events.js"),U=r("./src/core/errors/Errors.js"),L=r("./src/core/FactoryMaker.js"),b=r("./src/core/Debug.js"),f=r("./src/streaming/utils/URLUtils.js");function P(){var I,G,ee,de,ue,Te,q,se,H,ce,ne,pe,me,xe,ve,Oe,D=this.context,y=Object(R.default)(D).getInstance(),A=Object(f.default)(D).getInstance();function Re(){se=[],H=[],ce=null,ne=null,me=null,pe=NaN,ee=!1,de=!1,xe=ue.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function Be(){!ue.get().streaming.utcSynchronization.enabled||ee||de||!me||!me.value||!me.schemeIdUri||isNaN(pe)||isNaN(ue.get().streaming.utcSynchronization.backgroundAttempts)||ne&&(Date.now()-ne)/1e3<30||(se=[],de=!0,qe(isNaN(ue.get().streaming.utcSynchronization.backgroundAttempts)?2:ue.get().streaming.utcSynchronization.backgroundAttempts))}function qe(et){try{if(et<=0)return void Fe();var ut=Date.now();Te[me.schemeIdUri](me.value,function(Ot){var tt=Date.now(),Et=De(ut,tt,Ot);se.push(Et),qe(et-1)},function(){Fe()})}catch(Ot){Fe()}}function He(){var ut=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||0;if(!H||0===H.length||ut>=H.length)Y();else{var Ot=H[ut];if(Ot)if(Te.hasOwnProperty(Ot.schemeIdUri)){var tt=(new Date).getTime();Te[Ot.schemeIdUri](Ot.value,function(Et){var Yt=(new Date).getTime(),vt=De(tt,Yt,Et);me=Ot,Y(vt)},function(){He(ut+1)})}else He(ut+1);else Y()}}function De(et,ut,Ot){return Ot-(ut-(ut-et)/2)}function Y(){var et=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NaN,ut=isNaN(et);ut&&ue.get().streaming.utcSynchronization.useManifestDateHeaderTimeSource?W():oe(ut,et)}function Me(et){var ut=Date.parse(et);return isNaN(ut)&&(ut=function J(et){var Yt,vt,At=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(et);return Yt=Date.UTC(parseInt(At[1],10),parseInt(At[2],10)-1,parseInt(At[3],10),parseInt(At[4],10),parseInt(At[5],10),At[6]&&(parseInt(At[6],10)||0),At[7]&&1e3*parseFloat(At[7])||0),At[9]&&At[10]&&(vt=60*parseInt(At[9],10)+parseInt(At[10],10),Yt+=("+"===At[8]?-1:1)*vt*60*1e3),new Date(Yt).getTime()}(et)),ut}function ae(et){return Date.parse(et)}function re(et){return Date.parse(et)}function z(et,ut,Ot){Ot()}function te(et,ut,Ot){var tt=Me(et);isNaN(tt)?Ot():ut(tt)}function X(et,ut,Ot,tt,Et){var Yt,vt,At=!1,Dt=new XMLHttpRequest,$t=Et?S.HTTPRequest.HEAD:S.HTTPRequest.GET,Kt=ut.match(/\S+/g);if(ut=Kt.shift(),Yt=function(){At||(At=!0,Kt.length?X(et,Kt.join(" "),Ot,tt,Et):tt())},vt=function(){var Bn,Rn;200===Dt.status&&(Bn=Et?Dt.getResponseHeader("Date"):Dt.response,Rn=et(Bn),isNaN(Rn)||(Ot(Rn),At=!0))},A.isRelative(ut)){var Xt=Oe.resolve();Xt&&(ut=A.resolve(ut,Xt.url))}Dt.open($t,ut),Dt.timeout=5e3,Dt.onload=vt,Dt.onloadend=Yt,Dt.send()}function Z(et,ut,Ot){X(re,et,ut,Ot,!0)}function W(){var et=q.getLatestMPDRequestHeaderValueByID("Date"),ut=null!==et?new Date(et).getTime():Number.NaN;isNaN(ut)?oe(!0):oe(!1,ut-Date.now())}function oe(et,ut){if(!isNaN(pe)&&!isNaN(ut)&&!et&&function be(et){try{var vt,ut=We(et),Ot=isNaN(xe)?30:xe,tt=isNaN(ue.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?2:ue.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,Et=isNaN(ue.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?600:ue.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,Yt=isNaN(ue.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?2:ue.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts;ut?(vt=Math.min(Ot*tt,Et),G.debug("Increasing timeBetweenSyncAttempts to ".concat(vt))):(vt=Math.max(Ot/tt,Yt),G.debug("Decreasing timeBetweenSyncAttempts to ".concat(vt))),xe=vt}catch(At){}}(ut),!et&&!isNaN(ut)){ce=Date.now(),ee=!1;var Ot=isNaN(pe);pe=ut,Ot&&Be(),G.debug("Completed UTC sync. Setting client - server offset to ".concat(ut))}et&&(me=null,ee=!1,ve.error(new e.default(U.default.TIME_SYNC_FAILED_ERROR_CODE,U.default.TIME_SYNC_FAILED_ERROR_MESSAGE))),y.trigger(j.default.UPDATE_TIME_SYNC_OFFSET,{offset:ut}),y.trigger(j.default.TIME_SYNCHRONIZATION_COMPLETED)}function Fe(){if(se&&0!==se.length){var et=se.reduce(function(ut,Ot){return ut+Ot},0)/se.length;We(et)?G.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(G.debug("Completed background UTC sync. Setting client - server offset to ".concat(et)),y.trigger(j.default.UPDATE_TIME_SYNC_OFFSET,{offset:pe=et})),de=!1,ne=Date.now()}}function We(et){try{if(isNaN(pe))return!0;var ut=ue.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(ue.get().streaming.utcSynchronization.maximumAllowedDrift)?ue.get().streaming.utcSynchronization.maximumAllowedDrift:100;return et>=pe-ut&&et<=pe+ut}catch(Et){return!0}}return I={initialize:function Pe(){Re(),Te={"urn:mpeg:dash:utc:http-head:2014":Z,"urn:mpeg:dash:utc:http-xsdate:2014":X.bind(null,Me),"urn:mpeg:dash:utc:http-iso:2014":X.bind(null,ae),"urn:mpeg:dash:utc:direct:2014":te,"urn:mpeg:dash:utc:http-head:2012":Z,"urn:mpeg:dash:utc:http-xsdate:2012":X.bind(null,Me),"urn:mpeg:dash:utc:http-iso:2012":X.bind(null,ae),"urn:mpeg:dash:utc:direct:2012":te,"urn:mpeg:dash:utc:http-ntp:2014":z,"urn:mpeg:dash:utc:ntp:2014":z,"urn:mpeg:dash:utc:sntp:2014":z}},attemptSync:function ke(et,ut){if(H=et,!ee){if(!function he(et){try{if(!et||!ue.get().streaming.utcSynchronization.enabled)return!1;var ut=isNaN(xe)?30:xe;return!(ce&&ut&&!isNaN(ut))||(Date.now()-ce)/1e3>=ut}catch(Ot){return!0}}(ut))return void y.trigger(j.default.TIME_SYNCHRONIZATION_COMPLETED);ee=!0,He()}},setConfig:function Ie(et){!et||(et.dashMetrics&&(q=et.dashMetrics),et.baseURLController&&(Oe=et.baseURLController),et.errHandler&&(ve=et.errHandler),et.settings&&(ue=et.settings))},reset:function at(){Re(),y.off(j.default.ATTEMPT_BACKGROUND_SYNC,Be,I)}},function Ee(){G=Object(b.default)(D).getInstance().getLogger(I),y.on(j.default.ATTEMPT_BACKGROUND_SYNC,Be,I)}(),I}P.__dashjs_factory_name="TimeSyncController";var _=L.default.getSingletonFactory(P);_.HTTP_TIMEOUT_MS=5e3,L.default.updateSingletonFactory(P.__dashjs_factory_name,_),O.default=_},"./src/streaming/controllers/XlinkController.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/XlinkLoader.js"),S=r("./src/core/EventBus.js"),R=r("./src/core/events/Events.js"),j=r("./src/core/FactoryMaker.js"),U=r("./externals/xml2json.js"),L=r("./src/streaming/utils/URLUtils.js"),b=r("./src/dash/constants/DashConstants.js"),f="onLoad";function v(T){T=T||{};var x,P,_,D,y,A,k=this.context,N=Object(S.default)(k).getInstance(),B=Object(L.default)(k).getInstance();function Te(xe,ve,Oe){var Ie,Re,Ee={};Ee.elements=xe,Ee.type=ve,Ee.resolveType=Oe,0===Ee.elements.length&&se(Ee);for(var Pe=0;Pe<Ee.elements.length;Pe++)Re=B.isHTTPURL((Ie=Ee.elements[Pe]).url)?Ie.url:Ie.originalContent.BaseURL+Ie.url,A.load(Re,Ie,Ee)}function q(xe){var ve,Oe,Re="";if(Oe=xe.resolveObject,(ve=xe.element).resolvedContent){var Pe=0;0===ve.resolvedContent.indexOf("<?xml")&&(Pe=ve.resolvedContent.indexOf("?>")+2),Re=ve.resolvedContent.substr(0,Pe)+"<response>"+ve.resolvedContent.substr(Pe)+"</response>",ve.resolvedContent=y.xml_str2json(Re)}(function pe(xe){var ve;for(ve=0;ve<xe.elements.length;ve++)if(!1===xe.elements[ve].resolved)return!1;return!0})(Oe)&&se(Oe)}function se(xe){var Oe,Ee,ve=[];if(function ce(xe){var Oe,Ee,Re,Pe,ke,ve=[];for(Re=xe.elements.length-1;Re>=0;Re--){if(Ee=(Oe=xe.elements[Re]).type+"_asArray",Oe.resolvedContent){if(Oe.resolvedContent)for(Pe=0;Pe<Oe.resolvedContent[Ee].length;Pe++)ve.push(Oe.resolvedContent[Ee][Pe])}else delete Oe.originalContent["xlink:actuate"],delete Oe.originalContent["xlink:href"],ve.push(Oe.originalContent);for(Oe.parentElement[Ee].splice(Oe.index,1),ke=0;ke<ve.length;ke++)Oe.parentElement[Ee].splice(Oe.index+ke,0,ve[ke]);ve=[]}xe.elements.length>0&&_.run(D)}(xe),"onActuate"===xe.resolveType&&N.trigger(R.default.XLINK_READY,{manifest:D}),xe.resolveType===f)switch(xe.type){case b.default.PERIOD:for(Oe=0;Oe<D[b.default.PERIOD+"_asArray"].length;Oe++)(Ee=D[b.default.PERIOD+"_asArray"][Oe]).hasOwnProperty(b.default.ADAPTATION_SET+"_asArray")&&(ve=ve.concat(H(Ee[b.default.ADAPTATION_SET+"_asArray"],Ee,b.default.ADAPTATION_SET,f))),Ee.hasOwnProperty(b.default.EVENT_STREAM+"_asArray")&&(ve=ve.concat(H(Ee[b.default.EVENT_STREAM+"_asArray"],Ee,b.default.EVENT_STREAM,f)));Te(ve,b.default.ADAPTATION_SET,f);break;case b.default.ADAPTATION_SET:N.trigger(R.default.XLINK_READY,{manifest:D})}}function H(xe,ve,Oe,Ee){var Re,Pe,ke,Ie=[];for(Pe=xe.length-1;Pe>=0;Pe--)(Re=xe[Pe]).hasOwnProperty("xlink:href")&&"urn:mpeg:dash:resolve-to-zero:2013"===Re["xlink:href"]&&xe.splice(Pe,1);for(Pe=0;Pe<xe.length;Pe++)(Re=xe[Pe]).hasOwnProperty("xlink:href")&&Re.hasOwnProperty("xlink:actuate")&&Re["xlink:actuate"]===Ee&&(ke=ne(Re["xlink:href"],ve,Oe,Pe,Ee,Re),Ie.push(ke));return Ie}function ne(xe,ve,Oe,Ee,Ie,Re){return{url:xe,parentElement:ve,type:Oe,index:Ee,resolveType:Ie,originalContent:Re,resolvedContent:null,resolved:!1}}return x={resolveManifestOnLoad:function de(xe){y=new U.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:P}),(D=xe).Period_asArray?Te(H(D.Period_asArray,D,b.default.PERIOD,f),b.default.PERIOD,f):N.trigger(R.default.XLINK_READY,{manifest:D})},setMatchers:function G(xe){xe&&(P=xe)},setIron:function ee(xe){xe&&(_=xe)},reset:function ue(){N.off(R.default.XLINK_ELEMENT_LOADED,q,x),A&&(A.reset(),A=null)}},function I(){N.on(R.default.XLINK_ELEMENT_LOADED,q,x),A=Object(e.default)(k).create({errHandler:T.errHandler,dashMetrics:T.dashMetrics,mediaPlayerModel:T.mediaPlayerModel,requestModifier:T.requestModifier,settings:T.settings})}(),x}v.__dashjs_factory_name="XlinkController",O.default=j.default.getClassFactory(v)},"./src/streaming/metrics/MetricsReporting.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/metrics/utils/DVBErrorsTranslator.js"),S=r("./src/streaming/metrics/MetricsReportingEvents.js"),R=r("./src/streaming/metrics/controllers/MetricsCollectionController.js"),j=r("./src/streaming/metrics/metrics/MetricsHandlerFactory.js"),U=r("./src/streaming/metrics/reporting/ReportingFactory.js");function L(){var f=this.context;return{createMetricsReporting:function v(N){return Object(e.default)(f).getInstance({eventBus:N.eventBus,dashMetrics:N.dashMetrics,metricsConstants:N.metricsConstants,events:N.events}).initialise(),Object(R.default)(f).create(N)},getReportingFactory:function T(){return Object(U.default)(f).getInstance()},getMetricsHandlerFactory:function k(){return Object(j.default)(f).getInstance()}}}L.__dashjs_factory_name="MetricsReporting";var b=dashjs.FactoryMaker.getClassFactory(L);b.events=S.default,dashjs.FactoryMaker.updateClassFactory(L.__dashjs_factory_name,b),O.default=b},"./src/streaming/metrics/MetricsReportingEvents.js":function(Ve,O,r){"use strict";function S(P){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(_){return typeof _}:function(_){return _&&"function"==typeof Symbol&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(P)}function R(P,_){for(var D=0;D<_.length;D++){var y=_[D];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(P,U(y.key),y)}}function U(P){var _=function L(P,_){if("object"!==S(P)||null===P)return P;var D=P[Symbol.toPrimitive];if(void 0!==D){var y=D.call(P,_||"default");if("object"!==S(y))return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===_?String:Number)(P)}(P,"string");return"symbol"===S(_)?_:String(_)}function f(P,_){if("function"!=typeof _&&null!==_)throw new TypeError("Super expression must either be null or a function");P.prototype=Object.create(_&&_.prototype,{constructor:{value:P,writable:!0,configurable:!0}}),Object.defineProperty(P,"prototype",{writable:!1}),_&&c(P,_)}function c(P,_){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(y,A){return y.__proto__=A,y})(P,_)}function g(P){var _=function k(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(P){return!1}}();return function(){var A,y=N(P);if(_){var I=N(this).constructor;A=Reflect.construct(y,arguments,I)}else A=y.apply(this,arguments);return v(this,A)}}function v(P,_){if(_&&("object"===S(_)||"function"==typeof _))return _;if(void 0!==_)throw new TypeError("Derived constructors may only return object or undefined");return function T(P){if(void 0===P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P}(P)}function N(P){return(N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(D){return D.__proto__||Object.getPrototypeOf(D)})(P)}r.r(O);var x=new(function(P){f(D,P);var _=g(D);function D(){var y;return function b(P,_){if(!(P instanceof _))throw new TypeError("Cannot call a class as a function")}(this,D),(y=_.call(this)).METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",y.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",y.CMCD_DATA_GENERATED="cmcdDataGenerated",y}return function j(P,_,D){return _&&R(P.prototype,_),D&&R(P,D),Object.defineProperty(P,"prototype",{writable:!1}),P}(D)}(r("./src/core/events/EventsBase.js").default));O.default=x},"./src/streaming/metrics/controllers/MetricsCollectionController.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/metrics/controllers/MetricsController.js"),S=r("./src/streaming/metrics/utils/ManifestParsing.js"),R=r("./src/streaming/metrics/MetricsReportingEvents.js");function j(U){var L,b={},f=this.context,c=(U=U||{}).eventBus,g=U.events;function v(B){if(!B.error){var x=Object.keys(b);Object(S.default)(f).getInstance({adapter:U.adapter,constants:U.constants}).getMetrics(B.manifest).forEach(function(_){var D=JSON.stringify(_);if(b.hasOwnProperty(D))x.splice(D,1);else try{var y=Object(e.default)(f).create(U);y.initialize(_),b[D]=y}catch(A){}}),x.forEach(function(_){b[_].reset(),delete b[_]}),c.trigger(R.default.METRICS_INITIALISATION_COMPLETE)}}function T(){Object.keys(b).forEach(function(B){b[B].reset()}),b={}}return L={reset:function N(){c.off(g.MANIFEST_UPDATED,v,L),c.off(g.STREAM_TEARDOWN_COMPLETE,T,L)}},function k(){c.on(g.MANIFEST_UPDATED,v,L),c.on(g.STREAM_TEARDOWN_COMPLETE,T,L)}(),L}j.__dashjs_factory_name="MetricsCollectionController",O.default=dashjs.FactoryMaker.getClassFactory(j)},"./src/streaming/metrics/controllers/MetricsController.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/metrics/controllers/RangeController.js"),S=r("./src/streaming/metrics/controllers/ReportingController.js"),R=r("./src/streaming/metrics/controllers/MetricsHandlersController.js");function j(U){U=U||{};var L,b,f,g=this.context;function T(){L&&L.reset(),b&&b.reset(),f&&f.reset()}return{initialize:function v(k){try{(f=Object(e.default)(g).create({mediaElement:U.mediaElement})).initialize(k.Range),(b=Object(S.default)(g).create({debug:U.debug,metricsConstants:U.metricsConstants,mediaPlayerModel:U.mediaPlayerModel})).initialize(k.Reporting,f),(L=Object(R.default)(g).create({debug:U.debug,eventBus:U.eventBus,metricsConstants:U.metricsConstants,events:U.events})).initialize(k.metrics,b)}catch(N){throw T(),N}},reset:T}}j.__dashjs_factory_name="MetricsController",O.default=dashjs.FactoryMaker.getClassFactory(j)},"./src/streaming/metrics/controllers/MetricsHandlersController.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/metrics/metrics/MetricsHandlerFactory.js");function S(R){var U,j=[],L=this.context,b=(R=R||{}).eventBus,f=R.events,c=Object(e.default)(L).getInstance({debug:R.debug,eventBus:R.eventBus,metricsConstants:R.metricsConstants});function g(k){j.forEach(function(N){N.handleNewMetric(k.metric,k.value,k.mediaType)})}return U={initialize:function v(k,N){k.split(",").forEach(function(B,x,P){var _;if(-1!==B.indexOf("(")&&-1===B.indexOf(")")){var D=P[x+1];D&&-1===D.indexOf("(")&&-1!==D.indexOf(")")&&(B+=","+D,delete P[x+1])}(_=c.create(B,N))&&j.push(_)}),b.on(f.METRIC_ADDED,g,U),b.on(f.METRIC_UPDATED,g,U)},reset:function T(){b.off(f.METRIC_ADDED,g,U),b.off(f.METRIC_UPDATED,g,U),j.forEach(function(k){return k.reset()}),j=[]}}}S.__dashjs_factory_name="MetricsHandlersController",O.default=dashjs.FactoryMaker.getClassFactory(S)},"./src/streaming/metrics/controllers/RangeController.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/utils/CustomTimeRanges.js");function S(R){var L,b,j=!1,U=this.context,f=(R=R||{}).mediaElement;return L={initialize:function c(k){k&&k.length&&(k.forEach(function(N){var B=N.starttime;b.add(B,B+N.duration)}),j=!!k[0]._useWallClockTime)},reset:function g(){b.clear()},isEnabled:function T(){var N,k=b.length;if(!k)return!0;N=j?(new Date).getTime()/1e3:f.currentTime;for(var B=0;B<k;B+=1){var x=b.start(B),P=b.end(B);if(x<=N&&N<P)return!0}return!1}},function v(){b=Object(e.default)(U).create()}(),L}S.__dashjs_factory_name="RangeController",O.default=dashjs.FactoryMaker.getClassFactory(S)},"./src/streaming/metrics/controllers/ReportingController.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/metrics/reporting/ReportingFactory.js");function S(R){var j=[],L=Object(e.default)(this.context).getInstance(R);return{initialize:function b(g,v){g.some(function(T){var k=L.create(T,v);if(k)return j.push(k),!0})},reset:function f(){j.forEach(function(g){return g.reset()}),j=[]},report:function c(g,v){j.forEach(function(T){return T.report(g,v)})}}}S.__dashjs_factory_name="ReportingController",O.default=dashjs.FactoryMaker.getClassFactory(S)},"./src/streaming/metrics/metrics/MetricsHandlerFactory.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/metrics/metrics/handlers/BufferLevelHandler.js"),S=r("./src/streaming/metrics/metrics/handlers/DVBErrorsHandler.js"),R=r("./src/streaming/metrics/metrics/handlers/HttpListHandler.js"),j=r("./src/streaming/metrics/metrics/handlers/GenericMetricHandler.js");function U(L){var b,f=(L=L||{}).debug?L.debug.getLogger(b):{},c=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,g=this.context,v={BufferLevel:e.default,DVBErrors:S.default,HttpList:R.default,PlayList:j.default,RepSwitchList:j.default,TcpList:j.default};return{create:function T(B,x){var _,P=B.match(c);if(P){try{(_=v[P[1]](g).create({eventBus:L.eventBus,metricsConstants:L.metricsConstants})).initialize(P[1],x,P[3],P[5])}catch(D){_=null,f.error("MetricsHandlerFactory: Could not create handler for type ".concat(P[1]," with args ").concat(P[3],", ").concat(P[5]," (").concat(D.message,")"))}return _}},register:function k(B,x){v[B]=x},unregister:function N(B){delete v[B]}}}U.__dashjs_factory_name="MetricsHandlerFactory",O.default=dashjs.FactoryMaker.getSingletonFactory(U)},"./src/streaming/metrics/metrics/handlers/BufferLevelHandler.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/metrics/utils/HandlerHelpers.js");function S(R){R=R||{};var U,L,b,f,c,g=this.context,v=Object(e.default)(g).getInstance(),T=[],k=R.metricsConstants;function B(){var D=function N(){try{return Object.keys(T).map(function(D){return T[D]}).reduce(function(D,y){return D.level<y.level?D:y})}catch(D){return}}();D&&c!==D.t&&(c=D.t,U.report(b,D))}return{initialize:function x(D,y,A){y&&(L=v.validateN(A),U=y,b=v.reconstructFullMetricName(D,A),f=setInterval(B,L))},reset:function P(){clearInterval(f),f=null,L=0,U=null,c=null},handleNewMetric:function _(D,y,A){D===k.BUFFER_LEVEL&&(T[A]=y)}}}S.__dashjs_factory_name="BufferLevelHandler",O.default=dashjs.FactoryMaker.getClassFactory(S)},"./src/streaming/metrics/metrics/handlers/DVBErrorsHandler.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/metrics/MetricsReportingEvents.js");O.default=dashjs.FactoryMaker.getClassFactory(function S(R){var U,L=(R=R||{}).eventBus,b=R.metricsConstants;function f(){L.off(e.default.METRICS_INITIALISATION_COMPLETE,f,this),L.trigger(e.default.BECAME_REPORTING_PLAYER)}return{initialize:function c(T,k){k&&(U=k,L.on(e.default.METRICS_INITIALISATION_COMPLETE,f,this))},reset:function g(){U=null},handleNewMetric:function v(T,k){T===b.DVB_ERRORS&&U&&U.report(T,k)}}})},"./src/streaming/metrics/metrics/handlers/GenericMetricHandler.js":function(Ve,O,r){"use strict";function e(){var R,j;return{initialize:function U(f,c){R=f,j=c},reset:function L(){j=null,R=void 0},handleNewMetric:function b(f,c){f===R&&j&&j.report(R,c)}}}r.r(O),e.__dashjs_factory_name="GenericMetricHandler",O.default=dashjs.FactoryMaker.getClassFactory(e)},"./src/streaming/metrics/metrics/handlers/HttpListHandler.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/metrics/utils/HandlerHelpers.js");function S(R){R=R||{};var U,L,b,f,c,g=[],v=Object(e.default)(this.context).getInstance(),T=R.metricsConstants;function k(){g.length&&U&&U.report(f,g),g=[]}return{initialize:function N(P,_,D,y){_&&(L=v.validateN(D),U=_,y&&y.length&&(b=y),f=v.reconstructFullMetricName(P,D,y),c=setInterval(k,L))},reset:function B(){clearInterval(c),c=null,L=null,b=null,g=[],U=null},handleNewMetric:function x(P,_){P===T.HTTP_REQUEST&&(!b||b===_.type)&&g.push(_)}}}S.__dashjs_factory_name="HttpListHandler",O.default=dashjs.FactoryMaker.getClassFactory(S)},"./src/streaming/metrics/reporting/ReportingFactory.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/metrics/reporting/reporters/DVBReporting.js");function S(R){var L,j={"urn:dvb:dash:reporting:2014":e.default},U=this.context,b=(R=R||{}).debug?R.debug.getLogger(L):{},f=R.metricsConstants,c=R.mediaPlayerModel||{};return{create:function g(k,N){var B;try{(B=j[k.schemeIdUri](U).create({metricsConstants:f,mediaPlayerModel:c})).initialize(k,N)}catch(x){B=null,b.error("ReportingFactory: could not create Reporting with schemeIdUri ".concat(k.schemeIdUri," (").concat(x.message,")"))}return B},register:function v(k,N){j[k]=N},unregister:function T(k){delete j[k]}}}S.__dashjs_factory_name="ReportingFactory",O.default=dashjs.FactoryMaker.getSingletonFactory(S)},"./src/streaming/metrics/reporting/reporters/DVBReporting.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/metrics/utils/MetricSerialiser.js"),S=r("./src/streaming/metrics/utils/RNG.js"),R=r("./src/streaming/models/CustomParametersModel.js");function j(U){var L,f,c,g,v,T,k,N,b=this.context,P=[],_=(U=U||{}).metricsConstants;function G(){v=!1,T=!1,k=null,N=null}return L={report:function A(de,ue){Array.isArray(ue)||(ue=[ue]),T&&N.isEnabled()&&ue.forEach(function(Te){var q=f.serialise(Te);de!==_.DVB_ERRORS&&(q="metricname=".concat(de,"&").concat(q)),function y(de,ue,Te){var q=new XMLHttpRequest;q.withCredentials=c.getXHRWithCredentialsForType(_.HTTP_REQUEST_DVB_REPORTING_TYPE);var se=function(){var ce=P.indexOf(q);-1!==ce&&(P.splice(ce,1),q.status>=200&&q.status<300?ue&&ue():Te&&Te())};P.push(q);try{q.open("GET",de),q.onloadend=se,q.onerror=se,q.send()}catch(H){q.onerror()}}(q="".concat(k,"?").concat(q),null,function(){T=!1})})},initialize:function I(de,ue){var Te;if(N=ue,!(k=de.dvb_reportingUrl))throw new Error("required parameter missing (dvb:reportingUrl)");v||((Te=de.dvb_probability)&&(1e3===Te||Te/1e3>=g.random())&&(T=!0),v=!0)},reset:function ee(){G()}},function D(){f=Object(e.default)(b).getInstance(),g=Object(S.default)(b).getInstance(),c=Object(R.default)(b).getInstance(),G()}(),L}j.__dashjs_factory_name="DVBReporting",O.default=dashjs.FactoryMaker.getClassFactory(j)},"./src/streaming/metrics/utils/DVBErrorsTranslator.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/metrics/vo/DVBErrors.js"),S=r("./src/streaming/metrics/MetricsReportingEvents.js");function R(j){var U,L,b=(j=j||{}).eventBus,f=j.dashMetrics,c=j.metricsConstants,g=j.events;function v(y){var A=new e.default;if(L){for(var I in y)y.hasOwnProperty(I)&&(A[I]=y[I]);A.mpdurl||(A.mpdurl=L.originalUrl||L.url),A.terror||(A.terror=new Date),f.addDVBErrors(A)}}function T(y){y.error||(L=y.manifest)}function k(y){v({errorcode:e.default.BASE_URL_CHANGED,servicelocation:y.entry})}function N(){v({errorcode:e.default.BECAME_REPORTER})}function x(y){y.metric===c.HTTP_REQUEST&&function B(y){(0===y.responsecode||null==y.responsecode||y.responsecode>=400||y.responsecode<100||y.responsecode>=600)&&v({errorcode:y.responsecode||e.default.CONNECTION_ERROR,url:y.url,terror:y.tresponse,servicelocation:y._serviceLocation})}(y.value)}function P(y){var I;switch(y.error?y.error.code:0){case MediaError.MEDIA_ERR_NETWORK:I=e.default.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:I=e.default.CORRUPT_MEDIA_OTHER;break;default:return}v({errorcode:I})}return U={initialise:function _(){b.on(g.MANIFEST_UPDATED,T,U),b.on(g.SERVICE_LOCATION_BLACKLIST_CHANGED,k,U),b.on(g.METRIC_ADDED,x,U),b.on(g.METRIC_UPDATED,x,U),b.on(g.PLAYBACK_ERROR,P,U),b.on(S.default.BECAME_REPORTING_PLAYER,N,U)},reset:function D(){b.off(g.MANIFEST_UPDATED,T,U),b.off(g.SERVICE_LOCATION_BLACKLIST_CHANGED,k,U),b.off(g.METRIC_ADDED,x,U),b.off(g.METRIC_UPDATED,x,U),b.off(g.PLAYBACK_ERROR,P,U),b.off(S.default.BECAME_REPORTING_PLAYER,N,U)}}}R.__dashjs_factory_name="DVBErrorsTranslator",O.default=dashjs.FactoryMaker.getSingletonFactory(R)},"./src/streaming/metrics/utils/HandlerHelpers.js":function(Ve,O,r){"use strict";function e(){return{reconstructFullMetricName:function(R,j,U){var L=R;return j&&(L+="("+j,U&&U.length&&(L+=","+U),L+=")"),L},validateN:function(R){if(!R)throw new Error("missing n");if(isNaN(R))throw new Error("n is NaN");if(R<0)throw new Error("n must be positive");return R}}}r.r(O),e.__dashjs_factory_name="HandlerHelpers",O.default=dashjs.FactoryMaker.getSingletonFactory(e)},"./src/streaming/metrics/utils/ManifestParsing.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/metrics/vo/Metrics.js"),S=r("./src/streaming/metrics/vo/Range.js"),R=r("./src/streaming/metrics/vo/Reporting.js");function j(U){var b=(U=U||{}).adapter,f=U.constants;return{getMetrics:function g(v){var T=[];return v&&v.Metrics_asArray&&v.Metrics_asArray.forEach(function(k){var N=new e.default,B=b.getIsDynamic(v);k.hasOwnProperty("metrics")&&(N.metrics=k.metrics,k.Range_asArray&&k.Range_asArray.forEach(function(x){var P=new S.default;P.starttime=function c(v,T,k){var N,B,x=0;return T?x=b.getAvailabilityStartTime(v)/1e3:(N=b.getRegularPeriods(v)).length&&(x=N[0].start),B=x,k&&k.hasOwnProperty(f.START_TIME)&&(B+=k.starttime),B}(v,B,x),P.duration=x.hasOwnProperty("duration")?x.duration:b.getDuration(v),P._useWallClockTime=B,N.Range.push(P)}),k.Reporting_asArray&&(k.Reporting_asArray.forEach(function(x){var P=new R.default;x.hasOwnProperty(f.SCHEME_ID_URI)&&(P.schemeIdUri=x.schemeIdUri,x.hasOwnProperty("value")&&(P.value=x.value),x.hasOwnProperty(f.DVB_REPORTING_URL)&&(P.dvb_reportingUrl=x[f.DVB_REPORTING_URL]),x.hasOwnProperty(f.DVB_PROBABILITY)&&(P.dvb_probability=x[f.DVB_PROBABILITY]),N.Reporting.push(P))}),T.push(N)))}),T}}}j.__dashjs_factory_name="ManifestParsing",O.default=dashjs.FactoryMaker.getSingletonFactory(j)},"./src/streaming/metrics/utils/MetricSerialiser.js":function(Ve,O,r){"use strict";function e(){return{serialise:function S(R){var L,b,j=[],U=[];for(L in R)if(R.hasOwnProperty(L)&&0!==L.indexOf("_")){if(null==(b=R[L])&&(b=""),Array.isArray(b)){if(!b.length)continue;U=[],b.forEach(function(f){var c="Object"!==Object.prototype.toString.call(f).slice(8,-1);U.push(c?f:S(f))}),b=U.map(encodeURIComponent).join(",")}else"string"==typeof b?b=encodeURIComponent(b):b instanceof Date?b=b.toISOString():"number"==typeof b&&(b=Math.round(b));j.push(L+"="+b)}return j.join("&")}}}r.r(O),e.__dashjs_factory_name="MetricSerialiser",O.default=dashjs.FactoryMaker.getSingletonFactory(e)},"./src/streaming/metrics/utils/RNG.js":function(Ve,O,r){"use strict";function e(){var L,b,f,S=window.crypto||window.msCrypto,R=Uint32Array,j=Math.pow(2,8*R.BYTES_PER_ELEMENT)-1;function c(){S&&(L||(L=new R(10)),S.getRandomValues(L),b=0)}return f={random:function g(v,T){var k;return v||(v=0),T||(T=1),S?(b===L.length&&c(),k=L[b]/j,b+=1):k=Math.random(),k*(T-v)+v}},c(),f}r.r(O),e.__dashjs_factory_name="RNG",O.default=dashjs.FactoryMaker.getSingletonFactory(e)},"./src/streaming/metrics/vo/DVBErrors.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function S(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,j(v.key),v)}}function R(f,c,g){return c&&S(f.prototype,c),g&&S(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}function j(f){var c=function U(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O);var b=R(function f(){(function L(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,f),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null});b.SSL_CONNECTION_FAILED_PREFIX="SSL",b.DNS_RESOLUTION_FAILED="C00",b.HOST_UNREACHABLE="C01",b.CONNECTION_REFUSED="C02",b.CONNECTION_ERROR="C03",b.CORRUPT_MEDIA_ISOBMFF="M00",b.CORRUPT_MEDIA_OTHER="M01",b.BASE_URL_CHANGED="F00",b.BECAME_REPORTER="S00",O.default=b},"./src/streaming/metrics/vo/Metrics.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function S(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,j(v.key),v)}}function R(f,c,g){return c&&S(f.prototype,c),g&&S(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}function j(f){var c=function U(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=R(function f(){(function L(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,f),this.metrics="",this.Range=[],this.Reporting=[]})},"./src/streaming/metrics/vo/Range.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function S(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,j(v.key),v)}}function R(f,c,g){return c&&S(f.prototype,c),g&&S(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}function j(f){var c=function U(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=R(function f(){(function L(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,f),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1})},"./src/streaming/metrics/vo/Reporting.js":function(Ve,O,r){"use strict";function e(c){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(c)}function S(c,g){for(var v=0;v<g.length;v++){var T=g[v];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(c,j(T.key),T)}}function R(c,g,v){return g&&S(c.prototype,g),v&&S(c,v),Object.defineProperty(c,"prototype",{writable:!1}),c}function j(c){var g=function U(c,g){if("object"!==e(c)||null===c)return c;var v=c[Symbol.toPrimitive];if(void 0!==v){var T=v.call(c,g||"default");if("object"!==e(T))return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===g?String:Number)(c)}(c,"string");return"symbol"===e(g)?g:String(g)}r.r(O);O.default=R(function c(){(function L(c,g){if(!(c instanceof g))throw new TypeError("Cannot call a class as a function")})(this,c),this.schemeIdUri="",this.value="",this.dvb_reportingUrl="",this.dvb_probability=1e3})},"./src/streaming/models/BaseURLTreeModel.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/utils/ObjectUtils.js"),S=r("./src/core/FactoryMaker.js");function R(T){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(k){return typeof k}:function(k){return k&&"function"==typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(T)}function j(T,k){for(var N=0;N<k.length;N++){var B=k[N];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(T,L(B.key),B)}}function U(T,k,N){return k&&j(T.prototype,k),N&&j(T,N),Object.defineProperty(T,"prototype",{writable:!1}),T}function L(T){var k=function b(T,k){if("object"!==R(T)||null===T)return T;var N=T[Symbol.toPrimitive];if(void 0!==N){var B=N.call(T,k||"default");if("object"!==R(B))return B;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===k?String:Number)(T)}(T,"string");return"symbol"===R(k)?k:String(k)}var c=NaN,g=U(function T(k,N){(function f(T,k){if(!(T instanceof k))throw new TypeError("Cannot call a class as a function")})(this,T),this.data={baseUrls:k||null,selectedIdx:N||c},this.children=[]});function v(){var T,k,N,B=this.context,x=Object(e.default)(B).getInstance();function y(Te,q,se){var H=N.getBaseURLsFromElement(se);Te[q]?x.areEqual(H,Te[q].data.baseUrls)||(Te[q].data.baseUrls=H,Te[q].data.selectedIdx=c):Te[q]=new g(H)}function A(Te){!function D(){if(!N||!N.hasOwnProperty("getBaseURLsFromElement")||!N.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")}();var q=N.getBaseURLsFromElement(Te);x.areEqual(q,k.data.baseUrls)||(k.data.baseUrls=q,k.data.selectedIdx=c),Te&&Te.Period_asArray&&Te.Period_asArray.forEach(function(se,H){y(k.children,H,se),se.AdaptationSet_asArray&&se.AdaptationSet_asArray.forEach(function(ce,ne){y(k.children[H].children,ne,ce),ce.Representation_asArray&&ce.Representation_asArray.sort(N.getRepresentationSortFunction()).forEach(function(pe,me){y(k.children[H].children[ne].children,me,pe)})})})}function I(Te,q){var se=q||k;Te(se.data),se.children&&se.children.forEach(function(H){return I(Te,H)})}function de(){k=new g}return T={reset:de,update:function ee(Te){A(Te)},getForPath:function ue(Te){var q=k,se=[q.data];return Te&&Te.forEach(function(H){(q=q.children[H])&&se.push(q.data)}),se.filter(function(H){return H.baseUrls.length})},invalidateSelectedIndexes:function G(Te){I(function(q){isNaN(q.selectedIdx)||Te===q.baseUrls[q.selectedIdx].serviceLocation&&(q.selectedIdx=c)})},setConfig:function _(Te){Te.adapter&&(N=Te.adapter)}},function P(){de()}(),T}v.__dashjs_factory_name="BaseURLTreeModel",O.default=S.default.getClassFactory(v)},"./src/streaming/models/CmcdModel.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/EventBus.js"),S=r("./src/streaming/MediaPlayerEvents.js"),R=r("./src/streaming/metrics/MetricsReportingEvents.js"),j=r("./src/core/FactoryMaker.js"),U=r("./src/core/Settings.js"),L=r("./src/streaming/constants/Constants.js"),b=r("./src/streaming/vo/metrics/HTTPRequest.js"),f=r("./src/dash/models/DashManifestModel.js"),c=r("./src/core/Utils.js");function g(y,A){var I="undefined"!=typeof Symbol&&y[Symbol.iterator]||y["@@iterator"];if(!I){if(Array.isArray(y)||(I=function v(y,A){if(y){if("string"==typeof y)return T(y,A);var I=Object.prototype.toString.call(y).slice(8,-1);if("Object"===I&&y.constructor&&(I=y.constructor.name),"Map"===I||"Set"===I)return Array.from(y);if("Arguments"===I||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return T(y,A)}}(y))||A&&y&&"number"==typeof y.length){I&&(y=I);var G=0,ee=function(){};return{s:ee,n:function(){return G>=y.length?{done:!0}:{done:!1,value:y[G++]}},e:function(se){throw se},f:ee}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Te,de=!0,ue=!1;return{s:function(){I=I.call(y)},n:function(){var se=I.next();return de=se.done,se},e:function(se){ue=!0,Te=se},f:function(){try{!de&&null!=I.return&&I.return()}finally{if(ue)throw Te}}}}function T(y,A){(null==A||A>y.length)&&(A=y.length);for(var I=0,G=new Array(A);I<A;I++)G[I]=y[I];return G}var B_MANIFEST="m",B_AUDIO="a",B_VIDEO="v",B_INIT="i",B_CAPTION="c",B_ISOBMFF_TEXT_TRACK="tt",B_ENCRYPTION_KEY="k",B_OTHER="o",x_DASH="d",x_MSS="s",P_VOD="v",P_LIVE="l";function D(){var y,A,I,G,ee,de,ue,Te,q,se,H=this.context,ce=Object(e.default)(H).getInstance(),ne=Object(U.default)(H).getInstance();function ve(){I={pr:1,nor:null,st:null,sf:null,sid:"".concat(c.default.generateUuid()),cid:null},q={},Te={},se={},Ee()}function Oe(){Ee()}function Ee(){if(de){var tt=de.getStreamController();if(tt&&"function"==typeof tt.getActiveStream){var Et=tt.getActiveStream();!Et||(ue=Et.getProcessors())}}}function Pe(tt,Et){var At,Yt={},vt=g(Et);try{for(vt.s();!(At=vt.n()).done;){var Dt=At.value;tt[Dt]&&(Yt[Dt]=tt[Dt])}}catch($t){vt.e($t)}finally{vt.f()}return Yt}function Be(tt){var Et=ne.get().streaming.cmcd.enabledKeys;return tt.filter(function(Yt){return Et.includes(Yt)})}function qe(tt){try{return tt.type===b.HTTPRequest.MPD_TYPE?function De(){var tt=ae();return tt.ot=B_MANIFEST,tt}():tt.type===b.HTTPRequest.MEDIA_SEGMENT_TYPE?(function Y(tt){se.hasOwnProperty(tt)||(se[tt]=!1),Te.hasOwnProperty(tt)||(Te[tt]=!1),q.hasOwnProperty(tt)||(q[tt]=!1)}(tt.mediaType),function he(tt){var Bn,Et=ae(),Yt=function re(tt){try{return parseInt(tt.mediaInfo.bitrateList[tt.quality].bandwidth/1e3)}catch(vt){return null}}(tt),vt=function te(tt){try{return isNaN(tt.duration)?null:Math.round(1e3*tt.duration)}catch(Et){return null}}(tt),At=function X(tt){try{return 100*parseInt(G.getThroughputHistory().getSafeAverageThroughput(tt)/100)}catch(Et){return null}}(tt.mediaType),Dt=function Z(tt){try{var Et=I.pr,Yt=ee.getCurrentBufferLevel(tt);return isNaN(Et)||isNaN(Yt)?null:100*parseInt(Yt/Et*10)}catch(vt){return null}}(tt.mediaType),$t=W(tt.mediaType),Kt=function z(tt){try{var Et=G.getTopBitrateInfoFor(tt);return Math.round(Et.bitrate/1e3)}catch(Yt){return null}}(tt.mediaType),Xt=I.pr,ln=function et(tt){if(ue&&0!==ue.length){var Yt,Et=g(ue);try{for(Et.s();!(Yt=Et.n()).done;){var vt=Yt.value;if(vt.getType()===tt)return vt.probeNextRequest()}}catch(At){Et.e(At)}finally{Et.f()}}}(tt.mediaType);tt.mediaType===L.default.VIDEO&&(Bn=B_VIDEO),tt.mediaType===L.default.AUDIO&&(Bn=B_AUDIO),tt.mediaType===L.default.TEXT&&(Bn="application/mp4"===tt.mediaInfo.mimeType?B_ISOBMFF_TEXT_TRACK:B_CAPTION);var Rn=ne.get().streaming.cmcd.rtp;return Rn||(Rn=function ut(tt){var Et=de.getPlaybackRate();Et||(Et=1);var Yt=tt.quality,At=tt.mediaInfo,Dt=tt.duration,$t=W(tt.mediaType);0===$t&&($t=500);var Bn=At.bitrateList[Yt].bandwidth*Dt/1e3/($t/Et/1e3),Rn=ne.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(ne.get().streaming.cmcd.rtpSafetyFactor)?ne.get().streaming.cmcd.rtpSafetyFactor:5;return 100*(parseInt(Bn*Rn/100)+1)}(tt)),Et.rtp=Rn,ln&&(tt.url!==ln.url?Et.nor=encodeURIComponent(c.default.getRelativeUrl(tt.url,ln.url)):ln.range&&(Et.nrr=ln.range)),Yt&&(Et.br=Yt),Bn&&(Et.ot=Bn),isNaN(vt)||(Et.d=vt),isNaN(At)||(Et.mtp=At),isNaN(Dt)||(Et.dl=Dt),isNaN($t)||(Et.bl=$t),isNaN(Kt)||(Et.tb=Kt),!isNaN(Xt)&&1!==Xt&&(Et.pr=Xt),q[tt.mediaType]&&(Et.bs=!0,q[tt.mediaType]=!1),(Te[tt.mediaType]||!se[tt.mediaType])&&(Et.su=!0,Te[tt.mediaType]=!1,se[tt.mediaType]=!0),Et}(tt)):tt.type===b.HTTPRequest.INIT_SEGMENT_TYPE?function J(){var tt=ae();return tt.ot=B_INIT,tt.su=!0,tt}():tt.type===b.HTTPRequest.OTHER_TYPE||tt.type===b.HTTPRequest.XLINK_EXPANSION_TYPE?function Me(){var tt=ae();return tt.ot=B_OTHER,tt}():tt.type===b.HTTPRequest.LICENSE?function He(tt){var Et=ae();return Et.ot=B_ENCRYPTION_KEY,Et}():null}catch(Yt){return null}}function ae(){var tt={},Et=ne.get().streaming.cmcd.cid?ne.get().streaming.cmcd.cid:I.cid;return tt.v=1,tt.sid=ne.get().streaming.cmcd.sid?ne.get().streaming.cmcd.sid:I.sid,tt.sid="".concat(tt.sid),Et&&(tt.cid="".concat(Et)),!isNaN(I.pr)&&1!==I.pr&&null!==I.pr&&(tt.pr=I.pr),I.st&&(tt.st=I.st),I.sf&&(tt.sf=I.sf),tt}function W(tt){try{var Et=ee.getCurrentBufferLevel(tt);return isNaN(Et)?null:100*parseInt(10*Et)}catch(Yt){return null}}function oe(tt){try{I.pr=tt.playbackRate}catch(Et){}}function be(tt){try{var Et=y.getIsDynamic(tt.data),vt=tt.protocol&&"MSS"===tt.protocol?x_MSS:x_DASH;I.st="".concat(Et?P_LIVE:P_VOD),I.sf="".concat(vt)}catch(At){}}function Fe(tt){try{tt.state&&tt.mediaType&&tt.state===S.default.BUFFER_EMPTY&&(q[tt.mediaType]||(q[tt.mediaType]=!0),Te[tt.mediaType]||(Te[tt.mediaType]=!0))}catch(Et){}}function We(){for(var tt in q)q.hasOwnProperty(tt)&&(q[tt]=!0);for(var Et in Te)Te.hasOwnProperty(Et)&&(Te[Et]=!0)}function at(tt){try{if(!tt)return null;var Et=Object.keys(tt).sort(function(At,Dt){return At.localeCompare(Dt)}),Yt=Et.length,vt=Et.reduce(function(At,Dt,$t){return"v"===Dt&&1===tt[Dt]||(At+="string"==typeof tt[Dt]&&"ot"!==Dt&&"sf"!==Dt&&"st"!==Dt?"".concat(Dt,"=").concat(JSON.stringify(tt[Dt])):"".concat(Dt,"=").concat(tt[Dt]),$t<Yt-1&&(At+=",")),At},"");return(vt=vt.replace(/=true/g,"")).replace(/,\s*$/,"")}catch(At){return null}}return A={getQueryParameter:function Ie(tt){try{if(ne.get().streaming.cmcd&&ne.get().streaming.cmcd.enabled){var Et=qe(tt),vt=at(function Re(tt){try{var Et=ne.get().streaming.cmcd.enabledKeys;return Object.keys(tt).filter(function(Yt){return Et.includes(Yt)}).reduce(function(Yt,vt){return Yt[vt]=tt[vt],Yt},{})}catch(Yt){return tt}}(Et));return ce.trigger(R.default.CMCD_DATA_GENERATED,{url:tt.url,mediaType:tt.mediaType,cmcdData:Et,cmcdString:vt}),{key:"CMCD",value:vt}}return null}catch(At){return null}},getHeaderParameters:function ke(tt){try{if(ne.get().streaming.cmcd&&ne.get().streaming.cmcd.enabled){var Et=qe(tt),Yt=Pe(Et,Be(["br","d","ot","tb"])),vt=Pe(Et,Be(["bl","dl","mtp","nor","nrr","su"])),At=Pe(Et,Be(["bs","rtp"])),Dt=Pe(Et,Be(["cid","pr","sf","sid","st","v"])),$t={"CMCD-Object":at(Yt),"CMCD-Request":at(vt),"CMCD-Status":at(At),"CMCD-Session":at(Dt)};return ce.trigger(R.default.CMCD_DATA_GENERATED,{url:tt.url,mediaType:tt.mediaType,cmcdData:Et,headers:$t}),$t}return null}catch(Kt){return null}},setConfig:function xe(tt){!tt||(tt.abrController&&(G=tt.abrController),tt.dashMetrics&&(ee=tt.dashMetrics),tt.playbackController&&(de=tt.playbackController))},reset:function Ot(){ce.off(S.default.PLAYBACK_RATE_CHANGED,oe,this),ce.off(S.default.MANIFEST_LOADED,be,this),ce.off(S.default.BUFFER_LEVEL_STATE_CHANGED,Fe,A),ce.off(S.default.PLAYBACK_SEEKED,We,A),ve()},initialize:function me(){ce.on(S.default.PLAYBACK_RATE_CHANGED,oe,A),ce.on(S.default.MANIFEST_LOADED,be,A),ce.on(S.default.BUFFER_LEVEL_STATE_CHANGED,Fe,A),ce.on(S.default.PLAYBACK_SEEKED,We,A),ce.on(S.default.PERIOD_SWITCH_COMPLETED,Oe,A)}},function pe(){y=Object(f.default)(H).getInstance(),ve()}(),A}D.__dashjs_factory_name="CmcdModel",O.default=j.default.getSingletonFactory(D)},"./src/streaming/models/CustomParametersModel.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/dash/vo/UTCTiming.js"),S=r("./src/core/FactoryMaker.js"),R=r("./src/core/Settings.js"),j=r("./src/streaming/utils/SupervisorTools.js"),U=r("./src/streaming/rules/abr/ABRRulesCollection.js"),L=r("./src/streaming/constants/Constants.js");function f(){var c,g,v,T,k,N,B,x,P=this.context,_=Object(R.default)(P).getInstance();function y(){T=[],k=[],N=[],x=[],B=null,g=[]}function xe(Y,J){var Me=-1;Y.some(function(ae,re){if(ae===J)return Me=re,!0}),!(Me<0)&&Y.splice(Me,1)}function ve(Y){var J;for(J=0;J<x.length;J++)if(x[J].rulename===Y)return J;return-1}function Pe(Y,J){Be(Y,J);var Me=new e.default;Me.schemeIdUri=Y,Me.value=J,g.push(Me)}function Be(Y,J){Object(j.checkParameterType)(Y,"string"),Object(j.checkParameterType)(J,"string"),g.forEach(function(Me,ae){Me.schemeIdUri===Y&&Me.value===J&&g.splice(ae,1)})}return c={getCustomInitialTrackSelectionFunction:function de(){return B},setCustomInitialTrackSelectionFunction:function G(Y){B=Y},resetCustomInitialTrackSelectionFunction:function ee(){B=null},getLicenseResponseFilters:function Te(){return k},getLicenseRequestFilters:function ue(){return T},getCustomCapabilitiesFilters:function ne(){return N},registerCustomCapabilitiesFilter:function pe(Y){N.push(Y)},registerLicenseResponseFilter:function se(Y){k.push(Y)},registerLicenseRequestFilter:function q(Y){T.push(Y)},unregisterCustomCapabilitiesFilter:function me(Y){xe(N,Y)},unregisterLicenseResponseFilter:function ce(Y){xe(k,Y)},unregisterLicenseRequestFilter:function H(Y){xe(T,Y)},addAbrCustomRule:function Oe(Y,J,Me){if("string"!=typeof Y||Y!==U.default.ABANDON_FRAGMENT_RULES&&Y!==U.default.QUALITY_SWITCH_RULES||"string"!=typeof J)throw L.default.BAD_ARGUMENT_ERROR;var ae=ve(J);-1===ae?x.push({type:Y,rulename:J,rule:Me}):(x[ae].type=Y,x[ae].rule=Me)},removeAllAbrCustomRule:function Ie(){x=[]},removeAbrCustomRule:function Ee(Y){if(Y){var J=ve(Y);-1!==J&&x.splice(J,1)}else x=[]},getAbrCustomRules:function Re(){return x},addUTCTimingSource:Pe,removeUTCTimingSource:Be,getUTCTimingSources:function ke(){return g},clearDefaultUTCTimingSources:function qe(){g=[]},restoreDefaultUTCTimingSources:function He(){var Y=_.get().streaming.utcSynchronization.defaultTimingSource;Pe(Y.scheme,Y.value)},setXHRWithCredentialsForType:function De(Y,J){Y?v[Y]=!!J:Object.keys(v).forEach(function(Me){De(Me,J)})},getXHRWithCredentialsForType:function he(Y){var J=v[Y];return void 0===J?v.default:J},setConfig:function I(){},reset:function A(){y()}},function D(){v={default:false},y()}(),c}f.__dashjs_factory_name="CustomParametersModel",O.default=S.default.getSingletonFactory(f)},"./src/streaming/models/FragmentModel.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js"),S=r("./src/streaming/vo/FragmentRequest.js"),R="loading",j="executed",L="failed";function b(c){var P,_,D,y,g=(c=c||{}).eventBus,v=c.events,T=c.dashMetrics,k=c.fragmentLoader,N=c.debug,B=c.streamInfo,x=c.type;function ee(He){var re;return!!He&&(re=!1,D.some(function(z){if(function(ae,re){return!isNaN(ae.index)&&ae.startTime===re.startTime&&ae.adaptationIndex===re.adaptationIndex&&ae.type===re.type}(He,z)||function(ae,re){return isNaN(ae.index)&&isNaN(re.index)&&ae.quality===re.quality}(He,z)||function(ae,re){return ae.action===S.default.ACTION_COMPLETE&&ae.action===re.action}(He,z))return re=!0}),re)}function Te(He){return isNaN(He.duration)?.25:Math.min(He.duration/8,.5)}function q(He){D=D.filter(function(De){var he=Te(De);return isNaN(De.startTime)||void 0!==He&&De.startTime>=He-he})}function H(He,De){De<=He+.5||(D=D.filter(function(he){var Y=Te(he);return isNaN(he.startTime)||he.startTime>=De-Y||isNaN(he.duration)||he.startTime+he.duration<=He+Y}))}function xe(He,De,he){for(var J=He.length-1;J>=0;J--){var Me=He[J],ae=Me.startTime,re=ae+Me.duration;if(he=isNaN(he)?Te(Me):he,!isNaN(ae)&&!isNaN(re)&&De+he>=ae&&De-he<re||isNaN(ae)&&isNaN(De))return Me}return null}function Ee(He,De){T.addSchedulingInfo(He,De),T.addRequestsQueue(He.mediaType,y,D)}function Ie(He){He.sender===k&&(y.splice(y.indexOf(He.request),1),He.response&&!He.error&&D.push(He.request),Ee(He.request,He.error?L:j),g.trigger(v.FRAGMENT_LOADING_COMPLETED,{request:He.request,response:He.response,error:He.error,sender:this},{streamId:B.id,mediaType:x}))}function Re(He){He.sender===k&&g.trigger(v.FRAGMENT_LOADING_PROGRESS,{request:He.request,response:He.response,error:He.error,sender:this},{streamId:B.id,mediaType:x})}function Pe(He){He.sender===k&&g.trigger(v.FRAGMENT_LOADING_ABANDONED,{request:He.request},{streamId:B.id,mediaType:x})}function ke(){D=[],y=[]}return P={getStreamId:function I(){return B.id},getType:function G(){return x},getRequests:function ue(He){var he=[];return(He?He.state instanceof Array?He.state:[He.state]:[]).forEach(function(Y){var J=function Oe(He){var De;switch(He){case R:De=y;break;case j:De=D;break;default:De=[]}return De}(Y);he=he.concat(function ve(He,De){return De.hasOwnProperty("time")?[xe(He,De.time,De.threshold)]:He.filter(function(he){for(var Y in De)if("state"!==Y&&De.hasOwnProperty(Y)&&he[Y]!=De[Y])return!1;return!0})}(J,He))}),he},isFragmentLoaded:ee,isFragmentLoadedOrPending:function de(He){var Y,De=!1,he=0;if(!(De=ee(He)))for(he=0;he<y.length;he++)He.url===(Y=y[he]).url&&He.startTime===Y.startTime&&(De=!0);return De},removeExecutedRequestsBeforeTime:q,removeExecutedRequestsAfterTime:function se(He){D=D.filter(function(De){return isNaN(De.startTime)||void 0!==He&&De.startTime<He})},syncExecutedRequestsWithBufferedRange:function ce(He,De){if(He&&0!==He.length){for(var he=0,Y=0,J=He.length;Y<J;Y++)H(he,He.start(Y)),he=He.end(Y);De>0&&H(he,De)}else q()},abortRequests:function ne(){_.debug("abort requests"),k.abort(),y=[]},executeRequest:function pe(He){He.action===S.default.ACTION_DOWNLOAD?(Ee(He,R),y.push(He),function me(He){g.trigger(v.FRAGMENT_LOADING_STARTED,{request:He},{streamId:B.id,mediaType:x}),k.load(He)}(He)):_.warn("Unknown request action.")},reset:function Be(){g.off(v.LOADING_COMPLETED,Ie,this),g.off(v.LOADING_DATA_PROGRESS,Re,this),g.off(v.LOADING_ABANDONED,Pe,this),k&&k.reset(),ke()},resetInitialSettings:ke,addExecutedRequest:function qe(He){D.push(He)}},function A(){_=N.getLogger(P),ke(),g.on(v.LOADING_COMPLETED,Ie,P),g.on(v.LOADING_DATA_PROGRESS,Re,P),g.on(v.LOADING_ABANDONED,Pe,P)}(),P}b.__dashjs_factory_name="FragmentModel";var f=e.default.getClassFactory(b);f.FRAGMENT_MODEL_LOADING=R,f.FRAGMENT_MODEL_EXECUTED=j,f.FRAGMENT_MODEL_CANCELED="canceled",f.FRAGMENT_MODEL_FAILED=L,e.default.updateClassFactory(b.__dashjs_factory_name,f),O.default=f},"./src/streaming/models/LowLatencyThroughputModel.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/Debug.js"),S=r("./src/core/FactoryMaker.js");function R(){var g,v,c=this.context,T={};function k(){v=Object(e.default)(c).getInstance().getLogger(g)}function N(D){for(var y={},A=0,I=0,G=0,ee=0,de=D.length,ue=0;ue<de;++ue)A+=D[ue].chunkDownloadTimeRelativeMS,I+=D[ue].bufferLevel,G+=D[ue].chunkDownloadTimeRelativeMS*D[ue].bufferLevel,ee+=D[ue].chunkDownloadTimeRelativeMS*D[ue].chunkDownloadTimeRelativeMS;return y.m=(G-A*I/de)/(ee-A*A/de),y.b=I/de-y.m*A/de,function(Te){return y.m*Te+y.b}}function B(D){var A,y=!0,I=D.reduce(function(G,ee){return G+ee.bufferLevelAtSegmentEnd},0)/D.length;return D.forEach(function(G){Math.abs(G.bufferLevelAtSegmentEnd/G.bufferLevelAtSegmentStart)<.95&&(y=!1),G.bufferLevelAtSegmentEnd/I<.8&&(y=!1),A?A>G.bitrate&&(y=!1):A=G.bitrate}),y}return g={setup:k,addMeasurement:function _(D,y,A,I,G){D&&D.mediaType&&!T[D.mediaType]&&(T[D.mediaType]=[]);var ee=D.mediaInfo.bitrateList.find(function(de){return de.id===D.representationId});T[D.mediaType].push({index:D.index,repId:D.representationId,mediaType:D.mediaType,requestTimeMS:I,adjustedAvailabilityStartTimeMS:D.availabilityStartTime.getTime(),segDurationMS:1e3*D.duration,chunksDurationMS:A.reduce(function(de,ue){return de+ue.chunkDownloadDurationMS},0),segmentBytes:A.reduce(function(de,ue){return de+ue.chunkBytes},0),bitrate:ee&&ee.bandwidth,bitrateList:D.mediaInfo.bitrateList,chunkMeasurements:A,fetchDownloadDurationMS:y,throughputCapacityDelayMS:G,getEstimatedBufferLevel:N(A.slice(1))}),T[D.mediaType].length>10&&T[D.mediaType].shift()},getThroughputCapacityDelayMS:function P(D,y){var A=T[D.mediaType]&&T[D.mediaType].slice(-3);return!A||A.length<3||!B(A)?0:y/4>250?250:y/4},getEstimatedDownloadDurationMS:function x(D){var y=T[D.mediaType].slice(-1).pop(),A=T[D.mediaType].slice(-3),I=y.chunkMeasurements.slice(-1).pop().chunkDownloadTimeRelativeMS;y.bufferLevelAtSegmentStart=y.getEstimatedBufferLevel(I/2),y.bufferLevelAtSegmentEnd=y.getEstimatedBufferLevel(I);var G=B(A),ee=G?.6:.8;if(y.isBufferStable&&1.05*y.segDurationMS<y.fetchDownloadDurationMS)return y.fetchDownloadDurationMS;if(!G||y.segDurationMS<y.fetchDownloadDurationMS||y.adjustedAvailabilityStartTimeMS<=y.requestTimeMS+y.throughputCapacityDelayMS-y.segDurationMS)return.8*y.fetchDownloadDurationMS;for(var de=y.requestTimeMS+y.throughputCapacityDelayMS-y.adjustedAvailabilityStartTimeMS,ue=0,Te=0,q=0,se=0;se<y.chunkMeasurements.length;se++){var H=y.chunkMeasurements[se];if(de<Te+H.chunkDownloadDurationMS)break;Te+=H.chunkDownloadDurationMS,ue+=H.chunkBytes,q++}if(de<0&&v.warn("request time was before adjusted availibitly start time"),ue&&Te&&q>.2*y.chunkMeasurements.length){var ne=y.segmentBytes/(ue/Te);return y.fetchDownloadDurationMS<ne?y.fetchDownloadDurationMS*ee:ne*ee}var pe=y.bitrate;return y.bitrateList.some(function(me){if(me.bandwidth>y.bitrate)return pe=me.bandwidth,!0}),pe===y.bitrate?y.fetchDownloadDurationMS*ee:ee*y.segmentBytes*8*1e3/pe}},k(),g}R.__dashjs_factory_name="LowLatencyThroughputModel",O.default=S.default.getSingletonFactory(R)},"./src/streaming/models/ManifestModel.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/EventBus.js"),S=r("./src/core/events/Events.js"),R=r("./src/core/FactoryMaker.js");function j(){var f,U=this.context,L=Object(e.default)(U).getInstance();return{getValue:function c(){return f},setValue:function g(v){f=v,v&&L.trigger(S.default.MANIFEST_LOADED,{data:v})}}}j.__dashjs_factory_name="ManifestModel",O.default=R.default.getSingletonFactory(j)},"./src/streaming/models/MediaPlayerModel.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/Debug.js"),S=r("./src/core/FactoryMaker.js"),R=r("./src/core/Settings.js"),v=-.5;function k(){var N,B,x,P,_=this.context,D=Object(R.default)(_).getInstance();function I(pe,me){return isNaN(pe)?0:pe>0?(me&&B.warn("Supplied minimum playback rate is a positive value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):pe<v?(me&&B.warn("Supplied minimum playback rate is out of range and will be limited to ".concat(v,": ").concat(-50,"% playback speed.")),v):pe}function G(pe,me){return isNaN(pe)?0:pe<0?(me&&B.warn("Supplied maximum playback rate is a negative value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):pe>1?(me&&B.warn("Supplied maximum playback rate is out of range and will be limited to ".concat(1,": ").concat(200,"% playback speed.")),1):pe}function se(){var pe=D.get().streaming.buffer.stableBufferTime>0?D.get().streaming.buffer.stableBufferTime:D.get().streaming.buffer.fastSwitchEnabled?20:12,me=x.getLiveDelay();return!isNaN(me)&&me>0?Math.min(pe,me):pe}return N={getCatchupMaxDrift:function ee(){if(!isNaN(D.get().streaming.liveCatchup.maxDrift)&&D.get().streaming.liveCatchup.maxDrift>0)return D.get().streaming.liveCatchup.maxDrift;var pe=P.getServiceDescriptionSettings();return pe&&pe.liveCatchup&&!isNaN(pe.liveCatchup.maxDrift)&&pe.liveCatchup.maxDrift>0?pe.liveCatchup.maxDrift:12},getCatchupModeEnabled:function ue(){return null!==D.get().streaming.liveCatchup.enabled?D.get().streaming.liveCatchup.enabled:x.getInitialCatchupModeActivated()},getStableBufferTime:se,getInitialBufferLevel:function q(){var pe=D.get().streaming.buffer.initialBufferLevel;return isNaN(pe)||pe<0?0:Math.min(se(),pe)},getRetryAttemptsForType:function H(pe){var me=isNaN(D.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:D.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return x.getLowLatencyModeEnabled()?D.get().streaming.retryAttempts[pe]*me:D.get().streaming.retryAttempts[pe]},getRetryIntervalsForType:function ce(pe){var me=isNaN(D.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:D.get().streaming.retryIntervals.lowLatencyReductionFactor;return x.getLowLatencyModeEnabled()?D.get().streaming.retryIntervals[pe]/me:D.get().streaming.retryIntervals[pe]},getCatchupPlaybackRates:function de(pe){var me=D.get().streaming.liveCatchup.playbackRate;if(!isNaN(me.min)||!isNaN(me.max))return{min:I(me.min,pe),max:G(me.max,pe)};var xe=P.getServiceDescriptionSettings();if(xe&&xe.liveCatchup&&(!isNaN(xe.liveCatchup.playbackRate.min)||!isNaN(xe.liveCatchup.playbackRate.max))){var ve=xe.liveCatchup.playbackRate;return{min:I(ve.min,pe),max:G(ve.max,pe)}}return{min:-.5,max:.5}},getAbrBitrateParameter:function Te(pe,me){try{var xe=D.get().streaming.abr[pe][me];if(!isNaN(xe)&&-1!==xe)return xe;var ve=P.getServiceDescriptionSettings();return ve&&ve[pe]&&!isNaN(ve[pe][me])?ve[pe][me]:-1}catch(Oe){return-1}},setConfig:function A(pe){pe.playbackController&&(x=pe.playbackController),pe.serviceDescriptionController&&(P=pe.serviceDescriptionController)},reset:function ne(){}},function y(){B=Object(e.default)(_).getInstance().getLogger(N)}(),N}k.__dashjs_factory_name="MediaPlayerModel",O.default=S.default.getSingletonFactory(k)},"./src/streaming/models/MetricsModel.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/constants/Constants.js"),S=r("./src/streaming/constants/MetricsConstants.js"),R=r("./src/streaming/vo/MetricsList.js"),j=r("./src/streaming/vo/metrics/HTTPRequest.js"),U=r("./src/streaming/vo/metrics/RepresentationSwitch.js"),L=r("./src/streaming/vo/metrics/BufferLevel.js"),b=r("./src/streaming/vo/metrics/BufferState.js"),f=r("./src/streaming/vo/metrics/DVRInfo.js"),c=r("./src/streaming/vo/metrics/DroppedFrames.js"),g=r("./src/streaming/vo/metrics/ManifestUpdate.js"),v=r("./src/streaming/vo/metrics/SchedulingInfo.js"),T=r("./src/core/EventBus.js"),k=r("./src/streaming/vo/metrics/RequestsQueue.js"),N=r("./src/core/events/Events.js"),B=r("./src/core/FactoryMaker.js");function x(P){var A,I,_=(P=P||{}).settings,D=this.context,y=Object(T.default)(D).getInstance();function ee(){y.trigger(N.default.METRICS_CHANGED)}function de(Y){y.trigger(N.default.METRIC_CHANGED,{mediaType:Y}),ee()}function ue(Y,J,Me){y.trigger(N.default.METRIC_UPDATED,{mediaType:Y,metric:J,value:Me}),de(Y)}function Te(Y,J,Me){y.trigger(N.default.METRIC_ADDED,{mediaType:Y,metric:J,value:Me}),de(Y)}function H(Y,J){var Me=null;return Y&&(I.hasOwnProperty(Y)?Me=I[Y]:J||(Me=new R.default,I[Y]=Me)),Me}function ce(Y,J,Me){var ae=H(Y);null!==ae&&(ae[J].push(Me),ae[J].length>_.get().streaming.metrics.maxListDepth&&ae[J].shift())}function xe(Y,J,Me){ce(Y,J,Me),Te(Y,J,Me)}return A={clearCurrentMetricsForType:function q(Y){delete I[Y],de(Y)},clearAllCurrentMetrics:function se(){I={},ee()},getMetricsFor:H,addHttpRequest:function pe(Y,J,Me,ae,re,z,te,X,Z,W,oe,be,Fe,We,at,et){var ut=new j.HTTPRequest;z&&z!==ae&&(pe(Y,null,Me,ae,re,null,null,X,Z,null,null,null,Fe,null,null,et),ut.actualurl=z),ut.tcpid=J,ut.type=Me,ut.url=ae,ut.range=X,ut.trequest=Z,ut.tresponse=W,ut.responsecode=be,ut._tfinish=oe,ut._stream=Y,ut._mediaduration=Fe,ut._quality=re,ut._responseHeaders=We,ut._serviceLocation=te,ut._fileLoaderType=et,at?at.forEach(function(Ot){!function ne(Y,J,Me,ae){var re=new j.HTTPRequestTrace;return re.s=J,re.d=Me,re.b=ae,Y.trace.push(re),Y.interval||(Y.interval=0),Y.interval+=Me,re}(ut,Ot.s,Ot.d,Ot.b)}):(delete ut.interval,delete ut.trace),xe(Y,S.default.HTTP_REQUEST,ut)},addRepresentationSwitch:function me(Y,J,Me,ae,re){var z=new U.default;z.t=J,z.mt=Me,z.to=ae,re?z.lto=re:delete z.lto,xe(Y,S.default.TRACK_SWITCH,z)},addBufferLevel:function ve(Y,J,Me){var ae=new L.default;ae.t=J,ae.level=Me,xe(Y,S.default.BUFFER_LEVEL,ae)},addBufferState:function Oe(Y,J,Me){var ae=new b.default;ae.target=Me,ae.state=J,xe(Y,S.default.BUFFER_STATE,ae)},addDVRInfo:function Ee(Y,J,Me,ae){var re=new f.default;re.time=J,re.range=ae,re.manifestInfo=Me,xe(Y,S.default.DVR_INFO,re)},addDroppedFrames:function Ie(Y,J){var Me=new c.default,ae=H(Y).DroppedFrames;!J||(Me.time=J.creationTime,Me.droppedFrames=J.droppedVideoFrames,!(ae.length>0&&ae[ae.length-1]==Me)&&xe(Y,S.default.DROPPED_FRAMES,Me))},addSchedulingInfo:function Re(Y,J,Me,ae,re,z,te,X,Z){var W=new v.default;W.mediaType=Y,W.t=J,W.type=Me,W.startTime=ae,W.availabilityStartTime=re,W.duration=z,W.quality=te,W.range=X,W.state=Z,xe(Y,S.default.SCHEDULING_INFO,W)},addRequestsQueue:function Pe(Y,J,Me){var ae=new k.default;ae.loadingRequests=J,ae.executedRequests=Me,H(Y).RequestsQueue=ae,Te(Y,S.default.REQUESTS_QUEUE,ae)},addManifestUpdate:function ke(Y,J,Me,ae,re,z,te,X,Z,W){var oe=new g.ManifestUpdate;oe.mediaType=Y,oe.type=J,oe.requestTime=Me,oe.fetchTime=ae,oe.availabilityStartTime=re,oe.presentationStartTime=z,oe.clientTimeOffset=te,oe.currentTime=X,oe.buffered=Z,oe.latency=W,ce(e.default.STREAM,S.default.MANIFEST_UPDATE,oe),Te(Y,S.default.MANIFEST_UPDATE,oe)},updateManifestUpdateInfo:function Be(Y,J){if(Y){for(var Me in J)Y[Me]=J[Me];ue(Y.mediaType,S.default.MANIFEST_UPDATE,Y)}},addManifestUpdateStreamInfo:function qe(Y,J,Me,ae,re){if(Y){var z=new g.ManifestUpdateStreamInfo;z.id=J,z.index=Me,z.start=ae,z.duration=re,Y.streamInfo.push(z),ue(Y.mediaType,S.default.MANIFEST_UPDATE_STREAM_INFO,Y)}},addManifestUpdateRepresentationInfo:function He(Y,J,Me,ae,re,z,te,X){if(Y&&Y.representationInfo){var Z=new g.ManifestUpdateRepresentationInfo;Z.id=J,Z.index=Me,Z.streamIndex=ae,Z.mediaType=re,Z.startNumber=te,Z.fragmentInfoType=X,Z.presentationTimeOffset=z,Y.representationInfo.push(Z),ue(Y.mediaType,S.default.MANIFEST_UPDATE_TRACK_INFO,Y)}},addPlayList:function De(Y){Y.trace&&Array.isArray(Y.trace)?Y.trace.forEach(function(J){J.hasOwnProperty("subreplevel")&&!J.subreplevel&&delete J.subreplevel}):delete Y.trace,xe(e.default.STREAM,S.default.PLAY_LIST,Y)},addDVBErrors:function he(Y){xe(e.default.STREAM,S.default.DVB_ERRORS,Y)}},function G(){I={}}(),A}x.__dashjs_factory_name="MetricsModel",O.default=B.default.getSingletonFactory(x)},"./src/streaming/models/URIFragmentModel.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/vo/URIFragmentData.js"),S=r("./src/core/FactoryMaker.js");function R(){var U;return{initialize:function L(f){if(U=new e.default,!f)return null;var c=f.indexOf("#");if(-1!==c)for(var g=f.substr(c+1).split("&"),v=0,T=g.length;v<T;++v){var k=g[v],N=k.indexOf("=");if(-1!==N){var B=k.substring(0,N);U.hasOwnProperty(B)&&(U[B]=k.substr(N+1))}}},getURIFragmentData:function b(){return U}}}R.__dashjs_factory_name="URIFragmentModel",O.default=S.default.getSingletonFactory(R)},"./src/streaming/models/VideoModel.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js"),S=r("./src/core/EventBus.js"),R=r("./src/core/events/Events.js"),j=r("./src/core/Debug.js"),U=r("./src/streaming/constants/Constants.js"),L=new Map([[U.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,"loadedmetadata"],[U.default.VIDEO_ELEMENT_READY_STATES.HAVE_CURRENT_DATA,"loadeddata"],[U.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,"canplay"],[U.default.VIDEO_ELEMENT_READY_STATES.HAVE_ENOUGH_DATA,"canplaythrough"]]);function b(){var f,c,g,v,T,k,x=this.context,P=Object(S.default)(x).getInstance(),_=[];function I(){g&&(g.playbackRate=1,g.removeEventListener("canplay",I))}function xe(){return _.length>0}function Ie(){if(g&&xe()&&0===g.playbackRate){var tt=document.createEvent("Event");tt.initEvent("waiting",!0,!1),g.dispatchEvent(tt)}}function J(tt,Et){g&&g.addEventListener(tt,Et)}function Me(tt,Et){g&&g.removeEventListener(tt,Et)}function ae(){return g?g.readyState:NaN}function re(){return g?g.buffered:null}function Fe(tt,Et,Yt,vt,At){if(g)for(var Dt=0;Dt<g.textTracks.length;Dt++)if(g.textTracks[Dt].kind===tt&&(!Et||g.textTracks[Dt].label==Et)&&g.textTracks[Dt].language===Yt&&g.textTracks[Dt].isTTML===vt&&g.textTracks[Dt].isEmbedded===At)return g.textTracks[Dt];return null}function ut(tt,Et){tt===U.default.VIDEO_ELEMENT_READY_STATES.HAVE_NOTHING||ae()>=tt?Et():function Ot(tt,Et){J(tt,function vt(){Me(tt,vt),Et(tt)})}(L.get(tt),Et)}return f={initialize:function y(){P.on(R.default.PLAYBACK_PLAYING,Ie,this)},setCurrentTime:function ee(tt,Et){v=tt,ut(U.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){if(g){if(g.currentTime===v)return void(v=NaN);try{v=Et?function de(tt){var Et=re(),Yt=tt,vt=9999999999;if(Et)for(var At=0;At<Et.length;At++){var Dt=Et.start(At),$t=Et.end(At),Kt=Math.abs(Dt-tt),Xt=Math.abs($t-tt);if(tt>=Dt&&tt<=$t)return tt;Kt<vt&&(vt=Kt,Yt=Dt),Xt<vt&&(vt=Xt,Yt=$t)}return Yt}(v):v,g.currentTime=v,v=NaN}catch(Yt){0===g.readyState&&Yt.code===Yt.INVALID_STATE_ERR&&setTimeout(function(){g.currentTime=v,v=NaN},400)}}})},play:function Pe(){if(g){g.autoplay=!0;var tt=g.play();tt&&tt.catch&&"undefined"!=typeof Promise&&tt.catch(function(Et){"NotAllowedError"===Et.name&&P.trigger(R.default.PLAYBACK_NOT_ALLOWED),c.warn("Caught pending play exception - continuing (".concat(Et,")"))})}},isPaused:function ke(){return g?g.paused:null},pause:function Be(){g&&(g.pause(),g.autoplay=!1)},isStalled:xe,isSeeking:function qe(){return g?g.seeking||!isNaN(v):null},getTime:function He(){return g?isNaN(v)?g.currentTime:v:null},getPlaybackRate:function De(){return g?g.playbackRate:null},setPlaybackRate:function G(tt){!g||(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&g.readyState<=2&&tt>0?g.addEventListener("canplay",I):g.playbackRate=tt)},getPlayedRanges:function he(){return g?g.played:null},getEnded:function Y(){return g?g.ended:null},setStallState:function me(tt,Et){!function Ee(tt,Et){Et?function ve(tt){null===tt||!g||g.seeking||-1!==_.indexOf(tt)||_.push(tt)}(tt):function Oe(tt){var Et=_.indexOf(tt);null!==tt&&-1!==Et&&_.splice(Et,1)}(tt)}(tt,Et)},getElement:function ue(){return g},setElement:function Te(tt){if(!(null==tt||tt&&/^(VIDEO|AUDIO)$/i.test(tt.nodeName)))throw"element is not video or audio DOM type!";(g=tt)&&(g.preload="auto")},setSource:function q(tt){g&&(tt?g.src=tt:(g.removeAttribute("src"),g.load()))},getSource:function se(){return g?g.src:null},getTTMLRenderingDiv:function H(){return T},setTTMLRenderingDiv:function ne(tt){(T=tt).style.position="absolute",T.style.display="flex",T.style.overflow="hidden",T.style.pointerEvents="none",T.style.top=0,T.style.left=0},getVttRenderingDiv:function ce(){return k},setVttRenderingDiv:function pe(tt){k=tt},getPlaybackQuality:function Re(){if(!g)return null;var tt="webkitDroppedFrameCount"in g&&"webkitDecodedFrameCount"in g,Yt=null;return"getVideoPlaybackQuality"in g?Yt=g.getVideoPlaybackQuality():tt&&(Yt={droppedVideoFrames:g.webkitDroppedFrameCount,totalVideoFrames:g.webkitDroppedFrameCount+g.webkitDecodedFrameCount,creationTime:new Date}),Yt},addEventListener:J,removeEventListener:Me,getReadyState:ae,getBufferRange:re,getClientWidth:function z(){return g?g.clientWidth:NaN},getClientHeight:function te(){return g?g.clientHeight:NaN},getTextTracks:function be(){return g?g.textTracks:[]},getTextTrack:Fe,addTextTrack:function We(tt,Et,Yt,vt,At){if(!g)return null;var Dt=Fe(tt,Et,Yt,vt,At);return Dt||((Dt=g.addTextTrack(tt,Et,Yt)).isEmbedded=At,Dt.isTTML=vt),Dt},appendChild:function at(tt){g&&(g.appendChild(tt),void 0!==tt.isTTML&&(g.textTracks[g.textTracks.length-1].isTTML=tt.isTTML,g.textTracks[g.textTracks.length-1].isEmbedded=tt.isEmbedded))},removeChild:function et(tt){g&&g.removeChild(tt)},getVideoWidth:function X(){return g?g.videoWidth:NaN},getVideoHeight:function Z(){return g?g.videoHeight:NaN},getVideoRelativeOffsetTop:function W(){var tt=g.parentNode.host||g.parentNode;return tt?g.getBoundingClientRect().top-tt.getBoundingClientRect().top:NaN},getVideoRelativeOffsetLeft:function oe(){var tt=g.parentNode.host||g.parentNode;return tt?g.getBoundingClientRect().left-tt.getBoundingClientRect().left:NaN},waitForReadyState:ut,reset:function A(){P.off(R.default.PLAYBACK_PLAYING,Ie,this)}},function D(){c=Object(j.default)(x).getInstance().getLogger(f),v=NaN}(),f}b.__dashjs_factory_name="VideoModel",O.default=e.default.getSingletonFactory(b)},"./src/streaming/net/FetchLoader.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js"),S=r("./src/core/Settings.js"),R=r("./src/streaming/constants/Constants.js"),j=r("./src/streaming/utils/RequestModifier.js");function U(N,B){return function f(N){if(Array.isArray(N))return N}(N)||function b(N,B){var x=null==N?null:"undefined"!=typeof Symbol&&N[Symbol.iterator]||N["@@iterator"];if(null!=x){var P,_,D,y,A=[],I=!0,G=!1;try{if(D=(x=x.call(N)).next,0===B){if(Object(x)!==x)return;I=!1}else for(;!(I=(P=D.call(x)).done)&&(A.push(P.value),A.length!==B);I=!0);}catch(ee){G=!0,_=ee}finally{try{if(!I&&null!=x.return&&(y=x.return(),Object(y)!==y))return}finally{if(G)throw _}}return A}}(N,B)||g(N,B)||function L(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(N,B){if(N){if("string"==typeof N)return v(N,B);var x=Object.prototype.toString.call(N).slice(8,-1);if("Object"===x&&N.constructor&&(x=N.constructor.name),"Map"===x||"Set"===x)return Array.from(N);if("Arguments"===x||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x))return v(N,B)}}function v(N,B){(null==B||B>N.length)&&(B=N.length);for(var x=0,P=new Array(B);x<B;x++)P[x]=N[x];return P}function T(N){var A,B=this.context,x=(N=N||{}).requestModifier,P=N.lowLatencyThroughputModel,_=N.boxParser,D=Object(S.default)(B).getInstance();function ee(H){var ve,ce=new Date,ne=H.request,pe=new Headers;if(ne.range&&pe.append("Range","bytes="+ne.range),H.headers)for(var me in H.headers){var xe=H.headers[me];xe&&pe.append(me,xe)}ne.requestStartDate||(ne.requestStartDate=ce),x&&x.modifyRequestHeader&&x.modifyRequestHeader({setRequestHeader:function(ke,Be){pe.append(ke,Be)}},{url:H.url}),"function"==typeof window.AbortController&&(ve=new AbortController,H.abortController=ve,ve.signal.onabort=H.onabort);var Oe={method:H.method,headers:pe,credentials:H.withCredentials?"include":void 0,signal:ve?ve.signal:void 0},Ee=D.get().streaming.abr.fetchThroughputCalculationMode,Ie=Date.now(),Re=0;new Promise(function(Pe){if(Ee===R.default.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&P&&(Re=P.getThroughputCapacityDelayMS(ne,1e3*A.getCurrentBufferLevel(ne.mediaType))))return setTimeout(Pe,Re);Pe()}).then(function(){var Pe=Date.now();fetch(H.url,Oe).then(function(ke){H.response||(H.response={}),H.response.status=ke.status,H.response.statusText=ke.statusText,H.response.responseURL=ke.url,ke.ok||H.onerror();var He,Be="",qe=function c(N,B){var x="undefined"!=typeof Symbol&&N[Symbol.iterator]||N["@@iterator"];if(!x){if(Array.isArray(N)||(x=g(N))||B&&N&&"number"==typeof N.length){x&&(N=x);var P=0,_=function(){};return{s:_,n:function(){return P>=N.length?{done:!0}:{done:!1,value:N[P++]}},e:function(G){throw G},f:_}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var A,D=!0,y=!1;return{s:function(){x=x.call(N)},n:function(){var G=x.next();return D=G.done,G},e:function(G){y=!0,A=G},f:function(){try{!D&&null!=x.return&&x.return()}finally{if(y)throw A}}}}(ke.headers.keys());try{for(qe.s();!(He=qe.n()).done;){var De=He.value;Be+=De+": "+ke.headers.get(De)+"\r\n"}}catch(ut){qe.e(ut)}finally{qe.f()}if(H.response.responseHeaders=Be,!ke.body)return ke.arrayBuffer().then(function(ut){H.response.response=ut,H.progress({loaded:ut.byteLength,total:ut.byteLength,stream:!1}),H.onload(),H.onend()});var tt,Et,he=parseInt(ke.headers.get("Content-Length"),10),Y=0,J=!1,Me=new Uint8Array,ae=0;if(Ee===R.default.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&P){var z=Pe,te=0,Z=U(ke.body.tee(),2),oe=Z[1];tt=Z[0].getReader(),Et=[],tt.read().then(function Yt(vt){var At=vt.value,Dt=vt.done;if(te=Date.now(),At&&At.length){var $t=te-z,Kt=At.length;Et.push({chunkDownloadTimeRelativeMS:te-Pe,chunkDownloadDurationMS:$t,chunkBytes:Kt,kbps:Math.round(8*Kt/($t/1e3)),bufferLevel:A.getCurrentBufferLevel(ne.mediaType)})}if(Dt){var Xt=te-Pe,ln=Et.reduce(function(Bn,Rn){return Bn+Rn.chunkBytes},0);return P.addMeasurement(ne,Xt,Et,Ie,Re,Be),void H.progress({loaded:ln,total:ln,lengthComputable:!0,time:P.getEstimatedDownloadDurationMS(ne),stream:!0})}return z=Date.now(),tt.read().then(Yt)}),H.reader=oe.getReader()}else H.reader=ke.body.getReader();var be=[],Fe=[],We=[],at=!0;de(H,function ut(Ot){var tt=Ot.value;if(Ot.done){if(Me){if(Ee!==R.default.ABR_FETCH_THROUGHPUT_CALCULATION_AAST){var Yt=null,vt=null;Ee===R.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING?(Yt=function se(H,ce){try{var ne,pe;ne=H.filter(function(Pe,ke){return ke<H.length-1}),pe=ce.filter(function(Pe,ke){return ke<ce.length-1});var me=[];if(ne.length>1){for(var xe=0,ve=0,Oe=0;Oe<ne.length;Oe++)if(ne[Oe]&&pe[Oe]){var Ee=pe[Oe].ts-ne[Oe].ts;if(Ee>1)me.push(8*pe[Oe].bytes/Ee);else{0===ve&&(ve=ne[Oe].ts);var Ie=pe[Oe].ts-ve;Ie>1?(me.push(8*xe/Ie),xe=0,ve=0):xe+=pe[Oe].bytes}}if(me.length>0)return me.reduce(function(Pe,ke){return Pe+ke},0)/me.length}return null}catch(Pe){return null}}(Fe,We))&&(vt=8*Y/Yt):Ee===R.default.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA&&(vt=q(be,Y)),H.progress({loaded:Y,total:isNaN(he)?Y:he,lengthComputable:!0,time:vt,stream:!0})}H.response.response=Me.buffer}return H.onload(),void H.onend()}if(tt&&tt.length>0){Me=function ue(H,ce){if(0===H.length)return ce;var ne=new Uint8Array(H.length+ce.length);return ne.set(H),ne.set(ce,H.length),ne}(Me,tt),Y+=tt.length,be.push({ts:Date.now(),bytes:tt.length}),Ee===R.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&at&&_.findLastTopIsoBoxCompleted(["moof"],Me,ae).found&&(at=!1,Fe.push({ts:performance.now(),bytes:tt.length}));var Dt=_.findLastTopIsoBoxCompleted(["moov","mdat"],Me,ae);if(Dt.found){var Kt,$t=Dt.lastCompletedOffset+Dt.size;Ee===R.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&!at&&(at=!0,We.push({ts:performance.now(),bytes:Me.length})),$t===Me.length?(Kt=Me,Me=new Uint8Array):(Kt=new Uint8Array(Me.subarray(0,$t)),Me=Me.subarray($t)),H.progress({data:Kt.buffer,lengthComputable:!1,noTrace:!0}),ae=0}else ae=Dt.lastCompletedOffset,J||(H.progress({lengthComputable:!1,noTrace:!0}),J=!0)}de(H,ut)})}).catch(function(ke){H.onerror&&H.onerror(ke)})})}function de(H,ce){H.reader.read().then(ce).catch(function(ne){H.onerror&&200===H.response.status&&H.onerror(ne)})}function q(H,ce){try{if((H=H.filter(function(me){return me.bytes>ce/4/H.length})).length>1){var ne=0,pe=(H[H.length-1].ts-H[0].ts)/H.length;return H.forEach(function(me,xe){var ve=H[xe+1];if(ve){var Oe=ve.ts-me.ts;ne+=Oe<pe?Oe:0}}),ne}return null}catch(me){return null}}return{load:function G(H){x&&x.modifyRequest?Object(j.modifyRequest)(H,x).then(function(){return ee(H)}):ee(H)},abort:function Te(H){if(H.abortController)H.abortController.abort();else if(H.reader)try{H.reader.cancel(),H.onabort()}catch(ce){}},calculateDownloadedTime:q,setup:function I(H){A=H.dashMetrics}}}T.__dashjs_factory_name="FetchLoader";var k=e.default.getClassFactory(T);O.default=k},"./src/streaming/net/HTTPLoader.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/net/XHRLoader.js"),S=r("./src/streaming/net/FetchLoader.js"),R=r("./src/streaming/vo/metrics/HTTPRequest.js"),j=r("./src/core/FactoryMaker.js"),U=r("./src/streaming/vo/DashJSError.js"),L=r("./src/streaming/models/CmcdModel.js"),b=r("./src/core/Utils.js"),f=r("./src/core/Debug.js"),c=r("./src/core/EventBus.js"),g=r("./src/core/events/Events.js"),v=r("./src/core/Settings.js"),T=r("./src/streaming/constants/Constants.js"),k=r("./src/streaming/models/LowLatencyThroughputModel.js"),N=r("./src/streaming/models/CustomParametersModel.js");function B(A){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(I){return typeof I}:function(I){return I&&"function"==typeof Symbol&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I})(A)}function x(A,I,G){return(I=function P(A){var I=function _(A,I){if("object"!==B(A)||null===A)return A;var G=A[Symbol.toPrimitive];if(void 0!==G){var ee=G.call(A,I||"default");if("object"!==B(ee))return ee;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===I?String:Number)(A)}(A,"string");return"symbol"===B(I)?I:String(I)}(I))in A?Object.defineProperty(A,I,{value:G,enumerable:!0,configurable:!0,writable:!0}):A[I]=G,A}function D(A){var ne,pe,me,xe,ve,Oe,Ee,Ie,Re,I=this.context,G=(A=A||{}).errHandler,ee=A.dashMetrics,de=A.mediaPlayerModel,ue=A.requestModifier,Te=A.boxParser,q=A.errors,se=A.requestTimeout||0,H=Object(c.default)(I).getInstance(),ce=Object(v.default)(I).getInstance();function ke(De,he){var Z,Y=De.request,J=[],Me=!0,ae=!0,re=new Date,z=re,te=0,X=null;if(!ue||!ee||!G)throw new Error("config object is not correct or missing");var et,W=function(Kt){if(ae=!1,Y.requestStartDate=re,Y.requestEndDate=new Date,Y.firstByteDate=Y.firstByteDate||re,Y.fileLoaderType=X,!Y.checkExistenceOnly){var Xt=Z.response?Z.response.responseURL:null,ln=Z.response?Z.response.status:null,Bn=Z.response&&Z.response.getAllResponseHeaders?Z.response.getAllResponseHeaders():Z.response?Z.response.responseHeaders:[];ee.addHttpRequest(Y,Xt,ln,Bn,Kt?J:null),Y.type===R.HTTPRequest.MPD_TYPE&&ee.addManifestUpdate(Y)}},oe=function(){if(-1!==pe.indexOf(Z)&&(pe.splice(pe.indexOf(Z),1),ae))if(W(!1),he>0){try{ce.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&Y.type===R.HTTPRequest.MEDIA_SEGMENT_TYPE&&de.getRetryAttemptsForType(R.HTTPRequest.MEDIA_SEGMENT_TYPE)===he&&H.trigger(g.default.ATTEMPT_BACKGROUND_SYNC)}catch(ln){}he--;var Xt={config:De};xe.push(Xt),Xt.timeout=setTimeout(function(){-1!==xe.indexOf(Xt)&&(xe.splice(xe.indexOf(Xt),1),ke(De,he))},de.getRetryIntervalsForType(Y.type))}else{if(Y.type===R.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE)return;G.error(new U.default(ve[Y.type],Y.url+" is not available",{request:Y,response:Z.response})),De.error&&De.error(Y,"error",Z.response.statusText),De.complete&&De.complete(Y,Z.response.statusText)}};Y.hasOwnProperty("availabilityTimeComplete")&&!1===Y.availabilityTimeComplete&&window.fetch&&"arraybuffer"===Y.responseType&&Y.type===R.HTTPRequest.MEDIA_SEGMENT_TYPE?((et=Object(S.default)(I).create({requestModifier:ue,lowLatencyThroughputModel:Ie,boxParser:Te})).setup({dashMetrics:ee}),X=T.default.FILE_LOADER_TYPES.FETCH):(et=Object(e.default)(I).create({requestModifier:ue}),X=T.default.FILE_LOADER_TYPES.XHR);var ut=null,Ot=ue.modifyRequestURL?ue.modifyRequestURL(Y.url):Y.url;if(ce.get().streaming.cmcd&&ce.get().streaming.cmcd.enabled){var tt=ce.get().streaming.cmcd.mode;if(tt===T.default.CMCD_MODE_QUERY){var Et=function Be(De){try{var he=[],Y=Oe.getQueryParameter(De);return Y&&he.push(Y),he}catch(J){return[]}}(Y);Ot=b.default.addAditionalQueryParameterToUrl(Ot,Et)}else tt===T.default.CMCD_MODE_HEADER&&(ut=Oe.getHeaderParameters(Y))}Y.url=Ot;var Yt=Y.checkExistenceOnly?R.HTTPRequest.HEAD:R.HTTPRequest.GET,vt=Ee.getXHRWithCredentialsForType(Y.type);Z={url:Ot,method:Yt,withCredentials:vt,request:Y,onload:function(){Z.response.status>=200&&Z.response.status<=299&&(W(!0),De.success&&De.success(Z.response.response,Z.response.statusText,Z.response.responseURL),De.complete&&De.complete(Y,Z.response.statusText))},onend:oe,onerror:oe,progress:function(Kt){var Xt=new Date;Me&&(Me=!1,(!Kt.lengthComputable||Kt.lengthComputable&&Kt.total!==Kt.loaded)&&(Y.firstByteDate=Xt)),Kt.lengthComputable&&(Y.bytesLoaded=Kt.loaded,Y.bytesTotal=Kt.total),Kt.noTrace||(J.push({s:z,d:Kt.time?Kt.time:Xt.getTime()-z.getTime(),b:[Kt.loaded?Kt.loaded-te:0]}),z=Xt,te=Kt.loaded),De.progress&&Kt&&De.progress(Kt)},onabort:function(){De.abort&&De.abort(Y)},ontimeout:function(Kt){var Xt;Xt=Kt.lengthComputable?"Request timeout: loaded: "+Kt.loaded+", out of: "+Kt.total+" : "+(Kt.loaded/Kt.total*100).toFixed(3)+"% Completed":"Request timeout: non-computable download size",Re.warn(Xt)},loader:et,timeout:se,headers:ut};var At=(new Date).getTime();if(isNaN(Y.delayLoadingTime)||At>=Y.delayLoadingTime)pe.push(Z),et.load(Z);else{var Dt={httpRequest:Z};me.push(Dt),Dt.delayTimeout=setTimeout(function(){if(-1!==me.indexOf(Dt)){me.splice(me.indexOf(Dt),1);try{re=new Date,z=re,pe.push(Dt.httpRequest),et.load(Dt.httpRequest)}catch($t){Dt.httpRequest.onerror()}}},Y.delayLoadingTime-At)}}return ne={load:function qe(De){De.request?ke(De,de.getRetryAttemptsForType(De.request.type)):De.error&&De.error(De.request,"error")},abort:function He(){xe.forEach(function(De){clearTimeout(De.timeout),De.config.request&&De.config.abort&&De.config.abort(De.config.request)}),xe=[],me.forEach(function(De){return clearTimeout(De.delayTimeout)}),me=[],pe.forEach(function(De){De.request.type!==R.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE&&(De.onloadend=De.onerror=De.onprogress=void 0,De.loader.abort(De))}),pe=[]}},function Pe(){var De;Re=Object(f.default)(I).getInstance().getLogger(ne),pe=[],me=[],xe=[],Oe=Object(L.default)(I).getInstance(),Ie=Object(k.default)(I).getInstance(),Ee=Object(N.default)(I).getInstance(),x(De={},R.HTTPRequest.MPD_TYPE,q.DOWNLOAD_ERROR_ID_MANIFEST_CODE),x(De,R.HTTPRequest.XLINK_EXPANSION_TYPE,q.DOWNLOAD_ERROR_ID_XLINK_CODE),x(De,R.HTTPRequest.INIT_SEGMENT_TYPE,q.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),x(De,R.HTTPRequest.MEDIA_SEGMENT_TYPE,q.DOWNLOAD_ERROR_ID_CONTENT_CODE),x(De,R.HTTPRequest.INDEX_SEGMENT_TYPE,q.DOWNLOAD_ERROR_ID_CONTENT_CODE),x(De,R.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,q.DOWNLOAD_ERROR_ID_CONTENT_CODE),x(De,R.HTTPRequest.OTHER_TYPE,q.DOWNLOAD_ERROR_ID_CONTENT_CODE),ve=De}(),ne}D.__dashjs_factory_name="HTTPLoader";var y=j.default.getClassFactory(D);O.default=y},"./src/streaming/net/SchemeLoaderFactory.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js"),S=r("./src/streaming/net/HTTPLoader.js");function R(){var L;function c(){L={}}function v(){c()}return function T(){v()}(),{getLoader:function g(k){for(var N in L)if(L.hasOwnProperty(N)&&k.startsWith(N))return L[N];return S.default},registerLoader:function b(k,N){L[k]=N},unregisterLoader:function f(k){L[k]&&delete L[k]},unregisterAllLoader:c,reset:v}}R.__dashjs_factory_name="SchemeLoaderFactory";var j=e.default.getSingletonFactory(R);O.default=j},"./src/streaming/net/URLLoader.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js"),S=r("./src/streaming/net/SchemeLoaderFactory.js");function R(U){U=U||{};var f,c,L=this.context;return f=Object(S.default)(L).getInstance(),{load:function g(T){if(!c){var k=f.getLoader(T&&T.request?T.request.url:null);c=k(L).create({errHandler:U.errHandler,mediaPlayerModel:U.mediaPlayerModel,requestModifier:U.requestModifier,dashMetrics:U.dashMetrics,boxParser:U.boxParser?U.boxParser:null,constants:U.constants?U.constants:null,dashConstants:U.dashConstants?U.dashConstants:null,urlUtils:U.urlUtils?U.urlUtils:null,requestTimeout:isNaN(U.requestTimeout)?0:U.requestTimeout,errors:U.errors})}c.load(T)},abort:function v(){c&&c.abort()}}}R.__dashjs_factory_name="URLLoader";var j=e.default.getClassFactory(R);O.default=j},"./src/streaming/net/XHRLoader.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js"),S=r("./src/streaming/utils/RequestModifier.js");function R(U){var L=(U=U||{}).requestModifier;function c(v){var T=new Date,k=v.request,N=new XMLHttpRequest;if(N.open(v.method,v.url,!0),k.responseType&&(N.responseType=k.responseType),k.range&&N.setRequestHeader("Range","bytes="+k.range),k.requestStartDate||(k.requestStartDate=T),L&&L.modifyRequestHeader&&(N=L.modifyRequestHeader(N,{url:v.url})),v.headers)for(var B in v.headers){var x=v.headers[B];x&&N.setRequestHeader(B,x)}N.withCredentials=v.withCredentials,N.onload=v.onload,N.onloadend=v.onend,N.onerror=v.onerror,N.onprogress=v.progress,N.onabort=v.onabort,N.ontimeout=v.ontimeout,N.timeout=v.timeout,N.send(),v.response=N}return{load:function f(v){L&&L.modifyRequest?Object(S.modifyRequest)(v,L).then(function(){return c(v)}):c(v)},abort:function g(v){var T=v.response;T.onloadend=T.onerror=T.onprogress=void 0,T.abort()}}}R.__dashjs_factory_name="XHRLoader";var j=e.default.getClassFactory(R);O.default=j},"./src/streaming/protection/CommonEncryption.js":function(Ve,O,r){"use strict";function e(c){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(c)}function R(c,g){for(var v=0;v<g.length;v++){var T=g[v];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(c,U(T.key),T)}}function U(c){var g=function L(c,g){if("object"!==e(c)||null===c)return c;var v=c[Symbol.toPrimitive];if(void 0!==v){var T=v.call(c,g||"default");if("object"!==e(T))return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===g?String:Number)(c)}(c,"string");return"symbol"===e(g)?g:String(g)}r.r(O);var b={attributes:["Laurl","laurl"],prefixes:["clearkey","dashif"]};O.default=function(){function c(){!function S(c,g){if(!(c instanceof g))throw new TypeError("Cannot call a class as a function")}(this,c)}return function j(c,g,v){return g&&R(c.prototype,g),v&&R(c,v),Object.defineProperty(c,"prototype",{writable:!1}),c}(c,null,[{key:"findCencContentProtection",value:function(v){for(var T=null,k=0;k<v.length;++k){var N=v[k];"urn:mpeg:dash:mp4protection:2011"===N.schemeIdUri.toLowerCase()&&("cenc"===N.value.toLowerCase()||"cbcs"===N.value.toLowerCase())&&(T=N)}return T}},{key:"getPSSHData",value:function(v){var T=8,k=new DataView(v),N=k.getUint8(T);return T+=20,N>0&&(T+=4+16*k.getUint32(T)),v.slice(T+=4)}},{key:"getPSSHForKeySystem",value:function(v,T){var k=c.parsePSSHList(T);return v&&k.hasOwnProperty(v.uuid.toLowerCase())?k[v.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(v,T){return"pssh"in v?(v.pssh.__text=v.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),T.decodeArray(v.pssh.__text).buffer):null}},{key:"parsePSSHList",value:function(v){if(null==v)return[];for(var T=new DataView(v.buffer||v),N={},B=0;;){var P,_=void 0,D=void 0,y=B;if(B>=T.buffer.byteLength)break;if(P=B+T.getUint32(B),1886614376===T.getUint32(B+=4))if(0===(_=T.getUint8(B+=4))||1===_){B++,B+=3,D="";var A=void 0,I=void 0;for(A=0;A<4;A++)D+=1===(I=T.getUint8(B+A).toString(16)).length?"0"+I:I;for(B+=4,D+="-",A=0;A<2;A++)D+=1===(I=T.getUint8(B+A).toString(16)).length?"0"+I:I;for(B+=2,D+="-",A=0;A<2;A++)D+=1===(I=T.getUint8(B+A).toString(16)).length?"0"+I:I;for(B+=2,D+="-",A=0;A<2;A++)D+=1===(I=T.getUint8(B+A).toString(16)).length?"0"+I:I;for(B+=2,D+="-",A=0;A<6;A++)D+=1===(I=T.getUint8(B+A).toString(16)).length?"0"+I:I;B+=6,B+=4,N[D=D.toLowerCase()]=T.buffer.slice(y,P),B=P}else B=P;else B=P}return N}},{key:"getLicenseServerUrlFromMediaInfo",value:function(v,T){try{if(!v||0===v.length)return null;for(var k=0,N=null;k<v.length&&!N;){var B=v[k];if(B&&B.contentProtection&&B.contentProtection.length>0){var x=B.contentProtection.filter(function(G){return G.schemeIdUri&&G.schemeIdUri===T});if(x&&x.length>0)for(var P=0;P<x.length&&!N;){for(var _=x[P],D=0;D<b.attributes.length&&!N;){for(var y=0,A=b.attributes[D];y<b.prefixes.length&&!N;)_[A]&&_[A].__prefix&&_[A].__prefix===b.prefixes[y]&&_[A].__text&&(N=_[A].__text),y+=1;D+=1}P+=1}}k+=1}return N}catch(G){return null}}}]),c}()},"./src/streaming/protection/Protection.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/protection/controllers/ProtectionController.js"),S=r("./src/streaming/protection/controllers/ProtectionKeyController.js"),R=r("./src/streaming/protection/ProtectionEvents.js"),j=r("./src/streaming/protection/errors/ProtectionErrors.js"),U=r("./src/streaming/protection/models/ProtectionModel_21Jan2015.js"),L=r("./src/streaming/protection/models/ProtectionModel_3Feb2014.js"),b=r("./src/streaming/protection/models/ProtectionModel_01b.js"),f=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],c=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function g(){var T,k=this.context;function x(P,_){for(var D=0;D<_.length;D++){var y=_[D];if("function"==typeof P[y[Object.keys(y)[0]]])return y}return null}return T={createProtectionSystem:function N(P){var _=null,D=Object(S.default)(k).getInstance();D.setConfig({debug:P.debug,BASE64:P.BASE64,settings:P.settings}),D.initialize();var y=function B(P){var _=P.debug,D=_.getLogger(T),y=P.eventBus,A=P.errHandler,I=P.videoModel?P.videoModel.getElement():null;return I&&void 0===I.onencrypted||I&&void 0===I.mediaKeys?x(I,c)?(D.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),Object(L.default)(k).create({debug:_,eventBus:y,events:P.events,api:x(I,c)})):x(I,f)?(D.info("EME detected on this user agent! (ProtectionModel_01b)"),Object(b.default)(k).create({debug:_,eventBus:y,errHandler:A,events:P.events,api:x(I,f)})):(D.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(D.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),Object(U.default)(k).create({debug:_,eventBus:y,events:P.events}))}(P);return!_&&y&&(_=Object(e.default)(k).create({protectionModel:y,protectionKeyController:D,eventBus:P.eventBus,debug:P.debug,events:P.events,BASE64:P.BASE64,constants:P.constants,cmcdModel:P.cmcdModel,customParametersModel:P.customParametersModel,settings:P.settings}),P.capabilities.setEncryptedMediaSupported(!0)),_}}}g.__dashjs_factory_name="Protection";var v=dashjs.FactoryMaker.getClassFactory(g);v.events=R.default,v.errors=j.default,dashjs.FactoryMaker.updateClassFactory(g.__dashjs_factory_name,v),O.default=v},"./src/streaming/protection/ProtectionEvents.js":function(Ve,O,r){"use strict";function S(P){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(_){return typeof _}:function(_){return _&&"function"==typeof Symbol&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(P)}function R(P,_){for(var D=0;D<_.length;D++){var y=_[D];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(P,U(y.key),y)}}function U(P){var _=function L(P,_){if("object"!==S(P)||null===P)return P;var D=P[Symbol.toPrimitive];if(void 0!==D){var y=D.call(P,_||"default");if("object"!==S(y))return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===_?String:Number)(P)}(P,"string");return"symbol"===S(_)?_:String(_)}function f(P,_){if("function"!=typeof _&&null!==_)throw new TypeError("Super expression must either be null or a function");P.prototype=Object.create(_&&_.prototype,{constructor:{value:P,writable:!0,configurable:!0}}),Object.defineProperty(P,"prototype",{writable:!1}),_&&c(P,_)}function c(P,_){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(y,A){return y.__proto__=A,y})(P,_)}function g(P){var _=function k(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(P){return!1}}();return function(){var A,y=N(P);if(_){var I=N(this).constructor;A=Reflect.construct(y,arguments,I)}else A=y.apply(this,arguments);return v(this,A)}}function v(P,_){if(_&&("object"===S(_)||"function"==typeof _))return _;if(void 0!==_)throw new TypeError("Derived constructors may only return object or undefined");return function T(P){if(void 0===P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P}(P)}function N(P){return(N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(D){return D.__proto__||Object.getPrototypeOf(D)})(P)}r.r(O);var x=new(function(P){f(D,P);var _=g(D);function D(){var y;return function b(P,_){if(!(P instanceof _))throw new TypeError("Cannot call a class as a function")}(this,D),(y=_.call(this)).INTERNAL_KEY_MESSAGE="internalKeyMessage",y.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",y.KEY_ADDED="public_keyAdded",y.KEY_ERROR="public_keyError",y.KEY_MESSAGE="public_keyMessage",y.KEY_SESSION_CLOSED="public_keySessionClosed",y.KEY_SESSION_CREATED="public_keySessionCreated",y.KEY_SESSION_REMOVED="public_keySessionRemoved",y.KEY_STATUSES_CHANGED="public_keyStatusesChanged",y.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",y.KEY_SYSTEM_SELECTED="public_keySystemSelected",y.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",y.LICENSE_REQUEST_SENDING="public_licenseRequestSending",y.NEED_KEY="needkey",y.PROTECTION_CREATED="public_protectioncreated",y.PROTECTION_DESTROYED="public_protectiondestroyed",y.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",y.TEARDOWN_COMPLETE="protectionTeardownComplete",y.VIDEO_ELEMENT_SELECTED="videoElementSelected",y.KEY_SESSION_UPDATED="public_keySessionUpdated",y}return function j(P,_,D){return _&&R(P.prototype,_),D&&R(P,D),Object.defineProperty(P,"prototype",{writable:!1}),P}(D)}(r("./src/core/events/EventsBase.js").default));O.default=x},"./src/streaming/protection/controllers/ProtectionController.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/protection/CommonEncryption.js"),S=r("./src/streaming/protection/vo/MediaCapability.js"),R=r("./src/streaming/protection/vo/KeySystemConfiguration.js"),j=r("./src/streaming/protection/errors/ProtectionErrors.js"),U=r("./src/streaming/vo/DashJSError.js"),L=r("./src/streaming/protection/vo/LicenseRequest.js"),b=r("./src/streaming/protection/vo/LicenseResponse.js"),f=r("./src/streaming/vo/metrics/HTTPRequest.js"),c=r("./src/core/Utils.js"),g=r("./src/streaming/constants/Constants.js"),v=r("./src/core/FactoryMaker.js");function T(D){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(y){return typeof y}:function(y){return y&&"function"==typeof Symbol&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(D)}function _(D){var ce,ne,pe,me,xe,ve,Oe,Ee,Ie,Re,Pe,y=(D=D||{}).protectionKeyController,A=D.protectionModel,I=D.eventBus,G=D.events,ee=D.debug,de=D.BASE64,ue=D.constants,Te=[],q=D.cmcdModel,se=D.settings,H=D.customParametersModel;function Be(){if(!(I&&I.hasOwnProperty("on")&&y&&y.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}function he(Qe,mt){Ee||Ie?Ee&&J():function Y(Qe,mt){if(!Ie){Ie=!0;var _t,Lt=[];Qe=Qe.sort(function(pt,rt){return(xe&&xe[pt.ks.systemString]&&xe[pt.ks.systemString].priority>=0?xe[pt.ks.systemString].priority:Qe.length)-(xe&&xe[rt.ks.systemString]&&xe[rt.ks.systemString].priority>=0?xe[rt.ks.systemString].priority:Qe.length)});for(var nn=0;nn<Qe.length;nn++){var zt=Et(Qe[nn]);Lt.push({ks:Qe[nn].ks,configs:[zt],protData:Qe[nn].protData})}A.requestKeySystemAccess(Lt).then(function(pt){return ne.info("DRM: KeySystem Access Granted for system string ("+((_t=pt.data).mksa&&_t.mksa.selectedSystemString?_t.mksa.selectedSystemString:_t.keySystem.systemString)+")!  Selecting key system..."),A.selectKeySystem(_t)}).then(function(pt){if(Ee=pt,Ie=!1,A){I.trigger(G.KEY_SYSTEM_SELECTED,{data:_t});var rt=z(Ee);rt&&rt.serverCertificate&&rt.serverCertificate.length>0&&A.setServerCertificate(de.decodeArray(rt.serverCertificate).buffer),J()}}).catch(function(pt){Ee=null,Ie=!1,mt||I.trigger(G.KEY_SYSTEM_SELECTED,{data:null,error:new U.default(j.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,j.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+pt.error)})})}}(Qe,mt)}function J(){for(var Qe,mt=0;mt<pe.length;mt++)for(Qe=0;Qe<pe[mt].length;Qe++)if(Ee===pe[mt][Qe].ks){Me(pe[mt][Qe]);break}pe=[]}function Me(Qe){if(y.isClearKey(Ee)&&Qe.protData&&Qe.protData.hasOwnProperty("clearkeys")&&0!==Object.keys(Qe.protData.clearkeys).length){var mt={kids:Object.keys(Qe.protData.clearkeys)};Qe.initData=(new TextEncoder).encode(JSON.stringify(mt))}Qe.sessionId?ae(Qe):null!==Qe.initData&&re(Qe)}function ae(Qe){Be(),A.loadKeySession(Qe)}function re(Qe){var mt=e.default.getPSSHForKeySystem(Ee,Qe?Qe.initData:null);if(mt){if(function Z(Qe){if(!Qe)return!1;try{for(var mt=A.getSessions(),Lt=0;Lt<mt.length;Lt++)if(mt[Lt].getKeyId()===Qe)return!0;return!1}catch(nn){return!1}}(Qe.keyId)||W(mt))return;try{Qe.initData=mt,A.createKeySession(Qe)}catch(Lt){I.trigger(G.KEY_SESSION_CREATED,{data:null,error:new U.default(j.default.KEY_SESSION_CREATED_ERROR_CODE,j.default.KEY_SESSION_CREATED_ERROR_MESSAGE+Lt.message)})}}else Qe&&Qe.initData?A.createKeySession(Qe):I.trigger(G.KEY_SESSION_CREATED,{data:null,error:new U.default(j.default.KEY_SESSION_CREATED_ERROR_CODE,j.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(Ee?Ee.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function z(Qe){if(Qe){var mt=Qe.systemString;if(xe)return mt in xe?xe[mt]:null}return null}function W(Qe){if(!Qe)return!1;try{for(var mt=A.getAllInitData(),Lt=0;Lt<mt.length;Lt++)if(y.initDataEquals(Qe,mt[Lt]))return ne.debug("DRM: Ignoring initData because we have already seen it!"),!0;return!1}catch(nn){return!1}}function We(Qe){Be(),Qe?(A.setMediaElement(Qe),I.on(G.NEED_KEY,jn,ce)):null===Qe&&(A.setMediaElement(Qe),I.off(G.NEED_KEY,jn,ce))}function Et(Qe){var mt=Qe.protData,Lt=[],nn=[],zt=mt&&mt.audioRobustness&&mt.audioRobustness.length>0?mt.audioRobustness:Oe,_t=mt&&mt.videoRobustness&&mt.videoRobustness.length>0?mt.videoRobustness:Oe,pt=Qe.sessionType,rt=mt&&mt.distinctiveIdentifier?mt.distinctiveIdentifier:"optional",Xe=mt&&mt.persistentState?mt.persistentState:"temporary"===pt?"optional":"required";return me.forEach(function(yt){yt.type===ue.AUDIO?Lt.push(new S.default(yt.codec,zt)):yt.type===ue.VIDEO&&nn.push(new S.default(yt.codec,_t))}),new R.default(Lt,nn,rt,Xe,[pt])}function Yt(Qe){Qe.error?I.trigger(G.KEY_STATUSES_CHANGED,{data:null,error:Qe.error}):ne.debug("DRM: key status = "+Qe.status)}function vt(Qe){ne.debug("DRM: onKeyMessage");var mt=Qe.data;I.trigger(G.KEY_MESSAGE,{data:mt});var Lt=mt.messageType?mt.messageType:"license-request",nn=mt.message,zt=mt.sessionToken,_t=z(Ee),pt=y.getLicenseServerModelInstance(Ee,_t,Lt),rt={sessionToken:zt,messageType:Lt};if(nn&&0!==nn.byteLength){if(!pt)return ne.debug("DRM: License server request not required for this message (type = "+Qe.data.messageType+").  Session ID = "+zt.getSessionId()),void At(rt);if(y.isClearKey(Ee)){var Xe=y.processClearKeyLicenseRequest(Ee,_t,nn);if(Xe&&Xe.keyPairs&&Xe.keyPairs.length>0)return ne.debug("DRM: ClearKey license request handled by application!"),At(rt),void A.updateKeySession(zt,Xe)}!function Dt(Qe,mt,Lt){var nn=Qe.sessionToken,zt=Qe.messageType?Qe.messageType:"license-request",_t={sessionToken:nn,messageType:zt},pt=Ee?Ee.systemString:null,rt=function Xt(Qe,mt,Lt,nn,zt){var _t=null,pt=nn.message;if(Qe&&Qe.serverURL){var rt=Qe.serverURL;"string"==typeof rt&&""!==rt?_t=rt:"object"===T(rt)&&rt.hasOwnProperty(mt)&&(_t=rt[mt])}else if(Qe&&Qe.laURL&&""!==Qe.laURL)_t=Qe.laURL;else if(!(_t=e.default.getLicenseServerUrlFromMediaInfo(me,Ee.schemeIdURI))&&!y.isClearKey(Ee)){var Xe=e.default.getPSSHData(Lt.initData);(_t=Ee.getLicenseServerURLFromInitData(Xe))||(_t=nn.laURL)}return zt.getServerURLFromMessage(_t,pt,mt)}(Lt,zt,nn,Qe,mt);if(rt){var Xe={},yt=!1;Lt&&ln(Xe,Lt.httpRequestHeaders);var Gt=Qe.message;ln(Xe,Ee.getRequestHeadersFromMessage(Gt)),Object.keys(Xe).forEach(function(kt){"authorization"===kt.toLowerCase()&&(yt=!0)}),Lt&&"boolean"==typeof Lt.withCredentials&&(yt=Lt.withCredentials);var on=function(Rt){if(A)if(Rt.status>=200&&Rt.status<=299){var sn=c.default.parseHttpHeaders(Rt.getAllResponseHeaders?Rt.getAllResponseHeaders():null),kn=new b.default(Rt.responseURL,sn,Rt.response);Rn(H.getLicenseResponseFilters(),kn).then(function(){var xt=mt.getLicenseMessage(kn.data,pt,zt);null!==xt?(At(_t),A.updateKeySession(nn,xt)):Bn(Rt,_t,pt,zt,mt)})}else Bn(Rt,_t,pt,zt,mt)},mn=function(Rt){At(_t,new U.default(j.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,j.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+pt+' update, XHR aborted. status is "'+Rt.statusText+'" ('+Rt.status+"), readyState is "+Rt.readyState))},Dn=function(Rt){At(_t,new U.default(j.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,j.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+pt+' update, XHR error. status is "'+Rt.statusText+'" ('+Rt.status+"), readyState is "+Rt.readyState))},Zn=Ee.getLicenseRequestFromMessage(Gt),Jn=mt.getHTTPMethod(zt),_r=mt.getResponseType(pt,zt),Pr=Lt&&!isNaN(Lt.httpTimeout)?Lt.httpTimeout:8e3,ct=nn.getSessionId()||null,qt=new L.default(rt,Jn,_r,Xe,yt,zt,ct,Zn),fn=isNaN(se.get().streaming.retryAttempts[f.HTTPRequest.LICENSE])?3:se.get().streaming.retryAttempts[f.HTTPRequest.LICENSE];Rn(H.getLicenseRequestFilters(),qt).then(function(){$t(qt,fn,Pr,on,mn,Dn)})}else At(_t,new U.default(j.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,j.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))}(mt,pt,_t)}else At(rt,new U.default(j.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,j.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function At(Qe,mt){I.trigger(G.LICENSE_REQUEST_COMPLETE,{data:Qe,error:mt})}function $t(Qe,mt,Lt,nn,zt,_t){var pt=new XMLHttpRequest;if(se.get().streaming.cmcd&&se.get().streaming.cmcd.enabled&&se.get().streaming.cmcd.mode===g.default.CMCD_MODE_QUERY){var Xe=q.getQueryParameter({url:Qe.url,type:f.HTTPRequest.LICENSE});Xe&&(Qe.url=c.default.addAditionalQueryParameterToUrl(Qe.url,[Xe]))}for(var yt in pt.open(Qe.method,Qe.url,!0),pt.responseType=Qe.responseType,pt.withCredentials=Qe.withCredentials,Lt>0&&(pt.timeout=Lt),Qe.headers)pt.setRequestHeader(yt,Qe.headers[yt]);if(se.get().streaming.cmcd&&se.get().streaming.cmcd.enabled&&se.get().streaming.cmcd.mode===g.default.CMCD_MODE_HEADER){var Qt=q.getHeaderParameters({url:Qe.url,type:f.HTTPRequest.LICENSE});if(Qt)for(var on in Qt){var mn=Qt[on];mn&&pt.setRequestHeader(on,mn)}}var Dn=function(){mt--;var Jn=isNaN(se.get().streaming.retryIntervals[f.HTTPRequest.LICENSE])?1e3:se.get().streaming.retryIntervals[f.HTTPRequest.LICENSE];Pe=setTimeout(function(){$t(Qe,mt,Lt,nn,zt,_t)},Jn)};pt.onload=function(){Re=null,this.status>=200&&this.status<=299||mt<=0?nn(this):(ne.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+mt),Dn())},pt.ontimeout=pt.onerror=function(){Re=null,mt<=0?_t(this):(ne.warn("License request network request failed . Retrying it... Pending retries: "+mt),Dn())},pt.onabort=function(){zt(this)},I.trigger(G.LICENSE_REQUEST_SENDING,{url:Qe.url,headers:Qe.headers,payload:Qe.data,sessionId:Qe.sessionId}),Re=pt,pt.send(Qe.data)}function Kt(){Re&&(Re.onloadend=Re.onerror=Re.onprogress=void 0,Re.abort(),Re=null),Pe&&(clearTimeout(Pe),Pe=null)}function ln(Qe,mt){if(mt)for(var Lt in mt)Qe[Lt]=mt[Lt]}function Bn(Qe,mt,Lt,nn,zt){var _t="NONE",pt=null;Qe.response&&(_t=zt.getErrorResponse(Qe.response,Lt,nn),pt={serverResponse:Qe.response||null,responseCode:Qe.status||null,responseText:Qe.statusText||null}),At(mt,new U.default(j.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,j.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+Lt+' update, XHR complete. status is "'+Qe.statusText+'" ('+Qe.status+"), readyState is "+Qe.readyState+".  Response is "+_t,pt))}function Rn(Qe,mt){return Qe?Qe.reduce(function(Lt,nn){return Lt.then(function(){return nn(mt)})},Promise.resolve()):Promise.resolve()}function jn(Qe,mt){if(!se.get().streaming.protection.ignoreEmeEncryptedEvent){if(ne.debug("DRM: onNeedKey"),"cenc"!==Qe.key.initDataType)return void ne.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+Qe.key.initDataType);if(0===me.length&&(ne.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(mt=void 0===mt?1:mt+1)<5))return void Te.push(setTimeout(function(){jn(Qe,mt)},500));var Lt=Qe.key.initData;if(ArrayBuffer.isView(Lt)&&(Lt=Lt.buffer),Ee){var nn=e.default.getPSSHForKeySystem(Ee,Lt);if(nn&&W(nn))return}ne.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(Lt)));var zt=y.getSupportedKeySystemsFromSegmentPssh(Lt,xe,ve);if(0===zt.length)return void ne.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!");!function De(Qe){pe.push(Qe),he(Qe,!1)}(zt)}}return ce={initializeForMedia:function qe(Qe){if(!Qe)throw new Error("mediaInfo can not be null or undefined");Be(),me.push(Qe)},clearMediaInfoArray:function te(){me=[]},handleKeySystemFromManifest:function He(){if(me&&0!==me.length){var Qe=[];me.forEach(function(mt){var Lt=y.getSupportedKeySystemsFromContentProtection(mt.contentProtection,xe,ve);Lt.length>0&&(0===Qe.length&&(Qe=Lt),pe.push(Lt))}),Qe&&Qe.length>0&&he(Qe,!0)}},createKeySession:re,loadKeySession:ae,removeKeySession:function oe(Qe){Be(),A.removeKeySession(Qe)},closeKeySession:function be(Qe){Be(),A.closeKeySession(Qe)},setServerCertificate:function Fe(Qe){Be(),A.setServerCertificate(Qe)},setMediaElement:We,setSessionType:function at(Qe){ve=Qe},setRobustnessLevel:function et(Qe){Oe=Qe},setProtectionData:function ut(Qe){xe=Qe,y.setProtectionData(Qe)},getSupportedKeySystemsFromContentProtection:function X(Qe){return Be(),y.getSupportedKeySystemsFromContentProtection(Qe,xe,ve)},getKeySystems:function Vn(){return y?y.getKeySystems():[]},setKeySystems:function ot(Qe){y&&y.setKeySystems(Qe)},stop:function Ot(){Kt(),A&&A.stop()},reset:function tt(){I.off(G.INTERNAL_KEY_MESSAGE,vt,ce),I.off(G.INTERNAL_KEY_STATUS_CHANGED,Yt,ce),Be(),Kt(),We(null),Ee=null,Ie=!1,A&&(A.reset(),A=null),Te.forEach(function(Qe){return clearTimeout(Qe)}),Te=[],me=[],pe=[]}},function ke(){ne=ee.getLogger(ce),pe=[],me=[],ve="temporary",Oe="",Re=null,Pe=null,I.on(G.INTERNAL_KEY_MESSAGE,vt,ce),I.on(G.INTERNAL_KEY_STATUS_CHANGED,Yt,ce)}(),ce}_.__dashjs_factory_name="ProtectionController",O.default=v.default.getClassFactory(_)},"./src/streaming/protection/controllers/ProtectionKeyController.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/protection/CommonEncryption.js"),S=r("./src/streaming/protection/drm/KeySystemClearKey.js"),R=r("./src/streaming/protection/drm/KeySystemW3CClearKey.js"),j=r("./src/streaming/protection/drm/KeySystemWidevine.js"),U=r("./src/streaming/protection/drm/KeySystemPlayReady.js"),L=r("./src/streaming/protection/servers/DRMToday.js"),b=r("./src/streaming/protection/servers/PlayReady.js"),f=r("./src/streaming/protection/servers/Widevine.js"),c=r("./src/streaming/protection/servers/ClearKey.js"),g=r("./src/streaming/constants/ProtectionConstants.js");function v(){var k,N,B,x,P,_,D,y,T=this.context;function pe(ve,Oe){return Oe&&ve in Oe?Oe[ve]:null}function me(ve,Oe){return ve&&ve.sessionId?ve.sessionId:Oe&&Oe.sessionId?Oe.sessionId:null}function xe(ve,Oe){return ve&&ve.sessionType?ve.sessionType:Oe}return k={initialize:function I(){var ve;x=[],ve=Object(U.default)(T).getInstance({BASE64:P,settings:_}),x.push(ve),ve=Object(j.default)(T).getInstance({BASE64:P}),x.push(ve),ve=Object(S.default)(T).getInstance({BASE64:P}),x.push(ve),D=ve,ve=Object(R.default)(T).getInstance({BASE64:P,debug:N}),x.push(ve),y=ve},setProtectionData:function ne(ve){for(var Ee=0;Ee<x.length;Ee++){var Ie=x[Ee];Ie.hasOwnProperty("init")&&Ie.init((Pe=Ie.systemString,ke=void 0,ke=null,ve&&(ke=Pe in ve?ve[Pe]:null),ke))}var Pe,ke},isClearKey:function ue(ve){return ve===D||ve===y},initDataEquals:function Te(ve,Oe){if(ve.byteLength===Oe.byteLength){for(var Ee=new Uint8Array(ve),Ie=new Uint8Array(Oe),Re=0;Re<Ee.length;Re++)if(Ee[Re]!==Ie[Re])return!1;return!0}return!1},getKeySystems:function G(){return x},setKeySystems:function ee(ve){x=ve},getKeySystemBySystemString:function de(ve){for(var Oe=0;Oe<x.length;Oe++)if(x[Oe].systemString===ve)return x[Oe];return null},getSupportedKeySystemsFromContentProtection:function q(ve,Oe,Ee){var Ie,Re,Pe,ke,Be=[];if(ve){var qe=e.default.findCencContentProtection(ve);for(Pe=0;Pe<x.length;++Pe){var He=pe((Re=x[Pe]).systemString,Oe);for(ke=0;ke<ve.length;++ke)if((Ie=ve[ke]).schemeIdUri.toLowerCase()===Re.schemeIdURI){var De=Re.getInitData(Ie,qe);Be.push({ks:x[Pe],keyId:Ie.keyId,initData:De,protData:He,cdmData:Re.getCDMData(He?He.cdmData:null),sessionId:me(He,Ie),sessionType:xe(He,Ee)})}}}return Be},getSupportedKeySystemsFromSegmentPssh:function se(ve,Oe,Ee){for(var Pe,Ie=[],Re=e.default.parsePSSHList(ve),Be=0;Be<x.length;++Be){var qe=pe((Pe=x[Be]).systemString,Oe);Pe.uuid in Re&&Ie.push({ks:Pe,initData:Re[Pe.uuid],protData:qe,cdmData:Pe.getCDMData(qe?qe.cdmData:null),sessionId:me(qe),sessionType:xe(qe,Ee)})}return Ie},getLicenseServerModelInstance:function H(ve,Oe,Ee){if("license-release"===Ee||"individualization-request"===Ee)return null;var Ie=null;return Oe&&Oe.hasOwnProperty("drmtoday")?Ie=Object(L.default)(T).getInstance({BASE64:P}):ve.systemString===g.default.WIDEVINE_KEYSTEM_STRING?Ie=Object(f.default)(T).getInstance():ve.systemString===g.default.PLAYREADY_KEYSTEM_STRING?Ie=Object(b.default)(T).getInstance():ve.systemString===g.default.CLEARKEY_KEYSTEM_STRING&&(Ie=Object(c.default)(T).getInstance()),Ie},processClearKeyLicenseRequest:function ce(ve,Oe,Ee){try{return ve.getClearKeysFromProtectionData(Oe,Ee)}catch(Ie){return B.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function A(ve){!ve||(ve.debug&&(B=(N=ve.debug).getLogger(k)),ve.BASE64&&(P=ve.BASE64),ve.settings&&(_=ve.settings))}}}v.__dashjs_factory_name="ProtectionKeyController",O.default=dashjs.FactoryMaker.getSingletonFactory(v)},"./src/streaming/protection/drm/KeySystemClearKey.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/protection/vo/KeyPair.js"),S=r("./src/streaming/protection/vo/ClearKeyKeySet.js"),R=r("./src/streaming/protection/CommonEncryption.js"),j=r("./src/streaming/constants/ProtectionConstants.js"),U="e2719d58-a985-b3c9-781a-b030af78d30e",L=j.default.CLEARKEY_KEYSTEM_STRING;function f(c){var v=(c=c||{}).BASE64;function N(D){try{var y=D.replace(/-/g,"");return(y=btoa(y.match(/\w{2}/g).map(function(A){return String.fromCharCode(parseInt(A,16))}).join(""))).replace(/=/g,"").replace(/\//g,"_").replace(/\+/g,"-")}catch(A){return null}}return{uuid:U,schemeIdURI:"urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e",systemString:L,getInitData:function k(D,y){try{var A=R.default.parseInitDataFromContentProtection(D,v);if(!A&&y){var G={kids:[N(y["cenc:default_KID"])]};A=(new TextEncoder).encode(JSON.stringify(G))}return A}catch(ee){return null}},getRequestHeadersFromMessage:function B(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function x(D){return JSON.stringify(JSON.parse(String.fromCharCode.apply(null,new Uint8Array(D))))},getLicenseServerURLFromInitData:function P(){return null},getCDMData:function _(){return null},getClearKeysFromProtectionData:function T(D,y){var A=null;if(D){for(var I=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(y))),G=[],ee=0;ee<I.kids.length;ee++){var de=I.kids[ee],ue=D.clearkeys&&D.clearkeys.hasOwnProperty(de)?D.clearkeys[de]:null;if(!ue)throw new Error("DRM: ClearKey keyID ("+de+") is not known!");G.push(new e.default(de,ue))}A=new S.default(G)}return A}}}f.__dashjs_factory_name="KeySystemClearKey",O.default=dashjs.FactoryMaker.getSingletonFactory(f)},"./src/streaming/protection/drm/KeySystemPlayReady.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/protection/CommonEncryption.js"),S=r("./src/streaming/constants/ProtectionConstants.js"),R="9a04f079-9840-4286-ab92-e65be0885f95",j=S.default.PLAYREADY_KEYSTEM_STRING;function b(f){var g="utf-16",v=(f=f||{}).BASE64,T=f.settings;function k(){if(!v||!v.hasOwnProperty("decodeArray")||!v.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return{uuid:R,schemeIdURI:"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95",systemString:j,getInitData:function P(y){var de,ue,Te,q,se,A=new Uint8Array([112,115,115,104,0,0,0,0]),I=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),G=0,ee=null;if(k(),!y)return null;if("pssh"in y)return e.default.parseInitDataFromContentProtection(y,v);if("pro"in y)ee=v.decodeArray(y.pro.__text);else{if(!("prheader"in y))return null;ee=v.decodeArray(y.prheader.__text)}return ue=4+A.length+I.length+4+(de=ee.length),Te=new ArrayBuffer(ue),q=new Uint8Array(Te),(se=new DataView(Te)).setUint32(G,ue),q.set(A,G+=4),q.set(I,G+=A.length),se.setUint32(G+=I.length,de),q.set(ee,G+=4),G+=de,q.buffer},getRequestHeadersFromMessage:function N(y){var A,I,G={},ee=new DOMParser;if(T&&T.get().streaming.protection.detectPlayreadyMessageFormat&&"utf-16"===g&&y&&y.byteLength%2==1)return G["Content-Type"]="text/xml; charset=utf-8",G;var de="utf-16"===g?new Uint16Array(y):new Uint8Array(y);A=String.fromCharCode.apply(null,de);for(var ue=(I=ee.parseFromString(A,"application/xml")).getElementsByTagName("name"),Te=I.getElementsByTagName("value"),q=0;q<ue.length;q++)G[ue[q].childNodes[0].nodeValue]=Te[q].childNodes[0].nodeValue;return G.hasOwnProperty("Content")&&(G["Content-Type"]=G.Content,delete G.Content),G.hasOwnProperty("Content-Type")||(G["Content-Type"]="text/xml; charset=utf-8"),G},getLicenseRequestFromMessage:function B(y){var A=null,I=new DOMParser;if(T&&T.get().streaming.protection.detectPlayreadyMessageFormat&&"utf-16"===g&&y&&y.byteLength%2==1)return y;var G="utf-16"===g?new Uint16Array(y):new Uint8Array(y);k();var ee=String.fromCharCode.apply(null,G),de=I.parseFromString(ee,"application/xml");if(!de.getElementsByTagName("PlayReadyKeyMessage")[0])return y;var ue=de.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;return ue&&(A=v.decode(ue)),A},getLicenseServerURLFromInitData:function x(y){if(y)for(var A=new DataView(y),I=A.getUint16(4,!0),G=6,ee=new DOMParser,de=0;de<I;de++){var ue=A.getUint16(G,!0),Te=A.getUint16(G+=2,!0);if(G+=2,1===ue){var q=y.slice(G,G+Te),se=String.fromCharCode.apply(null,new Uint16Array(q)),H=ee.parseFromString(se,"application/xml");if(H.getElementsByTagName("LA_URL")[0]){var ce=H.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(ce)return ce}if(H.getElementsByTagName("LUI_URL")[0]){var ne=H.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(ne)return ne}}else G+=Te}return null},getCDMData:function D(y){var A,I,G,ee;if(k(),!y)return null;for(A=[],ee=0;ee<y.length;++ee)A.push(y.charCodeAt(ee)),A.push(0);for(A=String.fromCharCode.apply(null,A),A=v.encode(A),I='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",A),G=[],ee=0;ee<I.length;++ee)G.push(I.charCodeAt(ee)),G.push(0);return new Uint8Array(G).buffer},setPlayReadyMessageFormat:function _(y){if("utf-8"!==y&&"utf-16"!==y)throw new Error('Specified message format is not one of "utf-8" or "utf-16"');g=y}}}b.__dashjs_factory_name="KeySystemPlayReady",O.default=dashjs.FactoryMaker.getSingletonFactory(b)},"./src/streaming/protection/drm/KeySystemW3CClearKey.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/protection/vo/KeyPair.js"),S=r("./src/streaming/protection/vo/ClearKeyKeySet.js"),R=r("./src/streaming/protection/CommonEncryption.js"),j=r("./src/streaming/constants/ProtectionConstants.js"),U="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",L=j.default.CLEARKEY_KEYSTEM_STRING;function f(c){var g,v=c.BASE64,T=c.debug.getLogger(g);return{uuid:U,schemeIdURI:"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",systemString:L,getInitData:function N(D){return R.default.parseInitDataFromContentProtection(D,v)},getRequestHeadersFromMessage:function B(){return null},getLicenseRequestFromMessage:function x(D){return new Uint8Array(D)},getLicenseServerURLFromInitData:function P(){return null},getCDMData:function _(){return null},getClearKeysFromProtectionData:function k(D,y){var A=null;if(D){for(var I=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(y))),G=[],ee=0;ee<I.kids.length;ee++){var de=I.kids[ee],ue=D.clearkeys&&D.clearkeys.hasOwnProperty(de)?D.clearkeys[de]:null;if(!ue)throw new Error("DRM: ClearKey keyID ("+de+") is not known!");G.push(new e.default(de,ue))}A=new S.default(G),T.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return A}}}f.__dashjs_factory_name="KeySystemW3CClearKey",O.default=dashjs.FactoryMaker.getSingletonFactory(f)},"./src/streaming/protection/drm/KeySystemWidevine.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/protection/CommonEncryption.js"),S=r("./src/streaming/constants/ProtectionConstants.js"),R="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",j=S.default.WIDEVINE_KEYSTEM_STRING;function L(b){var c=(b=b||{}).BASE64;return{uuid:R,schemeIdURI:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",systemString:j,getInitData:function g(B){return e.default.parseInitDataFromContentProtection(B,c)},getRequestHeadersFromMessage:function v(){return null},getLicenseRequestFromMessage:function T(B){return new Uint8Array(B)},getLicenseServerURLFromInitData:function k(){return null},getCDMData:function N(){return null}}}L.__dashjs_factory_name="KeySystemWidevine",O.default=dashjs.FactoryMaker.getSingletonFactory(L)},"./src/streaming/protection/errors/ProtectionErrors.js":function(Ve,O,r){"use strict";function S(P){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(_){return typeof _}:function(_){return _&&"function"==typeof Symbol&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(P)}function R(P,_){for(var D=0;D<_.length;D++){var y=_[D];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(P,U(y.key),y)}}function U(P){var _=function L(P,_){if("object"!==S(P)||null===P)return P;var D=P[Symbol.toPrimitive];if(void 0!==D){var y=D.call(P,_||"default");if("object"!==S(y))return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===_?String:Number)(P)}(P,"string");return"symbol"===S(_)?_:String(_)}function f(P,_){if("function"!=typeof _&&null!==_)throw new TypeError("Super expression must either be null or a function");P.prototype=Object.create(_&&_.prototype,{constructor:{value:P,writable:!0,configurable:!0}}),Object.defineProperty(P,"prototype",{writable:!1}),_&&c(P,_)}function c(P,_){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(y,A){return y.__proto__=A,y})(P,_)}function g(P){var _=function k(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(P){return!1}}();return function(){var A,y=N(P);if(_){var I=N(this).constructor;A=Reflect.construct(y,arguments,I)}else A=y.apply(this,arguments);return v(this,A)}}function v(P,_){if(_&&("object"===S(_)||"function"==typeof _))return _;if(void 0!==_)throw new TypeError("Derived constructors may only return object or undefined");return function T(P){if(void 0===P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P}(P)}function N(P){return(N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(D){return D.__proto__||Object.getPrototypeOf(D)})(P)}r.r(O);var x=new(function(P){f(D,P);var _=g(D);function D(){var y;return function b(P,_){if(!(P instanceof _))throw new TypeError("Cannot call a class as a function")}(this,D),(y=_.call(this)).MEDIA_KEYERR_CODE=100,y.MEDIA_KEYERR_UNKNOWN_CODE=101,y.MEDIA_KEYERR_CLIENT_CODE=102,y.MEDIA_KEYERR_SERVICE_CODE=103,y.MEDIA_KEYERR_OUTPUT_CODE=104,y.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,y.MEDIA_KEYERR_DOMAIN_CODE=106,y.MEDIA_KEY_MESSAGE_ERROR_CODE=107,y.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,y.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,y.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,y.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,y.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,y.KEY_SESSION_CREATED_ERROR_CODE=113,y.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,y.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",y.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",y.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",y.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",y.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",y.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",y.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",y.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",y.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",y.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",y.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",y.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",y.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",y.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --",y}return function j(P,_,D){return _&&R(P.prototype,_),D&&R(P,D),Object.defineProperty(P,"prototype",{writable:!1}),P}(D)}(r("./src/core/errors/ErrorsBase.js").default));O.default=x},"./src/streaming/protection/models/ProtectionModel_01b.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/protection/controllers/ProtectionKeyController.js"),S=r("./src/streaming/protection/vo/NeedKey.js"),R=r("./src/streaming/vo/DashJSError.js"),j=r("./src/streaming/protection/vo/KeyMessage.js"),U=r("./src/streaming/protection/vo/KeySystemConfiguration.js"),L=r("./src/streaming/protection/vo/KeySystemAccess.js"),b=r("./src/streaming/protection/errors/ProtectionErrors.js");function f(c){var x,P,_,D,y,A,I,G,ee,g=this.context,v=(c=c||{}).eventBus,T=c.events,k=c.debug,N=c.api,B=c.errHandler;function ue(){_&&Re();for(var Pe=0;Pe<I.length;Pe++)me(I[Pe]);v.trigger(T.TEARDOWN_COMPLETE)}function me(Pe){try{_[N.cancelKeyRequest](D.systemString,Pe.sessionId)}catch(ke){v.trigger(T.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+Pe.sessionId+") "+ke.message})}}function Ie(Pe,ke){if(!ke||!Pe)return null;for(var Be=Pe.length,qe=0;qe<Be;qe++)if(Pe[qe].sessionId==ke)return Pe[qe];return null}function Re(){_.removeEventListener(N.keyerror,ee),_.removeEventListener(N.needkey,ee),_.removeEventListener(N.keymessage,ee),_.removeEventListener(N.keyadded,ee)}return x={getAllInitData:function Te(){for(var Pe=[],ke=0;ke<A.length;ke++)Pe.push(A[ke].initData);for(var Be=0;Be<I.length;Be++)Pe.push(I[Be].initData);return Pe},getSessions:function q(){return I.concat(A)},requestKeySystemAccess:function se(Pe){return new Promise(function(ke,Be){var qe=_;qe||(qe=document.createElement("video"));for(var He=!1,De=0;De<Pe.length;De++)for(var he=Pe[De].ks.systemString,Y=Pe[De].configs,J=null,Me=null,ae=0;ae<Y.length;ae++){var re=Y[ae].videoCapabilities;if(re&&0!==re.length){Me=[];for(var z=0;z<re.length;z++)""!==qe.canPlayType(re[z].contentType,he)&&Me.push(re[z])}if(Me&&(!Me||0!==Me.length)){He=!0;var te=new U.default(J,Me),X=y.getKeySystemBySystemString(he),Z=new L.default(X,te);v.trigger(T.KEY_SYSTEM_ACCESS_COMPLETE,{data:Z}),ke({data:Z});break}}if(!He){var W="Key system access denied! -- No valid audio/video content configurations detected!";v.trigger(T.KEY_SYSTEM_ACCESS_COMPLETE,{error:W}),Be({error:W})}})},selectKeySystem:function H(Pe){return D=Pe.keySystem,Promise.resolve(D)},setMediaElement:function ce(Pe){if(_!==Pe){if(_){Re();for(var ke=0;ke<I.length;ke++)me(I[ke]);I=[]}(_=Pe)&&(_.addEventListener(N.keyerror,ee),_.addEventListener(N.needkey,ee),_.addEventListener(N.keymessage,ee),_.addEventListener(N.keyadded,ee),v.trigger(T.VIDEO_ELEMENT_SELECTED))}},createKeySession:function ne(Pe){if(!D)throw new Error("Can not create sessions until you have selected a key system");if(G||0===I.length){var ke={sessionId:null,keyId:Pe.keyId,initData:Pe.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return A.push(ke),_[N.generateKeyRequest](D.systemString,new Uint8Array(Pe.initData)),ke}throw new Error("Multiple sessions not allowed!")},updateKeySession:function pe(Pe,ke){var Be=Pe.sessionId;if(y.isClearKey(D))for(var qe=0;qe<ke.keyPairs.length;qe++)_[N.addKey](D.systemString,ke.keyPairs[qe].key,ke.keyPairs[qe].keyID,Be);else _[N.addKey](D.systemString,new Uint8Array(ke),new Uint8Array(Pe.initData),Be);v.trigger(T.KEY_SESSION_UPDATED)},closeKeySession:me,setServerCertificate:function xe(){},loadKeySession:function ve(){},removeKeySession:function Oe(){},stop:ue,reset:ue},function de(){P=k.getLogger(x),_=null,D=null,A=[],I=[],y=Object(e.default)(g).getInstance(),ee=function Ee(){return{handleEvent:function(ke){var Be=null;switch(ke.type){case N.needkey:var qe=ArrayBuffer.isView(ke.initData)?ke.initData.buffer:ke.initData;v.trigger(T.NEED_KEY,{key:new S.default(qe,"cenc")});break;case N.keyerror:if((Be=Ie(I,ke.sessionId))||(Be=Ie(A,ke.sessionId)),Be){var He=b.default.MEDIA_KEYERR_CODE,De="";switch(ke.errorCode.code){case 1:He=b.default.MEDIA_KEYERR_UNKNOWN_CODE,De+="MEDIA_KEYERR_UNKNOWN - "+b.default.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:He=b.default.MEDIA_KEYERR_CLIENT_CODE,De+="MEDIA_KEYERR_CLIENT - "+b.default.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:He=b.default.MEDIA_KEYERR_SERVICE_CODE,De+="MEDIA_KEYERR_SERVICE - "+b.default.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:He=b.default.MEDIA_KEYERR_OUTPUT_CODE,De+="MEDIA_KEYERR_OUTPUT - "+b.default.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:He=b.default.MEDIA_KEYERR_HARDWARECHANGE_CODE,De+="MEDIA_KEYERR_HARDWARECHANGE - "+b.default.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:He=b.default.MEDIA_KEYERR_DOMAIN_CODE,De+="MEDIA_KEYERR_DOMAIN - "+b.default.MEDIA_KEYERR_DOMAIN_MESSAGE}v.trigger(T.KEY_ERROR,{error:new R.default(He,De+="  System Code = "+ke.systemCode,Be)})}else P.error("No session token found for key error");break;case N.keyadded:(Be=Ie(I,ke.sessionId))||(Be=Ie(A,ke.sessionId)),Be?(P.debug("DRM: Key added."),v.trigger(T.KEY_ADDED,{data:Be})):P.debug("No session token found for key added");break;case N.keymessage:if((G=null!=ke.sessionId)?!(Be=Ie(I,ke.sessionId))&&A.length>0&&(Be=A.shift(),I.push(Be),Be.sessionId=ke.sessionId,v.trigger(T.KEY_SESSION_CREATED,{data:Be})):A.length>0&&(Be=A.shift(),I.push(Be),0!==A.length&&B.error(new R.default(b.default.MEDIA_KEY_MESSAGE_ERROR_CODE,b.default.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),Be){var he=ArrayBuffer.isView(ke.message)?ke.message.buffer:ke.message;Be.keyMessage=he,v.trigger(T.INTERNAL_KEY_MESSAGE,{data:new j.default(Be,he,ke.defaultURL)})}else P.warn("No session token found for key message")}}}}()}(),x}f.__dashjs_factory_name="ProtectionModel_01b",O.default=dashjs.FactoryMaker.getClassFactory(f)},"./src/streaming/protection/models/ProtectionModel_21Jan2015.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/protection/controllers/ProtectionKeyController.js"),S=r("./src/streaming/protection/vo/NeedKey.js"),R=r("./src/streaming/protection/errors/ProtectionErrors.js"),j=r("./src/streaming/vo/DashJSError.js"),U=r("./src/streaming/protection/vo/KeyMessage.js"),L=r("./src/streaming/protection/vo/KeySystemAccess.js"),b=r("./src/streaming/constants/ProtectionConstants.js"),f={};function c(g){var B,x,P,_,D,y,A,I,v=this.context,T=(g=g||{}).eventBus,k=g.events,N=g.debug;function se(He,De,he,Y){if(void 0===navigator.requestMediaKeySystemAccess||"function"!=typeof navigator.requestMediaKeySystemAccess){var J="Insecure origins are not allowed";return T.trigger(k.KEY_SYSTEM_ACCESS_COMPLETE,{error:J}),void Y({error:J})}var re=He[De].ks,z=re.systemString;(function H(He,De){return new Promise(function(he,Y){ce(He,De,0,he,Y)})})((He[De].protData&&He[De].protData.systemStringPriority?He[De].protData.systemStringPriority:null)||(f[z]?f[z]:[z]),He[De].configs).then(function(X){var Z="function"==typeof X.getConfiguration?X.getConfiguration():null,W=new L.default(re,Z);W.mksa=X,T.trigger(k.KEY_SYSTEM_ACCESS_COMPLETE,{data:W}),he({data:W})}).catch(function(X){if(De+1<He.length)se(He,De+1,he,Y);else{var Z="Key system access denied! ";T.trigger(k.KEY_SYSTEM_ACCESS_COMPLETE,{error:Z+X.message}),Y({error:Z+X.message})}})}function ce(He,De,he,Y,J){var Me=He[he];x.debug("Requesting key system access for system string ".concat(Me)),navigator.requestMediaKeySystemAccess(Me,De).then(function(ae){ae.selectedSystemString=Me,Y(ae)}).catch(function(ae){he+1<He.length?ce(He,De,he+1,Y,J):J(ae)})}function Re(He){var De=He.session;return De.removeEventListener("keystatuseschange",He),De.removeEventListener("message",He),De.close()}function ke(He){for(var De=0;De<y.length;De++)if(y[De]===He){y.splice(De,1);break}}function Be(He){var De,he;return He&&He.length>0&&(He[0]&&("string"==typeof He[0]?De=He[0]:he=He[0]),He[1]&&("string"==typeof He[1]?De=He[1]:he=He[1])),{status:De,keyId:he}}function qe(He,De){var he={session:He,keyId:De.keyId,initData:De.initData,sessionId:De.sessionId,sessionType:De.sessionType,handleEvent:function(J){switch(J.type){case"keystatuseschange":T.trigger(k.KEY_STATUSES_CHANGED,{data:this}),J.target.keyStatuses.forEach(function(){var ae=Be(arguments);T.trigger(k.INTERNAL_KEY_STATUS_CHANGED,"expired"===ae.status?{error:new j.default(R.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,R.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)}:ae)});break;case"message":var Me=ArrayBuffer.isView(J.message)?J.message.buffer:J.message;T.trigger(k.INTERNAL_KEY_MESSAGE,{data:new U.default(this,Me,void 0,J.messageType)})}},getKeyId:function(){return this.keyId},getSessionId:function(){return He.sessionId},getSessionType:function(){return this.sessionType},getExpirationTime:function(){return He.expiration},getKeyStatuses:function(){return He.keyStatuses},getUsable:function(){var J=!1;return He.keyStatuses.forEach(function(){"usable"===Be(arguments).status&&(J=!0)}),J}};return He.addEventListener("keystatuseschange",he),He.addEventListener("message",he),He.closed.then(function(){ke(he),x.debug("DRM: Session closed.  SessionID = "+he.getSessionId()),T.trigger(k.KEY_SESSION_CLOSED,{data:he.getSessionId()})}),y.push(he),he}return B={getAllInitData:function ue(){for(var He=[],De=0;De<y.length;De++)y[De].initData&&He.push(y[De].initData);return He},getSessions:function Te(){return y},requestKeySystemAccess:function q(He){return new Promise(function(De,he){se(He,0,De,he)})},selectKeySystem:function ne(He){return new Promise(function(De,he){He.mksa.createMediaKeys().then(function(Y){return P=He.keySystem,D=Y,_?_.setMediaKeys(D):Promise.resolve()}).then(function(){De(P)}).catch(function(){he({error:"Error selecting keys system ("+He.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})})},setMediaElement:function pe(He){_!==He&&(_&&(_.removeEventListener("encrypted",A),_.setMediaKeys&&_.setMediaKeys(null)),(_=He)&&(_.addEventListener("encrypted",A),_.setMediaKeys&&D&&_.setMediaKeys(D)))},setServerCertificate:function me(He){if(!P||!D)throw new Error("Can not set server certificate until you have selected a key system");D.setServerCertificate(He).then(function(){x.info("DRM: License server certificate successfully updated."),T.trigger(k.SERVER_CERTIFICATE_UPDATED)}).catch(function(De){T.trigger(k.SERVER_CERTIFICATE_UPDATED,{error:new j.default(R.default.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,R.default.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+De.name)})})},createKeySession:function xe(He){if(!P||!D)throw new Error("Can not create sessions until you have selected a key system");var De=D.createSession(He.sessionType),he=qe(De,He);De.generateRequest(P.systemString===b.default.CLEARKEY_KEYSTEM_STRING&&(He.initData||He.protData&&He.protData.clearkeys)?b.default.INITIALIZATION_DATA_TYPE_KEYIDS:b.default.INITIALIZATION_DATA_TYPE_CENC,He.initData).then(function(){x.debug("DRM: Session created.  SessionID = "+he.getSessionId()),T.trigger(k.KEY_SESSION_CREATED,{data:he})}).catch(function(J){ke(he),T.trigger(k.KEY_SESSION_CREATED,{data:null,error:new j.default(R.default.KEY_SESSION_CREATED_ERROR_CODE,R.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+J.name)})})},updateKeySession:function ve(He,De){var he=He.session;I.isClearKey(P)&&(De=De.toJWK()),he.update(De).then(function(){T.trigger(k.KEY_SESSION_UPDATED)}).catch(function(Y){T.trigger(k.KEY_ERROR,{error:new j.default(R.default.MEDIA_KEYERR_CODE,"Error sending update() message! "+Y.name,He)})})},loadKeySession:function Oe(He){if(!P||!D)throw new Error("Can not load sessions until you have selected a key system");for(var De=He.sessionId,he=0;he<y.length;he++)if(De===y[he].sessionId)return void x.warn("DRM: Ignoring session ID because we have already seen it!");var Y=D.createSession(He.sessionType),J=qe(Y,He);Y.load(De).then(function(Me){Me?(x.debug("DRM: Session loaded.  SessionID = "+J.getSessionId()),T.trigger(k.KEY_SESSION_CREATED,{data:J})):(ke(J),T.trigger(k.KEY_SESSION_CREATED,{data:null,error:new j.default(R.default.KEY_SESSION_CREATED_ERROR_CODE,R.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+De+")")}))}).catch(function(Me){ke(J),T.trigger(k.KEY_SESSION_CREATED,{data:null,error:new j.default(R.default.KEY_SESSION_CREATED_ERROR_CODE,R.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+De+")! "+Me.name)})})},removeKeySession:function Ee(He){He.session.remove().then(function(){x.debug("DRM: Session removed.  SessionID = "+He.getSessionId()),T.trigger(k.KEY_SESSION_REMOVED,{data:He.getSessionId()})},function(he){T.trigger(k.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+He.getSessionId()+"). "+he.name})})},closeKeySession:function Ie(He){Re(He).catch(function(De){ke(He),T.trigger(k.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+He.getSessionId()+") "+De.name})})},stop:function de(){for(var He,De=0;De<y.length;De++)(He=y[De]).getUsable()||Re(He).catch(function(){ke(He)})},reset:function ee(){var De,He=y.length;0!==He?function(){for(var he=function(Me){ke(Me),0===y.length&&(_?(_.removeEventListener("encrypted",A),_.setMediaKeys(null).then(function(){T.trigger(k.TEARDOWN_COMPLETE)})):T.trigger(k.TEARDOWN_COMPLETE))},Y=0;Y<He;Y++)!function(J){De.session.closed.then(function(){he(J)}),Re(De).catch(function(){he(J)})}(De=y[Y])}():T.trigger(k.TEARDOWN_COMPLETE)}},function G(){x=N.getLogger(B),P=null,_=null,D=null,y=[],I=Object(e.default)(v).getInstance(),A=function Pe(){return{handleEvent:function(De){if("encrypted"===De.type&&De.initData){var he=ArrayBuffer.isView(De.initData)?De.initData.buffer:De.initData;T.trigger(k.NEED_KEY,{key:new S.default(he,De.initDataType)})}}}}()}(),B}f[b.default.PLAYREADY_KEYSTEM_STRING]=[b.default.PLAYREADY_KEYSTEM_STRING,b.default.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING],f[b.default.WIDEVINE_KEYSTEM_STRING]=[b.default.WIDEVINE_KEYSTEM_STRING],f[b.default.CLEARKEY_KEYSTEM_STRING]=[b.default.CLEARKEY_KEYSTEM_STRING],c.__dashjs_factory_name="ProtectionModel_21Jan2015",O.default=dashjs.FactoryMaker.getClassFactory(c)},"./src/streaming/protection/models/ProtectionModel_3Feb2014.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/protection/controllers/ProtectionKeyController.js"),S=r("./src/streaming/protection/vo/NeedKey.js"),R=r("./src/streaming/vo/DashJSError.js"),j=r("./src/streaming/protection/errors/ProtectionErrors.js"),U=r("./src/streaming/protection/vo/KeyMessage.js"),L=r("./src/streaming/protection/vo/KeySystemConfiguration.js"),b=r("./src/streaming/protection/vo/KeySystemAccess.js");function f(c){var B,x,P,_,D,y,A,I,G,g=this.context,v=(c=c||{}).eventBus,T=c.events,k=c.debug,N=c.api;function de(){try{for(var Re=0;Re<A.length;Re++)pe(A[Re]);P&&P.removeEventListener(N.needkey,I),v.trigger(T.TEARDOWN_COMPLETE)}catch(Pe){v.trigger(T.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+Pe.message})}}function pe(Re){var Pe=Re.session;Pe.removeEventListener(N.error,Re),Pe.removeEventListener(N.message,Re),Pe.removeEventListener(N.ready,Re),Pe.removeEventListener(N.close,Re);for(var ke=0;ke<A.length;ke++)if(A[ke]===Re){A.splice(ke,1);break}Pe[N.release]()}function Ee(){var Re=null,Pe=function(){P.removeEventListener("loadedmetadata",Re),P[N.setMediaKeys](D),v.trigger(T.VIDEO_ELEMENT_SELECTED)};P.readyState>=1?Pe():(Re=Pe.bind(this),P.addEventListener("loadedmetadata",Re))}return B={getAllInitData:function ue(){for(var Re=[],Pe=0;Pe<A.length;Pe++)Re.push(A[Pe].initData);return Re},getSessions:function Te(){return A},requestKeySystemAccess:function q(Re){return new Promise(function(Pe,ke){for(var Be=!1,qe=0;qe<Re.length;qe++)for(var He=Re[qe].ks.systemString,De=Re[qe].configs,he=null,Y=null,J=0;J<De.length;J++){var Me=De[J].audioCapabilities,ae=De[J].videoCapabilities;if(Me&&0!==Me.length){he=[];for(var re=0;re<Me.length;re++)window[N.MediaKeys].isTypeSupported(He,Me[re].contentType)&&he.push(Me[re])}if(ae&&0!==ae.length){Y=[];for(var z=0;z<ae.length;z++)window[N.MediaKeys].isTypeSupported(He,ae[z].contentType)&&Y.push(ae[z])}if(!(!he&&!Y||he&&0===he.length||Y&&0===Y.length)){Be=!0;var te=new L.default(he,Y),X=G.getKeySystemBySystemString(He),Z=new b.default(X,te);v.trigger(T.KEY_SYSTEM_ACCESS_COMPLETE,{data:Z}),Pe({data:Z});break}}if(!Be){var W="Key system access denied! -- No valid audio/video content configurations detected!";v.trigger(T.KEY_SYSTEM_ACCESS_COMPLETE,{error:W}),ke({error:W})}})},selectKeySystem:function se(Re){return new Promise(function(Pe,ke){try{D=Re.mediaKeys=new window[N.MediaKeys](Re.keySystem.systemString),_=Re.keySystem,y=Re,P&&Ee(),Pe(_)}catch(Be){ke({error:"Error selecting keys system ("+_.systemString+")! Could not create MediaKeys -- TODO"})}})},setMediaElement:function H(Re){P!==Re&&(P&&P.removeEventListener(N.needkey,I),(P=Re)&&(P.addEventListener(N.needkey,I),D&&Ee()))},createKeySession:function ce(Re){if(!_||!D||!y)throw new Error("Can not create sessions until you have selected a key system");var Pe=null;if(y.ksConfiguration.videoCapabilities&&y.ksConfiguration.videoCapabilities.length>0&&(Pe=y.ksConfiguration.videoCapabilities[0]),null===Pe&&y.ksConfiguration.audioCapabilities&&y.ksConfiguration.audioCapabilities.length>0&&(Pe=y.ksConfiguration.audioCapabilities[0]),null===Pe)throw new Error("Can not create sessions for unknown content types.");var Be=D.createSession(Pe.contentType,new Uint8Array(Re.initData),Re.cdmData?new Uint8Array(Re.cdmData):null),qe=function Ie(Re,Pe){return{session:Re,keyId:Pe.keyId,initData:Pe.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(Be){switch(Be.type){case N.error:v.trigger(T.KEY_ERROR,{error:new R.default(j.default.MEDIA_KEYERR_CODE,"KeyError",this)});break;case N.message:var He=ArrayBuffer.isView(Be.message)?Be.message.buffer:Be.message;v.trigger(T.INTERNAL_KEY_MESSAGE,{data:new U.default(this,He,Be.destinationURL)});break;case N.ready:x.debug("DRM: Key added."),v.trigger(T.KEY_ADDED);break;case N.close:x.debug("DRM: Session closed.  SessionID = "+this.getSessionId()),v.trigger(T.KEY_SESSION_CLOSED,{data:this.getSessionId()})}}}}(Be,Re);Be.addEventListener(N.error,qe),Be.addEventListener(N.message,qe),Be.addEventListener(N.ready,qe),Be.addEventListener(N.close,qe),A.push(qe),x.debug("DRM: Session created.  SessionID = "+qe.getSessionId()),v.trigger(T.KEY_SESSION_CREATED,{data:qe})},updateKeySession:function ne(Re,Pe){var ke=Re.session;G.isClearKey(_)?ke.update(new Uint8Array(Pe.toJWK())):ke.update(new Uint8Array(Pe)),v.trigger(T.KEY_SESSION_UPDATED)},closeKeySession:pe,setServerCertificate:function me(){},loadKeySession:function xe(){},removeKeySession:function ve(){},stop:de,reset:de},function ee(){x=k.getLogger(B),P=null,_=null,D=null,y=null,A=[],G=Object(e.default)(g).getInstance(),I=function Oe(){return{handleEvent:function(Pe){if(Pe.type===N.needkey&&Pe.initData){var ke=ArrayBuffer.isView(Pe.initData)?Pe.initData.buffer:Pe.initData;v.trigger(T.NEED_KEY,{key:new S.default(ke,"cenc")})}}}}()}(),B}f.__dashjs_factory_name="ProtectionModel_3Feb2014",O.default=dashjs.FactoryMaker.getClassFactory(f)},"./src/streaming/protection/servers/ClearKey.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/protection/vo/KeyPair.js"),S=r("./src/streaming/protection/vo/ClearKeyKeySet.js");function R(){return{getServerURLFromMessage:function U(g){return g},getHTTPMethod:function L(){return"POST"},getResponseType:function b(){return"json"},getLicenseMessage:function f(g){if(!g.hasOwnProperty("keys"))return null;for(var v=[],T=0;T<g.keys.length;T++){var k=g.keys[T],N=k.kid.replace(/=/g,""),B=k.k.replace(/=/g,"");v.push(new e.default(N,B))}return new S.default(v)},getErrorResponse:function c(g){return String.fromCharCode.apply(null,new Uint8Array(g))}}}R.__dashjs_factory_name="ClearKey",O.default=dashjs.FactoryMaker.getSingletonFactory(R)},"./src/streaming/protection/servers/DRMToday.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/constants/ProtectionConstants.js");function S(R){var j=(R=R||{}).BASE64,U={};return U[e.default.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(N){return j.decodeArray(N.license)},getErrorResponse:function(N){return N}},U[e.default.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(N){return N},getErrorResponse:function(N){return String.fromCharCode.apply(null,new Uint8Array(N))}},{getServerURLFromMessage:function f(k){return k},getHTTPMethod:function c(){return"POST"},getResponseType:function g(k){return U[k].responseType},getLicenseMessage:function v(k,N){return function b(){if(!j||!j.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),U[N].getLicenseMessage(k)},getErrorResponse:function T(k,N){return U[N].getErrorResponse(k)}}}S.__dashjs_factory_name="DRMToday",O.default=dashjs.FactoryMaker.getSingletonFactory(S)},"./src/streaming/protection/servers/PlayReady.js":function(Ve,O,r){"use strict";function e(){var R="http://schemas.xmlsoap.org/soap/envelope/";function j(T){var k=String.fromCharCode.apply(null,new Uint8Array(T));return decodeURIComponent(escape(k))}function U(T){if(window.DOMParser){var k=j(T),B=(new window.DOMParser).parseFromString(k,"text/xml"),x=B?B.getElementsByTagNameNS(R,"Envelope")[0]:null,P=x?x.getElementsByTagNameNS(R,"Body")[0]:null;if(P&&P.getElementsByTagNameNS(R,"Fault")[0])return null}return T}function L(T){var k="",N="",B="",x=-1,P=-1;if(window.DOMParser){var _=j(T),y=(new window.DOMParser).parseFromString(_,"text/xml"),A=y?y.getElementsByTagNameNS(R,"Envelope")[0]:null,I=A?A.getElementsByTagNameNS(R,"Body")[0]:null,G=I?I.getElementsByTagNameNS(R,"Fault")[0]:null,ee=G?G.getElementsByTagName("detail")[0]:null,de=ee?ee.getElementsByTagName("Exception")[0]:null,ue=null;if(null===G)return _;k=(ue=G.getElementsByTagName("faultstring")[0].firstChild)?ue.nodeValue:null,null!==de&&(N=(ue=de.getElementsByTagName("StatusCode")[0])?ue.firstChild.nodeValue:null,x=(B=(ue=de.getElementsByTagName("Message")[0])?ue.firstChild.nodeValue:null)?B.lastIndexOf("[")+1:-1,P=B?B.indexOf("]"):-1,B=B?B.substring(x,P):"")}var Te="code: ".concat(N,", name: ").concat(k);return B&&(Te+=", message: ".concat(B)),Te}return{getServerURLFromMessage:function b(T){return T},getHTTPMethod:function f(){return"POST"},getResponseType:function c(){return"arraybuffer"},getLicenseMessage:function g(T){return U.call(this,T)},getErrorResponse:function v(T){return L.call(this,T)}}}r.r(O),e.__dashjs_factory_name="PlayReady",O.default=dashjs.FactoryMaker.getSingletonFactory(e)},"./src/streaming/protection/servers/Widevine.js":function(Ve,O,r){"use strict";function e(){return{getServerURLFromMessage:function R(f){return f},getHTTPMethod:function j(){return"POST"},getResponseType:function U(){return"arraybuffer"},getLicenseMessage:function L(f){return f},getErrorResponse:function b(f){return String.fromCharCode.apply(null,new Uint8Array(f))}}}r.r(O),e.__dashjs_factory_name="Widevine",O.default=dashjs.FactoryMaker.getSingletonFactory(e)},"./src/streaming/protection/vo/ClearKeyKeySet.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function R(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,U(v.key),v)}}function U(f){var c=function L(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=function(){function f(c,g){if(function S(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")}(this,f),g&&"persistent"!==g&&"temporary"!==g)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=c,this.type=g}return function j(f,c,g){return c&&R(f.prototype,c),g&&R(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}(f,[{key:"toJWK",value:function(){var g,v=this.keyPairs.length,T={keys:[]};for(g=0;g<v;g++)T.keys.push({kty:"oct",alg:"A128KW",kid:this.keyPairs[g].keyID,k:this.keyPairs[g].key});this.type&&(T.type=this.type);var N=JSON.stringify(T),B=N.length,x=new ArrayBuffer(B),P=new Uint8Array(x);for(g=0;g<B;g++)P[g]=N.charCodeAt(g);return x}}]),f}()},"./src/streaming/protection/vo/KeyMessage.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function S(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,j(v.key),v)}}function R(f,c,g){return c&&S(f.prototype,c),g&&S(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}function j(f){var c=function U(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=R(function f(c,g,v,T){(function L(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,f),this.sessionToken=c,this.message=g,this.defaultURL=v,this.messageType=T||"license-request"})},"./src/streaming/protection/vo/KeyPair.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function S(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,j(v.key),v)}}function R(f,c,g){return c&&S(f.prototype,c),g&&S(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}function j(f){var c=function U(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=R(function f(c,g){(function L(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,f),this.keyID=c,this.key=g})},"./src/streaming/protection/vo/KeySystemAccess.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function S(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,j(v.key),v)}}function R(f,c,g){return c&&S(f.prototype,c),g&&S(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}function j(f){var c=function U(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=R(function f(c,g){(function L(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,f),this.keySystem=c,this.ksConfiguration=g})},"./src/streaming/protection/vo/KeySystemConfiguration.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function S(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,j(v.key),v)}}function R(f,c,g){return c&&S(f.prototype,c),g&&S(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}function j(f){var c=function U(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=R(function f(c,g,v,T,k){(function L(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,f),this.initDataTypes=["cenc"],c&&c.length&&(this.audioCapabilities=c),g&&g.length&&(this.videoCapabilities=g),this.distinctiveIdentifier=v,this.persistentState=T,this.sessionTypes=k})},"./src/streaming/protection/vo/LicenseRequest.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function S(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,j(v.key),v)}}function R(f,c,g){return c&&S(f.prototype,c),g&&S(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}function j(f){var c=function U(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=R(function f(c,g,v,T,k,N,B,x){(function L(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,f),this.url=c,this.method=g,this.responseType=v,this.headers=T,this.withCredentials=k,this.messageType=N,this.sessionId=B,this.data=x})},"./src/streaming/protection/vo/LicenseResponse.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function S(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,j(v.key),v)}}function R(f,c,g){return c&&S(f.prototype,c),g&&S(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}function j(f){var c=function U(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=R(function f(c,g,v){(function L(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,f),this.url=c,this.headers=g,this.data=v})},"./src/streaming/protection/vo/MediaCapability.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function S(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,j(v.key),v)}}function R(f,c,g){return c&&S(f.prototype,c),g&&S(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}function j(f){var c=function U(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=R(function f(c,g){(function L(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,f),this.contentType=c,this.robustness=g})},"./src/streaming/protection/vo/NeedKey.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function S(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,j(v.key),v)}}function R(f,c,g){return c&&S(f.prototype,c),g&&S(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}function j(f){var c=function U(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=R(function f(c,g){(function L(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,f),this.initData=c,this.initDataType=g})},"./src/streaming/rules/DroppedFramesHistory.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js");function S(){var j={},U={},L={};return{push:function b(v,T,k){if(T){j[v]||(j[v]=[],U[v]=0,L[v]=0);var N=k&&k.droppedVideoFrames?k.droppedVideoFrames:0,B=k&&k.totalVideoFrames?k.totalVideoFrames:0,x=N-U[v];U[v]=N;var P=B-L[v];L[v]=B;var _=j[v];isNaN(T)||(_[T]?(_[T].droppedVideoFrames+=x,_[T].totalVideoFrames+=P):_[T]={droppedVideoFrames:x,totalVideoFrames:P})}},getFrameHistory:function f(v){return j[v]},clearForStream:function c(v){try{delete j[v],delete U[v],delete L[v]}catch(T){}},reset:function g(){j={},U={},L={}}}}S.__dashjs_factory_name="DroppedFramesHistory";var R=e.default.getClassFactory(S);O.default=R},"./src/streaming/rules/RulesContext.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js");function S(R){var U=(R=R||{}).abrController,L=R.switchHistory,b=R.droppedFramesHistory,f=R.currentRequest,c=R.useBufferOccupancyABR,g=R.useL2AABR,v=R.useLoLPABR,T=R.streamProcessor?R.streamProcessor.getScheduleController():null,k=R.streamProcessor?R.streamProcessor.getRepresentationInfo():null,N=R.videoModel?R.videoModel:null;function P(){return k?k.mediaInfo:null}return{getMediaType:function B(){var q=P();return q?q.type:null},getMediaInfo:P,getDroppedFramesHistory:function G(){return b},getCurrentRequest:function ee(){return f},getSwitchHistory:function A(){return L},getStreamInfo:function x(){var q=P();return q?q.streamInfo:null},getScheduleController:function D(){return T},getAbrController:function y(){return U},getRepresentationInfo:function _(){return k},useBufferOccupancyABR:function de(){return c},useL2AABR:function ue(){return g},useLoLPABR:function Te(){return v},getVideoModel:function I(){return N}}}S.__dashjs_factory_name="RulesContext",O.default=e.default.getClassFactory(S)},"./src/streaming/rules/SwitchRequest.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js"),R={DEFAULT:.5,STRONG:1,WEAK:0};function j(L,b,f){return{quality:void 0===L?-1:L,reason:void 0===b?null:b,priority:function k(N){var B=R.DEFAULT;return(N===R.DEFAULT||N===R.STRONG||N===R.WEAK)&&(B=N),B}(f)}}j.__dashjs_factory_name="SwitchRequest";var U=e.default.getClassFactory(j);U.NO_CHANGE=-1,U.PRIORITY=R,e.default.updateClassFactory(j.__dashjs_factory_name,U),O.default=U},"./src/streaming/rules/SwitchRequestHistory.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js"),S=r("./src/streaming/rules/SwitchRequest.js");function j(){var L=[],b=[];return{push:function f(v){v.newValue===S.default.NO_CHANGE&&(v.newValue=v.oldValue),L[v.oldValue]||(L[v.oldValue]={noDrops:0,drops:0,dropSize:0});var T=v.newValue-v.oldValue,k=T<0?1:0,N=k?-T:0,B=k?0:1;if(L[v.oldValue].drops+=k,L[v.oldValue].dropSize+=N,L[v.oldValue].noDrops+=B,b.push({idx:v.oldValue,noDrop:B,drop:k,dropSize:N}),b.length>8){var x=b.shift();L[x.idx].drops-=x.drop,L[x.idx].dropSize-=x.dropSize,L[x.idx].noDrops-=x.noDrop}},getSwitchRequests:function c(){return L},reset:function g(){L=[],b=[]}}}j.__dashjs_factory_name="SwitchRequestHistory";var U=e.default.getClassFactory(j);O.default=U},"./src/streaming/rules/ThroughputHistory.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/constants/Constants.js"),S=r("./src/core/FactoryMaker.js");function R(j){var x,P,_,D,y,B=(j=j||{}).settings;function ee(ve,Oe,Ee,Ie){var Re=Math.pow(.5,Ee/Ie.fast);ve.fastEstimate=(1-Re)*Oe+Re*ve.fastEstimate;var Pe=Math.pow(.5,Ee/Ie.slow);ve.slowEstimate=(1-Pe)*Oe+Pe*ve.slowEstimate,ve.totalWeight+=Ee}function ue(ve,Oe,Ee){return B.get().streaming.abr.movingAverageMethod!==e.default.MOVING_AVERAGE_SLIDING_WINDOW?function q(ve,Oe){var Ee=ve?y.throughputHalfLife:y.latencyHalfLife,Ie=ve?_[Oe]:D[Oe];if(!Ie||Ie.totalWeight<=0)return NaN;var Re=Ie.fastEstimate/(1-Math.pow(.5,Ie.totalWeight/Ee.fast)),Pe=Ie.slowEstimate/(1-Math.pow(.5,Ie.totalWeight/Ee.slow));return ve?Math.min(Re,Pe):Math.max(Re,Pe)}(ve,Oe):function Te(ve,Oe,Ee){var Ie=function de(ve,Oe,Ee){var Ie,Re;if(ve?(Ie=x[Oe],Re=Ee?3:4):(Ie=P[Oe],Re=4),Ie){if(Re>=Ie.length)Re=Ie.length;else if(ve)for(var Pe=1;Pe<Re;++Pe){var ke=Ie[Ie.length-Pe]/Ie[Ie.length-Pe-1];if((ke>=1.3||ke<=1/1.3)&&(Re+=1)===Ie.length)break}}else Re=0;return Re}(ve,Oe,Ee),Pe=(ve?x:P)[Oe];return 0!==Ie&&Pe&&0!==Pe.length?(Pe=Pe.slice(-Ie)).reduce(function(ke,Be){return ke+Be})/Pe.length:NaN}(ve,Oe,Ee)}function se(ve,Oe){return ue(!0,ve,Oe)}function ne(ve){x[ve]=x[ve]||[],P[ve]=P[ve]||[],_[ve]=_[ve]||{fastEstimate:0,slowEstimate:0,totalWeight:0},D[ve]=D[ve]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function me(){x={},P={},_={},D={}}var xe={push:function G(ve,Oe,Ee){if(Oe.trace&&Oe.trace.length){var ke,Ie=Oe.tresponse.getTime()-Oe.trequest.getTime()||1,Re=Oe._tfinish.getTime()-Oe.tresponse.getTime()||1,Pe=Oe.trace.reduce(function(qe,He){return qe+He.b[0]},0),Be=0;if(0!==(ke=Oe._fileLoaderType&&Oe._fileLoaderType===e.default.FILE_LOADER_TYPES.FETCH?Oe.trace.reduce(function(qe,He){return qe+He.d},0):Ee?Re:Ie+Re)&&(Be=Math.round(8*Pe/ke)),ne(ve),function I(ve,Oe,Ee){return ve===e.default.VIDEO?Ee<B.get().streaming.cacheLoadThresholds[e.default.VIDEO]:ve===e.default.AUDIO?Ee<B.get().streaming.cacheLoadThresholds[e.default.AUDIO]:void 0}(ve,0,Re)){if(x[ve].length>0&&!x[ve].hasCachedEntries)return;x[ve].hasCachedEntries=!0}else x[ve]&&x[ve].hasCachedEntries&&function pe(ve){delete x[ve],delete P[ve],delete _[ve],delete D[ve],ne(ve)}(ve);x[ve].push(Be),x[ve].length>20&&x[ve].shift(),P[ve].push(Ie),P[ve].length>20&&P[ve].shift(),ee(_[ve],Be,.001*Re,y.throughputHalfLife),ee(D[ve],Ie,1,y.latencyHalfLife)}},getAverageThroughput:se,getSafeAverageThroughput:function H(ve,Oe){var Ee=se(ve,Oe);return isNaN(Ee)||(Ee*=B.get().streaming.abr.bandwidthSafetyFactor),Ee},getAverageLatency:function ce(ve){return ue(!1,ve)},reset:me};return function A(){y={throughputHalfLife:{fast:3,slow:8},latencyHalfLife:{fast:1,slow:2}},me()}(),xe}R.__dashjs_factory_name="ThroughputHistory",O.default=S.default.getClassFactory(R)},"./src/streaming/rules/abr/ABRRulesCollection.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/rules/abr/ThroughputRule.js"),S=r("./src/streaming/rules/abr/InsufficientBufferRule.js"),R=r("./src/streaming/rules/abr/AbandonRequestsRule.js"),j=r("./src/streaming/rules/abr/DroppedFramesRule.js"),U=r("./src/streaming/rules/abr/SwitchHistoryRule.js"),L=r("./src/streaming/rules/abr/BolaRule.js"),b=r("./src/streaming/rules/abr/L2ARule.js"),f=r("./src/streaming/rules/abr/lolp/LoLpRule.js"),c=r("./src/core/FactoryMaker.js"),g=r("./src/streaming/rules/SwitchRequest.js"),v=r("./src/streaming/constants/Constants.js"),T="qualitySwitchRules",k="abandonFragmentRules";function N(x){var G,ee,P=this.context,_=(x=x||{}).mediaPlayerModel,D=x.customParametersModel,y=x.dashMetrics,A=x.settings;function ue(ne){return ne.filter(function(pe){return pe.quality>g.default.NO_CHANGE})}function Te(ne){var xe,ve,Oe,Ee,Ie,pe={},me=null;if(0!==ne.length){for(pe[g.default.PRIORITY.STRONG]={quality:g.default.NO_CHANGE,reason:null},pe[g.default.PRIORITY.WEAK]={quality:g.default.NO_CHANGE,reason:null},pe[g.default.PRIORITY.DEFAULT]={quality:g.default.NO_CHANGE,reason:null},xe=0,ve=ne.length;xe<ve;xe+=1)(Oe=ne[xe]).quality!==g.default.NO_CHANGE&&(pe[Oe.priority].quality===g.default.NO_CHANGE||pe[Oe.priority].quality>Oe.quality)&&(pe[Oe.priority].quality=Oe.quality,pe[Oe.priority].reason=Oe.reason||null);return pe[g.default.PRIORITY.WEAK].quality!==g.default.NO_CHANGE&&(me=pe[g.default.PRIORITY.WEAK]),pe[g.default.PRIORITY.DEFAULT].quality!==g.default.NO_CHANGE&&(me=pe[g.default.PRIORITY.DEFAULT]),pe[g.default.PRIORITY.STRONG].quality!==g.default.NO_CHANGE&&(me=pe[g.default.PRIORITY.STRONG]),me&&(Ee=me.quality,Ie=me.reason),Object(g.default)(P).create(Ee,Ie)}}return{initialize:function de(){G=[],ee=[],A.get().streaming.abr.useDefaultABRRules&&(A.get().streaming.abr.ABRStrategy===v.default.ABR_STRATEGY_L2A?G.push(Object(b.default)(P).create({dashMetrics:y,settings:A})):A.get().streaming.abr.ABRStrategy===v.default.ABR_STRATEGY_LoLP?G.push(Object(f.default)(P).create({dashMetrics:y})):(G.push(Object(L.default)(P).create({dashMetrics:y,mediaPlayerModel:_,settings:A})),G.push(Object(e.default)(P).create({dashMetrics:y})),A.get().streaming.abr.additionalAbrRules.insufficientBufferRule&&G.push(Object(S.default)(P).create({dashMetrics:y,settings:A})),A.get().streaming.abr.additionalAbrRules.switchHistoryRule&&G.push(Object(U.default)(P).create()),A.get().streaming.abr.additionalAbrRules.droppedFramesRule&&G.push(Object(j.default)(P).create()),A.get().streaming.abr.additionalAbrRules.abandonRequestsRule&&ee.push(Object(R.default)(P).create({dashMetrics:y,mediaPlayerModel:_,settings:A})))),D.getAbrCustomRules().forEach(function(pe){pe.type===T&&G.push(pe.rule(P).create()),pe.type===k&&ee.push(pe.rule(P).create())})},reset:function H(){[G,ee].forEach(function(ne){ne&&ne.length&&ne.forEach(function(pe){return pe.reset&&pe.reset()})}),G=[],ee=[]},getMaxQuality:function q(ne){return Te(ue(G.map(function(ve){return ve.getMaxIndex(ne)})))||Object(g.default)(P).create()},getMinSwitchRequest:Te,shouldAbandonFragment:function se(ne,pe){return Te(ue(ee.map(function(Oe){return Oe.shouldAbandon(ne,pe)})))||Object(g.default)(P).create()},getQualitySwitchRules:function ce(){return G}}}N.__dashjs_factory_name="ABRRulesCollection";var B=c.default.getClassFactory(N);B.QUALITY_SWITCH_RULES=T,B.ABANDON_FRAGMENT_RULES=k,c.default.updateSingletonFactory(N.__dashjs_factory_name,B),O.default=B},"./src/streaming/rules/abr/AbandonRequestsRule.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/rules/SwitchRequest.js"),S=r("./src/core/FactoryMaker.js"),R=r("./src/core/Debug.js");function j(U){var k,N,B,x,P,c=this.context,g=(U=U||{}).mediaPlayerModel,v=U.dashMetrics,T=U.settings;function I(){B={},x={},P=[]}return k={shouldAbandon:function A(G){var ee=Object(e.default)(c).create(e.default.NO_CHANGE,{name:j.__dashjs_factory_name});if(!(G&&G.hasOwnProperty("getMediaInfo")&&G.hasOwnProperty("getMediaType")&&G.hasOwnProperty("getCurrentRequest")&&G.hasOwnProperty("getRepresentationInfo")&&G.hasOwnProperty("getAbrController")))return ee;var de=G.getMediaInfo(),ue=G.getMediaType(),Te=G.getStreamInfo(),q=Te?Te.id:null,se=G.getCurrentRequest();if(!isNaN(se.index)){!function D(G,ee){B[G]=B[G]||{},B[G][ee]=B[G][ee]||{}}(ue,se.index);var H=g.getStableBufferTime();if(v.getCurrentBufferLevel(ue)>H)return ee;var ne=B[ue][se.index];if(null===ne||null===se.firstByteDate||x.hasOwnProperty(ne.id))return ee;if(void 0===ne.firstByteTime&&(P[ue]=[],ne.firstByteTime=se.firstByteDate.getTime(),ne.segmentDuration=se.duration,ne.bytesTotal=se.bytesTotal,ne.id=se.index),ne.bytesLoaded=se.bytesLoaded,ne.elapsedTime=(new Date).getTime()-ne.firstByteTime,ne.bytesLoaded>0&&ne.elapsedTime>0&&function y(G,ee){P[G]=P[G]||[],P[G].push(ee)}(ue,Math.round(8*ne.bytesLoaded/ne.elapsedTime)),P[ue].length>=5&&ne.elapsedTime>500&&ne.bytesLoaded<ne.bytesTotal){var pe=P[ue].reduce(function(Pe,ke){return Pe+ke},0);if(ne.measuredBandwidthInKbps=Math.round(pe/P[ue].length),ne.estimatedTimeOfDownload=+(8*ne.bytesTotal/ne.measuredBandwidthInKbps/1e3).toFixed(2),ne.estimatedTimeOfDownload<1.8*ne.segmentDuration||0===G.getRepresentationInfo().quality)return ee;if(!x.hasOwnProperty(ne.id)){var me=G.getAbrController(),xe=ne.bytesTotal-ne.bytesLoaded,ve=me.getBitrateList(de),Oe=me.getQualityForBitrate(de,ne.measuredBandwidthInKbps*T.get().streaming.abr.bandwidthSafetyFactor,q),Ee=me.getMinAllowedIndexFor(ue,q),Ie=void 0!==Ee?Math.max(Ee,Oe):Oe;xe>ne.bytesTotal*ve[Ie].bitrate/ve[me.getQualityFor(ue,q)].bitrate&&(ee.quality=Ie,ee.reason.throughput=ne.measuredBandwidthInKbps,ee.reason.fragmentID=ne.id,x[ne.id]=ne,N.debug("["+ue+"] frag id",ne.id," is asking to abandon and switch to quality to ",Ie," measured bandwidth was",ne.measuredBandwidthInKbps),delete B[ue][ne.id])}}else ne.bytesLoaded===ne.bytesTotal&&delete B[ue][ne.id]}return ee},reset:I},function _(){N=Object(R.default)(c).getInstance().getLogger(k),I()}(),k}j.__dashjs_factory_name="AbandonRequestsRule",O.default=S.default.getClassFactory(j)},"./src/streaming/rules/abr/BolaRule.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/constants/MetricsConstants.js"),S=r("./src/streaming/rules/SwitchRequest.js"),R=r("./src/core/FactoryMaker.js"),j=r("./src/streaming/vo/metrics/HTTPRequest.js"),U=r("./src/core/EventBus.js"),L=r("./src/core/events/Events.js"),b=r("./src/core/Debug.js"),f=r("./src/streaming/MediaPlayerEvents.js"),c=r("./src/streaming/constants/Constants.js"),k=10;function x(P){var I,G,ee,_=this.context,D=(P=P||{}).dashMetrics,y=P.mediaPlayerModel,A=Object(U.default)(_).getInstance();function Te(De,he,Y){var J=Y.reduce(function(z,te,X){return te>Y[z]?X:z},0);if(0===J)return null;var Me=Math.max(De,k+2*he.length),ae=(Y[J]-1)/(Me/k-1);return{gp:ae,Vp:k/ae}}function q(De){var he={},J=De.getMediaInfo().bitrateList.map(function(z){return z.bandwidth}),Me=function ue(De){return De.map(function(he){return Math.log(he)})}(J);Me=Me.map(function(z){return z-Me[0]+1});var ae=y.getStableBufferTime(),re=Te(ae,J,Me);return re?(he.state=1,he.bitrates=J,he.utilities=Me,he.stableBufferTime=ae,he.Vp=re.Vp,he.gp=re.gp,he.lastQuality=0,se(he)):he.state=0,he}function se(De){De.placeholderBuffer=0,De.mostAdvancedSegmentStart=NaN,De.lastSegmentWasReplacement=!1,De.lastSegmentStart=NaN,De.lastSegmentDurationS=NaN,De.lastSegmentRequestTimeMs=NaN,De.lastSegmentFinishTimeMs=NaN}function H(De,he){var Y=y.getStableBufferTime();if(De.stableBufferTime!==Y){var J=Te(Y,De.bitrates,De.utilities);if(J.Vp!==De.Vp||J.gp!==De.gp){var Me=D.getCurrentBufferLevel(he),ae=Me+De.placeholderBuffer;ae-=k,ae*=J.Vp/De.Vp,ae+=k,De.stableBufferTime=Y,De.Vp=J.Vp,De.gp=J.gp,De.placeholderBuffer=Math.max(0,ae-Me)}}}function pe(De,he){return De.Vp*(De.utilities[he]+De.gp)}function me(De,he){for(var Y=De.bitrates[he],J=De.utilities[he],Me=0,ae=he-1;ae>=0;--ae)if(De.utilities[ae]<De.utilities[he]){var re=De.bitrates[ae];Me=Math.max(Me,De.Vp*(De.gp+(Y*De.utilities[ae]-re*J)/(Y-re)))}return Me}function ve(De){var Y=De.mediaType===c.default.AUDIO?[c.default.AUDIO]:ee;for(var J in Y)ee.hasOwnProperty(J)&&2===ee[J].state&&(ee[J].placeholderBuffer=0)}function Oe(){for(var De in ee)if(ee.hasOwnProperty(De)){var he=ee[De];0!==he.state&&(he.state=1,se(he))}}function Ee(De){if(De&&De.chunk&&De.chunk.mediaInfo){var he=ee[De.chunk.mediaInfo.type];if(he&&0!==he.state){var Y=De.chunk.start;isNaN(he.mostAdvancedSegmentStart)||Y>he.mostAdvancedSegmentStart?(he.mostAdvancedSegmentStart=Y,he.lastSegmentWasReplacement=!1):he.lastSegmentWasReplacement=!0,he.lastSegmentStart=Y,he.lastSegmentDurationS=De.chunk.duration,he.lastQuality=De.chunk.quality,Re(he,De.chunk.mediaInfo.type)}}}function Ie(De){if(De&&De.metric===e.default.HTTP_REQUEST&&De.value&&De.value.type===j.HTTPRequest.MEDIA_SEGMENT_TYPE&&De.value.trace&&De.value.trace.length){var he=ee[De.mediaType];he&&0!==he.state&&(he.lastSegmentRequestTimeMs=De.value.trequest.getTime(),he.lastSegmentFinishTimeMs=De.value._tfinish.getTime(),Re(he,De.mediaType))}}function Re(De,he){if(!isNaN(De.lastSegmentStart)&&!isNaN(De.lastSegmentRequestTimeMs)&&!isNaN(De.placeholderBuffer)){if(De.placeholderBuffer*=.99,!isNaN(De.lastSegmentFinishTimeMs)){var J=D.getCurrentBufferLevel(he)+.001*(De.lastSegmentFinishTimeMs-De.lastSegmentRequestTimeMs),Me=pe(De,De.lastQuality),ae=Math.max(0,Me-J);De.placeholderBuffer=Math.min(ae,De.placeholderBuffer)}De.lastSegmentWasReplacement&&!isNaN(De.lastSegmentDurationS)&&(De.placeholderBuffer+=De.lastSegmentDurationS),De.lastSegmentStart=NaN,De.lastSegmentRequestTimeMs=NaN}}function Pe(De){if(De){var he=ee[De.mediaType];he&&0!==he.state&&(he.abrQuality=De.newQuality)}}function ke(De){if(De){var he=ee[De.mediaType];if(he&&0!==he.state){var J,Y=D.getCurrentBufferLevel(De.mediaType);J=he.abrQuality>0?me(he,he.abrQuality):k;var Me=Math.max(0,J-Y);he.placeholderBuffer=Math.min(he.placeholderBuffer,Me)}}}function qe(){ee={}}return I={getMaxIndex:function Be(De){var he=Object(S.default)(_).create();if(!(De&&De.hasOwnProperty("getMediaInfo")&&De.hasOwnProperty("getMediaType")&&De.hasOwnProperty("getScheduleController")&&De.hasOwnProperty("getStreamInfo")&&De.hasOwnProperty("getAbrController")&&De.hasOwnProperty("useBufferOccupancyABR")))return he;var Y=De.getMediaInfo(),J=De.getMediaType(),Me=De.getScheduleController(),ae=De.getStreamInfo(),re=De.getAbrController(),z=re.getThroughputHistory(),te=ae?ae.id:null,X=ae&&ae.manifestInfo&&ae.manifestInfo.isDynamic,Z=De.useBufferOccupancyABR();if(he.reason=he.reason||{},!Z)return he;Me.setTimeToLoadDelay(0);var W=function ce(De){var he=De.getMediaType(),Y=ee[he];return Y?0!==Y.state&&H(Y,he):(Y=q(De),ee[he]=Y),Y}(De);if(0===W.state)return he;var at,oe=D.getCurrentBufferLevel(J),be=z.getAverageThroughput(J,X),Fe=z.getSafeAverageThroughput(J,X),We=z.getAverageLatency(J);if(he.reason.state=W.state,he.reason.throughput=be,he.reason.latency=We,isNaN(be))return he;switch(W.state){case 1:at=re.getQualityForBitrate(Y,Fe,te,We),he.quality=at,he.reason.throughput=Fe,W.placeholderBuffer=Math.max(0,me(W,at)-oe),W.lastQuality=at,!isNaN(W.lastSegmentDurationS)&&oe>=W.lastSegmentDurationS&&(W.state=2);break;case 2:(function xe(De,he){var Y=Date.now();isNaN(De.lastSegmentFinishTimeMs)?isNaN(De.lastCallTimeMs)||(De.placeholderBuffer+=Math.max(0,.001*(Y-De.lastCallTimeMs))):De.placeholderBuffer+=Math.max(0,.001*(Y-De.lastSegmentFinishTimeMs)),De.lastCallTimeMs=Y,De.lastSegmentStart=NaN,De.lastSegmentRequestTimeMs=NaN,De.lastSegmentFinishTimeMs=NaN,H(De,he)})(W,J),at=function ne(De,he){for(var Y=De.bitrates.length,J=NaN,Me=NaN,ae=0;ae<Y;++ae){var re=(De.Vp*(De.utilities[ae]+De.gp)-he)/De.bitrates[ae];(isNaN(Me)||re>=Me)&&(Me=re,J=ae)}return J}(W,oe+W.placeholderBuffer);var et=re.getQualityForBitrate(Y,Fe,te,We);at>W.lastQuality&&at>et&&(at=Math.max(et,W.lastQuality));var ut=Math.max(0,oe+W.placeholderBuffer-pe(W,at));ut<=W.placeholderBuffer?(W.placeholderBuffer-=ut,ut=0):(ut-=W.placeholderBuffer,W.placeholderBuffer=0,at<re.getMaxAllowedIndexFor(J,te)?Me.setTimeToLoadDelay(1e3*ut):ut=0),he.quality=at,he.reason.throughput=be,he.reason.latency=We,he.reason.bufferLevel=oe,he.reason.placeholderBuffer=W.placeholderBuffer,he.reason.delay=ut,W.lastQuality=at;break;default:G.debug("BOLA ABR rule invoked in bad state."),he.quality=re.getQualityForBitrate(Y,Fe,te,We),he.reason.state=W.state,he.reason.throughput=Fe,he.reason.latency=We,W.state=1,se(W)}return he},reset:function He(){qe(),A.off(f.default.BUFFER_EMPTY,ve,I),A.off(f.default.PLAYBACK_SEEKING,Oe,I),A.off(f.default.METRIC_ADDED,Ie,I),A.off(f.default.QUALITY_CHANGE_REQUESTED,Pe,I),A.off(f.default.FRAGMENT_LOADING_ABANDONED,ke,I),A.off(L.default.MEDIA_FRAGMENT_LOADED,Ee,I)}},function de(){G=Object(b.default)(_).getInstance().getLogger(I),qe(),A.on(f.default.BUFFER_EMPTY,ve,I),A.on(f.default.PLAYBACK_SEEKING,Oe,I),A.on(f.default.METRIC_ADDED,Ie,I),A.on(f.default.QUALITY_CHANGE_REQUESTED,Pe,I),A.on(f.default.FRAGMENT_LOADING_ABANDONED,ke,I),A.on(L.default.MEDIA_FRAGMENT_LOADED,Ee,I)}(),I}x.__dashjs_factory_name="BolaRule",O.default=R.default.getClassFactory(x)},"./src/streaming/rules/abr/DroppedFramesRule.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js"),S=r("./src/streaming/rules/SwitchRequest.js"),R=r("./src/core/Debug.js");function j(){var L,b,U=this.context;return L={getMaxIndex:function v(T){var k=Object(S.default)(U).create();if(!T||!T.hasOwnProperty("getDroppedFramesHistory"))return k;var N=T.getDroppedFramesHistory(),B=T.getStreamInfo().id;if(N){var x=N.getFrameHistory(B);if(!x||0===x.length)return k;for(var P=0,_=0,D=S.default.NO_CHANGE,y=1;y<x.length;y++)if(x[y]&&(P=x[y].droppedVideoFrames,(_=x[y].totalVideoFrames)>375&&P/_>.15)){b.debug("index: "+(D=y-1)+" Dropped Frames: "+P+" Total Frames: "+_);break}return Object(S.default)(U).create(D,{droppedFrames:P})}return k}},function g(){b=Object(R.default)(U).getInstance().getLogger(L)}(),L}j.__dashjs_factory_name="DroppedFramesRule",O.default=e.default.getClassFactory(j)},"./src/streaming/rules/abr/InsufficientBufferRule.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/EventBus.js"),S=r("./src/core/events/Events.js"),R=r("./src/core/FactoryMaker.js"),j=r("./src/core/Debug.js"),U=r("./src/streaming/rules/SwitchRequest.js"),L=r("./src/streaming/constants/Constants.js"),b=r("./src/streaming/constants/MetricsConstants.js"),f=r("./src/streaming/MediaPlayerEvents.js");function c(g){g=g||{};var x,P,_,k=this.context,N=Object(e.default)(k).getInstance(),B=g.dashMetrics;function G(){(_={})[L.default.VIDEO]={ignoreCount:2},_[L.default.AUDIO]={ignoreCount:2}}function ee(){G()}function de(Te){!isNaN(Te.startTime)&&(Te.mediaType===L.default.AUDIO||Te.mediaType===L.default.VIDEO)&&_[Te.mediaType].ignoreCount>0&&_[Te.mediaType].ignoreCount--}return x={getMaxIndex:function A(Te){var q=Object(U.default)(k).create();if(!Te||!Te.hasOwnProperty("getMediaType"))return q;!function y(){if(!B||!B.hasOwnProperty("getCurrentBufferLevel")||!B.hasOwnProperty("getCurrentBufferState"))throw new Error(L.default.MISSING_CONFIG_ERROR)}();var se=Te.getMediaType(),H=B.getCurrentBufferState(se),ne=Te.getRepresentationInfo().fragmentDuration,pe=Te.getStreamInfo(),me=pe?pe.id:null,xe=Te.getScheduleController(),ve=pe&&pe.manifestInfo&&pe.manifestInfo.isDynamic;if(function I(Te,q){return!Te&&_[q].ignoreCount>0}(xe.getPlaybackController().getLowLatencyModeEnabled(),se)||!ne)return q;if(H&&H.state===b.default.BUFFER_EMPTY)P.debug("["+se+"] Switch to index 0; buffer is empty."),q.quality=0,q.reason="InsufficientBufferRule: Buffer is empty";else{var Ie=Te.getMediaInfo(),Re=Te.getAbrController(),Pe=Re.getThroughputHistory(),ke=B.getCurrentBufferLevel(se),Be=Pe.getAverageThroughput(se,ve),qe=Pe.getAverageLatency(se);q.quality=Re.getQualityForBitrate(Ie,Be*(ke/ne)*.5,me,qe),q.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"}return q},reset:function ue(){G(),N.off(f.default.PLAYBACK_SEEKING,ee,x),N.off(S.default.BYTES_APPENDED_END_FRAGMENT,de,x)}},function D(){P=Object(j.default)(k).getInstance().getLogger(x),G(),N.on(f.default.PLAYBACK_SEEKING,ee,x),N.on(S.default.BYTES_APPENDED_END_FRAGMENT,de,x)}(),x}c.__dashjs_factory_name="InsufficientBufferRule",O.default=R.default.getClassFactory(c)},"./src/streaming/rules/abr/L2ARule.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/constants/MetricsConstants.js"),S=r("./src/streaming/rules/SwitchRequest.js"),R=r("./src/core/FactoryMaker.js"),j=r("./src/streaming/vo/metrics/HTTPRequest.js"),U=r("./src/core/EventBus.js"),L=r("./src/core/events/Events.js"),b=r("./src/core/Debug.js"),f=r("./src/streaming/constants/Constants.js");function T(k){var P,_,D,y,N=this.context,B=(k=k||{}).dashMetrics,x=Object(U.default)(N).getInstance();function I(ve){var Oe={},Ee=ve.getMediaInfo(),Ie=Ee.bitrateList.map(function(Re){return Re.bandwidth/1e3});return Oe.state=1,Oe.bitrates=Ie,Oe.lastQuality=0,function G(ve){!ve||!ve.type||(D[ve.type]={},D[ve.type].w=[],D[ve.type].prev_w=[],D[ve.type].Q=0,D[ve.type].segment_request_start_s=0,D[ve.type].segment_download_finish_s=0,D[ve.type].B_target=1.5)}(Ee),ee(Oe),Oe}function ee(ve){ve.placeholderBuffer=0,ve.mostAdvancedSegmentStart=NaN,ve.lastSegmentWasReplacement=!1,ve.lastSegmentStart=NaN,ve.lastSegmentDurationS=NaN,ve.lastSegmentRequestTimeMs=NaN,ve.lastSegmentFinishTimeMs=NaN}function ue(){for(var ve in _)if(_.hasOwnProperty(ve)){var Oe=_[ve];0!==Oe.state&&(Oe.state=1,ee(Oe))}}function Te(ve){if(ve&&ve.chunk&&ve.chunk.mediaInfo){var Oe=_[ve.chunk.mediaInfo.type],Ee=D[ve.chunk.mediaInfo.type];if(Oe&&0!==Oe.state){var Ie=ve.chunk.start;isNaN(Oe.mostAdvancedSegmentStart)||Ie>Oe.mostAdvancedSegmentStart?(Oe.mostAdvancedSegmentStart=Ie,Oe.lastSegmentWasReplacement=!1):Oe.lastSegmentWasReplacement=!0,Oe.lastSegmentStart=Ie,Oe.lastSegmentDurationS=ve.chunk.duration,Oe.lastQuality=ve.chunk.quality,se(Oe,Ee)}}}function q(ve){if(ve&&ve.metric===e.default.HTTP_REQUEST&&ve.value&&ve.value.type===j.HTTPRequest.MEDIA_SEGMENT_TYPE&&ve.value.trace&&ve.value.trace.length){var Oe=_[ve.mediaType],Ee=D[ve.mediaType];Oe&&0!==Oe.state&&(Oe.lastSegmentRequestTimeMs=ve.value.trequest.getTime(),Oe.lastSegmentFinishTimeMs=ve.value._tfinish.getTime(),se(Oe,Ee))}}function se(ve,Oe){!isNaN(ve.lastSegmentStart)&&!isNaN(ve.lastSegmentRequestTimeMs)&&(Oe.segment_request_start_s=.001*ve.lastSegmentRequestTimeMs,Oe.segment_download_finish_s=.001*ve.lastSegmentFinishTimeMs,ve.lastSegmentStart=NaN,ve.lastSegmentRequestTimeMs=NaN)}function H(ve){if(ve&&ve.mediaType){var Oe=_[ve.mediaType];Oe&&0!==Oe.state&&(Oe.abrQuality=ve.newQuality)}}function ce(ve,Oe){if(ve.length!==Oe.length)return-1;for(var Ee=0,Ie=0;Ie<ve.length;Ie++)Ee+=ve[Ie]*Oe[Ie];return Ee}function me(){_={},D={}}return P={getMaxIndex:function pe(ve){var W,Oe=Object(S.default)(N).create(),Ie=Math.pow(4,.99),Re=Math.max(Math.pow(4,1),Ie*Math.sqrt(4)),Pe=ve.getMediaInfo(),ke=ve.getMediaType(),Be=Pe.bitrateList.map(function($t){return $t.bandwidth}),qe=Be.length,He=ve.getScheduleController(),De=ve.getStreamInfo(),he=ve.getAbrController(),Y=he.getThroughputHistory(),J=De&&De.manifestInfo&&De.manifestInfo.isDynamic,Me=ve.useL2AABR(),ae=B.getCurrentBufferLevel(ke,!0),re=Y.getSafeAverageThroughput(ke,J),z=Y.getAverageThroughput(ke,J),X=Y.getAverageLatency(ke),oe=ve.getVideoModel().getPlaybackRate();if(!(ve&&ve.hasOwnProperty("getMediaInfo")&&ve.hasOwnProperty("getMediaType")&&ve.hasOwnProperty("getScheduleController")&&ve.hasOwnProperty("getStreamInfo")&&ve.hasOwnProperty("getAbrController")&&ve.hasOwnProperty("useL2AABR")&&(Oe.reason=Oe.reason||{},Me&&ke!==f.default.AUDIO)))return Oe;He.setTimeToLoadDelay(0);var be=function de(ve){var Oe=ve.getMediaType(),Ee=_[Oe];return Ee||(Ee=I(ve),_[Oe]=Ee),Ee}(ve);if(0===be.state)return Oe;var Fe=D[ke];if(!Fe||(Oe.reason.state=be.state,Oe.reason.throughput=z,Oe.reason.latency=X,isNaN(z)))return Oe;switch(be.state){case 1:if(W=he.getQualityForBitrate(Pe,re,De.id,X),Oe.quality=W,Oe.reason.throughput=re,be.lastQuality=W,!isNaN(be.lastSegmentDurationS)&&ae>=Fe.B_target){be.state=2,Fe.Q=Ie;for(var We=0;We<qe;++We)Fe.prev_w[We]=We===be.lastQuality?1:0}break;case 2:var at=[],et=B.getCurrentHttpRequest(ke).trace.reduce(function($t,Kt){return $t+Kt.d},0),ut=B.getCurrentHttpRequest(ke).trace.reduce(function($t,Kt){return $t+Kt.b[0]},0),Ot=Math.round(8*ut/et);Ot<1&&(Ot=1);for(var tt=be.lastSegmentDurationS,Et=1,Yt=0;Yt<qe;++Yt)Be[Yt]=Be[Yt]/1e3,oe*Be[Yt]>Ot&&(Et=-1),Fe.w[Yt]=Fe.prev_w[Yt]+Et*(tt/(2*Re))*((Fe.Q+Ie)*(oe*Be[Yt]/Ot));Fe.w=function ne(ve){for(var Oe=ve.length,Ee=!1,Ie=[],Re=0;Re<Oe;++Re)Ie[Re]=ve[Re];for(var Pe=ve.sort(function(he,Y){return Y-he}),ke=0,Be=0,qe=[],He=0;He<Oe-1;++He)if((Be=((ke+=Pe[He])-1)/(He+1))>=Pe[He+1]){Ee=!0;break}Ee||(Be=(ke+Pe[Oe-1]-1)/Oe);for(var De=0;De<Oe;++De)qe[De]=Math.max(Ie[De]-Be,0);return qe}(Fe.w);for(var vt=0;vt<qe;++vt)at[vt]=Fe.w[vt]-Fe.prev_w[vt],Fe.prev_w[vt]=Fe.w[vt];Fe.Q=Math.max(0,Fe.Q-tt+tt*oe*((ce(Be,Fe.prev_w)+ce(Be,at))/Ot));for(var At=[],Dt=0;Dt<qe;++Dt)At[Dt]=Math.abs(Be[Dt]-ce(Fe.w,Be));(W=At.indexOf(Math.min.apply(Math,At)))>be.lastQuality&&Be[be.lastQuality+1]<=Ot&&(W=be.lastQuality+1),Be[W]>=Ot&&(Fe.Q=2*Math.max(Ie,Fe.Q)),Oe.quality=W,Oe.reason.throughput=z,Oe.reason.latency=X,Oe.reason.bufferLevel=ae,be.lastQuality=Oe.quality;break;default:y.debug("L2A ABR rule invoked in bad state."),Oe.quality=he.getQualityForBitrate(Pe,re,De.id,X),Oe.reason.state=be.state,Oe.reason.throughput=re,Oe.reason.latency=X,be.state=1,ee(be)}return Oe},reset:function xe(){me(),x.off(L.default.PLAYBACK_SEEKING,ue,P),x.off(L.default.MEDIA_FRAGMENT_LOADED,Te,P),x.off(L.default.METRIC_ADDED,q,P),x.off(L.default.QUALITY_CHANGE_REQUESTED,H,P)}},function A(){y=Object(b.default)(N).getInstance().getLogger(P),me(),x.on(L.default.PLAYBACK_SEEKING,ue,P),x.on(L.default.MEDIA_FRAGMENT_LOADED,Te,P),x.on(L.default.METRIC_ADDED,q,P),x.on(L.default.QUALITY_CHANGE_REQUESTED,H,P)}(),P}T.__dashjs_factory_name="L2ARule",O.default=R.default.getClassFactory(T)},"./src/streaming/rules/abr/SwitchHistoryRule.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js"),S=r("./src/core/Debug.js"),R=r("./src/streaming/rules/SwitchRequest.js");function j(){var L,b,U=this.context;return L={getMaxIndex:function v(T){for(var k=T?T.getSwitchHistory():null,N=k?k.getSwitchRequests():[],B=0,x=0,P=0,_=Object(R.default)(U).create(),D=0;D<N.length;D++)if(void 0!==N[D]&&(P+=N[D].dropSize,(B+=N[D].drops)+(x+=N[D].noDrops)>=6&&B/x>.075)){_.quality=D>0&&N[D].drops>0?D-1:D,_.reason={index:_.quality,drops:B,noDrops:x,dropSize:P},b.debug("Switch history rule index: "+_.quality+" samples: "+(B+x)+" drops: "+B);break}return _}},function g(){b=Object(S.default)(U).getInstance().getLogger(L)}(),L}j.__dashjs_factory_name="SwitchHistoryRule",O.default=e.default.getClassFactory(j)},"./src/streaming/rules/abr/ThroughputRule.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js"),S=r("./src/streaming/rules/SwitchRequest.js"),R=r("./src/streaming/constants/Constants.js"),j=r("./src/streaming/constants/MetricsConstants.js");function U(L){var b=this.context,f=(L=L||{}).dashMetrics;return{getMaxIndex:function T(N){var B=Object(S.default)(b).create();if(!(N&&N.hasOwnProperty("getMediaInfo")&&N.hasOwnProperty("getMediaType")&&N.hasOwnProperty("useBufferOccupancyABR")&&N.hasOwnProperty("getAbrController")&&N.hasOwnProperty("getScheduleController")))return B;!function v(){if(!f||!f.hasOwnProperty("getCurrentBufferState"))throw new Error(R.default.MISSING_CONFIG_ERROR)}();var x=N.getMediaInfo(),P=N.getMediaType(),_=f.getCurrentBufferState(P),D=N.getScheduleController(),y=N.getAbrController(),A=N.getStreamInfo(),I=A?A.id:null,G=A&&A.manifestInfo?A.manifestInfo.isDynamic:null,ee=y.getThroughputHistory(),de=ee.getSafeAverageThroughput(P,G),ue=ee.getAverageLatency(P),Te=N.useBufferOccupancyABR();return isNaN(de)||!_||Te||y.getAbandonmentStateFor(I,P)!==j.default.ABANDON_LOAD&&(_.state===j.default.BUFFER_LOADED||G)&&(B.quality=y.getQualityForBitrate(x,de,I,ue),D.setTimeToLoadDelay(0),B.reason={throughput:de,latency:ue}),B},reset:function k(){}}}U.__dashjs_factory_name="ThroughputRule",O.default=e.default.getClassFactory(U)},"./src/streaming/rules/abr/lolp/LearningAbrController.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js"),S=r("./src/core/Debug.js"),R_MANUAL="manual_weight_selection",R_RANDOM="random_weight_selection",R_DYNAMIC="dynamic_weight_selection";function j(){var L,b,f,c,g,v,T,k,N,U=this.context;function P(){f=null,c=1,g=100,v=0,T=null,k=null,N=R_DYNAMIC}function _(){var pe=0;if(f)for(var me=0;me<f.length;me++){var xe=f[me];xe.state.throughput>pe&&(pe=xe.state.throughput)}return pe}function y(pe,me,xe){var ve=pe.map(function(Ee,Ie){return xe[Ie]*Math.pow(Ee-me[Ie],2)}).reduce(function(Ee,Ie){return Ee+Ie});return(ve<0?-1:1)*Math.sqrt(Math.abs(ve))}function A(pe,me){return y([pe.state.throughput,pe.state.latency,pe.state.rebuffer,pe.state.switch],[me.state.throughput,me.state.latency,me.state.rebuffer,me.state.switch],[1,1,1,1])}function I(pe,me,xe){for(var ve=0;ve<me.length;ve++){var Oe=me[ve],Ie=A(Oe,pe);G(Oe,xe,Math.exp(-1*Math.pow(Ie,2)/(2*Math.pow(.1,2))))}}function G(pe,me,xe){var ve=pe.state,Oe=[.01,.01,.01,.01];ve.throughput=ve.throughput+(me[0]-ve.throughput)*Oe[0]*xe,ve.latency=ve.latency+(me[1]-ve.latency)*Oe[1]*xe,ve.rebuffer=ve.rebuffer+(me[2]-ve.rebuffer)*Oe[2]*xe,ve.switch=ve.switch+(me[3]-ve.switch)*Oe[3]*xe}return L={getNextQuality:function de(pe,me,xe,ve,Oe,Ee,Ie){var Re=xe,Pe=ve,ke=me,Be=function H(pe){if(!f){f=[];var me=pe.bitrateList,xe=[];v=me[0].bandwidth,me.forEach(function(Ee){xe.push(Ee.bandwidth),Ee.bandwidth<v&&(v=Ee.bandwidth)}),c=function D(pe){var me=pe.map(function(xe){return Math.pow(xe,2)}).reduce(function(xe,ve){return xe+ve});return Math.sqrt(me)}(xe);for(var ve=0;ve<me.length;ve++)f.push({qualityIndex:ve,bitrate:me[ve].bandwidth,state:{throughput:me[ve].bandwidth/c,latency:0,rebuffer:0,switch:0}});k=function ne(pe){var me=[],xe=function ce(pe){for(var me=[],xe=0;xe<pe;xe++){var ve=[Math.random()*_(),Math.random(),Math.random(),Math.random()];me.push(ve)}return me}(Math.pow(pe.length,2));me.push(xe[0]);for(var ve=[1,1,1,1],Oe=1;Oe<pe.length;Oe++){for(var Ee=null,Ie=null,Re=0;Re<xe.length;Re++){for(var Pe=xe[Re],ke=null,Be=0;Be<me.length;Be++){var qe=y(Pe,me[Be],ve);(null===ke||qe<ke)&&(ke=qe)}(null===Ie||ke>Ie)&&(Ee=Pe,Ie=ke)}me.push(Ee)}for(var He=null,De=null,he=0;he<me.length;he++){for(var Y=0,J=0;J<me.length;J++)he!==J&&(Y+=y(me[he],me[J],ve));(null===He||Y>He)&&(He=Y,De=he)}var Me=[];for(Me.push(me[De]),me.splice(De,1);me.length>0;){for(var ae=null,re=null,z=0;z<me.length;z++){var te=y(Me[0],me[z],ve);(null===ae||te<ae)&&(ae=te,re=z)}Me.push(me[re]),me.splice(re,1)}return Me}(f)}return f}(pe),qe=me/c;qe>1&&(qe=_()),xe/=g,b.debug("getNextQuality called throughput:".concat(qe," latency:").concat(xe," bufferSize:").concat(ve," currentQualityIndex:").concat(Ee," playbackRate:").concat(Oe));var J=Be[Ee],Me=J.bitrate*Ie.getSegmentDuration()/ke,ae=Math.max(0,Me-Pe);if(Pe-Me<Ie.getMinBuffer())return b.debug("Buffer is low for bitrate= ".concat(J.bitrate," downloadTime=").concat(Me," currentBuffer=").concat(Pe," rebuffer=").concat(ae)),function ee(pe,me){var xe=0,ve=pe;if(f)for(var Oe=0;Oe<f.length;Oe++){var Ee=f[Oe];Ee.bitrate<pe.bitrate&&Ee.bitrate>xe&&me>Ee.bitrate&&(xe=Ee.bitrate,ve=Ee)}return ve}(J,ke).qualityIndex;switch(N){case R_MANUAL:!function ue(){T=[.4,.4,.4,.4]}();break;case R_RANDOM:!function Te(pe){T=function se(pe,me){for(var xe=[],ve=Math.sqrt(2/pe),Oe=0;Oe<me;Oe++)xe.push(Math.random()*ve);return T=xe}(pe.length,4)}(Be);break;default:!function q(pe,me,xe,ve,Oe,Ee,Ie){T||(T=k[k.length-1]);var Re=pe.findWeightVector(me,xe,ve,Oe,Ee,Ie);null!==Re&&-1!==Re&&(T=Re)}(Ie,Be,Re,Pe,ae,ke,Oe)}for(var re=null,z=null,te=null,X=0;X<Be.length;X++){var Z=Be[X],W=Z.state,oe=[W.throughput,W.latency,W.rebuffer,W.switch],be=T.slice(),Fe=Ie.getNextBufferWithBitrate(Z.bitrate,Pe,ke),We=Fe<Ie.getMinBuffer();We&&b.debug("Buffer is low for bitrate=".concat(Z.bitrate," downloadTime=").concat(Me," currentBuffer=").concat(Pe," nextBuffer=").concat(Fe)),(Z.bitrate>me-1e4||We)&&Z.bitrate!==v&&(be[0]=100);var at=y(oe,[qe,0,0,0],be);(null===re||at<re)&&(re=at,z=Z.qualityIndex,te=Z)}var et=Math.abs(J.bitrate-te.bitrate)/c;return I(J,Be,[qe,xe,ae,et]),I(te,Be,[qe,0,0,et]),z},reset:function x(){P()}},function B(){b=Object(S.default)(U).getInstance().getLogger(L),P()}(),L}j.__dashjs_factory_name="LearningAbrController",O.default=e.default.getClassFactory(j)},"./src/streaming/rules/abr/lolp/LoLpQoEEvaluator.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js"),S=r("./src/streaming/rules/abr/lolp/QoeInfo.js");function R(){var j,U,L,b,f;function g(){U=null,L=null,b=null,f=null}function T(_,D,y,A){var I=new S.default;return I.type=_,I.weights.bitrateReward=D||1,I.weights.bitrateSwitchPenalty=1,I.weights.rebufferPenalty=y||1e3,I.weights.latencyPenalty=[],I.weights.latencyPenalty.push({threshold:1.1,penalty:.05*A}),I.weights.latencyPenalty.push({threshold:1e8,penalty:.1*y}),I.weights.playbackSpeedPenalty=A||200,I}function N(_,D,y,A,I){I.bitrateWSum+=I.weights.bitrateReward*_,I.lastBitrate&&(I.bitrateSwitchWSum+=I.weights.bitrateSwitchPenalty*Math.abs(_-I.lastBitrate)),I.lastBitrate=_,I.rebufferWSum+=I.weights.rebufferPenalty*D;for(var G=0;G<I.weights.latencyPenalty.length;G++){var ee=I.weights.latencyPenalty[G];if(y<=ee.threshold){I.latencyWSum+=ee.penalty*y;break}}I.playbackSpeedWSum+=I.weights.playbackSpeedPenalty*Math.abs(1-A),I.totalQoe=I.bitrateWSum-I.bitrateSwitchWSum-I.rebufferWSum-I.latencyWSum-I.playbackSpeedWSum}return j={setupPerSegmentQoe:function v(_,D,y){U=T("segment",_,D,y),L=_,b=D,f=y},logSegmentMetrics:function k(_,D,y,A){U&&N(_,D,y,A,U)},getPerSegmentQoe:function B(){return U},calculateSingleUseQoe:function x(_,D,y,A){var I=null;return L&&b&&f&&(I=T("segment",L,b,f)),I?(N(_,D,y,A,I),I.totalQoe):0},reset:function P(){g()}},function c(){g()}(),j}R.__dashjs_factory_name="LoLpQoeEvaluator",O.default=e.default.getClassFactory(R)},"./src/streaming/rules/abr/lolp/LoLpRule.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/Debug.js"),S=r("./src/core/FactoryMaker.js"),R=r("./src/streaming/rules/abr/lolp/LearningAbrController.js"),j=r("./src/streaming/rules/abr/lolp/LoLpQoEEvaluator.js"),U=r("./src/streaming/rules/SwitchRequest.js"),L=r("./src/streaming/constants/MetricsConstants.js"),b=r("./src/streaming/rules/abr/lolp/LoLpWeightSelector.js"),f=r("./src/streaming/constants/Constants.js");function v(T){var B,x,P,_,k=(T=T||{}).dashMetrics,N=this.context;return x={getMaxIndex:function y(G){try{var ee=Object(U.default)(N).create(),de=G.getMediaInfo().type,ue=G.getAbrController(),Te=G.getStreamInfo(),q=ue.getQualityFor(de,Te.id),se=G.getMediaInfo(),H=k.getCurrentBufferState(de),ce=G.getScheduleController(),ne=k.getCurrentBufferLevel(de,!0),pe=Te&&Te.manifestInfo?Te.manifestInfo.isDynamic:null,me=ce.getPlaybackController(),xe=me.getCurrentLiveLatency();if(!G.useLoLPABR()||de===f.default.AUDIO)return ee;xe||(xe=0);var ve=me.getPlaybackRate(),Ee=ue.getThroughputHistory().getSafeAverageThroughput(de,pe);if(B.debug("Throughput ".concat(Math.round(Ee)," kbps")),isNaN(Ee)||!H||ue.getAbandonmentStateFor(Te.id,de)===L.default.ABANDON_LOAD)return ee;for(var Ie=se.bitrateList,Re=G.getRepresentationInfo().fragmentDuration,Pe=Ie[0].bandwidth/1e3,ke=Ie[Ie.length-1].bandwidth/1e3,Be=0;Be<Ie.length;Be++){var qe=Ie[Be].bandwidth/1e3;qe>ke?ke=qe:qe<Pe&&(Pe=qe)}var De=Ie[q].bandwidth/1e3,he=k.getCurrentHttpRequest(de,!0),Y=(he.tresponse.getTime()-he.trequest.getTime())/1e3,J=Y>Re?Y-Re:0;_.setupPerSegmentQoe(Re,ke,Pe),_.logSegmentMetrics(De,J,xe,ve);var Me=Object(b.default)(N).create({targetLatency:1.5,bufferMin:.3,segmentDuration:Re,qoeEvaluator:_});return ee.quality=P.getNextQuality(se,1e3*Ee,xe,ne,ve,q,Me),ee.reason={throughput:Ee,latency:xe},ee.priority=U.default.PRIORITY.STRONG,ce.setTimeToLoadDelay(0),ee.quality!==q&&console.log("[TgcLearningRule]["+de+"] requesting switch to index: ",ee.quality,"Average throughput",Math.round(Ee),"kbps"),ee}catch(ae){throw ae}},reset:function I(){!function A(){P.reset(),_.reset()}()}},function D(){B=Object(e.default)(N).getInstance().getLogger(x),P=Object(R.default)(N).create(),_=Object(j.default)(N).create()}(),x}v.__dashjs_factory_name="LoLPRule",O.default=S.default.getClassFactory(v)},"./src/streaming/rules/abr/lolp/LoLpWeightSelector.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js");function S(R){var f,v,T,j=R.targetLatency,U=R.bufferMin,L=R.segmentDuration,b=R.qoeEvaluator;function D(){return L}function A(I,G){var ee=D();return G>ee?I-ee:I+ee-G}return f={getMinBuffer:function _(){return U},getSegmentDuration:D,getNextBufferWithBitrate:function y(I,G,ee){return A(G,I*L/ee)},getNextBuffer:A,findWeightVector:function B(I,G,ee,de,ue,Te){var q=null,se=null,H=null,ce=Math.abs(G-T);return I.forEach(function(ne){v.forEach(function(pe){var me_latency=pe[1],me_buffer=pe[2],xe=ne.bitrate*L/ue,ve=A(ee,xe),Oe=Math.max(1e-5,xe-ve),Pe=b.calculateSingleUseQoe(ne.bitrate,(0===me_buffer?10:1/me_buffer)*Oe,(0===me_latency?10:1/me_latency)*ne.state.latency,Te);(null===q||Pe>q)&&function x(I,G,ee){return!(I>j+ee)&&G>=U}(G,ve,ce)&&(q=Pe,se=pe,H=ne.bitrate)})}),null===se&&null===H&&(se=-1),T=G,se}},function k(){!function N(){v=function P(I,G){return function ue(Te,q,se){if(se===q)return Te;for(var H=Te.length,ce=0;ce<H;ce++)for(var ne=Te.shift(),pe=0;pe<I.length;pe++)Te.push(ne.concat(I[pe]));return ue(Te,q,se+1)}(I.map(function(ue){return[ue]}),G,1)}([.2,.4,.6,.8,1],4),T=0}()}(),f}S.__dashjs_factory_name="LoLpWeightSelector",O.default=e.default.getClassFactory(S)},"./src/streaming/rules/abr/lolp/QoeInfo.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function S(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,j(v.key),v)}}function R(f,c,g){return c&&S(f.prototype,c),g&&S(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}function j(f){var c=function U(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=R(function f(){(function L(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,f),this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0})},"./src/streaming/text/EmbeddedTextHtmlRender.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js");function S(){var R=0;function U(T){for(var k="",N=0;N<T.length;++N)k+=T[N].uchar;return k.length-k.replace(/^\s+/,"").length}function L(T){return"left: "+3.125*T.x+"%; top: "+6.66*T.y1+"%; width: "+(100-3.125*T.x)+"%; height: "+6.66*Math.max(T.y2-1-T.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function b(T){return"red"===T?"rgb(255, 0, 0)":"green"===T?"rgb(0, 255, 0)":"blue"===T?"rgb(0, 0, 255)":"cyan"===T?"rgb(0, 255, 255)":"magenta"===T?"rgb(255, 0, 255)":"yellow"===T?"rgb(255, 255, 0)":"white"===T?"rgb(255, 255, 255)":"black"===T?"rgb(0, 0, 0)":T}function f(T,k){var N=T.videoHeight/15;return k?"font-size: "+N+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(k.foreground?b(k.foreground):"rgb(255, 255, 255)")+"; font-style: "+(k.italics?"italic":"normal")+"; text-decoration: "+(k.underline?"underline":"none")+"; white-space: pre; background-color: "+(k.background?b(k.background):"transparent")+";":"font-size: "+N+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function c(T){return T.replace(/^\s+/g,"")}function g(T){return T.replace(/\s+$/g,"")}return{createHTMLCaptionsFromScreen:function v(T,k,N,B){var de,ue,x=null,_=!1,D=-1,y={start:k,end:N,spans:[]},A="style_cea608_white_black",I={},G={},ee=[];for(de=0;de<15;++de){var Te=B.rows[de],q="",se=null;if(!1===Te.isEmpty()){var H=U(Te.chars);null===x&&(x={x:H,y1:de,y2:de+1,p:[]}),H!==D&&_&&(x.p.push(y),y={start:k,end:N,spans:[]},x.y2=de,x.name="region_"+x.x+"_"+x.y1+"_"+x.y2,!1===I.hasOwnProperty(x.name)?(ee.push(x),I[x.name]=x):I[x.name].p.contat(x.p),x={x:H,y1:de,y2:de+1,p:[]});for(var ce=0;ce<Te.chars.length;++ce){var ne=Te.chars[ce],pe=ne.penState;if(null===se||!pe.equals(se)){q.trim().length>0&&(y.spans.push({name:A,line:q,row:de}),q="");var me="style_cea608_"+pe.foreground+"_"+pe.background;pe.underline&&(me+="_underline"),pe.italics&&(me+="_italics"),G.hasOwnProperty(me)||(G[me]=JSON.parse(JSON.stringify(pe))),se=pe,A=me}q+=ne.uchar}q.trim().length>0&&y.spans.push({name:A,line:q,row:de}),_=!0,D=H}else _=!1,D=-1,x&&(x.p.push(y),y={start:k,end:N,spans:[]},x.y2=de,x.name="region_"+x.x+"_"+x.y1+"_"+x.y2,!1===I.hasOwnProperty(x.name)?(ee.push(x),I[x.name]=x):I[x.name].p.contat(x.p),x=null)}x&&(x.p.push(y),x.y2=de+1,x.name="region_"+x.x+"_"+x.y1+"_"+x.y2,!1===I.hasOwnProperty(x.name)?(ee.push(x),I[x.name]=x):I[x.name].p.contat(x.p),x=null);var xe=[];for(de=0;de<ee.length;++de){var ve=ee[de],Oe="sub_cea608_"+R++,Ee=document.createElement("div");Ee.id=Oe;var Ie=L(ve);Ee.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+Ie;var Re=document.createElement("div");Re.className="paragraph bodyStyle",Re.style.cssText=f(T);var Pe=document.createElement("div");Pe.className="cueUniWrapper",Pe.style.cssText="unicode-bidi: normal; direction: ltr;";for(var ke=0;ke<ve.p.length;++ke){var Be=ve.p[ke],qe=0;for(ue=0;ue<Be.spans.length;++ue){var He=Be.spans[ue];if(He.line.length>0){if(0!==ue&&qe!=He.row){var De=document.createElement("br");De.className="lineBreak",Pe.appendChild(De)}var he=!1;qe===He.row&&(he=!0),qe=He.row;var Y=G[He.name],J=document.createElement("span");J.className="spanPadding "+He.name+" customSpanColor",J.style.cssText=f(T,Y),J.textContent=0!==ue&&he?ue===Be.spans.length-1?g(He.line):He.line:Be.spans.length>1&&ue<Be.spans.length-1&&He.row===Be.spans[ue+1].row?c(He.line):He.line.trim(),Pe.appendChild(J)}}}Re.appendChild(Pe),Ee.appendChild(Re);var Me={bodyStyle:["%",90]};for(var ae in G)G.hasOwnProperty(ae)&&(Me[ae]=["%",90]);xe.push({type:"html",start:k,end:N,cueHTMLElement:Ee,cueID:Oe,cellResolution:[32,15],isFromCEA608:!0,fontSize:Me,lineHeight:{},linePadding:{}})}return xe}}}S.__dashjs_factory_name="EmbeddedTextHtmlRender",O.default=e.default.getSingletonFactory(S)},"./src/streaming/text/NotFragmentedTextBufferController.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/EventBus.js"),S=r("./src/core/events/Events.js"),R=r("./src/core/FactoryMaker.js"),j=r("./src/streaming/utils/InitCache.js"),U=r("./src/streaming/SourceBufferSink.js"),L=r("./src/streaming/vo/DashJSError.js"),b=r("./src/core/errors/Errors.js"),f="NotFragmentedTextBufferController";function c(g){g=g||{};var P,_,D,y,A,I,v=this.context,T=Object(e.default)(v).getInstance(),k=g.textController,N=g.errHandler,B=g.streamInfo,x=g.type;function H(z){y=z}function xe(z){_!==z&&(_=z)&&function re(z,te){T.trigger(z,te||{},{streamId:B.id,mediaType:x})}(S.default.BUFFERING_COMPLETED)}function Ee(z){!z.chunk.bytes||_||(I.save(z.chunk),A.append(z.chunk),xe(!0))}return P={initialize:function de(z){H(z)},getStreamId:function Te(){return B.id},getType:function q(){return x},getBufferControllerType:function ee(){return f},createBufferSink:function ue(z){return new Promise(function(te,X){try{(A=Object(U.default)(v).create({mediaSource:y,textController:k,eventBus:T})).initializeForFirstUse(B,z),D||(A.getBuffer()&&"function"==typeof A.getBuffer().initialize&&A.getBuffer().initialize(),D=!0),te(A)}catch(Z){N.error(new L.default(b.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,b.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+x)),X(Z)}})},getBuffer:function se(){return A},getBufferLevel:function pe(){return 0},getRangeAt:function Ie(){return null},pruneBuffer:function qe(){},hasBufferAtTime:function Re(){return!0},getAllRangesWithSafetyFactor:function Pe(){return[]},getContinuousBufferTimeForTargetTime:function ke(){return Number.POSITIVE_INFINITY},setMediaSource:H,getMediaSource:function ce(){return y},appendInitSegmentFromCache:function Oe(z){return null!==I.extract(B.id,z)},getIsBufferingCompleted:function me(){return _},setIsBufferingCompleted:xe,getIsPruningInProgress:function ne(){return!1},reset:function ve(z){T.off(S.default.INIT_FRAGMENT_LOADED,Ee,P),!z&&A&&(A.abort(),A.reset(),A=null)},clearBuffers:function Be(){return Promise.resolve()},prepareForPlaybackSeek:function De(){return Promise.resolve()},prepareForReplacementTrackSwitch:function he(){return _=!1,Promise.resolve()},setSeekTarget:function J(){},updateAppendWindow:function Y(){return Promise.resolve()},pruneAllSafely:function ae(){return Promise.resolve()},updateBufferTimestampOffset:function He(){return Promise.resolve()},segmentRequestingCompleted:function Me(){}},function G(){D=!1,y=null,_=!1,I=Object(j.default)(v).getInstance(),T.on(S.default.INIT_FRAGMENT_LOADED,Ee,P)}(),P}c.__dashjs_factory_name=f,O.default=R.default.getClassFactory(c)},"./src/streaming/text/TextController.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/constants/Constants.js"),S=r("./src/core/FactoryMaker.js"),R=r("./src/streaming/text/TextSourceBuffer.js"),j=r("./src/streaming/text/TextTracks.js"),U=r("./src/streaming/utils/VTTParser.js"),L=r("./src/streaming/utils/VttCustomRenderingParser.js"),b=r("./src/streaming/utils/TTMLParser.js"),f=r("./src/core/EventBus.js"),c=r("./src/core/events/Events.js"),g=r("./src/streaming/MediaPlayerEvents.js"),v=r("./src/streaming/utils/SupervisorTools.js");function T(k){var A,I,G,ee,de,ue,Te,q,se,H,ce,ne,N=this.context,B=k.adapter,x=k.errHandler,P=k.manifestModel,_=k.mediaController,D=k.videoModel,y=k.settings;function Pe(te){var X=te.tracks,Z=te.index,W=te.streamId;if(!1===y.get().streaming.text.defaultEnabled&&!He()||ne)he(W,-1);else{var be=_.getCurrentTrackFor(e.default.TEXT,W);if(be){var Fe={lang:be.lang,role:be.roles[0],index:be.index,codec:be.codec,accessibility:be.accessibility[0]};X.some(function(We,at){if(_.matchSettings(Fe,We))return he(W,at),Z=at,!0})}se=!1}I[W].lastEnabledIndex=Z,q.trigger(g.default.TEXT_TRACKS_ADDED,{enabled:He(),index:Z,tracks:X,streamId:W}),ce=!0}function ke(te){try{var X=te.streamId;if(!ee[X]||isNaN(te.time))return;ee[X].manualCueProcessing(te.time)}catch(Z){}}function Be(te){try{var X=te.streamId;if(!ee[X])return;ee[X].disableManualTracks()}catch(Z){}}function He(){var te=!0;return se&&!H&&(te=!1),te}function he(te,X){(se=-1===X)&&_&&_.saveTextSettingsDisabled();var Z=Me(te);if(Z!==X&&ee[te]){ee[te].disableManualTracks(),ee[te].setModeForTrackIdx(Z,e.default.TEXT_HIDDEN),ee[te].setCurrentTrackIdx(X),ee[te].setModeForTrackIdx(X,e.default.TEXT_SHOWING);var W=ee[te].getCurrentTrackInfo();W&&W.isFragmented&&!W.isEmbedded?function Y(te,X,Z){if(G[te])for(var oe=G[te].getConfig().fragmentedTracks,be=0;be<oe.length;be++){var Fe=oe[be];if(X.lang===Fe.lang&&(Fe.id?X.id===Fe.id:X.index===Fe.index)){var We=_.getCurrentTrackFor(e.default.TEXT,te);(Fe.id?We.id!==Fe.id:We.index!==Fe.index)?(ee[te].deleteCuesFromTrackIdx(Z),G[te].setCurrentFragmentedTrackIdx(be)):-1===Z&&q.trigger(c.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,{},{streamId:te,mediaType:e.default.TEXT})}}}(te,W,Z):W&&!W.isFragmented&&function J(te,X){q.trigger(c.default.SET_NON_FRAGMENTED_TEXT,{currentTrackInfo:X},{streamId:te,mediaType:e.default.TEXT})}(te,W),_.setTrack(W)}}function Me(te){return ee[te].getCurrentTrackIdx()}function re(){G={},ee={},I={},se=!0,ce=!1,ne=!1}return A={deactivateStream:function ae(te){if(te){var X=te.id;G[X]&&G[X].resetMediaInfos(),ee[X]&&ee[X].deleteAllTextTracks()}},initialize:function me(){q.on(c.default.TEXT_TRACKS_QUEUE_INITIALIZED,Pe,A),y.get().streaming.text.webvtt.customRenderingEnabled&&(q.on(c.default.PLAYBACK_TIME_UPDATED,ke,A),q.on(c.default.PLAYBACK_SEEKING,Be,A))},initializeForStream:function xe(te){var X=te.id,Z=Object(j.default)(N).create({videoModel:D,settings:y,streamInfo:te});Z.initialize(),ee[X]=Z;var W=Object(R.default)(N).create({errHandler:x,adapter:B,manifestModel:P,mediaController:_,videoModel:D,textTracks:Z,vttParser:de,vttCustomRenderingParser:ue,ttmlParser:Te,streamInfo:te,settings:y});W.initialize(),G[X]=W,I[X]={},I[X].lastEnabledIndex=-1},createTracks:function ve(te){var X=te.id;!ee[X]||ee[X].createTracks()},getTextSourceBuffer:function Ee(te){var X=te.id;if(G&&G[X])return G[X]},getAllTracksAreDisabled:function Ie(){return se},addEmbeddedTrack:function Re(te,X){var Z=te.id;!G[Z]||G[Z].addEmbeddedTrack(X)},enableText:function qe(te,X){Object(v.checkParameterType)(X,"boolean"),He()!==X&&(X&&he(te,I[te].lastEnabledIndex),X||(I[te].lastEnabledIndex=Me(te),ce?he(te,-1):ne=!0))},isTextEnabled:He,setTextTrack:he,getCurrentTrackIdx:Me,enableForcedTextStreaming:function De(te){Object(v.checkParameterType)(te,"boolean"),H=te},addMediaInfosToBuffer:function Oe(te,X,Z){var oe=te.id;!G[oe]||G[oe].addMediaInfos(X,Z,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null)},reset:function z(){re(),q.off(c.default.TEXT_TRACKS_QUEUE_INITIALIZED,Pe,A),y.get().streaming.text.webvtt.customRenderingEnabled&&(q.off(c.default.PLAYBACK_TIME_UPDATED,ke,A),q.off(c.default.PLAYBACK_SEEKING,Be,A)),Object.keys(G).forEach(function(te){G[te].resetEmbedded(),G[te].reset()})}},function pe(){H=!1,ce=!1,ne=!1,de=Object(U.default)(N).getInstance(),ue=Object(L.default)(N).getInstance(),Te=Object(b.default)(N).getInstance(),q=Object(f.default)(N).getInstance(),re()}(),A}T.__dashjs_factory_name="TextController",O.default=S.default.getClassFactory(T)},"./src/streaming/text/TextSourceBuffer.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/constants/Constants.js"),S=r("./src/streaming/vo/metrics/HTTPRequest.js"),R=r("./src/streaming/vo/TextTrackInfo.js"),j=r("./src/streaming/utils/BoxParser.js"),U=r("./src/streaming/utils/CustomTimeRanges.js"),L=r("./src/core/FactoryMaker.js"),b=r("./src/core/Debug.js"),f=r("./src/streaming/text/EmbeddedTextHtmlRender.js"),c=r("./node_modules/codem-isoboxer/dist/iso_boxer.js"),g=r.n(c),v=r("./externals/cea608-parser.js"),T=r.n(v),k=r("./src/core/EventBus.js"),N=r("./src/core/events/Events.js"),B=r("./src/streaming/vo/DashJSError.js"),x=r("./src/core/errors/Errors.js");function P(_){var ne,pe,me,xe,ve,Oe,Ee,Ie,Re,Pe,ke,Be,qe,He,De,he,D=_.errHandler,y=_.manifestModel,A=_.mediaController,I=_.videoModel,G=_.textTracks,ee=_.vttParser,de=_.vttCustomRenderingParser,ue=_.ttmlParser,Te=_.streamInfo,q=_.settings,se=this.context,H=Object(k.default)(se).getInstance(),ce=!1;function ae(){(function Me(){Oe=null,Ie=NaN,Re=[],Pe=null,Ee=!1})(),ve=[],xe=null}function te(ot){var Qe=new R.default;for(var Lt in ot)Qe[Lt]=ot[Lt];Qe.labels=ot.labels,Qe.defaultTrack=function ln(ot){var Qe=!1;return Be.length>1&&ot.isEmbedded?Qe=ot.id&&ot.id===e.default.CC1:1===Be.length?ot.id&&"string"==typeof ot.id&&"CC"===ot.id.substring(0,2)&&(Qe=!0):0===Be.length&&(Qe=ot.index===ve[0].index),Qe}(ot),Qe.isFragmented=ot.isFragmented,Qe.isEmbedded=!!ot.isEmbedded,Qe.isTTML=function et(ot){return ot.codec&&ot.codec.search(e.default.STPP)>=0||ot.mimeType&&ot.mimeType.search(e.default.TTML)>=0}(ot),Qe.kind=function ut(ot,Qe){var mt=ot.roles&&ot.roles.length>0?Qe[ot.roles[0]]:Qe.caption;return mt===Qe.caption||mt===Qe.subtitle?mt:Qe.caption}(ot,{subtitle:"subtitles",caption:"captions"}),G.addTextTrack(Qe)}function W(ot){var Qe=ot.chunk;Qe.mediaInfo.embeddedCaptions&&Ot(Qe.bytes,Qe)}function at(ot){ke=ot}function Ot(ot,Qe){var mt=Qe.mediaInfo,Lt=mt.type,zt=mt.codec||mt.mimeType;zt?-1!==mt.codec.indexOf("application/mp4")?function tt(ot,Qe,mt){var Lt;if("InitializationSegment"===Qe.segmentType)Ee=!0,Ie=me.getMediaTimescaleFromMoov(ot);else{if(!Ee)return;(Lt=me.getSamplesInfo(ot).sampleList).length>0&&(Pe=Lt[0].cts-Qe.start*Ie),mt.search(e.default.STPP)>=0?function Et(ot,Qe,mt){var Lt,nn;for(xe=null!==xe?xe:Bn(mt),Lt=0;Lt<Qe.length;Lt++){var zt=Qe[Lt],_t=zt.cts,pt=Xt(),rt=pt+_t/Ie;ne.buffered.add(rt,rt+zt.duration/Ie);var yt=new DataView(ot,zt.offset,zt.subSizes[0]),Gt=g.a.Utils.dataViewToString(yt,e.default.UTF8),Qt=[],on=zt.offset+zt.subSizes[0];for(nn=1;nn<zt.subSizes.length;nn++){var mn=new Uint8Array(ot,on,zt.subSizes[nn]),Dn=String.fromCharCode.apply(null,mn);Qt.push(Dn),on+=zt.subSizes[nn]}try{var Zn=y.getValue(),_r=xe.parse(Gt,Zn.ttmlTimeIsRelative?_t/Ie:0,_t/Ie,(_t+zt.duration)/Ie,Qt);G.addCaptions(ke,pt,_r)}catch(Pr){Oe.removeExecutedRequestsBeforeTime(),this.remove(),pe.error("TTML parser error: "+Pr.message)}}}(ot,Lt,mt):function Yt(ot,Qe){var mt,Lt,nn,zt=[];for(mt=0;mt<Qe.length;mt++){var _t=Qe[mt];_t.cts-=Pe;var rt=Xt()+_t.cts/Ie;ne.buffered.add(rt,rt+_t.duration/Ie);var yt=ot.slice(_t.offset,_t.offset+_t.size),Gt=g.a.parseBuffer(yt);for(Lt=0;Lt<Gt.boxes.length;Lt++){var Qt=Gt.boxes[Lt];if(pe.debug("VTT box1: "+Qt.type),"vtte"!==Qt.type&&"vttc"===Qt.type)for(pe.debug("VTT vttc boxes.length = "+Qt.boxes.length),nn=0;nn<Qt.boxes.length;nn++){var on=Qt.boxes[nn];if(pe.debug("VTT box2: "+on.type),"payl"===on.type){var mn=on.cue_text;pe.debug("VTT cue_text = "+mn);var Dn=_t.cts/Ie,Zn=(_t.cts+_t.duration)/Ie;zt.push({start:Dn,end:Zn,data:mn,styles:{}}),pe.debug("VTT "+Dn+"-"+Zn+" : "+mn)}}}}zt.length>0&&G.addCaptions(ke,0,zt)}(ot,Lt)}}(ot,Qe,zt):Lt===e.default.VIDEO?function At(ot,Qe){var mt,Lt;if(Qe.segmentType===S.HTTPRequest.INIT_SEGMENT_TYPE)0===qe&&(qe=me.getMediaTimescaleFromMoov(ot));else if(Qe.segmentType===S.HTTPRequest.MEDIA_SEGMENT_TYPE){if(0===qe)return void pe.warn("CEA-608: No timescale for embeddedTextTrack yet");var nn=(Lt=me.getSamplesInfo(ot)).lastSequenceNumber;if(!De[0]&&!De[1]&&function Dt(){for(var ot,Qe=0;Qe<Be.length;Qe++){if(-1===(ot=G.getTrackIdxForId(Be[Qe].id)))return void pe.warn("CEA-608: data before track is ready.");var mt=$t(ot);De[Qe]=new T.a.Cea608Parser(Qe+1,{newCue:mt},null)}}(),qe){if(null!==He&&nn!==He+Lt.numSequences)for(mt=0;mt<De.length;mt++)De[mt]&&De[mt].reset();for(var zt=function Kt(ot,Qe){if(0===Qe.length)return null;for(var mt={splits:[],fields:[[],[]]},Lt=new DataView(ot),nn=0;nn<Qe.length;nn++)for(var zt=Qe[nn],_t=T.a.findCea608Nalus(Lt,zt.offset,zt.size),pt=null,rt=0,Xe=0;Xe<_t.length;Xe++)for(var yt=T.a.extractCea608DataFromRange(Lt,_t[Xe]),Gt=0;Gt<2;Gt++)if(yt[Gt].length>0){zt.cts!==pt?rt=0:rt+=1;var Qt=Xt();mt.fields[Gt].push([zt.cts+Qt*qe,yt[Gt],rt]),pt=zt.cts}return mt.fields.forEach(function(mn){mn.sort(function(Dn,Zn){return Dn[0]===Zn[0]?Dn[2]-Zn[2]:Dn[0]-Zn[0]})}),mt}(ot,Lt.sampleList),_t=0;_t<De.length;_t++){var pt=zt.fields[_t],rt=De[_t];if(rt)for(mt=0;mt<pt.length;mt++)rt.addData(pt[mt][0]/qe,pt[mt][1])}He=nn}}}(ot,Qe):function vt(ot,Qe,mt){var Lt,nn,zt=new DataView(ot,0,ot.byteLength);nn=g.a.Utils.dataViewToString(zt,e.default.UTF8);try{Lt=Bn(mt).parse(nn,0),G.addCaptions(G.getCurrentTrackIdx(),0,Lt),ne.buffered&&ne.buffered.add(Qe.start,Qe.end)}catch(_t){D.error(new B.default(x.default.TIMED_TEXT_ERROR_ID_PARSE_CODE,x.default.TIMED_TEXT_ERROR_MESSAGE_PARSE+_t.message,nn))}}(ot,Qe,zt):pe.error("No text type defined")}function $t(ot){return function Qe(mt,Lt,nn){var zt;(zt=I.getTTMLRenderingDiv()?he.createHTMLCaptionsFromScreen(I.getElement(),mt,Lt,nn):[{start:mt,end:Lt,data:nn.getDisplayText(),styles:{}}])&&G.addCaptions(ot,0,zt)}}function Xt(){return isNaN(ne.timestampOffset)?0:ne.timestampOffset}function Bn(ot){var Qe;return ot.search(e.default.VTT)>=0?Qe=q.get().streaming.text.webvtt.customRenderingEnabled&&de?de:ee:(ot.search(e.default.TTML)>=0||ot.search(e.default.STPP)>=0)&&(Qe=ue),Qe}function jn(ot){Be.forEach(function(Qe){var mt=G.getTrackIdxForId(Qe.id);mt>=0&&G.deleteCuesFromTrackIdx(mt,ot.from,ot.to)})}return ne={initialize:function re(){ce||function oe(){Be=[],ke=null,qe=0,De=[],He=null,ce=!0,he=Object(f.default)(se).getInstance(),H.on(N.default.VIDEO_CHUNK_RECEIVED,W,ne),H.on(N.default.BUFFER_CLEARED,jn,ne)}()},addMediaInfos:function z(ot,Qe,mt){if(ve=ve.concat(Qe),ot===e.default.TEXT&&Qe[0].isFragmented&&!Qe[0].isEmbedded){Oe=mt,ne.buffered=Object(U.default)(se).create(),Re=A.getTracksFor(e.default.TEXT,Te.id).filter(function(_t){return _t.isFragmented});for(var Lt=A.getCurrentTrackFor(e.default.TEXT,Te.id),nn=0;nn<Re.length;nn++)if(Re[nn]===Lt){at(nn);break}}for(var zt=0;zt<Qe.length;zt++)te(Qe[zt])},resetMediaInfos:function Vn(){ve=[]},getStreamId:function J(){return Te.id},append:Ot,abort:function X(){},addEmbeddedTrack:function Fe(ot){if(ce&&ot)if(ot.id===e.default.CC1||ot.id===e.default.CC3){for(var Qe=0;Qe<Be.length;Qe++)if(Be[Qe].id===ot.id)return;Be.push(ot)}else pe.warn("Embedded track "+ot.id+" not supported!")},resetEmbedded:function be(){H.off(N.default.VIDEO_CHUNK_RECEIVED,W,ne),H.off(N.default.BUFFER_CLEARED,jn,ne),G&&G.deleteAllTextTracks(),ce=!1,Be=[],De=[null,null],He=null},getConfig:function We(){return{fragmentModel:Oe,fragmentedTracks:Re,videoModel:I}},setCurrentFragmentedTrackIdx:at,remove:function Rn(ot,Qe){void 0===ot&&ot===Qe&&(ot=ne.buffered.start(0),Qe=ne.buffered.end(ne.buffered.length-1)),ne.buffered.remove(ot,Qe),G.deleteCuesFromTrackIdx(ke,ot,Qe)},reset:function Z(){ae(),ve=[],me=null}},function Y(){pe=Object(b.default)(se).getInstance().getLogger(ne),me=Object(j.default)(se).getInstance(),ae()}(),ne}P.__dashjs_factory_name="TextSourceBuffer",O.default=L.default.getClassFactory(P)},"./src/streaming/text/TextTracks.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/constants/Constants.js"),S=r("./src/core/EventBus.js"),R=r("./src/core/events/Events.js"),j=r("./src/streaming/MediaPlayerEvents.js"),U=r("./src/core/FactoryMaker.js"),L=r("./src/core/Debug.js"),b=r("./node_modules/imsc/src/main/js/main.js");function c(k,N){var B="undefined"!=typeof Symbol&&k[Symbol.iterator]||k["@@iterator"];if(!B){if(Array.isArray(k)||(B=function g(k,N){if(k){if("string"==typeof k)return v(k,N);var B=Object.prototype.toString.call(k).slice(8,-1);if("Object"===B&&k.constructor&&(B=k.constructor.name),"Map"===B||"Set"===B)return Array.from(k);if("Arguments"===B||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B))return v(k,N)}}(k))||N&&k&&"number"==typeof k.length){B&&(k=B);var x=0,P=function(){};return{s:P,n:function(){return x>=k.length?{done:!0}:{done:!1,value:k[x++]}},e:function(I){throw I},f:P}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var y,_=!0,D=!1;return{s:function(){B=B.call(k)},n:function(){var I=B.next();return _=I.done,I},e:function(I){D=!0,y=I},f:function(){try{!_&&null!=B.return&&B.return()}finally{if(D)throw y}}}}function v(k,N){(null==N||N>k.length)&&(N=k.length);for(var B=0,x=new Array(N);B<N;B++)x[B]=k[B];return x}function T(k){var D,y,A,I,G,ee,de,ue,Te,q,se,H,ce,ne,pe,me,xe,ve,N=this.context,B=Object(S.default)(N).getInstance(),x=k.videoModel,P=k.streamInfo,_=k.settings;function Re(vt){return x.addTextTrack(vt.kind,void 0!==vt.id?vt.id:vt.lang,vt.lang,vt.isTTML,vt.isEmbedded)}function Be(vt,At,Dt,$t,Kt,Xt){var Rn=0,jn=0;vt/At>Dt/$t?Rn=(jn=At)/$t*Dt:jn=(Rn=vt)/Dt*$t;var Vn,ot,Qe=0,mt=0;return Rn/jn>Kt?(mt=jn,Qe=jn*Kt):(Qe=Rn,mt=Rn/Kt),Vn=(vt-Qe)/2,ot=(At-mt)/2,Xt?{x:Vn+.1*Qe,y:ot+.1*mt,w:.8*Qe,h:.8*mt}:{x:Vn,y:ot,w:Qe,h:mt}}function qe(vt,At){var Dt=x.getClientWidth(),$t=x.getClientHeight(),Kt=x.getVideoWidth(),Xt=x.getVideoHeight(),ln=x.getVideoRelativeOffsetTop(),Bn=x.getVideoRelativeOffsetLeft();if(0!==Kt&&0!==Xt){var Rn=Kt/Xt,jn=!1;vt.isFromCEA608&&(Rn=3.5/3,jn=!0);var Vn=Be.call(this,Dt,$t,Kt,Xt,Rn,jn),ot=Vn.w,Qe=Vn.h,mt=Vn.x,Lt=Vn.y;if(ot!=Te||Qe!=q||mt!=de||Lt!=ue||At){if(de=mt+Bn,ue=Lt+ln,Te=ot,q=Qe,se){var nn=se.style;nn&&(nn.left=de+"px",nn.top=ue+"px",nn.width=Te+"px",nn.height=q+"px",nn.zIndex=ne&&document[ne]||pe?xe:null,B.trigger(j.default.CAPTION_CONTAINER_RESIZE))}var zt=vt.activeCues;if(zt)for(var _t=zt.length,pt=0;pt<_t;++pt){var rt=zt[pt];rt.scaleCue(rt)}}}}function He(vt){var $t,Kt,Xt,ln,Bn;if(vt.cellResolution){var Rn=[Te/vt.cellResolution[0],q/vt.cellResolution[1]];if(vt.linePadding)for($t in vt.linePadding)if(vt.linePadding.hasOwnProperty($t)){Kt=(vt.linePadding[$t]*Rn[0]).toString();for(var Vn=document.getElementsByClassName("spanPadding"),ot=0;ot<Vn.length;ot++)Vn[ot].style.cssText=Vn[ot].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Kt),Vn[ot].style.cssText=Vn[ot].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Kt)}if(vt.fontSize){for($t in vt.fontSize)if(vt.fontSize.hasOwnProperty($t)){"%"===vt.fontSize[$t][0]?Xt=vt.fontSize[$t][1]/100:"c"===vt.fontSize[$t][0]&&(Xt=vt.fontSize[$t][1]),Kt=(Xt*Rn[1]).toString(),Bn="defaultFontSize"!==$t?document.getElementsByClassName($t):document.getElementsByClassName("paragraph");for(var Qe=0;Qe<Bn.length;Qe++)Bn[Qe].style.cssText=Bn[Qe].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Kt)}if(vt.lineHeight)for($t in vt.lineHeight)if(vt.lineHeight.hasOwnProperty($t)){"%"===vt.lineHeight[$t][0]?ln=vt.lineHeight[$t][1]/100:"c"===vt.fontSize[$t][0]&&(ln=vt.lineHeight[$t][1]),Kt=(ln*Rn[1]).toString(),Bn=document.getElementsByClassName($t);for(var mt=0;mt<Bn.length;mt++)Bn[mt].style.cssText=Bn[mt].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Kt)}}}if(vt.isd){var Lt=document.getElementById(vt.cueID);Lt&&se.removeChild(Lt),De(vt)}}function De(vt){if(se){var At=document.createElement("div");se.appendChild(At),me=Object(b.renderHTML)(vt.isd,At,function(Dt){var $t=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,Kt=/^#(.*)$/;if($t.test(Dt)){var Xt=$t.exec(Dt),ln=parseInt(Xt[4],10)-1;return"data:image/png;base64,"+btoa(vt.images[ln])}if(Kt.test(Dt)){var jn=Kt.exec(Dt);return"data:image/png;base64,"+vt.embeddedImages[jn[1]]}return null},se.clientHeight,se.clientWidth,!1,function(Dt){y.info("renderCaption :",Dt)},me,!0),At.id=vt.cueID,B.trigger(j.default.CAPTION_RENDERED,{captionDiv:At,currentTrackIdx:ee})}}function he(vt,At,Dt){var $t=z(vt);if($t&&Array.isArray(Dt)&&0!==Dt.length)for(var Kt=0;Kt<Dt.length;Kt++){var Xt=void 0,ln=Dt[Kt];$t.cellResolution=ln.cellResolution,$t.isFromCEA608=ln.isFromCEA608,!isNaN(ln.start)&&!isNaN(ln.end)&&(Xt="html"===ln.type&&se?Y(ln,At,$t):ln.data?J(ln,At,$t):null);try{Xt?oe($t,Xt)||(_.get().streaming.text.webvtt.customRenderingEnabled?($t.manualCueList||($t.manualCueList=[]),$t.manualCueList.push(Xt)):$t.addCue(Xt)):y.error("impossible to display subtitles.")}catch(Bn){throw Fe($t),$t.addCue(Xt),Bn}}}function Y(vt,At,Dt){var $t=this,Kt=new A(vt.start+At,vt.end+At,"");return Kt.cueHTMLElement=vt.cueHTMLElement,Kt.isd=vt.isd,Kt.images=vt.images,Kt.embeddedImages=vt.embeddedImages,Kt.cueID=vt.cueID,Kt.scaleCue=He.bind($t),Kt.cellResolution=vt.cellResolution,Kt.lineHeight=vt.lineHeight,Kt.linePadding=vt.linePadding,Kt.fontSize=vt.fontSize,se.style.left=de+"px",se.style.top=ue+"px",se.style.width=Te+"px",se.style.height=q+"px",Kt.onenter=function(){Dt.mode===e.default.TEXT_SHOWING&&(this.isd?(De(this),y.debug("Cue enter id:"+this.cueID)):(se.appendChild(this.cueHTMLElement),He.call($t,this),B.trigger(j.default.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:ee})))},Kt.onexit=function(){if(se)for(var Xt=se.childNodes,ln=0;ln<Xt.length;++ln)Xt[ln].id===this.cueID&&(y.debug("Cue exit id:"+Xt[ln].id),se.removeChild(Xt[ln]),--ln)},Kt}function J(vt,At,Dt){var $t=new A(vt.start-At,vt.end-At,vt.data);if($t.cueID="".concat($t.startTime,"_").concat($t.endTime),$t.isActive=!1,vt.styles)try{void 0!==vt.styles.align&&"align"in $t&&($t.align=vt.styles.align),void 0!==vt.styles.line&&"line"in $t&&($t.line=vt.styles.line),void 0!==vt.styles.position&&"position"in $t&&($t.position=vt.styles.position),void 0!==vt.styles.size&&"size"in $t&&($t.size=vt.styles.size)}catch(Kt){y.error(Kt)}return $t.onenter=function(){Dt.mode===e.default.TEXT_SHOWING&&B.trigger(j.default.CAPTION_RENDERED,{currentTrackIdx:ee})},$t}function re(){var $t,At=[],Dt=c(x.getTextTracks());try{for(Dt.s();!($t=Dt.n()).done;){var Kt=$t.value;Kt.manualMode===e.default.TEXT_SHOWING&&At.push(Kt)}}catch(Xt){Dt.e(Xt)}finally{Dt.f()}return At}function z(vt){return vt>=0&&I[vt]?x.getTextTrack(I[vt].kind,I[vt].id,I[vt].lang,I[vt].isTTML,I[vt].isEmbedded):null}function Z(vt){var At=this;if(vt!==ee){var Dt=z(ee=vt);W.call(this,Dt),ce&&(clearInterval(ce),ce=null),Dt&&"html"===Dt.renderingType&&(qe.call(this,Dt,!0),window.ResizeObserver?(ve=new window.ResizeObserver(function(){qe.call(At,Dt,!0)})).observe(x.getElement()):ce=setInterval(qe.bind(this,Dt),500))}}function W(vt){tt.call(this),vt&&"html"===vt.renderingType?ut.call(this):Ot.call(this)}function oe(vt,At){if(!vt.cues)return!1;for(var Dt=0;Dt<vt.cues.length;Dt++)if(vt.cues[Dt].startTime===At.startTime&&vt.cues[Dt].endTime===At.endTime)return!0;return!1}function be(vt,At,Dt){var $t=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return(isNaN(At)||($t?vt.startTime:vt.endTime)>=At)&&(isNaN(Dt)||($t?vt.endTime:vt.startTime)<=Dt)}function Fe(vt,At,Dt){var $t=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(vt.cues)for(var Kt=vt.cues,ln=Kt.length-1;ln>=0;ln--)be(Kt[ln],At,Dt,$t)&&(Kt[ln].onexit&&Kt[ln].onexit(),vt.removeCue(Kt[ln]))}function ut(){var vt=document.getElementById("native-cue-style");if(!vt){(vt=document.createElement("style")).id="native-cue-style",document.head.appendChild(vt);var At=vt.sheet,Dt=x.getElement();try{Dt&&At.insertRule(Dt.id?"#"+Dt.id+"::cue {background: transparent}":0!==Dt.classList.length?"."+Dt.className+"::cue {background: transparent}":"video::cue {background: transparent}",0)}catch($t){y.info(""+$t.message)}}}function Ot(){var vt=document.getElementById("native-cue-style");vt&&document.head.removeChild(vt)}function tt(){if(se)for(;se.firstChild;)se.removeChild(se.firstChild)}return D={initialize:function Ee(){"undefined"==typeof window||"undefined"==typeof navigator||(A=window.VTTCue||window.TextTrackCue,I=[],G=[],ee=-1,de=0,ue=0,Te=0,q=0,se=null,H=null,ce=null,pe=!1,xe=2147483647,me=null,void 0!==document.fullscreenElement?ne="fullscreenElement":void 0!==document.webkitIsFullScreen?ne="webkitIsFullScreen":document.msFullscreenElement?ne="msFullscreenElement":document.mozFullScreen&&(ne="mozFullScreen"))},getStreamId:function Ie(){return P.id},addTextTrack:function Pe(vt){I.push(vt)},addCaptions:he,createTracks:function ke(){I.sort(function(Bn,Rn){return Bn.index-Rn.index}),se=x.getTTMLRenderingDiv(),H=x.getVttRenderingDiv();for(var vt=-1,At=0;At<I.length;At++){var Dt=Re(I[At]);G.push(Dt),I[At].defaultTrack&&(Dt.default=!0,vt=At);var $t=z(At);$t&&($t.mode=e.default.TEXT_SHOWING,$t.renderingType=se&&(I[At].isTTML||I[At].isEmbedded)?"html":"default"),he(At,0,I[At].captionData),B.trigger(j.default.TEXT_TRACK_ADDED)}if(Z.call(this,vt),vt>=0){B.on(j.default.PLAYBACK_METADATA_LOADED,function Bn(){var Rn=z(vt);Rn&&"html"===Rn.renderingType&&qe.call(this,Rn,!0),B.off(j.default.PLAYBACK_METADATA_LOADED,Bn,this)},this);for(var Xt=0;Xt<I.length;Xt++){var ln=z(Xt);ln&&(ln.mode=Xt===vt?e.default.TEXT_SHOWING:e.default.TEXT_HIDDEN,ln.manualMode=Xt===vt?e.default.TEXT_SHOWING:e.default.TEXT_HIDDEN)}}B.trigger(R.default.TEXT_TRACKS_QUEUE_INITIALIZED,{index:ee,tracks:I,streamId:P.id})},getCurrentTrackIdx:function te(){return ee},setCurrentTrackIdx:Z,getTrackIdxForId:function X(vt){for(var At=-1,Dt=0;Dt<I.length;Dt++)if(I[Dt].id===vt){At=Dt;break}return At},getCurrentTrackInfo:function Yt(){return I[ee]},setModeForTrackIdx:function Et(vt,At){var Dt=z(vt);Dt&&Dt.mode!==At&&(Dt.mode=At),Dt&&Dt.manualMode!==At&&(Dt.manualMode=At)},deleteCuesFromTrackIdx:function We(vt,At,Dt){var $t=z(vt);$t&&Fe($t,At,Dt)},deleteAllTextTracks:function at(){for(var vt=G?G.length:0,At=0;At<vt;At++){var Dt=z(At);Dt&&Fe.call(this,Dt,P.start,P.start+P.duration,!1)}G=[],I=[],ce&&(clearInterval(ce),ce=null),ve&&x&&(ve.unobserve(x.getElement()),ve=null),ee=-1,tt.call(this)},deleteTextTrack:function et(vt){x.removeChild(G[vt]),G.splice(vt,1)},manualCueProcessing:function Me(vt){var At=re();if(At&&At.length>0){var $t=At[0].manualCueList;$t&&$t.length>0&&$t.forEach(function(Kt){if(Kt.startTime<=vt&&Kt.endTime>=vt&&!Kt.isActive)Kt.isActive=!0,WebVTT.processCues(window,[Kt],H,Kt.cueID);else if(Kt.isActive&&(Kt.startTime>vt||Kt.endTime<vt)&&(Kt.isActive=!1,H))for(var Xt=H.childNodes,ln=0;ln<Xt.length;++ln)Xt[ln].id===Kt.cueID&&(H.removeChild(Xt[ln]),--ln)})}},disableManualTracks:function ae(){var vt=re();if(vt&&vt.length>0){var Dt=vt[0].manualCueList;Dt&&Dt.length>0&&Dt.forEach(function($t){if($t.isActive&&($t.isActive=!1,H))for(var Kt=H.childNodes,Xt=0;Xt<Kt.length;++Xt)Kt[Xt].id===$t.cueID&&(H.removeChild(Kt[Xt]),--Xt)})}}},function Oe(){y=Object(L.default)(N).getInstance().getLogger(D)}(),D}T.__dashjs_factory_name="TextTracks",O.default=U.default.getClassFactory(T)},"./src/streaming/thumbnail/ThumbnailController.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js"),S=r("./src/streaming/constants/Constants.js"),R=r("./src/streaming/vo/Thumbnail.js"),j=r("./src/streaming/thumbnail/ThumbnailTracks.js"),U=r("./src/streaming/vo/BitrateInfo.js"),L=r("./src/dash/utils/SegmentsUtils.js");function b(f){var v,T,c=this.context,g=f.streamInfo;function _(I){T.setTrackByIndex(I)}function A(){T&&T.reset()}return v={getStreamId:function B(){return g.id},initialize:function N(){T.addTracks();var I=T.getTracks();I&&I.length>0&&_(0)},provide:function x(I,G){if("function"==typeof G){var ue,ee=T.getCurrentTrack();if(!ee||ee.segmentDuration<=0||null==I)return void G(null);(ue=T.getThumbnailRequestForTime(I))&&(ee.segmentDuration=ue.duration);var Te=Math.floor(I%ee.segmentDuration*ee.tilesHor*ee.tilesVert/ee.segmentDuration),q=new R.default;if(q.width=Math.floor(ee.widthPerTile),q.height=Math.floor(ee.heightPerTile),q.x=Math.floor(Te%ee.tilesHor)*ee.widthPerTile,q.y=Math.floor(Te/ee.tilesHor)*ee.heightPerTile,"readThumbnail"in ee)return ee.readThumbnail(I,function(H){q.url=H,G(q)});if(ue)q.url=ue.url,ee.segmentDuration=NaN;else{var se=Math.floor(I/ee.segmentDuration);q.url=function P(I,G){var ee=G+I.startNumber,de=Object(L.replaceTokenForTemplate)(I.templateUrl,"Number",ee);return de=Object(L.replaceTokenForTemplate)(de,"Time",(ee-1)*I.segmentDuration*I.timescale),de=Object(L.replaceTokenForTemplate)(de,"Bandwidth",I.bandwidth),Object(L.unescapeDollarsInTemplate)(de)}(ee,se)}G(q)}},setTrackByIndex:_,getCurrentTrackIndex:function D(){return T.getCurrentTrackIndex()},getBitrateList:function y(){var I=T.getTracks(),G=0;return I.map(function(ee){var de=new U.default;return de.mediaType=S.default.IMAGE,de.qualityIndex=G++,de.bitrate=ee.bitrate,de.width=ee.width,de.height=ee.height,de})},reset:A},function k(){A(),T=Object(j.default)(c).create({streamInfo:g,adapter:f.adapter,baseURLController:f.baseURLController,timelineConverter:f.timelineConverter,debug:f.debug,eventBus:f.eventBus,events:f.events,dashConstants:f.dashConstants,dashMetrics:f.dashMetrics,segmentBaseController:f.segmentBaseController})}(),v}b.__dashjs_factory_name="ThumbnailController",O.default=e.default.getClassFactory(b)},"./src/streaming/thumbnail/ThumbnailTracks.js":function(Ve,O,r){"use strict";r.r(O),r.d(O,"THUMBNAILS_SCHEME_ID_URIS",function(){return v});var e=r("./src/streaming/constants/Constants.js"),S=r("./src/dash/constants/DashConstants.js"),R=r("./src/core/FactoryMaker.js"),j=r("./src/streaming/vo/ThumbnailTrackInfo.js"),U=r("./src/streaming/utils/URLUtils.js"),L=r("./src/dash/utils/SegmentsUtils.js"),b=r("./src/streaming/utils/BoxParser.js"),f=r("./src/streaming/net/XHRLoader.js"),c=r("./src/dash/DashHandler.js"),g=r("./src/dash/controllers/SegmentsController.js"),v=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function T(k){var ee,de,ue,Te,q,se,H,ce,N=this.context,B=k.adapter,x=k.baseURLController,P=k.streamInfo,_=k.timelineConverter,D=k.debug,y=k.eventBus,A=k.events,I=k.dashConstants,G=Object(U.default)(N).getInstance();function me(qe,He){var De=new j.default;De.id=qe.id,De.bitrate=qe.bandwidth,De.width=qe.width,De.height=qe.height,De.tilesHor=1,De.tilesVert=1,qe.essentialProperties&&qe.essentialProperties.forEach(function(he){if(v.indexOf(he.schemeIdUri)>=0&&he.value){var Y=he.value.split("x");2===Y.length&&!isNaN(Y[0])&&!isNaN(Y[1])&&(De.tilesHor=parseInt(Y[0],10),De.tilesVert=parseInt(Y[1],10))}}),He?se.updateSegmentData(qe).then(function(he){!function xe(qe,He,De){var he=[],Y=function ve(qe,He){var Y,J,Me,ae,De=[],he=0;for(Y=0,J=qe.segments.length;Y<J;Y++)Me=qe.segments[Y],(ae=Object(L.getTimeBasedSegment)(_,B.getIsDynamic(),He,Me.startTime,Me.duration,Me.timescale,Me.media,Me.mediaRange,he))&&(De.push(ae),ae=null,he++);return De}(De,He);He.segments=Y,qe.segmentDuration=He.segments[0].duration,qe.readThumbnail=function(J,Me){var ae=null;he.some(function(re){if(re.start<=J&&re.end>J)return ae=re.url,!0}),ae?Me(ae):He.segments.some(function(re){if(re.mediaStartTime<=J&&re.mediaStartTime+re.duration>J){var z=x.resolve(He.path);return H.load({method:"get",url:z.url,request:{range:re.mediaRange,responseType:"arraybuffer"},onload:function(X){var Z=ce.getSamplesInfo(X.target.response),W=new Blob([X.target.response.slice(Z.sampleList[0].offset,Z.sampleList[0].offset+Z.sampleList[0].size)],{type:"image/jpeg"}),oe=window.URL.createObjectURL(W);he.push({start:re.mediaStartTime,end:re.mediaStartTime+re.duration,url:oe}),Me&&Me(oe)}}),!0}})}}(De,qe,he)}):(De.startNumber=qe.startNumber,De.segmentDuration=qe.segmentDuration,De.timescale=qe.timescale,De.templateUrl=function Oe(qe){var He=G.isRelative(qe.media)?G.resolve(qe.media,x.resolve(qe.path).url):qe.media;return He?Object(L.replaceIDForTemplate)(He,qe.id):""}(qe)),De.tilesHor>0&&De.tilesVert>0&&(De.widthPerTile=De.width/De.tilesHor,De.heightPerTile=De.height/De.tilesVert,de.push(De))}function Be(){de=[],Te=-1,q=null}return ee={getTracks:function Ee(){return de},addTracks:function pe(){if(P&&B&&(q=B.getMediaInfoForType(P,e.default.IMAGE))){var qe=B.getVoRepresentations(q);qe&&qe.length>0&&qe.forEach(function(He){(He.segmentInfoType===S.default.SEGMENT_TEMPLATE&&He.segmentDuration>0&&He.media||He.segmentInfoType===S.default.SEGMENT_TIMELINE)&&me(He),He.segmentInfoType===S.default.SEGMENT_BASE&&me(He,!0)}),de.length>0&&de.sort(function(He,De){return He.bitrate-De.bitrate})}},reset:Be,setTrackByIndex:function Pe(qe){!de||0===de.length||(qe>=de.length&&(qe=de.length-1),Te=qe)},getCurrentTrack:function Re(){return Te<0?null:de[Te]},getCurrentTrackIndex:function Ie(){return Te},getThumbnailRequestForTime:function ke(qe){for(var He,De=B.getVoRepresentations(q),he=0;he<De.length;he++)if(de[Te].id===De[he].id){He=De[he];break}return ue.getSegmentRequestForTime(q,He,qe)}},function ne(){Be(),H=Object(f.default)(N).create({}),ce=Object(b.default)(N).getInstance(),se=Object(g.default)(N).create({events:A,eventBus:y,streamInfo:P,timelineConverter:_,dashConstants:I,dashMetrics:k.dashMetrics,segmentBaseController:k.segmentBaseController,type:e.default.IMAGE}),(ue=Object(c.default)(N).create({streamInfo:P,type:e.default.IMAGE,timelineConverter:_,segmentsController:se,baseURLController:x,debug:D,eventBus:y,events:A,dashConstants:I,urlUtils:G})).initialize(!!B&&B.getIsDynamic())}(),ee}T.__dashjs_factory_name="ThumbnailTracks",O.default=R.default.getClassFactory(T)},"./src/streaming/utils/BaseURLSelector.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/errors/Errors.js"),S=r("./src/core/EventBus.js"),R=r("./src/core/events/Events.js"),j=r("./src/streaming/controllers/BlacklistController.js"),U=r("./src/streaming/utils/baseUrlResolution/DVBSelector.js"),L=r("./src/streaming/utils/baseUrlResolution/BasicSelector.js"),b=r("./src/core/FactoryMaker.js"),f=r("./src/streaming/vo/DashJSError.js"),c=r("./src/streaming/utils/SupervisorTools.js"),g=r("./src/streaming/utils/baseUrlResolution/ContentSteeringSelector.js"),v=r("./src/core/Settings.js");function T(){var x,P,_,D,y,A,k=this.context,N=Object(S.default)(k).getInstance(),B=Object(v.default)(k).getInstance();function ue(){P.reset()}return x={chooseSelector:function ee(Te){Object(c.checkParameterType)(Te,"boolean"),A=Te?D:_},select:function de(Te){if(Te){if(B.get().streaming.applyContentSteering){var q=y.selectBaseUrlIndex(Te);!isNaN(q)&&-1!==q&&(Te.selectedIdx=q)}if(!isNaN(Te.selectedIdx))return Te.baseUrls[Te.selectedIdx];var se=A.select(Te.baseUrls);return se?(Te.selectedIdx=Te.baseUrls.indexOf(se),se):(N.trigger(R.default.URL_RESOLUTION_FAILED,{error:new f.default(e.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,e.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(A===_&&ue()))}},reset:ue,setConfig:function G(Te){Te.selector&&(A=Te.selector),Te.contentSteeringSelector&&(y=Te.contentSteeringSelector)}},function I(){P=Object(j.default)(k).create({updateEventName:R.default.SERVICE_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:R.default.SERVICE_LOCATION_BLACKLIST_ADD}),_=Object(L.default)(k).create({blacklistController:P}),D=Object(U.default)(k).create({blacklistController:P}),(y=Object(g.default)(k).create()).setConfig({blacklistController:P}),A=_}(),x}T.__dashjs_factory_name="BaseURLSelector",O.default=b.default.getClassFactory(T)},"./src/streaming/utils/BoxParser.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/Debug.js"),S=r("./src/streaming/utils/IsoFile.js"),R=r("./src/core/FactoryMaker.js"),j=r("./node_modules/codem-isoboxer/dist/iso_boxer.js"),U=r.n(j),L=r("./src/streaming/vo/IsoBoxSearchInfo.js");function b(){var f,c,g=this.context;function T(y){if(!y)return null;void 0===y.fileStart&&(y.fileStart=0);var A=U.a.parseBuffer(y),I=Object(S.default)(g).create();return I.setData(A),I}function x(y,A){return y[A+3]>>>0|y[A+2]<<8>>>0|y[A+1]<<16>>>0|y[A]<<24>>>0}function P(y,A){return String.fromCharCode(y[A++])+String.fromCharCode(y[A++])+String.fromCharCode(y[A++])+String.fromCharCode(y[A])}return c={parse:T,findLastTopIsoBoxCompleted:function k(y,A,I){if(void 0===I&&(I=0),!A||I+8>=A.byteLength)return new L.default(0,!1);for(var ee,G=A instanceof ArrayBuffer?new Uint8Array(A):A,de=0;I<G.byteLength;){var ue=x(G,I),Te=P(G,I+4);if(0===ue)break;I+ue<=G.byteLength&&(y.indexOf(Te)>=0?ee=new L.default(I,!0,ue):de=I+ue),I+=ue}return ee||new L.default(de,!1)},getMediaTimescaleFromMoov:function B(y){var A=T(y),I=A?A.getBox("mdhd"):void 0;return I?I.timescale:NaN},getSamplesInfo:function N(y){if(!y||0===y.byteLength)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};var ee,ue,Te,q,se,H,ce,ne,pe,me,xe,ve,Oe,Ee,Ie,Re,A=T(y),I=A.getBoxes("moof"),G=A.getBoxes("mfhd");Ie=A.getBoxes("moof").length,Ee=G[G.length-1].sequence_number,ue=0,se=[];var Pe=-1,ke=-1;for(me=0;me<I.length;me++){var Be=I[me],qe=Be.getChildBoxes("traf");for(ne=0;ne<qe.length;ne++){var He=qe[ne],De=He.getChildBox("tfhd"),he=He.getChildBox("tfdt");q=he.baseMediaDecodeTime;var Y=He.getChildBoxes("trun"),J=He.getChildBoxes("subs");for(pe=0;pe<Y.length;pe++){var Me=Y[pe];for(ue=Me.sample_count,Oe=(De.base_data_offset||0)+(Me.data_offset||0),ce=0;ce<ue;ce++){var ae={dts:q,cts:q+(void 0!==(H=Me.samples[ce]).sample_composition_time_offset?H.sample_composition_time_offset:0),duration:ee=void 0!==H.sample_duration?H.sample_duration:De.default_sample_duration,offset:Be.offset+Oe,size:Te=void 0!==H.sample_size?H.sample_size:De.default_sample_size,subSizes:[Te]};if(J)for(xe=0;xe<J.length;xe++){var re=J[xe];if(Pe<re.entry_count-1&&ce>ke&&(Pe++,ke+=re.entries[Pe].sample_delta),ce==ke){ae.subSizes=[];var z=re.entries[Pe];for(ve=0;ve<z.subsample_count;ve++)ae.subSizes.push(z.subsamples[ve].subsample_size)}}se.push(ae),Oe+=Te,q+=ee}}Re=q-he.baseMediaDecodeTime}}return{sampleList:se,lastSequenceNumber:Ee,totalDuration:Re,numSequences:Ie}},findInitRange:function _(y){var A=null,ee=T(y);if(!ee)return A;var de=ee.getBox("ftyp"),ue=ee.getBox("moov");return f.debug("Searching for initialization."),ue&&ue.isComplete&&f.debug("Found the initialization.  Range: "+(A=(de?de.offset:ue.offset)+"-"+(ue.offset+ue.size-1))),A},parsePayload:function D(y,A,I){if(void 0===I&&(I=0),!A||I+8>=A.byteLength)return new L.default(0,!1);for(var ee,G=A instanceof ArrayBuffer?new Uint8Array(A):A,de=0;I<G.byteLength;){var ue=x(G,I),Te=P(G,I+4);if(0===ue)break;I+ue<=G.byteLength&&(y.indexOf(Te)>=0?ee=new L.default(I,!0,ue,Te):de=I+ue),I+=ue}return ee||new L.default(de,!1)}},function v(){f=Object(e.default)(g).getInstance().getLogger(c)}(),c}b.__dashjs_factory_name="BoxParser",O.default=R.default.getSingletonFactory(b)},"./src/streaming/utils/Capabilities.js":function(Ve,O,r){"use strict";r.r(O),r.d(O,"supportsMediaSource",function(){return U});var e=r("./src/core/FactoryMaker.js"),S=r("./src/streaming/thumbnail/ThumbnailTracks.js"),R=r("./src/streaming/constants/Constants.js"),j=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function U(){var b="WebKitMediaSource"in window,f="MediaSource"in window;return b||f}function L(){var b,f,c;return b={setConfig:function v(y){!y||y.settings&&(f=y.settings)},supportsMediaSource:U,supportsEncryptedMedia:function T(){return c},supportsCodec:function N(y,A){return A!==R.default.AUDIO&&A!==R.default.VIDEO?Promise.resolve(!0):function B(y,A){return f.get().streaming.capabilities.useMediaCapabilitiesApi&&navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo&&(y.codec&&A===R.default.AUDIO||A===R.default.VIDEO&&y.codec&&y.width&&y.height&&y.bitrate&&y.framerate)}(y,A)?function P(y,A){return new Promise(function(I){if(y&&y.codec){var G={type:"media-source"};G[A]={},G[A].contentType=y.codec,G[A].width=y.width,G[A].height=y.height,G[A].bitrate=parseInt(y.bitrate),G[A].framerate=parseFloat(y.framerate),navigator.mediaCapabilities.decodingInfo(G).then(function(ee){I(ee.supported)}).catch(function(){I(!1)})}else I(!1)})}(y,A):function x(y){return new Promise(function(A){if(y&&y.codec){var I=y.codec;y.width&&y.height&&(I+=';width="'+y.width+'";height="'+y.height+'"'),"MediaSource"in window&&MediaSource.isTypeSupported(I)||"WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(I)?A(!0):A(!1)}else A(!1)})}(y)},setEncryptedMediaSupported:function k(y){c=y},supportsEssentialProperty:function _(y){try{return-1!==S.THUMBNAILS_SCHEME_ID_URIS.indexOf(y.schemeIdUri)}catch(A){return!0}},codecRootCompatibleWithCodec:function D(y,A){for(var ee,I=y.split(".")[0],G=0===A.indexOf(I),de=0;de<j.length;de++)if(j[de].codec===I){ee=j[de];break}return ee?G||ee.compatibleCodecs.some(function(ue){return 0===A.indexOf(ue)}):G}},function g(){c=!1}(),b}L.__dashjs_factory_name="Capabilities",O.default=e.default.getSingletonFactory(L)},"./src/streaming/utils/CapabilitiesFilter.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js"),S=r("./src/core/Debug.js"),R=r("./src/streaming/constants/Constants.js"),j=r("./src/core/EventBus.js"),U=r("./src/core/events/Events.js");function L(){var c,g,v,T,k,N,b=this.context,f=Object(j.default)(b).getInstance();function _(ue,Te){if(!Te||!Te.Period_asArray||0===Te.Period_asArray.length)return Promise.resolve();var q=[];return Te.Period_asArray.forEach(function(se){q.push(function D(ue,Te){return new Promise(function(q){if(ue&&ue.AdaptationSet_asArray&&0!==ue.AdaptationSet_asArray.length){var se=[];ue.AdaptationSet_asArray.forEach(function(H){g.getIsTypeOf(H,Te)&&se.push(function y(ue,Te){return new Promise(function(q){if(ue.Representation_asArray&&0!==ue.Representation_asArray.length){var se=[],H=[];ue.Representation_asArray.forEach(function(ce,ne){var pe=g.getCodec(ue,ne,!1),me=function A(ue,Te,q){switch(ue){case R.default.VIDEO:return function I(ue,Te){return{codec:Te,width:ue.width||null,height:ue.height||null,framerate:ue.frameRate||null,bitrate:ue.bandwidth||null}}(Te,q);case R.default.AUDIO:return function G(ue,Te){return{codec:Te,bitrate:ue.bandwidth||null,samplerate:ue.audioSamplingRate||null}}(Te,q);default:return null}}(Te,ce,pe);H.push(me),se.push(v.supportsCodec(me,Te))}),Promise.all(se).then(function(ce){ue.Representation_asArray=ue.Representation_asArray.filter(function(ne,pe){return ce[pe]||N.debug("[Stream] Codec ".concat(H[pe].codec," not supported ")),ce[pe]}),q()}).catch(function(){q()})}else q()})}(H,Te))}),Promise.all(se).then(function(){ue.AdaptationSet_asArray=ue.AdaptationSet_asArray.filter(function(H){var ce=H.Representation_asArray&&H.Representation_asArray.length>0;return ce||(f.trigger(U.default.ADAPTATION_SET_REMOVED_NO_CAPABILITIES,{adaptationSet:H}),N.warn("AdaptationSet has been removed because of no supported Representation")),ce}),q()}).catch(function(){q()})}else q()})}(se,ue))}),Promise.all(q)}return c={setConfig:function x(ue){!ue||(ue.adapter&&(g=ue.adapter),ue.capabilities&&(v=ue.capabilities),ue.settings&&(T=ue.settings),ue.customParametersModel&&(k=ue.customParametersModel))},filterUnsupportedFeatures:function P(ue){return new Promise(function(Te){var q=[];q.push(_(R.default.VIDEO,ue)),q.push(_(R.default.AUDIO,ue)),Promise.all(q).then(function(){T.get().streaming.capabilities.filterUnsupportedEssentialProperties&&function ee(ue){!ue||!ue.Period_asArray||0===ue.Period_asArray.length||ue.Period_asArray.forEach(function(Te){Te.AdaptationSet_asArray=Te.AdaptationSet_asArray.filter(function(q){return!q.Representation_asArray||0===q.Representation_asArray.length||(q.Representation_asArray=q.Representation_asArray.filter(function(se){var H=g.getEssentialPropertiesForRepresentation(se);if(H&&H.length>0)for(var ce=0;ce<H.length;){if(!v.supportsEssentialProperty(H[ce]))return N.debug("[Stream] EssentialProperty not supported: "+H[ce].schemeIdUri),!1;ce+=1}return!0}),q.Representation_asArray&&q.Representation_asArray.length>0)})})}(ue),function de(ue){var Te=k.getCustomCapabilitiesFilters();!Te||0===Te.length||!ue||!ue.Period_asArray||0===ue.Period_asArray.length||ue.Period_asArray.forEach(function(q){q.AdaptationSet_asArray=q.AdaptationSet_asArray.filter(function(se){return!se.Representation_asArray||0===se.Representation_asArray.length||(se.Representation_asArray=se.Representation_asArray.filter(function(H){return!Te.some(function(ce){return!ce(H)})}),se.Representation_asArray&&se.Representation_asArray.length>0)})})}(ue),Te()}).catch(function(){Te()})})}},function B(){N=Object(S.default)(b).getInstance().getLogger(c)}(),c}L.__dashjs_factory_name="CapabilitiesFilter",O.default=e.default.getSingletonFactory(L)},"./src/streaming/utils/CustomTimeRanges.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js"),S=r("./src/streaming/utils/SupervisorTools.js");function R(){return{customTimeRangeArray:[],length:0,add:function L(T,k){var N=0;for(N=0;N<this.customTimeRangeArray.length&&T>this.customTimeRangeArray[N].start;N++);for(this.customTimeRangeArray.splice(N,0,{start:T,end:k}),N=0;N<this.customTimeRangeArray.length-1;N++)this.mergeRanges(N,N+1)&&N--;this.length=this.customTimeRangeArray.length},clear:function b(){this.customTimeRangeArray=[],this.length=0},remove:function f(T,k){for(var N=0;N<this.customTimeRangeArray.length;N++)if(T<=this.customTimeRangeArray[N].start&&k>=this.customTimeRangeArray[N].end)this.customTimeRangeArray.splice(N,1),N--;else{if(T>this.customTimeRangeArray[N].start&&k<this.customTimeRangeArray[N].end){this.customTimeRangeArray.splice(N+1,0,{start:k,end:this.customTimeRangeArray[N].end}),this.customTimeRangeArray[N].end=T;break}T>this.customTimeRangeArray[N].start&&T<this.customTimeRangeArray[N].end?this.customTimeRangeArray[N].end=T:k>this.customTimeRangeArray[N].start&&k<this.customTimeRangeArray[N].end&&(this.customTimeRangeArray[N].start=k)}this.length=this.customTimeRangeArray.length},mergeRanges:function c(T,k){var N=this.customTimeRangeArray[T],B=this.customTimeRangeArray[k];return N.start<=B.start&&B.start<=N.end&&N.end<=B.end?(N.end=B.end,this.customTimeRangeArray.splice(k,1),!0):B.start<=N.start&&N.start<=B.end&&B.end<=N.end?(N.start=B.start,this.customTimeRangeArray.splice(k,1),!0):B.start<=N.start&&N.start<=B.end&&N.end<=B.end?(this.customTimeRangeArray.splice(T,1),!0):N.start<=B.start&&B.start<=N.end&&B.end<=N.end&&(this.customTimeRangeArray.splice(k,1),!0)},start:function g(T){return Object(S.checkInteger)(T),T>=this.customTimeRangeArray.length||T<0?NaN:this.customTimeRangeArray[T].start},end:function v(T){return Object(S.checkInteger)(T),T>=this.customTimeRangeArray.length||T<0?NaN:this.customTimeRangeArray[T].end}}}R.__dashjs_factory_name="CustomTimeRanges",O.default=e.default.getClassFactory(R)},"./src/streaming/utils/DOMStorage.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js"),S=r("./src/core/Debug.js"),R=r("./src/streaming/constants/Constants.js"),j=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],U="dashjs_?_bitrate",L="dashjs_?_settings",b="localStorage",c="lastBitrate",g="lastMediaSettings";function v(k){var x,P,_,N=this.context,B=(k=k||{}).settings;function y(se){if(void 0!==_)return _;_=!1;var ne;try{"undefined"!=typeof window&&(ne=window[se])}catch(pe){return P.warn("DOMStorage access denied: "+pe.message),_}if(!ne||se!==b&&"sessionStorage"!==se)return _;try{ne.setItem("1","1"),ne.removeItem("1"),_=!0}catch(pe){P.warn("DOMStorage is supported, but cannot be used: "+pe.message)}return _}function I(){return 6e5*Math.round((new Date).getTime()/6e5)}function G(se,H){return y(se)&&B.get().streaming[H+"CachingInfo"].enabled}function ee(){if(!B)throw new Error(R.default.MISSING_CONFIG_ERROR)}return x={getSavedBitrateSettings:function ue(se){if(ee(),!B.get().streaming.lastBitrateCachingInfo.enabled)return NaN;var H=NaN;if(G(b,c)){var ce=U.replace(/\?/,se);try{var ne=JSON.parse(localStorage.getItem(ce))||{},pe=(new Date).getTime()-parseInt(ne.timestamp,10)>=B.get().streaming.lastBitrateCachingInfo.ttl||!1,me=parseFloat(ne.bitrate);isNaN(me)||pe?pe&&localStorage.removeItem(ce):(H=me,P.debug("Last saved bitrate for "+se+" was "+me))}catch(xe){return null}}return H},setSavedBitrateSettings:function q(se,H){if(G(b,c)&&H){var ce=U.replace(/\?/,se);try{localStorage.setItem(ce,JSON.stringify({bitrate:H.toFixed(3),timestamp:I()}))}catch(ne){P.error(ne.message)}}},getSavedMediaSettings:function de(se){if(ee(),!B.get().streaming.lastMediaSettingsCachingInfo.enabled)return null;var H=null;if(G(b,g)){var ce=L.replace(/\?/,se);try{var ne=JSON.parse(localStorage.getItem(ce))||{},pe=(new Date).getTime()-parseInt(ne.timestamp,10)>=B.get().streaming.lastMediaSettingsCachingInfo.ttl||!1;H=ne.settings,pe&&(localStorage.removeItem(ce),H=null)}catch(me){return null}}return H},setSavedMediaSettings:function Te(se,H){if(G(b,g)){var ce=L.replace(/\?/,se);try{localStorage.setItem(ce,JSON.stringify({settings:H,timestamp:I()}))}catch(ne){P.error(ne.message)}}}},function D(){P=Object(S.default)(N).getInstance().getLogger(x),function A(){y(b)&&j.forEach(function(se){var H=localStorage.getItem(se.oldKey);if(H){localStorage.removeItem(se.oldKey);try{localStorage.setItem(se.newKey,H)}catch(ce){P.error(ce.message)}}})}()}(),x}v.__dashjs_factory_name="DOMStorage";var T=e.default.getSingletonFactory(v);O.default=T},"./src/streaming/utils/DefaultURLUtils.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js");function S(){var R,j=/^[a-z][a-z0-9+\-_.]*:/i,U=/^https?:\/\//i,L=/^https:\/\//i,b=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i,f=function(G,ee){try{return new window.URL(G,ee).toString()}catch(de){return G}},c=function(G,ee){var de=v;if(!ee||!B(G))return G;x(G)&&(de=T),P(G)&&(de=N);var ue=de(ee),Te="/"!==ue.charAt(ue.length-1)&&"/"!==G.charAt(0)?"/":"";return[ue,G].join(Te)};function v(I){var G=I.indexOf("/"),ee=I.lastIndexOf("/");return-1!==G?ee===G+1?I:(-1!==I.indexOf("?")&&(I=I.substring(0,I.indexOf("?"))),I.substring(0,ee+1)):""}function T(I){var G=I.match(b);return G?G[1]:""}function N(I){var G=I.match(j);return G?G[0]:""}function B(I){return!j.test(I)}function x(I){return B(I)&&"/"===I.charAt(0)}function P(I){return 0===I.indexOf("//")}return function g(){try{new window.URL("x","http://y"),R=f}catch(G){}finally{R=R||c}}(),{parseBaseUrl:v,parseOrigin:T,parseScheme:N,isRelative:B,isPathAbsolute:x,isSchemeRelative:P,isHTTPURL:function _(I){return U.test(I)},isHTTPS:function D(I){return L.test(I)},removeHostname:function k(I){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(I)[2].substring(1)},resolve:function y(I,G){return R(I,G)}}}S.__dashjs_factory_name="DefaultURLUtils",O.default=e.default.getSingletonFactory(S)},"./src/streaming/utils/EBMLParser.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js");function S(R){R=R||{};var j,U=new DataView(R.data),L=0;function c(P,_){var D=!0,y=0;if(void 0===_&&(_=!1),P.tag>16777215?(U.getUint32(L)!==P.tag&&(D=!1),y=4):P.tag>65535?(256*U.getUint16(L)+U.getUint8(L+2)!==P.tag&&(D=!1),y=3):P.tag>255?(U.getUint16(L)!==P.tag&&(D=!1),y=2):(U.getUint8(L)!==P.tag&&(D=!1),y=1),!D&&P.required&&!_)throw new Error("required tag not found");return D&&(L+=y),D}function k(P){var _=1,D=128,A=-1,I=0,G=U.getUint8(L),ee=0;for(ee=0;ee<8;ee+=1){if((G&D)===D){I=void 0===P?G&~D:G,A=ee;break}D>>=1}for(ee=0;ee<A;ee+=1,_+=1)I=I<<8|255&U.getUint8(L+_);return L+=_,I}return j={getPos:function b(){return L},setPos:function f(P){L=P},consumeTag:c,consumeTagAndSize:function g(P,_){var D=c(P,_);return D&&k(),D},parseTag:function v(P){var _;return c(P),_=k(),j[P.parse](_)},skipOverElement:function T(P,_){var y,D=c(P,_);return D&&(y=k(),L+=y),D},getMatroskaCodedNum:k,getMatroskaFloat:function N(P){var _;switch(P){case 4:_=U.getFloat32(L),L+=4;break;case 8:_=U.getFloat64(L),L+=8}return _},getMatroskaUint:function B(P){for(var _=0,D=0;D<P;D+=1)_<<=8,_|=255&U.getUint8(L+D);return L+=P,_},moreData:function x(){return L<U.byteLength}}}S.__dashjs_factory_name="EBMLParser",O.default=e.default.getClassFactory(S)},"./src/streaming/utils/ErrorHandler.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/EventBus.js"),S=r("./src/core/events/Events.js"),R=r("./src/core/FactoryMaker.js");function j(){var L=this.context,b=Object(e.default)(L).getInstance();return{error:function f(c){b.trigger(S.default.ERROR,{error:c})}}}j.__dashjs_factory_name="ErrorHandler",O.default=R.default.getSingletonFactory(j)},"./src/streaming/utils/InitCache.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js");function S(){var R={};return{save:function j(f){var c=f.streamId,g=f.representationId;R[c]=R[c]||{},R[c][g]=f},extract:function U(f,c){return R&&R[f]&&R[f][c]?R[f][c]:null},reset:function L(){R={}}}}S.__dashjs_factory_name="InitCache",O.default=e.default.getSingletonFactory(S)},"./src/streaming/utils/IsoFile.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/vo/IsoBox.js"),S=r("./src/core/FactoryMaker.js");function R(){var U;function b(v){var T=[];if(!v||!U||"function"!=typeof U.fetchAll)return T;for(var N,k=U.fetchAll(v),B=0,x=k.length;B<x;B++)(N=g(k[B]))&&T.push(N);return T}function g(v){if(!v)return null;var T=new e.default(v);return v.hasOwnProperty("_incomplete")&&(T.isComplete=!v._incomplete),T}return{getBox:function L(v){return v&&U&&U.boxes&&0!==U.boxes.length&&"function"==typeof U.fetch?g(U.fetch(v)):null},getBoxes:b,setData:function f(v){U=v},getLastBox:function c(){if(!U||!U.boxes||!U.boxes.length)return null;var T=b(U.boxes[U.boxes.length-1].type);return T.length>0?T[T.length-1]:null}}}R.__dashjs_factory_name="IsoFile",O.default=S.default.getClassFactory(R)},"./src/streaming/utils/ObjectUtils.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js"),S=r("./node_modules/fast-deep-equal/index.js"),R=r.n(S);function j(){return{areEqual:function L(b,f){return R()(b,f)}}}j.__dashjs_factory_name="ObjectUtils",O.default=e.default.getSingletonFactory(j)},"./src/streaming/utils/RequestModifier.js":function(Ve,O,r){"use strict";r.r(O),r.d(O,"modifyRequest",function(){return S});var e=r("./src/core/FactoryMaker.js");function S(j,U){var L={url:j.url,method:j.method,headers:Object.assign({},j.headers),credentials:j.withCredentials?"include":void 0};return Promise.resolve(U.modifyRequest(L)).then(function(){return Object.assign(j,L,{withCredentials:"include"===L.credentials})})}function R(){return{modifyRequest:null,modifyRequestURL:function U(b){return b},modifyRequestHeader:function L(b,f){return b}}}R.__dashjs_factory_name="RequestModifier",O.default=e.default.getSingletonFactory(R)},"./src/streaming/utils/SupervisorTools.js":function(Ve,O,r){"use strict";r.r(O),r.d(O,"checkParameterType",function(){return R}),r.d(O,"checkInteger",function(){return j}),r.d(O,"checkRange",function(){return U}),r.d(O,"checkIsVideoOrAudioType",function(){return L});var e=r("./src/streaming/constants/Constants.js");function S(b){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(b)}function R(b,f){if(S(b)!==f)throw e.default.BAD_ARGUMENT_ERROR}function j(b){if(null===b||isNaN(b)||b%1!=0)throw e.default.BAD_ARGUMENT_ERROR+" : argument is not an integer"}function U(b,f,c){if(b<f||b>c)throw e.default.BAD_ARGUMENT_ERROR+" : argument out of range"}function L(b){if("string"!=typeof b||b!==e.default.AUDIO&&b!==e.default.VIDEO)throw e.default.BAD_ARGUMENT_ERROR}},"./src/streaming/utils/TTMLParser.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js"),S=r("./src/core/Debug.js"),R=r("./src/core/EventBus.js"),j=r("./src/core/events/Events.js"),U=r("./node_modules/imsc/src/main/js/main.js"),b=r("./src/streaming/MediaPlayerEvents.js"),f=r("./src/streaming/constants/ConformanceViolationConstants.js");function c(){var T,k,g=this.context,v=Object(R.default)(g).getInstance(),N=0;function x(){var _="cue_TTML_"+N;return N++,_}return T={parse:function P(_,D,y,A,I){var de,ue,Te,G="",ee=[],q={},se={},H="",ce="",ne={onOpenTag:function(Oe,Ee,Ie){if(Ie[" imagetype"]&&!Ie[" imageType"]&&(v.trigger(b.default.CONFORMANCE_VIOLATION,{level:f.default.LEVELS.ERROR,event:f.default.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),Ie[" imageType"]=Ie[" imagetype"]),"image"===Ee&&("http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"===Oe||"http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"===Oe)){if(!Ie[" imageType"]||"PNG"!==Ie[" imageType"].value)return void k.warn("smpte-tt imageType != PNG. Discarded");H=Ie["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){H&&(se[H]=ce.trim()),ce="",H=""},onText:function(Oe){H&&(ce+=Oe)}};if(!_)throw G="no ttml data to parse",new Error(G);q.data=_,v.trigger(j.default.TTML_TO_PARSE,q);var pe=Object(U.fromXML)(q.data,function(ve){G=ve},ne);v.trigger(j.default.TTML_PARSED,{ttmlString:q.data,ttmlDoc:pe});var me=pe.getMediaTimeEvents();for(Te=0;Te<me.length;Te++){var xe=Object(U.generateISD)(pe,me[Te],function(ve){G=ve});xe.contents.some(function(ve){return ve.contents.length})&&(de=me[Te]+D<y?y:me[Te]+D)<(ue=me[Te+1]+D>A?A:me[Te+1]+D)&&ee.push({start:de,end:ue,type:"html",cueID:x(),isd:xe,images:I,embeddedImages:se})}if(""!==G)throw k.error(G),new Error(G);return ee}},function B(){k=Object(S.default)(g).getInstance().getLogger(T)}(),T}c.__dashjs_factory_name="TTMLParser",O.default=e.default.getSingletonFactory(c)},"./src/streaming/utils/URLUtils.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js"),S=r("./src/streaming/utils/DefaultURLUtils.js");function R(){var L,b=[],f=this.context;function T(G,ee,de){var ue=function c(G){var ee;for(ee=0;ee<b.length;ee++)if(b[ee].regex.test(G))return b[ee].utils;return L}(de||ee);return ue&&"function"==typeof ue[G]?ue[G](ee,de):L[G](ee,de)}return function g(){L=Object(S.default)(f).getInstance()}(),{registerUrlRegex:function v(G,ee){b.push({regex:G,utils:ee})},parseBaseUrl:function k(G){return T("parseBaseUrl",G)},parseOrigin:function N(G){return T("parseOrigin",G)},parseScheme:function x(G){return T("parseScheme",G)},isRelative:function P(G){return T("isRelative",G)},isPathAbsolute:function _(G){return T("isPathAbsolute",G)},isSchemeRelative:function D(G){return T("isSchemeRelative",G)},isHTTPURL:function y(G){return T("isHTTPURL",G)},isHTTPS:function A(G){return T("isHTTPS",G)},removeHostname:function B(G){return T("removeHostname",G)},resolve:function I(G,ee){return T("resolve",G,ee)}}}R.__dashjs_factory_name="URLUtils";var j=e.default.getSingletonFactory(R);O.default=j},"./src/streaming/utils/VTTParser.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js"),S=r("./src/core/Debug.js");function j(){var L,b,f,c,g,v,U=this.context;function N(_){var D=_.split(":"),y=D.length-1;return _=60*parseInt(D[y-1],10)+parseFloat(D[y]),2===y&&(_+=3600*parseInt(D[0],10)),_}function B(_){var D=_.split(c),y=D[1].split(v);return y.shift(),D[1]=y[0],y.shift(),{cuePoints:D,styles:x(y)}}function x(_){var D={};return _.forEach(function(y){if(y.split(/:/).length>1){var A=y.split(/:/)[1];A&&-1!=A.search(/%/)&&(A=parseInt(A.replace(/%/,""),10)),(y.match(/align/)||y.match(/A/))&&(D.align=A),(y.match(/line/)||y.match(/L/))&&(D.line=A),(y.match(/position/)||y.match(/P/))&&(D.position=A),(y.match(/size/)||y.match(/S/))&&(D.size=A)}}),D}function P(_,D){for(var G,y=D,A="",I="";""!==_[y]&&y<_.length;)y++;if((G=y-D)>1)for(var ee=0;ee<G;ee++){if((I=_[D+ee]).match(c)){A="";break}A+=I,ee!==G-1&&(A+="\n")}else(I=_[D]).match(c)||(A=I);return A}return L={parse:function k(_){var y,A,D=[];if(!_)return D;y=(_=_.split(f)).length,A=-1;for(var I=0;I<y;I++){var G=_[I];if(G.length>0&&"WEBVTT"!==G&&G.match(c)){var ee=B(G),de=ee.cuePoints,ue=ee.styles,Te=P(_,I+1),q=N(de[0].replace(g,"")),se=N(de[1].replace(g,""));!isNaN(q)&&!isNaN(se)&&q>=A&&se>q?""!==Te?(A=q,D.push({start:q,end:se,data:Te,styles:ue})):b.error("Skipping cue due to empty/malformed cue text"):b.error("Skipping cue due to incorrect cue timing")}}return D}},function T(){b=Object(S.default)(U).getInstance().getLogger(L),f=/(?:\r\n|\r|\n)/gm,c=/-->/,g=/(^[\s]+|[\s]+$)/g,v=/\s\b/g}(),L}j.__dashjs_factory_name="VTTParser",O.default=e.default.getSingletonFactory(j)},"./src/streaming/utils/VttCustomRenderingParser.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js");function S(){var R,j;return R={parse:function L(b){var f=[];return j.oncue=function(c){c.start=c.startTime,c.end=c.endTime,c.data=c.text,c.styles={align:c.align,line:c.line,position:c.position,size:c.size},f.push(c)},j.parse(b),f}},function U(){try{window&&window.WebVTT&&window.WebVTT.Parser&&(j=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()))}catch(b){}}(),R}S.__dashjs_factory_name="VttCustomRenderingParser",O.default=e.default.getSingletonFactory(S)},"./src/streaming/utils/baseUrlResolution/BasicSelector.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js");function S(R){var U=(R=R||{}).blacklistController;return{select:function L(b){var c,f=0;return b&&b.some(function(g,v){return f=v,!U.contains(g.serviceLocation)})&&(c=b[f]),c}}}S.__dashjs_factory_name="BasicSelector",O.default=e.default.getClassFactory(S)},"./src/streaming/utils/baseUrlResolution/ContentSteeringSelector.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js"),S=r("./src/dash/controllers/ContentSteeringController.js");function R(){var U,L,b,j=this.context;function v(){for(var T=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],N=0,B=NaN,x=function(){var D=T[N],y=k.findIndex(function(A){return A.serviceLocation&&A.serviceLocation===D});if(-1!==y&&!b.contains(k[y].serviceLocation))return B=y,"break";N+=1};N<T.length&&"break"!==x(););return B}return U={selectBaseUrlIndex:function g(T){var k=NaN;if(isNaN(T.selectedIdx)){var N=L.getSteeringDataFromManifest();N&&N.defaultServiceLocation&&(k=v([N.defaultServiceLocation],T.baseUrls))}var B=L.getCurrentSteeringResponseData();return T.baseUrls&&T.baseUrls.length&&B&&B.serviceLocationPriority&&B.serviceLocationPriority.length&&(k=v(B.serviceLocationPriority,T.baseUrls)),k},setConfig:function c(T){T.blacklistController&&(b=T.blacklistController),T.contentSteeringController&&(L=T.contentSteeringController)}},function f(){L=Object(S.default)(j).getInstance()}(),U}R.__dashjs_factory_name="ContentSteeringSelector",O.default=e.default.getClassFactory(R)},"./src/streaming/utils/baseUrlResolution/DVBSelector.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/core/FactoryMaker.js");function S(R){var U=(R=R||{}).blacklistController;return{select:function f(c){return c&&function b(c){var B,x,T=0,k=[],N=0;if((x=c.sort(function(_,D){var y=_.dvb_priority-D.dvb_priority;return isNaN(y)?0:y}).filter(function(_,D,y){return!D||y[0].dvb_priority&&_.dvb_priority&&y[0].dvb_priority===_.dvb_priority})).length)return x.length>1&&(x.forEach(function(P){k.push(T+=P.dvb_weight)}),B=Math.floor(Math.random()*(T-1)),k.every(function(P,_){return N=_,!(B<P)})),x[N]}(function L(c){var g=[];return c.filter(function(N){return!U.contains(N.serviceLocation)||(N.dvb_priority&&g.push(N.dvb_priority),!1)}).filter(function(N){return!(g.length&&N.dvb_priority&&-1!==g.indexOf(N.dvb_priority))})}(c))}}}S.__dashjs_factory_name="DVBSelector",O.default=e.default.getClassFactory(S)},"./src/streaming/vo/BitrateInfo.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function S(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,j(v.key),v)}}function R(f,c,g){return c&&S(f.prototype,c),g&&S(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}function j(f){var c=function U(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=R(function f(){(function L(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,f),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN})},"./src/streaming/vo/DashJSError.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function S(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,j(v.key),v)}}function R(f,c,g){return c&&S(f.prototype,c),g&&S(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}function j(f){var c=function U(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=R(function f(c,g,v){(function L(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,f),this.code=c||null,this.message=g||null,this.data=v||null})},"./src/streaming/vo/DataChunk.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function S(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,j(v.key),v)}}function R(f,c,g){return c&&S(f.prototype,c),g&&S(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}function j(f){var c=function U(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=R(function f(){(function L(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,f),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null})},"./src/streaming/vo/FragmentRequest.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/vo/metrics/HTTPRequest.js");function S(c){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(c)}function j(c,g){for(var v=0;v<g.length;v++){var T=g[v];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(c,L(T.key),T)}}function L(c){var g=function b(c,g){if("object"!==S(c)||null===c)return c;var v=c[Symbol.toPrimitive];if(void 0!==v){var T=v.call(c,g||"default");if("object"!==S(T))return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===g?String:Number)(c)}(c,"string");return"symbol"===S(g)?g:String(g)}var f=function(){function c(g){(function R(c,g){if(!(c instanceof g))throw new TypeError("Cannot call a class as a function")})(this,c),this.action=c.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=g||null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null}return function U(c,g,v){return g&&j(c.prototype,g),v&&j(c,v),Object.defineProperty(c,"prototype",{writable:!1}),c}(c,[{key:"isInitializationRequest",value:function(){return this.type&&this.type===e.HTTPRequest.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function(v){this.type=v&&v.init?e.HTTPRequest.INIT_SEGMENT_TYPE:e.HTTPRequest.MEDIA_SEGMENT_TYPE,this.url=v&&v.url?v.url:null,this.range=v&&v.range?v.range.start+"-"+v.range.end:null,this.mediaType=v&&v.mediaType?v.mediaType:null}}]),c}();f.ACTION_DOWNLOAD="download",f.ACTION_COMPLETE="complete",O.default=f},"./src/streaming/vo/HeadRequest.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/vo/FragmentRequest.js");function S(x){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(P){return typeof P}:function(P){return P&&"function"==typeof Symbol&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P})(x)}function R(x,P){for(var _=0;_<P.length;_++){var D=P[_];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(x,U(D.key),D)}}function U(x){var P=function L(x,P){if("object"!==S(x)||null===x)return x;var _=x[Symbol.toPrimitive];if(void 0!==_){var D=_.call(x,P||"default");if("object"!==S(D))return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===P?String:Number)(x)}(x,"string");return"symbol"===S(P)?P:String(P)}function f(x,P){if("function"!=typeof P&&null!==P)throw new TypeError("Super expression must either be null or a function");x.prototype=Object.create(P&&P.prototype,{constructor:{value:x,writable:!0,configurable:!0}}),Object.defineProperty(x,"prototype",{writable:!1}),P&&c(x,P)}function c(x,P){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(D,y){return D.__proto__=y,D})(x,P)}function g(x){var P=function k(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(x){return!1}}();return function(){var y,D=N(x);if(P){var A=N(this).constructor;y=Reflect.construct(D,arguments,A)}else y=D.apply(this,arguments);return v(this,y)}}function v(x,P){if(P&&("object"===S(P)||"function"==typeof P))return P;if(void 0!==P)throw new TypeError("Derived constructors may only return object or undefined");return function T(x){if(void 0===x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}(x)}function N(x){return(N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(_){return _.__proto__||Object.getPrototypeOf(_)})(x)}O.default=function(x){f(_,x);var P=g(_);function _(D){var y;return function b(x,P){if(!(x instanceof P))throw new TypeError("Cannot call a class as a function")}(this,_),(y=P.call(this,D)).checkForExistenceOnly=!0,y}return function j(x,P,_){return P&&R(x.prototype,P),_&&R(x,_),Object.defineProperty(x,"prototype",{writable:!1}),x}(_)}(e.default)},"./src/streaming/vo/IsoBox.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function R(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,U(v.key),v)}}function U(f){var c=function L(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=function(){function f(c){if(function S(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")}(this,f),this.offset=c._offset,this.type=c.type,this.size=c.size,this.boxes=[],c.boxes)for(var g=0;g<c.boxes.length;g++)this.boxes.push(new f(c.boxes[g]));switch(this.isComplete=!0,c.type){case"sidx":if(this.timescale=c.timescale,this.earliest_presentation_time=c.earliest_presentation_time,this.first_offset=c.first_offset,this.references=c.references,c.references){this.references=[];for(var v=0;v<c.references.length;v++)this.references.push({reference_type:c.references[v].reference_type,referenced_size:c.references[v].referenced_size,subsegment_duration:c.references[v].subsegment_duration})}break;case"emsg":this.id=c.id,this.version=1===c.version?1:0,this.value=c.value,this.timescale=c.timescale,this.scheme_id_uri=c.scheme_id_uri,this.presentation_time_delta=1===c.version?c.presentation_time:c.presentation_time_delta,this.event_duration=c.event_duration,this.message_data=c.message_data;break;case"mdhd":this.timescale=c.timescale;break;case"mfhd":this.sequence_number=c.sequence_number;break;case"subs":this.entry_count=c.entry_count,this.entries=c.entries;break;case"tfhd":this.base_data_offset=c.base_data_offset,this.sample_description_index=c.sample_description_index,this.default_sample_duration=c.default_sample_duration,this.default_sample_size=c.default_sample_size,this.default_sample_flags=c.default_sample_flags,this.flags=c.flags;break;case"tfdt":this.version=c.version,this.baseMediaDecodeTime=c.baseMediaDecodeTime,this.flags=c.flags;break;case"trun":if(this.sample_count=c.sample_count,this.first_sample_flags=c.first_sample_flags,this.data_offset=c.data_offset,this.flags=c.flags,this.samples=c.samples,c.samples){this.samples=[];for(var k=0,N=c.samples.length;k<N;k++)this.samples.push({sample_size:c.samples[k].sample_size,sample_duration:c.samples[k].sample_duration,sample_composition_time_offset:c.samples[k].sample_composition_time_offset})}}}return function j(f,c,g){return c&&R(f.prototype,c),g&&R(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}(f,[{key:"getChildBox",value:function(g){for(var v=0;v<this.boxes.length;v++)if(this.boxes[v].type===g)return this.boxes[v]}},{key:"getChildBoxes",value:function(g){for(var v=[],T=0;T<this.boxes.length;T++)this.boxes[T].type===g&&v.push(this.boxes[T]);return v}}]),f}()},"./src/streaming/vo/IsoBoxSearchInfo.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function S(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,j(v.key),v)}}function R(f,c,g){return c&&S(f.prototype,c),g&&S(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}function j(f){var c=function U(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=R(function f(c,g,v){(function L(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,f),this.lastCompletedOffset=c,this.found=g,this.size=v})},"./src/streaming/vo/MetricsList.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function S(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,j(v.key),v)}}function R(f,c,g){return c&&S(f.prototype,c),g&&S(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}function j(f){var c=function U(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=R(function f(){(function L(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,f),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]})},"./src/streaming/vo/TextRequest.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/constants/Constants.js"),S=r("./src/streaming/vo/FragmentRequest.js");function R(P){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(_){return typeof _}:function(_){return _&&"function"==typeof Symbol&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(P)}function j(P,_){for(var D=0;D<_.length;D++){var y=_[D];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(P,L(y.key),y)}}function L(P){var _=function b(P,_){if("object"!==R(P)||null===P)return P;var D=P[Symbol.toPrimitive];if(void 0!==D){var y=D.call(P,_||"default");if("object"!==R(y))return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===_?String:Number)(P)}(P,"string");return"symbol"===R(_)?_:String(_)}function c(P,_){if("function"!=typeof _&&null!==_)throw new TypeError("Super expression must either be null or a function");P.prototype=Object.create(_&&_.prototype,{constructor:{value:P,writable:!0,configurable:!0}}),Object.defineProperty(P,"prototype",{writable:!1}),_&&g(P,_)}function g(P,_){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(y,A){return y.__proto__=A,y})(P,_)}function v(P){var _=function N(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(P){return!1}}();return function(){var A,y=B(P);if(_){var I=B(this).constructor;A=Reflect.construct(y,arguments,I)}else A=y.apply(this,arguments);return T(this,A)}}function T(P,_){if(_&&("object"===R(_)||"function"==typeof _))return _;if(void 0!==_)throw new TypeError("Derived constructors may only return object or undefined");return function k(P){if(void 0===P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P}(P)}function B(P){return(B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(D){return D.__proto__||Object.getPrototypeOf(D)})(P)}O.default=function(P){c(D,P);var _=v(D);function D(y,A){var I;return function f(P,_){if(!(P instanceof _))throw new TypeError("Cannot call a class as a function")}(this,D),(I=_.call(this)).url=y||null,I.type=A||null,I.mediaType=e.default.STREAM,I.responseType="",I}return function U(P,_,D){return _&&j(P.prototype,_),D&&j(P,D),Object.defineProperty(P,"prototype",{writable:!1}),P}(D)}(S.default)},"./src/streaming/vo/TextTrackInfo.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/dash/vo/MediaInfo.js");function S(x){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(P){return typeof P}:function(P){return P&&"function"==typeof Symbol&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P})(x)}function R(x,P){for(var _=0;_<P.length;_++){var D=P[_];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(x,U(D.key),D)}}function U(x){var P=function L(x,P){if("object"!==S(x)||null===x)return x;var _=x[Symbol.toPrimitive];if(void 0!==_){var D=_.call(x,P||"default");if("object"!==S(D))return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===P?String:Number)(x)}(x,"string");return"symbol"===S(P)?P:String(P)}function f(x,P){if("function"!=typeof P&&null!==P)throw new TypeError("Super expression must either be null or a function");x.prototype=Object.create(P&&P.prototype,{constructor:{value:x,writable:!0,configurable:!0}}),Object.defineProperty(x,"prototype",{writable:!1}),P&&c(x,P)}function c(x,P){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(D,y){return D.__proto__=y,D})(x,P)}function g(x){var P=function k(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(x){return!1}}();return function(){var y,D=N(x);if(P){var A=N(this).constructor;y=Reflect.construct(D,arguments,A)}else y=D.apply(this,arguments);return v(this,y)}}function v(x,P){if(P&&("object"===S(P)||"function"==typeof P))return P;if(void 0!==P)throw new TypeError("Derived constructors may only return object or undefined");return function T(x){if(void 0===x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}(x)}function N(x){return(N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(_){return _.__proto__||Object.getPrototypeOf(_)})(x)}O.default=function(x){f(_,x);var P=g(_);function _(){var D;return function b(x,P){if(!(x instanceof P))throw new TypeError("Cannot call a class as a function")}(this,_),(D=P.call(this)).captionData=null,D.label=null,D.defaultTrack=!1,D.kind=null,D.isFragmented=!1,D.isEmbedded=!1,D.isTTML=null,D}return function j(x,P,_){return P&&R(x.prototype,P),_&&R(x,_),Object.defineProperty(x,"prototype",{writable:!1}),x}(_)}(e.default)},"./src/streaming/vo/Thumbnail.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function S(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,j(v.key),v)}}function R(f,c,g){return c&&S(f.prototype,c),g&&S(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}function j(f){var c=function U(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=R(function f(){(function L(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,f),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null})},"./src/streaming/vo/ThumbnailTrackInfo.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function S(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,j(v.key),v)}}function R(f,c,g){return c&&S(f.prototype,c),g&&S(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}function j(f){var c=function U(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=R(function f(){(function L(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,f),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""})},"./src/streaming/vo/URIFragmentData.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function S(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,j(v.key),v)}}function R(f,c,g){return c&&S(f.prototype,c),g&&S(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}function j(f){var c=function U(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=R(function f(){(function L(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,f),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null})},"./src/streaming/vo/metrics/BufferLevel.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function S(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,j(v.key),v)}}function R(f,c,g){return c&&S(f.prototype,c),g&&S(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}function j(f){var c=function U(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=R(function f(){(function L(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,f),this.t=null,this.level=null})},"./src/streaming/vo/metrics/BufferState.js":function(Ve,O,r){"use strict";r.r(O);var e=r("./src/streaming/constants/MetricsConstants.js");function S(c){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(c)}function R(c,g){for(var v=0;v<g.length;v++){var T=g[v];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(c,U(T.key),T)}}function j(c,g,v){return g&&R(c.prototype,g),v&&R(c,v),Object.defineProperty(c,"prototype",{writable:!1}),c}function U(c){var g=function L(c,g){if("object"!==S(c)||null===c)return c;var v=c[Symbol.toPrimitive];if(void 0!==v){var T=v.call(c,g||"default");if("object"!==S(T))return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===g?String:Number)(c)}(c,"string");return"symbol"===S(g)?g:String(g)}O.default=j(function c(){(function b(c,g){if(!(c instanceof g))throw new TypeError("Cannot call a class as a function")})(this,c),this.target=null,this.state=e.default.BUFFER_EMPTY})},"./src/streaming/vo/metrics/DVRInfo.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function S(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,j(v.key),v)}}function R(f,c,g){return c&&S(f.prototype,c),g&&S(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}function j(f){var c=function U(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=R(function f(){(function L(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,f),this.time=null,this.range=null,this.manifestInfo=null})},"./src/streaming/vo/metrics/DroppedFrames.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function S(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,j(v.key),v)}}function R(f,c,g){return c&&S(f.prototype,c),g&&S(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}function j(f){var c=function U(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=R(function f(){(function L(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,f),this.time=null,this.droppedFrames=null})},"./src/streaming/vo/metrics/HTTPRequest.js":function(Ve,O,r){"use strict";function e(c){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(c)}function S(c,g){for(var v=0;v<g.length;v++){var T=g[v];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(c,j(T.key),T)}}function R(c,g,v){return g&&S(c.prototype,g),v&&S(c,v),Object.defineProperty(c,"prototype",{writable:!1}),c}function j(c){var g=function U(c,g){if("object"!==e(c)||null===c)return c;var v=c[Symbol.toPrimitive];if(void 0!==v){var T=v.call(c,g||"default");if("object"!==e(T))return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===g?String:Number)(c)}(c,"string");return"symbol"===e(g)?g:String(g)}function L(c,g){if(!(c instanceof g))throw new TypeError("Cannot call a class as a function")}r.r(O),r.d(O,"HTTPRequest",function(){return b}),r.d(O,"HTTPRequestTrace",function(){return f});var b=R(function c(){L(this,c),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null}),f=R(function c(){L(this,c),this.s=null,this.d=null,this.b=[]});b.GET="GET",b.HEAD="HEAD",b.MPD_TYPE="MPD",b.XLINK_EXPANSION_TYPE="XLinkExpansion",b.INIT_SEGMENT_TYPE="InitializationSegment",b.INDEX_SEGMENT_TYPE="IndexSegment",b.MEDIA_SEGMENT_TYPE="MediaSegment",b.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",b.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",b.DVB_REPORTING_TYPE="DVBReporting",b.LICENSE="license",b.CONTENT_STEERING_TYPE="ContentSteering",b.OTHER_TYPE="other"},"./src/streaming/vo/metrics/ManifestUpdate.js":function(Ve,O,r){"use strict";function e(g){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(v){return typeof v}:function(v){return v&&"function"==typeof Symbol&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(g)}function S(g,v){for(var T=0;T<v.length;T++){var k=v[T];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(g,j(k.key),k)}}function R(g,v,T){return v&&S(g.prototype,v),T&&S(g,T),Object.defineProperty(g,"prototype",{writable:!1}),g}function j(g){var v=function U(g,v){if("object"!==e(g)||null===g)return g;var T=g[Symbol.toPrimitive];if(void 0!==T){var k=T.call(g,v||"default");if("object"!==e(k))return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===v?String:Number)(g)}(g,"string");return"symbol"===e(v)?v:String(v)}function L(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}r.r(O),r.d(O,"ManifestUpdate",function(){return b}),r.d(O,"ManifestUpdateStreamInfo",function(){return f}),r.d(O,"ManifestUpdateRepresentationInfo",function(){return c});var b=R(function g(){L(this,g),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]}),f=R(function g(){L(this,g),this.id=null,this.index=null,this.start=null,this.duration=null}),c=R(function g(){L(this,g),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null})},"./src/streaming/vo/metrics/PlayList.js":function(Ve,O,r){"use strict";function e(c){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(c)}function S(c,g){for(var v=0;v<g.length;v++){var T=g[v];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(c,j(T.key),T)}}function R(c,g,v){return g&&S(c.prototype,g),v&&S(c,v),Object.defineProperty(c,"prototype",{writable:!1}),c}function j(c){var g=function U(c,g){if("object"!==e(c)||null===c)return c;var v=c[Symbol.toPrimitive];if(void 0!==v){var T=v.call(c,g||"default");if("object"!==e(T))return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===g?String:Number)(c)}(c,"string");return"symbol"===e(g)?g:String(g)}function L(c,g){if(!(c instanceof g))throw new TypeError("Cannot call a class as a function")}r.r(O),r.d(O,"PlayList",function(){return b}),r.d(O,"PlayListTrace",function(){return f});var b=R(function c(){L(this,c),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]});b.INITIAL_PLAYOUT_START_REASON="initial_playout",b.SEEK_START_REASON="seek",b.RESUME_FROM_PAUSE_START_REASON="resume",b.METRICS_COLLECTION_START_REASON="metrics_collection_start";var f=R(function c(){L(this,c),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null});f.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",f.REBUFFERING_REASON="rebuffering",f.USER_REQUEST_STOP_REASON="user_request",f.END_OF_PERIOD_STOP_REASON="end_of_period",f.END_OF_CONTENT_STOP_REASON="end_of_content",f.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",f.FAILURE_STOP_REASON="failure"},"./src/streaming/vo/metrics/RepresentationSwitch.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function S(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,j(v.key),v)}}function R(f,c,g){return c&&S(f.prototype,c),g&&S(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}function j(f){var c=function U(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=R(function f(){(function L(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,f),this.t=null,this.mt=null,this.to=null,this.lto=null})},"./src/streaming/vo/metrics/RequestsQueue.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function S(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,j(v.key),v)}}function R(f,c,g){return c&&S(f.prototype,c),g&&S(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}function j(f){var c=function U(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=R(function f(){(function L(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,f),this.loadingRequests=[],this.executedRequests=[]})},"./src/streaming/vo/metrics/SchedulingInfo.js":function(Ve,O,r){"use strict";function e(f){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function S(f,c){for(var g=0;g<c.length;g++){var v=c[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,j(v.key),v)}}function R(f,c,g){return c&&S(f.prototype,c),g&&S(f,g),Object.defineProperty(f,"prototype",{writable:!1}),f}function j(f){var c=function U(f,c){if("object"!==e(f)||null===f)return f;var g=f[Symbol.toPrimitive];if(void 0!==g){var v=g.call(f,c||"default");if("object"!==e(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"===e(c)?c:String(c)}r.r(O),O.default=R(function f(){(function L(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")})(this,f),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null})},0:function(Ve,O){},1:function(Ve,O){}}).default},7568:(Fn,Ve,O)=>{var r;!function(){"use strict";var e="object"==typeof window?window:{},S=!e.HI_BASE64_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;S&&(e=global);var T,k,R=!e.HI_BASE64_NO_COMMON_JS&&Fn.exports,j=O.amdO,U="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),L={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63,"-":62,_:63},f=function(_){var D,y,A,I,G=[],ee=0,de=_.length;"="===_.charAt(de-2)?de-=2:"="===_.charAt(de-1)&&(de-=1);for(var ue=0,Te=de>>2<<2;ue<Te;)D=L[_.charAt(ue++)],y=L[_.charAt(ue++)],A=L[_.charAt(ue++)],I=L[_.charAt(ue++)],G[ee++]=255&(D<<2|y>>>4),G[ee++]=255&(y<<4|A>>>2),G[ee++]=255&(A<<6|I);var q=de-Te;return 2===q?(D=L[_.charAt(ue++)],y=L[_.charAt(ue++)],G[ee++]=255&(D<<2|y>>>4)):3===q&&(D=L[_.charAt(ue++)],y=L[_.charAt(ue++)],A=L[_.charAt(ue++)],G[ee++]=255&(D<<2|y>>>4),G[ee++]=255&(y<<4|A>>>2)),G},c=function(_){for(var D,y,A,I="",G=_.length,ee=0,de=3*parseInt(G/3);ee<de;)D=_[ee++],y=_[ee++],A=_[ee++],I+=U[D>>>2]+U[63&(D<<4|y>>>4)]+U[63&(y<<2|A>>>6)]+U[63&A];var ue=G-de;return 1===ue?I+=U[(D=_[ee])>>>2]+U[D<<4&63]+"==":2===ue&&(D=_[ee++],I+=U[D>>>2]+U[63&(D<<4|(y=_[ee])>>>4)]+U[y<<2&63]+"="),I},g=e.btoa,v=e.atob;if(S){var N=O(3172).lW;g=function(_){return new N(_,"ascii").toString("base64")},c=T=function(_){return new N(_).toString("base64")},v=function(_){return new N(_,"base64").toString("ascii")},k=function(_){return new N(_,"base64").toString()}}else g?(T=function(_){for(var D="",y=0;y<_.length;y++){var A=_.charCodeAt(y);A<128?D+=String.fromCharCode(A):A<2048?D+=String.fromCharCode(192|A>>6)+String.fromCharCode(128|63&A):A<55296||A>=57344?D+=String.fromCharCode(224|A>>12)+String.fromCharCode(128|A>>6&63)+String.fromCharCode(128|63&A):(A=65536+((1023&A)<<10|1023&_.charCodeAt(++y)),D+=String.fromCharCode(240|A>>18)+String.fromCharCode(128|A>>12&63)+String.fromCharCode(128|A>>6&63)+String.fromCharCode(128|63&A))}return g(D)},k=function(_){var D=v(_.trim("=").replace(/-/g,"+").replace(/_/g,"/"));if(!/[^\x00-\x7F]/.test(D))return D;for(var ee,de,y="",A=0,I=D.length,G=0;A<I;)if((ee=D.charCodeAt(A++))<=127)y+=String.fromCharCode(ee);else{if(ee>191&&ee<=223)de=31&ee,G=1;else if(ee<=239)de=15&ee,G=2;else{if(!(ee<=247))throw"not a UTF-8 string";de=7&ee,G=3}for(var ue=0;ue<G;++ue){if((ee=D.charCodeAt(A++))<128||ee>191)throw"not a UTF-8 string";de<<=6,de+=63&ee}if(de>=55296&&de<=57343||de>1114111)throw"not a UTF-8 string";de<=65535?y+=String.fromCharCode(de):(de-=65536,y+=String.fromCharCode(55296+(de>>10)),y+=String.fromCharCode(56320+(1023&de)))}return y}):(g=function(_){for(var D,y,A,I="",G=_.length,ee=0,de=3*parseInt(G/3);ee<de;)D=_.charCodeAt(ee++),y=_.charCodeAt(ee++),A=_.charCodeAt(ee++),I+=U[D>>>2]+U[63&(D<<4|y>>>4)]+U[63&(y<<2|A>>>6)]+U[63&A];var ue=G-de;return 1===ue?(D=_.charCodeAt(ee),I+=U[D>>>2]+U[D<<4&63]+"=="):2===ue&&(D=_.charCodeAt(ee++),y=_.charCodeAt(ee),I+=U[D>>>2]+U[63&(D<<4|y>>>4)]+U[y<<2&63]+"="),I},T=function(_){for(var D,y,A,I="",G=function(_){for(var D=[],y=0;y<_.length;y++){var A=_.charCodeAt(y);A<128?D[D.length]=A:A<2048?(D[D.length]=192|A>>6,D[D.length]=128|63&A):A<55296||A>=57344?(D[D.length]=224|A>>12,D[D.length]=128|A>>6&63,D[D.length]=128|63&A):(A=65536+((1023&A)<<10|1023&_.charCodeAt(++y)),D[D.length]=240|A>>18,D[D.length]=128|A>>12&63,D[D.length]=128|A>>6&63,D[D.length]=128|63&A)}return D}(_),ee=G.length,de=0,ue=3*parseInt(ee/3);de<ue;)D=G[de++],y=G[de++],A=G[de++],I+=U[D>>>2]+U[63&(D<<4|y>>>4)]+U[63&(y<<2|A>>>6)]+U[63&A];var Te=ee-ue;return 1===Te?I+=U[(D=G[de])>>>2]+U[D<<4&63]+"==":2===Te&&(D=G[de++],I+=U[D>>>2]+U[63&(D<<4|(y=G[de])>>>4)]+U[y<<2&63]+"="),I},v=function(_){var D,y,A,I,G="",ee=_.length;"="===_.charAt(ee-2)?ee-=2:"="===_.charAt(ee-1)&&(ee-=1);for(var de=0,ue=ee>>2<<2;de<ue;)D=L[_.charAt(de++)],y=L[_.charAt(de++)],A=L[_.charAt(de++)],I=L[_.charAt(de++)],G+=String.fromCharCode(255&(D<<2|y>>>4))+String.fromCharCode(255&(y<<4|A>>>2))+String.fromCharCode(255&(A<<6|I));var Te=ee-ue;return 2===Te?(D=L[_.charAt(de++)],y=L[_.charAt(de++)],G+=String.fromCharCode(255&(D<<2|y>>>4))):3===Te&&(D=L[_.charAt(de++)],y=L[_.charAt(de++)],A=L[_.charAt(de++)],G+=String.fromCharCode(255&(D<<2|y>>>4))+String.fromCharCode(255&(y<<4|A>>>2))),G},k=function(_){for(var ee,de,D="",y=f(_),A=y.length,I=0,G=0;I<A;)if((ee=y[I++])<=127)D+=String.fromCharCode(ee);else{if(ee>191&&ee<=223)de=31&ee,G=1;else if(ee<=239)de=15&ee,G=2;else{if(!(ee<=247))throw"not a UTF-8 string";de=7&ee,G=3}for(var ue=0;ue<G;++ue){if((ee=y[I++])<128||ee>191)throw"not a UTF-8 string";de<<=6,de+=63&ee}if(de>=55296&&de<=57343||de>1114111)throw"not a UTF-8 string";de<=65535?D+=String.fromCharCode(de):(de-=65536,D+=String.fromCharCode(55296+(de>>10)),D+=String.fromCharCode(56320+(1023&de)))}return D});var x=function(_,D){return D?v(_):k(_)},P={encode:function(_,D){var y="string"!=typeof _;return y&&_.constructor===e.ArrayBuffer&&(_=new Uint8Array(_)),y?c(_):!D&&/[^\x00-\x7F]/.test(_)?T(_):g(_)},decode:x,atob:v,btoa:g};x.bytes=f,x.string=x,R?Fn.exports=P:(e.base64=P,j&&void 0!==(r=function(){return P}.call(P,O,P,Fn))&&(Fn.exports=r))}()},8461:(Fn,Ve)=>{Ve.read=function(O,r,e,S,R){var j,U,L=8*R-S-1,b=(1<<L)-1,f=b>>1,c=-7,g=e?R-1:0,v=e?-1:1,T=O[r+g];for(g+=v,j=T&(1<<-c)-1,T>>=-c,c+=L;c>0;j=256*j+O[r+g],g+=v,c-=8);for(U=j&(1<<-c)-1,j>>=-c,c+=S;c>0;U=256*U+O[r+g],g+=v,c-=8);if(0===j)j=1-f;else{if(j===b)return U?NaN:1/0*(T?-1:1);U+=Math.pow(2,S),j-=f}return(T?-1:1)*U*Math.pow(2,j-S)},Ve.write=function(O,r,e,S,R,j){var U,L,b,f=8*j-R-1,c=(1<<f)-1,g=c>>1,v=23===R?Math.pow(2,-24)-Math.pow(2,-77):0,T=S?0:j-1,k=S?1:-1,N=r<0||0===r&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(L=isNaN(r)?1:0,U=c):(U=Math.floor(Math.log(r)/Math.LN2),r*(b=Math.pow(2,-U))<1&&(U--,b*=2),(r+=U+g>=1?v/b:v*Math.pow(2,1-g))*b>=2&&(U++,b/=2),U+g>=c?(L=0,U=c):U+g>=1?(L=(r*b-1)*Math.pow(2,R),U+=g):(L=r*Math.pow(2,g-1)*Math.pow(2,R),U=0));R>=8;O[e+T]=255&L,T+=k,L/=256,R-=8);for(U=U<<R|L,f+=R;f>0;O[e+T]=255&U,T+=k,U/=256,f-=8);O[e+T-k]|=128*N}},1135:(Fn,Ve,O)=>{"use strict";O.d(Ve,{X:()=>e});var r=O(7579);class e extends r.x{constructor(R){super(),this._value=R}get value(){return this.getValue()}_subscribe(R){const j=super._subscribe(R);return!j.closed&&R.next(this._value),j}getValue(){const{hasError:R,thrownError:j,_value:U}=this;if(R)throw j;return this._throwIfClosed(),U}next(R){super.next(this._value=R)}}},8306:(Fn,Ve,O)=>{"use strict";O.d(Ve,{y:()=>c});var r=O(930),e=O(727),S=O(8822),R=O(4671);var L=O(2416),b=O(576),f=O(2806);let c=(()=>{class k{constructor(B){B&&(this._subscribe=B)}lift(B){const x=new k;return x.source=this,x.operator=B,x}subscribe(B,x,P){const _=function T(k){return k&&k instanceof r.Lv||function v(k){return k&&(0,b.m)(k.next)&&(0,b.m)(k.error)&&(0,b.m)(k.complete)}(k)&&(0,e.Nn)(k)}(B)?B:new r.Hp(B,x,P);return(0,f.x)(()=>{const{operator:D,source:y}=this;_.add(D?D.call(_,y):y?this._subscribe(_):this._trySubscribe(_))}),_}_trySubscribe(B){try{return this._subscribe(B)}catch(x){B.error(x)}}forEach(B,x){return new(x=g(x))((P,_)=>{const D=new r.Hp({next:y=>{try{B(y)}catch(A){_(A),D.unsubscribe()}},error:_,complete:P});this.subscribe(D)})}_subscribe(B){var x;return null===(x=this.source)||void 0===x?void 0:x.subscribe(B)}[S.L](){return this}pipe(...B){return function U(k){return 0===k.length?R.y:1===k.length?k[0]:function(B){return k.reduce((x,P)=>P(x),B)}}(B)(this)}toPromise(B){return new(B=g(B))((x,P)=>{let _;this.subscribe(D=>_=D,D=>P(D),()=>x(_))})}}return k.create=N=>new k(N),k})();function g(k){var N;return null!==(N=null!=k?k:L.v.Promise)&&void 0!==N?N:Promise}},7579:(Fn,Ve,O)=>{"use strict";O.d(Ve,{x:()=>L});var r=O(8306),e=O(727);const R=(0,O(3888).d)(f=>function(){f(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var j=O(8737),U=O(2806);let L=(()=>{class f extends r.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(g){const v=new b(this,this);return v.operator=g,v}_throwIfClosed(){if(this.closed)throw new R}next(g){(0,U.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const v of this.currentObservers)v.next(g)}})}error(g){(0,U.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=g;const{observers:v}=this;for(;v.length;)v.shift().error(g)}})}complete(){(0,U.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:g}=this;for(;g.length;)g.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var g;return(null===(g=this.observers)||void 0===g?void 0:g.length)>0}_trySubscribe(g){return this._throwIfClosed(),super._trySubscribe(g)}_subscribe(g){return this._throwIfClosed(),this._checkFinalizedStatuses(g),this._innerSubscribe(g)}_innerSubscribe(g){const{hasError:v,isStopped:T,observers:k}=this;return v||T?e.Lc:(this.currentObservers=null,k.push(g),new e.w0(()=>{this.currentObservers=null,(0,j.P)(k,g)}))}_checkFinalizedStatuses(g){const{hasError:v,thrownError:T,isStopped:k}=this;v?g.error(T):k&&g.complete()}asObservable(){const g=new r.y;return g.source=this,g}}return f.create=(c,g)=>new b(c,g),f})();class b extends L{constructor(c,g){super(),this.destination=c,this.source=g}next(c){var g,v;null===(v=null===(g=this.destination)||void 0===g?void 0:g.next)||void 0===v||v.call(g,c)}error(c){var g,v;null===(v=null===(g=this.destination)||void 0===g?void 0:g.error)||void 0===v||v.call(g,c)}complete(){var c,g;null===(g=null===(c=this.destination)||void 0===c?void 0:c.complete)||void 0===g||g.call(c)}_subscribe(c){var g,v;return null!==(v=null===(g=this.source)||void 0===g?void 0:g.subscribe(c))&&void 0!==v?v:e.Lc}}},930:(Fn,Ve,O)=>{"use strict";O.d(Ve,{Hp:()=>B,Lv:()=>v});var r=O(576),e=O(727),S=O(2416),R=O(7849),j=O(5032);const U=f("C",void 0,void 0);function f(y,A,I){return{kind:y,value:A,error:I}}var c=O(3410),g=O(2806);class v extends e.w0{constructor(A){super(),this.isStopped=!1,A?(this.destination=A,(0,e.Nn)(A)&&A.add(this)):this.destination=D}static create(A,I,G){return new B(A,I,G)}next(A){this.isStopped?_(function b(y){return f("N",y,void 0)}(A),this):this._next(A)}error(A){this.isStopped?_(function L(y){return f("E",void 0,y)}(A),this):(this.isStopped=!0,this._error(A))}complete(){this.isStopped?_(U,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(A){this.destination.next(A)}_error(A){try{this.destination.error(A)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const T=Function.prototype.bind;function k(y,A){return T.call(y,A)}class N{constructor(A){this.partialObserver=A}next(A){const{partialObserver:I}=this;if(I.next)try{I.next(A)}catch(G){x(G)}}error(A){const{partialObserver:I}=this;if(I.error)try{I.error(A)}catch(G){x(G)}else x(A)}complete(){const{partialObserver:A}=this;if(A.complete)try{A.complete()}catch(I){x(I)}}}class B extends v{constructor(A,I,G){let ee;if(super(),(0,r.m)(A)||!A)ee={next:null!=A?A:void 0,error:null!=I?I:void 0,complete:null!=G?G:void 0};else{let de;this&&S.v.useDeprecatedNextContext?(de=Object.create(A),de.unsubscribe=()=>this.unsubscribe(),ee={next:A.next&&k(A.next,de),error:A.error&&k(A.error,de),complete:A.complete&&k(A.complete,de)}):ee=A}this.destination=new N(ee)}}function x(y){S.v.useDeprecatedSynchronousErrorHandling?(0,g.O)(y):(0,R.h)(y)}function _(y,A){const{onStoppedNotification:I}=S.v;I&&c.z.setTimeout(()=>I(y,A))}const D={closed:!0,next:j.Z,error:function P(y){throw y},complete:j.Z}},727:(Fn,Ve,O)=>{"use strict";O.d(Ve,{Lc:()=>U,w0:()=>j,Nn:()=>L});var r=O(576);const S=(0,O(3888).d)(f=>function(g){f(this),this.message=g?`${g.length} errors occurred during unsubscription:\n${g.map((v,T)=>`${T+1}) ${v.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=g});var R=O(8737);class j{constructor(c){this.initialTeardown=c,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let c;if(!this.closed){this.closed=!0;const{_parentage:g}=this;if(g)if(this._parentage=null,Array.isArray(g))for(const k of g)k.remove(this);else g.remove(this);const{initialTeardown:v}=this;if((0,r.m)(v))try{v()}catch(k){c=k instanceof S?k.errors:[k]}const{_finalizers:T}=this;if(T){this._finalizers=null;for(const k of T)try{b(k)}catch(N){c=null!=c?c:[],N instanceof S?c=[...c,...N.errors]:c.push(N)}}if(c)throw new S(c)}}add(c){var g;if(c&&c!==this)if(this.closed)b(c);else{if(c instanceof j){if(c.closed||c._hasParent(this))return;c._addParent(this)}(this._finalizers=null!==(g=this._finalizers)&&void 0!==g?g:[]).push(c)}}_hasParent(c){const{_parentage:g}=this;return g===c||Array.isArray(g)&&g.includes(c)}_addParent(c){const{_parentage:g}=this;this._parentage=Array.isArray(g)?(g.push(c),g):g?[g,c]:c}_removeParent(c){const{_parentage:g}=this;g===c?this._parentage=null:Array.isArray(g)&&(0,R.P)(g,c)}remove(c){const{_finalizers:g}=this;g&&(0,R.P)(g,c),c instanceof j&&c._removeParent(this)}}j.EMPTY=(()=>{const f=new j;return f.closed=!0,f})();const U=j.EMPTY;function L(f){return f instanceof j||f&&"closed"in f&&(0,r.m)(f.remove)&&(0,r.m)(f.add)&&(0,r.m)(f.unsubscribe)}function b(f){(0,r.m)(f)?f():f.unsubscribe()}},2416:(Fn,Ve,O)=>{"use strict";O.d(Ve,{v:()=>r});const r={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:(Fn,Ve,O)=>{"use strict";O.d(Ve,{a:()=>c});var r=O(8306),e=O(4742),S=O(2076),R=O(4671),j=O(3268),U=O(3269),L=O(1810),b=O(5403),f=O(9672);function c(...T){const k=(0,U.yG)(T),N=(0,U.jO)(T),{args:B,keys:x}=(0,e.D)(T);if(0===B.length)return(0,S.D)([],k);const P=new r.y(function g(T,k,N=R.y){return B=>{v(k,()=>{const{length:x}=T,P=new Array(x);let _=x,D=x;for(let y=0;y<x;y++)v(k,()=>{const A=(0,S.D)(T[y],k);let I=!1;A.subscribe((0,b.x)(B,G=>{P[y]=G,I||(I=!0,D--),D||B.next(N(P.slice()))},()=>{--_||B.complete()}))},B)},B)}}(B,k,x?_=>(0,L.n)(x,_):R.y));return N?P.pipe((0,j.Z)(N)):P}function v(T,k,N){T?(0,f.f)(N,T,k):k()}},7272:(Fn,Ve,O)=>{"use strict";O.d(Ve,{z:()=>j});var r=O(8189),S=O(3269),R=O(2076);function j(...U){return function e(){return(0,r.J)(1)}()((0,R.D)(U,(0,S.yG)(U)))}},515:(Fn,Ve,O)=>{"use strict";O.d(Ve,{E:()=>e});const e=new(O(8306).y)(j=>j.complete())},2076:(Fn,Ve,O)=>{"use strict";O.d(Ve,{D:()=>G});var r=O(8421),e=O(9672),S=O(4482),R=O(5403);function j(ee,de=0){return(0,S.e)((ue,Te)=>{ue.subscribe((0,R.x)(Te,q=>(0,e.f)(Te,ee,()=>Te.next(q),de),()=>(0,e.f)(Te,ee,()=>Te.complete(),de),q=>(0,e.f)(Te,ee,()=>Te.error(q),de)))})}function U(ee,de=0){return(0,S.e)((ue,Te)=>{Te.add(ee.schedule(()=>ue.subscribe(Te),de))})}var f=O(8306),g=O(2202),v=O(576);function k(ee,de){if(!ee)throw new Error("Iterable cannot be null");return new f.y(ue=>{(0,e.f)(ue,de,()=>{const Te=ee[Symbol.asyncIterator]();(0,e.f)(ue,de,()=>{Te.next().then(q=>{q.done?ue.complete():ue.next(q.value)})},0,!0)})})}var N=O(3670),B=O(8239),x=O(1144),P=O(6495),_=O(2206),D=O(4532),y=O(3260);function G(ee,de){return de?function I(ee,de){if(null!=ee){if((0,N.c)(ee))return function L(ee,de){return(0,r.Xf)(ee).pipe(U(de),j(de))}(ee,de);if((0,x.z)(ee))return function c(ee,de){return new f.y(ue=>{let Te=0;return de.schedule(function(){Te===ee.length?ue.complete():(ue.next(ee[Te++]),ue.closed||this.schedule())})})}(ee,de);if((0,B.t)(ee))return function b(ee,de){return(0,r.Xf)(ee).pipe(U(de),j(de))}(ee,de);if((0,_.D)(ee))return k(ee,de);if((0,P.T)(ee))return function T(ee,de){return new f.y(ue=>{let Te;return(0,e.f)(ue,de,()=>{Te=ee[g.h](),(0,e.f)(ue,de,()=>{let q,se;try{({value:q,done:se}=Te.next())}catch(H){return void ue.error(H)}se?ue.complete():ue.next(q)},0,!0)}),()=>(0,v.m)(null==Te?void 0:Te.return)&&Te.return()})}(ee,de);if((0,y.L)(ee))return function A(ee,de){return k((0,y.Q)(ee),de)}(ee,de)}throw(0,D.z)(ee)}(ee,de):(0,r.Xf)(ee)}},8421:(Fn,Ve,O)=>{"use strict";O.d(Ve,{Xf:()=>T});var r=O(7582),e=O(1144),S=O(8239),R=O(8306),j=O(3670),U=O(2206),L=O(4532),b=O(6495),f=O(3260),c=O(576),g=O(7849),v=O(8822);function T(y){if(y instanceof R.y)return y;if(null!=y){if((0,j.c)(y))return function k(y){return new R.y(A=>{const I=y[v.L]();if((0,c.m)(I.subscribe))return I.subscribe(A);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(y);if((0,e.z)(y))return function N(y){return new R.y(A=>{for(let I=0;I<y.length&&!A.closed;I++)A.next(y[I]);A.complete()})}(y);if((0,S.t)(y))return function B(y){return new R.y(A=>{y.then(I=>{A.closed||(A.next(I),A.complete())},I=>A.error(I)).then(null,g.h)})}(y);if((0,U.D)(y))return P(y);if((0,b.T)(y))return function x(y){return new R.y(A=>{for(const I of y)if(A.next(I),A.closed)return;A.complete()})}(y);if((0,f.L)(y))return function _(y){return P((0,f.Q)(y))}(y)}throw(0,L.z)(y)}function P(y){return new R.y(A=>{(function D(y,A){var I,G,ee,de;return(0,r.mG)(this,void 0,void 0,function*(){try{for(I=(0,r.KL)(y);!(G=yield I.next()).done;)if(A.next(G.value),A.closed)return}catch(ue){ee={error:ue}}finally{try{G&&!G.done&&(de=I.return)&&(yield de.call(I))}finally{if(ee)throw ee.error}}A.complete()})})(y,A).catch(I=>A.error(I))})}},6451:(Fn,Ve,O)=>{"use strict";O.d(Ve,{T:()=>U});var r=O(8189),e=O(8421),S=O(515),R=O(3269),j=O(2076);function U(...L){const b=(0,R.yG)(L),f=(0,R._6)(L,1/0),c=L;return c.length?1===c.length?(0,e.Xf)(c[0]):(0,r.J)(f)((0,j.D)(c,b)):S.E}},9646:(Fn,Ve,O)=>{"use strict";O.d(Ve,{of:()=>S});var r=O(3269),e=O(2076);function S(...R){const j=(0,r.yG)(R);return(0,e.D)(R,j)}},5403:(Fn,Ve,O)=>{"use strict";O.d(Ve,{x:()=>e});var r=O(930);function e(R,j,U,L,b){return new S(R,j,U,L,b)}class S extends r.Lv{constructor(j,U,L,b,f,c){super(j),this.onFinalize=f,this.shouldUnsubscribe=c,this._next=U?function(g){try{U(g)}catch(v){j.error(v)}}:super._next,this._error=b?function(g){try{b(g)}catch(v){j.error(v)}finally{this.unsubscribe()}}:super._error,this._complete=L?function(){try{L()}catch(g){j.error(g)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var j;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:U}=this;super.unsubscribe(),!U&&(null===(j=this.onFinalize)||void 0===j||j.call(this))}}}},4351:(Fn,Ve,O)=>{"use strict";O.d(Ve,{b:()=>S});var r=O(5577),e=O(576);function S(R,j){return(0,e.m)(j)?(0,r.z)(R,j,1):(0,r.z)(R,1)}},9300:(Fn,Ve,O)=>{"use strict";O.d(Ve,{h:()=>S});var r=O(4482),e=O(5403);function S(R,j){return(0,r.e)((U,L)=>{let b=0;U.subscribe((0,e.x)(L,f=>R.call(j,f,b++)&&L.next(f)))})}},4004:(Fn,Ve,O)=>{"use strict";O.d(Ve,{U:()=>S});var r=O(4482),e=O(5403);function S(R,j){return(0,r.e)((U,L)=>{let b=0;U.subscribe((0,e.x)(L,f=>{L.next(R.call(j,f,b++))}))})}},8189:(Fn,Ve,O)=>{"use strict";O.d(Ve,{J:()=>S});var r=O(5577),e=O(4671);function S(R=1/0){return(0,r.z)(e.y,R)}},5577:(Fn,Ve,O)=>{"use strict";O.d(Ve,{z:()=>b});var r=O(4004),e=O(8421),S=O(4482),R=O(9672),j=O(5403),L=O(576);function b(f,c,g=1/0){return(0,L.m)(c)?b((v,T)=>(0,r.U)((k,N)=>c(v,k,T,N))((0,e.Xf)(f(v,T))),g):("number"==typeof c&&(g=c),(0,S.e)((v,T)=>function U(f,c,g,v,T,k,N,B){const x=[];let P=0,_=0,D=!1;const y=()=>{D&&!x.length&&!P&&c.complete()},A=G=>P<v?I(G):x.push(G),I=G=>{k&&c.next(G),P++;let ee=!1;(0,e.Xf)(g(G,_++)).subscribe((0,j.x)(c,de=>{null==T||T(de),k?A(de):c.next(de)},()=>{ee=!0},void 0,()=>{if(ee)try{for(P--;x.length&&P<v;){const de=x.shift();N?(0,R.f)(c,N,()=>I(de)):I(de)}y()}catch(de){c.error(de)}}))};return f.subscribe((0,j.x)(c,A,()=>{D=!0,y()})),()=>{null==B||B()}}(v,T,f,g)))}},8675:(Fn,Ve,O)=>{"use strict";O.d(Ve,{O:()=>R});var r=O(7272),e=O(3269),S=O(4482);function R(...j){const U=(0,e.yG)(j);return(0,S.e)((L,b)=>{(U?(0,r.z)(j,L,U):(0,r.z)(j,L)).subscribe(b)})}},3900:(Fn,Ve,O)=>{"use strict";O.d(Ve,{w:()=>R});var r=O(8421),e=O(4482),S=O(5403);function R(j,U){return(0,e.e)((L,b)=>{let f=null,c=0,g=!1;const v=()=>g&&!f&&b.complete();L.subscribe((0,S.x)(b,T=>{null==f||f.unsubscribe();let k=0;const N=c++;(0,r.Xf)(j(T,N)).subscribe(f=(0,S.x)(b,B=>b.next(U?U(T,B,N,k++):B),()=>{f=null,v()}))},()=>{g=!0,v()}))})}},5698:(Fn,Ve,O)=>{"use strict";O.d(Ve,{q:()=>R});var r=O(515),e=O(4482),S=O(5403);function R(j){return j<=0?()=>r.E:(0,e.e)((U,L)=>{let b=0;U.subscribe((0,S.x)(L,f=>{++b<=j&&(L.next(f),j<=b&&L.complete())}))})}},8505:(Fn,Ve,O)=>{"use strict";O.d(Ve,{b:()=>j});var r=O(576),e=O(4482),S=O(5403),R=O(4671);function j(U,L,b){const f=(0,r.m)(U)||L||b?{next:U,error:L,complete:b}:U;return f?(0,e.e)((c,g)=>{var v;null===(v=f.subscribe)||void 0===v||v.call(f);let T=!0;c.subscribe((0,S.x)(g,k=>{var N;null===(N=f.next)||void 0===N||N.call(f,k),g.next(k)},()=>{var k;T=!1,null===(k=f.complete)||void 0===k||k.call(f),g.complete()},k=>{var N;T=!1,null===(N=f.error)||void 0===N||N.call(f,k),g.error(k)},()=>{var k,N;T&&(null===(k=f.unsubscribe)||void 0===k||k.call(f)),null===(N=f.finalize)||void 0===N||N.call(f)}))}):R.y}},6063:(Fn,Ve,O)=>{"use strict";O.d(Ve,{l:()=>r});const r={now:()=>(r.delegate||Date).now(),delegate:void 0}},3410:(Fn,Ve,O)=>{"use strict";O.d(Ve,{z:()=>r});const r={setTimeout(e,S,...R){const{delegate:j}=r;return(null==j?void 0:j.setTimeout)?j.setTimeout(e,S,...R):setTimeout(e,S,...R)},clearTimeout(e){const{delegate:S}=r;return((null==S?void 0:S.clearTimeout)||clearTimeout)(e)},delegate:void 0}},2202:(Fn,Ve,O)=>{"use strict";O.d(Ve,{h:()=>e});const e=function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Fn,Ve,O)=>{"use strict";O.d(Ve,{L:()=>r});const r="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(Fn,Ve,O)=>{"use strict";O.d(Ve,{jO:()=>R,yG:()=>j,_6:()=>U});var r=O(576),e=O(3532);function S(L){return L[L.length-1]}function R(L){return(0,r.m)(S(L))?L.pop():void 0}function j(L){return(0,e.K)(S(L))?L.pop():void 0}function U(L,b){return"number"==typeof S(L)?L.pop():b}},4742:(Fn,Ve,O)=>{"use strict";O.d(Ve,{D:()=>j});const{isArray:r}=Array,{getPrototypeOf:e,prototype:S,keys:R}=Object;function j(L){if(1===L.length){const b=L[0];if(r(b))return{args:b,keys:null};if(function U(L){return L&&"object"==typeof L&&e(L)===S}(b)){const f=R(b);return{args:f.map(c=>b[c]),keys:f}}}return{args:L,keys:null}}},8737:(Fn,Ve,O)=>{"use strict";function r(e,S){if(e){const R=e.indexOf(S);0<=R&&e.splice(R,1)}}O.d(Ve,{P:()=>r})},3888:(Fn,Ve,O)=>{"use strict";function r(e){const R=e(j=>{Error.call(j),j.stack=(new Error).stack});return R.prototype=Object.create(Error.prototype),R.prototype.constructor=R,R}O.d(Ve,{d:()=>r})},1810:(Fn,Ve,O)=>{"use strict";function r(e,S){return e.reduce((R,j,U)=>(R[j]=S[U],R),{})}O.d(Ve,{n:()=>r})},2806:(Fn,Ve,O)=>{"use strict";O.d(Ve,{x:()=>S,O:()=>R});var r=O(2416);let e=null;function S(j){if(r.v.useDeprecatedSynchronousErrorHandling){const U=!e;if(U&&(e={errorThrown:!1,error:null}),j(),U){const{errorThrown:L,error:b}=e;if(e=null,L)throw b}}else j()}function R(j){r.v.useDeprecatedSynchronousErrorHandling&&e&&(e.errorThrown=!0,e.error=j)}},9672:(Fn,Ve,O)=>{"use strict";function r(e,S,R,j=0,U=!1){const L=S.schedule(function(){R(),U?e.add(this.schedule(null,j)):this.unsubscribe()},j);if(e.add(L),!U)return L}O.d(Ve,{f:()=>r})},4671:(Fn,Ve,O)=>{"use strict";function r(e){return e}O.d(Ve,{y:()=>r})},1144:(Fn,Ve,O)=>{"use strict";O.d(Ve,{z:()=>r});const r=e=>e&&"number"==typeof e.length&&"function"!=typeof e},2206:(Fn,Ve,O)=>{"use strict";O.d(Ve,{D:()=>e});var r=O(576);function e(S){return Symbol.asyncIterator&&(0,r.m)(null==S?void 0:S[Symbol.asyncIterator])}},576:(Fn,Ve,O)=>{"use strict";function r(e){return"function"==typeof e}O.d(Ve,{m:()=>r})},3670:(Fn,Ve,O)=>{"use strict";O.d(Ve,{c:()=>S});var r=O(8822),e=O(576);function S(R){return(0,e.m)(R[r.L])}},6495:(Fn,Ve,O)=>{"use strict";O.d(Ve,{T:()=>S});var r=O(2202),e=O(576);function S(R){return(0,e.m)(null==R?void 0:R[r.h])}},8239:(Fn,Ve,O)=>{"use strict";O.d(Ve,{t:()=>e});var r=O(576);function e(S){return(0,r.m)(null==S?void 0:S.then)}},3260:(Fn,Ve,O)=>{"use strict";O.d(Ve,{Q:()=>S,L:()=>R});var r=O(7582),e=O(576);function S(j){return(0,r.FC)(this,arguments,function*(){const L=j.getReader();try{for(;;){const{value:b,done:f}=yield(0,r.qq)(L.read());if(f)return yield(0,r.qq)(void 0);yield yield(0,r.qq)(b)}}finally{L.releaseLock()}})}function R(j){return(0,e.m)(null==j?void 0:j.getReader)}},3532:(Fn,Ve,O)=>{"use strict";O.d(Ve,{K:()=>e});var r=O(576);function e(S){return S&&(0,r.m)(S.schedule)}},4482:(Fn,Ve,O)=>{"use strict";O.d(Ve,{A:()=>e,e:()=>S});var r=O(576);function e(R){return(0,r.m)(null==R?void 0:R.lift)}function S(R){return j=>{if(e(j))return j.lift(function(U){try{return R(U,this)}catch(L){this.error(L)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Fn,Ve,O)=>{"use strict";O.d(Ve,{Z:()=>R});var r=O(4004);const{isArray:e}=Array;function R(j){return(0,r.U)(U=>function S(j,U){return e(U)?j(...U):j(U)}(j,U))}},5032:(Fn,Ve,O)=>{"use strict";function r(){}O.d(Ve,{Z:()=>r})},7849:(Fn,Ve,O)=>{"use strict";O.d(Ve,{h:()=>S});var r=O(2416),e=O(3410);function S(R){e.z.setTimeout(()=>{const{onUnhandledError:j}=r.v;if(!j)throw R;j(R)})}},4532:(Fn,Ve,O)=>{"use strict";function r(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(Ve,{z:()=>r})},1042:(Fn,Ve,O)=>{"use strict";O.d(Ve,{Z:()=>v});var r,e=new Uint8Array(16);function S(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(e)}const R=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,U=function j(T){return"string"==typeof T&&R.test(T)};for(var L=[],b=0;b<256;++b)L.push((b+256).toString(16).substr(1));const v=function g(T,k,N){var B=(T=T||{}).random||(T.rng||S)();if(B[6]=15&B[6]|64,B[8]=63&B[8]|128,k){N=N||0;for(var x=0;x<16;++x)k[N+x]=B[x];return k}return function f(T){var k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,N=(L[T[k+0]]+L[T[k+1]]+L[T[k+2]]+L[T[k+3]]+"-"+L[T[k+4]]+L[T[k+5]]+"-"+L[T[k+6]]+L[T[k+7]]+"-"+L[T[k+8]]+L[T[k+9]]+"-"+L[T[k+10]]+L[T[k+11]]+L[T[k+12]]+L[T[k+13]]+L[T[k+14]]+L[T[k+15]]).toLowerCase();if(!U(N))throw TypeError("Stringified UUID is invalid");return N}(B)}},9808:(Fn,Ve,O)=>{"use strict";O.d(Ve,{mr:()=>_,ez:()=>pi,K0:()=>L,Do:()=>y,V_:()=>c,Ye:()=>A,S$:()=>x,mk:()=>bn,sg:()=>yn,O5:()=>dr,tP:()=>ci,b0:()=>D,lw:()=>b,EM:()=>wi,JF:()=>Hr,NF:()=>_o,w_:()=>U,bD:()=>Vi,q:()=>S,Mx:()=>Jt,HT:()=>j});var r=O(4893);let e=null;function S(){return e}function j(je){e||(e=je)}class U{}const L=new r.OlP("DocumentToken");let b=(()=>{class je{historyGo(Ge){throw new Error("Not implemented")}}return je.\u0275fac=function(Ge){return new(Ge||je)},je.\u0275prov=r.Yz7({token:je,factory:function(){return function f(){return(0,r.LFG)(g)}()},providedIn:"platform"}),je})();const c=new r.OlP("Location Initialized");let g=(()=>{class je extends b{constructor(Ge){super(),this._doc=Ge,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return S().getBaseHref(this._doc)}onPopState(Ge){const dt=S().getGlobalEventTarget(this._doc,"window");return dt.addEventListener("popstate",Ge,!1),()=>dt.removeEventListener("popstate",Ge)}onHashChange(Ge){const dt=S().getGlobalEventTarget(this._doc,"window");return dt.addEventListener("hashchange",Ge,!1),()=>dt.removeEventListener("hashchange",Ge)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(Ge){this.location.pathname=Ge}pushState(Ge,dt,Ut){v()?this._history.pushState(Ge,dt,Ut):this.location.hash=Ut}replaceState(Ge,dt,Ut){v()?this._history.replaceState(Ge,dt,Ut):this.location.hash=Ut}forward(){this._history.forward()}back(){this._history.back()}historyGo(Ge=0){this._history.go(Ge)}getState(){return this._history.state}}return je.\u0275fac=function(Ge){return new(Ge||je)(r.LFG(L))},je.\u0275prov=r.Yz7({token:je,factory:function(){return function T(){return new g((0,r.LFG)(L))}()},providedIn:"platform"}),je})();function v(){return!!window.history.pushState}function k(je,lt){if(0==je.length)return lt;if(0==lt.length)return je;let Ge=0;return je.endsWith("/")&&Ge++,lt.startsWith("/")&&Ge++,2==Ge?je+lt.substring(1):1==Ge?je+lt:je+"/"+lt}function N(je){const lt=je.match(/#|\?|$/),Ge=lt&&lt.index||je.length;return je.slice(0,Ge-("/"===je[Ge-1]?1:0))+je.slice(Ge)}function B(je){return je&&"?"!==je[0]?"?"+je:je}let x=(()=>{class je{historyGo(Ge){throw new Error("Not implemented")}}return je.\u0275fac=function(Ge){return new(Ge||je)},je.\u0275prov=r.Yz7({token:je,factory:function(){return function P(je){const lt=(0,r.LFG)(L).location;return new D((0,r.LFG)(b),lt&&lt.origin||"")}()},providedIn:"root"}),je})();const _=new r.OlP("appBaseHref");let D=(()=>{class je extends x{constructor(Ge,dt){if(super(),this._platformLocation=Ge,this._removeListenerFns=[],null==dt&&(dt=this._platformLocation.getBaseHrefFromDOM()),null==dt)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=dt}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(Ge){this._removeListenerFns.push(this._platformLocation.onPopState(Ge),this._platformLocation.onHashChange(Ge))}getBaseHref(){return this._baseHref}prepareExternalUrl(Ge){return k(this._baseHref,Ge)}path(Ge=!1){const dt=this._platformLocation.pathname+B(this._platformLocation.search),Ut=this._platformLocation.hash;return Ut&&Ge?`${dt}${Ut}`:dt}pushState(Ge,dt,Ut,gn){const _n=this.prepareExternalUrl(Ut+B(gn));this._platformLocation.pushState(Ge,dt,_n)}replaceState(Ge,dt,Ut,gn){const _n=this.prepareExternalUrl(Ut+B(gn));this._platformLocation.replaceState(Ge,dt,_n)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(Ge=0){var dt,Ut;null===(Ut=(dt=this._platformLocation).historyGo)||void 0===Ut||Ut.call(dt,Ge)}}return je.\u0275fac=function(Ge){return new(Ge||je)(r.LFG(b),r.LFG(_,8))},je.\u0275prov=r.Yz7({token:je,factory:je.\u0275fac}),je})(),y=(()=>{class je extends x{constructor(Ge,dt){super(),this._platformLocation=Ge,this._baseHref="",this._removeListenerFns=[],null!=dt&&(this._baseHref=dt)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(Ge){this._removeListenerFns.push(this._platformLocation.onPopState(Ge),this._platformLocation.onHashChange(Ge))}getBaseHref(){return this._baseHref}path(Ge=!1){let dt=this._platformLocation.hash;return null==dt&&(dt="#"),dt.length>0?dt.substring(1):dt}prepareExternalUrl(Ge){const dt=k(this._baseHref,Ge);return dt.length>0?"#"+dt:dt}pushState(Ge,dt,Ut,gn){let _n=this.prepareExternalUrl(Ut+B(gn));0==_n.length&&(_n=this._platformLocation.pathname),this._platformLocation.pushState(Ge,dt,_n)}replaceState(Ge,dt,Ut,gn){let _n=this.prepareExternalUrl(Ut+B(gn));0==_n.length&&(_n=this._platformLocation.pathname),this._platformLocation.replaceState(Ge,dt,_n)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(Ge=0){var dt,Ut;null===(Ut=(dt=this._platformLocation).historyGo)||void 0===Ut||Ut.call(dt,Ge)}}return je.\u0275fac=function(Ge){return new(Ge||je)(r.LFG(b),r.LFG(_,8))},je.\u0275prov=r.Yz7({token:je,factory:je.\u0275fac}),je})(),A=(()=>{class je{constructor(Ge,dt){this._subject=new r.vpe,this._urlChangeListeners=[],this._platformStrategy=Ge;const Ut=this._platformStrategy.getBaseHref();this._platformLocation=dt,this._baseHref=N(ee(Ut)),this._platformStrategy.onPopState(gn=>{this._subject.emit({url:this.path(!0),pop:!0,state:gn.state,type:gn.type})})}path(Ge=!1){return this.normalize(this._platformStrategy.path(Ge))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(Ge,dt=""){return this.path()==this.normalize(Ge+B(dt))}normalize(Ge){return je.stripTrailingSlash(function G(je,lt){return je&&lt.startsWith(je)?lt.substring(je.length):lt}(this._baseHref,ee(Ge)))}prepareExternalUrl(Ge){return Ge&&"/"!==Ge[0]&&(Ge="/"+Ge),this._platformStrategy.prepareExternalUrl(Ge)}go(Ge,dt="",Ut=null){this._platformStrategy.pushState(Ut,"",Ge,dt),this._notifyUrlChangeListeners(this.prepareExternalUrl(Ge+B(dt)),Ut)}replaceState(Ge,dt="",Ut=null){this._platformStrategy.replaceState(Ut,"",Ge,dt),this._notifyUrlChangeListeners(this.prepareExternalUrl(Ge+B(dt)),Ut)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(Ge=0){var dt,Ut;null===(Ut=(dt=this._platformStrategy).historyGo)||void 0===Ut||Ut.call(dt,Ge)}onUrlChange(Ge){this._urlChangeListeners.push(Ge),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(dt=>{this._notifyUrlChangeListeners(dt.url,dt.state)}))}_notifyUrlChangeListeners(Ge="",dt){this._urlChangeListeners.forEach(Ut=>Ut(Ge,dt))}subscribe(Ge,dt,Ut){return this._subject.subscribe({next:Ge,error:dt,complete:Ut})}}return je.normalizeQueryParams=B,je.joinWithSlash=k,je.stripTrailingSlash=N,je.\u0275fac=function(Ge){return new(Ge||je)(r.LFG(x),r.LFG(b))},je.\u0275prov=r.Yz7({token:je,factory:function(){return function I(){return new A((0,r.LFG)(x),(0,r.LFG)(b))}()},providedIn:"root"}),je})();function ee(je){return je.replace(/\/index.html$/,"")}var Te=(()=>((Te=Te||{})[Te.Zero=0]="Zero",Te[Te.One=1]="One",Te[Te.Two=2]="Two",Te[Te.Few=3]="Few",Te[Te.Many=4]="Many",Te[Te.Other=5]="Other",Te))();const J=r.kL8;class wn{}let Ct=(()=>{class je extends wn{constructor(Ge){super(),this.locale=Ge}getPluralCategory(Ge,dt){switch(J(dt||this.locale)(Ge)){case Te.Zero:return"zero";case Te.One:return"one";case Te.Two:return"two";case Te.Few:return"few";case Te.Many:return"many";default:return"other"}}}return je.\u0275fac=function(Ge){return new(Ge||je)(r.LFG(r.soG))},je.\u0275prov=r.Yz7({token:je,factory:je.\u0275fac}),je})();function Jt(je,lt){lt=encodeURIComponent(lt);for(const Ge of je.split(";")){const dt=Ge.indexOf("="),[Ut,gn]=-1==dt?[Ge,""]:[Ge.slice(0,dt),Ge.slice(dt+1)];if(Ut.trim()===lt)return decodeURIComponent(gn)}return null}let bn=(()=>{class je{constructor(Ge,dt,Ut,gn){this._iterableDiffers=Ge,this._keyValueDiffers=dt,this._ngEl=Ut,this._renderer=gn,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(Ge){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof Ge?Ge.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(Ge){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof Ge?Ge.split(/\s+/):Ge,this._rawClass&&((0,r.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const Ge=this._iterableDiffer.diff(this._rawClass);Ge&&this._applyIterableChanges(Ge)}else if(this._keyValueDiffer){const Ge=this._keyValueDiffer.diff(this._rawClass);Ge&&this._applyKeyValueChanges(Ge)}}_applyKeyValueChanges(Ge){Ge.forEachAddedItem(dt=>this._toggleClass(dt.key,dt.currentValue)),Ge.forEachChangedItem(dt=>this._toggleClass(dt.key,dt.currentValue)),Ge.forEachRemovedItem(dt=>{dt.previousValue&&this._toggleClass(dt.key,!1)})}_applyIterableChanges(Ge){Ge.forEachAddedItem(dt=>{if("string"!=typeof dt.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,r.AaK)(dt.item)}`);this._toggleClass(dt.item,!0)}),Ge.forEachRemovedItem(dt=>this._toggleClass(dt.item,!1))}_applyClasses(Ge){Ge&&(Array.isArray(Ge)||Ge instanceof Set?Ge.forEach(dt=>this._toggleClass(dt,!0)):Object.keys(Ge).forEach(dt=>this._toggleClass(dt,!!Ge[dt])))}_removeClasses(Ge){Ge&&(Array.isArray(Ge)||Ge instanceof Set?Ge.forEach(dt=>this._toggleClass(dt,!1)):Object.keys(Ge).forEach(dt=>this._toggleClass(dt,!1)))}_toggleClass(Ge,dt){(Ge=Ge.trim())&&Ge.split(/\s+/g).forEach(Ut=>{dt?this._renderer.addClass(this._ngEl.nativeElement,Ut):this._renderer.removeClass(this._ngEl.nativeElement,Ut)})}}return je.\u0275fac=function(Ge){return new(Ge||je)(r.Y36(r.ZZ4),r.Y36(r.aQg),r.Y36(r.SBq),r.Y36(r.Qsj))},je.\u0275dir=r.lG2({type:je,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),je})();class Pt{constructor(lt,Ge,dt,Ut){this.$implicit=lt,this.ngForOf=Ge,this.index=dt,this.count=Ut}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let yn=(()=>{class je{constructor(Ge,dt,Ut){this._viewContainer=Ge,this._template=dt,this._differs=Ut,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(Ge){this._ngForOf=Ge,this._ngForOfDirty=!0}set ngForTrackBy(Ge){this._trackByFn=Ge}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(Ge){Ge&&(this._template=Ge)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const Ge=this._ngForOf;!this._differ&&Ge&&(this._differ=this._differs.find(Ge).create(this.ngForTrackBy))}if(this._differ){const Ge=this._differ.diff(this._ngForOf);Ge&&this._applyChanges(Ge)}}_applyChanges(Ge){const dt=this._viewContainer;Ge.forEachOperation((Ut,gn,_n)=>{if(null==Ut.previousIndex)dt.createEmbeddedView(this._template,new Pt(Ut.item,this._ngForOf,-1,-1),null===_n?void 0:_n);else if(null==_n)dt.remove(null===gn?void 0:gn);else if(null!==gn){const Qn=dt.get(gn);dt.move(Qn,_n),Nn(Qn,Ut)}});for(let Ut=0,gn=dt.length;Ut<gn;Ut++){const Qn=dt.get(Ut).context;Qn.index=Ut,Qn.count=gn,Qn.ngForOf=this._ngForOf}Ge.forEachIdentityChange(Ut=>{Nn(dt.get(Ut.currentIndex),Ut)})}static ngTemplateContextGuard(Ge,dt){return!0}}return je.\u0275fac=function(Ge){return new(Ge||je)(r.Y36(r.s_b),r.Y36(r.Rgc),r.Y36(r.ZZ4))},je.\u0275dir=r.lG2({type:je,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),je})();function Nn(je,lt){je.context.$implicit=lt.item}let dr=(()=>{class je{constructor(Ge,dt){this._viewContainer=Ge,this._context=new pr,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=dt}set ngIf(Ge){this._context.$implicit=this._context.ngIf=Ge,this._updateView()}set ngIfThen(Ge){Cr("ngIfThen",Ge),this._thenTemplateRef=Ge,this._thenViewRef=null,this._updateView()}set ngIfElse(Ge){Cr("ngIfElse",Ge),this._elseTemplateRef=Ge,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(Ge,dt){return!0}}return je.\u0275fac=function(Ge){return new(Ge||je)(r.Y36(r.s_b),r.Y36(r.Rgc))},je.\u0275dir=r.lG2({type:je,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),je})();class pr{constructor(){this.$implicit=null,this.ngIf=null}}function Cr(je,lt){if(lt&&!lt.createEmbeddedView)throw new Error(`${je} must be a TemplateRef, but received '${(0,r.AaK)(lt)}'.`)}let ci=(()=>{class je{constructor(Ge){this._viewContainerRef=Ge,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(Ge){if(Ge.ngTemplateOutlet){const dt=this._viewContainerRef;this._viewRef&&dt.remove(dt.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?dt.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&Ge.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return je.\u0275fac=function(Ge){return new(Ge||je)(r.Y36(r.s_b))},je.\u0275dir=r.lG2({type:je,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[r.TTD]}),je})(),pi=(()=>{class je{}return je.\u0275fac=function(Ge){return new(Ge||je)},je.\u0275mod=r.oAB({type:je}),je.\u0275inj=r.cJS({providers:[{provide:wn,useClass:Ct}]}),je})();const Vi="browser";function _o(je){return je===Vi}let wi=(()=>{class je{}return je.\u0275prov=(0,r.Yz7)({token:je,providedIn:"root",factory:()=>new Fi((0,r.LFG)(L),window)}),je})();class Fi{constructor(lt,Ge){this.document=lt,this.window=Ge,this.offset=()=>[0,0]}setOffset(lt){this.offset=Array.isArray(lt)?()=>lt:lt}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(lt){this.supportsScrolling()&&this.window.scrollTo(lt[0],lt[1])}scrollToAnchor(lt){if(!this.supportsScrolling())return;const Ge=function es(je,lt){const Ge=je.getElementById(lt)||je.getElementsByName(lt)[0];if(Ge)return Ge;if("function"==typeof je.createTreeWalker&&je.body&&(je.body.createShadowRoot||je.body.attachShadow)){const dt=je.createTreeWalker(je.body,NodeFilter.SHOW_ELEMENT);let Ut=dt.currentNode;for(;Ut;){const gn=Ut.shadowRoot;if(gn){const _n=gn.getElementById(lt)||gn.querySelector(`[name="${lt}"]`);if(_n)return _n}Ut=dt.nextNode()}}return null}(this.document,lt);Ge&&(this.scrollToElement(Ge),Ge.focus())}setHistoryScrollRestoration(lt){if(this.supportScrollRestoration()){const Ge=this.window.history;Ge&&Ge.scrollRestoration&&(Ge.scrollRestoration=lt)}}scrollToElement(lt){const Ge=lt.getBoundingClientRect(),dt=Ge.left+this.window.pageXOffset,Ut=Ge.top+this.window.pageYOffset,gn=this.offset();this.window.scrollTo(dt-gn[0],Ut-gn[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const lt=yo(this.window.history)||yo(Object.getPrototypeOf(this.window.history));return!(!lt||!lt.writable&&!lt.set)}catch(lt){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(lt){return!1}}}function yo(je){return Object.getOwnPropertyDescriptor(je,"scrollRestoration")}class Hr{}},520:(Fn,Ve,O)=>{"use strict";O.d(Ve,{eN:()=>ce,JF:()=>te,WM:()=>c});var r=O(9808),e=O(4893),S=O(9646),R=O(8306),j=O(4351),U=O(9300),L=O(4004);class b{}class f{}class c{constructor(oe){this.normalizedNames=new Map,this.lazyUpdate=null,oe?this.lazyInit="string"==typeof oe?()=>{this.headers=new Map,oe.split("\n").forEach(be=>{const Fe=be.indexOf(":");if(Fe>0){const We=be.slice(0,Fe),at=We.toLowerCase(),et=be.slice(Fe+1).trim();this.maybeSetNormalizedName(We,at),this.headers.has(at)?this.headers.get(at).push(et):this.headers.set(at,[et])}})}:()=>{this.headers=new Map,Object.keys(oe).forEach(be=>{let Fe=oe[be];const We=be.toLowerCase();"string"==typeof Fe&&(Fe=[Fe]),Fe.length>0&&(this.headers.set(We,Fe),this.maybeSetNormalizedName(be,We))})}:this.headers=new Map}has(oe){return this.init(),this.headers.has(oe.toLowerCase())}get(oe){this.init();const be=this.headers.get(oe.toLowerCase());return be&&be.length>0?be[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(oe){return this.init(),this.headers.get(oe.toLowerCase())||null}append(oe,be){return this.clone({name:oe,value:be,op:"a"})}set(oe,be){return this.clone({name:oe,value:be,op:"s"})}delete(oe,be){return this.clone({name:oe,value:be,op:"d"})}maybeSetNormalizedName(oe,be){this.normalizedNames.has(be)||this.normalizedNames.set(be,oe)}init(){this.lazyInit&&(this.lazyInit instanceof c?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(oe=>this.applyUpdate(oe)),this.lazyUpdate=null))}copyFrom(oe){oe.init(),Array.from(oe.headers.keys()).forEach(be=>{this.headers.set(be,oe.headers.get(be)),this.normalizedNames.set(be,oe.normalizedNames.get(be))})}clone(oe){const be=new c;return be.lazyInit=this.lazyInit&&this.lazyInit instanceof c?this.lazyInit:this,be.lazyUpdate=(this.lazyUpdate||[]).concat([oe]),be}applyUpdate(oe){const be=oe.name.toLowerCase();switch(oe.op){case"a":case"s":let Fe=oe.value;if("string"==typeof Fe&&(Fe=[Fe]),0===Fe.length)return;this.maybeSetNormalizedName(oe.name,be);const We=("a"===oe.op?this.headers.get(be):void 0)||[];We.push(...Fe),this.headers.set(be,We);break;case"d":const at=oe.value;if(at){let et=this.headers.get(be);if(!et)return;et=et.filter(ut=>-1===at.indexOf(ut)),0===et.length?(this.headers.delete(be),this.normalizedNames.delete(be)):this.headers.set(be,et)}else this.headers.delete(be),this.normalizedNames.delete(be)}}forEach(oe){this.init(),Array.from(this.normalizedNames.keys()).forEach(be=>oe(this.normalizedNames.get(be),this.headers.get(be)))}}class g{encodeKey(oe){return N(oe)}encodeValue(oe){return N(oe)}decodeKey(oe){return decodeURIComponent(oe)}decodeValue(oe){return decodeURIComponent(oe)}}const T=/%(\d[a-f0-9])/gi,k={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function N(W){return encodeURIComponent(W).replace(T,(oe,be)=>{var Fe;return null!==(Fe=k[be])&&void 0!==Fe?Fe:oe})}function B(W){return`${W}`}class x{constructor(oe={}){if(this.updates=null,this.cloneFrom=null,this.encoder=oe.encoder||new g,oe.fromString){if(oe.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function v(W,oe){const be=new Map;return W.length>0&&W.replace(/^\?/,"").split("&").forEach(We=>{const at=We.indexOf("="),[et,ut]=-1==at?[oe.decodeKey(We),""]:[oe.decodeKey(We.slice(0,at)),oe.decodeValue(We.slice(at+1))],Ot=be.get(et)||[];Ot.push(ut),be.set(et,Ot)}),be}(oe.fromString,this.encoder)}else oe.fromObject?(this.map=new Map,Object.keys(oe.fromObject).forEach(be=>{const Fe=oe.fromObject[be];this.map.set(be,Array.isArray(Fe)?Fe:[Fe])})):this.map=null}has(oe){return this.init(),this.map.has(oe)}get(oe){this.init();const be=this.map.get(oe);return be?be[0]:null}getAll(oe){return this.init(),this.map.get(oe)||null}keys(){return this.init(),Array.from(this.map.keys())}append(oe,be){return this.clone({param:oe,value:be,op:"a"})}appendAll(oe){const be=[];return Object.keys(oe).forEach(Fe=>{const We=oe[Fe];Array.isArray(We)?We.forEach(at=>{be.push({param:Fe,value:at,op:"a"})}):be.push({param:Fe,value:We,op:"a"})}),this.clone(be)}set(oe,be){return this.clone({param:oe,value:be,op:"s"})}delete(oe,be){return this.clone({param:oe,value:be,op:"d"})}toString(){return this.init(),this.keys().map(oe=>{const be=this.encoder.encodeKey(oe);return this.map.get(oe).map(Fe=>be+"="+this.encoder.encodeValue(Fe)).join("&")}).filter(oe=>""!==oe).join("&")}clone(oe){const be=new x({encoder:this.encoder});return be.cloneFrom=this.cloneFrom||this,be.updates=(this.updates||[]).concat(oe),be}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(oe=>this.map.set(oe,this.cloneFrom.map.get(oe))),this.updates.forEach(oe=>{switch(oe.op){case"a":case"s":const be=("a"===oe.op?this.map.get(oe.param):void 0)||[];be.push(B(oe.value)),this.map.set(oe.param,be);break;case"d":if(void 0===oe.value){this.map.delete(oe.param);break}{let Fe=this.map.get(oe.param)||[];const We=Fe.indexOf(B(oe.value));-1!==We&&Fe.splice(We,1),Fe.length>0?this.map.set(oe.param,Fe):this.map.delete(oe.param)}}}),this.cloneFrom=this.updates=null)}}class _{constructor(){this.map=new Map}set(oe,be){return this.map.set(oe,be),this}get(oe){return this.map.has(oe)||this.map.set(oe,oe.defaultValue()),this.map.get(oe)}delete(oe){return this.map.delete(oe),this}has(oe){return this.map.has(oe)}keys(){return this.map.keys()}}function y(W){return"undefined"!=typeof ArrayBuffer&&W instanceof ArrayBuffer}function A(W){return"undefined"!=typeof Blob&&W instanceof Blob}function I(W){return"undefined"!=typeof FormData&&W instanceof FormData}class ee{constructor(oe,be,Fe,We){let at;if(this.url=be,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=oe.toUpperCase(),function D(W){switch(W){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||We?(this.body=void 0!==Fe?Fe:null,at=We):at=Fe,at&&(this.reportProgress=!!at.reportProgress,this.withCredentials=!!at.withCredentials,at.responseType&&(this.responseType=at.responseType),at.headers&&(this.headers=at.headers),at.context&&(this.context=at.context),at.params&&(this.params=at.params)),this.headers||(this.headers=new c),this.context||(this.context=new _),this.params){const et=this.params.toString();if(0===et.length)this.urlWithParams=be;else{const ut=be.indexOf("?");this.urlWithParams=be+(-1===ut?"?":ut<be.length-1?"&":"")+et}}else this.params=new x,this.urlWithParams=be}serializeBody(){return null===this.body?null:y(this.body)||A(this.body)||I(this.body)||function G(W){return"undefined"!=typeof URLSearchParams&&W instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof x?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||I(this.body)?null:A(this.body)?this.body.type||null:y(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof x?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(oe={}){var be;const Fe=oe.method||this.method,We=oe.url||this.url,at=oe.responseType||this.responseType,et=void 0!==oe.body?oe.body:this.body,ut=void 0!==oe.withCredentials?oe.withCredentials:this.withCredentials,Ot=void 0!==oe.reportProgress?oe.reportProgress:this.reportProgress;let tt=oe.headers||this.headers,Et=oe.params||this.params;const Yt=null!==(be=oe.context)&&void 0!==be?be:this.context;return void 0!==oe.setHeaders&&(tt=Object.keys(oe.setHeaders).reduce((vt,At)=>vt.set(At,oe.setHeaders[At]),tt)),oe.setParams&&(Et=Object.keys(oe.setParams).reduce((vt,At)=>vt.set(At,oe.setParams[At]),Et)),new ee(Fe,We,et,{params:Et,headers:tt,context:Yt,reportProgress:Ot,responseType:at,withCredentials:ut})}}var de=(()=>((de=de||{})[de.Sent=0]="Sent",de[de.UploadProgress=1]="UploadProgress",de[de.ResponseHeader=2]="ResponseHeader",de[de.DownloadProgress=3]="DownloadProgress",de[de.Response=4]="Response",de[de.User=5]="User",de))();class ue{constructor(oe,be=200,Fe="OK"){this.headers=oe.headers||new c,this.status=void 0!==oe.status?oe.status:be,this.statusText=oe.statusText||Fe,this.url=oe.url||null,this.ok=this.status>=200&&this.status<300}}class Te extends ue{constructor(oe={}){super(oe),this.type=de.ResponseHeader}clone(oe={}){return new Te({headers:oe.headers||this.headers,status:void 0!==oe.status?oe.status:this.status,statusText:oe.statusText||this.statusText,url:oe.url||this.url||void 0})}}class q extends ue{constructor(oe={}){super(oe),this.type=de.Response,this.body=void 0!==oe.body?oe.body:null}clone(oe={}){return new q({body:void 0!==oe.body?oe.body:this.body,headers:oe.headers||this.headers,status:void 0!==oe.status?oe.status:this.status,statusText:oe.statusText||this.statusText,url:oe.url||this.url||void 0})}}class se extends ue{constructor(oe){super(oe,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${oe.url||"(unknown url)"}`:`Http failure response for ${oe.url||"(unknown url)"}: ${oe.status} ${oe.statusText}`,this.error=oe.error||null}}function H(W,oe){return{body:oe,headers:W.headers,context:W.context,observe:W.observe,params:W.params,reportProgress:W.reportProgress,responseType:W.responseType,withCredentials:W.withCredentials}}let ce=(()=>{class W{constructor(be){this.handler=be}request(be,Fe,We={}){let at;if(be instanceof ee)at=be;else{let Ot,tt;Ot=We.headers instanceof c?We.headers:new c(We.headers),We.params&&(tt=We.params instanceof x?We.params:new x({fromObject:We.params})),at=new ee(be,Fe,void 0!==We.body?We.body:null,{headers:Ot,context:We.context,params:tt,reportProgress:We.reportProgress,responseType:We.responseType||"json",withCredentials:We.withCredentials})}const et=(0,S.of)(at).pipe((0,j.b)(Ot=>this.handler.handle(Ot)));if(be instanceof ee||"events"===We.observe)return et;const ut=et.pipe((0,U.h)(Ot=>Ot instanceof q));switch(We.observe||"body"){case"body":switch(at.responseType){case"arraybuffer":return ut.pipe((0,L.U)(Ot=>{if(null!==Ot.body&&!(Ot.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Ot.body}));case"blob":return ut.pipe((0,L.U)(Ot=>{if(null!==Ot.body&&!(Ot.body instanceof Blob))throw new Error("Response is not a Blob.");return Ot.body}));case"text":return ut.pipe((0,L.U)(Ot=>{if(null!==Ot.body&&"string"!=typeof Ot.body)throw new Error("Response is not a string.");return Ot.body}));default:return ut.pipe((0,L.U)(Ot=>Ot.body))}case"response":return ut;default:throw new Error(`Unreachable: unhandled observe type ${We.observe}}`)}}delete(be,Fe={}){return this.request("DELETE",be,Fe)}get(be,Fe={}){return this.request("GET",be,Fe)}head(be,Fe={}){return this.request("HEAD",be,Fe)}jsonp(be,Fe){return this.request("JSONP",be,{params:(new x).append(Fe,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(be,Fe={}){return this.request("OPTIONS",be,Fe)}patch(be,Fe,We={}){return this.request("PATCH",be,H(We,Fe))}post(be,Fe,We={}){return this.request("POST",be,H(We,Fe))}put(be,Fe,We={}){return this.request("PUT",be,H(We,Fe))}}return W.\u0275fac=function(be){return new(be||W)(e.LFG(b))},W.\u0275prov=e.Yz7({token:W,factory:W.\u0275fac}),W})();class ne{constructor(oe,be){this.next=oe,this.interceptor=be}handle(oe){return this.interceptor.intercept(oe,this.next)}}const pe=new e.OlP("HTTP_INTERCEPTORS");let me=(()=>{class W{intercept(be,Fe){return Fe.handle(be)}}return W.\u0275fac=function(be){return new(be||W)},W.\u0275prov=e.Yz7({token:W,factory:W.\u0275fac}),W})();const ke=/^\)\]\}',?\n/;let qe=(()=>{class W{constructor(be){this.xhrFactory=be}handle(be){if("JSONP"===be.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new R.y(Fe=>{const We=this.xhrFactory.build();if(We.open(be.method,be.urlWithParams),be.withCredentials&&(We.withCredentials=!0),be.headers.forEach((At,Dt)=>We.setRequestHeader(At,Dt.join(","))),be.headers.has("Accept")||We.setRequestHeader("Accept","application/json, text/plain, */*"),!be.headers.has("Content-Type")){const At=be.detectContentTypeHeader();null!==At&&We.setRequestHeader("Content-Type",At)}if(be.responseType){const At=be.responseType.toLowerCase();We.responseType="json"!==At?At:"text"}const at=be.serializeBody();let et=null;const ut=()=>{if(null!==et)return et;const At=1223===We.status?204:We.status,Dt=We.statusText||"OK",$t=new c(We.getAllResponseHeaders()),Kt=function Be(W){return"responseURL"in W&&W.responseURL?W.responseURL:/^X-Request-URL:/m.test(W.getAllResponseHeaders())?W.getResponseHeader("X-Request-URL"):null}(We)||be.url;return et=new Te({headers:$t,status:At,statusText:Dt,url:Kt}),et},Ot=()=>{let{headers:At,status:Dt,statusText:$t,url:Kt}=ut(),Xt=null;204!==Dt&&(Xt=void 0===We.response?We.responseText:We.response),0===Dt&&(Dt=Xt?200:0);let ln=Dt>=200&&Dt<300;if("json"===be.responseType&&"string"==typeof Xt){const Bn=Xt;Xt=Xt.replace(ke,"");try{Xt=""!==Xt?JSON.parse(Xt):null}catch(Rn){Xt=Bn,ln&&(ln=!1,Xt={error:Rn,text:Xt})}}ln?(Fe.next(new q({body:Xt,headers:At,status:Dt,statusText:$t,url:Kt||void 0})),Fe.complete()):Fe.error(new se({error:Xt,headers:At,status:Dt,statusText:$t,url:Kt||void 0}))},tt=At=>{const{url:Dt}=ut(),$t=new se({error:At,status:We.status||0,statusText:We.statusText||"Unknown Error",url:Dt||void 0});Fe.error($t)};let Et=!1;const Yt=At=>{Et||(Fe.next(ut()),Et=!0);let Dt={type:de.DownloadProgress,loaded:At.loaded};At.lengthComputable&&(Dt.total=At.total),"text"===be.responseType&&!!We.responseText&&(Dt.partialText=We.responseText),Fe.next(Dt)},vt=At=>{let Dt={type:de.UploadProgress,loaded:At.loaded};At.lengthComputable&&(Dt.total=At.total),Fe.next(Dt)};return We.addEventListener("load",Ot),We.addEventListener("error",tt),We.addEventListener("timeout",tt),We.addEventListener("abort",tt),be.reportProgress&&(We.addEventListener("progress",Yt),null!==at&&We.upload&&We.upload.addEventListener("progress",vt)),We.send(at),Fe.next({type:de.Sent}),()=>{We.removeEventListener("error",tt),We.removeEventListener("abort",tt),We.removeEventListener("load",Ot),We.removeEventListener("timeout",tt),be.reportProgress&&(We.removeEventListener("progress",Yt),null!==at&&We.upload&&We.upload.removeEventListener("progress",vt)),We.readyState!==We.DONE&&We.abort()}})}}return W.\u0275fac=function(be){return new(be||W)(e.LFG(r.JF))},W.\u0275prov=e.Yz7({token:W,factory:W.\u0275fac}),W})();const He=new e.OlP("XSRF_COOKIE_NAME"),De=new e.OlP("XSRF_HEADER_NAME");class he{}let Y=(()=>{class W{constructor(be,Fe,We){this.doc=be,this.platform=Fe,this.cookieName=We,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const be=this.doc.cookie||"";return be!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,r.Mx)(be,this.cookieName),this.lastCookieString=be),this.lastToken}}return W.\u0275fac=function(be){return new(be||W)(e.LFG(r.K0),e.LFG(e.Lbi),e.LFG(He))},W.\u0275prov=e.Yz7({token:W,factory:W.\u0275fac}),W})(),J=(()=>{class W{constructor(be,Fe){this.tokenService=be,this.headerName=Fe}intercept(be,Fe){const We=be.url.toLowerCase();if("GET"===be.method||"HEAD"===be.method||We.startsWith("http://")||We.startsWith("https://"))return Fe.handle(be);const at=this.tokenService.getToken();return null!==at&&!be.headers.has(this.headerName)&&(be=be.clone({headers:be.headers.set(this.headerName,at)})),Fe.handle(be)}}return W.\u0275fac=function(be){return new(be||W)(e.LFG(he),e.LFG(De))},W.\u0275prov=e.Yz7({token:W,factory:W.\u0275fac}),W})(),Me=(()=>{class W{constructor(be,Fe){this.backend=be,this.injector=Fe,this.chain=null}handle(be){if(null===this.chain){const Fe=this.injector.get(pe,[]);this.chain=Fe.reduceRight((We,at)=>new ne(We,at),this.backend)}return this.chain.handle(be)}}return W.\u0275fac=function(be){return new(be||W)(e.LFG(f),e.LFG(e.zs3))},W.\u0275prov=e.Yz7({token:W,factory:W.\u0275fac}),W})(),z=(()=>{class W{static disable(){return{ngModule:W,providers:[{provide:J,useClass:me}]}}static withOptions(be={}){return{ngModule:W,providers:[be.cookieName?{provide:He,useValue:be.cookieName}:[],be.headerName?{provide:De,useValue:be.headerName}:[]]}}}return W.\u0275fac=function(be){return new(be||W)},W.\u0275mod=e.oAB({type:W}),W.\u0275inj=e.cJS({providers:[J,{provide:pe,useExisting:J,multi:!0},{provide:he,useClass:Y},{provide:He,useValue:"XSRF-TOKEN"},{provide:De,useValue:"X-XSRF-TOKEN"}]}),W})(),te=(()=>{class W{}return W.\u0275fac=function(be){return new(be||W)},W.\u0275mod=e.oAB({type:W}),W.\u0275inj=e.cJS({providers:[ce,{provide:b,useClass:Me},qe,{provide:f,useExisting:qe}],imports:[[z.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),W})()},4893:(Fn,Ve,O)=>{"use strict";O.d(Ve,{deG:()=>uc,tb:()=>Dy,AFp:()=>by,ip1:()=>nm,CZH:()=>pd,hGG:()=>oC,z2F:()=>Yf,sBO:()=>Lb,Sil:()=>im,_Vd:()=>Uf,EJc:()=>Py,SBq:()=>jf,qLn:()=>dl,vpe:()=>Ba,tBr:()=>kl,XFs:()=>Z,OlP:()=>Ii,zs3:()=>hs,ZZ4:()=>mg,aQg:()=>vg,soG:()=>gg,YKP:()=>R_,h0i:()=>fd,PXZ:()=>Ab,R0b:()=>Ss,FiY:()=>di,Lbi:()=>Sy,g9A:()=>Cy,Qsj:()=>fT,FYo:()=>I_,JOm:()=>Go,q3G:()=>ii,WD2:()=>fr,tp0:()=>nl,Rgc:()=>Kf,dDg:()=>Oy,GfV:()=>O_,s_b:()=>cg,ifc:()=>tt,eFA:()=>Ry,G48:()=>Nb,Gpc:()=>N,_c5:()=>Qb,VLi:()=>Db,c2e:()=>My,zSh:()=>Af,wAp:()=>Er,vHH:()=>_,EiD:()=>Pa,mCW:()=>Vl,qzn:()=>Xs,JVY:()=>zo,pB0:()=>xd,eBb:()=>Id,L6k:()=>sh,LAX:()=>Od,cg1:()=>wp,kL8:()=>Qv,yhl:()=>xu,dqk:()=>Dt,sIi:()=>ri,CqO:()=>sv,QGY:()=>Tp,F4k:()=>ov,RDi:()=>je,AaK:()=>v,z3N:()=>$o,qOj:()=>Zt,TTD:()=>pi,_Bn:()=>M_,xp6:()=>wr,uIk:()=>ki,Tol:()=>Pv,ekj:()=>Pp,Suo:()=>ey,Xpm:()=>Lt,lG2:()=>Gt,Yz7:()=>qe,cJS:()=>De,oAB:()=>rt,Yjl:()=>Qt,Y36:()=>Rf,_UZ:()=>tv,qZA:()=>Ep,TgZ:()=>yp,EpF:()=>iv,n5z:()=>Ja,Ikx:()=>xp,SDv:()=>C_,QtT:()=>S_,pQV:()=>Lp,LFG:()=>Ji,$8M:()=>qs,$Z:()=>ev,NdJ:()=>bp,CRH:()=>ty,oxw:()=>cv,ALo:()=>W_,xi3:()=>Y_,Hsn:()=>fv,F$t:()=>dv,Q6J:()=>vp,s9C:()=>Sp,MGl:()=>eg,hYB:()=>Dp,VKq:()=>k_,WLB:()=>B_,kEZ:()=>U_,iGM:()=>Q_,MAs:()=>Gm,Jf7:()=>Rc,CHM:()=>vn,oJD:()=>Nu,LSH:()=>Dc,Udp:()=>Mp,YNc:()=>Hm,W1O:()=>oy,_uU:()=>Nv,Oqu:()=>Ip,hij:()=>ng,AsE:()=>Op,Gf:()=>X_});var r=O(7579),e=O(727),S=O(8306),R=O(6451),j=O(8421),U=O(930),L=O(4482);function f(i,l,...d){if(!0===l)return void i();if(!1===l)return;const m=new U.Hp({next:()=>{m.unsubscribe(),i()}});return(0,j.Xf)(l(...d)).subscribe(m)}function c(i){for(let l in i)if(i[l]===c)return l;throw Error("Could not find renamed property on target object.")}function g(i,l){for(const d in l)l.hasOwnProperty(d)&&!i.hasOwnProperty(d)&&(i[d]=l[d])}function v(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(v).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const l=i.toString();if(null==l)return""+l;const d=l.indexOf("\n");return-1===d?l:l.substring(0,d)}function T(i,l){return null==i||""===i?null===l?"":l:null==l||""===l?i:i+" "+l}const k=c({__forward_ref__:c});function N(i){return i.__forward_ref__=N,i.toString=function(){return v(this())},i}function B(i){return x(i)?i():i}function x(i){return"function"==typeof i&&i.hasOwnProperty(k)&&i.__forward_ref__===N}class _ extends Error{constructor(l,d){super(function D(i,l){return`NG0${Math.abs(i)}${l?": "+l:""}`}(l,d)),this.code=l}}function y(i){return"string"==typeof i?i:null==i?"":String(i)}function A(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():y(i)}function de(i,l){const d=l?` in ${l}`:"";throw new _(-201,`No provider for ${A(i)} found${d}`)}function Re(i,l,d,m){throw new Error(`ASSERTION ERROR: ${i}`+(null==m?"":` [Expected=> ${d} ${m} ${l} <=Actual]`))}function qe(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function De(i){return{providers:i.providers||[],imports:i.imports||[]}}function he(i){return Y(i,re)||Y(i,te)}function Y(i,l){return i.hasOwnProperty(l)?i[l]:null}function ae(i){return i&&(i.hasOwnProperty(z)||i.hasOwnProperty(X))?i[z]:null}const re=c({\u0275prov:c}),z=c({\u0275inj:c}),te=c({ngInjectableDef:c}),X=c({ngInjectorDef:c});var Z=(()=>((Z=Z||{})[Z.Default=0]="Default",Z[Z.Host=1]="Host",Z[Z.Self=2]="Self",Z[Z.SkipSelf=4]="SkipSelf",Z[Z.Optional=8]="Optional",Z))();let W;function be(i){const l=W;return W=i,l}function Fe(i,l,d){const m=he(i);return m&&"root"==m.providedIn?void 0===m.value?m.value=m.factory():m.value:d&Z.Optional?null:void 0!==l?l:void de(v(i),"Injector")}function at(i){return{toString:i}.toString()}var et=(()=>((et=et||{})[et.OnPush=0]="OnPush",et[et.Default=1]="Default",et))(),tt=(()=>{return(i=tt||(tt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",tt;var i})();const Et="undefined"!=typeof globalThis&&globalThis,Yt="undefined"!=typeof window&&window,vt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Dt=Et||"undefined"!=typeof global&&global||Yt||vt,Xt={},ln=[],Bn=c({\u0275cmp:c}),Rn=c({\u0275dir:c}),jn=c({\u0275pipe:c}),Vn=c({\u0275mod:c}),ot=c({\u0275fac:c}),Qe=c({__NG_ELEMENT_ID__:c});let mt=0;function Lt(i){return at(()=>{const d={},m={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:d,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===et.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||ln,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||tt.Emulated,id:"c",styles:i.styles||ln,_:null,setInput:null,schemas:i.schemas||null,tView:null},M=i.directives,V=i.features,ie=i.pipes;return m.id+=mt++,m.inputs=yt(i.inputs,d),m.outputs=yt(i.outputs),V&&V.forEach(_e=>_e(m)),m.directiveDefs=M?()=>("function"==typeof M?M():M).map(zt):null,m.pipeDefs=ie?()=>("function"==typeof ie?ie():ie).map(_t):null,m})}function zt(i){return on(i)||function mn(i){return i[Rn]||null}(i)}function _t(i){return function Dn(i){return i[jn]||null}(i)}const pt={};function rt(i){return at(()=>{const l={type:i.type,bootstrap:i.bootstrap||ln,declarations:i.declarations||ln,imports:i.imports||ln,exports:i.exports||ln,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(pt[i.id]=i.type),l})}function yt(i,l){if(null==i)return Xt;const d={};for(const m in i)if(i.hasOwnProperty(m)){let M=i[m],V=M;Array.isArray(M)&&(V=M[1],M=M[0]),d[M]=m,l&&(l[M]=V)}return d}const Gt=Lt;function Qt(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function on(i){return i[Bn]||null}function Zn(i,l){const d=i[Vn]||null;if(!d&&!0===l)throw new Error(`Type ${v(i)} does not have '\u0275mod' property.`);return d}function oi(i){return Array.isArray(i)&&"object"==typeof i[1]}function si(i){return Array.isArray(i)&&!0===i[1]}function Zi(i){return 0!=(8&i.flags)}function ci(i){return 2==(2&i.flags)}function Si(i){return 1==(1&i.flags)}function Ar(i){return null!==i.template}function eo(i){return 0!=(512&i[2])}function Ur(i,l){return i.hasOwnProperty(ot)?i[ot]:null}class fr{constructor(l,d,m){this.previousValue=l,this.currentValue=d,this.firstChange=m}isFirstChange(){return this.firstChange}}function pi(){return Vi}function Vi(i){return i.type.prototype.ngOnChanges&&(i.setInput=to),so}function so(){const i=_o(this),l=null==i?void 0:i.current;if(l){const d=i.previous;if(d===Xt)i.previous=l;else for(let m in l)d[m]=l[m];i.current=null,this.ngOnChanges(l)}}function to(i,l,d,m){const M=_o(i)||function Ao(i,l){return i[kr]=l}(i,{previous:Xt,current:null}),V=M.current||(M.current={}),ie=M.previous,_e=this.declaredInputs[d],Ae=ie[_e];V[_e]=new fr(Ae&&Ae.currentValue,l,ie===Xt),i[m]=l}pi.ngInherit=!0;const kr="__ngSimpleChanges__";function _o(i){return i[kr]||null}let Hr;function je(i){Hr=i}function lt(){return void 0!==Hr?Hr:"undefined"!=typeof document?document:void 0}function dt(i){return!!i.listen}const Ut={createRenderer:(i,l)=>lt()};function _n(i){for(;Array.isArray(i);)i=i[0];return i}function Dr(i,l){return _n(l[i])}function yr(i,l){return _n(l[i.index])}function ai(i,l){return i.data[l]}function jr(i,l){return i[l]}function Gr(i,l){const d=l[i];return oi(d)?d:d[0]}function Oo(i){return 4==(4&i[2])}function Ri(i){return 128==(128&i[2])}function Ti(i,l){return null==l?null:i[l]}function xo(i){i[18]=0}function Ye(i,l){i[5]+=l;let d=i,m=i[3];for(;null!==m&&(1===l&&1===d[5]||-1===l&&0===d[5]);)m[5]+=l,d=m,m=m[3]}const Ne={lFrame:Ys(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function qr(){return Ne.bindingsEnabled}function Cn(){return Ne.lFrame.lView}function wt(){return Ne.lFrame.tView}function vn(i){return Ne.lFrame.contextLView=i,i[8]}function Hn(){let i=Gn();for(;null!==i&&64===i.type;)i=i.parent;return i}function Gn(){return Ne.lFrame.currentTNode}function Jr(){const i=Ne.lFrame,l=i.currentTNode;return i.isParent?l:l.parent}function Ni(i,l){const d=Ne.lFrame;d.currentTNode=i,d.isParent=l}function Mr(){return Ne.lFrame.isParent}function sa(){Ne.lFrame.isParent=!1}function Ks(){return Ne.isInCheckNoChangesMode}function aa(i){Ne.isInCheckNoChangesMode=i}function $i(){const i=Ne.lFrame;let l=i.bindingRootIndex;return-1===l&&(l=i.bindingRootIndex=i.tView.bindingStartIndex),l}function Uo(){return Ne.lFrame.bindingIndex}function ps(){return Ne.lFrame.bindingIndex++}function Hi(i){const l=Ne.lFrame,d=l.bindingIndex;return l.bindingIndex=l.bindingIndex+i,d}function ja(i){Ne.lFrame.inI18n=i}function _u(i,l){const d=Ne.lFrame;d.bindingIndex=d.bindingRootIndex=i,la(l)}function la(i){Ne.lFrame.currentDirectiveIndex=i}function Ha(){return Ne.lFrame.currentQueryIndex}function Ga(i){Ne.lFrame.currentQueryIndex=i}function Ka(i){const l=i[1];return 2===l.type?l.declTNode:1===l.type?i[6]:null}function Ws(i,l,d){if(d&Z.SkipSelf){let M=l,V=i;for(;!(M=M.parent,null!==M||d&Z.Host||(M=Ka(V),null===M||(V=V[15],10&M.type))););if(null===M)return!1;l=M,i=V}const m=Ne.lFrame=Tl();return m.currentTNode=l,m.lView=i,!0}function ts(i){const l=Tl(),d=i[1];Ne.lFrame=l,l.currentTNode=d.firstChild,l.lView=i,l.tView=d,l.contextLView=i,l.bindingIndex=d.bindingStartIndex,l.inI18n=!1}function Tl(){const i=Ne.lFrame,l=null===i?null:i.child;return null===l?Ys(i):l}function Ys(i){const l={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=l),l}function ua(){const i=Ne.lFrame;return Ne.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const zi=ua;function ns(){const i=ua();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Ai(){return Ne.lFrame.selectedIndex}function rs(i){Ne.lFrame.selectedIndex=i}function mi(){const i=Ne.lFrame;return ai(i.tView,i.selectedIndex)}function da(i,l){for(let d=l.directiveStart,m=l.directiveEnd;d<m;d++){const V=i.data[d].type.prototype,{ngAfterContentInit:ie,ngAfterContentChecked:_e,ngAfterViewInit:Ae,ngAfterViewChecked:ze,ngOnDestroy:nt}=V;ie&&(i.contentHooks||(i.contentHooks=[])).push(-d,ie),_e&&((i.contentHooks||(i.contentHooks=[])).push(d,_e),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(d,_e)),Ae&&(i.viewHooks||(i.viewHooks=[])).push(-d,Ae),ze&&((i.viewHooks||(i.viewHooks=[])).push(d,ze),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(d,ze)),null!=nt&&(i.destroyHooks||(i.destroyHooks=[])).push(d,nt)}}function ao(i,l,d){$a(i,l,3,d)}function $s(i,l,d,m){(3&i[2])===d&&$a(i,l,d,m)}function Za(i,l){let d=i[2];(3&d)===l&&(d&=2047,d+=1,i[2]=d)}function $a(i,l,d,m){const V=null!=m?m:-1,ie=l.length-1;let _e=0;for(let Ae=void 0!==m?65535&i[18]:0;Ae<ie;Ae++)if("number"==typeof l[Ae+1]){if(_e=l[Ae],null!=m&&_e>=m)break}else l[Ae]<0&&(i[18]+=65536),(_e<V||-1==V)&&(Cl(i,d,l,Ae),i[18]=(4294901760&i[18])+Ae+2),Ae++}function Cl(i,l,d,m){const M=d[m]<0,V=d[m+1],_e=i[M?-d[m]:d[m]];if(M){if(i[2]>>11<i[18]>>16&&(3&i[2])===l){i[2]+=2048;try{V.call(_e)}finally{}}}else try{V.call(_e)}finally{}}class fa{constructor(l,d,m){this.factory=l,this.resolving=!1,this.canSeeViewProviders=d,this.injectImpl=m}}function Ps(i,l,d){const m=dt(i);let M=0;for(;M<d.length;){const V=d[M];if("number"==typeof V){if(0!==V)break;M++;const ie=d[M++],_e=d[M++],Ae=d[M++];m?i.setAttribute(l,_e,Ae,ie):l.setAttributeNS(ie,_e,Ae)}else{const ie=V,_e=d[++M];ha(ie)?m&&i.setProperty(l,ie,_e):m?i.setAttribute(l,ie,_e):l.setAttribute(ie,_e),M++}}return M}function As(i){return 3===i||4===i||6===i}function ha(i){return 64===i.charCodeAt(0)}function ga(i,l){if(null!==l&&0!==l.length)if(null===i||0===i.length)i=l.slice();else{let d=-1;for(let m=0;m<l.length;m++){const M=l[m];"number"==typeof M?d=M:0===d||za(i,d,M,null,-1===d||2===d?l[++m]:null)}}return i}function za(i,l,d,m,M){let V=0,ie=i.length;if(-1===l)ie=-1;else for(;V<i.length;){const _e=i[V++];if("number"==typeof _e){if(_e===l){ie=-1;break}if(_e>l){ie=V-1;break}}}for(;V<i.length;){const _e=i[V];if("number"==typeof _e)break;if(_e===d){if(null===m)return void(null!==M&&(i[V+1]=M));if(m===i[V+1])return void(i[V+2]=M)}V++,null!==m&&V++,null!==M&&V++}-1!==ie&&(i.splice(ie,0,l),V=ie+1),i.splice(V++,0,d),null!==m&&i.splice(V++,0,m),null!==M&&i.splice(V++,0,M)}function To(i){return-1!==i}function Is(i){return 32767&i}function is(i,l){let d=function qa(i){return i>>16}(i),m=l;for(;d>0;)m=m[15],d--;return m}let pa=!0;function Ce(i){const l=pa;return pa=i,l}let Ze=0;function St(i,l){const d=dn(i,l);if(-1!==d)return d;const m=l[1];m.firstCreatePass&&(i.injectorIndex=l.length,Ft(m.data,i),Ft(l,null),Ft(m.blueprint,null));const M=qn(i,l),V=i.injectorIndex;if(To(M)){const ie=Is(M),_e=is(M,l),Ae=_e[1].data;for(let ze=0;ze<8;ze++)l[V+ze]=_e[ie+ze]|Ae[ie+ze]}return l[V+8]=M,V}function Ft(i,l){i.push(0,0,0,0,0,0,0,0,l)}function dn(i,l){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===l[i.injectorIndex+8]?-1:i.injectorIndex}function qn(i,l){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let d=0,m=null,M=l;for(;null!==M;){const V=M[1],ie=V.type;if(m=2===ie?V.declTNode:1===ie?M[6]:null,null===m)return-1;if(d++,M=M[15],-1!==m.injectorIndex)return m.injectorIndex|d<<16}return-1}function xr(i,l,d){!function ft(i,l,d){let m;"string"==typeof d?m=d.charCodeAt(0)||0:d.hasOwnProperty(Qe)&&(m=d[Qe]),null==m&&(m=d[Qe]=Ze++);const M=255&m;l.data[i+(M>>5)]|=1<<M}(i,l,d)}function Qr(i,l,d){if(d&Z.Optional)return i;de(l,"NodeInjector")}function Xr(i,l,d,m){if(d&Z.Optional&&void 0===m&&(m=null),0==(d&(Z.Self|Z.Host))){const M=i[9],V=be(void 0);try{return M?M.get(l,m,d&Z.Optional):Fe(l,m,d&Z.Optional)}finally{be(V)}}return Qr(m,l,d)}function bo(i,l,d,m=Z.Default,M){if(null!==i){const V=function Zo(i){if("string"==typeof i)return i.charCodeAt(0)||0;const l=i.hasOwnProperty(Qe)?i[Qe]:void 0;return"number"==typeof l?l>=0?255&l:os:l}(d);if("function"==typeof V){if(!Ws(l,i,m))return m&Z.Host?Qr(M,d,m):Xr(l,d,m,M);try{const ie=V(m);if(null!=ie||m&Z.Optional)return ie;de(d)}finally{zi()}}else if("number"==typeof V){let ie=null,_e=dn(i,l),Ae=-1,ze=m&Z.Host?l[16][6]:null;for((-1===_e||m&Z.SkipSelf)&&(Ae=-1===_e?qn(i,l):l[_e+8],-1!==Ae&&Gi(m,!1)?(ie=l[1],_e=Is(Ae),l=is(Ae,l)):_e=-1);-1!==_e;){const nt=l[1];if(_s(V,_e,nt.data)){const bt=ss(_e,l,d,ie,m,ze);if(bt!==Co)return bt}Ae=l[_e+8],-1!==Ae&&Gi(m,l[1].data[_e+8]===ze)&&_s(V,_e,l)?(ie=nt,_e=Is(Ae),l=is(Ae,l)):_e=-1}}}return Xr(l,d,m,M)}const Co={};function os(){return new zs(Hn(),Cn())}function ss(i,l,d,m,M,V){const ie=l[1],_e=ie.data[i+8],nt=Yo(_e,ie,d,null==m?ci(_e)&&pa:m!=ie&&0!=(3&_e.type),M&Z.Host&&V===_e);return null!==nt?io(l,ie,nt,_e):Co}function Yo(i,l,d,m,M){const V=i.providerIndexes,ie=l.data,_e=1048575&V,Ae=i.directiveStart,nt=V>>20,jt=M?_e+nt:i.directiveEnd;for(let en=m?_e:_e+nt;en<jt;en++){const Tn=ie[en];if(en<Ae&&d===Tn||en>=Ae&&Tn.type===d)return en}if(M){const en=ie[Ae];if(en&&Ar(en)&&en.type===d)return Ae}return null}function io(i,l,d,m){let M=i[d];const V=l.data;if(function vs(i){return i instanceof fa}(M)){const ie=M;ie.resolving&&function I(i,l){const d=l?`. Dependency path: ${l.join(" > ")} > ${i}`:"";throw new _(-200,`Circular dependency in DI detected for ${i}${d}`)}(A(V[d]));const _e=Ce(ie.canSeeViewProviders);ie.resolving=!0;const Ae=ie.injectImpl?be(ie.injectImpl):null;Ws(i,m,Z.Default);try{M=i[d]=ie.factory(void 0,V,i,m),l.firstCreatePass&&d>=m.directiveStart&&function ms(i,l,d){const{ngOnChanges:m,ngOnInit:M,ngDoCheck:V}=l.type.prototype;if(m){const ie=Vi(l);(d.preOrderHooks||(d.preOrderHooks=[])).push(i,ie),(d.preOrderCheckHooks||(d.preOrderCheckHooks=[])).push(i,ie)}M&&(d.preOrderHooks||(d.preOrderHooks=[])).push(0-i,M),V&&((d.preOrderHooks||(d.preOrderHooks=[])).push(i,V),(d.preOrderCheckHooks||(d.preOrderCheckHooks=[])).push(i,V))}(d,V[d],l)}finally{null!==Ae&&be(Ae),Ce(_e),ie.resolving=!1,zi()}}return M}function _s(i,l,d){return!!(d[l+(i>>5)]&1<<i)}function Gi(i,l){return!(i&Z.Self||i&Z.Host&&l)}class zs{constructor(l,d){this._tNode=l,this._lView=d}get(l,d,m){return bo(this._tNode,this._lView,l,m,d)}}function Ja(i){return at(()=>{const l=i.prototype.constructor,d=l[ot]||Pl(l),m=Object.prototype;let M=Object.getPrototypeOf(i.prototype).constructor;for(;M&&M!==m;){const V=M[ot]||Pl(M);if(V&&V!==d)return V;M=Object.getPrototypeOf(M)}return V=>new V})}function Pl(i){return x(i)?()=>{const l=Pl(B(i));return l&&l()}:Ur(i)}function qs(i){return function hr(i,l){if("class"===l)return i.classes;if("style"===l)return i.styles;const d=i.attrs;if(d){const m=d.length;let M=0;for(;M<m;){const V=d[M];if(As(V))break;if(0===V)M+=2;else if("number"==typeof V)for(M++;M<m&&"string"==typeof d[M];)M++;else{if(V===l)return d[M+1];M+=2}}}return null}(Hn(),i)}const as="__parameters__";function Os(i,l,d){return at(()=>{const m=function Al(i){return function(...d){if(i){const m=i(...d);for(const M in m)this[M]=m[M]}}}(l);function M(...V){if(this instanceof M)return m.apply(this,V),this;const ie=new M(...V);return _e.annotation=ie,_e;function _e(Ae,ze,nt){const bt=Ae.hasOwnProperty(as)?Ae[as]:Object.defineProperty(Ae,as,{value:[]})[as];for(;bt.length<=nt;)bt.push(null);return(bt[nt]=bt[nt]||[]).push(ie),Ae}}return d&&(M.prototype=Object.create(d.prototype)),M.prototype.ngMetadataName=i,M.annotationCls=M,M})}class Ii{constructor(l,d){this._desc=l,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof d?this.__NG_ELEMENT_ID__=d:void 0!==d&&(this.\u0275prov=qe({token:this,providedIn:d.providedIn||"root",factory:d.factory}))}toString(){return`InjectionToken ${this._desc}`}}const uc=new Ii("AnalyzeForEntryComponents");function yi(i,l){void 0===l&&(l=i);for(let d=0;d<i.length;d++){let m=i[d];Array.isArray(m)?(l===i&&(l=i.slice(0,d)),yi(m,l)):l!==i&&l.push(m)}return l}function wo(i,l){i.forEach(d=>Array.isArray(d)?wo(d,l):l(d))}function cc(i,l,d){l>=i.length?i.push(d):i.splice(l,0,d)}function xl(i,l){return l>=i.length-1?i.pop():i.splice(l,1)[0]}function ni(i,l){const d=[];for(let m=0;m<i;m++)d.push(l);return d}function So(i,l,d){let m=Js(i,l);return m>=0?i[1|m]=d:(m=~m,function dc(i,l,d,m){let M=i.length;if(M==l)i.push(d,m);else if(1===M)i.push(m,i[0]),i[0]=d;else{for(M--,i.push(i[M-1],i[M]);M>l;)i[M]=i[M-2],M--;i[l]=d,i[l+1]=m}}(i,m,l,d)),m}function fc(i,l){const d=Js(i,l);if(d>=0)return i[1|d]}function Js(i,l){return function hc(i,l,d){let m=0,M=i.length>>d;for(;M!==m;){const V=m+(M-m>>1),ie=i[V<<d];if(l===ie)return V<<d;ie>l?M=V:m=V+1}return~(M<<d)}(i,l,1)}const el={},Mu="__NG_DI_FLAG__",Nl="ngTempTokenPath",Qf=/\n/gm,us="__source",pc=c({provide:String,useValue:c});let Ll;function Td(i){const l=Ll;return Ll=i,l}function mc(i,l=Z.Default){if(void 0===Ll)throw new _(203,"");return null===Ll?Fe(i,void 0,l):Ll.get(i,l&Z.Optional?null:void 0,l)}function Ji(i,l=Z.Default){return(function oe(){return W}()||mc)(B(i),l)}function tl(i){const l=[];for(let d=0;d<i.length;d++){const m=B(i[d]);if(Array.isArray(m)){if(0===m.length)throw new _(900,"");let M,V=Z.Default;for(let ie=0;ie<m.length;ie++){const _e=m[ie],Ae=bd(_e);"number"==typeof Ae?-1===Ae?M=_e.token:V|=Ae:M=_e}l.push(Ji(M,V))}else l.push(Ji(m))}return l}function Fl(i,l){return i[Mu]=l,i.prototype[Mu]=l,i}function bd(i){return i[Mu]}const kl=Fl(Os("Inject",i=>({token:i})),-1),di=Fl(Os("Optional"),8),nl=Fl(Os("SkipSelf"),4);let Ea,Ca;function Ta(i){var l;return(null===(l=function Au(){if(void 0===Ea&&(Ea=null,Dt.trustedTypes))try{Ea=Dt.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch(i){}return Ea}())||void 0===l?void 0:l.createHTML(i))||i}function Sa(i){var l;return(null===(l=function cs(){if(void 0===Ca&&(Ca=null,Dt.trustedTypes))try{Ca=Dt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch(i){}return Ca}())||void 0===l?void 0:l.createHTML(i))||i}class Qs{constructor(l){this.changingThisBreaksApplicationSecurity=l}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class jl extends Qs{getTypeName(){return"HTML"}}class rh extends Qs{getTypeName(){return"Style"}}class ih extends Qs{getTypeName(){return"Script"}}class Ad extends Qs{getTypeName(){return"URL"}}class oh extends Qs{getTypeName(){return"ResourceURL"}}function $o(i){return i instanceof Qs?i.changingThisBreaksApplicationSecurity:i}function Xs(i,l){const d=xu(i);if(null!=d&&d!==l){if("ResourceURL"===d&&"URL"===l)return!0;throw new Error(`Required a safe ${l}, got a ${d} (see https://g.co/ng/security#xss)`)}return d===l}function xu(i){return i instanceof Qs&&i.getTypeName()||null}function zo(i){return new jl(i)}function sh(i){return new rh(i)}function Id(i){return new ih(i)}function Od(i){return new Ad(i)}function xd(i){return new oh(i)}function wd(i){const l=new ah(i);return function Nd(){try{return!!(new window.DOMParser).parseFromString(Ta(""),"text/html")}catch(i){return!1}}()?new Rd(l):l}class Rd{constructor(l){this.inertDocumentHelper=l}getInertBodyElement(l){l="<body><remove></remove>"+l;try{const d=(new window.DOMParser).parseFromString(Ta(l),"text/html").body;return null===d?this.inertDocumentHelper.getInertBodyElement(l):(d.removeChild(d.firstChild),d)}catch(d){return null}}}class ah{constructor(l){if(this.defaultDoc=l,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const d=this.inertDocument.createElement("html");this.inertDocument.appendChild(d);const m=this.inertDocument.createElement("body");d.appendChild(m)}}getInertBodyElement(l){const d=this.inertDocument.createElement("template");if("content"in d)return d.innerHTML=Ta(l),d;const m=this.inertDocument.createElement("body");return m.innerHTML=Ta(l),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(m),m}stripCustomNsAttrs(l){const d=l.attributes;for(let M=d.length-1;0<M;M--){const ie=d.item(M).name;("xmlns:ns1"===ie||0===ie.indexOf("ns1:"))&&l.removeAttribute(ie)}let m=l.firstChild;for(;m;)m.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(m),m=m.nextSibling}}const Ls=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Fd=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Vl(i){return(i=String(i)).match(Ls)||i.match(Fd)?i:"unsafe:"+i}function il(i){return(i=String(i)).split(",").map(l=>Vl(l.trim())).join(", ")}function Vo(i){const l={};for(const d of i.split(","))l[d]=!0;return l}function uo(...i){const l={};for(const d of i)for(const m in d)d.hasOwnProperty(m)&&(l[m]=!0);return l}const vi=Vo("area,br,col,hr,img,wbr"),ol=Vo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),wu=Vo("rp,rt"),sl=uo(vi,uo(ol,Vo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),uo(wu,Vo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),uo(wu,ol)),Gl=Vo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ea=Vo("srcset"),Sc=uo(Gl,ea,Vo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Vo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Ud=Vo("script,style,template");class Da{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(l){let d=l.firstChild,m=!0;for(;d;)if(d.nodeType===Node.ELEMENT_NODE?m=this.startElement(d):d.nodeType===Node.TEXT_NODE?this.chars(d.nodeValue):this.sanitizedSomething=!0,m&&d.firstChild)d=d.firstChild;else for(;d;){d.nodeType===Node.ELEMENT_NODE&&this.endElement(d);let M=this.checkClobberedElement(d,d.nextSibling);if(M){d=M;break}d=this.checkClobberedElement(d,d.parentNode)}return this.buf.join("")}startElement(l){const d=l.nodeName.toLowerCase();if(!sl.hasOwnProperty(d))return this.sanitizedSomething=!0,!Ud.hasOwnProperty(d);this.buf.push("<"),this.buf.push(d);const m=l.attributes;for(let M=0;M<m.length;M++){const V=m.item(M),ie=V.name,_e=ie.toLowerCase();if(!Sc.hasOwnProperty(_e)){this.sanitizedSomething=!0;continue}let Ae=V.value;Gl[_e]&&(Ae=Vl(Ae)),ea[_e]&&(Ae=il(Ae)),this.buf.push(" ",ie,'="',Es(Ae),'"')}return this.buf.push(">"),!0}endElement(l){const d=l.nodeName.toLowerCase();sl.hasOwnProperty(d)&&!vi.hasOwnProperty(d)&&(this.buf.push("</"),this.buf.push(d),this.buf.push(">"))}chars(l){this.buf.push(Es(l))}checkClobberedElement(l,d){if(d&&(l.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${l.outerHTML}`);return d}}const jd=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ma=/([^\#-~ |!])/g;function Es(i){return i.replace(/&/g,"&amp;").replace(jd,function(l){return"&#"+(1024*(l.charCodeAt(0)-55296)+(l.charCodeAt(1)-56320)+65536)+";"}).replace(Ma,function(l){return"&#"+l.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Fs;function Pa(i,l){let d=null;try{Fs=Fs||wd(i);let m=l?String(l):"";d=Fs.getInertBodyElement(m);let M=5,V=m;do{if(0===M)throw new Error("Failed to sanitize html because the input is unstable");M--,m=V,V=d.innerHTML,d=Fs.getInertBodyElement(m)}while(m!==V);return Ta((new Da).sanitizeChildren(Kl(d)||d))}finally{if(d){const m=Kl(d)||d;for(;m.firstChild;)m.removeChild(m.firstChild)}}}function Kl(i){return"content"in i&&function Wl(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var ii=(()=>((ii=ii||{})[ii.NONE=0]="NONE",ii[ii.HTML=1]="HTML",ii[ii.STYLE=2]="STYLE",ii[ii.SCRIPT=3]="SCRIPT",ii[ii.URL=4]="URL",ii[ii.RESOURCE_URL=5]="RESOURCE_URL",ii))();function Nu(i){const l=al();return l?Sa(l.sanitize(ii.HTML,i)||""):Xs(i,"HTML")?Sa($o(i)):Pa(lt(),y(i))}function Dc(i){const l=al();return l?l.sanitize(ii.URL,i)||"":Xs(i,"URL")?$o(i):Vl(y(i))}function al(){const i=Cn();return i&&i[12]}const Yd="__ngContext__";function Qi(i,l){i[Yd]=l}function Yl(i){const l=function ll(i){return i[Yd]||null}(i);return l?Array.isArray(l)?l:l.lView:null}function Ts(i){return i.ngOriginalError}function Ic(i,...l){i.error(...l)}class dl{constructor(){this._console=console}handleError(l){const d=this._findOriginalError(l),m=function $d(i){return i&&i.ngErrorLogger||Ic}(l);m(this._console,"ERROR",l),d&&m(this._console,"ORIGINAL ERROR",d)}_findOriginalError(l){let d=l&&Ts(l);for(;d&&Ts(d);)d=Ts(d);return d||null}}const fl=/^>|^->|<!--|-->|--!>|<!-$/g,zd=/(<|>)/;const Ql=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Dt))();function Rc(i){return i.ownerDocument.defaultView}function Ho(i){return i instanceof Function?i():i}var Go=(()=>((Go=Go||{})[Go.Important=1]="Important",Go[Go.DashCase=2]="DashCase",Go))();let gl;function Xl(i,l){return gl(i,l)}function Oa(i){const l=i[3];return si(l)?l[3]:l}function Hu(i){return Bc(i[13])}function Gu(i){return Bc(i[4])}function Bc(i){for(;null!==i&&!si(i);)i=i[4];return i}function Us(i,l,d,m,M){if(null!=m){let V,ie=!1;si(m)?V=m:oi(m)&&(ie=!0,m=m[0]);const _e=_n(m);0===i&&null!==d?null==M?qd(l,d,_e):xa(l,d,_e,M||null,!0):1===i&&null!==d?xa(l,d,_e,M||null,!0):2===i?nu(l,_e,ie):3===i&&l.destroyNode(_e),null!=V&&function yh(i,l,d,m,M){const V=d[7];V!==_n(d)&&Us(l,i,m,V,M);for(let _e=10;_e<d.length;_e++){const Ae=d[_e];iu(Ae[1],Ae,i,l,m,V)}}(l,i,V,d,M)}}function jc(i,l){return dt(i)?i.createText(l):i.createTextNode(l)}function tu(i,l,d){dt(i)?i.setValue(l,d):l.textContent=d}function fh(i,l){return i.createComment(function xc(i){return i.replace(fl,l=>l.replace(zd,"\u200b$1\u200b"))}(l))}function Ro(i,l,d){if(dt(i))return i.createElement(l,d);{const m=null!==d?function Io(i){const l=i.toLowerCase();return"svg"===l?"http://www.w3.org/2000/svg":"math"===l?"http://www.w3.org/1998/MathML/":null}(d):null;return null===m?i.createElement(l):i.createElementNS(m,l)}}function Gc(i,l){const d=i[9],m=d.indexOf(l),M=l[3];1024&l[2]&&(l[2]&=-1025,Ye(M,-1)),d.splice(m,1)}function Ku(i,l){if(i.length<=10)return;const d=10+l,m=i[d];if(m){const M=m[17];null!==M&&M!==i&&Gc(M,m),l>0&&(i[d-1][4]=m[4]);const V=xl(i,10+l);!function hh(i,l){iu(i,l,l[11],2,null,null),l[0]=null,l[6]=null}(m[1],m);const ie=V[19];null!==ie&&ie.detachView(V[1]),m[3]=null,m[4]=null,m[2]&=-129}return m}function Wu(i,l){if(!(256&l[2])){const d=l[11];dt(d)&&d.destroyNode&&iu(i,l,d,3,null,null),function ta(i){let l=i[13];if(!l)return Yu(i[1],i);for(;l;){let d=null;if(oi(l))d=l[13];else{const m=l[10];m&&(d=m)}if(!d){for(;l&&!l[4]&&l!==i;)oi(l)&&Yu(l[1],l),l=l[3];null===l&&(l=i),oi(l)&&Yu(l[1],l),d=l&&l[4]}l=d}}(l)}}function Yu(i,l){if(!(256&l[2])){l[2]&=-129,l[2]|=256,function mh(i,l){let d;if(null!=i&&null!=(d=i.destroyHooks))for(let m=0;m<d.length;m+=2){const M=l[d[m]];if(!(M instanceof fa)){const V=d[m+1];if(Array.isArray(V))for(let ie=0;ie<V.length;ie+=2){const _e=M[V[ie]],Ae=V[ie+1];try{Ae.call(_e)}finally{}}else try{V.call(M)}finally{}}}}(i,l),function ph(i,l){const d=i.cleanup,m=l[7];let M=-1;if(null!==d)for(let V=0;V<d.length-1;V+=2)if("string"==typeof d[V]){const ie=d[V+1],_e="function"==typeof ie?ie(l):_n(l[ie]),Ae=m[M=d[V+2]],ze=d[V+3];"boolean"==typeof ze?_e.removeEventListener(d[V],Ae,ze):ze>=0?m[M=ze]():m[M=-ze].unsubscribe(),V+=2}else{const ie=m[M=d[V+1]];d[V].call(ie)}if(null!==m){for(let V=M+1;V<m.length;V++)m[V]();l[7]=null}}(i,l),1===l[1].type&&dt(l[11])&&l[11].destroy();const d=l[17];if(null!==d&&si(l[3])){d!==l[3]&&Gc(d,l);const m=l[19];null!==m&&m.detachView(i)}}}function Kc(i,l,d){return Wc(i,l.parent,d)}function Wc(i,l,d){let m=l;for(;null!==m&&40&m.type;)m=(l=m).parent;if(null===m)return d[0];if(2&m.flags){const M=i.data[m.directiveStart].encapsulation;if(M===tt.None||M===tt.Emulated)return null}return yr(m,d)}function xa(i,l,d,m,M){dt(i)?i.insertBefore(l,d,m,M):l.insertBefore(d,m,M)}function qd(i,l,d){dt(i)?i.appendChild(l,d):l.appendChild(d)}function Yc(i,l,d,m,M){null!==m?xa(i,l,d,m,M):qd(i,l,d)}function Zu(i,l){return dt(i)?i.parentNode(l):l.parentNode}function Jd(i,l,d){return Xd(i,l,d)}function Qd(i,l,d){return 40&i.type?yr(i,d):null}let $c,Xd=Qd;function $u(i,l){Xd=i,$c=l}function pl(i,l,d,m){const M=Kc(i,m,l),V=l[11],_e=Jd(m.parent||l[6],m,l);if(null!=M)if(Array.isArray(d))for(let Ae=0;Ae<d.length;Ae++)Yc(V,M,d[Ae],_e,!1);else Yc(V,M,d,_e,!1);void 0!==$c&&$c(V,m,l,d,M)}function bs(i,l){if(null!==l){const d=l.type;if(3&d)return yr(l,i);if(4&d)return zc(-1,i[l.index]);if(8&d){const m=l.child;if(null!==m)return bs(i,m);{const M=i[l.index];return si(M)?zc(-1,M):_n(M)}}if(32&d)return Xl(l,i)()||_n(i[l.index]);{const m=ef(i,l);return null!==m?Array.isArray(m)?m[0]:bs(Oa(i[16]),m):bs(i,l.next)}}return null}function ef(i,l){return null!==l?i[16][6].projection[l.projection]:null}function zc(i,l){const d=10+i+1;if(d<l.length){const m=l[d],M=m[1].firstChild;if(null!==M)return bs(m,M)}return l[7]}function nu(i,l,d){const m=Zu(i,l);m&&function vh(i,l,d,m){dt(i)?i.removeChild(l,d,m):l.removeChild(d)}(i,m,l,d)}function ru(i,l,d,m,M,V,ie){for(;null!=d;){const _e=m[d.index],Ae=d.type;if(ie&&0===l&&(_e&&Qi(_n(_e),m),d.flags|=4),64!=(64&d.flags))if(8&Ae)ru(i,l,d.child,m,M,V,!1),Us(l,i,M,_e,V);else if(32&Ae){const ze=Xl(d,m);let nt;for(;nt=ze();)Us(l,i,M,nt,V);Us(l,i,M,_e,V)}else 16&Ae?tf(i,l,m,d,M,V):Us(l,i,M,_e,V);d=ie?d.projectionNext:d.next}}function iu(i,l,d,m,M,V){ru(d,m,i.firstChild,l,M,V,!1)}function tf(i,l,d,m,M,V){const ie=d[16],Ae=ie[6].projection[m.projection];if(Array.isArray(Ae))for(let ze=0;ze<Ae.length;ze++)Us(l,i,M,Ae[ze],V);else ru(i,l,Ae,ie[3],M,V,!0)}function rf(i,l,d){dt(i)?i.setAttribute(l,"style",d):l.style.cssText=d}function qc(i,l,d){dt(i)?""===d?i.removeAttribute(l,"class"):i.setAttribute(l,"class",d):l.className=d}function sf(i,l,d){let m=i.length;for(;;){const M=i.indexOf(l,d);if(-1===M)return M;if(0===M||i.charCodeAt(M-1)<=32){const V=l.length;if(M+V===m||i.charCodeAt(M+V)<=32)return M}d=M+1}}const ou="ng-template";function af(i,l,d){let m=0;for(;m<i.length;){let M=i[m++];if(d&&"class"===M){if(M=i[m],-1!==sf(M.toLowerCase(),l,0))return!0}else if(1===M){for(;m<i.length&&"string"==typeof(M=i[m++]);)if(M.toLowerCase()===l)return!0;return!1}}return!1}function Jc(i){return 4===i.type&&i.value!==ou}function w(i,l,d){return l===(4!==i.type||d?i.value:ou)}function K(i,l,d){let m=4;const M=i.attrs||[],V=function Mt(i){for(let l=0;l<i.length;l++)if(As(i[l]))return l;return i.length}(M);let ie=!1;for(let _e=0;_e<l.length;_e++){const Ae=l[_e];if("number"!=typeof Ae){if(!ie)if(4&m){if(m=2|1&m,""!==Ae&&!w(i,Ae,d)||""===Ae&&1===l.length){if(E(m))return!1;ie=!0}}else{const ze=8&m?Ae:l[++_e];if(8&m&&null!==i.attrs){if(!af(i.attrs,ze,d)){if(E(m))return!1;ie=!0}continue}const bt=Q(8&m?"class":Ae,M,Jc(i),d);if(-1===bt){if(E(m))return!1;ie=!0;continue}if(""!==ze){let jt;jt=bt>V?"":M[bt+1].toLowerCase();const en=8&m?jt:null;if(en&&-1!==sf(en,ze,0)||2&m&&ze!==jt){if(E(m))return!1;ie=!0}}}}else{if(!ie&&!E(m)&&!E(Ae))return!1;if(ie&&E(Ae))continue;ie=!1,m=Ae|1&m}}return E(m)||ie}function E(i){return 0==(1&i)}function Q(i,l,d,m){if(null===l)return-1;let M=0;if(m||!d){let V=!1;for(;M<l.length;){const ie=l[M];if(ie===i)return M;if(3===ie||6===ie)V=!0;else{if(1===ie||2===ie){let _e=l[++M];for(;"string"==typeof _e;)_e=l[++M];continue}if(4===ie)break;if(0===ie){M+=4;continue}}M+=V?1:2}return-1}return function Wt(i,l){let d=i.indexOf(4);if(d>-1)for(d++;d<i.length;){const m=i[d];if("number"==typeof m)return-1;if(m===l)return d;d++}return-1}(l,i)}function ye(i,l,d=!1){for(let m=0;m<l.length;m++)if(K(i,l[m],d))return!0;return!1}function Ht(i,l){e:for(let d=0;d<l.length;d++){const m=l[d];if(i.length===m.length){for(let M=0;M<i.length;M++)if(i[M]!==m[M])continue e;return!0}}return!1}function cn(i,l){return i?":not("+l.trim()+")":l}function En(i){let l=i[0],d=1,m=2,M="",V=!1;for(;d<i.length;){let ie=i[d];if("string"==typeof ie)if(2&m){const _e=i[++d];M+="["+ie+(_e.length>0?'="'+_e+'"':"")+"]"}else 8&m?M+="."+ie:4&m&&(M+=" "+ie);else""!==M&&!E(ie)&&(l+=cn(V,M),M=""),m=ie,V=V||!E(m);d++}return""!==M&&(l+=cn(V,M)),l}const An={};function wr(i){cr(wt(),Cn(),Ai()+i,Ks())}function cr(i,l,d,m){if(!m)if(3==(3&l[2])){const V=i.preOrderCheckHooks;null!==V&&ao(l,V,d)}else{const V=i.preOrderHooks;null!==V&&$s(l,V,0,d)}rs(d)}function Nr(i,l){return i<<17|l<<2}function br(i){return i>>17&32767}function Kr(i){return 2|i}function Fr(i){return(131068&i)>>2}function li(i,l){return-131069&i|l<<2}function Li(i){return 1|i}function Ch(i,l){const d=i.contentQueries;if(null!==d)for(let m=0;m<d.length;m+=2){const M=d[m],V=d[m+1];if(-1!==V){const ie=i.data[V];Ga(M),ie.contentQueries(2,l[V],V)}}}function ec(i,l,d,m,M,V,ie,_e,Ae,ze){const nt=l.blueprint.slice();return nt[0]=M,nt[2]=140|m,xo(nt),nt[3]=nt[15]=i,nt[8]=d,nt[10]=ie||i&&i[10],nt[11]=_e||i&&i[11],nt[12]=Ae||i&&i[12]||null,nt[9]=ze||i&&i[9]||null,nt[6]=V,nt[16]=2==l.type?i[16]:nt,nt}function fu(i,l,d,m,M){let V=i.data[l];if(null===V)V=gf(i,l,d,m,M),function Ua(){return Ne.lFrame.inI18n}()&&(V.flags|=64);else if(64&V.type){V.type=d,V.value=m,V.attrs=M;const ie=Jr();V.injectorIndex=null===ie?-1:ie.injectorIndex}return Ni(V,!0),V}function gf(i,l,d,m,M){const V=Gn(),ie=Mr(),Ae=i.data[l]=function Ig(i,l,d,m,M,V){return{type:d,index:m,insertBeforeIndex:null,injectorIndex:l?l.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:M,attrs:V,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:l,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,ie?V:V&&V.parent,d,l,m,M);return null===i.firstChild&&(i.firstChild=Ae),null!==V&&(ie?null==V.child&&null!==Ae.parent&&(V.child=Ae):null===V.next&&(V.next=Ae)),Ae}function Na(i,l,d,m){if(0===d)return-1;const M=l.length;for(let V=0;V<d;V++)l.push(m),i.blueprint.push(m),i.data.push(null);return M}function tc(i,l,d){ts(l);try{const m=i.viewQuery;null!==m&&Df(1,m,d);const M=i.template;null!==M&&Sh(i,l,M,1,d),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Ch(i,l),i.staticViewQueries&&Df(2,i.viewQuery,d);const V=i.components;null!==V&&function Mg(i,l){for(let d=0;d<l.length;d++)Zg(i,l[d])}(l,V)}catch(m){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),m}finally{l[2]&=-5,ns()}}function hu(i,l,d,m){const M=l[2];if(256==(256&M))return;ts(l);const V=Ks();try{xo(l),function vu(i){return Ne.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==d&&Sh(i,l,d,2,m);const ie=3==(3&M);if(!V)if(ie){const ze=i.preOrderCheckHooks;null!==ze&&ao(l,ze,null)}else{const ze=i.preOrderHooks;null!==ze&&$s(l,ze,0,null),Za(l,0)}if(function Wg(i){for(let l=Hu(i);null!==l;l=Gu(l)){if(!l[2])continue;const d=l[9];for(let m=0;m<d.length;m++){const M=d[m],V=M[3];0==(1024&M[2])&&Ye(V,1),M[2]|=1024}}}(l),function Kg(i){for(let l=Hu(i);null!==l;l=Gu(l))for(let d=10;d<l.length;d++){const m=l[d],M=m[1];Ri(m)&&hu(M,m,M.template,m[8])}}(l),null!==i.contentQueries&&Ch(i,l),!V)if(ie){const ze=i.contentCheckHooks;null!==ze&&ao(l,ze)}else{const ze=i.contentHooks;null!==ze&&$s(l,ze,1),Za(l,1)}!function Sg(i,l){const d=i.hostBindingOpCodes;if(null!==d)try{for(let m=0;m<d.length;m++){const M=d[m];if(M<0)rs(~M);else{const V=M,ie=d[++m],_e=d[++m];_u(ie,V),_e(2,l[V])}}}finally{rs(-1)}}(i,l);const _e=i.components;null!==_e&&function Dg(i,l){for(let d=0;d<l.length;d++)Yg(i,l[d])}(l,_e);const Ae=i.viewQuery;if(null!==Ae&&Df(2,Ae,m),!V)if(ie){const ze=i.viewCheckHooks;null!==ze&&ao(l,ze)}else{const ze=i.viewHooks;null!==ze&&$s(l,ze,2),Za(l,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),V||(l[2]&=-73),1024&l[2]&&(l[2]&=-1025,Ye(l[3],-1))}finally{ns()}}function Pg(i,l,d,m){const M=l[10],V=!Ks(),ie=Oo(l);try{V&&!ie&&M.begin&&M.begin(),ie&&tc(i,l,m),hu(i,l,d,m)}finally{V&&!ie&&M.end&&M.end()}}function Sh(i,l,d,m,M){const V=Ai(),ie=2&m;try{rs(-1),ie&&l.length>20&&cr(i,l,20,Ks()),d(m,M)}finally{rs(V)}}function pf(i,l,d){!qr()||(function Fg(i,l,d,m){const M=d.directiveStart,V=d.directiveEnd;i.firstCreatePass||St(d,l),Qi(m,l);const ie=d.initialInputs;for(let _e=M;_e<V;_e++){const Ae=i.data[_e],ze=Ar(Ae);ze&&Vg(l,d,Ae);const nt=io(l,i,_e,d);Qi(nt,l),null!==ie&&Hg(0,_e-M,nt,Ae,0,ie),ze&&(Gr(d.index,l)[8]=nt)}}(i,l,d,yr(d,l)),128==(128&d.flags)&&function kg(i,l,d){const m=d.directiveStart,M=d.directiveEnd,ie=d.index,_e=function El(){return Ne.lFrame.currentDirectiveIndex}();try{rs(ie);for(let Ae=m;Ae<M;Ae++){const ze=i.data[Ae],nt=l[Ae];la(Ae),(null!==ze.hostBindings||0!==ze.hostVars||null!==ze.hostAttrs)&&Rh(ze,nt)}}finally{rs(-1),la(_e)}}(i,l,d))}function mf(i,l,d=yr){const m=l.localNames;if(null!==m){let M=l.index+1;for(let V=0;V<m.length;V+=2){const ie=m[V+1],_e=-1===ie?d(l,i):i[ie];i[M++]=_e}}}function Mh(i){const l=i.tView;return null===l||l.incompleteFirstPass?i.tView=nd(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):l}function nd(i,l,d,m,M,V,ie,_e,Ae,ze){const nt=20+m,bt=nt+M,jt=function Ag(i,l){const d=[];for(let m=0;m<l;m++)d.push(m<i?null:An);return d}(nt,bt),en="function"==typeof ze?ze():ze;return jt[1]={type:i,blueprint:jt,template:d,queries:null,viewQuery:_e,declTNode:l,data:jt.slice().fill(null,nt),bindingStartIndex:nt,expandoStartIndex:bt,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof V?V():V,pipeRegistry:"function"==typeof ie?ie():ie,firstChild:null,schemas:Ae,consts:en,incompleteFirstPass:!1}}function Ih(i,l,d,m){const M=Mf(l);null===d?M.push(m):(M.push(d),i.firstCreatePass&&kh(i).push(m,M.length-1))}function Oh(i,l,d){for(let m in i)if(i.hasOwnProperty(m)){const M=i[m];(d=null===d?{}:d).hasOwnProperty(m)?d[m].push(l,M):d[m]=[l,M]}return d}function Qo(i,l,d,m,M,V,ie,_e){const Ae=yr(l,d);let nt,ze=l.inputs;!_e&&null!=ze&&(nt=ze[m])?(jh(i,d,nt,m,M),ci(l)&&function wg(i,l){const d=Gr(l,i);16&d[2]||(d[2]|=64)}(d,l.index)):3&l.type&&(m=function xg(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(m),M=null!=ie?ie(M,l.value||"",m):M,dt(V)?V.setProperty(Ae,m,M):ha(m)||(Ae.setProperty?Ae.setProperty(m,M):Ae[m]=M))}function vf(i,l,d,m){let M=!1;if(qr()){const V=function Bg(i,l,d){const m=i.directiveRegistry;let M=null;if(m)for(let V=0;V<m.length;V++){const ie=m[V];ye(d,ie.selectors,!1)&&(M||(M=[]),xr(St(d,l),i,ie.type),Ar(ie)?(Nh(i,d),M.unshift(ie)):M.push(ie))}return M}(i,l,d),ie=null===m?null:{"":-1};if(null!==V){M=!0,_f(d,i.data.length,V.length);for(let nt=0;nt<V.length;nt++){const bt=V[nt];bt.providersResolver&&bt.providersResolver(bt)}let _e=!1,Ae=!1,ze=Na(i,l,V.length,null);for(let nt=0;nt<V.length;nt++){const bt=V[nt];d.mergedAttrs=ga(d.mergedAttrs,bt.hostAttrs),Lh(i,d,l,ze,bt),jg(ze,bt,ie),null!==bt.contentQueries&&(d.flags|=8),(null!==bt.hostBindings||null!==bt.hostAttrs||0!==bt.hostVars)&&(d.flags|=128);const jt=bt.type.prototype;!_e&&(jt.ngOnChanges||jt.ngOnInit||jt.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(d.index),_e=!0),!Ae&&(jt.ngOnChanges||jt.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(d.index),Ae=!0),ze++}!function Og(i,l){const m=l.directiveEnd,M=i.data,V=l.attrs,ie=[];let _e=null,Ae=null;for(let ze=l.directiveStart;ze<m;ze++){const nt=M[ze],bt=nt.inputs,jt=null===V||Jc(l)?null:Gg(bt,V);ie.push(jt),_e=Oh(bt,ze,_e),Ae=Oh(nt.outputs,ze,Ae)}null!==_e&&(_e.hasOwnProperty("class")&&(l.flags|=16),_e.hasOwnProperty("style")&&(l.flags|=32)),l.initialInputs=ie,l.inputs=_e,l.outputs=Ae}(i,d)}ie&&function Ug(i,l,d){if(l){const m=i.localNames=[];for(let M=0;M<l.length;M+=2){const V=d[l[M+1]];if(null==V)throw new _(-301,`Export of name '${l[M+1]}' not found!`);m.push(l[M],V)}}}(d,m,ie)}return d.mergedAttrs=ga(d.mergedAttrs,d.attrs),M}function wh(i,l,d,m,M,V){const ie=V.hostBindings;if(ie){let _e=i.hostBindingOpCodes;null===_e&&(_e=i.hostBindingOpCodes=[]);const Ae=~l.index;(function Lg(i){let l=i.length;for(;l>0;){const d=i[--l];if("number"==typeof d&&d<0)return d}return 0})(_e)!=Ae&&_e.push(Ae),_e.push(m,M,ie)}}function Rh(i,l){null!==i.hostBindings&&i.hostBindings(1,l)}function Nh(i,l){l.flags|=2,(i.components||(i.components=[])).push(l.index)}function jg(i,l,d){if(d){if(l.exportAs)for(let m=0;m<l.exportAs.length;m++)d[l.exportAs[m]]=i;Ar(l)&&(d[""]=i)}}function _f(i,l,d){i.flags|=1,i.directiveStart=l,i.directiveEnd=l+d,i.providerIndexes=l}function Lh(i,l,d,m,M){i.data[m]=M;const V=M.factory||(M.factory=Ur(M.type)),ie=new fa(V,Ar(M),null);i.blueprint[m]=ie,d[m]=ie,wh(i,l,0,m,Na(i,d,M.hostVars,An),M)}function Vg(i,l,d){const m=yr(l,i),M=Mh(d),V=i[10],ie=nc(i,ec(i,M,null,d.onPush?64:16,m,l,V,V.createRenderer(m,d),null,null));i[l.index]=ie}function yf(i,l,d,m,M,V,ie){if(null==V)dt(i)?i.removeAttribute(l,M,d):l.removeAttribute(M);else{const _e=null==ie?y(V):ie(V,m||"",M);dt(i)?i.setAttribute(l,M,_e,d):d?l.setAttributeNS(d,M,_e):l.setAttribute(M,_e)}}function Hg(i,l,d,m,M,V){const ie=V[l];if(null!==ie){const _e=m.setInput;for(let Ae=0;Ae<ie.length;){const ze=ie[Ae++],nt=ie[Ae++],bt=ie[Ae++];null!==_e?m.setInput(d,bt,ze,nt):d[nt]=bt}}}function Gg(i,l){let d=null,m=0;for(;m<l.length;){const M=l[m];if(0!==M)if(5!==M){if("number"==typeof M)break;i.hasOwnProperty(M)&&(null===d&&(d=[]),d.push(M,i[M],l[m+1])),m+=2}else m+=2;else m+=4}return d}function Fh(i,l,d,m){return new Array(i,!0,!1,l,null,0,m,d,null,null)}function Yg(i,l){const d=Gr(l,i);if(Ri(d)){const m=d[1];80&d[2]?hu(m,d,m.template,d[8]):d[5]>0&&Ef(d)}}function Ef(i){for(let m=Hu(i);null!==m;m=Gu(m))for(let M=10;M<m.length;M++){const V=m[M];if(1024&V[2]){const ie=V[1];hu(ie,V,ie.template,V[8])}else V[5]>0&&Ef(V)}const d=i[1].components;if(null!==d)for(let m=0;m<d.length;m++){const M=Gr(d[m],i);Ri(M)&&M[5]>0&&Ef(M)}}function Zg(i,l){const d=Gr(l,i),m=d[1];(function $g(i,l){for(let d=l.length;d<i.blueprint.length;d++)l.push(i.blueprint[d])})(m,d),tc(m,d,d[8])}function nc(i,l){return i[13]?i[14][4]=l:i[13]=l,i[14]=l,l}function Tf(i){for(;i;){i[2]|=64;const l=Oa(i);if(eo(i)&&!l)return i;i=l}return null}function Cf(i,l,d){const m=l[10];m.begin&&m.begin();try{hu(i,l,i.template,d)}catch(M){throw Uh(l,M),M}finally{m.end&&m.end()}}function Sf(i){!function bf(i){for(let l=0;l<i.components.length;l++){const d=i.components[l],m=Yl(d),M=m[1];Pg(M,m,M.template,d)}}(i[8])}function Df(i,l,d){Ga(0),l(i,d)}const Qg=(()=>Promise.resolve(null))();function Mf(i){return i[7]||(i[7]=[])}function kh(i){return i.cleanup||(i.cleanup=[])}function Uh(i,l){const d=i[9],m=d?d.get(dl,null):null;m&&m.handleError(l)}function jh(i,l,d,m,M){for(let V=0;V<d.length;){const ie=d[V++],_e=d[V++],Ae=l[ie],ze=i.data[ie];null!==ze.setInput?ze.setInput(Ae,M,m,_e):Ae[_e]=M}}function na(i,l,d){const m=Dr(l,i);tu(i[11],m,d)}function rc(i,l,d){let m=d?i.styles:null,M=d?i.classes:null,V=0;if(null!==l)for(let ie=0;ie<l.length;ie++){const _e=l[ie];"number"==typeof _e?V=_e:1==V?M=T(M,_e):2==V&&(m=T(m,_e+": "+l[++ie]+";"))}d?i.styles=m:i.stylesWithoutHost=m,d?i.classes=M:i.classesWithoutHost=M}const Pf=new Ii("INJECTOR",-1);class Vh{get(l,d=el){if(d===el){const m=new Error(`NullInjectorError: No provider for ${v(l)}!`);throw m.name="NullInjectorError",m}return d}}const Af=new Ii("Set Injector scope."),ic={},Hh={};let If;function Gh(){return void 0===If&&(If=new Vh),If}function Kh(i,l=null,d=null,m){const M=Wh(i,l,d,m);return M._resolveInjectorDefTypes(),M}function Wh(i,l=null,d=null,m){return new tp(i,d,l||Gh(),m)}class tp{constructor(l,d,m,M=null){this.parent=m,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const V=[];d&&wo(d,_e=>this.processProvider(_e,l,d)),wo([l],_e=>this.processInjectorType(_e,[],V)),this.records.set(Pf,gu(void 0,this));const ie=this.records.get(Af);this.scope=null!=ie?ie.value:null,this.source=M||("object"==typeof l?null:v(l))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(l=>l.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(l,d=el,m=Z.Default){this.assertNotDestroyed();const M=Td(this),V=be(void 0);try{if(!(m&Z.SkipSelf)){let _e=this.records.get(l);if(void 0===_e){const Ae=function up(i){return"function"==typeof i||"object"==typeof i&&i instanceof Ii}(l)&&he(l);_e=Ae&&this.injectableDefInScope(Ae)?gu(Of(l),ic):null,this.records.set(l,_e)}if(null!=_e)return this.hydrate(l,_e)}return(m&Z.Self?Gh():this.parent).get(l,d=m&Z.Optional&&d===el?null:d)}catch(ie){if("NullInjectorError"===ie.name){if((ie[Nl]=ie[Nl]||[]).unshift(v(l)),M)throw ie;return function Cd(i,l,d,m){const M=i[Nl];throw l[us]&&M.unshift(l[us]),i.message=function Sd(i,l,d,m=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let M=v(l);if(Array.isArray(l))M=l.map(v).join(" -> ");else if("object"==typeof l){let V=[];for(let ie in l)if(l.hasOwnProperty(ie)){let _e=l[ie];V.push(ie+":"+("string"==typeof _e?JSON.stringify(_e):v(_e)))}M=`{${V.join(", ")}}`}return`${d}${m?"("+m+")":""}[${M}]: ${i.replace(Qf,"\n  ")}`}("\n"+i.message,M,d,m),i.ngTokenPath=M,i[Nl]=null,i}(ie,l,"R3InjectorError",this.source)}throw ie}finally{be(V),Td(M)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(l=>this.get(l))}toString(){const l=[];return this.records.forEach((m,M)=>l.push(v(M))),`R3Injector[${l.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new _(205,"")}processInjectorType(l,d,m){if(!(l=B(l)))return!1;let M=ae(l);const V=null==M&&l.ngModule||void 0,ie=void 0===V?l:V,_e=-1!==m.indexOf(ie);if(void 0!==V&&(M=ae(V)),null==M)return!1;if(null!=M.imports&&!_e){let nt;m.push(ie);try{wo(M.imports,bt=>{this.processInjectorType(bt,d,m)&&(void 0===nt&&(nt=[]),nt.push(bt))})}finally{}if(void 0!==nt)for(let bt=0;bt<nt.length;bt++){const{ngModule:jt,providers:en}=nt[bt];wo(en,Tn=>this.processProvider(Tn,jt,en||ln))}}this.injectorDefTypes.add(ie);const Ae=Ur(ie)||(()=>new ie);this.records.set(ie,gu(Ae,ic));const ze=M.providers;if(null!=ze&&!_e){const nt=l;wo(ze,bt=>this.processProvider(bt,nt,ze))}return void 0!==V&&void 0!==l.providers}processProvider(l,d,m){let M=pu(l=B(l))?l:B(l&&l.provide);const V=function rp(i,l,d){return Zh(i)?gu(void 0,i.useValue):gu(Yh(i),ic)}(l);if(pu(l)||!0!==l.multi)this.records.get(M);else{let ie=this.records.get(M);ie||(ie=gu(void 0,ic,!0),ie.factory=()=>tl(ie.multi),this.records.set(M,ie)),M=l,ie.multi.push(l)}this.records.set(M,V)}hydrate(l,d){return d.value===ic&&(d.value=Hh,d.value=d.factory()),"object"==typeof d.value&&d.value&&function lp(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(d.value)&&this.onDestroy.add(d.value),d.value}injectableDefInScope(l){if(!l.providedIn)return!1;const d=B(l.providedIn);return"string"==typeof d?"any"===d||d===this.scope:this.injectorDefTypes.has(d)}}function Of(i){const l=he(i),d=null!==l?l.factory:Ur(i);if(null!==d)return d;if(i instanceof Ii)throw new _(204,"");if(i instanceof Function)return function np(i){const l=i.length;if(l>0)throw ni(l,"?"),new _(204,"");const d=function J(i){const l=i&&(i[re]||i[te]);if(l){const d=function Me(i){if(i.hasOwnProperty("name"))return i.name;const l=(""+i).match(/^function\s*([^\s(]+)/);return null===l?"":l[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${d}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${d}" class.`),l}return null}(i);return null!==d?()=>d.factory(i):()=>new i}(i);throw new _(204,"")}function Yh(i,l,d){let m;if(pu(i)){const M=B(i);return Ur(M)||Of(M)}if(Zh(i))m=()=>B(i.useValue);else if(function op(i){return!(!i||!i.useFactory)}(i))m=()=>i.useFactory(...tl(i.deps||[]));else if(function ip(i){return!(!i||!i.useExisting)}(i))m=()=>Ji(B(i.useExisting));else{const M=B(i&&(i.useClass||i.provide));if(!function ap(i){return!!i.deps}(i))return Ur(M)||Of(M);m=()=>new M(...tl(i.deps))}return m}function gu(i,l,d=!1){return{factory:i,value:l,multi:d?[]:void 0}}function Zh(i){return null!==i&&"object"==typeof i&&pc in i}function pu(i){return"function"==typeof i}let hs=(()=>{class i{static create(d,m){var M;if(Array.isArray(d))return Kh({name:""},m,d,"");{const V=null!==(M=d.name)&&void 0!==M?M:"";return Kh({name:V},d.parent,d.providers,V)}}}return i.THROW_IF_NOT_FOUND=el,i.NULL=new Vh,i.\u0275prov=qe({token:i,providedIn:"any",factory:()=>Ji(Pf)}),i.__NG_ELEMENT_ID__=-1,i})();function st(i,l){da(Yl(i)[1],Hn())}function Zt(i){let l=function Tt(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),d=!0;const m=[i];for(;l;){let M;if(Ar(i))M=l.\u0275cmp||l.\u0275dir;else{if(l.\u0275cmp)throw new _(903,"");M=l.\u0275dir}if(M){if(d){m.push(M);const ie=i;ie.inputs=tn(i.inputs),ie.declaredInputs=tn(i.declaredInputs),ie.outputs=tn(i.outputs);const _e=M.hostBindings;_e&&Kn(i,_e);const Ae=M.viewQuery,ze=M.contentQueries;if(Ae&&Mn(i,Ae),ze&&pn(i,ze),g(i.inputs,M.inputs),g(i.declaredInputs,M.declaredInputs),g(i.outputs,M.outputs),Ar(M)&&M.data.animation){const nt=i.data;nt.animation=(nt.animation||[]).concat(M.data.animation)}}const V=M.features;if(V)for(let ie=0;ie<V.length;ie++){const _e=V[ie];_e&&_e.ngInherit&&_e(i),_e===Zt&&(d=!1)}}l=Object.getPrototypeOf(l)}!function rn(i){let l=0,d=null;for(let m=i.length-1;m>=0;m--){const M=i[m];M.hostVars=l+=M.hostVars,M.hostAttrs=ga(M.hostAttrs,d=ga(d,M.hostAttrs))}}(m)}function tn(i){return i===Xt?{}:i===ln?[]:i}function Mn(i,l){const d=i.viewQuery;i.viewQuery=d?(m,M)=>{l(m,M),d(m,M)}:l}function pn(i,l){const d=i.contentQueries;i.contentQueries=d?(m,M,V)=>{l(m,M,V),d(m,M,V)}:l}function Kn(i,l){const d=i.hostBindings;i.hostBindings=d?(m,M)=>{l(m,M),d(m,M)}:l}let Sn=null;function gr(){if(!Sn){const i=Dt.Symbol;if(i&&i.iterator)Sn=i.iterator;else{const l=Object.getOwnPropertyNames(Map.prototype);for(let d=0;d<l.length;++d){const m=l[d];"entries"!==m&&"size"!==m&&Map.prototype[m]===Map.prototype.entries&&(Sn=m)}}}return Sn}function ri(i){return!!Ci(i)&&(Array.isArray(i)||!(i instanceof Map)&&gr()in i)}function Ci(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function ei(i,l,d){return i[l]=d}function ar(i,l,d){return!Object.is(i[l],d)&&(i[l]=d,!0)}function ti(i,l,d,m){const M=ar(i,l,d);return ar(i,l+1,m)||M}function ki(i,l,d,m){const M=Cn();return ar(M,ps(),l)&&(wt(),function Gs(i,l,d,m,M,V){const ie=yr(i,l);yf(l[11],ie,V,i.value,d,m,M)}(mi(),M,i,l,d,m)),ki}function Do(i,l,d,m){return ar(i,ps(),d)?l+y(d)+m:An}function ho(i,l,d,m,M,V){const _e=ti(i,Uo(),d,M);return Hi(2),_e?l+y(d)+m+y(M)+V:An}function Hm(i,l,d,m,M,V,ie,_e){const Ae=Cn(),ze=wt(),nt=i+20,bt=ze.firstCreatePass?function e0(i,l,d,m,M,V,ie,_e,Ae){const ze=l.consts,nt=fu(l,i,4,ie||null,Ti(ze,_e));vf(l,d,nt,Ti(ze,Ae)),da(l,nt);const bt=nt.tViews=nd(2,nt,m,M,V,l.directiveRegistry,l.pipeRegistry,null,l.schemas,ze);return null!==l.queries&&(l.queries.template(l,nt),bt.queries=l.queries.embeddedTView(nt)),nt}(nt,ze,Ae,l,d,m,M,V,ie):ze.data[nt];Ni(bt,!1);const jt=Ae[11].createComment("");pl(ze,Ae,jt,bt),Qi(jt,Ae),nc(Ae,Ae[nt]=Fh(jt,Ae,jt,bt)),Si(bt)&&pf(ze,Ae,bt),null!=ie&&mf(Ae,bt,_e)}function Gm(i){return jr(function lc(){return Ne.lFrame.contextLView}(),20+i)}function Rf(i,l=Z.Default){const d=Cn();return null===d?Ji(i,l):bo(Hn(),d,B(i),l)}function ev(){throw new Error("invalid")}function vp(i,l,d){const m=Cn();return ar(m,ps(),l)&&Qo(wt(),mi(),m,i,l,m[11],d,!1),vp}function _p(i,l,d,m,M){const ie=M?"class":"style";jh(i,d,l.inputs[ie],ie,m)}function yp(i,l,d,m){const M=Cn(),V=wt(),ie=20+i,_e=M[11],Ae=M[ie]=Ro(_e,l,function Ya(){return Ne.lFrame.currentNamespace}()),ze=V.firstCreatePass?function b0(i,l,d,m,M,V,ie){const _e=l.consts,ze=fu(l,i,2,M,Ti(_e,V));return vf(l,d,ze,Ti(_e,ie)),null!==ze.attrs&&rc(ze,ze.attrs,!1),null!==ze.mergedAttrs&&rc(ze,ze.mergedAttrs,!0),null!==l.queries&&l.queries.elementStart(l,ze),ze}(ie,V,M,0,l,d,m):V.data[ie];Ni(ze,!0);const nt=ze.mergedAttrs;null!==nt&&Ps(_e,Ae,nt);const bt=ze.classes;null!==bt&&qc(_e,Ae,bt);const jt=ze.styles;null!==jt&&rf(_e,Ae,jt),64!=(64&ze.flags)&&pl(V,M,Ae,ze),0===function ht(){return Ne.lFrame.elementDepthCount}()&&Qi(Ae,M),function un(){Ne.lFrame.elementDepthCount++}(),Si(ze)&&(pf(V,M,ze),function Dh(i,l,d){if(Zi(l)){const M=l.directiveEnd;for(let V=l.directiveStart;V<M;V++){const ie=i.data[V];ie.contentQueries&&ie.contentQueries(1,d[V],V)}}}(V,ze,M)),null!==m&&mf(M,ze)}function Ep(){let i=Hn();Mr()?sa():(i=i.parent,Ni(i,!1));const l=i;!function Xn(){Ne.lFrame.elementDepthCount--}();const d=wt();d.firstCreatePass&&(da(d,i),Zi(i)&&d.queries.elementEnd(i)),null!=l.classesWithoutHost&&function Dl(i){return 0!=(16&i.flags)}(l)&&_p(d,l,Cn(),l.classesWithoutHost,!0),null!=l.stylesWithoutHost&&function Ml(i){return 0!=(32&i.flags)}(l)&&_p(d,l,Cn(),l.stylesWithoutHost,!1)}function tv(i,l,d,m){yp(i,l,d,m),Ep()}function iv(){return Cn()}function Tp(i){return!!i&&"function"==typeof i.then}function ov(i){return!!i&&"function"==typeof i.subscribe}const sv=ov;function bp(i,l,d,m){const M=Cn(),V=wt(),ie=Hn();return function lv(i,l,d,m,M,V,ie,_e){const Ae=Si(m),nt=i.firstCreatePass&&kh(i),bt=l[8],jt=Mf(l);let en=!0;if(3&m.type||_e){const Yn=yr(m,l),nr=_e?_e(Yn):Yn,Pn=jt.length,vr=_e?zr=>_e(_n(zr[m.index])):m.index;if(dt(d)){let zr=null;if(!_e&&Ae&&(zr=function D0(i,l,d,m){const M=i.cleanup;if(null!=M)for(let V=0;V<M.length-1;V+=2){const ie=M[V];if(ie===d&&M[V+1]===m){const _e=l[7],Ae=M[V+2];return _e.length>Ae?_e[Ae]:null}"string"==typeof ie&&(V+=2)}return null}(i,l,M,m.index)),null!==zr)(zr.__ngLastListenerFn__||zr).__ngNextListenerFn__=V,zr.__ngLastListenerFn__=V,en=!1;else{V=Cp(m,l,bt,V,!1);const gi=d.listen(nr,M,V);jt.push(V,gi),nt&&nt.push(M,vr,Pn,Pn+1)}}else V=Cp(m,l,bt,V,!0),nr.addEventListener(M,V,ie),jt.push(V),nt&&nt.push(M,vr,Pn,ie)}else V=Cp(m,l,bt,V,!1);const Tn=m.outputs;let Un;if(en&&null!==Tn&&(Un=Tn[M])){const Yn=Un.length;if(Yn)for(let nr=0;nr<Yn;nr+=2){const Ds=l[Un[nr]][Un[nr+1]].subscribe(V),ac=jt.length;jt.push(V,Ds),nt&&nt.push(M,m.index,ac,-(ac+1))}}}(V,M,M[11],ie,i,l,!!d,m),bp}function uv(i,l,d,m){try{return!1!==d(m)}catch(M){return Uh(i,M),!1}}function Cp(i,l,d,m,M){return function V(ie){if(ie===Function)return m;const _e=2&i.flags?Gr(i.index,l):l;0==(32&l[2])&&Tf(_e);let Ae=uv(l,0,m,ie),ze=V.__ngNextListenerFn__;for(;ze;)Ae=uv(l,0,ze,ie)&&Ae,ze=ze.__ngNextListenerFn__;return M&&!1===Ae&&(ie.preventDefault(),ie.returnValue=!1),Ae}}function cv(i=1){return function bl(i){return(Ne.lFrame.contextLView=function yu(i,l){for(;i>0;)l=l[15],i--;return l}(i,Ne.lFrame.contextLView))[8]}(i)}function M0(i,l){let d=null;const m=function Ke(i){const l=i.attrs;if(null!=l){const d=l.indexOf(5);if(0==(1&d))return l[d+1]}return null}(i);for(let M=0;M<l.length;M++){const V=l[M];if("*"!==V){if(null===m?ye(i,V,!0):Ht(m,V))return M}else d=M}return d}function dv(i){const l=Cn()[16][6];if(!l.projection){const m=l.projection=ni(i?i.length:1,null),M=m.slice();let V=l.child;for(;null!==V;){const ie=i?M0(V,i):0;null!==ie&&(M[ie]?M[ie].projectionNext=V:m[ie]=V,M[ie]=V),V=V.next}}}function fv(i,l=0,d){const m=Cn(),M=wt(),V=fu(M,20+i,16,null,d||null);null===V.projection&&(V.projection=l),sa(),64!=(64&V.flags)&&function _h(i,l,d){tf(l[11],0,l,d,Kc(i,d,l),Jd(d.parent||l[6],d,l))}(M,m,V)}function Sp(i,l,d){return eg(i,"",l,"",d),Sp}function eg(i,l,d,m,M){const V=Cn(),ie=Do(V,l,d,m);return ie!==An&&Qo(wt(),mi(),V,i,ie,V[11],M,!1),eg}function Dp(i,l,d,m,M,V,ie){const _e=Cn(),Ae=ho(_e,l,d,m,M,V);return Ae!==An&&Qo(wt(),mi(),_e,i,Ae,_e[11],ie,!1),Dp}function Ev(i,l,d,m,M){const V=i[d+1],ie=null===l;let _e=m?br(V):Fr(V),Ae=!1;for(;0!==_e&&(!1===Ae||ie);){const nt=i[_e+1];I0(i[_e],l)&&(Ae=!0,i[_e+1]=m?Li(nt):Kr(nt)),_e=m?br(nt):Fr(nt)}Ae&&(i[d+1]=m?Kr(V):Li(V))}function I0(i,l){return null===i||null==l||(Array.isArray(i)?i[1]:i)===l||!(!Array.isArray(i)||"string"!=typeof l)&&Js(i,l)>=0}const go={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Tv(i){return i.substring(go.key,go.keyEnd)}function bv(i,l){const d=go.textEnd;return d===l?-1:(l=go.keyEnd=function R0(i,l,d){for(;l<d&&i.charCodeAt(l)>32;)l++;return l}(i,go.key=l,d),ld(i,l,d))}function ld(i,l,d){for(;l<d&&i.charCodeAt(l)<=32;)l++;return l}function Mp(i,l,d){return ra(i,l,d,!1),Mp}function Pp(i,l){return ra(i,l,null,!0),Pp}function Pv(i){!function ia(i,l,d,m){const M=wt(),V=Hi(2);M.firstUpdatePass&&Iv(M,null,V,m);const ie=Cn();if(d!==An&&ar(ie,V,d)){const _e=M.data[Ai()];if(Rv(_e,m)&&!Av(M,V)){let Ae=m?_e.classesWithoutHost:_e.stylesWithoutHost;null!==Ae&&(d=T(Ae,d||"")),_p(M,_e,ie,d,m)}else!function H0(i,l,d,m,M,V,ie,_e){M===An&&(M=ln);let Ae=0,ze=0,nt=0<M.length?M[0]:null,bt=0<V.length?V[0]:null;for(;null!==nt||null!==bt;){const jt=Ae<M.length?M[Ae+1]:void 0,en=ze<V.length?V[ze+1]:void 0;let Un,Tn=null;nt===bt?(Ae+=2,ze+=2,jt!==en&&(Tn=bt,Un=en)):null===bt||null!==nt&&nt<bt?(Ae+=2,Tn=nt):(ze+=2,Tn=bt,Un=en),null!==Tn&&xv(i,l,d,m,Tn,Un,ie,_e),nt=Ae<M.length?M[Ae]:null,bt=ze<V.length?V[ze]:null}}(M,_e,ie,ie[11],ie[V+1],ie[V+1]=function V0(i,l,d){if(null==d||""===d)return ln;const m=[],M=$o(d);if(Array.isArray(M))for(let V=0;V<M.length;V++)i(m,M[V],!0);else if("object"==typeof M)for(const V in M)M.hasOwnProperty(V)&&i(m,V,M[V]);else"string"==typeof M&&l(m,M);return m}(i,l,d),m,V)}}(So,ka,i,!0)}function ka(i,l){for(let d=function x0(i){return function Sv(i){go.key=0,go.keyEnd=0,go.value=0,go.valueEnd=0,go.textEnd=i.length}(i),bv(i,ld(i,0,go.textEnd))}(l);d>=0;d=bv(l,d))So(i,Tv(l),!0)}function ra(i,l,d,m){const M=Cn(),V=wt(),ie=Hi(2);V.firstUpdatePass&&Iv(V,i,ie,m),l!==An&&ar(M,ie,l)&&xv(V,V.data[Ai()],M,M[11],i,M[ie+1]=function G0(i,l){return null==i||("string"==typeof l?i+=l:"object"==typeof i&&(i=v($o(i)))),i}(l,d),m,ie)}function Av(i,l){return l>=i.expandoStartIndex}function Iv(i,l,d,m){const M=i.data;if(null===M[d+1]){const V=M[Ai()],ie=Av(i,d);Rv(V,m)&&null===l&&!ie&&(l=!1),l=function k0(i,l,d,m){const M=function Va(i){const l=Ne.lFrame.currentDirectiveIndex;return-1===l?null:i[l]}(i);let V=m?l.residualClasses:l.residualStyles;if(null===M)0===(m?l.classBindings:l.styleBindings)&&(d=Nf(d=Ap(null,i,l,d,m),l.attrs,m),V=null);else{const ie=l.directiveStylingLast;if(-1===ie||i[ie]!==M)if(d=Ap(M,i,l,d,m),null===V){let Ae=function B0(i,l,d){const m=d?l.classBindings:l.styleBindings;if(0!==Fr(m))return i[br(m)]}(i,l,m);void 0!==Ae&&Array.isArray(Ae)&&(Ae=Ap(null,i,l,Ae[1],m),Ae=Nf(Ae,l.attrs,m),function U0(i,l,d,m){i[br(d?l.classBindings:l.styleBindings)]=m}(i,l,m,Ae))}else V=function j0(i,l,d){let m;const M=l.directiveEnd;for(let V=1+l.directiveStylingLast;V<M;V++)m=Nf(m,i[V].hostAttrs,d);return Nf(m,l.attrs,d)}(i,l,m)}return void 0!==V&&(m?l.residualClasses=V:l.residualStyles=V),d}(M,V,l,m),function P0(i,l,d,m,M,V){let ie=V?l.classBindings:l.styleBindings,_e=br(ie),Ae=Fr(ie);i[m]=d;let nt,ze=!1;if(Array.isArray(d)){const bt=d;nt=bt[1],(null===nt||Js(bt,nt)>0)&&(ze=!0)}else nt=d;if(M)if(0!==Ae){const jt=br(i[_e+1]);i[m+1]=Nr(jt,_e),0!==jt&&(i[jt+1]=li(i[jt+1],m)),i[_e+1]=function Lr(i,l){return 131071&i|l<<17}(i[_e+1],m)}else i[m+1]=Nr(_e,0),0!==_e&&(i[_e+1]=li(i[_e+1],m)),_e=m;else i[m+1]=Nr(Ae,0),0===_e?_e=m:i[Ae+1]=li(i[Ae+1],m),Ae=m;ze&&(i[m+1]=Kr(i[m+1])),Ev(i,nt,m,!0),Ev(i,nt,m,!1),function A0(i,l,d,m,M){const V=M?i.residualClasses:i.residualStyles;null!=V&&"string"==typeof l&&Js(V,l)>=0&&(d[m+1]=Li(d[m+1]))}(l,nt,i,m,V),ie=Nr(_e,Ae),V?l.classBindings=ie:l.styleBindings=ie}(M,V,l,d,ie,m)}}function Ap(i,l,d,m,M){let V=null;const ie=d.directiveEnd;let _e=d.directiveStylingLast;for(-1===_e?_e=d.directiveStart:_e++;_e<ie&&(V=l[_e],m=Nf(m,V.hostAttrs,M),V!==i);)_e++;return null!==i&&(d.directiveStylingLast=_e),m}function Nf(i,l,d){const m=d?1:2;let M=-1;if(null!==l)for(let V=0;V<l.length;V++){const ie=l[V];"number"==typeof ie?M=ie:M===m&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),So(i,ie,!!d||l[++V]))}return void 0===i?null:i}function xv(i,l,d,m,M,V,ie,_e){if(!(3&l.type))return;const Ae=i.data,ze=Ae[_e+1];tg(function ui(i){return 1==(1&i)}(ze)?wv(Ae,l,d,M,Fr(ze),ie):void 0)||(tg(V)||function fi(i){return 2==(2&i)}(ze)&&(V=wv(Ae,null,d,M,_e,ie)),function nf(i,l,d,m,M){const V=dt(i);if(l)M?V?i.addClass(d,m):d.classList.add(m):V?i.removeClass(d,m):d.classList.remove(m);else{let ie=-1===m.indexOf("-")?void 0:Go.DashCase;if(null==M)V?i.removeStyle(d,m,ie):d.style.removeProperty(m);else{const _e="string"==typeof M&&M.endsWith("!important");_e&&(M=M.slice(0,-10),ie|=Go.Important),V?i.setStyle(d,m,M,ie):d.style.setProperty(m,M,_e?"important":"")}}}(m,ie,Dr(Ai(),d),M,V))}function wv(i,l,d,m,M,V){const ie=null===l;let _e;for(;M>0;){const Ae=i[M],ze=Array.isArray(Ae),nt=ze?Ae[1]:Ae,bt=null===nt;let jt=d[M+1];jt===An&&(jt=bt?ln:void 0);let en=bt?fc(jt,m):nt===m?jt:void 0;if(ze&&!tg(en)&&(en=fc(Ae,m)),tg(en)&&(_e=en,ie))return _e;const Tn=i[M+1];M=ie?br(Tn):Fr(Tn)}if(null!==l){let Ae=V?l.residualClasses:l.residualStyles;null!=Ae&&(_e=fc(Ae,m))}return _e}function tg(i){return void 0!==i}function Rv(i,l){return 0!=(i.flags&(l?16:32))}function Nv(i,l=""){const d=Cn(),m=wt(),M=i+20,V=m.firstCreatePass?fu(m,M,1,l,null):m.data[M],ie=d[M]=jc(d[11],l);pl(m,d,ie,V),Ni(V,!1)}function Ip(i){return ng("",i,""),Ip}function ng(i,l,d){const m=Cn(),M=Do(m,i,l,d);return M!==An&&na(m,Ai(),M),ng}function Op(i,l,d,m,M){const V=Cn(),ie=ho(V,i,l,d,m,M);return ie!==An&&na(V,Ai(),ie),Op}function xp(i,l,d){const m=Cn();return ar(m,ps(),l)&&Qo(wt(),mi(),m,i,l,m[11],d,!0),xp}const oc=void 0;var uE=["en",[["a","p"],["AM","PM"],oc],[["AM","PM"],oc,oc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],oc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],oc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",oc,"{1} 'at' {0}",oc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function lE(i){const d=Math.floor(Math.abs(i)),m=i.toString().replace(/^[^.]*\.?/,"").length;return 1===d&&0===m?1:5}];let ud={};function wp(i){const l=function cE(i){return i.toLowerCase().replace(/_/g,"-")}(i);let d=Xv(l);if(d)return d;const m=l.split("-")[0];if(d=Xv(m),d)return d;if("en"===m)return uE;throw new Error(`Missing locale data for the locale "${i}".`)}function Qv(i){return wp(i)[Er.PluralCase]}function Xv(i){return i in ud||(ud[i]=Dt.ng&&Dt.ng.common&&Dt.ng.common.locales&&Dt.ng.common.locales[i]),ud[i]}var Er=(()=>((Er=Er||{})[Er.LocaleId=0]="LocaleId",Er[Er.DayPeriodsFormat=1]="DayPeriodsFormat",Er[Er.DayPeriodsStandalone=2]="DayPeriodsStandalone",Er[Er.DaysFormat=3]="DaysFormat",Er[Er.DaysStandalone=4]="DaysStandalone",Er[Er.MonthsFormat=5]="MonthsFormat",Er[Er.MonthsStandalone=6]="MonthsStandalone",Er[Er.Eras=7]="Eras",Er[Er.FirstDayOfWeek=8]="FirstDayOfWeek",Er[Er.WeekendRange=9]="WeekendRange",Er[Er.DateFormat=10]="DateFormat",Er[Er.TimeFormat=11]="TimeFormat",Er[Er.DateTimeFormat=12]="DateTimeFormat",Er[Er.NumberSymbols=13]="NumberSymbols",Er[Er.NumberFormats=14]="NumberFormats",Er[Er.CurrencyCode=15]="CurrencyCode",Er[Er.CurrencySymbol=16]="CurrencySymbol",Er[Er.CurrencyName=17]="CurrencyName",Er[Er.Currencies=18]="Currencies",Er[Er.Directionality=19]="Directionality",Er[Er.PluralCase=20]="PluralCase",Er[Er.ExtraData=21]="ExtraData",Er))();const dE=["zero","one","two","few","many"],rg="en-US",ig={marker:"element"},og={marker:"ICU"};var Yi=(()=>((Yi=Yi||{})[Yi.SHIFT=2]="SHIFT",Yi[Yi.APPEND_EAGERLY=1]="APPEND_EAGERLY",Yi[Yi.COMMENT=2]="COMMENT",Yi))();let e_=rg;function t_(i,l,d){const m=l.insertBeforeIndex,M=Array.isArray(m)?m[0]:m;return null===M?Qd(i,0,d):_n(d[M])}function n_(i,l,d,m,M){const V=l.insertBeforeIndex;if(Array.isArray(V)){let ie=m,_e=null;if(3&l.type||(_e=ie,ie=M),null!==ie&&0==(2&l.flags))for(let Ae=1;Ae<V.length;Ae++)xa(i,ie,d[V[Ae]],_e,!1)}}function r_(i,l){if(i.push(l),i.length>1)for(let d=i.length-2;d>=0;d--){const m=i[d];i_(m)||mE(m,l)&&null===vE(m)&&_E(m,l.index)}}function i_(i){return!(64&i.type)}function mE(i,l){return i_(l)||i.index>l.index}function vE(i){const l=i.insertBeforeIndex;return Array.isArray(l)?l[0]:l}function _E(i,l){const d=i.insertBeforeIndex;Array.isArray(d)?d[0]=l:($u(t_,n_),i.insertBeforeIndex=l)}function Lf(i,l){const d=i.data[l];return null===d||"string"==typeof d?null:d.hasOwnProperty("currentCaseLViewIndex")?d:d.value}function TE(i,l,d){const m=gf(i,d,64,null,null);return r_(l,m),m}function sg(i,l){const d=l[i.currentCaseLViewIndex];return null===d?d:d<0?~d:d}function o_(i){return i>>>17}function s_(i){return(131070&i)>>>1}let Ff=0,kf=0;function l_(i,l,d,m){const M=d[11];let ie,V=null;for(let _e=0;_e<l.length;_e++){const Ae=l[_e];if("string"==typeof Ae){const ze=l[++_e];null===d[ze]&&(d[ze]=jc(M,Ae))}else if("number"==typeof Ae)switch(1&Ae){case 0:const ze=o_(Ae);let nt,bt;if(null===V&&(V=ze,ie=Zu(M,m)),ze===V?(nt=m,bt=ie):(nt=null,bt=_n(d[ze])),null!==bt){const Un=s_(Ae);xa(M,bt,d[Un],nt,!1);const nr=Lf(i,Un);if(null!==nr&&"object"==typeof nr){const Pn=sg(nr,d);null!==Pn&&l_(i,nr.create[Pn],d,d[nr.anchorIdx])}}break;case 1:const en=l[++_e],Tn=l[++_e];yf(M,Dr(Ae>>>1,d),null,null,en,Tn,null)}else switch(Ae){case og:const ze=l[++_e],nt=l[++_e];null===d[nt]&&Qi(d[nt]=fh(M,ze),d);break;case ig:const bt=l[++_e],jt=l[++_e];null===d[jt]&&Qi(d[jt]=Ro(M,bt,null),d)}}}function u_(i,l,d,m,M){for(let V=0;V<d.length;V++){const ie=d[V],_e=d[++V];if(ie&M){let Ae="";for(let ze=V+1;ze<=V+_e;ze++){const nt=d[ze];if("string"==typeof nt)Ae+=nt;else if("number"==typeof nt)if(nt<0)Ae+=y(l[m-nt]);else{const bt=nt>>>2;switch(3&nt){case 1:const jt=d[++ze],en=d[++ze],Tn=i.data[bt];"string"==typeof Tn?yf(l[11],l[bt],null,Tn,jt,Ae,en):Qo(i,Tn,l,jt,Ae,l[11],en,!1);break;case 0:const Un=l[bt];null!==Un&&tu(l[11],Un,Ae);break;case 2:ME(i,Lf(i,bt),l,Ae);break;case 3:c_(i,Lf(i,bt),m,l)}}}}else{const Ae=d[V+1];if(Ae>0&&3==(3&Ae)){const nt=Lf(i,Ae>>>2);l[nt.currentCaseLViewIndex]<0&&c_(i,nt,m,l)}}V+=_e}}function c_(i,l,d,m){let M=m[l.currentCaseLViewIndex];if(null!==M){let V=Ff;M<0&&(M=m[l.currentCaseLViewIndex]=~M,V=-1),u_(i,m,l.update[M],d,V)}}function ME(i,l,d,m){const M=function PE(i,l){let d=i.cases.indexOf(l);if(-1===d)switch(i.type){case 1:{const m=function fE(i,l){const d=Qv(l)(parseInt(i,10)),m=dE[d];return void 0!==m?m:"other"}(l,function pE(){return e_}());d=i.cases.indexOf(m),-1===d&&"other"!==m&&(d=i.cases.indexOf("other"));break}case 0:d=i.cases.indexOf("other")}return-1===d?null:d}(l,m);if(sg(l,d)!==M&&(d_(i,l,d),d[l.currentCaseLViewIndex]=null===M?null:~M,null!==M)){const ie=d[l.anchorIdx];ie&&l_(i,l.create[M],d,ie)}}function d_(i,l,d){let m=sg(l,d);if(null!==m){const M=l.remove[m];for(let V=0;V<M.length;V++){const ie=M[V];if(ie>0){const _e=Dr(ie,d);null!==_e&&nu(d[11],_e)}else d_(i,Lf(i,~ie),d)}}}function AE(){const i=[];let d,m,l=-1;function V(_e,Ae){l=0;const ze=sg(_e,Ae);m=null!==ze?_e.remove[ze]:ln}function ie(){if(l<m.length){const _e=m[l++];return _e>0?d[_e]:(i.push(l,m),V(d[1].data[~_e],d),ie())}return 0===i.length?null:(m=i.pop(),l=i.pop(),ie())}return function M(_e,Ae){for(d=Ae;i.length;)i.pop();return V(_e.value,Ae),ie}}const ag=/\ufffd(\d+):?\d*\ufffd/gi,OE=/\ufffd(\d+)\ufffd/,h_=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,xE=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,wE=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,RE=/\uE500/g;function g_(i,l,d,m,M,V,ie){const _e=Na(i,m,1,null);let Ae=_e<<Yi.SHIFT,ze=Jr();l===ze&&(ze=null),null===ze&&(Ae|=Yi.APPEND_EAGERLY),ie&&(Ae|=Yi.COMMENT,function eu(i){void 0===gl&&(gl=i())}(AE)),M.push(Ae,null===V?"":V);const nt=gf(i,_e,ie?32:1,null===V?"":V,null);r_(d,nt);const bt=nt.index;return Ni(nt,!1),null!==ze&&l!==ze&&function EE(i,l){let d=i.insertBeforeIndex;null===d?($u(t_,n_),d=i.insertBeforeIndex=[null,l]):(function H(i,l,d){i!=l&&Re(d,i,l,"==")}(Array.isArray(d),!0,"Expecting array here"),d.push(l))}(ze,bt),nt}function FE(i,l,d,m,M,V,ie){const _e=ie.match(ag),Ae=g_(i,l,d,V,m,_e?null:ie,!1);_e&&cd(M,ie,Ae.index,null,0,null)}function cd(i,l,d,m,M,V){const ie=i.length,_e=ie+1;i.push(null,null);const Ae=ie+2,ze=l.split(ag);let nt=0;for(let bt=0;bt<ze.length;bt++){const jt=ze[bt];if(1&bt){const en=M+parseInt(jt,10);i.push(-1-en),nt|=p_(en)}else""!==jt&&i.push(jt)}return i.push(d<<2|(m?1:0)),m&&i.push(m,V),i[ie]=nt,i[_e]=i.length-Ae,nt}function p_(i){return 1<<Math.min(i,31)}function m_(i){let l,V,d="",m=0,M=!1;for(;null!==(l=xE.exec(i));)M?l[0]===`\ufffd/*${V}\ufffd`&&(m=l.index,M=!1):(d+=i.substring(m,l.index+l[0].length),V=l[1],M=!0);return d+=i.substr(m),d}function v_(i,l,d,m,M,V){let ie=0;const _e={type:M.type,currentCaseLViewIndex:Na(i,l,1,null),anchorIdx:V,cases:[],create:[],remove:[],update:[]};(function KE(i,l,d){i.push(p_(l.mainBinding),2,-1-l.mainBinding,d<<2|2)})(d,M,V),function yE(i,l,d){const m=i.data[l];null===m?i.data[l]=d:m.value=d}(i,V,_e);const Ae=M.values;for(let ze=0;ze<Ae.length;ze++){const nt=Ae[ze],bt=[];for(let jt=0;jt<nt.length;jt++){const en=nt[jt];if("string"!=typeof en){const Tn=bt.push(en)-1;nt[jt]=`\x3c!--\ufffd${Tn}\ufffd--\x3e`}}ie=HE(i,_e,l,d,m,M.cases[ze],nt.join(""),bt)|ie}ie&&function WE(i,l,d){i.push(l,1,d<<2|3)}(d,ie,V)}function VE(i){const l=[],d=[];let m=1,M=0;const V=Rp(i=i.replace(h_,function(ie,_e,Ae){return m="select"===Ae?0:1,M=parseInt(_e.substr(1),10),""}));for(let ie=0;ie<V.length;){let _e=V[ie++].trim();1===m&&(_e=_e.replace(/\s*(?:=)?(\w+)\s*/,"$1")),_e.length&&l.push(_e);const Ae=Rp(V[ie++]);l.length>d.length&&d.push(Ae)}return{type:m,mainBinding:M,cases:l,values:d}}function Rp(i){if(!i)return[];let l=0;const d=[],m=[],M=/[{}]/g;let V;for(M.lastIndex=0;V=M.exec(i);){const _e=V.index;if("}"==V[0]){if(d.pop(),0==d.length){const Ae=i.substring(l,_e);h_.test(Ae)?m.push(VE(Ae)):m.push(Ae),l=_e+1}}else{if(0==d.length){const Ae=i.substring(l,_e);m.push(Ae),l=_e+1}d.push("{")}}const ie=i.substring(l);return m.push(ie),m}function HE(i,l,d,m,M,V,ie,_e){const Ae=[],ze=[],nt=[];l.cases.push(V),l.create.push(Ae),l.remove.push(ze),l.update.push(nt);const jt=wd(lt()).getInertBodyElement(ie),en=Kl(jt)||jt;return en?__(i,l,d,m,Ae,ze,nt,en,M,_e,0):0}function __(i,l,d,m,M,V,ie,_e,Ae,ze,nt){let bt=0,jt=_e.firstChild;for(;jt;){const en=Na(i,d,1,null);switch(jt.nodeType){case Node.ELEMENT_NODE:const Tn=jt,Un=Tn.tagName.toLowerCase();if(sl.hasOwnProperty(Un)){Np(M,ig,Un,Ae,en),i.data[en]=Un;const vr=Tn.attributes;for(let zr=0;zr<vr.length;zr++){const gi=vr.item(zr),Ds=gi.name.toLowerCase();gi.value.match(ag)?Sc.hasOwnProperty(Ds)&&cd(ie,gi.value,en,gi.name,0,Gl[Ds]?Vl:ea[Ds]?il:null):YE(M,en,gi)}bt=__(i,l,d,m,M,V,ie,jt,en,ze,nt+1)|bt,y_(V,en,nt)}break;case Node.TEXT_NODE:const Yn=jt.textContent||"",nr=Yn.match(ag);Np(M,null,nr?"":Yn,Ae,en),y_(V,en,nt),nr&&(bt=cd(ie,Yn,en,null,0,null)|bt);break;case Node.COMMENT_NODE:const Pn=OE.exec(jt.textContent||"");if(Pn){const zr=ze[parseInt(Pn[1],10)];Np(M,og,"",Ae,en),v_(i,d,m,Ae,zr,en),GE(V,en,nt)}}jt=jt.nextSibling}return bt}function y_(i,l,d){0===d&&i.push(l)}function GE(i,l,d){0===d&&(i.push(~l),i.push(l))}function Np(i,l,d,m,M){null!==l&&i.push(l),i.push(d,M,function bE(i,l,d){return i|l<<17|d<<1}(0,m,M))}function YE(i,l,d){i.push(l<<1|1,d.name,d.value)}function T_(i,l,d=-1){const m=wt(),M=Cn(),V=20+i,ie=Ti(m.consts,l),_e=Jr();m.firstCreatePass&&function LE(i,l,d,m,M,V){const ie=Jr(),_e=[],Ae=[],ze=[[]];M=function jE(i,l){if(function UE(i){return-1===i}(l))return m_(i);{const d=i.indexOf(`:${l}\ufffd`)+2+l.toString().length,m=i.search(new RegExp(`\ufffd\\/\\*\\d+:${l}\ufffd`));return m_(i.substring(d,m))}}(M,V);const nt=function NE(i){return i.replace(RE," ")}(M).split(wE);for(let bt=0;bt<nt.length;bt++){let jt=nt[bt];if(0==(1&bt)){const en=Rp(jt);for(let Tn=0;Tn<en.length;Tn++){let Un=en[Tn];if(0==(1&Tn)){const Yn=Un;""!==Yn&&FE(i,ie,ze[0],_e,Ae,d,Yn)}else{const Yn=Un;if("object"!=typeof Yn)throw new Error(`Unable to parse ICU expression in "${M}" message.`);v_(i,d,Ae,l,Yn,g_(i,ie,ze[0],d,_e,"",!0).index)}}}else{const en=47===jt.charCodeAt(0),Un=(jt.charCodeAt(en?1:0),20+Number.parseInt(jt.substring(en?2:1)));if(en)ze.shift(),Ni(Jr(),!1);else{const Yn=TE(i,ze[0],Un);ze.unshift([]),Ni(Yn,!0)}}}i.data[m]={create:_e,update:Ae}}(m,null===_e?0:_e.index,M,V,ie,d);const Ae=m.data[V],nt=Wc(m,_e===M[6]?null:_e,M);(function DE(i,l,d,m){const M=i[11];for(let V=0;V<l.length;V++){const ie=l[V++],_e=l[V],Ae=(ie&Yi.COMMENT)===Yi.COMMENT,ze=(ie&Yi.APPEND_EAGERLY)===Yi.APPEND_EAGERLY,nt=ie>>>Yi.SHIFT;let bt=i[nt];null===bt&&(bt=i[nt]=Ae?M.createComment(_e):jc(M,_e)),ze&&null!==d&&xa(M,d,bt,m,!1)}})(M,Ae.create,nt,_e&&8&_e.type?M[_e.index]:null),ja(!0)}function C_(i,l,d){T_(i,l,d),function b_(){ja(!1)}()}function Lp(i){return function CE(i){i&&(Ff|=1<<Math.min(kf,31)),kf++}(ar(Cn(),ps(),i)),Lp}function S_(i){!function SE(i,l,d){if(kf>0){const m=i.data[d];u_(i,l,Array.isArray(m)?m:m.update,Uo()-kf-1,Ff)}Ff=0,kf=0}(wt(),Cn(),i+20)}function Fp(i,l,d,m,M){if(i=B(i),Array.isArray(i))for(let V=0;V<i.length;V++)Fp(i[V],l,d,m,M);else{const V=wt(),ie=Cn();let _e=pu(i)?i:B(i.provide),Ae=Yh(i);const ze=Hn(),nt=1048575&ze.providerIndexes,bt=ze.directiveStart,jt=ze.providerIndexes>>20;if(pu(i)||!i.multi){const en=new fa(Ae,M,Rf),Tn=Bp(_e,l,M?nt:nt+jt,bt);-1===Tn?(xr(St(ze,ie),V,_e),kp(V,i,l.length),l.push(_e),ze.directiveStart++,ze.directiveEnd++,M&&(ze.providerIndexes+=1048576),d.push(en),ie.push(en)):(d[Tn]=en,ie[Tn]=en)}else{const en=Bp(_e,l,nt+jt,bt),Tn=Bp(_e,l,nt,nt+jt),Un=en>=0&&d[en],Yn=Tn>=0&&d[Tn];if(M&&!Yn||!M&&!Un){xr(St(ze,ie),V,_e);const nr=function sT(i,l,d,m,M){const V=new fa(i,d,Rf);return V.multi=[],V.index=l,V.componentProviders=0,D_(V,M,m&&!d),V}(M?oT:iT,d.length,M,m,Ae);!M&&Yn&&(d[Tn].providerFactory=nr),kp(V,i,l.length,0),l.push(_e),ze.directiveStart++,ze.directiveEnd++,M&&(ze.providerIndexes+=1048576),d.push(nr),ie.push(nr)}else kp(V,i,en>-1?en:Tn,D_(d[M?Tn:en],Ae,!M&&m));!M&&m&&Yn&&d[Tn].componentProviders++}}}function kp(i,l,d,m){const M=pu(l),V=function sp(i){return!!i.useClass}(l);if(M||V){const Ae=(V?B(l.useClass):l).prototype.ngOnDestroy;if(Ae){const ze=i.destroyHooks||(i.destroyHooks=[]);if(!M&&l.multi){const nt=ze.indexOf(d);-1===nt?ze.push(d,[m,Ae]):ze[nt+1].push(m,Ae)}else ze.push(d,Ae)}}}function D_(i,l,d){return d&&i.componentProviders++,i.multi.push(l)-1}function Bp(i,l,d,m){for(let M=d;M<m;M++)if(l[M]===i)return M;return-1}function iT(i,l,d,m){return Up(this.multi,[])}function oT(i,l,d,m){const M=this.multi;let V;if(this.providerFactory){const ie=this.providerFactory.componentProviders,_e=io(d,d[1],this.providerFactory.index,m);V=_e.slice(0,ie),Up(M,V);for(let Ae=ie;Ae<_e.length;Ae++)V.push(_e[Ae])}else V=[],Up(M,V);return V}function Up(i,l){for(let d=0;d<i.length;d++)l.push((0,i[d])());return l}function M_(i,l=[]){return d=>{d.providersResolver=(m,M)=>function rT(i,l,d){const m=wt();if(m.firstCreatePass){const M=Ar(i);Fp(d,m.data,m.blueprint,M,!0),Fp(l,m.data,m.blueprint,M,!1)}}(m,M?M(i):i,l)}}class P_{}class uT{resolveComponentFactory(l){throw function lT(i){const l=Error(`No component factory found for ${v(i)}. Did you add it to @NgModule.entryComponents?`);return l.ngComponent=i,l}(l)}}let Uf=(()=>{class i{}return i.NULL=new uT,i})();function cT(){return dd(Hn(),Cn())}function dd(i,l){return new jf(yr(i,l))}let jf=(()=>{class i{constructor(d){this.nativeElement=d}}return i.__NG_ELEMENT_ID__=cT,i})();function dT(i){return i instanceof jf?i.nativeElement:i}class I_{}let fT=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function gT(){const i=Cn(),d=Gr(Hn().index,i);return function hT(i){return i[11]}(oi(d)?d:i)}(),i})(),pT=(()=>{class i{}return i.\u0275prov=qe({token:i,providedIn:"root",factory:()=>null}),i})();class O_{constructor(l){this.full=l,this.major=l.split(".")[0],this.minor=l.split(".")[1],this.patch=l.split(".").slice(2).join(".")}}const mT=new O_("13.2.0"),jp={};function lg(i,l,d,m,M=!1){for(;null!==d;){const V=l[d.index];if(null!==V&&m.push(_n(V)),si(V))for(let _e=10;_e<V.length;_e++){const Ae=V[_e],ze=Ae[1].firstChild;null!==ze&&lg(Ae[1],Ae,ze,m)}const ie=d.type;if(8&ie)lg(i,l,d.child,m);else if(32&ie){const _e=Xl(d,l);let Ae;for(;Ae=_e();)m.push(Ae)}else if(16&ie){const _e=ef(l,d);if(Array.isArray(_e))m.push(..._e);else{const Ae=Oa(l[16]);lg(Ae[1],Ae,_e,m,!0)}}d=M?d.projectionNext:d.next}return m}class Vf{constructor(l,d){this._lView=l,this._cdRefInjectingView=d,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const l=this._lView,d=l[1];return lg(d,l,d.firstChild,[])}get context(){return this._lView[8]}set context(l){this._lView[8]=l}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const l=this._lView[3];if(si(l)){const d=l[8],m=d?d.indexOf(this):-1;m>-1&&(Ku(l,m),xl(d,m))}this._attachedToViewContainer=!1}Wu(this._lView[1],this._lView)}onDestroy(l){Ih(this._lView[1],this._lView,null,l)}markForCheck(){Tf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Cf(this._lView[1],this._lView,this.context)}checkNoChanges(){!function qg(i,l,d){aa(!0);try{Cf(i,l,d)}finally{aa(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new _(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Vc(i,l){iu(i,l,l[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(l){if(this._attachedToViewContainer)throw new _(902,"");this._appRef=l}}class vT extends Vf{constructor(l){super(l),this._view=l}detectChanges(){Sf(this._view)}checkNoChanges(){!function Jg(i){aa(!0);try{Sf(i)}finally{aa(!1)}}(this._view)}get context(){return null}}class x_ extends Uf{constructor(l){super(),this.ngModule=l}resolveComponentFactory(l){const d=on(l);return new Vp(d,this.ngModule)}}function w_(i){const l=[];for(let d in i)i.hasOwnProperty(d)&&l.push({propName:i[d],templateName:d});return l}const yT=new Ii("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Ql});class Vp extends P_{constructor(l,d){super(),this.componentDef=l,this.ngModule=d,this.componentType=l.type,this.selector=function or(i){return i.map(En).join(",")}(l.selectors),this.ngContentSelectors=l.ngContentSelectors?l.ngContentSelectors:[],this.isBoundToModule=!!d}get inputs(){return w_(this.componentDef.inputs)}get outputs(){return w_(this.componentDef.outputs)}create(l,d,m,M){const V=(M=M||this.ngModule)?function ET(i,l){return{get:(d,m,M)=>{const V=i.get(d,jp,M);return V!==jp||m===jp?V:l.get(d,m,M)}}}(l,M.injector):l,ie=V.get(I_,Ut),_e=V.get(pT,null),Ae=ie.createRenderer(null,this.componentDef),ze=this.componentDef.selectors[0][0]||"div",nt=m?function Ah(i,l,d){if(dt(i))return i.selectRootElement(l,d===tt.ShadowDom);let m="string"==typeof l?i.querySelector(l):l;return m.textContent="",m}(Ae,m,this.componentDef.encapsulation):Ro(ie.createRenderer(null,this.componentDef),ze,function _T(i){const l=i.toLowerCase();return"svg"===l?"svg":"math"===l?"math":null}(ze)),bt=this.componentDef.onPush?576:528,jt=function Je(i,l){return{components:[],scheduler:i||Ql,clean:Qg,playerHandler:l||null,flags:0}}(),en=nd(0,null,null,1,0,null,null,null,null,null),Tn=ec(null,en,jt,bt,null,null,ie,Ae,_e,V);let Un,Yn;ts(Tn);try{const nr=function Le(i,l,d,m,M,V){const ie=d[1];d[20]=i;const Ae=fu(ie,20,2,"#host",null),ze=Ae.mergedAttrs=l.hostAttrs;null!==ze&&(rc(Ae,ze,!0),null!==i&&(Ps(M,i,ze),null!==Ae.classes&&qc(M,i,Ae.classes),null!==Ae.styles&&rf(M,i,Ae.styles)));const nt=m.createRenderer(i,l),bt=ec(d,Mh(l),null,l.onPush?64:16,d[20],Ae,m,nt,V||null,null);return ie.firstCreatePass&&(xr(St(Ae,d),ie,l.type),Nh(ie,Ae),_f(Ae,d.length,1)),nc(d,bt),d[20]=bt}(nt,this.componentDef,Tn,ie,Ae);if(nt)if(m)Ps(Ae,nt,["ng-version",mT.full]);else{const{attrs:Pn,classes:vr}=function zn(i){const l=[],d=[];let m=1,M=2;for(;m<i.length;){let V=i[m];if("string"==typeof V)2===M?""!==V&&l.push(V,i[++m]):8===M&&d.push(V);else{if(!E(M))break;M=V}m++}return{attrs:l,classes:d}}(this.componentDef.selectors[0]);Pn&&Ps(Ae,nt,Pn),vr&&vr.length>0&&qc(Ae,nt,vr.join(" "))}if(Yn=ai(en,20),void 0!==d){const Pn=Yn.projection=[];for(let vr=0;vr<this.ngContentSelectors.length;vr++){const zr=d[vr];Pn.push(null!=zr?Array.from(zr):null)}}Un=function $e(i,l,d,m,M){const V=d[1],ie=function Ng(i,l,d){const m=Hn();i.firstCreatePass&&(d.providersResolver&&d.providersResolver(d),Lh(i,m,l,Na(i,l,1,null),d));const M=io(l,i,m.directiveStart,m);Qi(M,l);const V=yr(m,l);return V&&Qi(V,l),M}(V,d,l);if(m.components.push(ie),i[8]=ie,M&&M.forEach(Ae=>Ae(ie,l)),l.contentQueries){const Ae=Hn();l.contentQueries(1,ie,Ae.directiveStart)}const _e=Hn();return!V.firstCreatePass||null===l.hostBindings&&null===l.hostAttrs||(rs(_e.index),wh(d[1],_e,0,_e.directiveStart,_e.directiveEnd,l),Rh(l,ie)),ie}(nr,this.componentDef,Tn,jt,[st]),tc(en,Tn,null)}finally{ns()}return new bT(this.componentType,Un,dd(Yn,Tn),Tn,Yn)}}class bT extends class aT{}{constructor(l,d,m,M,V){super(),this.location=m,this._rootLView=M,this._tNode=V,this.instance=d,this.hostView=this.changeDetectorRef=new vT(M),this.componentType=l}get injector(){return new zs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(l){this.hostView.onDestroy(l)}}class fd{}class R_{}const hd=new Map;class F_ extends fd{constructor(l,d){super(),this._parent=d,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new x_(this);const m=Zn(l);this._bootstrapComponents=Ho(m.bootstrap),this._r3Injector=Wh(l,d,[{provide:fd,useValue:this},{provide:Uf,useValue:this.componentFactoryResolver}],v(l)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(l)}get(l,d=hs.THROW_IF_NOT_FOUND,m=Z.Default){return l===hs||l===fd||l===Pf?this:this._r3Injector.get(l,d,m)}destroy(){const l=this._r3Injector;!l.destroyed&&l.destroy(),this.destroyCbs.forEach(d=>d()),this.destroyCbs=null}onDestroy(l){this.destroyCbs.push(l)}}class Hp extends R_{constructor(l){super(),this.moduleType=l,null!==Zn(l)&&function ST(i){const l=new Set;!function d(m){const M=Zn(m,!0),V=M.id;null!==V&&(function N_(i,l,d){if(l&&l!==d)throw new Error(`Duplicate module registered for ${i} - ${v(l)} vs ${v(l.name)}`)}(V,hd.get(V),m),hd.set(V,m));const ie=Ho(M.imports);for(const _e of ie)l.has(_e)||(l.add(_e),d(_e))}(i)}(l)}create(l){return new F_(this.moduleType,l)}}function k_(i,l,d,m){return function j_(i,l,d,m,M,V){const ie=l+d;return ar(i,ie,M)?ei(i,ie+1,V?m.call(V,M):m(M)):Hf(i,ie+1)}(Cn(),$i(),i,l,d,m)}function B_(i,l,d,m,M){return V_(Cn(),$i(),i,l,d,m,M)}function U_(i,l,d,m,M,V){return function H_(i,l,d,m,M,V,ie,_e){const Ae=l+d;return function hi(i,l,d,m,M){const V=ti(i,l,d,m);return ar(i,l+2,M)||V}(i,Ae,M,V,ie)?ei(i,Ae+3,_e?m.call(_e,M,V,ie):m(M,V,ie)):Hf(i,Ae+3)}(Cn(),$i(),i,l,d,m,M,V)}function Hf(i,l){const d=i[l];return d===An?void 0:d}function V_(i,l,d,m,M,V,ie){const _e=l+d;return ti(i,_e,M,V)?ei(i,_e+2,ie?m.call(ie,M,V):m(M,V)):Hf(i,_e+2)}function W_(i,l){const d=wt();let m;const M=i+20;d.firstCreatePass?(m=function wT(i,l){if(l)for(let d=l.length-1;d>=0;d--){const m=l[d];if(i===m.name)return m}}(l,d.pipeRegistry),d.data[M]=m,m.onDestroy&&(d.destroyHooks||(d.destroyHooks=[])).push(M,m.onDestroy)):m=d.data[M];const V=m.factory||(m.factory=Ur(m.type)),ie=be(Rf);try{const _e=Ce(!1),Ae=V();return Ce(_e),function t0(i,l,d,m){d>=i.data.length&&(i.data[d]=null,i.blueprint[d]=null),l[d]=m}(d,Cn(),M,Ae),Ae}finally{be(ie)}}function Y_(i,l,d,m){const M=i+20,V=Cn(),ie=jr(V,M);return function Gf(i,l){return i[1].data[l].pure}(V,M)?V_(V,$i(),l,ie.transform,d,m,ie):ie.transform(d,m)}function Gp(i){return l=>{setTimeout(i,void 0,l)}}const Ba=class kT extends r.x{constructor(l=!1){super(),this.__isAsync=l}emit(l){super.next(l)}subscribe(l,d,m){var M,V,ie;let _e=l,Ae=d||(()=>null),ze=m;if(l&&"object"==typeof l){const bt=l;_e=null===(M=bt.next)||void 0===M?void 0:M.bind(bt),Ae=null===(V=bt.error)||void 0===V?void 0:V.bind(bt),ze=null===(ie=bt.complete)||void 0===ie?void 0:ie.bind(bt)}this.__isAsync&&(Ae=Gp(Ae),_e&&(_e=Gp(_e)),ze&&(ze=Gp(ze)));const nt=super.subscribe({next:_e,error:Ae,complete:ze});return l instanceof e.w0&&l.add(nt),nt}};function BT(){return this._results[gr()]()}class Kp{constructor(l=!1){this._emitDistinctChangesOnly=l,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const d=gr(),m=Kp.prototype;m[d]||(m[d]=BT)}get changes(){return this._changes||(this._changes=new Ba)}get(l){return this._results[l]}map(l){return this._results.map(l)}filter(l){return this._results.filter(l)}find(l){return this._results.find(l)}reduce(l,d){return this._results.reduce(l,d)}forEach(l){this._results.forEach(l)}some(l){return this._results.some(l)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(l,d){const m=this;m.dirty=!1;const M=yi(l);(this._changesDetected=!function Su(i,l,d){if(i.length!==l.length)return!1;for(let m=0;m<i.length;m++){let M=i[m],V=l[m];if(d&&(M=d(M),V=d(V)),V!==M)return!1}return!0}(m._results,M,d))&&(m._results=M,m.length=M.length,m.last=M[this.length-1],m.first=M[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Kf=(()=>{class i{}return i.__NG_ELEMENT_ID__=VT,i})();const UT=Kf,jT=class extends UT{constructor(l,d,m){super(),this._declarationLView=l,this._declarationTContainer=d,this.elementRef=m}createEmbeddedView(l){const d=this._declarationTContainer.tViews,m=ec(this._declarationLView,d,l,16,null,d.declTNode,null,null,null,null);m[17]=this._declarationLView[this._declarationTContainer.index];const V=this._declarationLView[19];return null!==V&&(m[19]=V.createEmbeddedView(d)),tc(d,m,l),new Vf(m)}};function VT(){return ug(Hn(),Cn())}function ug(i,l){return 4&i.type?new jT(l,i,dd(i,l)):null}let cg=(()=>{class i{}return i.__NG_ELEMENT_ID__=HT,i})();function HT(){return z_(Hn(),Cn())}const GT=cg,Z_=class extends GT{constructor(l,d,m){super(),this._lContainer=l,this._hostTNode=d,this._hostLView=m}get element(){return dd(this._hostTNode,this._hostLView)}get injector(){return new zs(this._hostTNode,this._hostLView)}get parentInjector(){const l=qn(this._hostTNode,this._hostLView);if(To(l)){const d=is(l,this._hostLView),m=Is(l);return new zs(d[1].data[m+8],d)}return new zs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(l){const d=$_(this._lContainer);return null!==d&&d[l]||null}get length(){return this._lContainer.length-10}createEmbeddedView(l,d,m){const M=l.createEmbeddedView(d||{});return this.insert(M,m),M}createComponent(l,d,m,M,V){const ie=l&&!function va(i){return"function"==typeof i}(l);let _e;if(ie)_e=d;else{const bt=d||{};_e=bt.index,m=bt.injector,M=bt.projectableNodes,V=bt.ngModuleRef}const Ae=ie?l:new Vp(on(l)),ze=m||this.parentInjector;if(!V&&null==Ae.ngModule&&ze){const bt=ze.get(fd,null);bt&&(V=bt)}const nt=Ae.create(ze,M,void 0,V);return this.insert(nt.hostView,_e),nt}insert(l,d){const m=l._lView,M=m[1];if(function Eo(i){return si(i[3])}(m)){const nt=this.indexOf(l);if(-1!==nt)this.detach(nt);else{const bt=m[3],jt=new Z_(bt,bt[6],bt[3]);jt.detach(jt.indexOf(l))}}const V=this._adjustIndex(d),ie=this._lContainer;!function gh(i,l,d,m){const M=10+m,V=d.length;m>0&&(d[M-1][4]=l),m<V-10?(l[4]=d[M],cc(d,10+m,l)):(d.push(l),l[4]=null),l[3]=d;const ie=l[17];null!==ie&&d!==ie&&function Hc(i,l){const d=i[9];l[16]!==l[3][3][16]&&(i[2]=!0),null===d?i[9]=[l]:d.push(l)}(ie,l);const _e=l[19];null!==_e&&_e.insertView(i),l[2]|=128}(M,m,ie,V);const _e=zc(V,ie),Ae=m[11],ze=Zu(Ae,ie[7]);return null!==ze&&function No(i,l,d,m,M,V){m[0]=M,m[6]=l,iu(i,m,d,1,M,V)}(M,ie[6],Ae,m,ze,_e),l.attachToViewContainerRef(),cc(Wp(ie),V,l),l}move(l,d){return this.insert(l,d)}indexOf(l){const d=$_(this._lContainer);return null!==d?d.indexOf(l):-1}remove(l){const d=this._adjustIndex(l,-1),m=Ku(this._lContainer,d);m&&(xl(Wp(this._lContainer),d),Wu(m[1],m))}detach(l){const d=this._adjustIndex(l,-1),m=Ku(this._lContainer,d);return m&&null!=xl(Wp(this._lContainer),d)?new Vf(m):null}_adjustIndex(l,d=0){return null==l?this.length+d:l}};function $_(i){return i[8]}function Wp(i){return i[8]||(i[8]=[])}function z_(i,l){let d;const m=l[i.index];if(si(m))d=m;else{let M;if(8&i.type)M=_n(m);else{const V=l[11];M=V.createComment("");const ie=yr(i,l);xa(V,Zu(V,ie),M,function Zc(i,l){return dt(i)?i.nextSibling(l):l.nextSibling}(V,ie),!1)}l[i.index]=d=Fh(m,l,M,i),nc(l,d)}return new Z_(d,i,l)}class Yp{constructor(l){this.queryList=l,this.matches=null}clone(){return new Yp(this.queryList)}setDirty(){this.queryList.setDirty()}}class Zp{constructor(l=[]){this.queries=l}createEmbeddedView(l){const d=l.queries;if(null!==d){const m=null!==l.contentQueries?l.contentQueries[0]:d.length,M=[];for(let V=0;V<m;V++){const ie=d.getByIndex(V);M.push(this.queries[ie.indexInDeclarationView].clone())}return new Zp(M)}return null}insertView(l){this.dirtyQueriesWithMatches(l)}detachView(l){this.dirtyQueriesWithMatches(l)}dirtyQueriesWithMatches(l){for(let d=0;d<this.queries.length;d++)null!==iy(l,d).matches&&this.queries[d].setDirty()}}class q_{constructor(l,d,m=null){this.predicate=l,this.flags=d,this.read=m}}class $p{constructor(l=[]){this.queries=l}elementStart(l,d){for(let m=0;m<this.queries.length;m++)this.queries[m].elementStart(l,d)}elementEnd(l){for(let d=0;d<this.queries.length;d++)this.queries[d].elementEnd(l)}embeddedTView(l){let d=null;for(let m=0;m<this.length;m++){const M=null!==d?d.length:0,V=this.getByIndex(m).embeddedTView(l,M);V&&(V.indexInDeclarationView=m,null!==d?d.push(V):d=[V])}return null!==d?new $p(d):null}template(l,d){for(let m=0;m<this.queries.length;m++)this.queries[m].template(l,d)}getByIndex(l){return this.queries[l]}get length(){return this.queries.length}track(l){this.queries.push(l)}}class zp{constructor(l,d=-1){this.metadata=l,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=d}elementStart(l,d){this.isApplyingToNode(d)&&this.matchTNode(l,d)}elementEnd(l){this._declarationNodeIndex===l.index&&(this._appliesToNextNode=!1)}template(l,d){this.elementStart(l,d)}embeddedTView(l,d){return this.isApplyingToNode(l)?(this.crossesNgTemplate=!0,this.addMatch(-l.index,d),new zp(this.metadata)):null}isApplyingToNode(l){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const d=this._declarationNodeIndex;let m=l.parent;for(;null!==m&&8&m.type&&m.index!==d;)m=m.parent;return d===(null!==m?m.index:-1)}return this._appliesToNextNode}matchTNode(l,d){const m=this.metadata.predicate;if(Array.isArray(m))for(let M=0;M<m.length;M++){const V=m[M];this.matchTNodeWithReadOption(l,d,YT(d,V)),this.matchTNodeWithReadOption(l,d,Yo(d,l,V,!1,!1))}else m===Kf?4&d.type&&this.matchTNodeWithReadOption(l,d,-1):this.matchTNodeWithReadOption(l,d,Yo(d,l,m,!1,!1))}matchTNodeWithReadOption(l,d,m){if(null!==m){const M=this.metadata.read;if(null!==M)if(M===jf||M===cg||M===Kf&&4&d.type)this.addMatch(d.index,-2);else{const V=Yo(d,l,M,!1,!1);null!==V&&this.addMatch(d.index,V)}else this.addMatch(d.index,m)}}addMatch(l,d){null===this.matches?this.matches=[l,d]:this.matches.push(l,d)}}function YT(i,l){const d=i.localNames;if(null!==d)for(let m=0;m<d.length;m+=2)if(d[m]===l)return d[m+1];return null}function $T(i,l,d,m){return-1===d?function ZT(i,l){return 11&i.type?dd(i,l):4&i.type?ug(i,l):null}(l,i):-2===d?function zT(i,l,d){return d===jf?dd(l,i):d===Kf?ug(l,i):d===cg?z_(l,i):void 0}(i,l,m):io(i,i[1],d,l)}function J_(i,l,d,m){const M=l[19].queries[m];if(null===M.matches){const V=i.data,ie=d.matches,_e=[];for(let Ae=0;Ae<ie.length;Ae+=2){const ze=ie[Ae];_e.push(ze<0?null:$T(l,V[ze],ie[Ae+1],d.metadata.read))}M.matches=_e}return M.matches}function qp(i,l,d,m){const M=i.queries.getByIndex(d),V=M.matches;if(null!==V){const ie=J_(i,l,M,d);for(let _e=0;_e<V.length;_e+=2){const Ae=V[_e];if(Ae>0)m.push(ie[_e/2]);else{const ze=V[_e+1],nt=l[-Ae];for(let bt=10;bt<nt.length;bt++){const jt=nt[bt];jt[17]===jt[3]&&qp(jt[1],jt,ze,m)}if(null!==nt[9]){const bt=nt[9];for(let jt=0;jt<bt.length;jt++){const en=bt[jt];qp(en[1],en,ze,m)}}}}}return m}function Q_(i){const l=Cn(),d=wt(),m=Ha();Ga(m+1);const M=iy(d,m);if(i.dirty&&Oo(l)===(2==(2&M.metadata.flags))){if(null===M.matches)i.reset([]);else{const V=M.crossesNgTemplate?qp(d,l,m,[]):J_(d,l,M,m);i.reset(V,dT),i.notifyOnChanges()}return!0}return!1}function X_(i,l,d){const m=wt();m.firstCreatePass&&(ry(m,new q_(i,l,d),-1),2==(2&l)&&(m.staticViewQueries=!0)),ny(m,Cn(),l)}function ey(i,l,d,m){const M=wt();if(M.firstCreatePass){const V=Hn();ry(M,new q_(l,d,m),V.index),function JT(i,l){const d=i.contentQueries||(i.contentQueries=[]);l!==(d.length?d[d.length-1]:-1)&&d.push(i.queries.length-1,l)}(M,i),2==(2&d)&&(M.staticContentQueries=!0)}ny(M,Cn(),d)}function ty(){return function qT(i,l){return i[19].queries[l].queryList}(Cn(),Ha())}function ny(i,l,d){const m=new Kp(4==(4&d));Ih(i,l,m,m.destroy),null===l[19]&&(l[19]=new Zp),l[19].queries.push(new Yp(m))}function ry(i,l,d){null===i.queries&&(i.queries=new $p),i.queries.track(new zp(l,d))}function iy(i,l){return i.queries.getByIndex(l)}function oy(i,l){return ug(i,l)}function hg(...i){}const nm=new Ii("Application Initializer");let pd=(()=>{class i{constructor(d){this.appInits=d,this.resolve=hg,this.reject=hg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((m,M)=>{this.resolve=m,this.reject=M})}runInitializers(){if(this.initialized)return;const d=[],m=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let M=0;M<this.appInits.length;M++){const V=this.appInits[M]();if(Tp(V))d.push(V);else if(sv(V)){const ie=new Promise((_e,Ae)=>{V.subscribe({complete:_e,error:Ae})});d.push(ie)}}Promise.all(d).then(()=>{m()}).catch(M=>{this.reject(M)}),0===d.length&&m(),this.initialized=!0}}return i.\u0275fac=function(d){return new(d||i)(Ji(nm,8))},i.\u0275prov=qe({token:i,factory:i.\u0275fac}),i})();const by=new Ii("AppId"),pb={provide:by,useFactory:function gb(){return`${rm()}${rm()}${rm()}`},deps:[]};function rm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Cy=new Ii("Platform Initializer"),Sy=new Ii("Platform ID"),Dy=new Ii("appBootstrapListener");let My=(()=>{class i{log(d){console.log(d)}warn(d){console.warn(d)}}return i.\u0275fac=function(d){return new(d||i)},i.\u0275prov=qe({token:i,factory:i.\u0275fac}),i})();const gg=new Ii("LocaleId"),Py=new Ii("DefaultCurrencyCode");class mb{constructor(l,d){this.ngModuleFactory=l,this.componentFactories=d}}let im=(()=>{class i{compileModuleSync(d){return new Hp(d)}compileModuleAsync(d){return Promise.resolve(this.compileModuleSync(d))}compileModuleAndAllComponentsSync(d){const m=this.compileModuleSync(d),V=Ho(Zn(d).declarations).reduce((ie,_e)=>{const Ae=on(_e);return Ae&&ie.push(new Vp(Ae)),ie},[]);return new mb(m,V)}compileModuleAndAllComponentsAsync(d){return Promise.resolve(this.compileModuleAndAllComponentsSync(d))}clearCache(){}clearCacheFor(d){}getModuleId(d){}}return i.\u0275fac=function(d){return new(d||i)},i.\u0275prov=qe({token:i,factory:i.\u0275fac}),i})();const _b=(()=>Promise.resolve(0))();function om(i){"undefined"==typeof Zone?_b.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Ss{constructor({enableLongStackTrace:l=!1,shouldCoalesceEventChangeDetection:d=!1,shouldCoalesceRunChangeDetection:m=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ba(!1),this.onMicrotaskEmpty=new Ba(!1),this.onStable=new Ba(!1),this.onError=new Ba(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const M=this;M._nesting=0,M._outer=M._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(M._inner=M._inner.fork(new Zone.TaskTrackingZoneSpec)),l&&Zone.longStackTraceZoneSpec&&(M._inner=M._inner.fork(Zone.longStackTraceZoneSpec)),M.shouldCoalesceEventChangeDetection=!m&&d,M.shouldCoalesceRunChangeDetection=m,M.lastRequestAnimationFrameId=-1,M.nativeRequestAnimationFrame=function yb(){let i=Dt.requestAnimationFrame,l=Dt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&l){const d=i[Zone.__symbol__("OriginalDelegate")];d&&(i=d);const m=l[Zone.__symbol__("OriginalDelegate")];m&&(l=m)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:l}}().nativeRequestAnimationFrame,function bb(i){const l=()=>{!function Tb(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Dt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,am(i),i.isCheckStableRunning=!0,sm(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),am(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(d,m,M,V,ie,_e)=>{try{return Ay(i),d.invokeTask(M,V,ie,_e)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===V.type||i.shouldCoalesceRunChangeDetection)&&l(),Iy(i)}},onInvoke:(d,m,M,V,ie,_e,Ae)=>{try{return Ay(i),d.invoke(M,V,ie,_e,Ae)}finally{i.shouldCoalesceRunChangeDetection&&l(),Iy(i)}},onHasTask:(d,m,M,V)=>{d.hasTask(M,V),m===M&&("microTask"==V.change?(i._hasPendingMicrotasks=V.microTask,am(i),sm(i)):"macroTask"==V.change&&(i.hasPendingMacrotasks=V.macroTask))},onHandleError:(d,m,M,V)=>(d.handleError(M,V),i.runOutsideAngular(()=>i.onError.emit(V)),!1)})}(M)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ss.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ss.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(l,d,m){return this._inner.run(l,d,m)}runTask(l,d,m,M){const V=this._inner,ie=V.scheduleEventTask("NgZoneEvent: "+M,l,Eb,hg,hg);try{return V.runTask(ie,d,m)}finally{V.cancelTask(ie)}}runGuarded(l,d,m){return this._inner.runGuarded(l,d,m)}runOutsideAngular(l){return this._outer.run(l)}}const Eb={};function sm(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function am(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Ay(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Iy(i){i._nesting--,sm(i)}class Cb{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ba,this.onMicrotaskEmpty=new Ba,this.onStable=new Ba,this.onError=new Ba}run(l,d,m){return l.apply(d,m)}runGuarded(l,d,m){return l.apply(d,m)}runOutsideAngular(l){return l()}runTask(l,d,m,M){return l.apply(d,m)}}let Oy=(()=>{class i{constructor(d){this._ngZone=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),d.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ss.assertNotInAngularZone(),om(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())om(()=>{for(;0!==this._callbacks.length;){let d=this._callbacks.pop();clearTimeout(d.timeoutId),d.doneCb(this._didWork)}this._didWork=!1});else{let d=this.getPendingTasks();this._callbacks=this._callbacks.filter(m=>!m.updateCb||!m.updateCb(d)||(clearTimeout(m.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(d=>({source:d.source,creationLocation:d.creationLocation,data:d.data})):[]}addCallback(d,m,M){let V=-1;m&&m>0&&(V=setTimeout(()=>{this._callbacks=this._callbacks.filter(ie=>ie.timeoutId!==V),d(this._didWork,this.getPendingTasks())},m)),this._callbacks.push({doneCb:d,timeoutId:V,updateCb:M})}whenStable(d,m,M){if(M&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(d,m,M),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(d,m,M){return[]}}return i.\u0275fac=function(d){return new(d||i)(Ji(Ss))},i.\u0275prov=qe({token:i,factory:i.\u0275fac}),i})(),xy=(()=>{class i{constructor(){this._applications=new Map,lm.addToWindow(this)}registerApplication(d,m){this._applications.set(d,m)}unregisterApplication(d){this._applications.delete(d)}unregisterAllApplications(){this._applications.clear()}getTestability(d){return this._applications.get(d)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(d,m=!0){return lm.findTestabilityInTree(this,d,m)}}return i.\u0275fac=function(d){return new(d||i)},i.\u0275prov=qe({token:i,factory:i.\u0275fac}),i})();class Sb{addToWindow(l){}findTestabilityInTree(l,d,m){return null}}function Db(i){lm=i}let oa,lm=new Sb;const wy=new Ii("AllowMultipleToken");class Ab{constructor(l,d){this.name=l,this.token=d}}function Ry(i,l,d=[]){const m=`Platform: ${l}`,M=new Ii(m);return(V=[])=>{let ie=Ny();if(!ie||ie.injector.get(wy,!1))if(i)i(d.concat(V).concat({provide:M,useValue:!0}));else{const _e=d.concat(V).concat({provide:M,useValue:!0},{provide:Af,useValue:"platform"});!function Ib(i){if(oa&&!oa.destroyed&&!oa.injector.get(wy,!1))throw new _(400,"");oa=i.get(Ly);const l=i.get(Cy,null);l&&l.forEach(d=>d())}(hs.create({providers:_e,name:m}))}return function Ob(i){const l=Ny();if(!l)throw new _(401,"");return l}()}}function Ny(){return oa&&!oa.destroyed?oa:null}let Ly=(()=>{class i{constructor(d){this._injector=d,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(d,m){const _e=function xb(i,l){let d;return d="noop"===i?new Cb:("zone.js"===i?void 0:i)||new Ss({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==l?void 0:l.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==l?void 0:l.ngZoneRunCoalescing)}),d}(m?m.ngZone:void 0,{ngZoneEventCoalescing:m&&m.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:m&&m.ngZoneRunCoalescing||!1}),Ae=[{provide:Ss,useValue:_e}];return _e.run(()=>{const ze=hs.create({providers:Ae,parent:this.injector,name:d.moduleType.name}),nt=d.create(ze),bt=nt.injector.get(dl,null);if(!bt)throw new _(402,"");return _e.runOutsideAngular(()=>{const jt=_e.onError.subscribe({next:en=>{bt.handleError(en)}});nt.onDestroy(()=>{um(this._modules,nt),jt.unsubscribe()})}),function wb(i,l,d){try{const m=d();return Tp(m)?m.catch(M=>{throw l.runOutsideAngular(()=>i.handleError(M)),M}):m}catch(m){throw l.runOutsideAngular(()=>i.handleError(m)),m}}(bt,_e,()=>{const jt=nt.injector.get(pd);return jt.runInitializers(),jt.donePromise.then(()=>(function gE(i){(function Ie(i,l){null==i&&Re(l,i,null,"!=")})(i,"Expected localeId to be defined"),"string"==typeof i&&(e_=i.toLowerCase().replace(/_/g,"-"))}(nt.injector.get(gg,rg)||rg),this._moduleDoBootstrap(nt),nt))})})}bootstrapModule(d,m=[]){const M=Fy({},m);return function Mb(i,l,d){const m=new Hp(d);return Promise.resolve(m)}(0,0,d).then(V=>this.bootstrapModuleFactory(V,M))}_moduleDoBootstrap(d){const m=d.injector.get(Yf);if(d._bootstrapComponents.length>0)d._bootstrapComponents.forEach(M=>m.bootstrap(M));else{if(!d.instance.ngDoBootstrap)throw new _(403,"");d.instance.ngDoBootstrap(m)}this._modules.push(d)}onDestroy(d){this._destroyListeners.push(d)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new _(404,"");this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(d){return new(d||i)(Ji(hs))},i.\u0275prov=qe({token:i,factory:i.\u0275fac}),i})();function Fy(i,l){return Array.isArray(l)?l.reduce(Fy,i):Object.assign(Object.assign({},i),l)}let Yf=(()=>{class i{constructor(d,m,M,V,ie){this._zone=d,this._injector=m,this._exceptionHandler=M,this._componentFactoryResolver=V,this._initStatus=ie,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _e=new S.y(ze=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{ze.next(this._stable),ze.complete()})}),Ae=new S.y(ze=>{let nt;this._zone.runOutsideAngular(()=>{nt=this._zone.onStable.subscribe(()=>{Ss.assertNotInAngularZone(),om(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,ze.next(!0))})})});const bt=this._zone.onUnstable.subscribe(()=>{Ss.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{ze.next(!1)}))});return()=>{nt.unsubscribe(),bt.unsubscribe()}});this.isStable=(0,R.T)(_e,Ae.pipe(function b(i={}){const{connector:l=(()=>new r.x),resetOnError:d=!0,resetOnComplete:m=!0,resetOnRefCountZero:M=!0}=i;return V=>{let ie,_e,Ae,ze=0,nt=!1,bt=!1;const jt=()=>{null==_e||_e.unsubscribe(),_e=void 0},en=()=>{jt(),ie=Ae=void 0,nt=bt=!1},Tn=()=>{const Un=ie;en(),null==Un||Un.unsubscribe()};return(0,L.e)((Un,Yn)=>{ze++,!bt&&!nt&&jt();const nr=Ae=null!=Ae?Ae:l();Yn.add(()=>{ze--,0===ze&&!bt&&!nt&&(_e=f(Tn,M))}),nr.subscribe(Yn),!ie&&ze>0&&(ie=new U.Hp({next:Pn=>nr.next(Pn),error:Pn=>{bt=!0,jt(),_e=f(en,d,Pn),nr.error(Pn)},complete:()=>{nt=!0,jt(),_e=f(en,m),nr.complete()}}),(0,j.Xf)(Un).subscribe(ie))})(V)}}()))}bootstrap(d,m){if(!this._initStatus.done)throw new _(405,"");let M;M=d instanceof P_?d:this._componentFactoryResolver.resolveComponentFactory(d),this.componentTypes.push(M.componentType);const V=function Pb(i){return i.isBoundToModule}(M)?void 0:this._injector.get(fd),_e=M.create(hs.NULL,[],m||M.selector,V),Ae=_e.location.nativeElement,ze=_e.injector.get(Oy,null),nt=ze&&_e.injector.get(xy);return ze&&nt&&nt.registerApplication(Ae,ze),_e.onDestroy(()=>{this.detachView(_e.hostView),um(this.components,_e),nt&&nt.unregisterApplication(Ae)}),this._loadComponent(_e),_e}tick(){if(this._runningTick)throw new _(101,"");try{this._runningTick=!0;for(let d of this._views)d.detectChanges()}catch(d){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(d))}finally{this._runningTick=!1}}attachView(d){const m=d;this._views.push(m),m.attachToAppRef(this)}detachView(d){const m=d;um(this._views,m),m.detachFromAppRef()}_loadComponent(d){this.attachView(d.hostView),this.tick(),this.components.push(d),this._injector.get(Dy,[]).concat(this._bootstrapListeners).forEach(M=>M(d))}ngOnDestroy(){this._views.slice().forEach(d=>d.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(d){return new(d||i)(Ji(Ss),Ji(hs),Ji(dl),Ji(Uf),Ji(pd))},i.\u0275prov=qe({token:i,factory:i.\u0275fac}),i})();function um(i,l){const d=i.indexOf(l);d>-1&&i.splice(d,1)}let By=!0;function Nb(){By=!1}let Lb=(()=>{class i{}return i.__NG_ELEMENT_ID__=Fb,i})();function Fb(i){return function kb(i,l,d){if(ci(i)&&!d){const m=Gr(i.index,l);return new Vf(m,m)}return 47&i.type?new Vf(l[16],l):null}(Hn(),Cn(),16==(16&i))}class Wy{constructor(){}supports(l){return ri(l)}create(l){return new Gb(l)}}const Hb=(i,l)=>l;class Gb{constructor(l){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=l||Hb}forEachItem(l){let d;for(d=this._itHead;null!==d;d=d._next)l(d)}forEachOperation(l){let d=this._itHead,m=this._removalsHead,M=0,V=null;for(;d||m;){const ie=!m||d&&d.currentIndex<Zy(m,M,V)?d:m,_e=Zy(ie,M,V),Ae=ie.currentIndex;if(ie===m)M--,m=m._nextRemoved;else if(d=d._next,null==ie.previousIndex)M++;else{V||(V=[]);const ze=_e-M,nt=Ae-M;if(ze!=nt){for(let jt=0;jt<ze;jt++){const en=jt<V.length?V[jt]:V[jt]=0,Tn=en+jt;nt<=Tn&&Tn<ze&&(V[jt]=en+1)}V[ie.previousIndex]=nt-ze}}_e!==Ae&&l(ie,_e,Ae)}}forEachPreviousItem(l){let d;for(d=this._previousItHead;null!==d;d=d._nextPrevious)l(d)}forEachAddedItem(l){let d;for(d=this._additionsHead;null!==d;d=d._nextAdded)l(d)}forEachMovedItem(l){let d;for(d=this._movesHead;null!==d;d=d._nextMoved)l(d)}forEachRemovedItem(l){let d;for(d=this._removalsHead;null!==d;d=d._nextRemoved)l(d)}forEachIdentityChange(l){let d;for(d=this._identityChangesHead;null!==d;d=d._nextIdentityChange)l(d)}diff(l){if(null==l&&(l=[]),!ri(l))throw new _(900,"");return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let M,V,ie,d=this._itHead,m=!1;if(Array.isArray(l)){this.length=l.length;for(let _e=0;_e<this.length;_e++)V=l[_e],ie=this._trackByFn(_e,V),null!==d&&Object.is(d.trackById,ie)?(m&&(d=this._verifyReinsertion(d,V,ie,_e)),Object.is(d.item,V)||this._addIdentityChange(d,V)):(d=this._mismatch(d,V,ie,_e),m=!0),d=d._next}else M=0,function Di(i,l){if(Array.isArray(i))for(let d=0;d<i.length;d++)l(i[d]);else{const d=i[gr()]();let m;for(;!(m=d.next()).done;)l(m.value)}}(l,_e=>{ie=this._trackByFn(M,_e),null!==d&&Object.is(d.trackById,ie)?(m&&(d=this._verifyReinsertion(d,_e,ie,M)),Object.is(d.item,_e)||this._addIdentityChange(d,_e)):(d=this._mismatch(d,_e,ie,M),m=!0),d=d._next,M++}),this.length=M;return this._truncate(d),this.collection=l,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let l;for(l=this._previousItHead=this._itHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._additionsHead;null!==l;l=l._nextAdded)l.previousIndex=l.currentIndex;for(this._additionsHead=this._additionsTail=null,l=this._movesHead;null!==l;l=l._nextMoved)l.previousIndex=l.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(l,d,m,M){let V;return null===l?V=this._itTail:(V=l._prev,this._remove(l)),null!==(l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(m,null))?(Object.is(l.item,d)||this._addIdentityChange(l,d),this._reinsertAfter(l,V,M)):null!==(l=null===this._linkedRecords?null:this._linkedRecords.get(m,M))?(Object.is(l.item,d)||this._addIdentityChange(l,d),this._moveAfter(l,V,M)):l=this._addAfter(new Kb(d,m),V,M),l}_verifyReinsertion(l,d,m,M){let V=null===this._unlinkedRecords?null:this._unlinkedRecords.get(m,null);return null!==V?l=this._reinsertAfter(V,l._prev,M):l.currentIndex!=M&&(l.currentIndex=M,this._addToMoves(l,M)),l}_truncate(l){for(;null!==l;){const d=l._next;this._addToRemovals(this._unlink(l)),l=d}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(l,d,m){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(l);const M=l._prevRemoved,V=l._nextRemoved;return null===M?this._removalsHead=V:M._nextRemoved=V,null===V?this._removalsTail=M:V._prevRemoved=M,this._insertAfter(l,d,m),this._addToMoves(l,m),l}_moveAfter(l,d,m){return this._unlink(l),this._insertAfter(l,d,m),this._addToMoves(l,m),l}_addAfter(l,d,m){return this._insertAfter(l,d,m),this._additionsTail=null===this._additionsTail?this._additionsHead=l:this._additionsTail._nextAdded=l,l}_insertAfter(l,d,m){const M=null===d?this._itHead:d._next;return l._next=M,l._prev=d,null===M?this._itTail=l:M._prev=l,null===d?this._itHead=l:d._next=l,null===this._linkedRecords&&(this._linkedRecords=new Yy),this._linkedRecords.put(l),l.currentIndex=m,l}_remove(l){return this._addToRemovals(this._unlink(l))}_unlink(l){null!==this._linkedRecords&&this._linkedRecords.remove(l);const d=l._prev,m=l._next;return null===d?this._itHead=m:d._next=m,null===m?this._itTail=d:m._prev=d,l}_addToMoves(l,d){return l.previousIndex===d||(this._movesTail=null===this._movesTail?this._movesHead=l:this._movesTail._nextMoved=l),l}_addToRemovals(l){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Yy),this._unlinkedRecords.put(l),l.currentIndex=null,l._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=l,l._prevRemoved=null):(l._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=l),l}_addIdentityChange(l,d){return l.item=d,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=l:this._identityChangesTail._nextIdentityChange=l,l}}class Kb{constructor(l,d){this.item=l,this.trackById=d,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Wb{constructor(){this._head=null,this._tail=null}add(l){null===this._head?(this._head=this._tail=l,l._nextDup=null,l._prevDup=null):(this._tail._nextDup=l,l._prevDup=this._tail,l._nextDup=null,this._tail=l)}get(l,d){let m;for(m=this._head;null!==m;m=m._nextDup)if((null===d||d<=m.currentIndex)&&Object.is(m.trackById,l))return m;return null}remove(l){const d=l._prevDup,m=l._nextDup;return null===d?this._head=m:d._nextDup=m,null===m?this._tail=d:m._prevDup=d,null===this._head}}class Yy{constructor(){this.map=new Map}put(l){const d=l.trackById;let m=this.map.get(d);m||(m=new Wb,this.map.set(d,m)),m.add(l)}get(l,d){const M=this.map.get(l);return M?M.get(l,d):null}remove(l){const d=l.trackById;return this.map.get(d).remove(l)&&this.map.delete(d),l}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Zy(i,l,d){const m=i.previousIndex;if(null===m)return m;let M=0;return d&&m<d.length&&(M=d[m]),m+l+M}class $y{constructor(){}supports(l){return l instanceof Map||Ci(l)}create(){return new Yb}}class Yb{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(l){let d;for(d=this._mapHead;null!==d;d=d._next)l(d)}forEachPreviousItem(l){let d;for(d=this._previousMapHead;null!==d;d=d._nextPrevious)l(d)}forEachChangedItem(l){let d;for(d=this._changesHead;null!==d;d=d._nextChanged)l(d)}forEachAddedItem(l){let d;for(d=this._additionsHead;null!==d;d=d._nextAdded)l(d)}forEachRemovedItem(l){let d;for(d=this._removalsHead;null!==d;d=d._nextRemoved)l(d)}diff(l){if(l){if(!(l instanceof Map||Ci(l)))throw new _(900,"")}else l=new Map;return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let d=this._mapHead;if(this._appendAfter=null,this._forEach(l,(m,M)=>{if(d&&d.key===M)this._maybeAddToChanges(d,m),this._appendAfter=d,d=d._next;else{const V=this._getOrCreateRecordForKey(M,m);d=this._insertBeforeOrAppend(d,V)}}),d){d._prev&&(d._prev._next=null),this._removalsHead=d;for(let m=d;null!==m;m=m._nextRemoved)m===this._mapHead&&(this._mapHead=null),this._records.delete(m.key),m._nextRemoved=m._next,m.previousValue=m.currentValue,m.currentValue=null,m._prev=null,m._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(l,d){if(l){const m=l._prev;return d._next=l,d._prev=m,l._prev=d,m&&(m._next=d),l===this._mapHead&&(this._mapHead=d),this._appendAfter=l,l}return this._appendAfter?(this._appendAfter._next=d,d._prev=this._appendAfter):this._mapHead=d,this._appendAfter=d,null}_getOrCreateRecordForKey(l,d){if(this._records.has(l)){const M=this._records.get(l);this._maybeAddToChanges(M,d);const V=M._prev,ie=M._next;return V&&(V._next=ie),ie&&(ie._prev=V),M._next=null,M._prev=null,M}const m=new Zb(l);return this._records.set(l,m),m.currentValue=d,this._addToAdditions(m),m}_reset(){if(this.isDirty){let l;for(this._previousMapHead=this._mapHead,l=this._previousMapHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._changesHead;null!==l;l=l._nextChanged)l.previousValue=l.currentValue;for(l=this._additionsHead;null!=l;l=l._nextAdded)l.previousValue=l.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(l,d){Object.is(d,l.currentValue)||(l.previousValue=l.currentValue,l.currentValue=d,this._addToChanges(l))}_addToAdditions(l){null===this._additionsHead?this._additionsHead=this._additionsTail=l:(this._additionsTail._nextAdded=l,this._additionsTail=l)}_addToChanges(l){null===this._changesHead?this._changesHead=this._changesTail=l:(this._changesTail._nextChanged=l,this._changesTail=l)}_forEach(l,d){l instanceof Map?l.forEach(d):Object.keys(l).forEach(m=>d(l[m],m))}}class Zb{constructor(l){this.key=l,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function zy(){return new mg([new Wy])}let mg=(()=>{class i{constructor(d){this.factories=d}static create(d,m){if(null!=m){const M=m.factories.slice();d=d.concat(M)}return new i(d)}static extend(d){return{provide:i,useFactory:m=>i.create(d,m||zy()),deps:[[i,new nl,new di]]}}find(d){const m=this.factories.find(M=>M.supports(d));if(null!=m)return m;throw new _(901,"")}}return i.\u0275prov=qe({token:i,providedIn:"root",factory:zy}),i})();function qy(){return new vg([new $y])}let vg=(()=>{class i{constructor(d){this.factories=d}static create(d,m){if(m){const M=m.factories.slice();d=d.concat(M)}return new i(d)}static extend(d){return{provide:i,useFactory:m=>i.create(d,m||qy()),deps:[[i,new nl,new di]]}}find(d){const m=this.factories.find(V=>V.supports(d));if(m)return m;throw new _(901,"")}}return i.\u0275prov=qe({token:i,providedIn:"root",factory:qy}),i})();const $b=[new $y],qb=new mg([new Wy]),Jb=new vg($b),Qb=Ry(null,"core",[{provide:Sy,useValue:"unknown"},{provide:Ly,deps:[hs]},{provide:xy,deps:[]},{provide:My,deps:[]}]),rC=[{provide:Yf,useClass:Yf,deps:[Ss,hs,dl,Uf,pd]},{provide:yT,deps:[Ss],useFactory:function iC(i){let l=[];return i.onStable.subscribe(()=>{for(;l.length;)l.pop()()}),function(d){l.push(d)}}},{provide:pd,useClass:pd,deps:[[new di,nm]]},{provide:im,useClass:im,deps:[]},pb,{provide:mg,useFactory:function Xb(){return qb},deps:[]},{provide:vg,useFactory:function eC(){return Jb},deps:[]},{provide:gg,useFactory:function tC(i){return i||function nC(){return"undefined"!=typeof $localize&&$localize.locale||rg}()},deps:[[new kl(gg),new di,new nl]]},{provide:Py,useValue:"USD"}];let oC=(()=>{class i{constructor(d){}}return i.\u0275fac=function(d){return new(d||i)(Ji(Yf))},i.\u0275mod=rt({type:i}),i.\u0275inj=De({providers:rC}),i})()},2382:(Fn,Ve,O)=>{"use strict";O.d(Ve,{Fj:()=>y,qu:()=>Ti,u5:()=>Oo,JU:()=>N,JJ:()=>be,On:()=>Si,YN:()=>pi,wV:()=>Bi,UX:()=>Ri,Kr:()=>Ao});var r=O(4893),e=O(9808),S=O(8306),R=O(4742),j=O(8421),U=O(3269),L=O(5403),b=O(3268),f=O(1810),g=O(2076),v=O(4004);let T=(()=>{class Ye{constructor(we,ht){this._renderer=we,this._elementRef=ht,this.onChange=un=>{},this.onTouched=()=>{}}setProperty(we,ht){this._renderer.setProperty(this._elementRef.nativeElement,we,ht)}registerOnTouched(we){this.onTouched=we}registerOnChange(we){this.onChange=we}setDisabledState(we){this.setProperty("disabled",we)}}return Ye.\u0275fac=function(we){return new(we||Ye)(r.Y36(r.Qsj),r.Y36(r.SBq))},Ye.\u0275dir=r.lG2({type:Ye}),Ye})(),k=(()=>{class Ye extends T{}return Ye.\u0275fac=function(){let Ne;return function(ht){return(Ne||(Ne=r.n5z(Ye)))(ht||Ye)}}(),Ye.\u0275dir=r.lG2({type:Ye,features:[r.qOj]}),Ye})();const N=new r.OlP("NgValueAccessor"),P={provide:N,useExisting:(0,r.Gpc)(()=>y),multi:!0},D=new r.OlP("CompositionEventMode");let y=(()=>{class Ye extends T{constructor(we,ht,un){super(we,ht),this._compositionMode=un,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function _(){const Ye=(0,e.q)()?(0,e.q)().getUserAgent():"";return/android (\d+)/.test(Ye.toLowerCase())}())}writeValue(we){this.setProperty("value",null==we?"":we)}_handleInput(we){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(we)}_compositionStart(){this._composing=!0}_compositionEnd(we){this._composing=!1,this._compositionMode&&this.onChange(we)}}return Ye.\u0275fac=function(we){return new(we||Ye)(r.Y36(r.Qsj),r.Y36(r.SBq),r.Y36(D,8))},Ye.\u0275dir=r.lG2({type:Ye,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(we,ht){1&we&&r.NdJ("input",function(Xn){return ht._handleInput(Xn.target.value)})("blur",function(){return ht.onTouched()})("compositionstart",function(){return ht._compositionStart()})("compositionend",function(Xn){return ht._compositionEnd(Xn.target.value)})},features:[r._Bn([P]),r.qOj]}),Ye})();const G=new r.OlP("NgValidators"),ee=new r.OlP("NgAsyncValidators");function ve(Ye){return null!=Ye}function Oe(Ye){const Ne=(0,r.QGY)(Ye)?(0,g.D)(Ye):Ye;return(0,r.CqO)(Ne),Ne}function Ee(Ye){let Ne={};return Ye.forEach(we=>{Ne=null!=we?Object.assign(Object.assign({},Ne),we):Ne}),0===Object.keys(Ne).length?null:Ne}function Ie(Ye,Ne){return Ne.map(we=>we(Ye))}function Pe(Ye){return Ye.map(Ne=>function Re(Ye){return!Ye.validate}(Ne)?Ne:we=>Ne.validate(we))}function Be(Ye){return null!=Ye?function ke(Ye){if(!Ye)return null;const Ne=Ye.filter(ve);return 0==Ne.length?null:function(we){return Ee(Ie(we,Ne))}}(Pe(Ye)):null}function He(Ye){return null!=Ye?function qe(Ye){if(!Ye)return null;const Ne=Ye.filter(ve);return 0==Ne.length?null:function(we){return function c(...Ye){const Ne=(0,U.jO)(Ye),{args:we,keys:ht}=(0,R.D)(Ye),un=new S.y(Xn=>{const{length:qr}=we;if(!qr)return void Xn.complete();const $r=new Array(qr);let no=qr,Cn=qr;for(let wt=0;wt<qr;wt++){let vn=!1;(0,j.Xf)(we[wt]).subscribe((0,L.x)(Xn,Hn=>{vn||(vn=!0,Cn--),$r[wt]=Hn},()=>no--,void 0,()=>{(!no||!vn)&&(Cn||Xn.next(ht?(0,f.n)(ht,$r):$r),Xn.complete())}))}});return Ne?un.pipe((0,b.Z)(Ne)):un}(Ie(we,Ne).map(Oe)).pipe((0,v.U)(Ee))}}(Pe(Ye)):null}function De(Ye,Ne){return null===Ye?[Ne]:Array.isArray(Ye)?[...Ye,Ne]:[Ye,Ne]}function J(Ye){return Ye?Array.isArray(Ye)?Ye:[Ye]:[]}function Me(Ye,Ne){return Array.isArray(Ye)?Ye.includes(Ne):Ye===Ne}function ae(Ye,Ne){const we=J(Ne);return J(Ye).forEach(un=>{Me(we,un)||we.push(un)}),we}function re(Ye,Ne){return J(Ne).filter(we=>!Me(Ye,we))}class z{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(Ne){this._rawValidators=Ne||[],this._composedValidatorFn=Be(this._rawValidators)}_setAsyncValidators(Ne){this._rawAsyncValidators=Ne||[],this._composedAsyncValidatorFn=He(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(Ne){this._onDestroyCallbacks.push(Ne)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(Ne=>Ne()),this._onDestroyCallbacks=[]}reset(Ne){this.control&&this.control.reset(Ne)}hasError(Ne,we){return!!this.control&&this.control.hasError(Ne,we)}getError(Ne,we){return this.control?this.control.getError(Ne,we):null}}class te extends z{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class X extends z{get formDirective(){return null}get path(){return null}}let be=(()=>{class Ye extends class Z{constructor(Ne){this._cd=Ne}is(Ne){var we,ht,un;return"submitted"===Ne?!!(null===(we=this._cd)||void 0===we?void 0:we.submitted):!!(null===(un=null===(ht=this._cd)||void 0===ht?void 0:ht.control)||void 0===un?void 0:un[Ne])}}{constructor(we){super(we)}}return Ye.\u0275fac=function(we){return new(we||Ye)(r.Y36(te,2))},Ye.\u0275dir=r.lG2({type:Ye,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(we,ht){2&we&&r.ekj("ng-untouched",ht.is("untouched"))("ng-touched",ht.is("touched"))("ng-pristine",ht.is("pristine"))("ng-dirty",ht.is("dirty"))("ng-valid",ht.is("valid"))("ng-invalid",ht.is("invalid"))("ng-pending",ht.is("pending"))},features:[r.qOj]}),Ye})();function jn(Ye,Ne){(function mt(Ye,Ne){const we=function he(Ye){return Ye._rawValidators}(Ye);null!==Ne.validator?Ye.setValidators(De(we,Ne.validator)):"function"==typeof we&&Ye.setValidators([we]);const ht=function Y(Ye){return Ye._rawAsyncValidators}(Ye);null!==Ne.asyncValidator?Ye.setAsyncValidators(De(ht,Ne.asyncValidator)):"function"==typeof ht&&Ye.setAsyncValidators([ht]);const un=()=>Ye.updateValueAndValidity();ot(Ne._rawValidators,un),ot(Ne._rawAsyncValidators,un)})(Ye,Ne),Ne.valueAccessor.writeValue(Ye.value),function nn(Ye,Ne){Ne.valueAccessor.registerOnChange(we=>{Ye._pendingValue=we,Ye._pendingChange=!0,Ye._pendingDirty=!0,"change"===Ye.updateOn&&_t(Ye,Ne)})}(Ye,Ne),function pt(Ye,Ne){const we=(ht,un)=>{Ne.valueAccessor.writeValue(ht),un&&Ne.viewToModelUpdate(ht)};Ye.registerOnChange(we),Ne._registerOnDestroy(()=>{Ye._unregisterOnChange(we)})}(Ye,Ne),function zt(Ye,Ne){Ne.valueAccessor.registerOnTouched(()=>{Ye._pendingTouched=!0,"blur"===Ye.updateOn&&Ye._pendingChange&&_t(Ye,Ne),"submit"!==Ye.updateOn&&Ye.markAsTouched()})}(Ye,Ne),function Qe(Ye,Ne){if(Ne.valueAccessor.setDisabledState){const we=ht=>{Ne.valueAccessor.setDisabledState(ht)};Ye.registerOnDisabledChange(we),Ne._registerOnDestroy(()=>{Ye._unregisterOnDisabledChange(we)})}}(Ye,Ne)}function ot(Ye,Ne){Ye.forEach(we=>{we.registerOnValidatorChange&&we.registerOnValidatorChange(Ne)})}function _t(Ye,Ne){Ye._pendingDirty&&Ye.markAsDirty(),Ye.setValue(Ye._pendingValue,{emitModelToViewChange:!1}),Ne.viewToModelUpdate(Ye._pendingValue),Ye._pendingChange=!1}function Zn(Ye,Ne){const we=Ye.indexOf(Ne);we>-1&&Ye.splice(we,1)}const Pr="VALID",ct="INVALID",qt="PENDING",fn="DISABLED";function kt(Ye){return(wn(Ye)?Ye.validators:Ye)||null}function Rt(Ye){return Array.isArray(Ye)?Be(Ye):Ye||null}function sn(Ye,Ne){return(wn(Ne)?Ne.asyncValidators:Ye)||null}function kn(Ye){return Array.isArray(Ye)?He(Ye):Ye||null}function wn(Ye){return null!=Ye&&!Array.isArray(Ye)&&"object"==typeof Ye}const xt=Ye=>Ye instanceof yn,Ct=Ye=>Ye instanceof Nn,Vt=Ye=>Ye instanceof $n;function Jt(Ye){return xt(Ye)?Ye.value:Ye.getRawValue()}function bn(Ye,Ne){const we=Ct(Ye),ht=Ye.controls;if(!(we?Object.keys(ht):ht).length)throw new r.vHH(1e3,"");if(!ht[Ne])throw new r.vHH(1001,"")}function Ln(Ye,Ne){Ct(Ye),Ye._forEachChild((ht,un)=>{if(void 0===Ne[un])throw new r.vHH(1002,"")})}class Pt{constructor(Ne,we){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=Ne,this._rawAsyncValidators=we,this._composedValidatorFn=Rt(this._rawValidators),this._composedAsyncValidatorFn=kn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(Ne){this._rawValidators=this._composedValidatorFn=Ne}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(Ne){this._rawAsyncValidators=this._composedAsyncValidatorFn=Ne}get parent(){return this._parent}get valid(){return this.status===Pr}get invalid(){return this.status===ct}get pending(){return this.status==qt}get disabled(){return this.status===fn}get enabled(){return this.status!==fn}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(Ne){this._rawValidators=Ne,this._composedValidatorFn=Rt(Ne)}setAsyncValidators(Ne){this._rawAsyncValidators=Ne,this._composedAsyncValidatorFn=kn(Ne)}addValidators(Ne){this.setValidators(ae(Ne,this._rawValidators))}addAsyncValidators(Ne){this.setAsyncValidators(ae(Ne,this._rawAsyncValidators))}removeValidators(Ne){this.setValidators(re(Ne,this._rawValidators))}removeAsyncValidators(Ne){this.setAsyncValidators(re(Ne,this._rawAsyncValidators))}hasValidator(Ne){return Me(this._rawValidators,Ne)}hasAsyncValidator(Ne){return Me(this._rawAsyncValidators,Ne)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(Ne={}){this.touched=!0,this._parent&&!Ne.onlySelf&&this._parent.markAsTouched(Ne)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(Ne=>Ne.markAllAsTouched())}markAsUntouched(Ne={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(we=>{we.markAsUntouched({onlySelf:!0})}),this._parent&&!Ne.onlySelf&&this._parent._updateTouched(Ne)}markAsDirty(Ne={}){this.pristine=!1,this._parent&&!Ne.onlySelf&&this._parent.markAsDirty(Ne)}markAsPristine(Ne={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(we=>{we.markAsPristine({onlySelf:!0})}),this._parent&&!Ne.onlySelf&&this._parent._updatePristine(Ne)}markAsPending(Ne={}){this.status=qt,!1!==Ne.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!Ne.onlySelf&&this._parent.markAsPending(Ne)}disable(Ne={}){const we=this._parentMarkedDirty(Ne.onlySelf);this.status=fn,this.errors=null,this._forEachChild(ht=>{ht.disable(Object.assign(Object.assign({},Ne),{onlySelf:!0}))}),this._updateValue(),!1!==Ne.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},Ne),{skipPristineCheck:we})),this._onDisabledChange.forEach(ht=>ht(!0))}enable(Ne={}){const we=this._parentMarkedDirty(Ne.onlySelf);this.status=Pr,this._forEachChild(ht=>{ht.enable(Object.assign(Object.assign({},Ne),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:Ne.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},Ne),{skipPristineCheck:we})),this._onDisabledChange.forEach(ht=>ht(!1))}_updateAncestors(Ne){this._parent&&!Ne.onlySelf&&(this._parent.updateValueAndValidity(Ne),Ne.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(Ne){this._parent=Ne}updateValueAndValidity(Ne={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Pr||this.status===qt)&&this._runAsyncValidator(Ne.emitEvent)),!1!==Ne.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!Ne.onlySelf&&this._parent.updateValueAndValidity(Ne)}_updateTreeValidity(Ne={emitEvent:!0}){this._forEachChild(we=>we._updateTreeValidity(Ne)),this.updateValueAndValidity({onlySelf:!0,emitEvent:Ne.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?fn:Pr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(Ne){if(this.asyncValidator){this.status=qt,this._hasOwnPendingAsyncValidator=!0;const we=Oe(this.asyncValidator(this));this._asyncValidationSubscription=we.subscribe(ht=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(ht,{emitEvent:Ne})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(Ne,we={}){this.errors=Ne,this._updateControlsErrors(!1!==we.emitEvent)}get(Ne){return function It(Ye,Ne,we){if(null==Ne||(Array.isArray(Ne)||(Ne=Ne.split(we)),Array.isArray(Ne)&&0===Ne.length))return null;let ht=Ye;return Ne.forEach(un=>{ht=Ct(ht)?ht.controls.hasOwnProperty(un)?ht.controls[un]:null:Vt(ht)&&ht.at(un)||null}),ht}(this,Ne,".")}getError(Ne,we){const ht=we?this.get(we):this;return ht&&ht.errors?ht.errors[Ne]:null}hasError(Ne,we){return!!this.getError(Ne,we)}get root(){let Ne=this;for(;Ne._parent;)Ne=Ne._parent;return Ne}_updateControlsErrors(Ne){this.status=this._calculateStatus(),Ne&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(Ne)}_initObservables(){this.valueChanges=new r.vpe,this.statusChanges=new r.vpe}_calculateStatus(){return this._allControlsDisabled()?fn:this.errors?ct:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(qt)?qt:this._anyControlsHaveStatus(ct)?ct:Pr}_anyControlsHaveStatus(Ne){return this._anyControls(we=>we.status===Ne)}_anyControlsDirty(){return this._anyControls(Ne=>Ne.dirty)}_anyControlsTouched(){return this._anyControls(Ne=>Ne.touched)}_updatePristine(Ne={}){this.pristine=!this._anyControlsDirty(),this._parent&&!Ne.onlySelf&&this._parent._updatePristine(Ne)}_updateTouched(Ne={}){this.touched=this._anyControlsTouched(),this._parent&&!Ne.onlySelf&&this._parent._updateTouched(Ne)}_isBoxedValue(Ne){return"object"==typeof Ne&&null!==Ne&&2===Object.keys(Ne).length&&"value"in Ne&&"disabled"in Ne}_registerOnCollectionChange(Ne){this._onCollectionChange=Ne}_setUpdateStrategy(Ne){wn(Ne)&&null!=Ne.updateOn&&(this._updateOn=Ne.updateOn)}_parentMarkedDirty(Ne){return!Ne&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class yn extends Pt{constructor(Ne=null,we,ht){super(kt(we),sn(ht,we)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(Ne),this._setUpdateStrategy(we),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),wn(we)&&we.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(Ne)?Ne.value:Ne)}setValue(Ne,we={}){this.value=this._pendingValue=Ne,this._onChange.length&&!1!==we.emitModelToViewChange&&this._onChange.forEach(ht=>ht(this.value,!1!==we.emitViewToModelChange)),this.updateValueAndValidity(we)}patchValue(Ne,we={}){this.setValue(Ne,we)}reset(Ne=this.defaultValue,we={}){this._applyFormState(Ne),this.markAsPristine(we),this.markAsUntouched(we),this.setValue(this.value,we),this._pendingChange=!1}_updateValue(){}_anyControls(Ne){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(Ne){this._onChange.push(Ne)}_unregisterOnChange(Ne){Zn(this._onChange,Ne)}registerOnDisabledChange(Ne){this._onDisabledChange.push(Ne)}_unregisterOnDisabledChange(Ne){Zn(this._onDisabledChange,Ne)}_forEachChild(Ne){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(Ne){this._isBoxedValue(Ne)?(this.value=this._pendingValue=Ne.value,Ne.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=Ne}}class Nn extends Pt{constructor(Ne,we,ht){super(kt(we),sn(ht,we)),this.controls=Ne,this._initObservables(),this._setUpdateStrategy(we),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(Ne,we){return this.controls[Ne]?this.controls[Ne]:(this.controls[Ne]=we,we.setParent(this),we._registerOnCollectionChange(this._onCollectionChange),we)}addControl(Ne,we,ht={}){this.registerControl(Ne,we),this.updateValueAndValidity({emitEvent:ht.emitEvent}),this._onCollectionChange()}removeControl(Ne,we={}){this.controls[Ne]&&this.controls[Ne]._registerOnCollectionChange(()=>{}),delete this.controls[Ne],this.updateValueAndValidity({emitEvent:we.emitEvent}),this._onCollectionChange()}setControl(Ne,we,ht={}){this.controls[Ne]&&this.controls[Ne]._registerOnCollectionChange(()=>{}),delete this.controls[Ne],we&&this.registerControl(Ne,we),this.updateValueAndValidity({emitEvent:ht.emitEvent}),this._onCollectionChange()}contains(Ne){return this.controls.hasOwnProperty(Ne)&&this.controls[Ne].enabled}setValue(Ne,we={}){Ln(this,Ne),Object.keys(Ne).forEach(ht=>{bn(this,ht),this.controls[ht].setValue(Ne[ht],{onlySelf:!0,emitEvent:we.emitEvent})}),this.updateValueAndValidity(we)}patchValue(Ne,we={}){null!=Ne&&(Object.keys(Ne).forEach(ht=>{this.controls[ht]&&this.controls[ht].patchValue(Ne[ht],{onlySelf:!0,emitEvent:we.emitEvent})}),this.updateValueAndValidity(we))}reset(Ne={},we={}){this._forEachChild((ht,un)=>{ht.reset(Ne[un],{onlySelf:!0,emitEvent:we.emitEvent})}),this._updatePristine(we),this._updateTouched(we),this.updateValueAndValidity(we)}getRawValue(){return this._reduceChildren({},(Ne,we,ht)=>(Ne[ht]=Jt(we),Ne))}_syncPendingControls(){let Ne=this._reduceChildren(!1,(we,ht)=>!!ht._syncPendingControls()||we);return Ne&&this.updateValueAndValidity({onlySelf:!0}),Ne}_forEachChild(Ne){Object.keys(this.controls).forEach(we=>{const ht=this.controls[we];ht&&Ne(ht,we)})}_setUpControls(){this._forEachChild(Ne=>{Ne.setParent(this),Ne._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(Ne){for(const we of Object.keys(this.controls)){const ht=this.controls[we];if(this.contains(we)&&Ne(ht))return!0}return!1}_reduceValue(){return this._reduceChildren({},(Ne,we,ht)=>((we.enabled||this.disabled)&&(Ne[ht]=we.value),Ne))}_reduceChildren(Ne,we){let ht=Ne;return this._forEachChild((un,Xn)=>{ht=we(ht,un,Xn)}),ht}_allControlsDisabled(){for(const Ne of Object.keys(this.controls))if(this.controls[Ne].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class $n extends Pt{constructor(Ne,we,ht){super(kt(we),sn(ht,we)),this.controls=Ne,this._initObservables(),this._setUpdateStrategy(we),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(Ne){return this.controls[Ne]}push(Ne,we={}){this.controls.push(Ne),this._registerControl(Ne),this.updateValueAndValidity({emitEvent:we.emitEvent}),this._onCollectionChange()}insert(Ne,we,ht={}){this.controls.splice(Ne,0,we),this._registerControl(we),this.updateValueAndValidity({emitEvent:ht.emitEvent})}removeAt(Ne,we={}){this.controls[Ne]&&this.controls[Ne]._registerOnCollectionChange(()=>{}),this.controls.splice(Ne,1),this.updateValueAndValidity({emitEvent:we.emitEvent})}setControl(Ne,we,ht={}){this.controls[Ne]&&this.controls[Ne]._registerOnCollectionChange(()=>{}),this.controls.splice(Ne,1),we&&(this.controls.splice(Ne,0,we),this._registerControl(we)),this.updateValueAndValidity({emitEvent:ht.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(Ne,we={}){Ln(this,Ne),Ne.forEach((ht,un)=>{bn(this,un),this.at(un).setValue(ht,{onlySelf:!0,emitEvent:we.emitEvent})}),this.updateValueAndValidity(we)}patchValue(Ne,we={}){null!=Ne&&(Ne.forEach((ht,un)=>{this.at(un)&&this.at(un).patchValue(ht,{onlySelf:!0,emitEvent:we.emitEvent})}),this.updateValueAndValidity(we))}reset(Ne=[],we={}){this._forEachChild((ht,un)=>{ht.reset(Ne[un],{onlySelf:!0,emitEvent:we.emitEvent})}),this._updatePristine(we),this._updateTouched(we),this.updateValueAndValidity(we)}getRawValue(){return this.controls.map(Ne=>Jt(Ne))}clear(Ne={}){this.controls.length<1||(this._forEachChild(we=>we._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:Ne.emitEvent}))}_syncPendingControls(){let Ne=this.controls.reduce((we,ht)=>!!ht._syncPendingControls()||we,!1);return Ne&&this.updateValueAndValidity({onlySelf:!0}),Ne}_forEachChild(Ne){this.controls.forEach((we,ht)=>{Ne(we,ht)})}_updateValue(){this.value=this.controls.filter(Ne=>Ne.enabled||this.disabled).map(Ne=>Ne.value)}_anyControls(Ne){return this.controls.some(we=>we.enabled&&Ne(we))}_setUpControls(){this._forEachChild(Ne=>this._registerControl(Ne))}_allControlsDisabled(){for(const Ne of this.controls)if(Ne.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(Ne){Ne.setParent(this),Ne._registerOnCollectionChange(this._onCollectionChange)}}const Zi={provide:te,useExisting:(0,r.Gpc)(()=>Si)},ci=(()=>Promise.resolve(null))();let Si=(()=>{class Ye extends te{constructor(we,ht,un,Xn){super(),this.control=new yn,this._registered=!1,this.update=new r.vpe,this._parent=we,this._setValidators(ht),this._setAsyncValidators(un),this.valueAccessor=function Dn(Ye,Ne){if(!Ne)return null;let we,ht,un;return Array.isArray(Ne),Ne.forEach(Xn=>{Xn.constructor===y?we=Xn:function on(Ye){return Object.getPrototypeOf(Ye.constructor)===k}(Xn)?ht=Xn:un=Xn}),un||ht||we||null}(0,Xn)}ngOnChanges(we){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in we&&this._updateDisabled(we),function Qt(Ye,Ne){if(!Ye.hasOwnProperty("model"))return!1;const we=Ye.model;return!!we.isFirstChange()||!Object.is(Ne,we.currentValue)}(we,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function Rn(Ye,Ne){return[...Ne.path,Ye]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(we){this.viewModel=we,this.update.emit(we)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){jn(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(we){ci.then(()=>{this.control.setValue(we,{emitViewToModelChange:!1})})}_updateDisabled(we){const ht=we.isDisabled.currentValue,un=""===ht||ht&&"false"!==ht;ci.then(()=>{un&&!this.control.disabled?this.control.disable():!un&&this.control.disabled&&this.control.enable()})}}return Ye.\u0275fac=function(we){return new(we||Ye)(r.Y36(X,9),r.Y36(G,10),r.Y36(ee,10),r.Y36(N,10))},Ye.\u0275dir=r.lG2({type:Ye,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r._Bn([Zi]),r.qOj,r.TTD]}),Ye})();const eo={provide:N,useExisting:(0,r.Gpc)(()=>Bi),multi:!0};let Bi=(()=>{class Ye extends k{writeValue(we){this.setProperty("value",null==we?"":we)}registerOnChange(we){this.onChange=ht=>{we(""==ht?null:parseFloat(ht))}}}return Ye.\u0275fac=function(){let Ne;return function(ht){return(Ne||(Ne=r.n5z(Ye)))(ht||Ye)}}(),Ye.\u0275dir=r.lG2({type:Ye,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(we,ht){1&we&&r.NdJ("input",function(Xn){return ht.onChange(Xn.target.value)})("blur",function(){return ht.onTouched()})},features:[r._Bn([eo]),r.qOj]}),Ye})(),Mo=(()=>{class Ye{}return Ye.\u0275fac=function(we){return new(we||Ye)},Ye.\u0275mod=r.oAB({type:Ye}),Ye.\u0275inj=r.cJS({}),Ye})();const Po=new r.OlP("NgModelWithFormControlWarning"),Bt={provide:N,useExisting:(0,r.Gpc)(()=>fr),multi:!0};function Or(Ye,Ne){return null==Ye?`${Ne}`:(Ne&&"object"==typeof Ne&&(Ne="Object"),`${Ye}: ${Ne}`.slice(0,50))}let fr=(()=>{class Ye extends k{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(we){this._compareWith=we}writeValue(we){this.value=we;const ht=this._getOptionId(we);null==ht&&this.setProperty("selectedIndex",-1);const un=Or(ht,we);this.setProperty("value",un)}registerOnChange(we){this.onChange=ht=>{this.value=this._getOptionValue(ht),we(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(we){for(const ht of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(ht),we))return ht;return null}_getOptionValue(we){const ht=function Ur(Ye){return Ye.split(":")[0]}(we);return this._optionMap.has(ht)?this._optionMap.get(ht):we}}return Ye.\u0275fac=function(){let Ne;return function(ht){return(Ne||(Ne=r.n5z(Ye)))(ht||Ye)}}(),Ye.\u0275dir=r.lG2({type:Ye,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(we,ht){1&we&&r.NdJ("change",function(Xn){return ht.onChange(Xn.target.value)})("blur",function(){return ht.onTouched()})},inputs:{compareWith:"compareWith"},features:[r._Bn([Bt]),r.qOj]}),Ye})(),pi=(()=>{class Ye{constructor(we,ht,un){this._element=we,this._renderer=ht,this._select=un,this._select&&(this.id=this._select._registerOption())}set ngValue(we){null!=this._select&&(this._select._optionMap.set(this.id,we),this._setElementValue(Or(this.id,we)),this._select.writeValue(this._select.value))}set value(we){this._setElementValue(we),this._select&&this._select.writeValue(this._select.value)}_setElementValue(we){this._renderer.setProperty(this._element.nativeElement,"value",we)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return Ye.\u0275fac=function(we){return new(we||Ye)(r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(fr,9))},Ye.\u0275dir=r.lG2({type:Ye,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),Ye})();const Vi={provide:N,useExisting:(0,r.Gpc)(()=>_o),multi:!0};function so(Ye,Ne){return null==Ye?`${Ne}`:("string"==typeof Ne&&(Ne=`'${Ne}'`),Ne&&"object"==typeof Ne&&(Ne="Object"),`${Ye}: ${Ne}`.slice(0,50))}let _o=(()=>{class Ye extends k{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(we){this._compareWith=we}writeValue(we){let ht;if(this.value=we,Array.isArray(we)){const un=we.map(Xn=>this._getOptionId(Xn));ht=(Xn,qr)=>{Xn._setSelected(un.indexOf(qr.toString())>-1)}}else ht=(un,Xn)=>{un._setSelected(!1)};this._optionMap.forEach(ht)}registerOnChange(we){this.onChange=ht=>{const un=[],Xn=ht.selectedOptions;if(void 0!==Xn){const qr=Xn;for(let $r=0;$r<qr.length;$r++){const Cn=this._getOptionValue(qr[$r].value);un.push(Cn)}}else{const qr=ht.options;for(let $r=0;$r<qr.length;$r++){const no=qr[$r];if(no.selected){const Cn=this._getOptionValue(no.value);un.push(Cn)}}}this.value=un,we(un)}}_registerOption(we){const ht=(this._idCounter++).toString();return this._optionMap.set(ht,we),ht}_getOptionId(we){for(const ht of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(ht)._value,we))return ht;return null}_getOptionValue(we){const ht=function to(Ye){return Ye.split(":")[0]}(we);return this._optionMap.has(ht)?this._optionMap.get(ht)._value:we}}return Ye.\u0275fac=function(){let Ne;return function(ht){return(Ne||(Ne=r.n5z(Ye)))(ht||Ye)}}(),Ye.\u0275dir=r.lG2({type:Ye,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(we,ht){1&we&&r.NdJ("change",function(Xn){return ht.onChange(Xn.target)})("blur",function(){return ht.onTouched()})},inputs:{compareWith:"compareWith"},features:[r._Bn([Vi]),r.qOj]}),Ye})(),Ao=(()=>{class Ye{constructor(we,ht,un){this._element=we,this._renderer=ht,this._select=un,this._select&&(this.id=this._select._registerOption(this))}set ngValue(we){null!=this._select&&(this._value=we,this._setElementValue(so(this.id,we)),this._select.writeValue(this._select.value))}set value(we){this._select?(this._value=we,this._setElementValue(so(this.id,we)),this._select.writeValue(this._select.value)):this._setElementValue(we)}_setElementValue(we){this._renderer.setProperty(this._element.nativeElement,"value",we)}_setSelected(we){this._renderer.setProperty(this._element.nativeElement,"selected",we)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return Ye.\u0275fac=function(we){return new(we||Ye)(r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(_o,9))},Ye.\u0275dir=r.lG2({type:Ye,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),Ye})(),Gr=(()=>{class Ye{}return Ye.\u0275fac=function(we){return new(we||Ye)},Ye.\u0275mod=r.oAB({type:Ye}),Ye.\u0275inj=r.cJS({imports:[[Mo]]}),Ye})(),Oo=(()=>{class Ye{}return Ye.\u0275fac=function(we){return new(we||Ye)},Ye.\u0275mod=r.oAB({type:Ye}),Ye.\u0275inj=r.cJS({imports:[Gr]}),Ye})(),Ri=(()=>{class Ye{static withConfig(we){return{ngModule:Ye,providers:[{provide:Po,useValue:we.warnOnNgModelWithFormControl}]}}}return Ye.\u0275fac=function(we){return new(we||Ye)},Ye.\u0275mod=r.oAB({type:Ye}),Ye.\u0275inj=r.cJS({imports:[Gr]}),Ye})(),Ti=(()=>{class Ye{group(we,ht=null){const un=this._reduceControls(we);let $r,Xn=null,qr=null;return null!=ht&&(function Eo(Ye){return void 0!==Ye.asyncValidators||void 0!==Ye.validators||void 0!==Ye.updateOn}(ht)?(Xn=null!=ht.validators?ht.validators:null,qr=null!=ht.asyncValidators?ht.asyncValidators:null,$r=null!=ht.updateOn?ht.updateOn:void 0):(Xn=null!=ht.validator?ht.validator:null,qr=null!=ht.asyncValidator?ht.asyncValidator:null)),new Nn(un,{asyncValidators:qr,updateOn:$r,validators:Xn})}control(we,ht,un){return new yn(we,ht,un)}array(we,ht,un){const Xn=we.map(qr=>this._createControl(qr));return new $n(Xn,ht,un)}_reduceControls(we){const ht={};return Object.keys(we).forEach(un=>{ht[un]=this._createControl(we[un])}),ht}_createControl(we){return xt(we)||Ct(we)||Vt(we)?we:Array.isArray(we)?this.control(we[0],we.length>1?we[1]:null,we.length>2?we[2]:null):this.control(we)}}return Ye.\u0275fac=function(we){return new(we||Ye)},Ye.\u0275prov=r.Yz7({token:Ye,factory:Ye.\u0275fac,providedIn:Ri}),Ye})()},2313:(Fn,Ve,O)=>{"use strict";O.d(Ve,{b2:()=>Me,H7:()=>mt,q6:()=>Y});var r=O(9808),e=O(4893);class S extends r.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class R extends S{static makeCurrent(){(0,r.HT)(new R)}onAndCancel(pt,rt,Xe){return pt.addEventListener(rt,Xe,!1),()=>{pt.removeEventListener(rt,Xe,!1)}}dispatchEvent(pt,rt){pt.dispatchEvent(rt)}remove(pt){pt.parentNode&&pt.parentNode.removeChild(pt)}createElement(pt,rt){return(rt=rt||this.getDefaultDocument()).createElement(pt)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(pt){return pt.nodeType===Node.ELEMENT_NODE}isShadowRoot(pt){return pt instanceof DocumentFragment}getGlobalEventTarget(pt,rt){return"window"===rt?window:"document"===rt?pt:"body"===rt?pt.body:null}getBaseHref(pt){const rt=function U(){return j=j||document.querySelector("base"),j?j.getAttribute("href"):null}();return null==rt?null:function b(_t){L=L||document.createElement("a"),L.setAttribute("href",_t);const pt=L.pathname;return"/"===pt.charAt(0)?pt:`/${pt}`}(rt)}resetBaseElement(){j=null}getUserAgent(){return window.navigator.userAgent}getCookie(pt){return(0,r.Mx)(document.cookie,pt)}}let L,j=null;const f=new e.OlP("TRANSITION_ID"),g=[{provide:e.ip1,useFactory:function c(_t,pt,rt){return()=>{rt.get(e.CZH).donePromise.then(()=>{const Xe=(0,r.q)(),yt=pt.querySelectorAll(`style[ng-transition="${_t}"]`);for(let Gt=0;Gt<yt.length;Gt++)Xe.remove(yt[Gt])})}},deps:[f,r.K0,e.zs3],multi:!0}];class v{static init(){(0,e.VLi)(new v)}addToWindow(pt){e.dqk.getAngularTestability=(Xe,yt=!0)=>{const Gt=pt.findTestabilityInTree(Xe,yt);if(null==Gt)throw new Error("Could not find testability for element.");return Gt},e.dqk.getAllAngularTestabilities=()=>pt.getAllTestabilities(),e.dqk.getAllAngularRootElements=()=>pt.getAllRootElements(),e.dqk.frameworkStabilizers||(e.dqk.frameworkStabilizers=[]),e.dqk.frameworkStabilizers.push(Xe=>{const yt=e.dqk.getAllAngularTestabilities();let Gt=yt.length,Qt=!1;const on=function(mn){Qt=Qt||mn,Gt--,0==Gt&&Xe(Qt)};yt.forEach(function(mn){mn.whenStable(on)})})}findTestabilityInTree(pt,rt,Xe){if(null==rt)return null;const yt=pt.getTestability(rt);return null!=yt?yt:Xe?(0,r.q)().isShadowRoot(rt)?this.findTestabilityInTree(pt,rt.host,!0):this.findTestabilityInTree(pt,rt.parentElement,!0):null}}let T=(()=>{class _t{build(){return new XMLHttpRequest}}return _t.\u0275fac=function(rt){return new(rt||_t)},_t.\u0275prov=e.Yz7({token:_t,factory:_t.\u0275fac}),_t})();const k=new e.OlP("EventManagerPlugins");let N=(()=>{class _t{constructor(rt,Xe){this._zone=Xe,this._eventNameToPlugin=new Map,rt.forEach(yt=>yt.manager=this),this._plugins=rt.slice().reverse()}addEventListener(rt,Xe,yt){return this._findPluginFor(Xe).addEventListener(rt,Xe,yt)}addGlobalEventListener(rt,Xe,yt){return this._findPluginFor(Xe).addGlobalEventListener(rt,Xe,yt)}getZone(){return this._zone}_findPluginFor(rt){const Xe=this._eventNameToPlugin.get(rt);if(Xe)return Xe;const yt=this._plugins;for(let Gt=0;Gt<yt.length;Gt++){const Qt=yt[Gt];if(Qt.supports(rt))return this._eventNameToPlugin.set(rt,Qt),Qt}throw new Error(`No event manager plugin found for event ${rt}`)}}return _t.\u0275fac=function(rt){return new(rt||_t)(e.LFG(k),e.LFG(e.R0b))},_t.\u0275prov=e.Yz7({token:_t,factory:_t.\u0275fac}),_t})();class B{constructor(pt){this._doc=pt}addGlobalEventListener(pt,rt,Xe){const yt=(0,r.q)().getGlobalEventTarget(this._doc,pt);if(!yt)throw new Error(`Unsupported event target ${yt} for event ${rt}`);return this.addEventListener(yt,rt,Xe)}}let x=(()=>{class _t{constructor(){this._stylesSet=new Set}addStyles(rt){const Xe=new Set;rt.forEach(yt=>{this._stylesSet.has(yt)||(this._stylesSet.add(yt),Xe.add(yt))}),this.onStylesAdded(Xe)}onStylesAdded(rt){}getAllStyles(){return Array.from(this._stylesSet)}}return _t.\u0275fac=function(rt){return new(rt||_t)},_t.\u0275prov=e.Yz7({token:_t,factory:_t.\u0275fac}),_t})(),P=(()=>{class _t extends x{constructor(rt){super(),this._doc=rt,this._hostNodes=new Map,this._hostNodes.set(rt.head,[])}_addStylesToHost(rt,Xe,yt){rt.forEach(Gt=>{const Qt=this._doc.createElement("style");Qt.textContent=Gt,yt.push(Xe.appendChild(Qt))})}addHost(rt){const Xe=[];this._addStylesToHost(this._stylesSet,rt,Xe),this._hostNodes.set(rt,Xe)}removeHost(rt){const Xe=this._hostNodes.get(rt);Xe&&Xe.forEach(_),this._hostNodes.delete(rt)}onStylesAdded(rt){this._hostNodes.forEach((Xe,yt)=>{this._addStylesToHost(rt,yt,Xe)})}ngOnDestroy(){this._hostNodes.forEach(rt=>rt.forEach(_))}}return _t.\u0275fac=function(rt){return new(rt||_t)(e.LFG(r.K0))},_t.\u0275prov=e.Yz7({token:_t,factory:_t.\u0275fac}),_t})();function _(_t){(0,r.q)().remove(_t)}const D={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},y=/%COMP%/g,I="%COMP%",G=`_nghost-${I}`,ee=`_ngcontent-${I}`;function Te(_t,pt,rt){for(let Xe=0;Xe<pt.length;Xe++){let yt=pt[Xe];Array.isArray(yt)?Te(_t,yt,rt):(yt=yt.replace(y,_t),rt.push(yt))}return rt}function q(_t){return pt=>{if("__ngUnwrap__"===pt)return _t;!1===_t(pt)&&(pt.preventDefault(),pt.returnValue=!1)}}let H=(()=>{class _t{constructor(rt,Xe,yt){this.eventManager=rt,this.sharedStylesHost=Xe,this.appId=yt,this.rendererByCompId=new Map,this.defaultRenderer=new ce(rt)}createRenderer(rt,Xe){if(!rt||!Xe)return this.defaultRenderer;switch(Xe.encapsulation){case e.ifc.Emulated:{let yt=this.rendererByCompId.get(Xe.id);return yt||(yt=new me(this.eventManager,this.sharedStylesHost,Xe,this.appId),this.rendererByCompId.set(Xe.id,yt)),yt.applyToHost(rt),yt}case 1:case e.ifc.ShadowDom:return new xe(this.eventManager,this.sharedStylesHost,rt,Xe);default:if(!this.rendererByCompId.has(Xe.id)){const yt=Te(Xe.id,Xe.styles,[]);this.sharedStylesHost.addStyles(yt),this.rendererByCompId.set(Xe.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return _t.\u0275fac=function(rt){return new(rt||_t)(e.LFG(N),e.LFG(P),e.LFG(e.AFp))},_t.\u0275prov=e.Yz7({token:_t,factory:_t.\u0275fac}),_t})();class ce{constructor(pt){this.eventManager=pt,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(pt,rt){return rt?document.createElementNS(D[rt],pt):document.createElement(pt)}createComment(pt){return document.createComment(pt)}createText(pt){return document.createTextNode(pt)}appendChild(pt,rt){pt.appendChild(rt)}insertBefore(pt,rt,Xe){pt&&pt.insertBefore(rt,Xe)}removeChild(pt,rt){pt&&pt.removeChild(rt)}selectRootElement(pt,rt){let Xe="string"==typeof pt?document.querySelector(pt):pt;if(!Xe)throw new Error(`The selector "${pt}" did not match any elements`);return rt||(Xe.textContent=""),Xe}parentNode(pt){return pt.parentNode}nextSibling(pt){return pt.nextSibling}setAttribute(pt,rt,Xe,yt){if(yt){rt=yt+":"+rt;const Gt=D[yt];Gt?pt.setAttributeNS(Gt,rt,Xe):pt.setAttribute(rt,Xe)}else pt.setAttribute(rt,Xe)}removeAttribute(pt,rt,Xe){if(Xe){const yt=D[Xe];yt?pt.removeAttributeNS(yt,rt):pt.removeAttribute(`${Xe}:${rt}`)}else pt.removeAttribute(rt)}addClass(pt,rt){pt.classList.add(rt)}removeClass(pt,rt){pt.classList.remove(rt)}setStyle(pt,rt,Xe,yt){yt&(e.JOm.DashCase|e.JOm.Important)?pt.style.setProperty(rt,Xe,yt&e.JOm.Important?"important":""):pt.style[rt]=Xe}removeStyle(pt,rt,Xe){Xe&e.JOm.DashCase?pt.style.removeProperty(rt):pt.style[rt]=""}setProperty(pt,rt,Xe){pt[rt]=Xe}setValue(pt,rt){pt.nodeValue=rt}listen(pt,rt,Xe){return"string"==typeof pt?this.eventManager.addGlobalEventListener(pt,rt,q(Xe)):this.eventManager.addEventListener(pt,rt,q(Xe))}}class me extends ce{constructor(pt,rt,Xe,yt){super(pt),this.component=Xe;const Gt=Te(yt+"-"+Xe.id,Xe.styles,[]);rt.addStyles(Gt),this.contentAttr=function de(_t){return ee.replace(y,_t)}(yt+"-"+Xe.id),this.hostAttr=function ue(_t){return G.replace(y,_t)}(yt+"-"+Xe.id)}applyToHost(pt){super.setAttribute(pt,this.hostAttr,"")}createElement(pt,rt){const Xe=super.createElement(pt,rt);return super.setAttribute(Xe,this.contentAttr,""),Xe}}class xe extends ce{constructor(pt,rt,Xe,yt){super(pt),this.sharedStylesHost=rt,this.hostEl=Xe,this.shadowRoot=Xe.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Gt=Te(yt.id,yt.styles,[]);for(let Qt=0;Qt<Gt.length;Qt++){const on=document.createElement("style");on.textContent=Gt[Qt],this.shadowRoot.appendChild(on)}}nodeOrShadowRoot(pt){return pt===this.hostEl?this.shadowRoot:pt}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(pt,rt){return super.appendChild(this.nodeOrShadowRoot(pt),rt)}insertBefore(pt,rt,Xe){return super.insertBefore(this.nodeOrShadowRoot(pt),rt,Xe)}removeChild(pt,rt){return super.removeChild(this.nodeOrShadowRoot(pt),rt)}parentNode(pt){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(pt)))}}let ve=(()=>{class _t extends B{constructor(rt){super(rt)}supports(rt){return!0}addEventListener(rt,Xe,yt){return rt.addEventListener(Xe,yt,!1),()=>this.removeEventListener(rt,Xe,yt)}removeEventListener(rt,Xe,yt){return rt.removeEventListener(Xe,yt)}}return _t.\u0275fac=function(rt){return new(rt||_t)(e.LFG(r.K0))},_t.\u0275prov=e.Yz7({token:_t,factory:_t.\u0275fac}),_t})();const Oe=["alt","control","meta","shift"],Ie={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Re={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Pe={alt:_t=>_t.altKey,control:_t=>_t.ctrlKey,meta:_t=>_t.metaKey,shift:_t=>_t.shiftKey};let ke=(()=>{class _t extends B{constructor(rt){super(rt)}supports(rt){return null!=_t.parseEventName(rt)}addEventListener(rt,Xe,yt){const Gt=_t.parseEventName(Xe),Qt=_t.eventCallback(Gt.fullKey,yt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,r.q)().onAndCancel(rt,Gt.domEventName,Qt))}static parseEventName(rt){const Xe=rt.toLowerCase().split("."),yt=Xe.shift();if(0===Xe.length||"keydown"!==yt&&"keyup"!==yt)return null;const Gt=_t._normalizeKey(Xe.pop());let Qt="";if(Oe.forEach(mn=>{const Dn=Xe.indexOf(mn);Dn>-1&&(Xe.splice(Dn,1),Qt+=mn+".")}),Qt+=Gt,0!=Xe.length||0===Gt.length)return null;const on={};return on.domEventName=yt,on.fullKey=Qt,on}static getEventFullKey(rt){let Xe="",yt=function Be(_t){let pt=_t.key;if(null==pt){if(pt=_t.keyIdentifier,null==pt)return"Unidentified";pt.startsWith("U+")&&(pt=String.fromCharCode(parseInt(pt.substring(2),16)),3===_t.location&&Re.hasOwnProperty(pt)&&(pt=Re[pt]))}return Ie[pt]||pt}(rt);return yt=yt.toLowerCase()," "===yt?yt="space":"."===yt&&(yt="dot"),Oe.forEach(Gt=>{Gt!=yt&&Pe[Gt](rt)&&(Xe+=Gt+".")}),Xe+=yt,Xe}static eventCallback(rt,Xe,yt){return Gt=>{_t.getEventFullKey(Gt)===rt&&yt.runGuarded(()=>Xe(Gt))}}static _normalizeKey(rt){return"esc"===rt?"escape":rt}}return _t.\u0275fac=function(rt){return new(rt||_t)(e.LFG(r.K0))},_t.\u0275prov=e.Yz7({token:_t,factory:_t.\u0275fac}),_t})();const Y=(0,e.eFA)(e._c5,"browser",[{provide:e.Lbi,useValue:r.bD},{provide:e.g9A,useValue:function qe(){R.makeCurrent(),v.init()},multi:!0},{provide:r.K0,useFactory:function De(){return(0,e.RDi)(document),document},deps:[]}]),J=[{provide:e.zSh,useValue:"root"},{provide:e.qLn,useFactory:function He(){return new e.qLn},deps:[]},{provide:k,useClass:ve,multi:!0,deps:[r.K0,e.R0b,e.Lbi]},{provide:k,useClass:ke,multi:!0,deps:[r.K0]},{provide:H,useClass:H,deps:[N,P,e.AFp]},{provide:e.FYo,useExisting:H},{provide:x,useExisting:P},{provide:P,useClass:P,deps:[r.K0]},{provide:e.dDg,useClass:e.dDg,deps:[e.R0b]},{provide:N,useClass:N,deps:[k,e.R0b]},{provide:r.JF,useClass:T,deps:[]}];let Me=(()=>{class _t{constructor(rt){if(rt)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(rt){return{ngModule:_t,providers:[{provide:e.AFp,useValue:rt.appId},{provide:f,useExisting:e.AFp},g]}}}return _t.\u0275fac=function(rt){return new(rt||_t)(e.LFG(_t,12))},_t.\u0275mod=e.oAB({type:_t}),_t.\u0275inj=e.cJS({providers:J,imports:[r.ez,e.hGG]}),_t})();"undefined"!=typeof window&&window;let mt=(()=>{class _t{}return _t.\u0275fac=function(rt){return new(rt||_t)},_t.\u0275prov=e.Yz7({token:_t,factory:function(rt){let Xe=null;return Xe=rt?new(rt||_t):e.LFG(nn),Xe},providedIn:"root"}),_t})(),nn=(()=>{class _t extends mt{constructor(rt){super(),this._doc=rt}sanitize(rt,Xe){if(null==Xe)return null;switch(rt){case e.q3G.NONE:return Xe;case e.q3G.HTML:return(0,e.qzn)(Xe,"HTML")?(0,e.z3N)(Xe):(0,e.EiD)(this._doc,String(Xe)).toString();case e.q3G.STYLE:return(0,e.qzn)(Xe,"Style")?(0,e.z3N)(Xe):Xe;case e.q3G.SCRIPT:if((0,e.qzn)(Xe,"Script"))return(0,e.z3N)(Xe);throw new Error("unsafe value used in a script context");case e.q3G.URL:return(0,e.yhl)(Xe),(0,e.qzn)(Xe,"URL")?(0,e.z3N)(Xe):(0,e.mCW)(String(Xe));case e.q3G.RESOURCE_URL:if((0,e.qzn)(Xe,"ResourceURL"))return(0,e.z3N)(Xe);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${rt} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(rt){return(0,e.JVY)(rt)}bypassSecurityTrustStyle(rt){return(0,e.L6k)(rt)}bypassSecurityTrustScript(rt){return(0,e.eBb)(rt)}bypassSecurityTrustUrl(rt){return(0,e.LAX)(rt)}bypassSecurityTrustResourceUrl(rt){return(0,e.pB0)(rt)}}return _t.\u0275fac=function(rt){return new(rt||_t)(e.LFG(r.K0))},_t.\u0275prov=e.Yz7({token:_t,factory:function(rt){let Xe=null;return Xe=rt?new rt:function Lt(_t){return new nn(_t.get(r.K0))}(e.LFG(e.zs3)),Xe},providedIn:"root"}),_t})()},7979:(Fn,Ve,O)=>{"use strict";O.d(Ve,{gz:()=>yn,F0:()=>ro,Bz:()=>Dl,lC:()=>kr});var r=O(4893);const S=(0,O(3888).d)(Ce=>function(){Ce(this),this.name="EmptyError",this.message="no elements in sequence"});var R=O(8306),j=O(8421);function U(Ce){return new R.y(ge=>{(0,j.Xf)(Ce()).subscribe(ge)})}var L=O(727),b=O(4482),f=O(5403);function c(){return(0,b.e)((Ce,ge)=>{let fe=null;Ce._refCount++;const Ue=(0,f.x)(ge,void 0,void 0,void 0,()=>{if(!Ce||Ce._refCount<=0||0<--Ce._refCount)return void(fe=null);const Ze=Ce._connection,ft=fe;fe=null,Ze&&(!ft||Ze===ft)&&Ze.unsubscribe(),ge.unsubscribe()});Ce.subscribe(Ue),Ue.closed||(fe=Ce.connect())})}class g extends R.y{constructor(ge,fe){super(),this.source=ge,this.subjectFactory=fe,this._subject=null,this._refCount=0,this._connection=null,(0,b.A)(ge)&&(this.lift=ge.lift)}_subscribe(ge){return this.getSubject().subscribe(ge)}getSubject(){const ge=this._subject;return(!ge||ge.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:ge}=this;this._subject=this._connection=null,null==ge||ge.unsubscribe()}connect(){let ge=this._connection;if(!ge){ge=this._connection=new L.w0;const fe=this.getSubject();ge.add(this.source.subscribe((0,f.x)(fe,void 0,()=>{this._teardown(),fe.complete()},Ue=>{this._teardown(),fe.error(Ue)},()=>this._teardown()))),ge.closed&&(this._connection=null,ge=L.w0.EMPTY)}return ge}refCount(){return c()(this)}}var v=O(2076),T=O(9646),k=O(1135),N=O(9841),B=O(7272),x=O(515),P=O(7579);function _(Ce,ge,fe,Ue,Ze){return(ft,St)=>{let Ft=fe,dn=ge,qn=0;ft.subscribe((0,f.x)(St,xr=>{const hr=qn++;dn=Ft?Ce(dn,xr,hr):(Ft=!0,xr),Ue&&St.next(dn)},Ze&&(()=>{Ft&&St.next(dn),St.complete()})))}}function D(Ce,ge){return(0,b.e)(_(Ce,ge,arguments.length>=2,!0))}function y(Ce){return(0,b.e)((ge,fe)=>{let ft,Ue=null,Ze=!1;Ue=ge.subscribe((0,f.x)(fe,void 0,void 0,St=>{ft=(0,j.Xf)(Ce(St,y(Ce)(ge))),Ue?(Ue.unsubscribe(),Ue=null,ft.subscribe(fe)):Ze=!0})),Ze&&(Ue.unsubscribe(),Ue=null,ft.subscribe(fe))})}var A=O(9300);function I(Ce){return Ce<=0?()=>x.E:(0,b.e)((ge,fe)=>{let Ue=[];ge.subscribe((0,f.x)(fe,Ze=>{Ue.push(Ze),Ce<Ue.length&&Ue.shift()},()=>{for(const Ze of Ue)fe.next(Ze);fe.complete()},void 0,()=>{Ue=null}))})}function G(Ce=ee){return(0,b.e)((ge,fe)=>{let Ue=!1;ge.subscribe((0,f.x)(fe,Ze=>{Ue=!0,fe.next(Ze)},()=>Ue?fe.complete():fe.error(Ce())))})}function ee(){return new S}function de(Ce){return(0,b.e)((ge,fe)=>{let Ue=!1;ge.subscribe((0,f.x)(fe,Ze=>{Ue=!0,fe.next(Ze)},()=>{Ue||fe.next(Ce),fe.complete()}))})}var ue=O(4671),q=O(5698);function se(Ce,ge){const fe=arguments.length>=2;return Ue=>Ue.pipe(Ce?(0,A.h)((Ze,ft)=>Ce(Ze,ft,Ue)):ue.y,(0,q.q)(1),fe?de(ge):G(()=>new S))}var ce=O(4004),ne=O(3900),pe=O(8675),me=O(4351),xe=O(5577),ve=O(8505),Oe=O(8189),Ee=O(9808);class Ie{constructor(ge,fe){this.id=ge,this.url=fe}}class Re extends Ie{constructor(ge,fe,Ue="imperative",Ze=null){super(ge,fe),this.navigationTrigger=Ue,this.restoredState=Ze}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Pe extends Ie{constructor(ge,fe,Ue){super(ge,fe),this.urlAfterRedirects=Ue}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ke extends Ie{constructor(ge,fe,Ue){super(ge,fe),this.reason=Ue}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Be extends Ie{constructor(ge,fe,Ue){super(ge,fe),this.error=Ue}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class qe extends Ie{constructor(ge,fe,Ue,Ze){super(ge,fe),this.urlAfterRedirects=Ue,this.state=Ze}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class He extends Ie{constructor(ge,fe,Ue,Ze){super(ge,fe),this.urlAfterRedirects=Ue,this.state=Ze}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class De extends Ie{constructor(ge,fe,Ue,Ze,ft){super(ge,fe),this.urlAfterRedirects=Ue,this.state=Ze,this.shouldActivate=ft}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class he extends Ie{constructor(ge,fe,Ue,Ze){super(ge,fe),this.urlAfterRedirects=Ue,this.state=Ze}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Y extends Ie{constructor(ge,fe,Ue,Ze){super(ge,fe),this.urlAfterRedirects=Ue,this.state=Ze}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class J{constructor(ge){this.route=ge}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Me{constructor(ge){this.route=ge}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ae{constructor(ge){this.snapshot=ge}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class re{constructor(ge){this.snapshot=ge}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class z{constructor(ge){this.snapshot=ge}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class te{constructor(ge){this.snapshot=ge}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class X{constructor(ge,fe,Ue){this.routerEvent=ge,this.position=fe,this.anchor=Ue}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Z="primary";class W{constructor(ge){this.params=ge||{}}has(ge){return Object.prototype.hasOwnProperty.call(this.params,ge)}get(ge){if(this.has(ge)){const fe=this.params[ge];return Array.isArray(fe)?fe[0]:fe}return null}getAll(ge){if(this.has(ge)){const fe=this.params[ge];return Array.isArray(fe)?fe:[fe]}return[]}get keys(){return Object.keys(this.params)}}function oe(Ce){return new W(Ce)}const be="ngNavigationCancelingError";function Fe(Ce){const ge=Error("NavigationCancelingError: "+Ce);return ge[be]=!0,ge}function at(Ce,ge,fe){const Ue=fe.path.split("/");if(Ue.length>Ce.length||"full"===fe.pathMatch&&(ge.hasChildren()||Ue.length<Ce.length))return null;const Ze={};for(let ft=0;ft<Ue.length;ft++){const St=Ue[ft],Ft=Ce[ft];if(St.startsWith(":"))Ze[St.substring(1)]=Ft;else if(St!==Ft.path)return null}return{consumed:Ce.slice(0,Ue.length),posParams:Ze}}function ut(Ce,ge){const fe=Ce?Object.keys(Ce):void 0,Ue=ge?Object.keys(ge):void 0;if(!fe||!Ue||fe.length!=Ue.length)return!1;let Ze;for(let ft=0;ft<fe.length;ft++)if(Ze=fe[ft],!Ot(Ce[Ze],ge[Ze]))return!1;return!0}function Ot(Ce,ge){if(Array.isArray(Ce)&&Array.isArray(ge)){if(Ce.length!==ge.length)return!1;const fe=[...Ce].sort(),Ue=[...ge].sort();return fe.every((Ze,ft)=>Ue[ft]===Ze)}return Ce===ge}function tt(Ce){return Array.prototype.concat.apply([],Ce)}function Et(Ce){return Ce.length>0?Ce[Ce.length-1]:null}function vt(Ce,ge){for(const fe in Ce)Ce.hasOwnProperty(fe)&&ge(Ce[fe],fe)}function At(Ce){return(0,r.CqO)(Ce)?Ce:(0,r.QGY)(Ce)?(0,v.D)(Promise.resolve(Ce)):(0,T.of)(Ce)}const $t={exact:function Bn(Ce,ge,fe){if(!zt(Ce.segments,ge.segments)||!ot(Ce.segments,ge.segments,fe)||Ce.numberOfChildren!==ge.numberOfChildren)return!1;for(const Ue in ge.children)if(!Ce.children[Ue]||!Bn(Ce.children[Ue],ge.children[Ue],fe))return!1;return!0},subset:jn},Kt={exact:function ln(Ce,ge){return ut(Ce,ge)},subset:function Rn(Ce,ge){return Object.keys(ge).length<=Object.keys(Ce).length&&Object.keys(ge).every(fe=>Ot(Ce[fe],ge[fe]))},ignored:()=>!0};function Xt(Ce,ge,fe){return $t[fe.paths](Ce.root,ge.root,fe.matrixParams)&&Kt[fe.queryParams](Ce.queryParams,ge.queryParams)&&!("exact"===fe.fragment&&Ce.fragment!==ge.fragment)}function jn(Ce,ge,fe){return Vn(Ce,ge,ge.segments,fe)}function Vn(Ce,ge,fe,Ue){if(Ce.segments.length>fe.length){const Ze=Ce.segments.slice(0,fe.length);return!(!zt(Ze,fe)||ge.hasChildren()||!ot(Ze,fe,Ue))}if(Ce.segments.length===fe.length){if(!zt(Ce.segments,fe)||!ot(Ce.segments,fe,Ue))return!1;for(const Ze in ge.children)if(!Ce.children[Ze]||!jn(Ce.children[Ze],ge.children[Ze],Ue))return!1;return!0}{const Ze=fe.slice(0,Ce.segments.length),ft=fe.slice(Ce.segments.length);return!!(zt(Ce.segments,Ze)&&ot(Ce.segments,Ze,Ue)&&Ce.children[Z])&&Vn(Ce.children[Z],ge,ft,Ue)}}function ot(Ce,ge,fe){return ge.every((Ue,Ze)=>Kt[fe](Ce[Ze].parameters,Ue.parameters))}class Qe{constructor(ge,fe,Ue){this.root=ge,this.queryParams=fe,this.fragment=Ue}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=oe(this.queryParams)),this._queryParamMap}toString(){return Xe.serialize(this)}}class mt{constructor(ge,fe){this.segments=ge,this.children=fe,this.parent=null,vt(fe,(Ue,Ze)=>Ue.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return yt(this)}}class Lt{constructor(ge,fe){this.path=ge,this.parameters=fe}get parameterMap(){return this._parameterMap||(this._parameterMap=oe(this.parameters)),this._parameterMap}toString(){return _r(this)}}function zt(Ce,ge){return Ce.length===ge.length&&Ce.every((fe,Ue)=>fe.path===ge[Ue].path)}class pt{}class rt{parse(ge){const fe=new kn(ge);return new Qe(fe.parseRootSegment(),fe.parseQueryParams(),fe.parseFragment())}serialize(ge){const fe=`/${Gt(ge.root,!0)}`,Ue=function ct(Ce){const ge=Object.keys(Ce).map(fe=>{const Ue=Ce[fe];return Array.isArray(Ue)?Ue.map(Ze=>`${on(fe)}=${on(Ze)}`).join("&"):`${on(fe)}=${on(Ue)}`}).filter(fe=>!!fe);return ge.length?`?${ge.join("&")}`:""}(ge.queryParams);return`${fe}${Ue}${"string"==typeof ge.fragment?`#${function mn(Ce){return encodeURI(Ce)}(ge.fragment)}`:""}`}}const Xe=new rt;function yt(Ce){return Ce.segments.map(ge=>_r(ge)).join("/")}function Gt(Ce,ge){if(!Ce.hasChildren())return yt(Ce);if(ge){const fe=Ce.children[Z]?Gt(Ce.children[Z],!1):"",Ue=[];return vt(Ce.children,(Ze,ft)=>{ft!==Z&&Ue.push(`${ft}:${Gt(Ze,!1)}`)}),Ue.length>0?`${fe}(${Ue.join("//")})`:fe}{const fe=function _t(Ce,ge){let fe=[];return vt(Ce.children,(Ue,Ze)=>{Ze===Z&&(fe=fe.concat(ge(Ue,Ze)))}),vt(Ce.children,(Ue,Ze)=>{Ze!==Z&&(fe=fe.concat(ge(Ue,Ze)))}),fe}(Ce,(Ue,Ze)=>Ze===Z?[Gt(Ce.children[Z],!1)]:[`${Ze}:${Gt(Ue,!1)}`]);return 1===Object.keys(Ce.children).length&&null!=Ce.children[Z]?`${yt(Ce)}/${fe[0]}`:`${yt(Ce)}/(${fe.join("//")})`}}function Qt(Ce){return encodeURIComponent(Ce).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function on(Ce){return Qt(Ce).replace(/%3B/gi,";")}function Dn(Ce){return Qt(Ce).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Zn(Ce){return decodeURIComponent(Ce)}function Jn(Ce){return Zn(Ce.replace(/\+/g,"%20"))}function _r(Ce){return`${Dn(Ce.path)}${function Pr(Ce){return Object.keys(Ce).map(ge=>`;${Dn(ge)}=${Dn(Ce[ge])}`).join("")}(Ce.parameters)}`}const qt=/^[^\/()?;=#]+/;function fn(Ce){const ge=Ce.match(qt);return ge?ge[0]:""}const It=/^[^=?&#]+/,Rt=/^[^&#]+/;class kn{constructor(ge){this.url=ge,this.remaining=ge}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new mt([],{}):new mt([],this.parseChildren())}parseQueryParams(){const ge={};if(this.consumeOptional("?"))do{this.parseQueryParam(ge)}while(this.consumeOptional("&"));return ge}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const ge=[];for(this.peekStartsWith("(")||ge.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),ge.push(this.parseSegment());let fe={};this.peekStartsWith("/(")&&(this.capture("/"),fe=this.parseParens(!0));let Ue={};return this.peekStartsWith("(")&&(Ue=this.parseParens(!1)),(ge.length>0||Object.keys(fe).length>0)&&(Ue[Z]=new mt(ge,fe)),Ue}parseSegment(){const ge=fn(this.remaining);if(""===ge&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(ge),new Lt(Zn(ge),this.parseMatrixParams())}parseMatrixParams(){const ge={};for(;this.consumeOptional(";");)this.parseParam(ge);return ge}parseParam(ge){const fe=fn(this.remaining);if(!fe)return;this.capture(fe);let Ue="";if(this.consumeOptional("=")){const Ze=fn(this.remaining);Ze&&(Ue=Ze,this.capture(Ue))}ge[Zn(fe)]=Zn(Ue)}parseQueryParam(ge){const fe=function kt(Ce){const ge=Ce.match(It);return ge?ge[0]:""}(this.remaining);if(!fe)return;this.capture(fe);let Ue="";if(this.consumeOptional("=")){const St=function sn(Ce){const ge=Ce.match(Rt);return ge?ge[0]:""}(this.remaining);St&&(Ue=St,this.capture(Ue))}const Ze=Jn(fe),ft=Jn(Ue);if(ge.hasOwnProperty(Ze)){let St=ge[Ze];Array.isArray(St)||(St=[St],ge[Ze]=St),St.push(ft)}else ge[Ze]=ft}parseParens(ge){const fe={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const Ue=fn(this.remaining),Ze=this.remaining[Ue.length];if("/"!==Ze&&")"!==Ze&&";"!==Ze)throw new Error(`Cannot parse url '${this.url}'`);let ft;Ue.indexOf(":")>-1?(ft=Ue.substr(0,Ue.indexOf(":")),this.capture(ft),this.capture(":")):ge&&(ft=Z);const St=this.parseChildren();fe[ft]=1===Object.keys(St).length?St[Z]:new mt([],St),this.consumeOptional("//")}return fe}peekStartsWith(ge){return this.remaining.startsWith(ge)}consumeOptional(ge){return!!this.peekStartsWith(ge)&&(this.remaining=this.remaining.substring(ge.length),!0)}capture(ge){if(!this.consumeOptional(ge))throw new Error(`Expected "${ge}".`)}}class wn{constructor(ge){this._root=ge}get root(){return this._root.value}parent(ge){const fe=this.pathFromRoot(ge);return fe.length>1?fe[fe.length-2]:null}children(ge){const fe=xt(ge,this._root);return fe?fe.children.map(Ue=>Ue.value):[]}firstChild(ge){const fe=xt(ge,this._root);return fe&&fe.children.length>0?fe.children[0].value:null}siblings(ge){const fe=Ct(ge,this._root);return fe.length<2?[]:fe[fe.length-2].children.map(Ze=>Ze.value).filter(Ze=>Ze!==ge)}pathFromRoot(ge){return Ct(ge,this._root).map(fe=>fe.value)}}function xt(Ce,ge){if(Ce===ge.value)return ge;for(const fe of ge.children){const Ue=xt(Ce,fe);if(Ue)return Ue}return null}function Ct(Ce,ge){if(Ce===ge.value)return[ge];for(const fe of ge.children){const Ue=Ct(Ce,fe);if(Ue.length)return Ue.unshift(ge),Ue}return[]}class Vt{constructor(ge,fe){this.value=ge,this.children=fe}toString(){return`TreeNode(${this.value})`}}function Jt(Ce){const ge={};return Ce&&Ce.children.forEach(fe=>ge[fe.value.outlet]=fe),ge}class bn extends wn{constructor(ge,fe){super(ge),this.snapshot=fe,Cr(this,ge)}toString(){return this.snapshot.toString()}}function Ln(Ce,ge){const fe=function Pt(Ce,ge){const St=new dr([],{},{},"",{},Z,ge,null,Ce.root,-1,{});return new pr("",new Vt(St,[]))}(Ce,ge),Ue=new k.X([new Lt("",{})]),Ze=new k.X({}),ft=new k.X({}),St=new k.X({}),Ft=new k.X(""),dn=new yn(Ue,Ze,St,Ft,ft,Z,ge,fe.root);return dn.snapshot=fe.root,new bn(new Vt(dn,[]),fe)}class yn{constructor(ge,fe,Ue,Ze,ft,St,Ft,dn){this.url=ge,this.params=fe,this.queryParams=Ue,this.fragment=Ze,this.data=ft,this.outlet=St,this.component=Ft,this._futureSnapshot=dn}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ce.U)(ge=>oe(ge)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ce.U)(ge=>oe(ge)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Nn(Ce,ge="emptyOnly"){const fe=Ce.pathFromRoot;let Ue=0;if("always"!==ge)for(Ue=fe.length-1;Ue>=1;){const Ze=fe[Ue],ft=fe[Ue-1];if(Ze.routeConfig&&""===Ze.routeConfig.path)Ue--;else{if(ft.component)break;Ue--}}return function $n(Ce){return Ce.reduce((ge,fe)=>({params:Object.assign(Object.assign({},ge.params),fe.params),data:Object.assign(Object.assign({},ge.data),fe.data),resolve:Object.assign(Object.assign({},ge.resolve),fe._resolvedData)}),{params:{},data:{},resolve:{}})}(fe.slice(Ue))}class dr{constructor(ge,fe,Ue,Ze,ft,St,Ft,dn,qn,xr,hr){this.url=ge,this.params=fe,this.queryParams=Ue,this.fragment=Ze,this.data=ft,this.outlet=St,this.component=Ft,this.routeConfig=dn,this._urlSegment=qn,this._lastPathIndex=xr,this._resolve=hr}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=oe(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=oe(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(Ue=>Ue.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class pr extends wn{constructor(ge,fe){super(fe),this.url=ge,Cr(this,fe)}toString(){return Sr(this._root)}}function Cr(Ce,ge){ge.value._routerState=Ce,ge.children.forEach(fe=>Cr(Ce,fe))}function Sr(Ce){const ge=Ce.children.length>0?` { ${Ce.children.map(Sr).join(", ")} } `:"";return`${Ce.value}${ge}`}function Yr(Ce){if(Ce.snapshot){const ge=Ce.snapshot,fe=Ce._futureSnapshot;Ce.snapshot=fe,ut(ge.queryParams,fe.queryParams)||Ce.queryParams.next(fe.queryParams),ge.fragment!==fe.fragment&&Ce.fragment.next(fe.fragment),ut(ge.params,fe.params)||Ce.params.next(fe.params),function et(Ce,ge){if(Ce.length!==ge.length)return!1;for(let fe=0;fe<Ce.length;++fe)if(!ut(Ce[fe],ge[fe]))return!1;return!0}(ge.url,fe.url)||Ce.url.next(fe.url),ut(ge.data,fe.data)||Ce.data.next(fe.data)}else Ce.snapshot=Ce._futureSnapshot,Ce.data.next(Ce._futureSnapshot.data)}function Tr(Ce,ge){const fe=ut(Ce.params,ge.params)&&function nn(Ce,ge){return zt(Ce,ge)&&Ce.every((fe,Ue)=>ut(fe.parameters,ge[Ue].parameters))}(Ce.url,ge.url);return fe&&!(!Ce.parent!=!ge.parent)&&(!Ce.parent||Tr(Ce.parent,ge.parent))}function Mi(Ce,ge,fe){if(fe&&Ce.shouldReuseRoute(ge.value,fe.value.snapshot)){const Ue=fe.value;Ue._futureSnapshot=ge.value;const Ze=function oi(Ce,ge,fe){return ge.children.map(Ue=>{for(const Ze of fe.children)if(Ce.shouldReuseRoute(Ue.value,Ze.value.snapshot))return Mi(Ce,Ue,Ze);return Mi(Ce,Ue)})}(Ce,ge,fe);return new Vt(Ue,Ze)}{if(Ce.shouldAttach(ge.value)){const ft=Ce.retrieve(ge.value);if(null!==ft){const St=ft.route;return St.value._futureSnapshot=ge.value,St.children=ge.children.map(Ft=>Mi(Ce,Ft)),St}}const Ue=function si(Ce){return new yn(new k.X(Ce.url),new k.X(Ce.params),new k.X(Ce.queryParams),new k.X(Ce.fragment),new k.X(Ce.data),Ce.outlet,Ce.component,Ce)}(ge.value),Ze=ge.children.map(ft=>Mi(Ce,ft));return new Vt(Ue,Ze)}}function ci(Ce){return"object"==typeof Ce&&null!=Ce&&!Ce.outlets&&!Ce.segmentPath}function Si(Ce){return"object"==typeof Ce&&null!=Ce&&Ce.outlets}function Ar(Ce,ge,fe,Ue,Ze){let ft={};return Ue&&vt(Ue,(St,Ft)=>{ft[Ft]=Array.isArray(St)?St.map(dn=>`${dn}`):`${St}`}),new Qe(fe.root===Ce?ge:eo(fe.root,Ce,ge),ft,Ze)}function eo(Ce,ge,fe){const Ue={};return vt(Ce.children,(Ze,ft)=>{Ue[ft]=Ze===ge?fe:eo(Ze,ge,fe)}),new mt(Ce.segments,Ue)}class Bi{constructor(ge,fe,Ue){if(this.isAbsolute=ge,this.numberOfDoubleDots=fe,this.commands=Ue,ge&&Ue.length>0&&ci(Ue[0]))throw new Error("Root segment cannot have matrix parameters");const Ze=Ue.find(Si);if(Ze&&Ze!==Et(Ue))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ui{constructor(ge,fe,Ue){this.segmentGroup=ge,this.processChildren=fe,this.index=Ue}}function Ko(Ce,ge,fe){if(Ce||(Ce=new mt([],{})),0===Ce.segments.length&&Ce.hasChildren())return Wr(Ce,ge,fe);const Ue=function Po(Ce,ge,fe){let Ue=0,Ze=ge;const ft={match:!1,pathIndex:0,commandIndex:0};for(;Ze<Ce.segments.length;){if(Ue>=fe.length)return ft;const St=Ce.segments[Ze],Ft=fe[Ue];if(Si(Ft))break;const dn=`${Ft}`,qn=Ue<fe.length-1?fe[Ue+1]:null;if(Ze>0&&void 0===dn)break;if(dn&&qn&&"object"==typeof qn&&void 0===qn.outlets){if(!rr(dn,qn,St))return ft;Ue+=2}else{if(!rr(dn,{},St))return ft;Ue++}Ze++}return{match:!0,pathIndex:Ze,commandIndex:Ue}}(Ce,ge,fe),Ze=fe.slice(Ue.commandIndex);if(Ue.match&&Ue.pathIndex<Ce.segments.length){const ft=new mt(Ce.segments.slice(0,Ue.pathIndex),{});return ft.children[Z]=new mt(Ce.segments.slice(Ue.pathIndex),Ce.children),Wr(ft,0,Ze)}return Ue.match&&0===Ze.length?new mt(Ce.segments,{}):Ue.match&&!Ce.hasChildren()?ko(Ce,ge,fe):Ue.match?Wr(Ce,0,Ze):ko(Ce,ge,fe)}function Wr(Ce,ge,fe){if(0===fe.length)return new mt(Ce.segments,{});{const Ue=function _i(Ce){return Si(Ce[0])?Ce[0].outlets:{[Z]:Ce}}(fe),Ze={};return vt(Ue,(ft,St)=>{"string"==typeof ft&&(ft=[ft]),null!==ft&&(Ze[St]=Ko(Ce.children[St],ge,ft))}),vt(Ce.children,(ft,St)=>{void 0===Ue[St]&&(Ze[St]=ft)}),new mt(Ce.segments,Ze)}}function ko(Ce,ge,fe){const Ue=Ce.segments.slice(0,ge);let Ze=0;for(;Ze<fe.length;){const ft=fe[Ze];if(Si(ft)){const dn=ir(ft.outlets);return new mt(Ue,dn)}if(0===Ze&&ci(fe[0])){Ue.push(new Lt(Ce.segments[ge].path,it(fe[0]))),Ze++;continue}const St=Si(ft)?ft.outlets[Z]:`${ft}`,Ft=Ze<fe.length-1?fe[Ze+1]:null;St&&Ft&&ci(Ft)?(Ue.push(new Lt(St,it(Ft))),Ze+=2):(Ue.push(new Lt(St,{})),Ze++)}return new mt(Ue,{})}function ir(Ce){const ge={};return vt(Ce,(fe,Ue)=>{"string"==typeof fe&&(fe=[fe]),null!==fe&&(ge[Ue]=ko(new mt([],{}),0,fe))}),ge}function it(Ce){const ge={};return vt(Ce,(fe,Ue)=>ge[Ue]=`${fe}`),ge}function rr(Ce,ge,fe){return Ce==fe.path&&ut(ge,fe.parameters)}class Pi{constructor(ge,fe,Ue,Ze){this.routeReuseStrategy=ge,this.futureState=fe,this.currState=Ue,this.forwardEvent=Ze}activate(ge){const fe=this.futureState._root,Ue=this.currState?this.currState._root:null;this.deactivateChildRoutes(fe,Ue,ge),Yr(this.futureState.root),this.activateChildRoutes(fe,Ue,ge)}deactivateChildRoutes(ge,fe,Ue){const Ze=Jt(fe);ge.children.forEach(ft=>{const St=ft.value.outlet;this.deactivateRoutes(ft,Ze[St],Ue),delete Ze[St]}),vt(Ze,(ft,St)=>{this.deactivateRouteAndItsChildren(ft,Ue)})}deactivateRoutes(ge,fe,Ue){const Ze=ge.value,ft=fe?fe.value:null;if(Ze===ft)if(Ze.component){const St=Ue.getContext(Ze.outlet);St&&this.deactivateChildRoutes(ge,fe,St.children)}else this.deactivateChildRoutes(ge,fe,Ue);else ft&&this.deactivateRouteAndItsChildren(fe,Ue)}deactivateRouteAndItsChildren(ge,fe){ge.value.component&&this.routeReuseStrategy.shouldDetach(ge.value.snapshot)?this.detachAndStoreRouteSubtree(ge,fe):this.deactivateRouteAndOutlet(ge,fe)}detachAndStoreRouteSubtree(ge,fe){const Ue=fe.getContext(ge.value.outlet),Ze=Ue&&ge.value.component?Ue.children:fe,ft=Jt(ge);for(const St of Object.keys(ft))this.deactivateRouteAndItsChildren(ft[St],Ze);if(Ue&&Ue.outlet){const St=Ue.outlet.detach(),Ft=Ue.children.onOutletDeactivated();this.routeReuseStrategy.store(ge.value.snapshot,{componentRef:St,route:ge,contexts:Ft})}}deactivateRouteAndOutlet(ge,fe){const Ue=fe.getContext(ge.value.outlet),Ze=Ue&&ge.value.component?Ue.children:fe,ft=Jt(ge);for(const St of Object.keys(ft))this.deactivateRouteAndItsChildren(ft[St],Ze);Ue&&Ue.outlet&&(Ue.outlet.deactivate(),Ue.children.onOutletDeactivated(),Ue.attachRef=null,Ue.resolver=null,Ue.route=null)}activateChildRoutes(ge,fe,Ue){const Ze=Jt(fe);ge.children.forEach(ft=>{this.activateRoutes(ft,Ze[ft.value.outlet],Ue),this.forwardEvent(new te(ft.value.snapshot))}),ge.children.length&&this.forwardEvent(new re(ge.value.snapshot))}activateRoutes(ge,fe,Ue){const Ze=ge.value,ft=fe?fe.value:null;if(Yr(Ze),Ze===ft)if(Ze.component){const St=Ue.getOrCreateContext(Ze.outlet);this.activateChildRoutes(ge,fe,St.children)}else this.activateChildRoutes(ge,fe,Ue);else if(Ze.component){const St=Ue.getOrCreateContext(Ze.outlet);if(this.routeReuseStrategy.shouldAttach(Ze.snapshot)){const Ft=this.routeReuseStrategy.retrieve(Ze.snapshot);this.routeReuseStrategy.store(Ze.snapshot,null),St.children.onOutletReAttached(Ft.contexts),St.attachRef=Ft.componentRef,St.route=Ft.route.value,St.outlet&&St.outlet.attach(Ft.componentRef,Ft.route.value),Yr(Ft.route.value),this.activateChildRoutes(ge,null,St.children)}else{const Ft=function Nt(Ce){for(let ge=Ce.parent;ge;ge=ge.parent){const fe=ge.routeConfig;if(fe&&fe._loadedConfig)return fe._loadedConfig;if(fe&&fe.component)return null}return null}(Ze.snapshot),dn=Ft?Ft.module.componentFactoryResolver:null;St.attachRef=null,St.route=Ze,St.resolver=dn,St.outlet&&St.outlet.activateWith(Ze,dn),this.activateChildRoutes(ge,null,St.children)}}else this.activateChildRoutes(ge,null,Ue)}}class an{constructor(ge,fe){this.routes=ge,this.module=fe}}function In(Ce){return"function"==typeof Ce}function lr(Ce){return Ce instanceof Qe}const pi=Symbol("INITIAL_VALUE");function Vi(){return(0,ne.w)(Ce=>(0,N.a)(Ce.map(ge=>ge.pipe((0,q.q)(1),(0,pe.O)(pi)))).pipe(D((ge,fe)=>{let Ue=!1;return fe.reduce((Ze,ft,St)=>Ze!==pi?Ze:(ft===pi&&(Ue=!0),Ue||!1!==ft&&St!==fe.length-1&&!lr(ft)?Ze:ft),ge)},pi),(0,A.h)(ge=>ge!==pi),(0,ce.U)(ge=>lr(ge)?ge:!0===ge),(0,q.q)(1)))}class so{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new to,this.attachRef=null}}class to{constructor(){this.contexts=new Map}onChildOutletCreated(ge,fe){const Ue=this.getOrCreateContext(ge);Ue.outlet=fe,this.contexts.set(ge,Ue)}onChildOutletDestroyed(ge){const fe=this.getContext(ge);fe&&(fe.outlet=null,fe.attachRef=null)}onOutletDeactivated(){const ge=this.contexts;return this.contexts=new Map,ge}onOutletReAttached(ge){this.contexts=ge}getOrCreateContext(ge){let fe=this.getContext(ge);return fe||(fe=new so,this.contexts.set(ge,fe)),fe}getContext(ge){return this.contexts.get(ge)||null}}let kr=(()=>{class Ce{constructor(fe,Ue,Ze,ft,St){this.parentContexts=fe,this.location=Ue,this.resolver=Ze,this.changeDetector=St,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.vpe,this.deactivateEvents=new r.vpe,this.attachEvents=new r.vpe,this.detachEvents=new r.vpe,this.name=ft||Z,fe.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const fe=this.parentContexts.getContext(this.name);fe&&fe.route&&(fe.attachRef?this.attach(fe.attachRef,fe.route):this.activateWith(fe.route,fe.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const fe=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(fe.instance),fe}attach(fe,Ue){this.activated=fe,this._activatedRoute=Ue,this.location.insert(fe.hostView),this.attachEvents.emit(fe.instance)}deactivate(){if(this.activated){const fe=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(fe)}}activateWith(fe,Ue){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=fe;const St=(Ue=Ue||this.resolver).resolveComponentFactory(fe._futureSnapshot.routeConfig.component),Ft=this.parentContexts.getOrCreateContext(this.name).children,dn=new _o(fe,Ft,this.location.injector);this.activated=this.location.createComponent(St,this.location.length,dn),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return Ce.\u0275fac=function(fe){return new(fe||Ce)(r.Y36(to),r.Y36(r.s_b),r.Y36(r._Vd),r.$8M("name"),r.Y36(r.sBO))},Ce.\u0275dir=r.lG2({type:Ce,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),Ce})();class _o{constructor(ge,fe,Ue){this.route=ge,this.childContexts=fe,this.parent=Ue}get(ge,fe){return ge===yn?this.route:ge===to?this.childContexts:this.parent.get(ge,fe)}}let Ao=(()=>{class Ce{}return Ce.\u0275fac=function(fe){return new(fe||Ce)},Ce.\u0275cmp=r.Xpm({type:Ce,selectors:[["ng-component"]],decls:1,vars:0,template:function(fe,Ue){1&fe&&r._UZ(0,"router-outlet")},directives:[kr],encapsulation:2}),Ce})();function Bo(Ce,ge=""){for(let fe=0;fe<Ce.length;fe++){const Ue=Ce[fe];Ms(Ue,xi(ge,Ue))}}function Ms(Ce,ge){Ce.children&&Bo(Ce.children,ge)}function xi(Ce,ge){return ge?Ce||ge.path?Ce&&!ge.path?`${Ce}/`:!Ce&&ge.path?ge.path:`${Ce}/${ge.path}`:"":Ce}function wi(Ce){const ge=Ce.children&&Ce.children.map(wi),fe=ge?Object.assign(Object.assign({},Ce),{children:ge}):Object.assign({},Ce);return!fe.component&&(ge||fe.loadChildren)&&fe.outlet&&fe.outlet!==Z&&(fe.component=Ao),fe}function Fi(Ce){return Ce.outlet||Z}function yo(Ce,ge){const fe=Ce.filter(Ue=>Fi(Ue)===ge);return fe.push(...Ce.filter(Ue=>Fi(Ue)!==ge)),fe}const es={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Io(Ce,ge,fe){var Ue;if(""===ge.path)return"full"===ge.pathMatch&&(Ce.hasChildren()||fe.length>0)?Object.assign({},es):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const ft=(ge.matcher||at)(fe,Ce,ge);if(!ft)return Object.assign({},es);const St={};vt(ft.posParams,(dn,qn)=>{St[qn]=dn.path});const Ft=ft.consumed.length>0?Object.assign(Object.assign({},St),ft.consumed[ft.consumed.length-1].parameters):St;return{matched:!0,consumedSegments:ft.consumed,lastChild:ft.consumed.length,parameters:Ft,positionalParamSegments:null!==(Ue=ft.posParams)&&void 0!==Ue?Ue:{}}}function Hr(Ce,ge,fe,Ue,Ze="corrected"){if(fe.length>0&&function Ge(Ce,ge,fe){return fe.some(Ue=>Ut(Ce,ge,Ue)&&Fi(Ue)!==Z)}(Ce,fe,Ue)){const St=new mt(ge,function lt(Ce,ge,fe,Ue){const Ze={};Ze[Z]=Ue,Ue._sourceSegment=Ce,Ue._segmentIndexShift=ge.length;for(const ft of fe)if(""===ft.path&&Fi(ft)!==Z){const St=new mt([],{});St._sourceSegment=Ce,St._segmentIndexShift=ge.length,Ze[Fi(ft)]=St}return Ze}(Ce,ge,Ue,new mt(fe,Ce.children)));return St._sourceSegment=Ce,St._segmentIndexShift=ge.length,{segmentGroup:St,slicedSegments:[]}}if(0===fe.length&&function dt(Ce,ge,fe){return fe.some(Ue=>Ut(Ce,ge,Ue))}(Ce,fe,Ue)){const St=new mt(Ce.segments,function je(Ce,ge,fe,Ue,Ze,ft){const St={};for(const Ft of Ue)if(Ut(Ce,fe,Ft)&&!Ze[Fi(Ft)]){const dn=new mt([],{});dn._sourceSegment=Ce,dn._segmentIndexShift="legacy"===ft?Ce.segments.length:ge.length,St[Fi(Ft)]=dn}return Object.assign(Object.assign({},Ze),St)}(Ce,ge,fe,Ue,Ce.children,Ze));return St._sourceSegment=Ce,St._segmentIndexShift=ge.length,{segmentGroup:St,slicedSegments:fe}}const ft=new mt(Ce.segments,Ce.children);return ft._sourceSegment=Ce,ft._segmentIndexShift=ge.length,{segmentGroup:ft,slicedSegments:fe}}function Ut(Ce,ge,fe){return(!(Ce.hasChildren()||ge.length>0)||"full"!==fe.pathMatch)&&""===fe.path}function gn(Ce,ge,fe,Ue){return!!(Fi(Ce)===Ue||Ue!==Z&&Ut(ge,fe,Ce))&&("**"===Ce.path||Io(ge,Ce,fe).matched)}function _n(Ce,ge,fe){return 0===ge.length&&!Ce.children[fe]}class Qn{constructor(ge){this.segmentGroup=ge||null}}class Zr{constructor(ge){this.urlTree=ge}}function Dr(Ce){return new R.y(ge=>ge.error(new Qn(Ce)))}function yr(Ce){return new R.y(ge=>ge.error(new Zr(Ce)))}function Rr(Ce){return new R.y(ge=>ge.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${Ce}'`)))}class Gr{constructor(ge,fe,Ue,Ze,ft){this.configLoader=fe,this.urlSerializer=Ue,this.urlTree=Ze,this.config=ft,this.allowRedirects=!0,this.ngModule=ge.get(r.h0i)}apply(){const ge=Hr(this.urlTree.root,[],[],this.config).segmentGroup,fe=new mt(ge.segments,ge.children);return this.expandSegmentGroup(this.ngModule,this.config,fe,Z).pipe((0,ce.U)(ft=>this.createUrlTree(Ri(ft),this.urlTree.queryParams,this.urlTree.fragment))).pipe(y(ft=>{if(ft instanceof Zr)return this.allowRedirects=!1,this.match(ft.urlTree);throw ft instanceof Qn?this.noMatchError(ft):ft}))}match(ge){return this.expandSegmentGroup(this.ngModule,this.config,ge.root,Z).pipe((0,ce.U)(Ze=>this.createUrlTree(Ri(Ze),ge.queryParams,ge.fragment))).pipe(y(Ze=>{throw Ze instanceof Qn?this.noMatchError(Ze):Ze}))}noMatchError(ge){return new Error(`Cannot match any routes. URL Segment: '${ge.segmentGroup}'`)}createUrlTree(ge,fe,Ue){const Ze=ge.segments.length>0?new mt([],{[Z]:ge}):ge;return new Qe(Ze,fe,Ue)}expandSegmentGroup(ge,fe,Ue,Ze){return 0===Ue.segments.length&&Ue.hasChildren()?this.expandChildren(ge,fe,Ue).pipe((0,ce.U)(ft=>new mt([],ft))):this.expandSegment(ge,Ue,fe,Ue.segments,Ze,!0)}expandChildren(ge,fe,Ue){const Ze=[];for(const ft of Object.keys(Ue.children))"primary"===ft?Ze.unshift(ft):Ze.push(ft);return(0,v.D)(Ze).pipe((0,me.b)(ft=>{const St=Ue.children[ft],Ft=yo(fe,ft);return this.expandSegmentGroup(ge,Ft,St,ft).pipe((0,ce.U)(dn=>({segment:dn,outlet:ft})))}),D((ft,St)=>(ft[St.outlet]=St.segment,ft),{}),function Te(Ce,ge){const fe=arguments.length>=2;return Ue=>Ue.pipe(Ce?(0,A.h)((Ze,ft)=>Ce(Ze,ft,Ue)):ue.y,I(1),fe?de(ge):G(()=>new S))}())}expandSegment(ge,fe,Ue,Ze,ft,St){return(0,v.D)(Ue).pipe((0,me.b)(Ft=>this.expandSegmentAgainstRoute(ge,fe,Ue,Ft,Ze,ft,St).pipe(y(qn=>{if(qn instanceof Qn)return(0,T.of)(null);throw qn}))),se(Ft=>!!Ft),y((Ft,dn)=>{if(Ft instanceof S||"EmptyError"===Ft.name){if(_n(fe,Ze,ft))return(0,T.of)(new mt([],{}));throw new Qn(fe)}throw Ft}))}expandSegmentAgainstRoute(ge,fe,Ue,Ze,ft,St,Ft){return gn(Ze,fe,ft,St)?void 0===Ze.redirectTo?this.matchSegmentAgainstRoute(ge,fe,Ze,ft,St):Ft&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(ge,fe,Ue,Ze,ft,St):Dr(fe):Dr(fe)}expandSegmentAgainstRouteUsingRedirect(ge,fe,Ue,Ze,ft,St){return"**"===Ze.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(ge,Ue,Ze,St):this.expandRegularSegmentAgainstRouteUsingRedirect(ge,fe,Ue,Ze,ft,St)}expandWildCardWithParamsAgainstRouteUsingRedirect(ge,fe,Ue,Ze){const ft=this.applyRedirectCommands([],Ue.redirectTo,{});return Ue.redirectTo.startsWith("/")?yr(ft):this.lineralizeSegments(Ue,ft).pipe((0,xe.z)(St=>{const Ft=new mt(St,{});return this.expandSegment(ge,Ft,fe,St,Ze,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(ge,fe,Ue,Ze,ft,St){const{matched:Ft,consumedSegments:dn,lastChild:qn,positionalParamSegments:xr}=Io(fe,Ze,ft);if(!Ft)return Dr(fe);const hr=this.applyRedirectCommands(dn,Ze.redirectTo,xr);return Ze.redirectTo.startsWith("/")?yr(hr):this.lineralizeSegments(Ze,hr).pipe((0,xe.z)(Qr=>this.expandSegment(ge,fe,Ue,Qr.concat(ft.slice(qn)),St,!1)))}matchSegmentAgainstRoute(ge,fe,Ue,Ze,ft){if("**"===Ue.path)return Ue.loadChildren?(Ue._loadedConfig?(0,T.of)(Ue._loadedConfig):this.configLoader.load(ge.injector,Ue)).pipe((0,ce.U)(Qr=>(Ue._loadedConfig=Qr,new mt(Ze,{})))):(0,T.of)(new mt(Ze,{}));const{matched:St,consumedSegments:Ft,lastChild:dn}=Io(fe,Ue,Ze);if(!St)return Dr(fe);const qn=Ze.slice(dn);return this.getChildConfig(ge,Ue,Ze).pipe((0,xe.z)(hr=>{const Qr=hr.module,Xr=hr.routes,{segmentGroup:bo,slicedSegments:Co}=Hr(fe,Ft,qn,Xr),os=new mt(bo.segments,bo.children);if(0===Co.length&&os.hasChildren())return this.expandChildren(Qr,Xr,os).pipe((0,ce.U)(Zo=>new mt(Ft,Zo)));if(0===Xr.length&&0===Co.length)return(0,T.of)(new mt(Ft,{}));const ss=Fi(Ue)===ft;return this.expandSegment(Qr,os,Xr,Co,ss?Z:ft,!0).pipe((0,ce.U)(io=>new mt(Ft.concat(io.segments),io.children)))}))}getChildConfig(ge,fe,Ue){return fe.children?(0,T.of)(new an(fe.children,ge)):fe.loadChildren?void 0!==fe._loadedConfig?(0,T.of)(fe._loadedConfig):this.runCanLoadGuards(ge.injector,fe,Ue).pipe((0,xe.z)(Ze=>Ze?this.configLoader.load(ge.injector,fe).pipe((0,ce.U)(ft=>(fe._loadedConfig=ft,ft))):function ai(Ce){return new R.y(ge=>ge.error(Fe(`Cannot load children because the guard of the route "path: '${Ce.path}'" returned false`)))}(fe))):(0,T.of)(new an([],ge))}runCanLoadGuards(ge,fe,Ue){const Ze=fe.canLoad;if(!Ze||0===Ze.length)return(0,T.of)(!0);const ft=Ze.map(St=>{const Ft=ge.get(St);let dn;if(function Bt(Ce){return Ce&&In(Ce.canLoad)}(Ft))dn=Ft.canLoad(fe,Ue);else{if(!In(Ft))throw new Error("Invalid CanLoad guard");dn=Ft(fe,Ue)}return At(dn)});return(0,T.of)(ft).pipe(Vi(),(0,ve.b)(St=>{if(!lr(St))return;const Ft=Fe(`Redirecting to "${this.urlSerializer.serialize(St)}"`);throw Ft.url=St,Ft}),(0,ce.U)(St=>!0===St))}lineralizeSegments(ge,fe){let Ue=[],Ze=fe.root;for(;;){if(Ue=Ue.concat(Ze.segments),0===Ze.numberOfChildren)return(0,T.of)(Ue);if(Ze.numberOfChildren>1||!Ze.children[Z])return Rr(ge.redirectTo);Ze=Ze.children[Z]}}applyRedirectCommands(ge,fe,Ue){return this.applyRedirectCreatreUrlTree(fe,this.urlSerializer.parse(fe),ge,Ue)}applyRedirectCreatreUrlTree(ge,fe,Ue,Ze){const ft=this.createSegmentGroup(ge,fe.root,Ue,Ze);return new Qe(ft,this.createQueryParams(fe.queryParams,this.urlTree.queryParams),fe.fragment)}createQueryParams(ge,fe){const Ue={};return vt(ge,(Ze,ft)=>{if("string"==typeof Ze&&Ze.startsWith(":")){const Ft=Ze.substring(1);Ue[ft]=fe[Ft]}else Ue[ft]=Ze}),Ue}createSegmentGroup(ge,fe,Ue,Ze){const ft=this.createSegments(ge,fe.segments,Ue,Ze);let St={};return vt(fe.children,(Ft,dn)=>{St[dn]=this.createSegmentGroup(ge,Ft,Ue,Ze)}),new mt(ft,St)}createSegments(ge,fe,Ue,Ze){return fe.map(ft=>ft.path.startsWith(":")?this.findPosParam(ge,ft,Ze):this.findOrReturn(ft,Ue))}findPosParam(ge,fe,Ue){const Ze=Ue[fe.path.substring(1)];if(!Ze)throw new Error(`Cannot redirect to '${ge}'. Cannot find '${fe.path}'.`);return Ze}findOrReturn(ge,fe){let Ue=0;for(const Ze of fe){if(Ze.path===ge.path)return fe.splice(Ue),Ze;Ue++}return ge}}function Ri(Ce){const ge={};for(const Ue of Object.keys(Ce.children)){const ft=Ri(Ce.children[Ue]);(ft.segments.length>0||ft.hasChildren())&&(ge[Ue]=ft)}return function Oo(Ce){if(1===Ce.numberOfChildren&&Ce.children[Z]){const ge=Ce.children[Z];return new mt(Ce.segments.concat(ge.segments),ge.children)}return Ce}(new mt(Ce.segments,ge))}class Ti{constructor(ge){this.path=ge,this.route=this.path[this.path.length-1]}}class xo{constructor(ge,fe){this.component=ge,this.route=fe}}function Ye(Ce,ge,fe){const Ue=Ce._root;return un(Ue,ge?ge._root:null,fe,[Ue.value])}function we(Ce,ge,fe){const Ue=function ht(Ce){if(!Ce)return null;for(let ge=Ce.parent;ge;ge=ge.parent){const fe=ge.routeConfig;if(fe&&fe._loadedConfig)return fe._loadedConfig}return null}(ge);return(Ue?Ue.module.injector:fe).get(Ce)}function un(Ce,ge,fe,Ue,Ze={canDeactivateChecks:[],canActivateChecks:[]}){const ft=Jt(ge);return Ce.children.forEach(St=>{(function Xn(Ce,ge,fe,Ue,Ze={canDeactivateChecks:[],canActivateChecks:[]}){const ft=Ce.value,St=ge?ge.value:null,Ft=fe?fe.getContext(Ce.value.outlet):null;if(St&&ft.routeConfig===St.routeConfig){const dn=function qr(Ce,ge,fe){if("function"==typeof fe)return fe(Ce,ge);switch(fe){case"pathParamsChange":return!zt(Ce.url,ge.url);case"pathParamsOrQueryParamsChange":return!zt(Ce.url,ge.url)||!ut(Ce.queryParams,ge.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Tr(Ce,ge)||!ut(Ce.queryParams,ge.queryParams);default:return!Tr(Ce,ge)}}(St,ft,ft.routeConfig.runGuardsAndResolvers);dn?Ze.canActivateChecks.push(new Ti(Ue)):(ft.data=St.data,ft._resolvedData=St._resolvedData),un(Ce,ge,ft.component?Ft?Ft.children:null:fe,Ue,Ze),dn&&Ft&&Ft.outlet&&Ft.outlet.isActivated&&Ze.canDeactivateChecks.push(new xo(Ft.outlet.component,St))}else St&&$r(ge,Ft,Ze),Ze.canActivateChecks.push(new Ti(Ue)),un(Ce,null,ft.component?Ft?Ft.children:null:fe,Ue,Ze)})(St,ft[St.value.outlet],fe,Ue.concat([St.value]),Ze),delete ft[St.value.outlet]}),vt(ft,(St,Ft)=>$r(St,fe.getContext(Ft),Ze)),Ze}function $r(Ce,ge,fe){const Ue=Jt(Ce),Ze=Ce.value;vt(Ue,(ft,St)=>{$r(ft,Ze.component?ge?ge.children.getContext(St):null:ge,fe)}),fe.canDeactivateChecks.push(new xo(Ze.component&&ge&&ge.outlet&&ge.outlet.isActivated?ge.outlet.component:null,Ze))}class Mr{}function sa(Ce){return new R.y(ge=>ge.error(Ce))}class lc{constructor(ge,fe,Ue,Ze,ft,St){this.rootComponentType=ge,this.config=fe,this.urlTree=Ue,this.url=Ze,this.paramsInheritanceStrategy=ft,this.relativeLinkResolution=St}recognize(){const ge=Hr(this.urlTree.root,[],[],this.config.filter(St=>void 0===St.redirectTo),this.relativeLinkResolution).segmentGroup,fe=this.processSegmentGroup(this.config,ge,Z);if(null===fe)return null;const Ue=new dr([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Z,this.rootComponentType,null,this.urlTree.root,-1,{}),Ze=new Vt(Ue,fe),ft=new pr(this.url,Ze);return this.inheritParamsAndData(ft._root),ft}inheritParamsAndData(ge){const fe=ge.value,Ue=Nn(fe,this.paramsInheritanceStrategy);fe.params=Object.freeze(Ue.params),fe.data=Object.freeze(Ue.data),ge.children.forEach(Ze=>this.inheritParamsAndData(Ze))}processSegmentGroup(ge,fe,Ue){return 0===fe.segments.length&&fe.hasChildren()?this.processChildren(ge,fe):this.processSegment(ge,fe,fe.segments,Ue)}processChildren(ge,fe){const Ue=[];for(const ft of Object.keys(fe.children)){const St=fe.children[ft],Ft=yo(ge,ft),dn=this.processSegmentGroup(Ft,St,ft);if(null===dn)return null;Ue.push(...dn)}const Ze=Uo(Ue);return function Ks(Ce){Ce.sort((ge,fe)=>ge.value.outlet===Z?-1:fe.value.outlet===Z?1:ge.value.outlet.localeCompare(fe.value.outlet))}(Ze),Ze}processSegment(ge,fe,Ue,Ze){for(const ft of ge){const St=this.processSegmentAgainstRoute(ft,fe,Ue,Ze);if(null!==St)return St}return _n(fe,Ue,Ze)?[]:null}processSegmentAgainstRoute(ge,fe,Ue,Ze){if(ge.redirectTo||!gn(ge,fe,Ue,Ze))return null;let ft,St=[],Ft=[];if("**"===ge.path){const Xr=Ue.length>0?Et(Ue).parameters:{};ft=new dr(Ue,Xr,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ua(ge),Fi(ge),ge.component,ge,ps(fe),Hi(fe)+Ue.length,ja(ge))}else{const Xr=Io(fe,ge,Ue);if(!Xr.matched)return null;St=Xr.consumedSegments,Ft=Ue.slice(Xr.lastChild),ft=new dr(St,Xr.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ua(ge),Fi(ge),ge.component,ge,ps(fe),Hi(fe)+St.length,ja(ge))}const dn=function aa(Ce){return Ce.children?Ce.children:Ce.loadChildren?Ce._loadedConfig.routes:[]}(ge),{segmentGroup:qn,slicedSegments:xr}=Hr(fe,St,Ft,dn.filter(Xr=>void 0===Xr.redirectTo),this.relativeLinkResolution);if(0===xr.length&&qn.hasChildren()){const Xr=this.processChildren(dn,qn);return null===Xr?null:[new Vt(ft,Xr)]}if(0===dn.length&&0===xr.length)return[new Vt(ft,[])];const hr=Fi(ge)===Ze,Qr=this.processSegment(dn,qn,xr,hr?Z:Ze);return null===Qr?null:[new Vt(ft,Qr)]}}function $i(Ce){const ge=Ce.value.routeConfig;return ge&&""===ge.path&&void 0===ge.redirectTo}function Uo(Ce){const ge=[],fe=new Set;for(const Ue of Ce){if(!$i(Ue)){ge.push(Ue);continue}const Ze=ge.find(ft=>Ue.value.routeConfig===ft.value.routeConfig);void 0!==Ze?(Ze.children.push(...Ue.children),fe.add(Ze)):ge.push(Ue)}for(const Ue of fe){const Ze=Uo(Ue.children);ge.push(new Vt(Ue.value,Ze))}return ge.filter(Ue=>!fe.has(Ue))}function ps(Ce){let ge=Ce;for(;ge._sourceSegment;)ge=ge._sourceSegment;return ge}function Hi(Ce){let ge=Ce,fe=ge._segmentIndexShift?ge._segmentIndexShift:0;for(;ge._sourceSegment;)ge=ge._sourceSegment,fe+=ge._segmentIndexShift?ge._segmentIndexShift:0;return fe-1}function Ua(Ce){return Ce.data||{}}function ja(Ce){return Ce.resolve||{}}function Ha(Ce){return[...Object.keys(Ce),...Object.getOwnPropertySymbols(Ce)]}function Ka(Ce){return(0,ne.w)(ge=>{const fe=Ce(ge);return fe?(0,v.D)(fe).pipe((0,ce.U)(()=>ge)):(0,T.of)(ge)})}class Tl extends class ts{shouldDetach(ge){return!1}store(ge,fe){}shouldAttach(ge){return!1}retrieve(ge){return null}shouldReuseRoute(ge,fe){return ge.routeConfig===fe.routeConfig}}{}const Ys=new r.OlP("ROUTES");class ua{constructor(ge,fe,Ue,Ze){this.injector=ge,this.compiler=fe,this.onLoadStartListener=Ue,this.onLoadEndListener=Ze}load(ge,fe){if(fe._loader$)return fe._loader$;this.onLoadStartListener&&this.onLoadStartListener(fe);const Ze=this.loadModuleFactory(fe.loadChildren).pipe((0,ce.U)(ft=>{this.onLoadEndListener&&this.onLoadEndListener(fe);const St=ft.create(ge);return new an(tt(St.injector.get(Ys,void 0,r.XFs.Self|r.XFs.Optional)).map(wi),St)}),y(ft=>{throw fe._loader$=void 0,ft}));return fe._loader$=new g(Ze,()=>new P.x).pipe(c()),fe._loader$}loadModuleFactory(ge){return At(ge()).pipe((0,xe.z)(fe=>fe instanceof r.YKP?(0,T.of)(fe):(0,v.D)(this.compiler.compileModuleAsync(fe))))}}class ns{shouldProcessUrl(ge){return!0}extract(ge){return ge}merge(ge,fe){return ge}}function bl(Ce){throw Ce}function yu(Ce,ge,fe){return ge.parse("/")}function Ai(Ce,ge){return(0,T.of)(null)}const rs={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},mi={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ro=(()=>{class Ce{constructor(fe,Ue,Ze,ft,St,Ft,dn){this.rootComponentType=fe,this.urlSerializer=Ue,this.rootContexts=Ze,this.location=ft,this.config=dn,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new P.x,this.errorHandler=bl,this.malformedUriErrorHandler=yu,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Ai,afterPreactivation:Ai},this.urlHandlingStrategy=new ns,this.routeReuseStrategy=new Tl,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=St.get(r.h0i),this.console=St.get(r.c2e);const hr=St.get(r.R0b);this.isNgZoneEnabled=hr instanceof r.R0b&&r.R0b.isInAngularZone(),this.resetConfig(dn),this.currentUrlTree=function Dt(){return new Qe(new mt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ua(St,Ft,Qr=>this.triggerEvent(new J(Qr)),Qr=>this.triggerEvent(new Me(Qr))),this.routerState=Ln(this.currentUrlTree,this.rootComponentType),this.transitions=new k.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var fe;return null===(fe=this.location.getState())||void 0===fe?void 0:fe.\u0275routerPageId}setupNavigations(fe){const Ue=this.events;return fe.pipe((0,A.h)(Ze=>0!==Ze.id),(0,ce.U)(Ze=>Object.assign(Object.assign({},Ze),{extractedUrl:this.urlHandlingStrategy.extract(Ze.rawUrl)})),(0,ne.w)(Ze=>{let ft=!1,St=!1;return(0,T.of)(Ze).pipe((0,ve.b)(Ft=>{this.currentNavigation={id:Ft.id,initialUrl:Ft.currentRawUrl,extractedUrl:Ft.extractedUrl,trigger:Ft.source,extras:Ft.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,ne.w)(Ft=>{const dn=this.browserUrlTree.toString(),qn=!this.navigated||Ft.extractedUrl.toString()!==dn||dn!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||qn)&&this.urlHandlingStrategy.shouldProcessUrl(Ft.rawUrl))return Zs(Ft.source)&&(this.browserUrlTree=Ft.extractedUrl),(0,T.of)(Ft).pipe((0,ne.w)(hr=>{const Qr=this.transitions.getValue();return Ue.next(new Re(hr.id,this.serializeUrl(hr.extractedUrl),hr.source,hr.restoredState)),Qr!==this.transitions.getValue()?x.E:Promise.resolve(hr)}),function Eo(Ce,ge,fe,Ue){return(0,ne.w)(Ze=>function jr(Ce,ge,fe,Ue,Ze){return new Gr(Ce,ge,fe,Ue,Ze).apply()}(Ce,ge,fe,Ze.extractedUrl,Ue).pipe((0,ce.U)(ft=>Object.assign(Object.assign({},Ze),{urlAfterRedirects:ft}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ve.b)(hr=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:hr.urlAfterRedirects})}),function _u(Ce,ge,fe,Ue,Ze){return(0,xe.z)(ft=>function mu(Ce,ge,fe,Ue,Ze="emptyOnly",ft="legacy"){try{const St=new lc(Ce,ge,fe,Ue,Ze,ft).recognize();return null===St?sa(new Mr):(0,T.of)(St)}catch(St){return sa(St)}}(Ce,ge,ft.urlAfterRedirects,fe(ft.urlAfterRedirects),Ue,Ze).pipe((0,ce.U)(St=>Object.assign(Object.assign({},ft),{targetSnapshot:St}))))}(this.rootComponentType,this.config,hr=>this.serializeUrl(hr),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ve.b)(hr=>{if("eager"===this.urlUpdateStrategy){if(!hr.extras.skipLocationChange){const Xr=this.urlHandlingStrategy.merge(hr.urlAfterRedirects,hr.rawUrl);this.setBrowserUrl(Xr,hr)}this.browserUrlTree=hr.urlAfterRedirects}const Qr=new qe(hr.id,this.serializeUrl(hr.extractedUrl),this.serializeUrl(hr.urlAfterRedirects),hr.targetSnapshot);Ue.next(Qr)}));if(qn&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Qr,extractedUrl:Xr,source:bo,restoredState:Co,extras:os}=Ft,ss=new Re(Qr,this.serializeUrl(Xr),bo,Co);Ue.next(ss);const Yo=Ln(Xr,this.rootComponentType).snapshot;return(0,T.of)(Object.assign(Object.assign({},Ft),{targetSnapshot:Yo,urlAfterRedirects:Xr,extras:Object.assign(Object.assign({},os),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=Ft.rawUrl,Ft.resolve(null),x.E}),Ka(Ft=>{const{targetSnapshot:dn,id:qn,extractedUrl:xr,rawUrl:hr,extras:{skipLocationChange:Qr,replaceUrl:Xr}}=Ft;return this.hooks.beforePreactivation(dn,{navigationId:qn,appliedUrlTree:xr,rawUrlTree:hr,skipLocationChange:!!Qr,replaceUrl:!!Xr})}),(0,ve.b)(Ft=>{const dn=new He(Ft.id,this.serializeUrl(Ft.extractedUrl),this.serializeUrl(Ft.urlAfterRedirects),Ft.targetSnapshot);this.triggerEvent(dn)}),(0,ce.U)(Ft=>Object.assign(Object.assign({},Ft),{guards:Ye(Ft.targetSnapshot,Ft.currentSnapshot,this.rootContexts)})),function no(Ce,ge){return(0,xe.z)(fe=>{const{targetSnapshot:Ue,currentSnapshot:Ze,guards:{canActivateChecks:ft,canDeactivateChecks:St}}=fe;return 0===St.length&&0===ft.length?(0,T.of)(Object.assign(Object.assign({},fe),{guardsResult:!0})):function Cn(Ce,ge,fe,Ue){return(0,v.D)(Ce).pipe((0,xe.z)(Ze=>function Ni(Ce,ge,fe,Ue,Ze){const ft=ge&&ge.routeConfig?ge.routeConfig.canDeactivate:null;if(!ft||0===ft.length)return(0,T.of)(!0);const St=ft.map(Ft=>{const dn=we(Ft,ge,Ze);let qn;if(function fr(Ce){return Ce&&In(Ce.canDeactivate)}(dn))qn=At(dn.canDeactivate(Ce,ge,fe,Ue));else{if(!In(dn))throw new Error("Invalid CanDeactivate guard");qn=At(dn(Ce,ge,fe,Ue))}return qn.pipe(se())});return(0,T.of)(St).pipe(Vi())}(Ze.component,Ze.route,fe,ge,Ue)),se(Ze=>!0!==Ze,!0))}(St,Ue,Ze,Ce).pipe((0,xe.z)(Ft=>Ft&&function tr(Ce){return"boolean"==typeof Ce}(Ft)?function wt(Ce,ge,fe,Ue){return(0,v.D)(ge).pipe((0,me.b)(Ze=>(0,B.z)(function Hn(Ce,ge){return null!==Ce&&ge&&ge(new ae(Ce)),(0,T.of)(!0)}(Ze.route.parent,Ue),function vn(Ce,ge){return null!==Ce&&ge&&ge(new z(Ce)),(0,T.of)(!0)}(Ze.route,Ue),function Jr(Ce,ge,fe){const Ue=ge[ge.length-1],ft=ge.slice(0,ge.length-1).reverse().map(St=>function Ne(Ce){const ge=Ce.routeConfig?Ce.routeConfig.canActivateChild:null;return ge&&0!==ge.length?{node:Ce,guards:ge}:null}(St)).filter(St=>null!==St).map(St=>U(()=>{const Ft=St.guards.map(dn=>{const qn=we(dn,St.node,fe);let xr;if(function Ur(Ce){return Ce&&In(Ce.canActivateChild)}(qn))xr=At(qn.canActivateChild(Ue,Ce));else{if(!In(qn))throw new Error("Invalid CanActivateChild guard");xr=At(qn(Ue,Ce))}return xr.pipe(se())});return(0,T.of)(Ft).pipe(Vi())}));return(0,T.of)(ft).pipe(Vi())}(Ce,Ze.path,fe),function Gn(Ce,ge,fe){const Ue=ge.routeConfig?ge.routeConfig.canActivate:null;if(!Ue||0===Ue.length)return(0,T.of)(!0);const Ze=Ue.map(ft=>U(()=>{const St=we(ft,ge,fe);let Ft;if(function Or(Ce){return Ce&&In(Ce.canActivate)}(St))Ft=At(St.canActivate(ge,Ce));else{if(!In(St))throw new Error("Invalid CanActivate guard");Ft=At(St(ge,Ce))}return Ft.pipe(se())}));return(0,T.of)(Ze).pipe(Vi())}(Ce,Ze.route,fe))),se(Ze=>!0!==Ze,!0))}(Ue,ft,Ce,ge):(0,T.of)(Ft)),(0,ce.U)(Ft=>Object.assign(Object.assign({},fe),{guardsResult:Ft})))})}(this.ngModule.injector,Ft=>this.triggerEvent(Ft)),(0,ve.b)(Ft=>{if(lr(Ft.guardsResult)){const qn=Fe(`Redirecting to "${this.serializeUrl(Ft.guardsResult)}"`);throw qn.url=Ft.guardsResult,qn}const dn=new De(Ft.id,this.serializeUrl(Ft.extractedUrl),this.serializeUrl(Ft.urlAfterRedirects),Ft.targetSnapshot,!!Ft.guardsResult);this.triggerEvent(dn)}),(0,A.h)(Ft=>!!Ft.guardsResult||(this.restoreHistory(Ft),this.cancelNavigationTransition(Ft,""),!1)),Ka(Ft=>{if(Ft.guards.canActivateChecks.length)return(0,T.of)(Ft).pipe((0,ve.b)(dn=>{const qn=new he(dn.id,this.serializeUrl(dn.extractedUrl),this.serializeUrl(dn.urlAfterRedirects),dn.targetSnapshot);this.triggerEvent(qn)}),(0,ne.w)(dn=>{let qn=!1;return(0,T.of)(dn).pipe(function El(Ce,ge){return(0,xe.z)(fe=>{const{targetSnapshot:Ue,guards:{canActivateChecks:Ze}}=fe;if(!Ze.length)return(0,T.of)(fe);let ft=0;return(0,v.D)(Ze).pipe((0,me.b)(St=>function la(Ce,ge,fe,Ue){return function Va(Ce,ge,fe,Ue){const Ze=Ha(Ce);if(0===Ze.length)return(0,T.of)({});const ft={};return(0,v.D)(Ze).pipe((0,xe.z)(St=>function Ga(Ce,ge,fe,Ue){const Ze=we(Ce,ge,Ue);return At(Ze.resolve?Ze.resolve(ge,fe):Ze(ge,fe))}(Ce[St],ge,fe,Ue).pipe((0,ve.b)(Ft=>{ft[St]=Ft}))),I(1),(0,xe.z)(()=>Ha(ft).length===Ze.length?(0,T.of)(ft):x.E))}(Ce._resolve,Ce,ge,Ue).pipe((0,ce.U)(ft=>(Ce._resolvedData=ft,Ce.data=Object.assign(Object.assign({},Ce.data),Nn(Ce,fe).resolve),null)))}(St.route,Ue,Ce,ge)),(0,ve.b)(()=>ft++),I(1),(0,xe.z)(St=>ft===Ze.length?(0,T.of)(fe):x.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ve.b)({next:()=>qn=!0,complete:()=>{qn||(this.restoreHistory(dn),this.cancelNavigationTransition(dn,"At least one route resolver didn't emit any value."))}}))}),(0,ve.b)(dn=>{const qn=new Y(dn.id,this.serializeUrl(dn.extractedUrl),this.serializeUrl(dn.urlAfterRedirects),dn.targetSnapshot);this.triggerEvent(qn)}))}),Ka(Ft=>{const{targetSnapshot:dn,id:qn,extractedUrl:xr,rawUrl:hr,extras:{skipLocationChange:Qr,replaceUrl:Xr}}=Ft;return this.hooks.afterPreactivation(dn,{navigationId:qn,appliedUrlTree:xr,rawUrlTree:hr,skipLocationChange:!!Qr,replaceUrl:!!Xr})}),(0,ce.U)(Ft=>{const dn=function Oi(Ce,ge,fe){const Ue=Mi(Ce,ge._root,fe?fe._root:void 0);return new bn(Ue,ge)}(this.routeReuseStrategy,Ft.targetSnapshot,Ft.currentRouterState);return Object.assign(Object.assign({},Ft),{targetRouterState:dn})}),(0,ve.b)(Ft=>{this.currentUrlTree=Ft.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Ft.urlAfterRedirects,Ft.rawUrl),this.routerState=Ft.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Ft.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Ft),this.browserUrlTree=Ft.urlAfterRedirects)}),((Ce,ge,fe)=>(0,ce.U)(Ue=>(new Pi(ge,Ue.targetRouterState,Ue.currentRouterState,fe).activate(Ce),Ue)))(this.rootContexts,this.routeReuseStrategy,Ft=>this.triggerEvent(Ft)),(0,ve.b)({next(){ft=!0},complete(){ft=!0}}),function H(Ce){return(0,b.e)((ge,fe)=>{try{ge.subscribe(fe)}finally{fe.add(Ce)}})}(()=>{var Ft;ft||St||this.cancelNavigationTransition(Ze,`Navigation ID ${Ze.id} is not equal to the current navigation id ${this.navigationId}`),(null===(Ft=this.currentNavigation)||void 0===Ft?void 0:Ft.id)===Ze.id&&(this.currentNavigation=null)}),y(Ft=>{if(St=!0,function We(Ce){return Ce&&Ce[be]}(Ft)){const dn=lr(Ft.url);dn||(this.navigated=!0,this.restoreHistory(Ze,!0));const qn=new ke(Ze.id,this.serializeUrl(Ze.extractedUrl),Ft.message);Ue.next(qn),dn?setTimeout(()=>{const xr=this.urlHandlingStrategy.merge(Ft.url,this.rawUrlTree),hr={skipLocationChange:Ze.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Zs(Ze.source)};this.scheduleNavigation(xr,"imperative",null,hr,{resolve:Ze.resolve,reject:Ze.reject,promise:Ze.promise})},0):Ze.resolve(!1)}else{this.restoreHistory(Ze,!0);const dn=new Be(Ze.id,this.serializeUrl(Ze.extractedUrl),Ft);Ue.next(dn);try{Ze.resolve(this.errorHandler(Ft))}catch(qn){Ze.reject(qn)}}return x.E}))}))}resetRootComponentType(fe){this.rootComponentType=fe,this.routerState.root.component=this.rootComponentType}setTransition(fe){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),fe))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(fe=>{const Ue="popstate"===fe.type?"popstate":"hashchange";"popstate"===Ue&&setTimeout(()=>{var Ze;const ft={replaceUrl:!0},St=(null===(Ze=fe.state)||void 0===Ze?void 0:Ze.navigationId)?fe.state:null;if(St){const dn=Object.assign({},St);delete dn.navigationId,delete dn.\u0275routerPageId,0!==Object.keys(dn).length&&(ft.state=dn)}const Ft=this.parseUrl(fe.url);this.scheduleNavigation(Ft,Ue,St,ft)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(fe){this.events.next(fe)}resetConfig(fe){Bo(fe),this.config=fe.map(wi),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(fe,Ue={}){const{relativeTo:Ze,queryParams:ft,fragment:St,queryParamsHandling:Ft,preserveFragment:dn}=Ue,qn=Ze||this.routerState.root,xr=dn?this.currentUrlTree.fragment:St;let hr=null;switch(Ft){case"merge":hr=Object.assign(Object.assign({},this.currentUrlTree.queryParams),ft);break;case"preserve":hr=this.currentUrlTree.queryParams;break;default:hr=ft||null}return null!==hr&&(hr=this.removeEmptyProps(hr)),function Zi(Ce,ge,fe,Ue,Ze){if(0===fe.length)return Ar(ge.root,ge.root,ge,Ue,Ze);const ft=function vo(Ce){if("string"==typeof Ce[0]&&1===Ce.length&&"/"===Ce[0])return new Bi(!0,0,Ce);let ge=0,fe=!1;const Ue=Ce.reduce((Ze,ft,St)=>{if("object"==typeof ft&&null!=ft){if(ft.outlets){const Ft={};return vt(ft.outlets,(dn,qn)=>{Ft[qn]="string"==typeof dn?dn.split("/"):dn}),[...Ze,{outlets:Ft}]}if(ft.segmentPath)return[...Ze,ft.segmentPath]}return"string"!=typeof ft?[...Ze,ft]:0===St?(ft.split("/").forEach((Ft,dn)=>{0==dn&&"."===Ft||(0==dn&&""===Ft?fe=!0:".."===Ft?ge++:""!=Ft&&Ze.push(Ft))}),Ze):[...Ze,ft]},[]);return new Bi(fe,ge,Ue)}(fe);if(ft.toRoot())return Ar(ge.root,new mt([],{}),ge,Ue,Ze);const St=function Mo(Ce,ge,fe){if(Ce.isAbsolute)return new Ui(ge.root,!0,0);if(-1===fe.snapshot._lastPathIndex){const ft=fe.snapshot._urlSegment;return new Ui(ft,ft===ge.root,0)}const Ue=ci(Ce.commands[0])?0:1;return function ji(Ce,ge,fe){let Ue=Ce,Ze=ge,ft=fe;for(;ft>Ze;){if(ft-=Ze,Ue=Ue.parent,!Ue)throw new Error("Invalid number of '../'");Ze=Ue.segments.length}return new Ui(Ue,!1,Ze-ft)}(fe.snapshot._urlSegment,fe.snapshot._lastPathIndex+Ue,Ce.numberOfDoubleDots)}(ft,ge,Ce),Ft=St.processChildren?Wr(St.segmentGroup,St.index,ft.commands):Ko(St.segmentGroup,St.index,ft.commands);return Ar(St.segmentGroup,Ft,ge,Ue,Ze)}(qn,this.currentUrlTree,fe,hr,null!=xr?xr:null)}navigateByUrl(fe,Ue={skipLocationChange:!1}){const Ze=lr(fe)?fe:this.parseUrl(fe),ft=this.urlHandlingStrategy.merge(Ze,this.rawUrlTree);return this.scheduleNavigation(ft,"imperative",null,Ue)}navigate(fe,Ue={skipLocationChange:!1}){return function Wa(Ce){for(let ge=0;ge<Ce.length;ge++){const fe=Ce[ge];if(null==fe)throw new Error(`The requested path contains ${fe} segment at index ${ge}`)}}(fe),this.navigateByUrl(this.createUrlTree(fe,Ue),Ue)}serializeUrl(fe){return this.urlSerializer.serialize(fe)}parseUrl(fe){let Ue;try{Ue=this.urlSerializer.parse(fe)}catch(Ze){Ue=this.malformedUriErrorHandler(Ze,this.urlSerializer,fe)}return Ue}isActive(fe,Ue){let Ze;if(Ze=!0===Ue?Object.assign({},rs):!1===Ue?Object.assign({},mi):Ue,lr(fe))return Xt(this.currentUrlTree,fe,Ze);const ft=this.parseUrl(fe);return Xt(this.currentUrlTree,ft,Ze)}removeEmptyProps(fe){return Object.keys(fe).reduce((Ue,Ze)=>{const ft=fe[Ze];return null!=ft&&(Ue[Ze]=ft),Ue},{})}processNavigations(){this.navigations.subscribe(fe=>{this.navigated=!0,this.lastSuccessfulId=fe.id,this.currentPageId=fe.targetPageId,this.events.next(new Pe(fe.id,this.serializeUrl(fe.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,fe.resolve(!0)},fe=>{this.console.warn(`Unhandled Navigation Error: ${fe}`)})}scheduleNavigation(fe,Ue,Ze,ft,St){var Ft,dn,qn;if(this.disposed)return Promise.resolve(!1);const xr=this.transitions.value,hr=Zs(Ue)&&xr&&!Zs(xr.source),Qr=xr.rawUrl.toString()===fe.toString(),Xr=xr.id===(null===(Ft=this.currentNavigation)||void 0===Ft?void 0:Ft.id);if(hr&&Qr&&Xr)return Promise.resolve(!0);let Co,os,ss;St?(Co=St.resolve,os=St.reject,ss=St.promise):ss=new Promise((Zo,_s)=>{Co=Zo,os=_s});const Yo=++this.navigationId;let io;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(Ze=this.location.getState()),io=Ze&&Ze.\u0275routerPageId?Ze.\u0275routerPageId:ft.replaceUrl||ft.skipLocationChange?null!==(dn=this.browserPageId)&&void 0!==dn?dn:0:(null!==(qn=this.browserPageId)&&void 0!==qn?qn:0)+1):io=0,this.setTransition({id:Yo,targetPageId:io,source:Ue,restoredState:Ze,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:fe,extras:ft,resolve:Co,reject:os,promise:ss,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),ss.catch(Zo=>Promise.reject(Zo))}setBrowserUrl(fe,Ue){const Ze=this.urlSerializer.serialize(fe),ft=Object.assign(Object.assign({},Ue.extras.state),this.generateNgRouterState(Ue.id,Ue.targetPageId));this.location.isCurrentPathEqualTo(Ze)||Ue.extras.replaceUrl?this.location.replaceState(Ze,"",ft):this.location.go(Ze,"",ft)}restoreHistory(fe,Ue=!1){var Ze,ft;if("computed"===this.canceledNavigationResolution){const St=this.currentPageId-fe.targetPageId;"popstate"!==fe.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(Ze=this.currentNavigation)||void 0===Ze?void 0:Ze.finalUrl)||0===St?this.currentUrlTree===(null===(ft=this.currentNavigation)||void 0===ft?void 0:ft.finalUrl)&&0===St&&(this.resetState(fe),this.browserUrlTree=fe.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(St)}else"replace"===this.canceledNavigationResolution&&(Ue&&this.resetState(fe),this.resetUrlToCurrentUrlTree())}resetState(fe){this.routerState=fe.currentRouterState,this.currentUrlTree=fe.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,fe.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(fe,Ue){const Ze=new ke(fe.id,this.serializeUrl(fe.extractedUrl),Ue);this.triggerEvent(Ze),fe.resolve(!1)}generateNgRouterState(fe,Ue){return"computed"===this.canceledNavigationResolution?{navigationId:fe,\u0275routerPageId:Ue}:{navigationId:fe}}}return Ce.\u0275fac=function(fe){r.$Z()},Ce.\u0275prov=r.Yz7({token:Ce,factory:Ce.\u0275fac}),Ce})();function Zs(Ce){return"imperative"!==Ce}class $s{}class $a{preload(ge,fe){return(0,T.of)(null)}}let Cl=(()=>{class Ce{constructor(fe,Ue,Ze,ft){this.router=fe,this.injector=Ze,this.preloadingStrategy=ft,this.loader=new ua(Ze,Ue,dn=>fe.triggerEvent(new J(dn)),dn=>fe.triggerEvent(new Me(dn)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,A.h)(fe=>fe instanceof Pe),(0,me.b)(()=>this.preload())).subscribe(()=>{})}preload(){const fe=this.injector.get(r.h0i);return this.processRoutes(fe,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(fe,Ue){const Ze=[];for(const ft of Ue)if(ft.loadChildren&&!ft.canLoad&&ft._loadedConfig){const St=ft._loadedConfig;Ze.push(this.processRoutes(St.module,St.routes))}else ft.loadChildren&&!ft.canLoad?Ze.push(this.preloadConfig(fe,ft)):ft.children&&Ze.push(this.processRoutes(fe,ft.children));return(0,v.D)(Ze).pipe((0,Oe.J)(),(0,ce.U)(ft=>{}))}preloadConfig(fe,Ue){return this.preloadingStrategy.preload(Ue,()=>(Ue._loadedConfig?(0,T.of)(Ue._loadedConfig):this.loader.load(fe.injector,Ue)).pipe((0,xe.z)(ft=>(Ue._loadedConfig=ft,this.processRoutes(ft.module,ft.routes)))))}}return Ce.\u0275fac=function(fe){return new(fe||Ce)(r.LFG(ro),r.LFG(r.Sil),r.LFG(r.zs3),r.LFG($s))},Ce.\u0275prov=r.Yz7({token:Ce,factory:Ce.\u0275fac}),Ce})(),Wo=(()=>{class Ce{constructor(fe,Ue,Ze={}){this.router=fe,this.viewportScroller=Ue,this.options=Ze,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},Ze.scrollPositionRestoration=Ze.scrollPositionRestoration||"disabled",Ze.anchorScrolling=Ze.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(fe=>{fe instanceof Re?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=fe.navigationTrigger,this.restoredId=fe.restoredState?fe.restoredState.navigationId:0):fe instanceof Pe&&(this.lastId=fe.id,this.scheduleScrollEvent(fe,this.router.parseUrl(fe.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(fe=>{fe instanceof X&&(fe.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(fe.position):fe.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(fe.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(fe,Ue){this.router.triggerEvent(new X(fe,"popstate"===this.lastSource?this.store[this.restoredId]:null,Ue))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return Ce.\u0275fac=function(fe){r.$Z()},Ce.\u0275prov=r.Yz7({token:Ce,factory:Ce.\u0275fac}),Ce})();const vs=new r.OlP("ROUTER_CONFIGURATION"),Sl=new r.OlP("ROUTER_FORROOT_GUARD"),Vr=[Ee.Ye,{provide:pt,useClass:rt},{provide:ro,useFactory:function As(Ce,ge,fe,Ue,Ze,ft,St={},Ft,dn){const qn=new ro(null,Ce,ge,fe,Ue,Ze,tt(ft));return Ft&&(qn.urlHandlingStrategy=Ft),dn&&(qn.routeReuseStrategy=dn),function ha(Ce,ge){Ce.errorHandler&&(ge.errorHandler=Ce.errorHandler),Ce.malformedUriErrorHandler&&(ge.malformedUriErrorHandler=Ce.malformedUriErrorHandler),Ce.onSameUrlNavigation&&(ge.onSameUrlNavigation=Ce.onSameUrlNavigation),Ce.paramsInheritanceStrategy&&(ge.paramsInheritanceStrategy=Ce.paramsInheritanceStrategy),Ce.relativeLinkResolution&&(ge.relativeLinkResolution=Ce.relativeLinkResolution),Ce.urlUpdateStrategy&&(ge.urlUpdateStrategy=Ce.urlUpdateStrategy),Ce.canceledNavigationResolution&&(ge.canceledNavigationResolution=Ce.canceledNavigationResolution)}(St,qn),St.enableTracing&&qn.events.subscribe(xr=>{var hr,Qr;null===(hr=console.group)||void 0===hr||hr.call(console,`Router Event: ${xr.constructor.name}`),console.log(xr.toString()),console.log(xr),null===(Qr=console.groupEnd)||void 0===Qr||Qr.call(console)}),qn},deps:[pt,to,Ee.Ye,r.zs3,r.Sil,Ys,vs,[class zi{},new r.FiY],[class Ws{},new r.FiY]]},to,{provide:yn,useFactory:function ga(Ce){return Ce.routerState.root},deps:[ro]},Cl,$a,class Za{preload(ge,fe){return fe().pipe(y(()=>(0,T.of)(null)))}},{provide:vs,useValue:{enableTracing:!1}}];function mr(){return new r.PXZ("Router",ro)}let Dl=(()=>{class Ce{constructor(fe,Ue){}static forRoot(fe,Ue){return{ngModule:Ce,providers:[Vr,Ps(fe),{provide:Sl,useFactory:Eu,deps:[[ro,new r.FiY,new r.tp0]]},{provide:vs,useValue:Ue||{}},{provide:Ee.S$,useFactory:md,deps:[Ee.lw,[new r.tBr(Ee.mr),new r.FiY],vs]},{provide:Wo,useFactory:Ml,deps:[ro,Ee.EM,vs]},{provide:$s,useExisting:Ue&&Ue.preloadingStrategy?Ue.preloadingStrategy:$a},{provide:r.PXZ,multi:!0,useFactory:mr},[za,{provide:r.ip1,multi:!0,useFactory:To,deps:[za]},{provide:qa,useFactory:Is,deps:[za]},{provide:r.tb,multi:!0,useExisting:qa}]]}}static forChild(fe){return{ngModule:Ce,providers:[Ps(fe)]}}}return Ce.\u0275fac=function(fe){return new(fe||Ce)(r.LFG(Sl,8),r.LFG(ro,8))},Ce.\u0275mod=r.oAB({type:Ce}),Ce.\u0275inj=r.cJS({}),Ce})();function Ml(Ce,ge,fe){return fe.scrollOffset&&ge.setOffset(fe.scrollOffset),new Wo(Ce,ge,fe)}function md(Ce,ge,fe={}){return fe.useHash?new Ee.Do(Ce,ge):new Ee.b0(Ce,ge)}function Eu(Ce){return"guarded"}function Ps(Ce){return[{provide:r.deG,multi:!0,useValue:Ce},{provide:Ys,multi:!0,useValue:Ce}]}let za=(()=>{class Ce{constructor(fe){this.injector=fe,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new P.x}appInitializer(){return this.injector.get(Ee.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let Ue=null;const Ze=new Promise(Ft=>Ue=Ft),ft=this.injector.get(ro),St=this.injector.get(vs);return"disabled"===St.initialNavigation?(ft.setUpLocationChangeListener(),Ue(!0)):"enabled"===St.initialNavigation||"enabledBlocking"===St.initialNavigation?(ft.hooks.afterPreactivation=()=>this.initNavigation?(0,T.of)(null):(this.initNavigation=!0,Ue(!0),this.resultOfPreactivationDone),ft.initialNavigation()):Ue(!0),Ze})}bootstrapListener(fe){const Ue=this.injector.get(vs),Ze=this.injector.get(Cl),ft=this.injector.get(Wo),St=this.injector.get(ro),Ft=this.injector.get(r.z2F);fe===Ft.components[0]&&(("enabledNonBlocking"===Ue.initialNavigation||void 0===Ue.initialNavigation)&&St.initialNavigation(),Ze.setUpPreloading(),ft.init(),St.resetRootComponentType(Ft.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return Ce.\u0275fac=function(fe){return new(fe||Ce)(r.LFG(r.zs3))},Ce.\u0275prov=r.Yz7({token:Ce,factory:Ce.\u0275fac}),Ce})();function To(Ce){return Ce.appInitializer.bind(Ce)}function Is(Ce){return Ce.bootstrapListener.bind(Ce)}const qa=new r.OlP("Router Initializer")},6292:(Fn,Ve,O)=>{"use strict";O.d(Ve,{FF:()=>ql,IJ:()=>Jc});var r=O(4893),e=O(9808),S=O(8421),R=O(8306),j=O(5577),U=O(1144),L=O(576),b=O(3268);const f=["addListener","removeListener"],c=["addEventListener","removeEventListener"],g=["on","off"];function v(w,K,E,Q){if((0,L.m)(E)&&(Q=E,E=void 0),Q)return v(w,K,E).pipe((0,b.Z)(Q));const[ye,Ke]=function B(w){return(0,L.m)(w.addEventListener)&&(0,L.m)(w.removeEventListener)}(w)?c.map(Mt=>Wt=>w[Mt](K,Wt,E)):function k(w){return(0,L.m)(w.addListener)&&(0,L.m)(w.removeListener)}(w)?f.map(T(w,K)):function N(w){return(0,L.m)(w.on)&&(0,L.m)(w.off)}(w)?g.map(T(w,K)):[];if(!ye&&(0,U.z)(w))return(0,j.z)(Mt=>v(Mt,K,E))((0,S.Xf)(w));if(!ye)throw new TypeError("Invalid event target");return new R.y(Mt=>{const Wt=(...Ht)=>Mt.next(1<Ht.length?Ht:Ht[0]);return ye(Wt),()=>Ke(Wt)})}function T(w,K){return E=>Q=>w[E](K,Q)}var x=O(727);class P extends x.w0{constructor(K,E){super()}schedule(K,E=0){return this}}const _={setInterval(w,K,...E){const{delegate:Q}=_;return(null==Q?void 0:Q.setInterval)?Q.setInterval(w,K,...E):setInterval(w,K,...E)},clearInterval(w){const{delegate:K}=_;return((null==K?void 0:K.clearInterval)||clearInterval)(w)},delegate:void 0};var D=O(8737),A=O(6063);class I{constructor(K,E=I.now){this.schedulerActionCtor=K,this.now=E}schedule(K,E=0,Q){return new this.schedulerActionCtor(this,K).schedule(Q,E)}}I.now=A.l.now;const de=new class G extends I{constructor(K,E=I.now){super(K,E),this.actions=[],this._active=!1}flush(K){const{actions:E}=this;if(this._active)return void E.push(K);let Q;this._active=!0;do{if(Q=K.execute(K.state,K.delay))break}while(K=E.shift());if(this._active=!1,Q){for(;K=E.shift();)K.unsubscribe();throw Q}}}(class y extends P{constructor(K,E){super(K,E),this.scheduler=K,this.work=E,this.pending=!1}schedule(K,E=0){var Q;if(this.closed)return this;this.state=K;const ye=this.id,Ke=this.scheduler;return null!=ye&&(this.id=this.recycleAsyncId(Ke,ye,E)),this.pending=!0,this.delay=E,this.id=null!==(Q=this.id)&&void 0!==Q?Q:this.requestAsyncId(Ke,this.id,E),this}requestAsyncId(K,E,Q=0){return _.setInterval(K.flush.bind(K,this),Q)}recycleAsyncId(K,E,Q=0){if(null!=Q&&this.delay===Q&&!1===this.pending)return E;null!=E&&_.clearInterval(E)}execute(K,E){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Q=this._execute(K,E);if(Q)return Q;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(K,E){let ye,Q=!1;try{this.work(K)}catch(Ke){Q=!0,ye=Ke||new Error("Scheduled action threw falsy error")}if(Q)return this.unsubscribe(),ye}unsubscribe(){if(!this.closed){const{id:K,scheduler:E}=this,{actions:Q}=E;this.work=this.state=this.scheduler=null,this.pending=!1,(0,D.P)(Q,this),null!=K&&(this.id=this.recycleAsyncId(E,K,null)),this.delay=null,super.unsubscribe()}}});var ue=O(3532);const{isArray:se}=Array;function H(w){return 1===w.length&&se(w[0])?w[0]:w}var ce=O(5403);var me=O(5032);new R.y(me.Z);var Oe=O(515),Ee=O(3269);function Ie(...w){const K=(0,Ee.jO)(w),E=H(w);return E.length?new R.y(Q=>{let ye=E.map(()=>[]),Ke=E.map(()=>!1);Q.add(()=>{ye=Ke=null});for(let Mt=0;!Q.closed&&Mt<E.length;Mt++)(0,S.Xf)(E[Mt]).subscribe((0,ce.x)(Q,Wt=>{if(ye[Mt].push(Wt),ye.every(Ht=>Ht.length)){const Ht=ye.map(cn=>cn.shift());Q.next(K?K(...Ht):Ht),ye.some((cn,En)=>!cn.length&&Ke[En])&&Q.complete()}},()=>{Ke[Mt]=!0,!ye[Mt].length&&Q.complete()}));return()=>{ye=Ke=null}}):Oe.E}var Re=O(9646),Pe=O(7579),qe=(O(1135),O(9841),O(7272)),De=O(4482);function he(w){return(0,De.e)((K,E)=>{(0,S.Xf)(w).subscribe((0,ce.x)(E,()=>E.complete(),me.Z)),!E.closed&&K.subscribe(E)})}var Y=O(4671);function ae(...w){const K=(0,Ee.jO)(w);return(0,De.e)((E,Q)=>{const ye=w.length,Ke=new Array(ye);let Mt=w.map(()=>!1),Wt=!1;for(let Ht=0;Ht<ye;Ht++)(0,S.Xf)(w[Ht]).subscribe((0,ce.x)(Q,cn=>{Ke[Ht]=cn,!Wt&&!Mt[Ht]&&(Mt[Ht]=!0,(Wt=Mt.every(Y.y))&&(Mt=null))},me.Z));E.subscribe((0,ce.x)(Q,Ht=>{if(Wt){const cn=[Ht,...Ke];Q.next(K?K(...cn):cn)}}))})}var re=O(5698),te=O(4004),oe=O(9300);O(8675);var We=O(3900),at=O(8505),et=O(2382);Math,Math,Math;const _n=["*"],Ks=["dialog"];function dn(w){return null!=w}function bo(w){return(w||document.body).getBoundingClientRect()}"undefined"!=typeof Element&&!Element.prototype.closest&&(Element.prototype.closest=function(w){let K=this;if(!document.documentElement.contains(K))return null;do{if(K.matches(w))return K;K=K.parentElement||K.parentNode}while(null!==K&&1===K.nodeType);return null});const Yo={animation:!0,transitionTimerDelayMs:5},io=()=>{},{transitionTimerDelayMs:Zo}=Yo,_s=new Map,Gi=(w,K,E,Q)=>{let ye=Q.context||{};const Ke=_s.get(K);if(Ke)switch(Q.runningTransition){case"continue":return Oe.E;case"stop":w.run(()=>Ke.transition$.complete()),ye=Object.assign(Ke.context,ye),_s.delete(K)}const Mt=E(K,Q.animation,ye)||io;if(!Q.animation||"none"===window.getComputedStyle(K).transitionProperty)return w.run(()=>Mt()),(0,Re.of)(void 0).pipe(function Co(w){return K=>new R.y(E=>K.subscribe({next:Mt=>w.run(()=>E.next(Mt)),error:Mt=>w.run(()=>E.error(Mt)),complete:()=>w.run(()=>E.complete())}))}(w));const Wt=new Pe.x,Ht=new Pe.x,cn=Wt.pipe(function He(...w){return K=>(0,qe.z)(K,(0,Re.of)(...w))}(!0));_s.set(K,{transition$:Wt,complete:()=>{Ht.next(),Ht.complete()},context:ye});const En=function ss(w){const{transitionDelay:K,transitionDuration:E}=window.getComputedStyle(w);return 1e3*(parseFloat(K)+parseFloat(E))}(K);return w.runOutsideAngular(()=>{const or=v(K,"transitionend").pipe(he(cn),(0,oe.h)(({target:An})=>An===K));(function ne(...w){return 1===(w=H(w)).length?(0,S.Xf)(w[0]):new R.y(function pe(w){return K=>{let E=[];for(let Q=0;E&&!K.closed&&Q<w.length;Q++)E.push((0,S.Xf)(w[Q]).subscribe((0,ce.x)(K,ye=>{if(E){for(let Ke=0;Ke<E.length;Ke++)Ke!==Q&&E[Ke].unsubscribe();E=null}K.next(ye)})))}}(w))})(function q(w=0,K,E=de){let Q=-1;return null!=K&&((0,ue.K)(K)?E=K:Q=K),new R.y(ye=>{let Ke=function Te(w){return w instanceof Date&&!isNaN(w)}(w)?+w-E.now():w;Ke<0&&(Ke=0);let Mt=0;return E.schedule(function(){ye.closed||(ye.next(Mt++),0<=Q?this.schedule(void 0,Q):ye.complete())},Ke)})}(En+Zo).pipe(he(cn)),or,Ht).pipe(he(cn)).subscribe(()=>{_s.delete(K),w.run(()=>{Mt(),Wt.next(),Wt.complete()})})}),Wt.asObservable()};let qs=(()=>{class w{constructor(){this.animation=Yo.animation}}return w.\u0275fac=function(E){return new(E||w)},w.\u0275prov=r.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})(),uc=(()=>{class w{}return w.\u0275fac=function(E){return new(E||w)},w.\u0275mod=r.oAB({type:w}),w.\u0275inj=r.cJS({imports:[[e.ez]]}),w})(),Il=(()=>{class w{}return w.\u0275fac=function(E){return new(E||w)},w.\u0275mod=r.oAB({type:w}),w.\u0275inj=r.cJS({imports:[[e.ez]]}),w})(),va=(()=>{class w{}return w.\u0275fac=function(E){return new(E||w)},w.\u0275mod=r.oAB({type:w}),w.\u0275inj=r.cJS({}),w})(),Rl=(()=>{class w{}return w.\u0275fac=function(E){return new(E||w)},w.\u0275mod=r.oAB({type:w}),w.\u0275inj=r.cJS({imports:[[e.ez]]}),w})(),Js=(()=>{class w{}return w.\u0275fac=function(E){return new(E||w)},w.\u0275mod=r.oAB({type:w}),w.\u0275inj=r.cJS({}),w})();var di=(()=>{return(w=di||(di={}))[w.Tab=9]="Tab",w[w.Enter=13]="Enter",w[w.Escape=27]="Escape",w[w.Space=32]="Space",w[w.PageUp=33]="PageUp",w[w.PageDown=34]="PageDown",w[w.End=35]="End",w[w.Home=36]="Home",w[w.ArrowLeft=37]="ArrowLeft",w[w.ArrowUp=38]="ArrowUp",w[w.ArrowRight=39]="ArrowRight",w[w.ArrowDown=40]="ArrowDown",di;var w})();"undefined"!=typeof navigator&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const ws=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function Rs(w){const K=Array.from(w.querySelectorAll(ws)).filter(E=>-1!==E.tabIndex);return[K[0],K[K.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let Qi=(()=>{class w{}return w.\u0275fac=function(E){return new(E||w)},w.\u0275mod=r.oAB({type:w}),w.\u0275inj=r.cJS({imports:[[e.ez,et.u5]]}),w})(),Zl=(()=>{class w{}return w.\u0275fac=function(E){return new(E||w)},w.\u0275mod=r.oAB({type:w}),w.\u0275inj=r.cJS({}),w})();class Bs{constructor(K,E,Q){this.nodes=K,this.viewRef=E,this.componentRef=Q}}let $l=(()=>{class w{constructor(E,Q){this._el=E,this._zone=Q}ngOnInit(){this._zone.onStable.asObservable().pipe((0,re.q)(1)).subscribe(()=>{Gi(this._zone,this._el.nativeElement,(E,Q)=>{Q&&bo(E),E.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Gi(this._zone,this._el.nativeElement,({classList:E})=>E.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return w.\u0275fac=function(E){return new(E||w)(r.Y36(r.SBq),r.Y36(r.R0b))},w.\u0275cmp=r.Xpm({type:w,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(E,Q){2&E&&(r.Tol("modal-backdrop"+(Q.backdropClass?" "+Q.backdropClass:"")),r.ekj("show",!Q.animation)("fade",Q.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(E,Q){},encapsulation:2}),w})();class Lu{close(K){}dismiss(K){}}class zl{constructor(K,E,Q,ye){this._windowCmptRef=K,this._contentRef=E,this._backdropCmptRef=Q,this._beforeDismiss=ye,this._closed=new Pe.x,this._dismissed=new Pe.x,this._hidden=new Pe.x,K.instance.dismissEvent.subscribe(Ke=>{this.dismiss(Ke)}),this.result=new Promise((Ke,Mt)=>{this._resolve=Ke,this._reject=Mt}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(he(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(he(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(K){this._windowCmptRef&&(this._closed.next(K),this._resolve(K),this._removeModalElements())}_dismiss(K){this._dismissed.next(K),this._reject(K),this._removeModalElements()}dismiss(K){if(this._windowCmptRef)if(this._beforeDismiss){const E=this._beforeDismiss();!function qn(w){return w&&w.then}(E)?!1!==E&&this._dismiss(K):E.then(Q=>{!1!==Q&&this._dismiss(K)},()=>{})}else this._dismiss(K)}_removeModalElements(){const K=this._windowCmptRef.instance.hide(),E=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,Re.of)(void 0);K.subscribe(()=>{const{nativeElement:Q}=this._windowCmptRef.location;Q.parentNode.removeChild(Q),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),E.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:Q}=this._backdropCmptRef.location;Q.parentNode.removeChild(Q),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Ie(K,E).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var Ts=(()=>{return(w=Ts||(Ts={}))[w.BACKDROP_CLICK=0]="BACKDROP_CLICK",w[w.ESC=1]="ESC",Ts;var w})();let $d=(()=>{class w{constructor(E,Q,ye){this._document=E,this._elRef=Q,this._zone=ye,this._closed$=new Pe.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new r.vpe,this.shown=new Pe.x,this.hidden=new Pe.x}dismiss(E){this.dismissEvent.emit(E)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe((0,re.q)(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:E}=this._elRef,Q={animation:this.animation,runningTransition:"stop"},Mt=Ie(Gi(this._zone,E,()=>E.classList.remove("show"),Q),Gi(this._zone,this._dialogEl.nativeElement,()=>{},Q));return Mt.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),Mt}_show(){const E={animation:this.animation,runningTransition:"continue"};Ie(Gi(this._zone,this._elRef.nativeElement,(Ke,Mt)=>{Mt&&bo(Ke),Ke.classList.add("show")},E),Gi(this._zone,this._dialogEl.nativeElement,()=>{},E)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:E}=this._elRef;this._zone.runOutsideAngular(()=>{v(E,"keydown").pipe(he(this._closed$),(0,oe.h)(ye=>ye.which===di.Escape)).subscribe(ye=>{this.keyboard?requestAnimationFrame(()=>{ye.defaultPrevented||this._zone.run(()=>this.dismiss(Ts.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let Q=!1;v(this._dialogEl.nativeElement,"mousedown").pipe(he(this._closed$),(0,at.b)(()=>Q=!1),(0,We.w)(()=>v(E,"mouseup").pipe(he(this._closed$),(0,re.q)(1))),(0,oe.h)(({target:ye})=>E===ye)).subscribe(()=>{Q=!0}),v(E,"click").pipe(he(this._closed$)).subscribe(({target:ye})=>{E===ye&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!Q&&this._zone.run(()=>this.dismiss(Ts.BACKDROP_CLICK))),Q=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:E}=this._elRef;if(!E.contains(document.activeElement)){const Q=E.querySelector("[ngbAutofocus]"),ye=Rs(E)[0];(Q||ye||E).focus()}}_restoreFocus(){const E=this._document.body,Q=this._elWithFocus;let ye;ye=Q&&Q.focus&&E.contains(Q)?Q:E,this._zone.runOutsideAngular(()=>{setTimeout(()=>ye.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Gi(this._zone,this._elRef.nativeElement,({classList:E})=>(E.add("modal-static"),()=>E.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return w.\u0275fac=function(E){return new(E||w)(r.Y36(e.K0),r.Y36(r.SBq),r.Y36(r.R0b))},w.\u0275cmp=r.Xpm({type:w,selectors:[["ngb-modal-window"]],viewQuery:function(E,Q){if(1&E&&r.Gf(Ks,7),2&E){let ye;r.iGM(ye=r.CRH())&&(Q._dialogEl=ye.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(E,Q){2&E&&(r.uIk("aria-modal",!0)("aria-labelledby",Q.ariaLabelledBy)("aria-describedby",Q.ariaDescribedBy),r.Tol("modal d-block"+(Q.windowClass?" "+Q.windowClass:"")),r.ekj("fade",Q.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:_n,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(E,Q){1&E&&(r.F$t(),r.TgZ(0,"div",0,1),r.TgZ(2,"div",2),r.Hsn(3),r.qZA(),r.qZA()),2&E&&r.Tol("modal-dialog"+(Q.size?" modal-"+Q.size:"")+(Q.centered?" modal-dialog-centered":"")+(Q.scrollable?" modal-dialog-scrollable":"")+(Q.modalDialogClass?" "+Q.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),w})(),Ic=(()=>{class w{constructor(E){this._document=E}hide(){const E=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),Q=this._document.body,ye=Q.style,{overflow:Ke,paddingRight:Mt}=ye;if(E>0){const Wt=parseFloat(window.getComputedStyle(Q).paddingRight);ye.paddingRight=`${Wt+E}px`}return ye.overflow="hidden",()=>{E>0&&(ye.paddingRight=Mt),ye.overflow=Ke}}}return w.\u0275fac=function(E){return new(E||w)(r.LFG(e.K0))},w.\u0275prov=r.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})(),dl=(()=>{class w{constructor(E,Q,ye,Ke,Mt,Wt){this._applicationRef=E,this._injector=Q,this._document=ye,this._scrollBar=Ke,this._rendererFactory=Mt,this._ngZone=Wt,this._activeWindowCmptHasChanged=new Pe.x,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new r.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const Ht=this._windowCmpts[this._windowCmpts.length-1];((w,K,E,Q=!1)=>{this._ngZone.runOutsideAngular(()=>{const ye=v(K,"focusin").pipe(he(E),(0,te.U)(Ke=>Ke.target));v(K,"keydown").pipe(he(E),(0,oe.h)(Ke=>Ke.which===di.Tab),ae(ye)).subscribe(([Ke,Mt])=>{const[Wt,Ht]=Rs(K);(Mt===Wt||Mt===K)&&Ke.shiftKey&&(Ht.focus(),Ke.preventDefault()),Mt===Ht&&!Ke.shiftKey&&(Wt.focus(),Ke.preventDefault())}),Q&&v(K,"click").pipe(he(E),ae(ye),(0,te.U)(Ke=>Ke[1])).subscribe(Ke=>Ke.focus())})})(0,Ht.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(Ht.location.nativeElement)}})}open(E,Q,ye,Ke){const Mt=Ke.container instanceof HTMLElement?Ke.container:dn(Ke.container)?this._document.querySelector(Ke.container):this._document.body,Wt=this._rendererFactory.createRenderer(null,null),Ht=this._scrollBar.hide(),cn=()=>{this._modalRefs.length||(Wt.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!Mt)throw new Error(`The specified modal container "${Ke.container||"body"}" was not found in the DOM.`);const En=new Lu,or=this._getContentRef(E,Ke.injector||Q,ye,En,Ke);let zn=!1!==Ke.backdrop?this._attachBackdrop(E,Mt):void 0,An=this._attachWindowComponent(E,Mt,or),wr=new zl(An,or,zn,Ke.beforeDismiss);return this._registerModalRef(wr),this._registerWindowCmpt(An),wr.result.then(Ht,Ht),wr.result.then(cn,cn),En.close=cr=>{wr.close(cr)},En.dismiss=cr=>{wr.dismiss(cr)},this._applyWindowOptions(An.instance,Ke),1===this._modalRefs.length&&Wt.addClass(this._document.body,"modal-open"),zn&&zn.instance&&(this._applyBackdropOptions(zn.instance,Ke),zn.changeDetectorRef.detectChanges()),An.changeDetectorRef.detectChanges(),wr}get activeInstances(){return this._activeInstances}dismissAll(E){this._modalRefs.forEach(Q=>Q.dismiss(E))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(E,Q){let Ke=E.resolveComponentFactory($l).create(this._injector);return this._applicationRef.attachView(Ke.hostView),Q.appendChild(Ke.location.nativeElement),Ke}_attachWindowComponent(E,Q,ye){let Mt=E.resolveComponentFactory($d).create(this._injector,ye.nodes);return this._applicationRef.attachView(Mt.hostView),Q.appendChild(Mt.location.nativeElement),Mt}_applyWindowOptions(E,Q){this._windowAttributes.forEach(ye=>{dn(Q[ye])&&(E[ye]=Q[ye])})}_applyBackdropOptions(E,Q){this._backdropAttributes.forEach(ye=>{dn(Q[ye])&&(E[ye]=Q[ye])})}_getContentRef(E,Q,ye,Ke,Mt){return ye?ye instanceof r.Rgc?this._createFromTemplateRef(ye,Ke):function ft(w){return"string"==typeof w}(ye)?this._createFromString(ye):this._createFromComponent(E,Q,ye,Ke,Mt):new Bs([])}_createFromTemplateRef(E,Q){const Ke=E.createEmbeddedView({$implicit:Q,close(Mt){Q.close(Mt)},dismiss(Mt){Q.dismiss(Mt)}});return this._applicationRef.attachView(Ke),new Bs([Ke.rootNodes],Ke)}_createFromString(E){const Q=this._document.createTextNode(`${E}`);return new Bs([[Q]])}_createFromComponent(E,Q,ye,Ke,Mt){const Wt=E.resolveComponentFactory(ye),Ht=r.zs3.create({providers:[{provide:Lu,useValue:Ke}],parent:Q}),cn=Wt.create(Ht),En=cn.location.nativeElement;return Mt.scrollable&&En.classList.add("component-host-scrollable"),this._applicationRef.attachView(cn.hostView),new Bs([[En]],cn.hostView,cn)}_setAriaHidden(E){const Q=E.parentElement;Q&&E!==this._document.body&&(Array.from(Q.children).forEach(ye=>{ye!==E&&"SCRIPT"!==ye.nodeName&&(this._ariaHiddenValues.set(ye,ye.getAttribute("aria-hidden")),ye.setAttribute("aria-hidden","true"))}),this._setAriaHidden(Q))}_revertAriaHidden(){this._ariaHiddenValues.forEach((E,Q)=>{E?Q.setAttribute("aria-hidden",E):Q.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(E){const Q=()=>{const ye=this._modalRefs.indexOf(E);ye>-1&&(this._modalRefs.splice(ye,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(E),this._activeInstances.emit(this._modalRefs),E.result.then(Q,Q)}_registerWindowCmpt(E){this._windowCmpts.push(E),this._activeWindowCmptHasChanged.next(),E.onDestroy(()=>{const Q=this._windowCmpts.indexOf(E);Q>-1&&(this._windowCmpts.splice(Q,1),this._activeWindowCmptHasChanged.next())})}}return w.\u0275fac=function(E){return new(E||w)(r.LFG(r.z2F),r.LFG(r.zs3),r.LFG(e.K0),r.LFG(Ic),r.LFG(r.FYo),r.LFG(r.R0b))},w.\u0275prov=r.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})(),Oc=(()=>{class w{constructor(E){this._ngbConfig=E,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(E){this._animation=E}}return w.\u0275fac=function(E){return new(E||w)(r.LFG(qs))},w.\u0275prov=r.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})(),ql=(()=>{class w{constructor(E,Q,ye,Ke){this._moduleCFR=E,this._injector=Q,this._modalStack=ye,this._config=Ke}open(E,Q={}){const ye=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),Q);return this._modalStack.open(this._moduleCFR,this._injector,E,ye)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(E){this._modalStack.dismissAll(E)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return w.\u0275fac=function(E){return new(E||w)(r.LFG(r._Vd),r.LFG(r.zs3),r.LFG(dl),r.LFG(Oc))},w.\u0275prov=r.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})(),fl=(()=>{class w{}return w.\u0275fac=function(E){return new(E||w)},w.\u0275mod=r.oAB({type:w}),w.\u0275inj=r.cJS({providers:[ql]}),w})(),Ho=(()=>{class w{}return w.\u0275fac=function(E){return new(E||w)},w.\u0275mod=r.oAB({type:w}),w.\u0275inj=r.cJS({imports:[[e.ez]]}),w})(),Vu=(()=>{class w{}return w.\u0275fac=function(E){return new(E||w)},w.\u0275mod=r.oAB({type:w}),w.\u0275inj=r.cJS({imports:[[e.ez]]}),w})(),Vc=(()=>{class w{}return w.\u0275fac=function(E){return new(E||w)},w.\u0275mod=r.oAB({type:w}),w.\u0275inj=r.cJS({imports:[[e.ez]]}),w})(),Hc=(()=>{class w{}return w.\u0275fac=function(E){return new(E||w)},w.\u0275mod=r.oAB({type:w}),w.\u0275inj=r.cJS({imports:[[e.ez]]}),w})(),Wu=(()=>{class w{}return w.\u0275fac=function(E){return new(E||w)},w.\u0275mod=r.oAB({type:w}),w.\u0275inj=r.cJS({imports:[[e.ez]]}),w})(),Zc=(()=>{class w{}return w.\u0275fac=function(E){return new(E||w)},w.\u0275mod=r.oAB({type:w}),w.\u0275inj=r.cJS({imports:[[e.ez]]}),w})(),pl=(()=>{class w{}return w.\u0275fac=function(E){return new(E||w)},w.\u0275mod=r.oAB({type:w}),w.\u0275inj=r.cJS({imports:[[e.ez]]}),w})(),ru=(()=>{class w{}return w.\u0275fac=function(E){return new(E||w)},w.\u0275mod=r.oAB({type:w}),w.\u0275inj=r.cJS({}),w})();new r.OlP("live announcer delay",{providedIn:"root",factory:function nf(){return 100}});let ou=(()=>{class w{}return w.\u0275fac=function(E){return new(E||w)},w.\u0275mod=r.oAB({type:w}),w.\u0275inj=r.cJS({imports:[[e.ez]]}),w})();const af=[uc,Il,va,Rl,Js,Qi,Zl,fl,Ho,Vu,Vc,Hc,Wu,Zc,pl,ru,ou];let Jc=(()=>{class w{}return w.\u0275fac=function(E){return new(E||w)},w.\u0275mod=r.oAB({type:w}),w.\u0275inj=r.cJS({imports:[af,uc,Il,va,Rl,Js,Qi,Zl,fl,Ho,Vu,Vc,Hc,Wu,Zc,pl,ru,ou]}),w})()},7582:(Fn,Ve,O)=>{"use strict";function v(ne,pe,me,xe){return new(me||(me=Promise))(function(Oe,Ee){function Ie(ke){try{Pe(xe.next(ke))}catch(Be){Ee(Be)}}function Re(ke){try{Pe(xe.throw(ke))}catch(Be){Ee(Be)}}function Pe(ke){ke.done?Oe(ke.value):function ve(Oe){return Oe instanceof me?Oe:new me(function(Ee){Ee(Oe)})}(ke.value).then(Ie,Re)}Pe((xe=xe.apply(ne,pe||[])).next())})}function y(ne){return this instanceof y?(this.v=ne,this):new y(ne)}function A(ne,pe,me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ve,xe=me.apply(ne,pe||[]),Oe=[];return ve={},Ee("next"),Ee("throw"),Ee("return"),ve[Symbol.asyncIterator]=function(){return this},ve;function Ee(qe){xe[qe]&&(ve[qe]=function(He){return new Promise(function(De,he){Oe.push([qe,He,De,he])>1||Ie(qe,He)})})}function Ie(qe,He){try{!function Re(qe){qe.value instanceof y?Promise.resolve(qe.value.v).then(Pe,ke):Be(Oe[0][2],qe)}(xe[qe](He))}catch(De){Be(Oe[0][3],De)}}function Pe(qe){Ie("next",qe)}function ke(qe){Ie("throw",qe)}function Be(qe,He){qe(He),Oe.shift(),Oe.length&&Ie(Oe[0][0],Oe[0][1])}}function G(ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var me,pe=ne[Symbol.asyncIterator];return pe?pe.call(ne):(ne=function B(ne){var pe="function"==typeof Symbol&&Symbol.iterator,me=pe&&ne[pe],xe=0;if(me)return me.call(ne);if(ne&&"number"==typeof ne.length)return{next:function(){return ne&&xe>=ne.length&&(ne=void 0),{value:ne&&ne[xe++],done:!ne}}};throw new TypeError(pe?"Object is not iterable.":"Symbol.iterator is not defined.")}(ne),me={},xe("next"),xe("throw"),xe("return"),me[Symbol.asyncIterator]=function(){return this},me);function xe(Oe){me[Oe]=ne[Oe]&&function(Ee){return new Promise(function(Ie,Re){!function ve(Oe,Ee,Ie,Re){Promise.resolve(Re).then(function(Pe){Oe({value:Pe,done:Ie})},Ee)}(Ie,Re,(Ee=ne[Oe](Ee)).done,Ee.value)})}}}O.d(Ve,{mG:()=>v,qq:()=>y,FC:()=>A,KL:()=>G})}},Fn=>{Fn(Fn.s=8615)}]);
(self.webpackChunkapp=self.webpackChunkapp||[]).push([[429],{7435:(q,se,Ee)=>{"use strict";Ee(8583),Ee(148),Ee(173),Ee(757)},173:()=>{(function(){"use strict";var q=window.Document.prototype.createElement,se=window.Document.prototype.createElementNS,Ee=window.Document.prototype.importNode,Ae=window.Document.prototype.prepend,bt=window.Document.prototype.append,st=window.DocumentFragment.prototype.prepend,et=window.DocumentFragment.prototype.append,ze=window.Node.prototype.cloneNode,xe=window.Node.prototype.appendChild,qe=window.Node.prototype.insertBefore,_e=window.Node.prototype.removeChild,De=window.Node.prototype.replaceChild,Ue=Object.getOwnPropertyDescriptor(window.Node.prototype,"textContent"),tt=window.Element.prototype.attachShadow,at=Object.getOwnPropertyDescriptor(window.Element.prototype,"innerHTML"),W=window.Element.prototype.getAttribute,Xe=window.Element.prototype.setAttribute,Oe=window.Element.prototype.removeAttribute,oe=window.Element.prototype.toggleAttribute,ct=window.Element.prototype.getAttributeNS,Tt=window.Element.prototype.setAttributeNS,lt=window.Element.prototype.removeAttributeNS,ut=window.Element.prototype.insertAdjacentElement,ft=window.Element.prototype.insertAdjacentHTML,B=window.Element.prototype.prepend,he=window.Element.prototype.append,ht=window.Element.prototype.before,nt=window.Element.prototype.after,Ye=window.Element.prototype.replaceWith,rt=window.Element.prototype.remove,dt=window.HTMLElement,Ke=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML"),ye=window.HTMLElement.prototype.insertAdjacentElement,Ie=window.HTMLElement.prototype.insertAdjacentHTML,ge=new Set;function Ze(n){var s=ge.has(n);return n=/^[a-z][.0-9_a-z]*-[-.0-9_a-z]*$/.test(n),!s&&n}"annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph".split(" ").forEach(function(n){return ge.add(n)});var Te=document.contains?document.contains.bind(document):document.documentElement.contains.bind(document.documentElement);function ee(n){var s=n.isConnected;if(void 0!==s)return s;if(Te(n))return!0;for(;n&&!(n.__CE_isImportDocument||n instanceof Document);)n=n.parentNode||(window.ShadowRoot&&n instanceof ShadowRoot?n.host:void 0);return!(!n||!(n.__CE_isImportDocument||n instanceof Document))}function be(n){var s=n.children;if(s)return Array.prototype.slice.call(s);for(s=[],n=n.firstChild;n;n=n.nextSibling)n.nodeType===Node.ELEMENT_NODE&&s.push(n);return s}function Me(n,s){for(;s&&s!==n&&!s.nextSibling;)s=s.parentNode;return s&&s!==n?s.nextSibling:null}function Le(n,s,l){for(var E=n;E;){if(E.nodeType===Node.ELEMENT_NODE){var f=E;s(f);var m=f.localName;if("link"===m&&"import"===f.getAttribute("rel")){if(E=f.import,void 0===l&&(l=new Set),E instanceof Node&&!l.has(E))for(l.add(E),E=E.firstChild;E;E=E.nextSibling)Le(E,s,l);E=Me(n,f);continue}if("template"===m){E=Me(n,f);continue}if(f=f.__CE_shadowRoot)for(f=f.firstChild;f;f=f.nextSibling)Le(f,s,l)}E=E.firstChild?E.firstChild:Me(n,E)}}function de(){var n=!(null==ue||!ue.noDocumentConstructionObserver),s=!(null==ue||!ue.shadyDomFastWalk);this.m=[],this.g=[],this.j=!1,this.shadyDomFastWalk=s,this.I=!n}function ve(n,s,l,E){var f=window.ShadyDOM;if(n.shadyDomFastWalk&&f&&f.inUse){if(s.nodeType===Node.ELEMENT_NODE&&l(s),s.querySelectorAll)for(n=f.nativeMethods.querySelectorAll.call(s,"*"),s=0;s<n.length;s++)l(n[s])}else Le(s,l,E)}function pt(n,s){n.j&&ve(n,s,function(l){return je(n,l)})}function je(n,s){if(n.j&&!s.__CE_patched){s.__CE_patched=!0;for(var l=0;l<n.m.length;l++)n.m[l](s);for(l=0;l<n.g.length;l++)n.g[l](s)}}function Ce(n,s){var l=[];for(ve(n,s,function(f){return l.push(f)}),s=0;s<l.length;s++){var E=l[s];1===E.__CE_state?n.connectedCallback(E):$e(n,E)}}function le(n,s){var l=[];for(ve(n,s,function(f){return l.push(f)}),s=0;s<l.length;s++){var E=l[s];1===E.__CE_state&&n.disconnectedCallback(E)}}function Pe(n,s,l){var E=(l=void 0===l?{}:l).J,f=l.upgrade||function(g){return $e(n,g)},m=[];for(ve(n,s,function(g){if(n.j&&je(n,g),"link"===g.localName&&"import"===g.getAttribute("rel")){var t=g.import;t instanceof Node&&(t.__CE_isImportDocument=!0,t.__CE_registry=document.__CE_registry),t&&"complete"===t.readyState?t.__CE_documentLoadHandled=!0:g.addEventListener("load",function(){var r=g.import;if(!r.__CE_documentLoadHandled){r.__CE_documentLoadHandled=!0;var u=new Set;E&&(E.forEach(function(c){return u.add(c)}),u.delete(r)),Pe(n,r,{J:u,upgrade:f})}})}else m.push(g)},E),s=0;s<m.length;s++)f(m[s])}function $e(n,s){try{var l=s.ownerDocument,E=l.__CE_registry,f=E&&(l.defaultView||l.__CE_isImportDocument)?Be(E,s.localName):void 0;if(f&&void 0===s.__CE_state){f.constructionStack.push(s);try{try{if(new f.constructorFunction!==s)throw Error("The custom element constructor did not produce the element being upgraded.")}finally{f.constructionStack.pop()}}catch(r){throw s.__CE_state=2,r}if(s.__CE_state=1,s.__CE_definition=f,f.attributeChangedCallback&&s.hasAttributes()){var m=f.observedAttributes;for(f=0;f<m.length;f++){var g=m[f],t=s.getAttribute(g);null!==t&&n.attributeChangedCallback(s,g,null,t,null)}}ee(s)&&n.connectedCallback(s)}}catch(r){ke(r)}}function mt(n,s,l,E){var f=s.__CE_registry;if(f&&(null===E||"http://www.w3.org/1999/xhtml"===E)&&(f=Be(f,l)))try{var m=new f.constructorFunction;if(void 0===m.__CE_state||void 0===m.__CE_definition)throw Error("Failed to construct '"+l+"': The returned value was not constructed with the HTMLElement constructor.");if("http://www.w3.org/1999/xhtml"!==m.namespaceURI)throw Error("Failed to construct '"+l+"': The constructed element's namespace must be the HTML namespace.");if(m.hasAttributes())throw Error("Failed to construct '"+l+"': The constructed element must not have any attributes.");if(null!==m.firstChild)throw Error("Failed to construct '"+l+"': The constructed element must not have any children.");if(null!==m.parentNode)throw Error("Failed to construct '"+l+"': The constructed element must not have a parent node.");if(m.ownerDocument!==s)throw Error("Failed to construct '"+l+"': The constructed element's owner document is incorrect.");if(m.localName!==l)throw Error("Failed to construct '"+l+"': The constructed element's local name is incorrect.");return m}catch(g){return ke(g),s=null===E?q.call(s,l):se.call(s,E,l),Object.setPrototypeOf(s,HTMLUnknownElement.prototype),s.__CE_state=2,s.__CE_definition=void 0,je(n,s),s}return je(n,s=null===E?q.call(s,l):se.call(s,E,l)),s}function ke(n){var s="",l="",E=0,f=0;n instanceof Error?(s=n.message,l=n.sourceURL||n.fileName||"",E=n.line||n.lineNumber||0,f=n.column||n.columnNumber||0):s="Uncaught "+String(n);var m=void 0;void 0===ErrorEvent.prototype.initErrorEvent?m=new ErrorEvent("error",{cancelable:!0,message:s,filename:l,lineno:E,colno:f,error:n}):((m=document.createEvent("ErrorEvent")).initErrorEvent("error",!1,!0,s,l,E),m.preventDefault=function(){Object.defineProperty(this,"defaultPrevented",{configurable:!0,get:function(){return!0}})}),void 0===m.error&&Object.defineProperty(m,"error",{configurable:!0,enumerable:!0,get:function(){return n}}),window.dispatchEvent(m),m.defaultPrevented||console.error(n)}function vt(){var n=this;this.g=void 0,this.F=new Promise(function(s){n.l=s})}function Et(n){var s=document;this.l=void 0,this.h=n,this.g=s,Pe(this.h,this.g),"loading"===this.g.readyState&&(this.l=new MutationObserver(this.G.bind(this)),this.l.observe(this.g,{childList:!0,subtree:!0}))}function ot(n){n.l&&n.l.disconnect()}function ne(n){this.s=new Map,this.u=new Map,this.C=new Map,this.A=!1,this.B=new Map,this.o=function(s){return s()},this.i=!1,this.v=[],this.h=n,this.D=n.I?new Et(n):void 0}function Ct(n,s){if(!Ze(s))throw new SyntaxError("The element name '"+s+"' is not valid.");if(Be(n,s))throw Error("A custom element with name '"+s+"' has already been defined.");if(n.A)throw Error("A custom element is already being defined.")}function kt(n,s,l){var E;n.A=!0;try{var f=l.prototype;if(!(f instanceof Object))throw new TypeError("The custom element constructor's prototype is not an object.");var m=function(c){var _=f[c];if(void 0!==_&&!(_ instanceof Function))throw Error("The '"+c+"' callback must be a function.");return _},g=m("connectedCallback"),t=m("disconnectedCallback"),r=m("adoptedCallback"),u=(E=m("attributeChangedCallback"))&&l.observedAttributes||[]}catch(c){throw c}finally{n.A=!1}return n.u.set(s,l={localName:s,constructorFunction:l,connectedCallback:g,disconnectedCallback:t,adoptedCallback:r,attributeChangedCallback:E,observedAttributes:u,constructionStack:[]}),n.C.set(l.constructorFunction,l),l}function Ve(n){if(!1!==n.i){n.i=!1;for(var s=[],l=n.v,E=new Map,f=0;f<l.length;f++)E.set(l[f],[]);for(Pe(n.h,document,{upgrade:function(r){if(void 0===r.__CE_state){var u=r.localName,c=E.get(u);c?c.push(r):n.u.has(u)&&s.push(r)}}}),f=0;f<s.length;f++)$e(n.h,s[f]);for(f=0;f<l.length;f++){for(var m=l[f],g=E.get(m),t=0;t<g.length;t++)$e(n.h,g[t]);(m=n.B.get(m))&&m.resolve(void 0)}l.length=0}}function Be(n,s){var l=n.u.get(s);if(l)return l;if(l=n.s.get(s)){n.s.delete(s);try{return kt(n,s,l())}catch(E){ke(E)}}}function me(n,s,l){function E(f){return function(m){for(var g=[],t=0;t<arguments.length;++t)g[t]=arguments[t];t=[];for(var r=[],u=0;u<g.length;u++){var c=g[u];if(c instanceof Element&&ee(c)&&r.push(c),c instanceof DocumentFragment)for(c=c.firstChild;c;c=c.nextSibling)t.push(c);else t.push(c)}for(f.apply(this,g),g=0;g<r.length;g++)le(n,r[g]);if(ee(this))for(g=0;g<t.length;g++)(r=t[g])instanceof Element&&Ce(n,r)}}void 0!==l.prepend&&(s.prepend=E(l.prepend)),void 0!==l.append&&(s.append=E(l.append))}de.prototype.connectedCallback=function(n){var s=n.__CE_definition;if(s.connectedCallback)try{s.connectedCallback.call(n)}catch(l){ke(l)}},de.prototype.disconnectedCallback=function(n){var s=n.__CE_definition;if(s.disconnectedCallback)try{s.disconnectedCallback.call(n)}catch(l){ke(l)}},de.prototype.attributeChangedCallback=function(n,s,l,E,f){var m=n.__CE_definition;if(m.attributeChangedCallback&&-1<m.observedAttributes.indexOf(s))try{m.attributeChangedCallback.call(n,s,l,E,f)}catch(g){ke(g)}},vt.prototype.resolve=function(n){if(this.g)throw Error("Already resolved.");this.g=n,this.l(n)},Et.prototype.G=function(n){var s=this.g.readyState;for("interactive"!==s&&"complete"!==s||ot(this),s=0;s<n.length;s++)for(var l=n[s].addedNodes,E=0;E<l.length;E++)Pe(this.h,l[E])},ne.prototype.H=function(n,s){var l=this;if(!(s instanceof Function))throw new TypeError("Custom element constructor getters must be functions.");Ct(this,n),this.s.set(n,s),this.v.push(n),this.i||(this.i=!0,this.o(function(){return Ve(l)}))},ne.prototype.define=function(n,s){var l=this;if(!(s instanceof Function))throw new TypeError("Custom element constructors must be functions.");Ct(this,n),kt(this,n,s),this.v.push(n),this.i||(this.i=!0,this.o(function(){return Ve(l)}))},ne.prototype.upgrade=function(n){Pe(this.h,n)},ne.prototype.get=function(n){if(n=Be(this,n))return n.constructorFunction},ne.prototype.whenDefined=function(n){if(!Ze(n))return Promise.reject(new SyntaxError("'"+n+"' is not a valid custom element name."));var s=this.B.get(n);if(s)return s.F;s=new vt,this.B.set(n,s);var l=this.u.has(n)||this.s.has(n);return n=-1===this.v.indexOf(n),l&&n&&s.resolve(void 0),s.F},ne.prototype.polyfillWrapFlushCallback=function(n){this.D&&ot(this.D);var s=this.o;this.o=function(l){return n(function(){return s(l)})}},ne.prototype.define=ne.prototype.define,ne.prototype.upgrade=ne.prototype.upgrade,ne.prototype.get=ne.prototype.get,ne.prototype.whenDefined=ne.prototype.whenDefined,ne.prototype.polyfillDefineLazy=ne.prototype.H,ne.prototype.polyfillWrapFlushCallback=ne.prototype.polyfillWrapFlushCallback;var Fe={},ue=window.customElements;function it(){var n=new de;(function yt(n){function s(){var l=this.constructor,E=document.__CE_registry.C.get(l);if(!E)throw Error("Failed to construct a custom element: The constructor was not registered with `customElements`.");var f=E.constructionStack;if(0===f.length)return f=q.call(document,E.localName),Object.setPrototypeOf(f,l.prototype),f.__CE_state=1,f.__CE_definition=E,je(n,f),f;var m=f.length-1,g=f[m];if(g===Fe)throw Error("Failed to construct '"+E.localName+"': This element was already constructed.");return f[m]=Fe,Object.setPrototypeOf(g,l.prototype),je(n,g),g}s.prototype=dt.prototype,Object.defineProperty(HTMLElement.prototype,"constructor",{writable:!0,configurable:!0,enumerable:!1,value:s}),window.HTMLElement=s})(n),function Je(n){Document.prototype.createElement=function(s){return mt(n,this,s,null)},Document.prototype.importNode=function(s,l){return s=Ee.call(this,s,!!l),this.__CE_registry?Pe(n,s):pt(n,s),s},Document.prototype.createElementNS=function(s,l){return mt(n,this,l,s)},me(n,Document.prototype,{prepend:Ae,append:bt})}(n),me(n,DocumentFragment.prototype,{prepend:st,append:et}),function Qe(n){function s(l,E){Object.defineProperty(l,"textContent",{enumerable:E.enumerable,configurable:!0,get:E.get,set:function(f){if(this.nodeType===Node.TEXT_NODE)E.set.call(this,f);else{var m=void 0;if(this.firstChild){var g=this.childNodes,t=g.length;if(0<t&&ee(this)){m=Array(t);for(var r=0;r<t;r++)m[r]=g[r]}}if(E.set.call(this,f),m)for(f=0;f<m.length;f++)le(n,m[f])}}})}Node.prototype.insertBefore=function(l,E){if(l instanceof DocumentFragment){var f=be(l);if(l=qe.call(this,l,E),ee(this))for(E=0;E<f.length;E++)Ce(n,f[E]);return l}return f=l instanceof Element&&ee(l),E=qe.call(this,l,E),f&&le(n,l),ee(this)&&Ce(n,l),E},Node.prototype.appendChild=function(l){if(l instanceof DocumentFragment){var E=be(l);if(l=xe.call(this,l),ee(this))for(var f=0;f<E.length;f++)Ce(n,E[f]);return l}return E=l instanceof Element&&ee(l),f=xe.call(this,l),E&&le(n,l),ee(this)&&Ce(n,l),f},Node.prototype.cloneNode=function(l){return l=ze.call(this,!!l),this.ownerDocument.__CE_registry?Pe(n,l):pt(n,l),l},Node.prototype.removeChild=function(l){var E=l instanceof Element&&ee(l),f=_e.call(this,l);return E&&le(n,l),f},Node.prototype.replaceChild=function(l,E){if(l instanceof DocumentFragment){var f=be(l);if(l=De.call(this,l,E),ee(this))for(le(n,E),E=0;E<f.length;E++)Ce(n,f[E]);return l}f=l instanceof Element&&ee(l);var m=De.call(this,l,E),g=ee(this);return g&&le(n,E),f&&le(n,l),g&&Ce(n,l),m},Ue&&Ue.get?s(Node.prototype,Ue):function ce(n,s){n.j=!0,n.m.push(s)}(n,function(l){s(l,{enumerable:!0,configurable:!0,get:function(){for(var E=[],f=this.firstChild;f;f=f.nextSibling)f.nodeType!==Node.COMMENT_NODE&&E.push(f.textContent);return E.join("")},set:function(E){for(;this.firstChild;)_e.call(this,this.firstChild);null!=E&&""!==E&&xe.call(this,document.createTextNode(E))}})})}(n),function _t(n){function s(f,m){Object.defineProperty(f,"innerHTML",{enumerable:m.enumerable,configurable:!0,get:m.get,set:function(g){var t=this,r=void 0;if(ee(this)&&(r=[],ve(n,this,function(_){_!==t&&r.push(_)})),m.set.call(this,g),r)for(var u=0;u<r.length;u++){var c=r[u];1===c.__CE_state&&n.disconnectedCallback(c)}return this.ownerDocument.__CE_registry?Pe(n,this):pt(n,this),g}})}function l(f,m){f.insertAdjacentElement=function(g,t){var r=ee(t);return g=m.call(this,g,t),r&&le(n,t),ee(g)&&Ce(n,t),g}}function E(f,m){function g(t,r){for(var u=[];t!==r;t=t.nextSibling)u.push(t);for(r=0;r<u.length;r++)Pe(n,u[r])}f.insertAdjacentHTML=function(t,r){if("beforebegin"===(t=t.toLowerCase())){var u=this.previousSibling;m.call(this,t,r),g(u||this.parentNode.firstChild,this)}else if("afterbegin"===t)u=this.firstChild,m.call(this,t,r),g(this.firstChild,u);else if("beforeend"===t)u=this.lastChild,m.call(this,t,r),g(u||this.firstChild,null);else{if("afterend"!==t)throw new SyntaxError("The value provided ("+String(t)+") is not one of 'beforebegin', 'afterbegin', 'beforeend', or 'afterend'.");u=this.nextSibling,m.call(this,t,r),g(this.nextSibling,u)}}}tt&&(Element.prototype.attachShadow=function(f){if(f=tt.call(this,f),n.j&&!f.__CE_patched){f.__CE_patched=!0;for(var m=0;m<n.m.length;m++)n.m[m](f)}return this.__CE_shadowRoot=f}),at&&at.get?s(Element.prototype,at):Ke&&Ke.get?s(HTMLElement.prototype,Ke):function He(n,s){n.j=!0,n.g.push(s)}(n,function(f){s(f,{enumerable:!0,configurable:!0,get:function(){return ze.call(this,!0).innerHTML},set:function(m){var g="template"===this.localName,t=g?this.content:this,r=se.call(document,this.namespaceURI,this.localName);for(r.innerHTML=m;0<t.childNodes.length;)_e.call(t,t.childNodes[0]);for(m=g?r.content:r;0<m.childNodes.length;)xe.call(t,m.childNodes[0])}})}),Element.prototype.setAttribute=function(f,m){if(1!==this.__CE_state)return Xe.call(this,f,m);var g=W.call(this,f);Xe.call(this,f,m),m=W.call(this,f),n.attributeChangedCallback(this,f,g,m,null)},Element.prototype.setAttributeNS=function(f,m,g){if(1!==this.__CE_state)return Tt.call(this,f,m,g);var t=ct.call(this,f,m);Tt.call(this,f,m,g),g=ct.call(this,f,m),n.attributeChangedCallback(this,m,t,g,f)},Element.prototype.removeAttribute=function(f){if(1!==this.__CE_state)return Oe.call(this,f);var m=W.call(this,f);Oe.call(this,f),null!==m&&n.attributeChangedCallback(this,f,m,null,null)},oe&&(Element.prototype.toggleAttribute=function(f,m){if(1!==this.__CE_state)return oe.call(this,f,m);var g=W.call(this,f);return null!==g!==(m=oe.call(this,f,m))&&n.attributeChangedCallback(this,f,g,m?"":null,null),m}),Element.prototype.removeAttributeNS=function(f,m){if(1!==this.__CE_state)return lt.call(this,f,m);var g=ct.call(this,f,m);lt.call(this,f,m);var t=ct.call(this,f,m);g!==t&&n.attributeChangedCallback(this,m,g,t,f)},ye?l(HTMLElement.prototype,ye):ut&&l(Element.prototype,ut),Ie?E(HTMLElement.prototype,Ie):ft&&E(Element.prototype,ft),me(n,Element.prototype,{prepend:B,append:he}),function Se(n){function s(E){return function(f){for(var m=[],g=0;g<arguments.length;++g)m[g]=arguments[g];g=[];for(var t=[],r=0;r<m.length;r++){var u=m[r];if(u instanceof Element&&ee(u)&&t.push(u),u instanceof DocumentFragment)for(u=u.firstChild;u;u=u.nextSibling)g.push(u);else g.push(u)}for(E.apply(this,m),m=0;m<t.length;m++)le(n,t[m]);if(ee(this))for(m=0;m<g.length;m++)(t=g[m])instanceof Element&&Ce(n,t)}}var l=Element.prototype;void 0!==ht&&(l.before=s(ht)),void 0!==nt&&(l.after=s(nt)),void 0!==Ye&&(l.replaceWith=function(E){for(var f=[],m=0;m<arguments.length;++m)f[m]=arguments[m];m=[];for(var g=[],t=0;t<f.length;t++){var r=f[t];if(r instanceof Element&&ee(r)&&g.push(r),r instanceof DocumentFragment)for(r=r.firstChild;r;r=r.nextSibling)m.push(r);else m.push(r)}for(t=ee(this),Ye.apply(this,f),f=0;f<g.length;f++)le(n,g[f]);if(t)for(le(n,this),f=0;f<m.length;f++)(g=m[f])instanceof Element&&Ce(n,g)}),void 0!==rt&&(l.remove=function(){var E=ee(this);rt.call(this),E&&le(n,this)})}(n)}(n),window.CustomElementRegistry=ne,n=new ne(n),document.__CE_registry=n,Object.defineProperty(window,"customElements",{configurable:!0,enumerable:!0,value:n})}ue&&!ue.forcePolyfill&&"function"==typeof ue.define&&"function"==typeof ue.get||it(),window.__CE_installPolyfill=it}).call(self)},148:()=>{"use strict";!function(){if(void 0===window.Reflect||void 0===window.customElements||window.customElements.polyfillWrapFlushCallback)return;const q=HTMLElement;window.HTMLElement=function(){return Reflect.construct(q,[],this.constructor)},HTMLElement.prototype=q.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,q)}()},757:()=>{!function(q,se){"use strict";function Ee(){var e=nt.splice(0,nt.length);for(K=0;e.length;)e.shift().call(null,e.shift())}function Ae(e,i){for(var d=0,y=e.length;d<y;d++)Xe(e[d],i)}function st(e){return function(i){H(i)&&(Xe(i,e),me.length&&Ae(i.querySelectorAll(me),e))}}function et(e){var i=x.call(e,"is"),d=e.nodeName.toUpperCase(),y=Se.call(Ve,i?ne+i.toUpperCase():ot+d);return i&&-1<y&&!ze(d,i)?-1:y}function ze(e,i){return-1<me.indexOf(e+'[is="'+i+'"]')}function xe(e){var i=e.currentTarget,d=e.attrChange,y=e.attrName,h=e.target,a=e[$e]||2,p=e[mt]||3;!o||h&&h!==i||!i[He]||"style"===y||e.prevValue===e.newValue&&(""!==e.newValue||d!==a&&d!==p)||i[He](y,d===a?null:e.prevValue,d===p?null:e.newValue)}function qe(e){var i=st(e);return function(d){nt.push(i,d.target),K&&clearTimeout(K),K=setTimeout(Ee,1)}}function _e(e){D&&(D=!1,e.currentTarget.removeEventListener(vt,_e)),me.length&&Ae((e.target||B).querySelectorAll(me),e.detail===ve?ve:Le),J&&function at(){for(var e,i=0,d=C.length;i<d;i++)Je.contains(e=C[i])||(d--,C.splice(i--,1),Xe(e,ve))}()}function De(e,i){var d=this;ae.call(d,e,i),Ye.call(d,{target:d})}function Ue(e,i,d){var y=i.apply(e,d),h=et(y);return-1<h&&ge(y,Be[h]),d.pop()&&me.length&&function bt(e){for(var i,d=0,y=e.length;d<y;d++)ge(i=e[d],Be[et(i)])}(y.querySelectorAll(me)),y}function tt(e,i){O(e,i),Ke?Ke.observe(e,we):(V&&(e.setAttribute=De,e[be]=dt(e),e[Me](Et,Ye)),e[Me](ke,xe)),e[le]&&o&&(e.created=!0,e[le](),e.created=!1)}function W(e){throw new Error("A "+e+" type is already registered")}function Xe(e,i){var d,y,h=et(e);-1<h&&!$.call(e,"TEMPLATE")&&(Ie(e,Be[h]),h=0,i!==Le||e[Le]?i!==ve||e[ve]||(e[Le]=!1,e[ve]=!0,y="disconnected",h=1):(e[ve]=!1,e[Le]=!0,y="connected",h=1,J&&Se.call(C,e)<0&&C.push(e)),h&&(d=e[i+de]||e[y+de])&&d.call(e))}function Oe(){}function oe(e,i,d){var y=d&&d[ce]||"",h=i.prototype,a=S(h),p=i.observedAttributes||ue,T={prototype:a};X(a,le,{value:function(){if(_)_=!1;else if(!this[m]){this[m]=!0,new i(this),h[le]&&h[le].call(this);var w=v[N.get(i)];(!t||w.create.length>1)&&lt(this)}}}),X(a,He,{value:function(w){-1<Se.call(p,w)&&h[He]&&h[He].apply(this,arguments)}}),h[je]&&X(a,pt,{value:h[je]}),h[Ce]&&X(a,Pe,{value:h[Ce]}),y&&(T[ce]=y),e=e.toUpperCase(),v[e]={constructor:i,create:y?[y,R(e)]:[e]},N.set(i,e),B[Te](e.toLowerCase(),T),ut(e),b[e].r()}function ct(e){var i=v[e.toUpperCase()];return i&&i.constructor}function Tt(e){return"string"==typeof e?e:e&&e.is||""}function lt(e){for(var i,d=e[He],y=d?e.attributes:ue,h=y.length;h--;)d.call(e,(i=y[h]).name||i.nodeName,null,i.value||i.nodeValue)}function ut(e){return(e=e.toUpperCase())in b||(b[e]={},b[e].p=new c(function(i){b[e].r=i})),b[e].p}function ft(){g&&delete q.customElements,Qe(q,"customElements",{configurable:!0,value:new Oe}),Qe(q,"CustomElementRegistry",{configurable:!0,value:Oe});for(var e=ht.get(/^HTML[A-Z]*[a-z]/),i=e.length;i--;function(d){var y=q[d];if(y){q[d]=function(h){var a,p;return h||(h=this),h[m]||(_=!0,a=v[N.get(h.constructor)],(h=(p=t&&1===a.create.length)?Reflect.construct(y,ue,a.constructor):B.createElement.apply(B,a.create))[m]=!0,_=!1,p||lt(h)),h},q[d].prototype=y.prototype;try{y.prototype.constructor=q[d]}catch(h){Qe(y,m,{value:q[d]})}}}(e[i]));B.createElement=function(d,y){var h=Tt(y);return h?Z.call(this,d,R(h)):Z.call(this,d)},Ne||(re=!0,B[Te](""))}var B=q.document,he=q.Object,ht=function(e){var i,d,y,h,a=/^[A-Z]+[a-z]/,T=function(k,M){(M=M.toLowerCase())in w||(w[k]=(w[k]||[]).concat(M),w[M]=w[M.toUpperCase()]=k)},w=(he.create||he)(null),L={};for(d in e)for(h in e[d])for(w[h]=y=e[d][h],i=0;i<y.length;i++)w[y[i].toLowerCase()]=w[y[i].toUpperCase()]=h;return L.get=function(k){return"string"==typeof k?w[k]||(a.test(k)?[]:""):function(k){var M,P=[];for(M in w)k.test(M)&&P.push(M);return P}(k)},L.set=function(k,M){return a.test(k)?T(k,M):T(M,k),L},L}({collections:{HTMLAllCollection:["all"],HTMLCollection:["forms"],HTMLFormControlsCollection:["elements"],HTMLOptionsCollection:["options"]},elements:{Element:["element"],HTMLAnchorElement:["a"],HTMLAppletElement:["applet"],HTMLAreaElement:["area"],HTMLAttachmentElement:["attachment"],HTMLAudioElement:["audio"],HTMLBRElement:["br"],HTMLBaseElement:["base"],HTMLBodyElement:["body"],HTMLButtonElement:["button"],HTMLCanvasElement:["canvas"],HTMLContentElement:["content"],HTMLDListElement:["dl"],HTMLDataElement:["data"],HTMLDataListElement:["datalist"],HTMLDetailsElement:["details"],HTMLDialogElement:["dialog"],HTMLDirectoryElement:["dir"],HTMLDivElement:["div"],HTMLDocument:["document"],HTMLElement:["element","abbr","address","article","aside","b","bdi","bdo","cite","code","command","dd","dfn","dt","em","figcaption","figure","footer","header","i","kbd","mark","nav","noscript","rp","rt","ruby","s","samp","section","small","strong","sub","summary","sup","u","var","wbr"],HTMLEmbedElement:["embed"],HTMLFieldSetElement:["fieldset"],HTMLFontElement:["font"],HTMLFormElement:["form"],HTMLFrameElement:["frame"],HTMLFrameSetElement:["frameset"],HTMLHRElement:["hr"],HTMLHeadElement:["head"],HTMLHeadingElement:["h1","h2","h3","h4","h5","h6"],HTMLHtmlElement:["html"],HTMLIFrameElement:["iframe"],HTMLImageElement:["img"],HTMLInputElement:["input"],HTMLKeygenElement:["keygen"],HTMLLIElement:["li"],HTMLLabelElement:["label"],HTMLLegendElement:["legend"],HTMLLinkElement:["link"],HTMLMapElement:["map"],HTMLMarqueeElement:["marquee"],HTMLMediaElement:["media"],HTMLMenuElement:["menu"],HTMLMenuItemElement:["menuitem"],HTMLMetaElement:["meta"],HTMLMeterElement:["meter"],HTMLModElement:["del","ins"],HTMLOListElement:["ol"],HTMLObjectElement:["object"],HTMLOptGroupElement:["optgroup"],HTMLOptionElement:["option"],HTMLOutputElement:["output"],HTMLParagraphElement:["p"],HTMLParamElement:["param"],HTMLPictureElement:["picture"],HTMLPreElement:["pre"],HTMLProgressElement:["progress"],HTMLQuoteElement:["blockquote","q","quote"],HTMLScriptElement:["script"],HTMLSelectElement:["select"],HTMLShadowElement:["shadow"],HTMLSlotElement:["slot"],HTMLSourceElement:["source"],HTMLSpanElement:["span"],HTMLStyleElement:["style"],HTMLTableCaptionElement:["caption"],HTMLTableCellElement:["td","th"],HTMLTableColElement:["col","colgroup"],HTMLTableElement:["table"],HTMLTableRowElement:["tr"],HTMLTableSectionElement:["thead","tbody","tfoot"],HTMLTemplateElement:["template"],HTMLTextAreaElement:["textarea"],HTMLTimeElement:["time"],HTMLTitleElement:["title"],HTMLTrackElement:["track"],HTMLUListElement:["ul"],HTMLUnknownElement:["unknown","vhgroupv","vkeygen"],HTMLVideoElement:["video"]},nodes:{Attr:["node"],Audio:["audio"],CDATASection:["node"],CharacterData:["node"],Comment:["#comment"],Document:["#document"],DocumentFragment:["#document-fragment"],DocumentType:["node"],HTMLDocument:["#document"],Image:["img"],Option:["option"],ProcessingInstruction:["node"],ShadowRoot:["#shadow-root"],Text:["#text"],XMLDocument:["xml"]}});"object"!=typeof se&&(se={type:se||"auto"});var nt,Ye,rt,dt,Ke,ye,Ie,ge,Ze,e,i,d,y,h,Te="registerElement",ee=1e5*q.Math.random()>>0,be="__"+Te+ee,Me="addEventListener",Le="attached",de="Callback",ve="detached",ce="extends",He="attributeChanged"+de,pt=Le+de,je="connected"+de,Ce="disconnected"+de,le="created"+de,Pe=ve+de,$e="ADDITION",mt="REMOVAL",ke="DOMAttrModified",vt="DOMContentLoaded",Et="DOMSubtreeModified",ot="<",ne="=",Ct=/^[A-Z][._A-Z0-9]*-[-._A-Z0-9]*$/,kt=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],Ve=[],Be=[],me="",Je=B.documentElement,Se=Ve.indexOf||function(e){for(var i=this.length;i--&&this[i]!==e;);return i},_t=he.prototype,Fe=_t.hasOwnProperty,yt=_t.isPrototypeOf,Qe=he.defineProperty,ue=[],it=he.getOwnPropertyDescriptor,n=he.getOwnPropertyNames,s=he.getPrototypeOf,l=he.setPrototypeOf,E=!!he.__proto__,m="__dreCEv1",g=q.customElements,t=!/^force/.test(se.type)&&!!(g&&g.define&&g.get&&g.whenDefined),r=he.create||he,u=q.Map||function(){var e,i=[],d=[];return{get:function(y){return d[Se.call(i,y)]},set:function(y,h){(e=Se.call(i,y))<0?d[i.push(y)-1]=h:d[e]=h}}},c=q.Promise||function(e){function i(a){for(y=!0;d.length;)d.shift()(a)}var d=[],y=!1,h={catch:function(){return h},then:function(a){return d.push(a),y&&setTimeout(i,1),h}};return e(i),h},_=!1,v=r(null),b=r(null),N=new u,R=function(e){return e.toLowerCase()},S=he.create||function e(i){return i?(e.prototype=i,new e):this},O=l||(E?function(e,i){return e.__proto__=i,e}:n&&it?function(){function e(i,d){for(var y,h=n(d),a=0,p=h.length;a<p;a++)Fe.call(i,y=h[a])||Qe(i,y,it(d,y))}return function(i,d){do{e(i,d)}while((d=s(d))&&!yt.call(d,i));return i}}():function(e,i){for(var d in i)e[d]=i[d];return e}),j=q.MutationObserver||q.WebKitMutationObserver,U=q.HTMLAnchorElement,A=(q.HTMLElement||q.Element||q.Node).prototype,J=!yt.call(A,Je),X=J?function(e,i,d){return e[i]=d.value,e}:Qe,H=J?function(e){return 1===e.nodeType}:function(e){return yt.call(A,e)},C=J&&[],G=A.attachShadow,Q=A.cloneNode,$=A.closest||function(e){for(var i=this;i&&i.nodeName!==e;)i=i.parentNode;return i},ie=A.dispatchEvent,x=A.getAttribute,fe=A.hasAttribute,Y=A.removeAttribute,ae=A.setAttribute,I=B.createElement,z=B.importNode,Z=I,we=j&&{attributes:!0,characterData:!0,attributeOldValue:!0},We=j||function(e){V=!1,Je.removeEventListener(ke,We)},K=0,Ne=Te in B&&!/^force-all/.test(se.type),Re=!0,re=!1,V=!0,D=!0,o=!0;if(j&&((Ze=B.createElement("div")).innerHTML="<div><div></div></div>",new j(function(e,i){if(e[0]&&"childList"==e[0].type&&!e[0].removedNodes[0].childNodes.length){var d=(Ze=it(A,"innerHTML"))&&Ze.set;d&&Qe(A,"innerHTML",{set:function(y){for(;this.lastChild;)this.removeChild(this.lastChild);d.call(this,y)}})}i.disconnect(),Ze=null}).observe(Ze,{childList:!0,subtree:!0}),Ze.innerHTML=""),Ne||(l||E?(Ie=function(e,i){yt.call(i,e)||tt(e,i)},ge=tt):(Ie=function(e,i){e[be]||(e[be]=he(!0),tt(e,i))},ge=Ie),J?(V=!1,e=it(A,Me),i=e.value,d=function(a){var p=new CustomEvent(ke,{bubbles:!0});p.attrName=a,p.prevValue=x.call(this,a),p.newValue=null,p[mt]=p.attrChange=2,Y.call(this,a),ie.call(this,p)},y=function(a,p){var T=fe.call(this,a),w=T&&x.call(this,a),L=new CustomEvent(ke,{bubbles:!0});ae.call(this,a,p),L.attrName=a,L.prevValue=T?w:null,L.newValue=p,T?L.MODIFICATION=L.attrChange=1:L[$e]=L.attrChange=0,ie.call(this,L)},h=function(a){var p,T=a.currentTarget,w=T[be],L=a.propertyName;w.hasOwnProperty(L)&&(w=w[L],(p=new CustomEvent(ke,{bubbles:!0})).attrName=w.name,p.prevValue=w.value||null,p.newValue=w.value=T[L]||null,null==p.prevValue?p[$e]=p.attrChange=0:p.MODIFICATION=p.attrChange=1,ie.call(T,p))},e.value=function(a,p,T){a===ke&&this[He]&&this.setAttribute!==y&&(this[be]={className:{name:"class",value:this.className}},this.setAttribute=y,this.removeAttribute=d,i.call(this,"propertychange",h)),i.call(this,a,p,T)},Qe(A,Me,e)):j||(Je[Me](ke,We),Je.setAttribute(be,1),Je.removeAttribute(be),V&&(Ye=function(e){var i,d,y,h=this;if(h===e.target){for(y in i=h[be],h[be]=d=dt(h),d){if(!(y in i))return rt(0,h,y,i[y],d[y],$e);if(d[y]!==i[y])return rt(1,h,y,i[y],d[y],"MODIFICATION")}for(y in i)if(!(y in d))return rt(2,h,y,i[y],d[y],mt)}},rt=function(e,i,d,y,h,a){var p={attrChange:e,currentTarget:i,attrName:d,prevValue:y,newValue:h};p[a]=e,xe(p)},dt=function(e){for(var i,d,y={},h=e.attributes,a=0,p=h.length;a<p;a++)"setAttribute"!==(d=(i=h[a]).name)&&(y[d]=i.value);return y})),B[Te]=function(e,i){if(d=e.toUpperCase(),Re&&(Re=!1,j?(Ke=function(w,L){function k(M,P){for(var F=0,te=M.length;F<te;P(M[F++]));}return new j(function(M){for(var P,F,te,pe=0,Ge=M.length;pe<Ge;pe++)"childList"===(P=M[pe]).type?(k(P.addedNodes,w),k(P.removedNodes,L)):(F=P.target,o&&F[He]&&"style"!==P.attributeName&&(te=x.call(F,P.attributeName))!==P.oldValue&&F[He](P.attributeName,P.oldValue,te))})}(st(Le),st(ve)),(ye=function(w){return Ke.observe(w,{childList:!0,subtree:!0}),w})(B),G&&(A.attachShadow=function(){return ye(G.apply(this,arguments))})):(nt=[],B[Me]("DOMNodeInserted",qe(Le)),B[Me]("DOMNodeRemoved",qe(ve))),B[Me](vt,_e),B[Me]("readystatechange",_e),B.importNode=function(w,L){switch(w.nodeType){case 1:return Ue(B,z,[w,!!L]);case 11:for(var k=B.createDocumentFragment(),M=w.childNodes,P=M.length,F=0;F<P;F++)k.appendChild(B.importNode(M[F],!!L));return k;default:return Q.call(w,!!L)}},A.cloneNode=function(w){return Ue(this,Q,[!!w])}),re)return re=!1;if(-2<Se.call(Ve,ne+d)+Se.call(Ve,ot+d)&&W(e),!Ct.test(d)||-1<Se.call(kt,d))throw new Error("The type "+e+" is invalid");var d,y,h=function(){return p?B.createElement(T,d):B.createElement(T)},a=i||_t,p=Fe.call(a,ce),T=p?i[ce].toUpperCase():d;return p&&-1<Se.call(Ve,ot+T)&&W(T),y=Ve.push((p?ne:ot)+d)-1,me=me.concat(me.length?",":"",p?T+'[is="'+e.toLowerCase()+'"]':T),h.prototype=Be[y]=Fe.call(a,"prototype")?a.prototype:S(A),me.length&&Ae(B.querySelectorAll(me),Le),h},B.createElement=Z=function(e,i){var d=Tt(i),y=d?I.call(B,e,R(d)):I.call(B,e),h=""+e,a=Se.call(Ve,(d?ne:ot)+(d||h).toUpperCase()),p=-1<a;return d&&(y.setAttribute("is",d=d.toLowerCase()),p&&(p=ze(h.toUpperCase(),d))),o=!B.createElement.innerHTMLHelper,p&&ge(y,Be[a]),y}),addEventListener("beforeunload",function(){delete B.createElement,delete B.importNode,delete B[Te]},!1),Oe.prototype={constructor:Oe,define:t?function(e,i,d){if(d)oe(e,i,d);else{var y=e.toUpperCase();v[y]={constructor:i,create:[y]},N.set(i,y),g.define(e,i)}}:oe,get:t?function(e){return g.get(e)||ct(e)}:ct,whenDefined:t?function(e){return c.race([g.whenDefined(e),ut(e)])}:ut},!g||/^force/.test(se.type))ft();else if(!se.noBuiltIn)try{!function(e,i,d){var y=new RegExp("^<a\\s+is=('|\")"+d+"\\1></a>$");if(i[ce]="a",(e.prototype=S(U.prototype)).constructor=e,q.customElements.define(d,e,i),!y.test(B.createElement("a",{is:d}).outerHTML)||!y.test((new e).outerHTML))throw i}(function e(){return Reflect.construct(U,[],e)},{},"document-register-element-a"+ee)}catch(e){ft()}if(!se.noBuiltIn)try{if(I.call(B,"a","a").outerHTML.indexOf("is")<0)throw{}}catch(e){R=function(i){return{is:i.toLowerCase()}}}}(window)},8583:()=>{"use strict";!function(t){const r=t.performance;function u(V){r&&r.mark&&r.mark(V)}function c(V,D){r&&r.measure&&r.measure(V,D)}u("Zone");const _=t.__Zone_symbol_prefix||"__zone_symbol__";function v(V){return _+V}const b=!0===t[v("forceDuplicateZoneCheck")];if(t.Zone){if(b||"function"!=typeof t.Zone.__symbol__)throw new Error("Zone already loaded.");return t.Zone}let N=(()=>{class V{constructor(o,e){this._parent=o,this._name=e?e.name||"unnamed":"<root>",this._properties=e&&e.properties||{},this._zoneDelegate=new S(this,this._parent&&this._parent._zoneDelegate,e)}static assertZonePatched(){if(t.Promise!==we.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let o=V.current;for(;o.parent;)o=o.parent;return o}static get current(){return K.zone}static get currentTask(){return Ne}static __load_patch(o,e,i=!1){if(we.hasOwnProperty(o)){if(!i&&b)throw Error("Already loaded patch: "+o)}else if(!t["__Zone_disable_"+o]){const d="Zone:"+o;u(d),we[o]=e(t,V,We),c(d,d)}}get parent(){return this._parent}get name(){return this._name}get(o){const e=this.getZoneWith(o);if(e)return e._properties[o]}getZoneWith(o){let e=this;for(;e;){if(e._properties.hasOwnProperty(o))return e;e=e._parent}return null}fork(o){if(!o)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,o)}wrap(o,e){if("function"!=typeof o)throw new Error("Expecting function got: "+o);const i=this._zoneDelegate.intercept(this,o,e),d=this;return function(){return d.runGuarded(i,this,arguments,e)}}run(o,e,i,d){K={parent:K,zone:this};try{return this._zoneDelegate.invoke(this,o,e,i,d)}finally{K=K.parent}}runGuarded(o,e=null,i,d){K={parent:K,zone:this};try{try{return this._zoneDelegate.invoke(this,o,e,i,d)}catch(y){if(this._zoneDelegate.handleError(this,y))throw y}}finally{K=K.parent}}runTask(o,e,i){if(o.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(o.zone||Q).name+"; Execution: "+this.name+")");if(o.state===$&&(o.type===Z||o.type===z))return;const d=o.state!=fe;d&&o._transitionTo(fe,x),o.runCount++;const y=Ne;Ne=o,K={parent:K,zone:this};try{o.type==z&&o.data&&!o.data.isPeriodic&&(o.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,o,e,i)}catch(h){if(this._zoneDelegate.handleError(this,h))throw h}}finally{o.state!==$&&o.state!==ae&&(o.type==Z||o.data&&o.data.isPeriodic?d&&o._transitionTo(x,fe):(o.runCount=0,this._updateTaskCount(o,-1),d&&o._transitionTo($,fe,$))),K=K.parent,Ne=y}}scheduleTask(o){if(o.zone&&o.zone!==this){let i=this;for(;i;){if(i===o.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${o.zone.name}`);i=i.parent}}o._transitionTo(ie,$);const e=[];o._zoneDelegates=e,o._zone=this;try{o=this._zoneDelegate.scheduleTask(this,o)}catch(i){throw o._transitionTo(ae,ie,$),this._zoneDelegate.handleError(this,i),i}return o._zoneDelegates===e&&this._updateTaskCount(o,1),o.state==ie&&o._transitionTo(x,ie),o}scheduleMicroTask(o,e,i,d){return this.scheduleTask(new O(I,o,e,i,d,void 0))}scheduleMacroTask(o,e,i,d,y){return this.scheduleTask(new O(z,o,e,i,d,y))}scheduleEventTask(o,e,i,d,y){return this.scheduleTask(new O(Z,o,e,i,d,y))}cancelTask(o){if(o.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(o.zone||Q).name+"; Execution: "+this.name+")");o._transitionTo(Y,x,fe);try{this._zoneDelegate.cancelTask(this,o)}catch(e){throw o._transitionTo(ae,Y),this._zoneDelegate.handleError(this,e),e}return this._updateTaskCount(o,-1),o._transitionTo($,Y),o.runCount=0,o}_updateTaskCount(o,e){const i=o._zoneDelegates;-1==e&&(o._zoneDelegates=null);for(let d=0;d<i.length;d++)i[d]._updateTaskCount(o.type,e)}}return V.__symbol__=v,V})();const R={name:"",onHasTask:(V,D,o,e)=>V.hasTask(o,e),onScheduleTask:(V,D,o,e)=>V.scheduleTask(o,e),onInvokeTask:(V,D,o,e,i,d)=>V.invokeTask(o,e,i,d),onCancelTask:(V,D,o,e)=>V.cancelTask(o,e)};class S{constructor(D,o,e){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this.zone=D,this._parentDelegate=o,this._forkZS=e&&(e&&e.onFork?e:o._forkZS),this._forkDlgt=e&&(e.onFork?o:o._forkDlgt),this._forkCurrZone=e&&(e.onFork?this.zone:o._forkCurrZone),this._interceptZS=e&&(e.onIntercept?e:o._interceptZS),this._interceptDlgt=e&&(e.onIntercept?o:o._interceptDlgt),this._interceptCurrZone=e&&(e.onIntercept?this.zone:o._interceptCurrZone),this._invokeZS=e&&(e.onInvoke?e:o._invokeZS),this._invokeDlgt=e&&(e.onInvoke?o:o._invokeDlgt),this._invokeCurrZone=e&&(e.onInvoke?this.zone:o._invokeCurrZone),this._handleErrorZS=e&&(e.onHandleError?e:o._handleErrorZS),this._handleErrorDlgt=e&&(e.onHandleError?o:o._handleErrorDlgt),this._handleErrorCurrZone=e&&(e.onHandleError?this.zone:o._handleErrorCurrZone),this._scheduleTaskZS=e&&(e.onScheduleTask?e:o._scheduleTaskZS),this._scheduleTaskDlgt=e&&(e.onScheduleTask?o:o._scheduleTaskDlgt),this._scheduleTaskCurrZone=e&&(e.onScheduleTask?this.zone:o._scheduleTaskCurrZone),this._invokeTaskZS=e&&(e.onInvokeTask?e:o._invokeTaskZS),this._invokeTaskDlgt=e&&(e.onInvokeTask?o:o._invokeTaskDlgt),this._invokeTaskCurrZone=e&&(e.onInvokeTask?this.zone:o._invokeTaskCurrZone),this._cancelTaskZS=e&&(e.onCancelTask?e:o._cancelTaskZS),this._cancelTaskDlgt=e&&(e.onCancelTask?o:o._cancelTaskDlgt),this._cancelTaskCurrZone=e&&(e.onCancelTask?this.zone:o._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;const i=e&&e.onHasTask;(i||o&&o._hasTaskZS)&&(this._hasTaskZS=i?e:R,this._hasTaskDlgt=o,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=D,e.onScheduleTask||(this._scheduleTaskZS=R,this._scheduleTaskDlgt=o,this._scheduleTaskCurrZone=this.zone),e.onInvokeTask||(this._invokeTaskZS=R,this._invokeTaskDlgt=o,this._invokeTaskCurrZone=this.zone),e.onCancelTask||(this._cancelTaskZS=R,this._cancelTaskDlgt=o,this._cancelTaskCurrZone=this.zone))}fork(D,o){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,D,o):new N(D,o)}intercept(D,o,e){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,D,o,e):o}invoke(D,o,e,i,d){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,D,o,e,i,d):o.apply(e,i)}handleError(D,o){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,D,o)}scheduleTask(D,o){let e=o;if(this._scheduleTaskZS)this._hasTaskZS&&e._zoneDelegates.push(this._hasTaskDlgtOwner),e=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,D,o),e||(e=o);else if(o.scheduleFn)o.scheduleFn(o);else{if(o.type!=I)throw new Error("Task is missing scheduleFn.");C(o)}return e}invokeTask(D,o,e,i){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,D,o,e,i):o.callback.apply(e,i)}cancelTask(D,o){let e;if(this._cancelTaskZS)e=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,D,o);else{if(!o.cancelFn)throw Error("Task is not cancelable");e=o.cancelFn(o)}return e}hasTask(D,o){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,D,o)}catch(e){this.handleError(D,e)}}_updateTaskCount(D,o){const e=this._taskCounts,i=e[D],d=e[D]=i+o;if(d<0)throw new Error("More tasks executed then were scheduled.");0!=i&&0!=d||this.hasTask(this.zone,{microTask:e.microTask>0,macroTask:e.macroTask>0,eventTask:e.eventTask>0,change:D})}}class O{constructor(D,o,e,i,d,y){if(this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=D,this.source=o,this.data=i,this.scheduleFn=d,this.cancelFn=y,!e)throw new Error("callback is not defined");this.callback=e;const h=this;this.invoke=D===Z&&i&&i.useG?O.invokeTask:function(){return O.invokeTask.call(t,h,this,arguments)}}static invokeTask(D,o,e){D||(D=this),Re++;try{return D.runCount++,D.zone.runTask(D,o,e)}finally{1==Re&&G(),Re--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo($,ie)}_transitionTo(D,o,e){if(this._state!==o&&this._state!==e)throw new Error(`${this.type} '${this.source}': can not transition to '${D}', expecting state '${o}'${e?" or '"+e+"'":""}, was '${this._state}'.`);this._state=D,D==$&&(this._zoneDelegates=null)}toString(){return this.data&&void 0!==this.data.handleId?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}const j=v("setTimeout"),U=v("Promise"),A=v("then");let H,J=[],X=!1;function C(V){if(0===Re&&0===J.length)if(H||t[U]&&(H=t[U].resolve(0)),H){let D=H[A];D||(D=H.then),D.call(H,G)}else t[j](G,0);V&&J.push(V)}function G(){if(!X){for(X=!0;J.length;){const V=J;J=[];for(let D=0;D<V.length;D++){const o=V[D];try{o.zone.runTask(o,null,null)}catch(e){We.onUnhandledError(e)}}}We.microtaskDrainDone(),X=!1}}const Q={name:"NO ZONE"},$="notScheduled",ie="scheduling",x="scheduled",fe="running",Y="canceling",ae="unknown",I="microTask",z="macroTask",Z="eventTask",we={},We={symbol:v,currentZoneFrame:()=>K,onUnhandledError:re,microtaskDrainDone:re,scheduleMicroTask:C,showUncaughtError:()=>!N[v("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:re,patchMethod:()=>re,bindArguments:()=>[],patchThen:()=>re,patchMacroTask:()=>re,patchEventPrototype:()=>re,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>re,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>re,wrapWithCurrentZone:()=>re,filterProperties:()=>[],attachOriginToPatched:()=>re,_redefineProperty:()=>re,patchCallbacks:()=>re};let K={parent:null,zone:new N(null,null)},Ne=null,Re=0;function re(){}c("Zone","Zone"),t.Zone=N}("undefined"!=typeof window&&window||"undefined"!=typeof self&&self||global);const se=Object.getOwnPropertyDescriptor,Ee=Object.defineProperty,Ae=Object.getPrototypeOf,bt=Object.create,st=Array.prototype.slice,et="addEventListener",ze="removeEventListener",xe=Zone.__symbol__(et),qe=Zone.__symbol__(ze),_e="true",De="false",Ue=Zone.__symbol__("");function tt(t,r){return Zone.current.wrap(t,r)}function at(t,r,u,c,_){return Zone.current.scheduleMacroTask(t,r,u,c,_)}const W=Zone.__symbol__,Xe="undefined"!=typeof window,Oe=Xe?window:void 0,oe=Xe&&Oe||"object"==typeof self&&self||global,Tt=[null];function lt(t,r){for(let u=t.length-1;u>=0;u--)"function"==typeof t[u]&&(t[u]=tt(t[u],r+"_"+u));return t}function ft(t){return!t||!1!==t.writable&&!("function"==typeof t.get&&void 0===t.set)}const B="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,he=!("nw"in oe)&&void 0!==oe.process&&"[object process]"==={}.toString.call(oe.process),ht=!he&&!B&&!(!Xe||!Oe.HTMLElement),nt=void 0!==oe.process&&"[object process]"==={}.toString.call(oe.process)&&!B&&!(!Xe||!Oe.HTMLElement),Ye={},rt=function(t){if(!(t=t||oe.event))return;let r=Ye[t.type];r||(r=Ye[t.type]=W("ON_PROPERTY"+t.type));const u=this||t.target||oe,c=u[r];let _;if(ht&&u===Oe&&"error"===t.type){const v=t;_=c&&c.call(this,v.message,v.filename,v.lineno,v.colno,v.error),!0===_&&t.preventDefault()}else _=c&&c.apply(this,arguments),null!=_&&!_&&t.preventDefault();return _};function dt(t,r,u){let c=se(t,r);if(!c&&u&&se(u,r)&&(c={enumerable:!0,configurable:!0}),!c||!c.configurable)return;const _=W("on"+r+"patched");if(t.hasOwnProperty(_)&&t[_])return;delete c.writable,delete c.value;const v=c.get,b=c.set,N=r.substr(2);let R=Ye[N];R||(R=Ye[N]=W("ON_PROPERTY"+N)),c.set=function(S){let O=this;!O&&t===oe&&(O=oe),O&&(O[R]&&O.removeEventListener(N,rt),b&&b.apply(O,Tt),"function"==typeof S?(O[R]=S,O.addEventListener(N,rt,!1)):O[R]=null)},c.get=function(){let S=this;if(!S&&t===oe&&(S=oe),!S)return null;const O=S[R];if(O)return O;if(v){let j=v&&v.call(this);if(j)return c.set.call(this,j),"function"==typeof S.removeAttribute&&S.removeAttribute(r),j}return null},Ee(t,r,c),t[_]=!0}function Ke(t,r,u){if(r)for(let c=0;c<r.length;c++)dt(t,"on"+r[c],u);else{const c=[];for(const _ in t)"on"==_.substr(0,2)&&c.push(_);for(let _=0;_<c.length;_++)dt(t,c[_],u)}}const ye=W("originalInstance");function Ie(t){const r=oe[t];if(!r)return;oe[W(t)]=r,oe[t]=function(){const _=lt(arguments,t);switch(_.length){case 0:this[ye]=new r;break;case 1:this[ye]=new r(_[0]);break;case 2:this[ye]=new r(_[0],_[1]);break;case 3:this[ye]=new r(_[0],_[1],_[2]);break;case 4:this[ye]=new r(_[0],_[1],_[2],_[3]);break;default:throw new Error("Arg list too long.")}},Te(oe[t],r);const u=new r(function(){});let c;for(c in u)"XMLHttpRequest"===t&&"responseBlob"===c||function(_){"function"==typeof u[_]?oe[t].prototype[_]=function(){return this[ye][_].apply(this[ye],arguments)}:Ee(oe[t].prototype,_,{set:function(v){"function"==typeof v?(this[ye][_]=tt(v,t+"."+_),Te(this[ye][_],v)):this[ye][_]=v},get:function(){return this[ye][_]}})}(c);for(c in r)"prototype"!==c&&r.hasOwnProperty(c)&&(oe[t][c]=r[c])}function ge(t,r,u){let c=t;for(;c&&!c.hasOwnProperty(r);)c=Ae(c);!c&&t[r]&&(c=t);const _=W(r);let v=null;if(c&&(!(v=c[_])||!c.hasOwnProperty(_))&&(v=c[_]=c[r],ft(c&&se(c,r)))){const N=u(v,_,r);c[r]=function(){return N(this,arguments)},Te(c[r],v)}return v}function Ze(t,r,u){let c=null;function _(v){const b=v.data;return b.args[b.cbIdx]=function(){v.invoke.apply(this,arguments)},c.apply(b.target,b.args),v}c=ge(t,r,v=>function(b,N){const R=u(b,N);return R.cbIdx>=0&&"function"==typeof N[R.cbIdx]?at(R.name,N[R.cbIdx],R,_):v.apply(b,N)})}function Te(t,r){t[W("OriginalDelegate")]=r}let ee=!1,be=!1;function Le(){if(ee)return be;ee=!0;try{const t=Oe.navigator.userAgent;(-1!==t.indexOf("MSIE ")||-1!==t.indexOf("Trident/")||-1!==t.indexOf("Edge/"))&&(be=!0)}catch(t){}return be}Zone.__load_patch("ZoneAwarePromise",(t,r,u)=>{const c=Object.getOwnPropertyDescriptor,_=Object.defineProperty,b=u.symbol,N=[],R=!0===t[b("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")],S=b("Promise"),O=b("then");u.onUnhandledError=h=>{if(u.showUncaughtError()){const a=h&&h.rejection;a?console.error("Unhandled Promise rejection:",a instanceof Error?a.message:a,"; Zone:",h.zone.name,"; Task:",h.task&&h.task.source,"; Value:",a,a instanceof Error?a.stack:void 0):console.error(h)}},u.microtaskDrainDone=()=>{for(;N.length;){const h=N.shift();try{h.zone.runGuarded(()=>{throw h.throwOriginal?h.rejection:h})}catch(a){A(a)}}};const U=b("unhandledPromiseRejectionHandler");function A(h){u.onUnhandledError(h);try{const a=r[U];"function"==typeof a&&a.call(this,h)}catch(a){}}function J(h){return h&&h.then}function X(h){return h}function H(h){return o.reject(h)}const C=b("state"),G=b("value"),Q=b("finally"),$=b("parentPromiseValue"),ie=b("parentPromiseState"),fe=null,Y=!0,ae=!1;function z(h,a){return p=>{try{K(h,a,p)}catch(T){K(h,!1,T)}}}const We=b("currentTaskTrace");function K(h,a,p){const T=function(){let h=!1;return function(p){return function(){h||(h=!0,p.apply(null,arguments))}}}();if(h===p)throw new TypeError("Promise resolved with itself");if(h[C]===fe){let w=null;try{("object"==typeof p||"function"==typeof p)&&(w=p&&p.then)}catch(L){return T(()=>{K(h,!1,L)})(),h}if(a!==ae&&p instanceof o&&p.hasOwnProperty(C)&&p.hasOwnProperty(G)&&p[C]!==fe)Re(p),K(h,p[C],p[G]);else if(a!==ae&&"function"==typeof w)try{w.call(p,T(z(h,a)),T(z(h,!1)))}catch(L){T(()=>{K(h,!1,L)})()}else{h[C]=a;const L=h[G];if(h[G]=p,h[Q]===Q&&a===Y&&(h[C]=h[ie],h[G]=h[$]),a===ae&&p instanceof Error){const k=r.currentTask&&r.currentTask.data&&r.currentTask.data.__creationTrace__;k&&_(p,We,{configurable:!0,enumerable:!1,writable:!0,value:k})}for(let k=0;k<L.length;)re(h,L[k++],L[k++],L[k++],L[k++]);if(0==L.length&&a==ae){h[C]=0;let k=p;try{throw new Error("Uncaught (in promise): "+function v(h){return h&&h.toString===Object.prototype.toString?(h.constructor&&h.constructor.name||"")+": "+JSON.stringify(h):h?h.toString():Object.prototype.toString.call(h)}(p)+(p&&p.stack?"\n"+p.stack:""))}catch(M){k=M}R&&(k.throwOriginal=!0),k.rejection=p,k.promise=h,k.zone=r.current,k.task=r.currentTask,N.push(k),u.scheduleMicroTask()}}}return h}const Ne=b("rejectionHandledHandler");function Re(h){if(0===h[C]){try{const a=r[Ne];a&&"function"==typeof a&&a.call(this,{rejection:h[G],promise:h})}catch(a){}h[C]=ae;for(let a=0;a<N.length;a++)h===N[a].promise&&N.splice(a,1)}}function re(h,a,p,T,w){Re(h);const L=h[C],k=L?"function"==typeof T?T:X:"function"==typeof w?w:H;a.scheduleMicroTask("Promise.then",()=>{try{const M=h[G],P=!!p&&Q===p[Q];P&&(p[$]=M,p[ie]=L);const F=a.run(k,void 0,P&&k!==H&&k!==X?[]:[M]);K(p,!0,F)}catch(M){K(p,!1,M)}},p)}const D=function(){};class o{static toString(){return"function ZoneAwarePromise() { [native code] }"}static resolve(a){return K(new this(null),Y,a)}static reject(a){return K(new this(null),ae,a)}static race(a){let p,T,w=new this((M,P)=>{p=M,T=P});function L(M){p(M)}function k(M){T(M)}for(let M of a)J(M)||(M=this.resolve(M)),M.then(L,k);return w}static all(a){return o.allWithCallback(a)}static allSettled(a){return(this&&this.prototype instanceof o?this:o).allWithCallback(a,{thenCallback:T=>({status:"fulfilled",value:T}),errorCallback:T=>({status:"rejected",reason:T})})}static allWithCallback(a,p){let T,w,L=new this((F,te)=>{T=F,w=te}),k=2,M=0;const P=[];for(let F of a){J(F)||(F=this.resolve(F));const te=M;try{F.then(pe=>{P[te]=p?p.thenCallback(pe):pe,k--,0===k&&T(P)},pe=>{p?(P[te]=p.errorCallback(pe),k--,0===k&&T(P)):w(pe)})}catch(pe){w(pe)}k++,M++}return k-=2,0===k&&T(P),L}constructor(a){const p=this;if(!(p instanceof o))throw new Error("Must be an instanceof Promise.");p[C]=fe,p[G]=[];try{a&&a(z(p,Y),z(p,ae))}catch(T){K(p,!1,T)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return o}then(a,p){let T=this.constructor[Symbol.species];(!T||"function"!=typeof T)&&(T=this.constructor||o);const w=new T(D),L=r.current;return this[C]==fe?this[G].push(L,w,a,p):re(this,L,w,a,p),w}catch(a){return this.then(null,a)}finally(a){let p=this.constructor[Symbol.species];(!p||"function"!=typeof p)&&(p=o);const T=new p(D);T[Q]=Q;const w=r.current;return this[C]==fe?this[G].push(w,T,a,a):re(this,w,T,a,a),T}}o.resolve=o.resolve,o.reject=o.reject,o.race=o.race,o.all=o.all;const e=t[S]=t.Promise;t.Promise=o;const i=b("thenPatched");function d(h){const a=h.prototype,p=c(a,"then");if(p&&(!1===p.writable||!p.configurable))return;const T=a.then;a[O]=T,h.prototype.then=function(w,L){return new o((M,P)=>{T.call(this,M,P)}).then(w,L)},h[i]=!0}return u.patchThen=d,e&&(d(e),ge(t,"fetch",h=>function y(h){return function(a,p){let T=h.apply(a,p);if(T instanceof o)return T;let w=T.constructor;return w[i]||d(w),T}}(h))),Promise[r.__symbol__("uncaughtPromiseErrors")]=N,o}),Zone.__load_patch("toString",t=>{const r=Function.prototype.toString,u=W("OriginalDelegate"),c=W("Promise"),_=W("Error"),v=function(){if("function"==typeof this){const S=this[u];if(S)return"function"==typeof S?r.call(S):Object.prototype.toString.call(S);if(this===Promise){const O=t[c];if(O)return r.call(O)}if(this===Error){const O=t[_];if(O)return r.call(O)}}return r.call(this)};v[u]=r,Function.prototype.toString=v;const b=Object.prototype.toString;Object.prototype.toString=function(){return"function"==typeof Promise&&this instanceof Promise?"[object Promise]":b.call(this)}});let de=!1;if("undefined"!=typeof window)try{const t=Object.defineProperty({},"passive",{get:function(){de=!0}});window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){de=!1}const ve={useG:!0},ce={},He={},pt=new RegExp("^"+Ue+"(\\w+)(true|false)$"),je=W("propagationStopped");function Ce(t,r){const u=(r?r(t):t)+De,c=(r?r(t):t)+_e,_=Ue+u,v=Ue+c;ce[t]={},ce[t][De]=_,ce[t][_e]=v}function le(t,r,u){const c=u&&u.add||et,_=u&&u.rm||ze,v=u&&u.listeners||"eventListeners",b=u&&u.rmAll||"removeAllListeners",N=W(c),R="."+c+":",j=function(H,C,G){if(H.isRemoved)return;const Q=H.callback;"object"==typeof Q&&Q.handleEvent&&(H.callback=ie=>Q.handleEvent(ie),H.originalDelegate=Q),H.invoke(H,C,[G]);const $=H.options;$&&"object"==typeof $&&$.once&&C[_].call(C,G.type,H.originalDelegate?H.originalDelegate:H.callback,$)},U=function(H){if(!(H=H||t.event))return;const C=this||H.target||t,G=C[ce[H.type][De]];if(G)if(1===G.length)j(G[0],C,H);else{const Q=G.slice();for(let $=0;$<Q.length&&(!H||!0!==H[je]);$++)j(Q[$],C,H)}},A=function(H){if(!(H=H||t.event))return;const C=this||H.target||t,G=C[ce[H.type][_e]];if(G)if(1===G.length)j(G[0],C,H);else{const Q=G.slice();for(let $=0;$<Q.length&&(!H||!0!==H[je]);$++)j(Q[$],C,H)}};function J(H,C){if(!H)return!1;let G=!0;C&&void 0!==C.useG&&(G=C.useG);const Q=C&&C.vh;let $=!0;C&&void 0!==C.chkDup&&($=C.chkDup);let ie=!1;C&&void 0!==C.rt&&(ie=C.rt);let x=H;for(;x&&!x.hasOwnProperty(c);)x=Ae(x);if(!x&&H[c]&&(x=H),!x||x[N])return!1;const fe=C&&C.eventNameToString,Y={},ae=x[N]=x[c],I=x[W(_)]=x[_],z=x[W(v)]=x[v],Z=x[W(b)]=x[b];let we;function We(a,p){return!de&&"object"==typeof a&&a?!!a.capture:de&&p?"boolean"==typeof a?{capture:a,passive:!0}:a?"object"==typeof a&&!1!==a.passive?Object.assign(Object.assign({},a),{passive:!0}):a:{passive:!0}:a}C&&C.prepend&&(we=x[W(C.prepend)]=x[C.prepend]);const D=G?function(a){if(!Y.isExisting)return ae.call(Y.target,Y.eventName,Y.capture?A:U,Y.options)}:function(a){return ae.call(Y.target,Y.eventName,a.invoke,Y.options)},o=G?function(a){if(!a.isRemoved){const p=ce[a.eventName];let T;p&&(T=p[a.capture?_e:De]);const w=T&&a.target[T];if(w)for(let L=0;L<w.length;L++)if(w[L]===a){w.splice(L,1),a.isRemoved=!0,0===w.length&&(a.allRemoved=!0,a.target[T]=null);break}}if(a.allRemoved)return I.call(a.target,a.eventName,a.capture?A:U,a.options)}:function(a){return I.call(a.target,a.eventName,a.invoke,a.options)},i=C&&C.diff?C.diff:function(a,p){const T=typeof p;return"function"===T&&a.callback===p||"object"===T&&a.originalDelegate===p},d=Zone[W("UNPATCHED_EVENTS")],y=t[W("PASSIVE_EVENTS")],h=function(a,p,T,w,L=!1,k=!1){return function(){const M=this||t;let P=arguments[0];C&&C.transferEventName&&(P=C.transferEventName(P));let F=arguments[1];if(!F)return a.apply(this,arguments);if(he&&"uncaughtException"===P)return a.apply(this,arguments);let te=!1;if("function"!=typeof F){if(!F.handleEvent)return a.apply(this,arguments);te=!0}if(Q&&!Q(a,F,M,arguments))return;const pe=de&&!!y&&-1!==y.indexOf(P),Ge=We(arguments[2],pe);if(d)for(let wt=0;wt<d.length;wt++)if(P===d[wt])return pe?a.call(M,P,F,Ge):a.apply(this,arguments);const Dt=!!Ge&&("boolean"==typeof Ge||Ge.capture),Ht=!(!Ge||"object"!=typeof Ge)&&Ge.once,It=Zone.current;let Ot=ce[P];Ot||(Ce(P,fe),Ot=ce[P]);const Pt=Ot[Dt?_e:De];let Nt,Mt=M[Pt],St=!1;if(Mt){if(St=!0,$)for(let wt=0;wt<Mt.length;wt++)if(i(Mt[wt],F))return}else Mt=M[Pt]=[];const Rt=M.constructor.name,At=He[Rt];At&&(Nt=At[P]),Nt||(Nt=Rt+p+(fe?fe(P):P)),Y.options=Ge,Ht&&(Y.options.once=!1),Y.target=M,Y.capture=Dt,Y.eventName=P,Y.isExisting=St;const Lt=G?ve:void 0;Lt&&(Lt.taskData=Y);const gt=It.scheduleEventTask(Nt,F,Lt,T,w);return Y.target=null,Lt&&(Lt.taskData=null),Ht&&(Ge.once=!0),!de&&"boolean"==typeof gt.options||(gt.options=Ge),gt.target=M,gt.capture=Dt,gt.eventName=P,te&&(gt.originalDelegate=F),k?Mt.unshift(gt):Mt.push(gt),L?M:void 0}};return x[c]=h(ae,R,D,o,ie),we&&(x.prependListener=h(we,".prependListener:",function(a){return we.call(Y.target,Y.eventName,a.invoke,Y.options)},o,ie,!0)),x[_]=function(){const a=this||t;let p=arguments[0];C&&C.transferEventName&&(p=C.transferEventName(p));const T=arguments[2],w=!!T&&("boolean"==typeof T||T.capture),L=arguments[1];if(!L)return I.apply(this,arguments);if(Q&&!Q(I,L,a,arguments))return;const k=ce[p];let M;k&&(M=k[w?_e:De]);const P=M&&a[M];if(P)for(let F=0;F<P.length;F++){const te=P[F];if(i(te,L))return P.splice(F,1),te.isRemoved=!0,0===P.length&&(te.allRemoved=!0,a[M]=null,"string"==typeof p)&&(a[Ue+"ON_PROPERTY"+p]=null),te.zone.cancelTask(te),ie?a:void 0}return I.apply(this,arguments)},x[v]=function(){const a=this||t;let p=arguments[0];C&&C.transferEventName&&(p=C.transferEventName(p));const T=[],w=Pe(a,fe?fe(p):p);for(let L=0;L<w.length;L++){const k=w[L];T.push(k.originalDelegate?k.originalDelegate:k.callback)}return T},x[b]=function(){const a=this||t;let p=arguments[0];if(p){C&&C.transferEventName&&(p=C.transferEventName(p));const T=ce[p];if(T){const k=a[T[De]],M=a[T[_e]];if(k){const P=k.slice();for(let F=0;F<P.length;F++){const te=P[F];this[_].call(this,p,te.originalDelegate?te.originalDelegate:te.callback,te.options)}}if(M){const P=M.slice();for(let F=0;F<P.length;F++){const te=P[F];this[_].call(this,p,te.originalDelegate?te.originalDelegate:te.callback,te.options)}}}}else{const T=Object.keys(a);for(let w=0;w<T.length;w++){const k=pt.exec(T[w]);let M=k&&k[1];M&&"removeListener"!==M&&this[b].call(this,M)}this[b].call(this,"removeListener")}if(ie)return this},Te(x[c],ae),Te(x[_],I),Z&&Te(x[b],Z),z&&Te(x[v],z),!0}let X=[];for(let H=0;H<r.length;H++)X[H]=J(r[H],u);return X}function Pe(t,r){if(!r){const v=[];for(let b in t){const N=pt.exec(b);let R=N&&N[1];if(R&&(!r||R===r)){const S=t[b];if(S)for(let O=0;O<S.length;O++)v.push(S[O])}}return v}let u=ce[r];u||(Ce(r),u=ce[r]);const c=t[u[De]],_=t[u[_e]];return c?_?c.concat(_):c.slice():_?_.slice():[]}function $e(t,r){const u=t.Event;u&&u.prototype&&r.patchMethod(u.prototype,"stopImmediatePropagation",c=>function(_,v){_[je]=!0,c&&c.apply(_,v)})}function mt(t,r,u,c,_){const v=Zone.__symbol__(c);if(r[v])return;const b=r[v]=r[c];r[c]=function(N,R,S){return R&&R.prototype&&_.forEach(function(O){const j=`${u}.${c}::`+O,U=R.prototype;if(U.hasOwnProperty(O)){const A=t.ObjectGetOwnPropertyDescriptor(U,O);A&&A.value?(A.value=t.wrapWithCurrentZone(A.value,j),t._redefineProperty(R.prototype,O,A)):U[O]&&(U[O]=t.wrapWithCurrentZone(U[O],j))}else U[O]&&(U[O]=t.wrapWithCurrentZone(U[O],j))}),b.call(r,N,R,S)},t.attachOriginToPatched(r[c],b)}const Et=["absolutedeviceorientation","afterinput","afterprint","appinstalled","beforeinstallprompt","beforeprint","beforeunload","devicelight","devicemotion","deviceorientation","deviceorientationabsolute","deviceproximity","hashchange","languagechange","message","mozbeforepaint","offline","online","paint","pageshow","pagehide","popstate","rejectionhandled","storage","unhandledrejection","unload","userproximity","vrdisplayconnected","vrdisplaydisconnected","vrdisplaypresentchange"],ne=["encrypted","waitingforkey","msneedkey","mozinterruptbegin","mozinterruptend"],me=["load"],Je=["blur","error","focus","load","resize","scroll","messageerror"],Se=["bounce","finish","start"],_t=["loadstart","progress","abort","error","load","progress","timeout","loadend","readystatechange"],Fe=["upgradeneeded","complete","abort","success","error","blocked","versionchange","close"],yt=["close","error","open","message"],Qe=["error","message"],ue=["abort","animationcancel","animationend","animationiteration","auxclick","beforeinput","blur","cancel","canplay","canplaythrough","change","compositionstart","compositionupdate","compositionend","cuechange","click","close","contextmenu","curechange","dblclick","drag","dragend","dragenter","dragexit","dragleave","dragover","drop","durationchange","emptied","ended","error","focus","focusin","focusout","gotpointercapture","input","invalid","keydown","keypress","keyup","load","loadstart","loadeddata","loadedmetadata","lostpointercapture","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","mousewheel","orientationchange","pause","play","playing","pointercancel","pointerdown","pointerenter","pointerleave","pointerlockchange","mozpointerlockchange","webkitpointerlockerchange","pointerlockerror","mozpointerlockerror","webkitpointerlockerror","pointermove","pointout","pointerover","pointerup","progress","ratechange","reset","resize","scroll","seeked","seeking","select","selectionchange","selectstart","show","sort","stalled","submit","suspend","timeupdate","volumechange","touchcancel","touchmove","touchstart","touchend","transitioncancel","transitionend","waiting","wheel"].concat(["webglcontextrestored","webglcontextlost","webglcontextcreationerror"],["autocomplete","autocompleteerror"],["toggle"],["afterscriptexecute","beforescriptexecute","DOMContentLoaded","freeze","fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange","fullscreenerror","mozfullscreenerror","webkitfullscreenerror","msfullscreenerror","readystatechange","visibilitychange","resume"],Et,["beforecopy","beforecut","beforepaste","copy","cut","paste","dragstart","loadend","animationstart","search","transitionrun","transitionstart","webkitanimationend","webkitanimationiteration","webkitanimationstart","webkittransitionend"],["activate","afterupdate","ariarequest","beforeactivate","beforedeactivate","beforeeditfocus","beforeupdate","cellchange","controlselect","dataavailable","datasetchanged","datasetcomplete","errorupdate","filterchange","layoutcomplete","losecapture","move","moveend","movestart","propertychange","resizeend","resizestart","rowenter","rowexit","rowsdelete","rowsinserted","command","compassneedscalibration","deactivate","help","mscontentzoom","msmanipulationstatechanged","msgesturechange","msgesturedoubletap","msgestureend","msgesturehold","msgesturestart","msgesturetap","msgotpointercapture","msinertiastart","mslostpointercapture","mspointercancel","mspointerdown","mspointerenter","mspointerhover","mspointerleave","mspointermove","mspointerout","mspointerover","mspointerup","pointerout","mssitemodejumplistitemremoved","msthumbnailclick","stop","storagecommit"]);function it(t,r,u){if(!u||0===u.length)return r;const c=u.filter(v=>v.target===t);if(!c||0===c.length)return r;const _=c[0].ignoreProperties;return r.filter(v=>-1===_.indexOf(v))}function n(t,r,u,c){t&&Ke(t,it(t,r,u),c)}Zone.__load_patch("util",(t,r,u)=>{u.patchOnProperties=Ke,u.patchMethod=ge,u.bindArguments=lt,u.patchMacroTask=Ze;const c=r.__symbol__("BLACK_LISTED_EVENTS"),_=r.__symbol__("UNPATCHED_EVENTS");t[_]&&(t[c]=t[_]),t[c]&&(r[c]=r[_]=t[c]),u.patchEventPrototype=$e,u.patchEventTarget=le,u.isIEOrEdge=Le,u.ObjectDefineProperty=Ee,u.ObjectGetOwnPropertyDescriptor=se,u.ObjectCreate=bt,u.ArraySlice=st,u.patchClass=Ie,u.wrapWithCurrentZone=tt,u.filterProperties=it,u.attachOriginToPatched=Te,u._redefineProperty=Object.defineProperty,u.patchCallbacks=mt,u.getGlobalObjects=()=>({globalSources:He,zoneSymbolEventNames:ce,eventNames:ue,isBrowser:ht,isMix:nt,isNode:he,TRUE_STR:_e,FALSE_STR:De,ZONE_SYMBOL_PREFIX:Ue,ADD_EVENT_LISTENER_STR:et,REMOVE_EVENT_LISTENER_STR:ze})});const l=W("zoneTask");function E(t,r,u,c){let _=null,v=null;u+=c;const b={};function N(S){const O=S.data;return O.args[0]=function(){return S.invoke.apply(this,arguments)},O.handleId=_.apply(t,O.args),S}function R(S){return v.call(t,S.data.handleId)}_=ge(t,r+=c,S=>function(O,j){if("function"==typeof j[0]){const U={isPeriodic:"Interval"===c,delay:"Timeout"===c||"Interval"===c?j[1]||0:void 0,args:j},A=j[0];j[0]=function(){try{return A.apply(this,arguments)}finally{U.isPeriodic||("number"==typeof U.handleId?delete b[U.handleId]:U.handleId&&(U.handleId[l]=null))}};const J=at(r,j[0],U,N,R);if(!J)return J;const X=J.data.handleId;return"number"==typeof X?b[X]=J:X&&(X[l]=J),X&&X.ref&&X.unref&&"function"==typeof X.ref&&"function"==typeof X.unref&&(J.ref=X.ref.bind(X),J.unref=X.unref.bind(X)),"number"==typeof X||X?X:J}return S.apply(t,j)}),v=ge(t,u,S=>function(O,j){const U=j[0];let A;"number"==typeof U?A=b[U]:(A=U&&U[l],A||(A=U)),A&&"string"==typeof A.type?"notScheduled"!==A.state&&(A.cancelFn&&A.data.isPeriodic||0===A.runCount)&&("number"==typeof U?delete b[U]:U&&(U[l]=null),A.zone.cancelTask(A)):S.apply(t,j)})}Zone.__load_patch("legacy",t=>{const r=t[Zone.__symbol__("legacyPatch")];r&&r()}),Zone.__load_patch("queueMicrotask",(t,r,u)=>{u.patchMethod(t,"queueMicrotask",c=>function(_,v){r.current.scheduleMicroTask("queueMicrotask",v[0])})}),Zone.__load_patch("timers",t=>{const r="set",u="clear";E(t,r,u,"Timeout"),E(t,r,u,"Interval"),E(t,r,u,"Immediate")}),Zone.__load_patch("requestAnimationFrame",t=>{E(t,"request","cancel","AnimationFrame"),E(t,"mozRequest","mozCancel","AnimationFrame"),E(t,"webkitRequest","webkitCancel","AnimationFrame")}),Zone.__load_patch("blocking",(t,r)=>{const u=["alert","prompt","confirm"];for(let c=0;c<u.length;c++)ge(t,u[c],(v,b,N)=>function(R,S){return r.current.run(v,t,S,N)})}),Zone.__load_patch("EventTarget",(t,r,u)=>{(function g(t,r){r.patchEventPrototype(t,r)})(t,u),function m(t,r){if(Zone[r.symbol("patchEventTarget")])return;const{eventNames:u,zoneSymbolEventNames:c,TRUE_STR:_,FALSE_STR:v,ZONE_SYMBOL_PREFIX:b}=r.getGlobalObjects();for(let R=0;R<u.length;R++){const S=u[R],U=b+(S+v),A=b+(S+_);c[S]={},c[S][v]=U,c[S][_]=A}const N=t.EventTarget;N&&N.prototype&&r.patchEventTarget(t,[N&&N.prototype])}(t,u);const c=t.XMLHttpRequestEventTarget;c&&c.prototype&&u.patchEventTarget(t,[c.prototype])}),Zone.__load_patch("MutationObserver",(t,r,u)=>{Ie("MutationObserver"),Ie("WebKitMutationObserver")}),Zone.__load_patch("IntersectionObserver",(t,r,u)=>{Ie("IntersectionObserver")}),Zone.__load_patch("FileReader",(t,r,u)=>{Ie("FileReader")}),Zone.__load_patch("on_property",(t,r,u)=>{!function s(t,r){if(he&&!nt||Zone[t.symbol("patchEvents")])return;const u="undefined"!=typeof WebSocket,c=r.__Zone_ignore_on_properties;if(ht){const b=window,N=function Me(){try{const t=Oe.navigator.userAgent;if(-1!==t.indexOf("MSIE ")||-1!==t.indexOf("Trident/"))return!0}catch(t){}return!1}()?[{target:b,ignoreProperties:["error"]}]:[];n(b,ue.concat(["messageerror"]),c&&c.concat(N),Ae(b)),n(Document.prototype,ue,c),void 0!==b.SVGElement&&n(b.SVGElement.prototype,ue,c),n(Element.prototype,ue,c),n(HTMLElement.prototype,ue,c),n(HTMLMediaElement.prototype,ne,c),n(HTMLFrameSetElement.prototype,Et.concat(Je),c),n(HTMLBodyElement.prototype,Et.concat(Je),c),n(HTMLFrameElement.prototype,me,c),n(HTMLIFrameElement.prototype,me,c);const R=b.HTMLMarqueeElement;R&&n(R.prototype,Se,c);const S=b.Worker;S&&n(S.prototype,Qe,c)}const _=r.XMLHttpRequest;_&&n(_.prototype,_t,c);const v=r.XMLHttpRequestEventTarget;v&&n(v&&v.prototype,_t,c),"undefined"!=typeof IDBIndex&&(n(IDBIndex.prototype,Fe,c),n(IDBRequest.prototype,Fe,c),n(IDBOpenDBRequest.prototype,Fe,c),n(IDBDatabase.prototype,Fe,c),n(IDBTransaction.prototype,Fe,c),n(IDBCursor.prototype,Fe,c)),u&&n(WebSocket.prototype,yt,c)}(u,t)}),Zone.__load_patch("customElements",(t,r,u)=>{!function f(t,r){const{isBrowser:u,isMix:c}=r.getGlobalObjects();(u||c)&&t.customElements&&"customElements"in t&&r.patchCallbacks(r,t.customElements,"customElements","define",["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback"])}(t,u)}),Zone.__load_patch("XHR",(t,r)=>{!function R(S){const O=S.XMLHttpRequest;if(!O)return;const j=O.prototype;let A=j[xe],J=j[qe];if(!A){const I=S.XMLHttpRequestEventTarget;if(I){const z=I.prototype;A=z[xe],J=z[qe]}}const X="readystatechange",H="scheduled";function C(I){const z=I.data,Z=z.target;Z[v]=!1,Z[N]=!1;const we=Z[_];A||(A=Z[xe],J=Z[qe]),we&&J.call(Z,X,we);const We=Z[_]=()=>{if(Z.readyState===Z.DONE)if(!z.aborted&&Z[v]&&I.state===H){const Ne=Z[r.__symbol__("loadfalse")];if(0!==Z.status&&Ne&&Ne.length>0){const Re=I.invoke;I.invoke=function(){const re=Z[r.__symbol__("loadfalse")];for(let V=0;V<re.length;V++)re[V]===I&&re.splice(V,1);!z.aborted&&I.state===H&&Re.call(I)},Ne.push(I)}else I.invoke()}else!z.aborted&&!1===Z[v]&&(Z[N]=!0)};return A.call(Z,X,We),Z[u]||(Z[u]=I),Y.apply(Z,z.args),Z[v]=!0,I}function G(){}function Q(I){const z=I.data;return z.aborted=!0,ae.apply(z.target,z.args)}const $=ge(j,"open",()=>function(I,z){return I[c]=0==z[2],I[b]=z[1],$.apply(I,z)}),x=W("fetchTaskAborting"),fe=W("fetchTaskScheduling"),Y=ge(j,"send",()=>function(I,z){if(!0===r.current[fe]||I[c])return Y.apply(I,z);{const Z={target:I,url:I[b],isPeriodic:!1,args:z,aborted:!1},we=at("XMLHttpRequest.send",G,Z,C,Q);I&&!0===I[N]&&!Z.aborted&&we.state===H&&we.invoke()}}),ae=ge(j,"abort",()=>function(I,z){const Z=function U(I){return I[u]}(I);if(Z&&"string"==typeof Z.type){if(null==Z.cancelFn||Z.data&&Z.data.aborted)return;Z.zone.cancelTask(Z)}else if(!0===r.current[x])return ae.apply(I,z)})}(t);const u=W("xhrTask"),c=W("xhrSync"),_=W("xhrListener"),v=W("xhrScheduled"),b=W("xhrURL"),N=W("xhrErrorBeforeScheduled")}),Zone.__load_patch("geolocation",t=>{t.navigator&&t.navigator.geolocation&&function ut(t,r){const u=t.constructor.name;for(let c=0;c<r.length;c++){const _=r[c],v=t[_];if(v){if(!ft(se(t,_)))continue;t[_]=(N=>{const R=function(){return N.apply(this,lt(arguments,u+"."+_))};return Te(R,N),R})(v)}}}(t.navigator.geolocation,["getCurrentPosition","watchPosition"])}),Zone.__load_patch("PromiseRejectionEvent",(t,r)=>{function u(c){return function(_){Pe(t,c).forEach(b=>{const N=t.PromiseRejectionEvent;if(N){const R=new N(c,{promise:_.promise,reason:_.rejection});b.invoke(R)}})}}t.PromiseRejectionEvent&&(r[W("unhandledPromiseRejectionHandler")]=u("unhandledrejection"),r[W("rejectionHandledHandler")]=u("rejectionhandled"))})}},q=>{q(q.s=7435)}]);
(()=>{"use strict";var e,b={},m={};function r(e){var n=m[e];if(void 0!==n)return n.exports;var t=m[e]={exports:{}};return b[e](t,t.exports,r),t.exports}r.m=b,r.amdO={},e=[],r.O=(n,t,o,u)=>{if(!t){var a=1/0;for(i=0;i<e.length;i++){for(var[t,o,u]=e[i],s=!0,f=0;f<t.length;f++)(!1&u||a>=u)&&Object.keys(r.O).every(v=>r.O[v](t[f]))?t.splice(f--,1):(s=!1,u<a&&(a=u));if(s){e.splice(i--,1);var d=o();void 0!==d&&(n=d)}}return n}u=u||0;for(var i=e.length;i>0&&e[i-1][2]>u;i--)e[i]=e[i-1];e[i]=[t,o,u]},r.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return r.d(n,{a:n}),n},r.d=(e,n)=>{for(var t in n)r.o(n,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce((n,t)=>(r.f[t](e,n),n),[])),r.u=e=>(592===e?"common":e)+".js",r.miniCssF=e=>{},r.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{var e={},n="app:";r.l=(t,o,u,i)=>{if(e[t])e[t].push(o);else{var a,s;if(void 0!==u)for(var f=document.getElementsByTagName("script"),d=0;d<f.length;d++){var l=f[d];if(l.getAttribute("src")==t||l.getAttribute("data-webpack")==n+u){a=l;break}}a||(s=!0,(a=document.createElement("script")).type="module",a.charset="utf-8",a.timeout=120,r.nc&&a.setAttribute("nonce",r.nc),a.setAttribute("data-webpack",n+u),a.src=r.tu(t)),e[t]=[o];var c=(g,v)=>{a.onerror=a.onload=null,clearTimeout(p);var _=e[t];if(delete e[t],a.parentNode&&a.parentNode.removeChild(a),_&&_.forEach(h=>h(v)),g)return g(v)},p=setTimeout(c.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=c.bind(null,a.onerror),a.onload=c.bind(null,a.onload),s&&document.head.appendChild(a)}}})(),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;r.tt=()=>(void 0===e&&(e={createScriptURL:n=>n},"undefined"!=typeof trustedTypes&&trustedTypes.createPolicy&&(e=trustedTypes.createPolicy("angular#bundler",e))),e)})(),r.tu=e=>r.tt().createScriptURL(e),r.p="",(()=>{var e={666:0};r.f.j=(o,u)=>{var i=r.o(e,o)?e[o]:void 0;if(0!==i)if(i)u.push(i[2]);else if(666!=o){var a=new Promise((l,c)=>i=e[o]=[l,c]);u.push(i[2]=a);var s=r.p+r.u(o),f=new Error;r.l(s,l=>{if(r.o(e,o)&&(0!==(i=e[o])&&(e[o]=void 0),i)){var c=l&&("load"===l.type?"missing":l.type),p=l&&l.target&&l.target.src;f.message="Loading chunk "+o+" failed.\n("+c+": "+p+")",f.name="ChunkLoadError",f.type=c,f.request=p,i[1](f)}},"chunk-"+o,o)}else e[o]=0},r.O.j=o=>0===e[o];var n=(o,u)=>{var f,d,[i,a,s]=u,l=0;if(i.some(p=>0!==e[p])){for(f in a)r.o(a,f)&&(r.m[f]=a[f]);if(s)var c=s(r)}for(o&&o(u);l<i.length;l++)r.o(e,d=i[l])&&e[d]&&e[d][0](),e[d]=0;return r.O(c)},t=self.webpackChunkapp=self.webpackChunkapp||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))})()})();
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[592],{1055:(r,E,o)=>{o.d(E,{Y:()=>n});var M=o(9808),t=o(2382),P=o(5782),l=o(4893);let n=(()=>{class _{}return _.\u0275fac=function(e){return new(e||_)},_.\u0275mod=l.oAB({type:_}),_.\u0275inj=l.cJS({imports:[[M.ez,t.u5,P.m,t.UX]]}),_})()},3606:(r,E,o)=>{o.r(E),o.d(E,{HorizontalItemListPageModule:()=>_});var M=o(9808),t=o(2382),P=o(3607),l=o(5782),n=o(4893);let _=(()=>{class a{}return a.\u0275fac=function(m){return new(m||a)},a.\u0275mod=n.oAB({type:a}),a.\u0275inj=n.cJS({imports:[[M.ez,t.u5,P.U,l.m,t.UX]]}),a})()},413:(r,E,o)=>{o.r(E),o.d(E,{ItemViewPageModule:()=>n});var M=o(9808),t=o(2382),P=o(5782),l=o(4893);let n=(()=>{class _{}return _.\u0275fac=function(e){return new(e||_)},_.\u0275mod=l.oAB({type:_}),_.\u0275inj=l.cJS({imports:[[M.ez,t.u5,P.m,t.UX]]}),_})()},6840:(r,E,o)=>{o.d(E,{S:()=>_});var M=o(9808),t=o(2382),P=o(3607),l=o(5782),n=o(4893);let _=(()=>{class a{}return a.\u0275fac=function(m){return new(m||a)},a.\u0275mod=n.oAB({type:a}),a.\u0275inj=n.cJS({imports:[[M.ez,t.u5,P.U,l.m,t.UX]]}),a})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[31],{8031:(E,u,c)=>{c.r(u),c.d(u,{RegisterAcccountPageModule:()=>s});var e=c(9808),a=c(2382),t=c(5782),n=c(4893);let s=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[[e.ez,a.u5,t.m,a.UX]]}),o})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[33],{8033:(c,r,a)=>{a.r(r),a.d(r,{ManageMediaPageModule:()=>M});var u=a(9808),e=a(2382),l=a(1055),m=a(5782),s=a(6292),n=a(4893);let g=(()=>{class o{}return o.\u0275fac=function(d){return new(d||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[[u.ez,e.u5,l.Y,m.m,e.UX,s.IJ]]}),o})(),M=(()=>{class o{}return o.\u0275fac=function(d){return new(d||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[[u.ez,e.u5,l.Y,m.m,e.UX,s.IJ,g]]}),o})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[107],{107:(_,n,o)=>{o.r(n),o.d(n,{LoginPageModule:()=>P});var E=o(9808),u=o(2382),M=o(5782),l=o(4893);let P=(()=>{class a{}return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=l.oAB({type:a}),a.\u0275inj=l.cJS({imports:[[E.ez,u.u5,M.m,u.UX]]}),a})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[114],{5114:(m,d,e)=>{e.r(d),e.d(d,{TranscoderSettingssPageModule:()=>g});var c=e(9808),o=e(2382),r=e(1055),u=e(5782),a=e(4893);let l=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=a.oAB({type:s}),s.\u0275inj=a.cJS({imports:[[c.ez,o.u5,u.m,o.UX]]}),s})(),g=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=a.oAB({type:s}),s.\u0275inj=a.cJS({imports:[[c.ez,o.u5,r.Y,l,u.m,o.UX]]}),s})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[132],{8132:(P,l,o)=>{o.r(l),o.d(l,{TvSeriesPageModule:()=>u});var s=o(9808),_=o(2382),t=o(5782),n=o(3606),e=o(4893);let u=(()=>{class a{}return a.\u0275fac=function(M){return new(M||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[s.ez,_.u5,_.UX,t.m,n.HorizontalItemListPageModule]]}),a})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[185],{5185:(E,s,o)=>{o.r(s),o.d(s,{RecoverPasswordPageModule:()=>u});var P=o(9808),e=o(2382),d=o(5782),r=o(4893);let u=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=r.oAB({type:a}),a.\u0275inj=r.cJS({imports:[[P.ez,e.u5,d.m,e.UX]]}),a})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[221],{5221:(n,l,e)=>{e.r(l),e.d(l,{TvSerieDetailPageModule:()=>M});var t=e(9808),_=e(2382),u=e(5782),E=e(413),o=e(4893);let M=(()=>{class a{}return a.\u0275fac=function(D){return new(D||a)},a.\u0275mod=o.oAB({type:a}),a.\u0275inj=o.cJS({imports:[[t.ez,_.u5,u.m,_.UX,E.ItemViewPageModule]]}),a})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[352],{8352:(r,_,a)=>{a.r(_),a.d(_,{SearchViewWebPageModule:()=>M});var E=a(9808),l=a(2382),t=a(5782),u=a(6840),o=a(4893);let M=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[E.ez,l.u5,t.m,l.UX,u.S]]}),e})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[371],{4371:(t,o,s)=>{s.r(o),s.d(o,{ResetPasswordPageModule:()=>l});var d=s(9808),e=s(2382),u=s(5782),P=s(4893);let l=(()=>{class a{}return a.\u0275fac=function(r){return new(r||a)},a.\u0275mod=P.oAB({type:a}),a.\u0275inj=P.cJS({imports:[[d.ez,e.u5,u.m,e.UX]]}),a})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[460],{7460:(_,n,o)=>{o.r(n),o.d(n,{LoginTvPageModule:()=>P});var E=o(9808),u=o(2382),M=o(5782),l=o(4893);let P=(()=>{class a{}return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=l.oAB({type:a}),a.\u0275inj=l.cJS({imports:[[E.ez,u.u5,M.m,u.UX]]}),a})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[467],{3467:(P,l,o)=>{o.r(l),o.d(l,{HomePageModule:()=>u});var m=o(9808),_=o(2382),n=o(5782),e=o(3606),t=o(4893);let u=(()=>{class a{}return a.\u0275fac=function(M){return new(M||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[m.ez,_.u5,_.UX,n.m,e.HorizontalItemListPageModule]]}),a})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[479],{7479:(f,u,o)=>{o.r(u),o.d(u,{SearchViewTvPageModule:()=>c});var n=o(9808),a=o(2382),r=o(5782),m=o(6840),s=o(3607),d=o(4893);let v=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[n.ez,a.u5,s.U,r.m,a.UX]]}),e})(),c=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[n.ez,a.u5,r.m,a.UX,m.S,v]]}),e})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[576],{5576:(L,m,d)=>{d.r(m),d.d(m,{ItemListPageModule:()=>S});var s=d(9808),o=d(2382),u=d(5782),t=d(4893);let r=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[s.ez,o.u5,u.m,o.UX]]}),e})();var l=d(3060);let g=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[s.ez,o.u5,u.m,o.UX,l.G]]}),e})(),P=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[s.ez,o.u5,u.m,o.UX,l.G]]}),e})(),p=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[s.ez,o.u5,u.m,o.UX,l.G]]}),e})();var i=d(6407);let c=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[s.ez,o.u5,u.m,o.UX,r,P,p,i.I]]}),e})(),f=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[s.ez,o.u5,o.UX,u.m,c]]}),e})(),M=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[s.ez,o.u5,o.UX,u.m,f,r,g,i.I]]}),e})(),y=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[s.ez,o.u5,u.m,o.UX,l.G]]}),e})(),F=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[s.ez,o.u5,o.UX,u.m,c,M]]}),e})(),S=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[s.ez,o.u5,o.UX,u.m,M,r,y,F,i.I]]}),e})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[634],{4634:(e,n,t)=>{t.r(n),t.d(n,{MainTvPageModule:()=>C});var E=t(9808),l=t(2382),M=t(7979),d=t(5782),P=t(8348),h=t(4522),s=t(3607),v=t(946),D=t(1511),O=t(5905),a=t(4893);const m=[{path:"hilp",component:h.j,outlet:"rohtp",loadChildren:()=>t.e(592).then(t.bind(t,3606)).then(o=>o.HorizontalItemListPageModule)},{path:"svtp",component:O.c,outlet:"rohtp",loadChildren:()=>Promise.all([t.e(592),t.e(479)]).then(t.bind(t,7479)).then(o=>o.SearchViewTvPageModule)},{path:"ivp",component:P.e,outlet:"rohtp",loadChildren:()=>t.e(592).then(t.bind(t,413)).then(o=>o.ItemViewPageModule)}];let C=(()=>{class o{}return o.\u0275fac=function(T){return new(T||o)},o.\u0275mod=a.oAB({type:o}),o.\u0275inj=a.cJS({imports:[[E.ez,l.u5,s.U,l.UX,d.m,v.f,D.g,M.Bz.forChild(m)]]}),o})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[686],{686:(n,o,a)=>{a.r(o),a.d(o,{MovieDetailPageModule:()=>E});var _=a(9808),l=a(2382),t=a(5782),u=a(413),M=a(4893);let E=(()=>{class e{}return e.\u0275fac=function(D){return new(D||e)},e.\u0275mod=M.oAB({type:e}),e.\u0275inj=M.cJS({imports:[[_.ez,l.u5,t.m,l.UX,u.ItemViewPageModule]]}),e})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[716],{6716:(P,_,a)=>{a.r(_),a.d(_,{SearchViewDesktopPageModule:()=>u});var t=a(9808),o=a(2382),s=a(5782),E=a(6840),l=a(4893);let u=(()=>{class e{}return e.\u0275fac=function(M){return new(M||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[t.ez,o.u5,s.m,o.UX,E.S]]}),e})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[721],{8721:(s,d,a)=>{a.r(d),a.d(d,{LandingPageModule:()=>M});var l=a(9808),o=a(2382),E=a(5782),u=a(4893);let M=(()=>{class n{}return n.\u0275fac=function(g){return new(g||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[l.ez,o.u5,E.m,o.UX]]}),n})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[832],{1832:(P,l,o)=>{o.r(l),o.d(l,{MoviesPageModule:()=>e});var s=o(9808),_=o(2382),t=o(5782),n=o(3606),M=o(4893);let e=(()=>{class a{}return a.\u0275fac=function(E){return new(E||a)},a.\u0275mod=M.oAB({type:a}),a.\u0275inj=M.cJS({imports:[[s.ez,_.u5,_.UX,t.m,n.HorizontalItemListPageModule]]}),a})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[867],{2867:(s,a,o)=>{o.r(a),o.d(a,{NotFoundPageModule:()=>E});var l=o(9808),n=o(2382),t=o(5782),d=o(4893);let E=(()=>{class u{}return u.\u0275fac=function(P){return new(P||u)},u.\u0275mod=d.oAB({type:u}),u.\u0275inj=d.cJS({imports:[[l.ez,n.u5,t.m,n.UX]]}),u})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[994],{2994:(s,l,a)=>{a.r(l),a.d(l,{ConfirmEmailPageModule:()=>r});var E=a(9808),n=a(2382),u=a(5782),m=a(4893);let r=(()=>{class o{}return o.\u0275fac=function(P){return new(P||o)},o.\u0275mod=m.oAB({type:o}),o.\u0275inj=m.cJS({imports:[[E.ez,n.u5,u.m,n.UX]]}),o})()}}]);